(()=>{var __webpack_modules__={712:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){var QGUtils=(()=>{var mn=Object.create,He=Object.defineProperty,gn=Object.getOwnPropertyDescriptor,hn=Object.getOwnPropertyNames,vn=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty,pr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),F=(e,t)=>{for(var r in t)He(e,r,{get:t[r],enumerable:!0})},fr=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of hn(t))!yn.call(e,n)&&n!==r&&He(e,n,{get:()=>t[n],enumerable:!(o=gn(t,n))||o.enumerable});return e},dr=(e,t,r)=>(r=null!=e?mn(vn(e)):{},fr(!t&&e&&e.__esModule?r:He(r,"default",{value:e,enumerable:!0}),e)),gr=pr(((Li,St)=>{"use strict";var Sn=Object.prototype.hasOwnProperty,P="~";function we(){}function An(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function mr(e,t,r,o,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");var i=new An(r,o||e,n),s=P?P+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],i]:e._events[s].push(i):(e._events[s]=i,e._eventsCount++),e}function Ue(e,t){0==--e._eventsCount?e._events=new we:delete e._events[t]}function C(){this._events=new we,this._eventsCount=0}Object.create&&(we.prototype=Object.create(null),(new we).__proto__||(P=!1)),C.prototype.eventNames=function(){var r,o,t=[];if(0===this._eventsCount)return t;for(o in r=this._events)Sn.call(r,o)&&t.push(P?o.slice(1):o);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t},C.prototype.listeners=function(t){var r=P?P+t:t,o=this._events[r];if(!o)return[];if(o.fn)return[o.fn];for(var n=0,i=o.length,s=new Array(i);n<i;n++)s[n]=o[n].fn;return s},C.prototype.listenerCount=function(t){var r=P?P+t:t,o=this._events[r];return o?o.fn?1:o.length:0},C.prototype.emit=function(t,r,o,n,i,s){var c=P?P+t:t;if(!this._events[c])return!1;var d,m,a=this._events[c],u=arguments.length;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),u){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,r),!0;case 3:return a.fn.call(a.context,r,o),!0;case 4:return a.fn.call(a.context,r,o,n),!0;case 5:return a.fn.call(a.context,r,o,n,i),!0;case 6:return a.fn.call(a.context,r,o,n,i,s),!0}for(m=1,d=new Array(u-1);m<u;m++)d[m-1]=arguments[m];a.fn.apply(a.context,d)}else{var x,v=a.length;for(m=0;m<v;m++)switch(a[m].once&&this.removeListener(t,a[m].fn,void 0,!0),u){case 1:a[m].fn.call(a[m].context);break;case 2:a[m].fn.call(a[m].context,r);break;case 3:a[m].fn.call(a[m].context,r,o);break;case 4:a[m].fn.call(a[m].context,r,o,n);break;default:if(!d)for(x=1,d=new Array(u-1);x<u;x++)d[x-1]=arguments[x];a[m].fn.apply(a[m].context,d)}}return!0},C.prototype.on=function(t,r,o){return mr(this,t,r,o,!1)},C.prototype.once=function(t,r,o){return mr(this,t,r,o,!0)},C.prototype.removeListener=function(t,r,o,n){var i=P?P+t:t;if(!this._events[i])return this;if(!r)return Ue(this,i),this;var s=this._events[i];if(s.fn)s.fn===r&&(!n||s.once)&&(!o||s.context===o)&&Ue(this,i);else{for(var c=0,a=[],u=s.length;c<u;c++)(s[c].fn!==r||n&&!s[c].once||o&&s[c].context!==o)&&a.push(s[c]);a.length?this._events[i]=1===a.length?a[0]:a:Ue(this,i)}return this},C.prototype.removeAllListeners=function(t){var r;return t?(r=P?P+t:t,this._events[r]&&Ue(this,r)):(this._events=new we,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=P,C.EventEmitter=C,void 0!==St&&(St.exports=C)})),et={};F(et,{default:()=>kn});var kn,e,t,tt=(e=()=>{kn=NativeUI},()=>(e&&(t=e(e=0)),t)),zo=pr(((xa,$o)=>{$o.exports=function(t,r,o,n){var i=t[0],s=t[1],c=!1;void 0===o&&(o=0),void 0===n&&(n=r.length);for(var a=(n-o)/2,u=0,d=a-1;u<a;d=u++){var m=r[o+2*u+0],v=r[o+2*u+1],x=r[o+2*d+0],g=r[o+2*d+1];v>s!=g>s&&i<(x-m)*(s-v)/(g-v)+m&&(c=!c)}return c}})),Ei={};F(Ei,{EnergyEvent:()=>_t,GameEvent:()=>_e,GameStates:()=>Lt,Locale:()=>fe,PQueue:()=>O,ad:()=>ar,addShortcut:()=>Ze,analytics:()=>ir,appIdEncoder:()=>Ve,assetManager:()=>Gt,audioManager:()=>Kt,chainAd:()=>Zr,checkAppApprovedStatusWithConfig:()=>Z,clearData:()=>pn,configLoader:()=>br,createStateMachine:()=>je,delay:()=>jr,gameLogin:()=>lr,gameState:()=>M,geo:()=>tr,getCity:()=>dt,getEnergyManager:()=>Ir,getGameConfig:()=>yt,getJSON:()=>k,getLocalCity:()=>pt,getNativeAdTag:()=>an,getProbabilityCloseAsClickForNativeAd:()=>ln,initShortcutButton:()=>Kr,isBigScreen:()=>Xr,isGameApproved:()=>cn,isNeedAddShortcut:()=>Xe,loadMultiSubpkg:()=>fn,loadSubpkg:()=>K,localStorage:()=>G,onAdShowSuccess:()=>_n,onEnterState:()=>_r,onGameEvent:()=>_,onLeaveState:()=>Mr,onState:()=>Tn,pool:()=>qr,prefetchContent:()=>Me,prefetchMultiContent:()=>Hr,prevGameEvent:()=>Er,privacyConfirm:()=>Nt,probability:()=>Dr,promisifyShowAd:()=>Rt,rangeCall:()=>zr,recordVideoAndShare:()=>kt,registeGameState:()=>Ln,registerAdBoxPortal:()=>to,removeGameEvent:()=>En,repeat:()=>Qr,setSubPkgWithConfig:()=>Wr,showAdAppBox:()=>eo,showConfirm:()=>sn,throttle:()=>Yr,triggerEvent:()=>V,wait:()=>de});var Pr=dr(gr(),1),Se=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},At=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},hr=e=>void 0===globalThis.DOMException?new At(e):new DOMException(e),vr=e=>{let t=void 0===e.reason?hr("This operation was aborted."):e.reason;return t instanceof Error?t:hr(t)};var U,ee=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)},Ae=class{constructor(){U.set(this,[])}enqueue(t,r){let o={priority:(r={priority:0,...r}).priority,run:t};if(this.size&&ee(this,U,"f")[this.size-1].priority>=r.priority)return void ee(this,U,"f").push(o);let n=function(e,t,r){let o=0,n=e.length;for(;n>0;){let i=Math.trunc(n/2),s=o+i;r(e[s],t)<=0?(o=++s,n-=i+1):n=i}return o}(ee(this,U,"f"),o,((i,s)=>s.priority-i.priority));ee(this,U,"f").splice(n,0,o)}dequeue(){let t=ee(this,U,"f").shift();return null==t?void 0:t.run}filter(t){return ee(this,U,"f").filter((r=>r.priority===t.priority)).map((r=>r.run))}get size(){return ee(this,U,"f").length}};U=new WeakMap;var A,Pe,be,J,Ye,Ee,Qe,D,Ce,T,$e,L,Te,Y,ce,ue,te,ze,yr,xr,Cr,wr,Sr,Ar,qe,bt,Et,Je,w=function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r},p=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)},Ke=()=>{},Cn=new Se,Tt=class extends Error{},O=class extends Pr.default{constructor(t){var r,o,n,i;if(super(),A.add(this),Pe.set(this,void 0),be.set(this,void 0),J.set(this,0),Ye.set(this,void 0),Ee.set(this,void 0),Qe.set(this,0),D.set(this,void 0),Ce.set(this,void 0),T.set(this,void 0),$e.set(this,void 0),L.set(this,0),Te.set(this,void 0),Y.set(this,void 0),ce.set(this,Ke),ue.set(this,Ke),te.set(this,void 0),ze.set(this,void 0),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ae,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(o=null===(r=t.intervalCap)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);w(this,Pe,t.carryoverConcurrencyCount,"f"),w(this,be,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),w(this,Ye,t.intervalCap,"f"),w(this,Ee,t.interval,"f"),w(this,T,new t.queueClass,"f"),w(this,$e,t.queueClass,"f"),this.concurrency=t.concurrency,w(this,te,t.timeout,"f"),w(this,ze,!0===t.throwOnTimeout,"f"),w(this,Y,!1===t.autoStart,"f")}get concurrency(){return p(this,Te,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);w(this,Te,t,"f"),p(this,A,"m",Je).call(this)}async add(t,r={}){return new Promise(((o,n)=>{p(this,T,"f").enqueue((async()=>{var s,c,a;w(this,L,(c=p(this,L,"f"),++c),"f"),w(this,J,(a=p(this,J,"f"),++a),"f");try{if(null!==(s=r.signal)&&void 0!==s&&s.aborted)return void n(new Tt("The task was aborted."));let d=await(void 0===p(this,te,"f")&&void 0===r.timeout?t({signal:r.signal}):function(e,t,r,o){let n,i=new Promise(((s,c)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((o={customTimers:{setTimeout,clearTimeout},...o}).signal){let{signal:a}=o;a.aborted&&c(vr(a)),a.addEventListener("abort",(()=>{c(vr(a))}))}n=o.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof r){try{s(r())}catch(d){c(d)}return}let u=r instanceof Error?r:new Se("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),c(u)}),t),(async()=>{try{s(await e)}catch(a){c(a)}finally{o.customTimers.clearTimeout.call(void 0,n)}})()}else s(e)}));return i.clear=()=>{clearTimeout(n),n=void 0},i}(Promise.resolve(t({signal:r.signal})),void 0===r.timeout?p(this,te,"f"):r.timeout,(()=>{(void 0===r.throwOnTimeout?p(this,ze,"f"):r.throwOnTimeout)&&n(Cn)})));o(d),this.emit("completed",d)}catch(u){n(u),this.emit("error",u)}p(this,A,"m",Cr).call(this)}),r),p(this,A,"m",qe).call(this),this.emit("add")}))}async addAll(t,r){return Promise.all(t.map((async o=>this.add(o,r))))}start(){return p(this,Y,"f")?(w(this,Y,!1,"f"),p(this,A,"m",Je).call(this),this):this}pause(){w(this,Y,!0,"f")}clear(){w(this,T,new(p(this,$e,"f")),"f")}async onEmpty(){if(0!==p(this,T,"f").size)return new Promise((t=>{let r=p(this,ce,"f");w(this,ce,(()=>{r(),t()}),"f")}))}async onSizeLessThan(t){if(!(p(this,T,"f").size<t))return new Promise((r=>{let o=()=>{p(this,T,"f").size<t&&(this.removeListener("next",o),r())};this.on("next",o)}))}async onIdle(){if(0!==p(this,L,"f")||0!==p(this,T,"f").size)return new Promise((t=>{let r=p(this,ue,"f");w(this,ue,(()=>{r(),t()}),"f")}))}get size(){return p(this,T,"f").size}sizeBy(t){return p(this,T,"f").filter(t).length}get pending(){return p(this,L,"f")}get isPaused(){return p(this,Y,"f")}get timeout(){return p(this,te,"f")}set timeout(t){w(this,te,t,"f")}};Pe=new WeakMap,be=new WeakMap,J=new WeakMap,Ye=new WeakMap,Ee=new WeakMap,Qe=new WeakMap,D=new WeakMap,Ce=new WeakMap,T=new WeakMap,$e=new WeakMap,L=new WeakMap,Te=new WeakMap,Y=new WeakMap,ce=new WeakMap,ue=new WeakMap,te=new WeakMap,ze=new WeakMap,A=new WeakSet,yr=function(){return p(this,be,"f")||p(this,J,"f")<p(this,Ye,"f")},xr=function(){return p(this,L,"f")<p(this,Te,"f")},Cr=function(){var t;w(this,L,(t=p(this,L,"f"),--t),"f"),p(this,A,"m",qe).call(this),this.emit("next")},wr=function(){p(this,ce,"f").call(this),w(this,ce,Ke,"f"),0===p(this,L,"f")&&(p(this,ue,"f").call(this),w(this,ue,Ke,"f"),this.emit("idle"))},Sr=function(){p(this,A,"m",Et).call(this),p(this,A,"m",bt).call(this),w(this,Ce,void 0,"f")},Ar=function(){let t=Date.now();if(void 0===p(this,D,"f")){let r=p(this,Qe,"f")-t;if(!(r<0))return void 0===p(this,Ce,"f")&&w(this,Ce,setTimeout((()=>{p(this,A,"m",Sr).call(this)}),r),"f"),!0;w(this,J,p(this,Pe,"f")?p(this,L,"f"):0,"f")}return!1},qe=function(){if(0===p(this,T,"f").size)return p(this,D,"f")&&clearInterval(p(this,D,"f")),w(this,D,void 0,"f"),p(this,A,"m",wr).call(this),!1;if(!p(this,Y,"f")){let t=!p(this,A,"m",Ar).call(this);if(p(this,A,"a",yr)&&p(this,A,"a",xr)){let r=p(this,T,"f").dequeue();return!!r&&(this.emit("active"),r(),t&&p(this,A,"m",bt).call(this),!0)}}return!1},bt=function(){p(this,be,"f")||void 0!==p(this,D,"f")||(w(this,D,setInterval((()=>{p(this,A,"m",Et).call(this)}),p(this,Ee,"f")),"f"),w(this,Qe,Date.now()+p(this,Ee,"f"),"f"))},Et=function(){0===p(this,J,"f")&&0===p(this,L,"f")&&p(this,D,"f")&&(clearInterval(p(this,D,"f")),w(this,D,void 0,"f")),w(this,J,p(this,Pe,"f")?p(this,L,"f"):0,"f"),p(this,A,"m",Je).call(this)},Je=function(){for(;p(this,A,"m",qe).call(this););};var Le=e=>new Promise(((t,r)=>{let o=new XMLHttpRequest;o.open("GET",e),o.responseType="text",o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):r(o.responseText))},o.send()})),Pn=e=>e.replace(/\s/g," ").trim();function k(e){return Le(e).then((t=>{try{return JSON.parse(Pn(t))}catch(r){return r.message}}))}function br(e,t="https://cdn.imagehost.top/heigame/"){return k(`${t}${e}.json`)}var l=xyx;function je(e,t){let s,r=new Set,o=[],n=e.reduce(((u,d)=>(u[d]=0,u)),{}),i=()=>o[0];let a={resetState:()=>{o.length=0,s=void 0,Object.keys(n).forEach((u=>{n[u]=0}))},isInState:u=>o[0]===u,gotoState:u=>{i()!==u&&(function(u){let d=i();if(t&&d&&!t.find((([v,x])=>v===d&&x===u)))throw new Error(`state flow rule error: ${d} -> ${u}`)}(u),s=i(),o.unshift(u),n[u]=n[u]+1,r.forEach((d=>d(s,u))))},gotoPrevHistoryState:()=>{o.length>1&&(s=o.shift(),r.forEach((u=>u(s,i()))))},gotoPrevState:()=>{a.gotoState(s)},getCurrState:i,getPrevState:()=>s,getPrevHistoryState:()=>o[1],getTimes:u=>n[u],onStateChange:u=>{r.add(u)},addState:u=>{n.hasOwnProperty(u)&&(n[u]=0)}};return a}var g,h,_e=((h=_e||{}).Loading="Loading",h.Ready="ready",h.MainEnter="main-enter",h.LevelListEnter="level-list-enter",h.LevelReady="level-ready-enter",h.LevelLoading="level-loading-enter",h.LevelStart="level-start",h.LevelStartAuto="level-start-auto",h.LevelPass="level-pass",h.LevelFail="level-fail",h.LevelComplete="level-complete",h.LevelPause="level-pause",h.LevelResume="level-resume",h.LevelRestart="level-restart",h.LevelQuit="level-quit",h.LevelNext="level-next",h.LevelNextScene="level-next-scene",h.LevelSceneStart="level-scene-start",h.LevelSceneComplete="level-scene-complete",h.LevelShowRevive="level-show-revive",h.LevelRevived="level-revived",h.SkinTrialShow="skin-trial-show",h.SkinTrialClose="skin-trial-close",h.GameComplete="game-complete",h.ShowRewardedVideoAdRequest="show-rewarded-vide-ad-request",h.ShopEnter="shop-enter",h.ShopLeave="shop-leave",h.AchievementEnter="achievement-enter",h.AchievementLeave="achievement-leave",h.HappyTime="happy-time",h.ShareVideoRecordRequest="share-video-record-request",h.SignEnter="sign-enter",h.SignLeave="sign-leave",h.EVENT_PRIVACY_CONFIRMED="event-privacy-confirmed",h.EVENT_PRIVACY_SHOWED="event-privacy-showed",h.EVENT_PRIVACY_COMPLETE="event-privacy-complete",h.LocaleChanged="locale-changed",h),Er="Loading",Lt=((g=Lt||{}).LOADING="loading",g.MAIN="main",g.LIST="list",g.READY="ready",g.LEVEL_LOADING="level-loading",g.GAME="game",g.SHOP="shop",g.SIGN="sign",g.ACHIEVEMENT="achievement",g.COMPLETE="complete",g.REVIVE="revive",g.PAUSE="pause",g.SKIN_TRIAL="skin-trial",g.PRIVACY_CONFIRM="privacy-confirm",g),M=je(["loading","main","list","ready","level-loading","game","shop","sign","achievement","complete","revive","pause","skin-trial","privacy-confirm"]);function _(e,t,r=!1){if(!e)throw new Error("can not listen empty event");return r?l.emiter.once(e,t):l.emiter.on(e,t)}function En(e,t){if(!e)throw new Error("can not remove empty event");t?l.emiter.rm(t,e):l.emiter.rmall(e)}var Tr=e=>`enter-state-${e}`,Lr=e=>`leave-state-${e}`;function _r(e,t,r=!1){_(Tr(e),t,r)}function Mr(e,t,r=!1){_(Lr(e),t,r)}function Tn(e,t,r,o=!1){t&&_r(e,t,o),r&&Mr(e,r,o)}var pe={loading:{eventsEnter:new Set(["Loading"]),eventsHistoryBack:new Set},main:{eventsEnter:new Set(["main-enter"]),eventsHistoryBack:new Set},list:{eventsEnter:new Set(["level-list-enter"]),eventsHistoryBack:new Set},"level-loading":{eventsEnter:new Set(["level-loading-enter"]),eventsHistoryBack:new Set},game:{eventsEnter:new Set(["level-start","level-resume","level-next-scene","level-scene-start","level-scene-complete"]),eventsHistoryBack:new Set},pause:{eventsEnter:new Set(["level-pause"]),eventsHistoryBack:new Set},shop:{eventsEnter:new Set(["shop-enter"]),eventsHistoryBack:new Set(["shop-leave"])},ready:{eventsEnter:new Set(["level-ready-enter"]),eventsHistoryBack:new Set},complete:{eventsEnter:new Set(["level-pass","level-fail","level-complete"]),eventsHistoryBack:new Set},achievement:{eventsEnter:new Set(["achievement-enter"]),eventsHistoryBack:new Set(["achievement-leave"])},revive:{eventsEnter:new Set(["level-show-revive"]),eventsHistoryBack:new Set(["level-revived"])},"skin-trial":{eventsEnter:new Set(["skin-trial-show"]),eventsHistoryBack:new Set(["skin-trial-close"])},sign:{eventsEnter:new Set(["sign-enter"]),eventsHistoryBack:new Set(["sign-leave"])},"privacy-confirm":{eventsEnter:new Set(["event-privacy-showed"]),eventsHistoryBack:new Set(["event-privacy-confirmed"])}},Ln=(e,t,r=[])=>{if("string"==typeof t&&(t=[t]),"string"==typeof r&&(r=[r]),pe[e]){let o=pe[e];t.forEach((n=>o.eventsEnter.add(n))),r.forEach((n=>o.eventsHistoryBack.add(n)))}else pe[e]={eventsEnter:new Set(t),eventsHistoryBack:new Set(r)},M.addState(e)},V=(e,t)=>{var o;if(!e)throw new Error("can not trigger empty event");if("level-complete"===e)throw new Error("do not trigger LevelComplete directly, use LevelPass or LevelFail instead which will trigger LevelComplete automatically");Er=e;let r=Object.keys(pe).find((n=>pe[n].eventsEnter.has(e)));return r?M.gotoState(r):null!=(o=pe[M.getCurrState()])&&o.eventsHistoryBack.has(e)&&M.gotoPrevHistoryState(),l.emiter.emit(e,t),("level-pass"===e||"level-fail"===e)&&l.emiter.emit("level-complete",t),!1};M.onStateChange(((e,t)=>{e&&l.emiter.emit(Lr(e),t),l.emiter.emit(Tr(t),e)})),M.gotoState("loading");var _n=(e,t)=>{l.emiter.on(l.ADEvent.Play_Start,(r=>{r.adType===e&&t()}))},Rr="xyx-utils-energy-manager",_t=(t=>(t.Changed="energy-changed",t))(_t||{});function Ir(e){let t;try{let f=l.storage.getItem(Rr);f&&(t=JSON.parse(f))}catch(f){t=null}let{maxEnergy:r=10,minutesForRecovery:o=3,videoRewardedEnergy:n=3,shareVideoRewardedEnergy:i=2,levelCostEnergy:s=1,autoUpdateInterval:c=1e4,numToShowTips:a=4,videoRequestHandler:u}=e||{};e.initialEnery&&console.warn("EnergyManager: initialEnery is deprecated, use initialEnergy instead");let d=e.initialEnergy||e.initialEnery||r,m=0;function v(){c&&(m=setTimeout((function(){console.log("autoUpdate"),y(),x(),v()}),c))}function x(){l.storage.setItem(Rr,JSON.stringify(t))}function g(f,H=!1){let le=t.energy;if(H&&t.energy>=r)return t;let N=t.energy+f;H&&(N=Math.min(N,r)),t={...t,energy:N},N!==le&&l.emiter.emit("energy-changed",N)}function y(){let{num:f,newRecordTime:H}=function(e,t){let r=Date.now()-e,o=6e4*t|0,n=Math.floor(r/o),i=e+o*n;return console.log(`calcRecoveryNum: recordTime: ${e}, num: ${n}, newRecordTime: ${i}`),{num:n,newRecordTime:i}}(t.recordTime,o);f&&(console.log("recoveryEnergy: ",f),g(f,!0),t={...t,recordTime:H},console.log(t.recordTime)),t.energy>=r&&(t={...t,recordTime:Date.now()})}t||(t={energy:d,recordTime:Date.now()},x()),v();let S={getConfig:()=>({maxEnergy:r,minutesForRecovery:o,videoRewardedEnergy:n,shareVideoRewardedEnergy:i,levelCostEnergy:s,numToShowTips:a}),addEnergyFromVideo(){y(),g(n),x()},addEnergyFromShareViedo(){y(),g(i),x()},useEnergy:()=>!(t.energy<=0)&&(y(),t={...t,energy:Math.max(0,t.energy-s)},x(),l.emiter.emit("energy-changed"),!0),getEnergy:()=>(y(),x(),console.log("EnergyManager:getEnergy",t.energy),t.energy),getEnergyPercent:()=>Math.min(S.getEnergy(),r)/r,requestEnergyVideo(){u()},startAutoUpdate:v,stopAutoUpdate(){m&&clearTimeout(m)}};return S}function Dr(e){let t=Math.ceil(100*Math.random());return console.log(`probability: res: ${t} vs target: ${e}`),t<=e}var B=new Map,b=xyxVM;var Mt="xyx_locale",Rn=["zh","en","es","pt"];function Nr(e,...t){for(let r=0;r<t.length;r++)e=e.replace(`[${r+1}]`,t[r]);return e}function Fr(e,t,...r){let o=e[t];if(null===o)return"";if(0===r.length)return o;if("object"==typeof o){let n=r[0];return r.shift(),Fr(o,n,...r)}return Nr(o,...r)}function Gr(e,t,...r){let o=e[l.getLocale()][t];if(null===o)return"";if(0===r.length)return o;if("object"==typeof o){let n=r[0];return r.shift(),Fr(o,n,...r)}return Nr(o,...r)}var fe=class{static setLocale(t){let r=l.getLocale();if(r===t)return;let o=r;G.setItem(Mt,t),l.setLocale(t),b.setLocale(t),r=l.getLocale(),V("locale-changed",{prevLocale:o,curLocale:r})}static getLocale(){return l.getLocale()}static isLocaleSelected(){return null!==G.getItem(Mt)}static getSuggestedLocale(){let t=G.getItem(Mt);if(t)return t;let r=l.getSystemInfoSync().language.split("_")[0];return l.getSupportedLocales().includes(r)?r:l.getLocale()}static getValue(t,r,...o){return Gr(t,r,...o)}constructor(t){this.localization=t}getValue(t,...r){return Gr(this.localization,t,...r)}patchLocalization(t){Rn.forEach((r=>{this.localization[r]?this.localization[r]={...this.localization[r],...t[r]}:this.localization[r]=t[r]}))}},Vr=new fe({zh:{"load-failed-title":"加载分包失败","load-failed-content":"分包：[1] 加载失败：[2]。请退出重进"},en:{"load-failed-title":"Load Subpackage Failed","load-failed-content":"Subpackage: [1] load failed: [2]. Please restart the game"},es:{"load-failed-title":"Error al cargar subpaquete","load-failed-content":"Error al cargar subpaquete: [1]: [2]. Por favor, reinicie el juego"},pt:{"load-failed-title":"Erro ao carregar subpacote","load-failed-content":"Erro ao carregar subpacote: [1]: [2]. Por favor, reinicie o jogo"}});function K(e,t){console.log("loadSubpackage: ",e);let o,r=B.get(e);return r?(console.log("loadSubpackage from cache: ",e),t&&(1===r.status?t(1):r.progress.add(t)),r.promise):(o=window.xyxZipBundleConfig?async function(e){await b.preloadZipBundle(e);let t=B.get(e);t&&(t.status=1,t.progress.forEach((r=>r(1))))}(e):function(e){return new Promise((function(t,r){l.loadSubpackage({name:e,success:function(n){console.log("loadSubpackage: ",e," success",n),setTimeout((()=>{let i=B.get(e);i&&(i.status=1,i.progress.forEach((s=>s(1)))),t()}),30)},fail:function(n){l.showDialog({title:Vr.getValue("load-failed-title"),content:Vr.getValue("load-failed-content",e,n.msg?n.msg:l.getErrorMsg(n))}),console.error(n);let i=B.get(e);i&&(i.progress.clear(),B.delete(e),i=null),r(n)}}).onProgressUpdate((n=>{console.log("subPackage: ",e,"downloading progress: ",n.progress);let i=B.get(e);i&&i.progress.forEach((s=>s(n.progress)))}))}))}(e),r={name:e,status:0,promise:o,progress:new Set},t&&r.progress.add(t),B.set(e,r),o)}var Wr=(e,{extraSubPkg:t=new Set(["privacyConfirm"]),subPkgIgnoreAutoLoad:r=new Set,routeProcessor:o}={})=>k(e).then((n=>{let i=(e=>{let t=new Map;return Object.keys(e).forEach((r=>{let o=e[r];t.set(r,new Set(o))})),t})(n);window.xyxRouteMapRoute=window.xyxRouteMapRoute||[],window.xyxRouteMapRoute.unshift(["",s=>{s=o?o(s):s;for(let[c,a]of i.entries())if(a.has(s))return`${c}/${s}`;return!1}]),window.xyxLoadSubpkgForMappedRoute=s=>{if(-1===s.indexOf("/"))return Promise.resolve();let c=s.split("/")[0];return!i.has(c)&&!t.has(c)||r.has(c)?Promise.resolve():K(c)}})).catch((n=>{console.error("load config failed: ",n)}));function Me(e){return console.warn("prefetchContent is deprecated and has no effect"),Promise.resolve(e)}function Hr(e,{onProgress:t,concurrency:r=1/0}){let o=e.map((()=>0)),i=e.map((s=>s));return new O({concurrency:r}).addAll(e.map(((s,c)=>()=>Me(s).then((a=>(i[c]=a,(s=>c=>{o[s]=c;let a=o.reduce(((u,d)=>u+d),0);t&&t(a/e.length)})(c)(1),a))))))}function Qr(e,t=1,r=null,o=300){let i,n=1;return new Promise((s=>{Ur(e,r,t,n)?(n++,i=setInterval((()=>{Ur(e,r,t,n)?n++:(clearInterval(i),s())}),o)):s()}))}function Ur(e,t,r,o){if(console.log("doRepeat: ",r,o),o>r)return!1;try{return e.call(t),!0}catch(n){return!1}}var $r=new Map;function zr(e,t=1,r=1/0){var n;let o=null!=(n=$r.get(e))?n:0;console.debug("rangeCall: ",e,t,o,r),o>=t&&o<=r&&e(),$r.set(e,o+1)}function qr(e,t=0,r="pool"){let o=[],n=(...i)=>console.log(`pool-${r}: `,...i);if(0!==t){n(`precreate ${t} of item`);for(let i=0;i<t;i++)o.push(e(null))}return{take:function(){return o.length?(n("take from poll"),e(o.pop())):(n("take from create"),e(null))},collect(i){-1===o.indexOf(i)&&(n("collect"),o.push(i))}}}function Yr(e,t,r=null){let o=!0;return(...n)=>{o&&(o=!1,e.call(r,...n),setTimeout((()=>o=!0),t))}}var Jr="xyx-shortcut-installed";function Xe(){return new Promise((e=>{if(!l.isSupportShortcut())return e(!1);l.hasShortcutInstalled({success(t){e(!t)},fail(){e(!1)}})}))}function Ze(){return new Promise(((e,t)=>{l.installShortcut({success(){let r=null===l.storage.getItem(Jr);e(r),l.storage.setItem(Jr,"1")},fail(r){t(r)}})}))}function Kr(e,{onAddSuccess:t}){Promise.resolve().then((()=>(tt(),et))).then((r=>{let o=r.createNativeUI(((n,i)=>{let s=new i.Container,{onShow:c,onHide:a,onMount:u,onUnMount:d}=e(s,i);return s.visible=!1,n.addChild(s),s.addEventListener("click",(()=>{Ze().then((()=>{t(),o.hide()})).catch((()=>{l.showToast({message:"添加失败"})}))})),{onShow(...m){Xe().then((v=>{v&&n.visible&&(s.visible=!0,c&&c(...m))}))},onHide(...m){s.visible=!1,a&&a(...m)},onMount:u,onUnMount:d}}));return o}))}var de=e=>new Promise((t=>setTimeout(t,e))),jr=e=>t=>de(e).then(t),Xr=Math.max(window.innerWidth,window.innerHeight)/Math.min(window.innerWidth,window.innerHeight)>16/9;function Rt(e){return new Promise(((t,r)=>{e.show({onShow:()=>{t()},onFail:()=>{r(new Error("Failed to show"))}})}))}function Zr(e){let t;return{show:()=>(t=null,e.reduce(((r,o)=>r.catch((()=>(t=o,Rt(o))))),Promise.reject())),hide(){t&&t.hide()}}}var rt=!1;function eo(e,{timeout:t=3e3,MSG_REQUESTING:r="更多游戏请求中",MSG_NO_DATA:o="暂无更多游戏推荐"}={}){if(rt)return l.showToast({message:r});rt=!0,setTimeout((()=>{rt=!1}),t),e.show({onComplete:n=>{rt=!1,n!==l.ADState.Play_User_Finish&&l.showToast({message:o})}})}function to({adId:e,image:t,marginTop:r,showOnState:o,hideDelay:n=1e3}){Array.isArray(o)||(o=[o]);let i,s,c=()=>{s=null,i&&i.hide()};o.forEach((u=>{QGUtils.onState(u,(()=>{s?(clearTimeout(s),s=null):(i=l.createBoxPortal(e,{image:t,marginTop:r}),i.show())}),(()=>{s=setTimeout(c,n)}))}))}var kt={};F(kt,{VideoEvents:()=>no,VideoStatus:()=>oo,configShare:()=>Qn,isAbleShareRecordVideo:()=>Un,pause:()=>Wn,recordClip:()=>io,resume:()=>Hn,share:()=>$n,start:()=>Vn,stop:()=>Bn});var re,s,c,R=l.getGameRecorderManager(),me="",oe=0,ro=0,ot=3,oo=((c=oo||{})[c.Unstart=0]="Unstart",c[c.Recording=1]="Recording",c[c.StopCalled=2]="StopCalled",c[c.Stoped=3]="Stoped",c[c.Cliping=4]="Cliping",c[c.Failed=5]="Failed",c[c.Finished=6]="Finished",c),no=((s=no||{}).RecordStart="record-video-start",s.RecordStopCalled="record-video-stop-called",s.RecordStop="record-video-stop",s.ClipFinished="clip-video-finished",s.ClipFailed="clip-video-failed",s.RecordShareSuccess="record-video-share-success",s),E=0,Re=[],nt=!1;R.onStart((e=>{console.log("gameRecorderManager: onStart"),E=1,oe=0,ro=Date.now(),l.emiter.emit("record-video-start")})),R.onStop((e=>{console.log("gameRecorderManager: onStop with videoPath: ",e.videoPath),E=3,me=e.videoPath;let t=Math.min(oe,30);if(t>ot&&!nt){E=4;let r={path:e.videoPath,success(o){console.log("gameRecorderManager: clipVideo success with videoPath: ",me),me=o.videoPath,E=6,l.emiter.emit("clip-video-finished")},fail(){console.log("gameRecorderManager: clipVideo fail"),E=5,l.emiter.emit("clip-video-failed")}};Re.length?(console.log("gameRecorderManager: clipVideo with clipRange: "),r.clipRange=Re):(console.log("gameRecorderManager: clipVideo with timeRage: ",t),r.timeRange=[t,0]),console.log("gameRecorderManager: clipVideo start"),R.clipVideo(r)}l.emiter.emit("record-video-stop"),nt=!1})),R.onError((()=>{console.log("gameRecorderManager: onError"),E=5,oe=0,me=""}));var Dt=!1,It=(e=300)=>{console.log("gameRecorderManager: call _start"),Dt=!0,Re=[],E=1,R.start({duration:e})};function Vn(e=300){console.log("gameRecorderManager: call start"),re?(console.log("gameRecorderManager: will call start when stopPromise resolved"),re.then((()=>{console.log("gameRecorderManager: stopPromise resolved, call start"),It(e)})).catch((()=>{console.log("gameRecorderManager: stopPromise rejected, call start"),It(e)}))):It(e)}function Bn(e=!1){return nt=e,console.log("gameRecorderManager: call stop"),oe=(Date.now()-ro)/1e3|0,Dt?(Dt=!1,l.isSupportGameRecord||window.xyxPassiveShareVideo?(Re.length&&!nt?(console.log("gameRecorderManager: do recordClip then stop"),io(5,0).then((()=>{console.log("gameRecorderManager: recordClip success then stop"),R.stop()})).catch((function(){console.log("gameRecorderManager: recordClip fail then stop"),R.stop()}))):(console.log("gameRecorderManager: do stop"),R.stop()),l.emiter.emit("record-video-stop-called"),E=2,re=new Promise(((t,r)=>{let o=()=>{i(),t()},n=()=>{i(),r()},i=()=>{l.emiter.rm(o,"clip-video-finished"),l.emiter.rm(n,"clip-video-failed"),re=null};l.emiter.once("clip-video-finished",o),l.emiter.once("clip-video-failed",n),setTimeout((()=>{i(),r()}),1e3)})),window.xyxPassiveShareVideo&&setTimeout((()=>{E=6,l.emiter.emit("clip-video-finished")}),300),re):Promise.resolve()):(console.log("gameRecorderManager: call stop but not start so return"),E=0,Promise.resolve())}function Wn(){console.log("gameRecorderManager: call pause"),R.pause()}function Hn(){console.log("gameRecorderManager: call resume"),R.resume()}function io(e=3,t=3){return console.log("gameRecorderManager: recordClip",e,t),new Promise(((r,o)=>{R.recordClip({timeRange:[e,t],success(n){Re.push(n.index),r({})},fail(){o()}})}))}function Un(){return l.isSupportGameRecord&&oe>=ot||window.xyxPassiveShareVideo}var Ot={templateId:"",desc:"",title:"",videoTopics:[]};function Qn(e){Ot={...Ot,...e}}function $n(e){let{fail:t,success:r,templateId:o,desc:n,title:i,videoTopics:s}={...Ot,...e};if(window.xyxPassiveShareVideo)return r&&r({msg:"passive success"}),l.emiter.emit("record-video-share-success");if(0===E)return console.log("gameRecorderManager: share but not start"),t&&t("分享失败：录屏时长过短");if(5===E)return t&&t("录屏失败，不能分享");if(2===E)return t&&t("录屏结束处理中，请稍后再试");if(4===E)return t&&t("录屏裁剪中，请稍候再试");if(oe<=ot)return console.log("录屏时长: ",oe),t&&t(`录屏失败：录屏时长低于 ${ot} 秒`);let c=()=>{console.log("gameRecorderManager: do share with: ",me,o),R.publishVideo({templateId:o,title:i,desc:n,video:me,tags:s,success:a=>{r&&r(a),l.emiter.emit("record-video-share-success")},fail:a=>{if(console.log("recordVideoAndShare: share failed",a),"shareAppMessage:cancel"===a)t&&t("分享已取消");else{if(a.startsWith("shareAppMessage:fail video file is too short"))return t&&t("分享失败：录屏时长过短");if(a.startsWith("shareAppMessage:fail can not be shared without clicking by user"))return t&&t("分享失败，未能捕捉事件，请再次点击尝试");t&&t("分享失败，请稍后再试")}}})};if(6!==E)return re?(l.showLoading({title:"正在生成录屏，请稍等"}),void re.then((()=>{l.hideLoading(),c()})).catch((a=>{l.hideLoading(),t&&t("录屏生成失败，请稍后再试")}))):t&&t("录屏还未结束，请稍候再试");c()}var Gt={};F(Gt,{getAssetTypeWithUrl:()=>ao,load:()=>he,loadAudio:()=>co,loadImage:()=>lo});var ge=new Map,ao=e=>{let t=e.split("?")[0];if(/[png|jpg|jpeg]$/.test(t))return 0;if(/[mp3|ogg]$/.test(t))return 1;throw new Error(`Unknown asset type for url: ${e}`)},lo=(e,t)=>t&&ge.has(t)?Promise.resolve(ge.get(t)):new Promise(((r,o)=>{let n=new Image;n.onload=()=>{t&&ge.set(t,n),r(n)},n.onerror=()=>o(n),n.crossOrigin="anonymous",n.src=e})),co=(e,t)=>t&&ge.has(t)?Promise.resolve(ge.get(t)):new Promise(((r,o)=>{let n=new Audio;n.addEventListener("canplaythrough",(()=>{t&&ge.set(t,n),r(n)})),n.addEventListener("error",(()=>o(n))),n.src=e})),so=(e,{isCache:t}={})=>e?Me(e).then((r=>{let o=ao(r),n=t?e:void 0;switch(o){case 0:return lo(r,n).then((i=>i));case 1:return co(r,n).then((i=>i))}})):Promise.resolve(null);function he(e,{isCache:t}={isCache:!0}){return Array.isArray(e)?Promise.all(e.map((r=>so(r,{isCache:t})))):so(e,{isCache:t})}var Nt={};F(Nt,{EVENT_PRIVACY_COMPLETE:()=>zn,EVENT_PRIVACY_CONFIRMED:()=>fo,EVENT_PRIVACY_SHOWED:()=>mo,autoShowPrivacyConfirm:()=>qn,isPrivacyConfirmAgreed:()=>po,showPrivacyConfirm:()=>go});var uo="privacy-confirm-is-argreed",po=()=>"true"===localStorage.getItem(uo),fo="event-privacy-confirmed",mo="event-privacy-showed",zn="event-privacy-complete",Ie=!1;function go({parentNodeGetter:e,isCacheResource:t,resources:r={bg:"privacyConfirm/privacy-confirm-bg.png",contentBg:"privacyConfirm/privacy-confirm-content-bg.png",title:"privacyConfirm/privacy-confirm-title.png",btnPrev:"privacyConfirm/privacy-confirm-prev.png",btnNext:"privacyConfirm/privacy-confirm-next.png",btnAgree:"privacyConfirm/privacy-confirm-agree.png",btnDisagree:"privacyConfirm/privacy-confirm-disagree.png",contents:["privacyConfirm/privacy-confirm-1.png","privacyConfirm/privacy-confirm-2.png","privacyConfirm/privacy-confirm-3.png","privacyConfirm/privacy-confirm-4.png"]},isNeedUserAgreement:o=!1,agreementResources:n={title:"privacyConfirm/user-agreements-title.png",contents:["privacyConfirm/user-agreements-1.png","privacyConfirm/user-agreements-2.png"]},onConfirmed:i,onRejected:s,opt:c}){if(Ie)return void console.warn("There is a privacy confirm showing, please wait until it is closed.");Ie=!0;let a=()=>{let u=he([r.bg,r.contentBg,r.title,r.btnPrev,r.btnNext,r.btnAgree,r.btnDisagree,...r.contents],{isCache:t});return o?Promise.all([u,he([n.title,...n.contents],{isCache:t})]):Promise.all([u])};return Promise.resolve().then((()=>(tt(),et))).then((u=>{let d=u.default?u.default:u;return K("privacyConfirm").then(a).then((m=>{let[v,x=[]]=m,[g,y,S,f,H,le,N,...xt]=v;console.log("privacy confirm resources all loaded");let cr=d.getStageWidth(),ur=d.getStageHeight(),wt=d.PrivacyConfirm({stageSize:{width:cr,height:ur},contentSize:{width:.8*cr|0,height:.8*ur},imgs:{bg:g,contentBg:y,title:S,contents:xt,btnPrev:f,btnNext:H,btnAgree:le,btnDisagree:N},isNeedUserAgreement:o,agreementResources:{title:x[0],contents:x.slice(1)},opt:c,handleAgree:()=>{localStorage.setItem(uo,"true"),wt.container.destroy(),Ie=!1,i&&i(),V(fo)},handleDisagree:()=>{s?s():l.showDialog({title:"注意",content:"需要同意《隐私政策》才能继续游戏",showCancel:!1,confirmText:"确定"})}}),{container:dn}=wt;return d.addChild(e(),dn.node),V(mo),wt})).catch((m=>{console.log("privacy confirm resources load failed",m.message,m),Ie=!1}))})).catch((u=>{console.error("import native-ui failed",u.message,u),Ie=!1}))}function qn({showOnEvent:e="main-enter",onShow:t,onComplete:r,...o}){let n=()=>{if(po())return r&&r(),void V("event-privacy-complete");go({...o,onConfirmed:()=>{o.onConfirmed&&o.onConfirmed(),r&&r(),V("event-privacy-complete")}}).then((i=>{t&&i&&t(i)}))};e?_(e,n,!0):n()}var Kt={};F(Kt,{addCachedAudio:()=>ni,disableAudio:()=>Bo,disableMusic:()=>ko,disableSound:()=>Fo,enableAudio:()=>Vo,enableMusic:()=>Oo,enableSound:()=>No,isAudioDisabled:()=>j,isMusicDisabled:()=>X,isSoundDisabled:()=>ke,pauseMusic:()=>Zn,playMusic:()=>Wo,playSound:()=>ti,preloadAudio:()=>oi,resumeMusic:()=>ei,setMaxPoolSizePerAudio:()=>yo,stopMusic:()=>Jt,stopSound:()=>ri,toggleAudio:()=>Xn,toggleMusic:()=>Kn,toggleSound:()=>jn});var ho=new Map,vo=10,yo=e=>{vo=e},xo=e=>{let t=ho.get(e);return t||(t={size:0,pool:new Set},ho.set(e,t)),t},Ft=e=>{let r,t=xo(e);return 0===t.pool.size?t.size>=vo?(console.log("AudioManager: audio pool is full for url:",e),null):(t.size++,r=new Audio(e),r.addEventListener("ended",(()=>{t.pool.add(r)})),r):(r=t.pool.values().next().value,t.pool.delete(r),r)},it=(e,t)=>{xo(e).pool.add(t)},Vt=new Map,Bt=async(e,t)=>{if(Vt.has(t))return Vt.get(t);let r=await(async(e,t)=>{let o=await(await fetch(t)).arrayBuffer();return await e.decodeAudioData(o)})(e,t);return Vt.set(t,r),r},$=xyx.isBrowser&&!xyx.isWeb,Q=null;$&&(Q=new AudioContext);async function Wt(e){if(!e)return console.warn("no AudioInfo to operation");if($){e.source&&De(e);let t=await Bt(Q,e.url);e.source=Q.createBufferSource(),e.source.buffer=t,e.source.loop=e.loop,e.gain=Q.createGain(),e.gain.gain.value=e.volume,e.source.connect(e.gain),e.gain.connect(Q.destination),e.source.start(0),e.onEnded&&(e.source.onended=()=>{e.onEnded(e)})}else{if(e.audio||(e.audio=Ft(e.url)),!e.audio)return;e.audio.loop=e.loop,e.audio.volume=e.volume,e.onEnded&&(e.audio.onended=()=>{e.onEnded(e)}),await e.audio.play()}}function De(e){if(!e)return console.warn("no AudioInfo to stop");if($){if(!e.source)return console.warn("no AudioInfo.source to stop");try{e.source.buffer&&e.source.stop(),e.source.disconnect(),e.gain.disconnect()}catch(t){console.error("stopAudioInfo: failed: ",e,t)}e.source=null,e.gain=null}else{if(!e.audio)return console.warn("no AudioInfo.audio to stop");e.audio.pause(),e.audio.currentTime=0}}function st(e,t){if(!e)return console.warn("no AudioInfo to set mute status");if($){if(null==e||!e.gain)return console.warn("no AudioInfo.gain to set mute status");e.gain.gain.value=t?0:e.volume}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to set mute status");e.audio.muted=t}}var Oe,Ht,Ut,ne=new Set,To=null,Yn=new O({concurrency:1}),ie=e=>(console.log("addMusicOperation: ",e),Yn.add(e)),at=Promise.resolve();xyx.isBrowser&&(at=new Promise((e=>{let t=!1,r=()=>{window.mainCanvas.removeEventListener("touchstart",r),t||(t=!0,e()),e()};window.mainCanvas.addEventListener("touchstart",r)}))),Oe="true"===localStorage.getItem("xyx-audio-disabled"),Ht="true"===localStorage.getItem("xyx-music-disabled")||Oe,Ut="true"===localStorage.getItem("xyx-sound-disabled")||Oe;var j=()=>Oe,X=()=>Ht,ke=()=>Ut,Qt=e=>{ne.delete(e)};function Io(e){De(e),Qt(e),e.audio&&it(e.url,e.audio)}var $t=(e,t)=>{Ht=!e,t&&(e?localStorage.removeItem("xyx-music-disabled"):localStorage.setItem("xyx-music-disabled","true"))},zt=(e,t)=>{Ut=!e,t&&(e?localStorage.removeItem("xyx-sound-disabled"):localStorage.setItem("xyx-sound-disabled","true"))},qt=(e,t)=>{Oe=!e,t&&(e?localStorage.removeItem("xyx-audio-disabled"):localStorage.setItem("xyx-audio-disabled","true"))},se=()=>To,Yt=0;at.then((()=>{Q&&"suspended"===Q.state&&Q.resume()}));var Oo=async e=>{$t(!0,e);let t=se();t&&await Wo(t.url,t.loop,t.volume)},ko=async e=>{$t(!1,e),await Jt()},Kn=async e=>{X()?await Oo(e):await ko(e)},Go=e=>((e=>{ne.forEach((t=>st(t,e)))})(e),ie((()=>{let t=se();t&&st(t,e)}))),No=e=>{zt(!0,e)},Fo=e=>{zt(!1,e),ne.forEach(Io),ne.clear()},jn=e=>{ke()?No(e):Fo(e)},Vo=async e=>{qt(!0,e),await Go(!1)},Bo=async e=>{qt(!1,e),await Go(!0)},Xn=async e=>{j()?await Vo(e):await Bo(e)},Wo=async(e,t=!0,r=1)=>{let o=se();if(o&&o.url===e&&(e=>!!e&&($?e.source&&e.source.buffer:e.audio&&!e.audio.paused))(o)){if(X()||j())return;return void function(e,t){if(!e)return console.warn("no AudioInfo to set volume");if($){if(null==e||!e.gain)return console.warn("no AudioInfo.gain to set volume");e.gain.gain.value=t}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to set volume");e.audio.volume=t}}(o,r)}await Jt();let n=++Yt,i={url:e,volume:r,loop:t};if(await ie((()=>(e=>To=e)(i))),!X()&&!j()&&i)return await at,n!==Yt||X()||j()?void 0:ie((()=>Wt(i)))},Zn=()=>ie((()=>function(e){if(!e)return console.warn("no AudioInfo to pause");if($){if(null==e||!e.source)return console.warn("no AudioInfo.source to pause");e.source.playbackRate.value=0}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to pause");e.audio.pause()}}(se()))),ei=()=>ie((()=>{X()||function(e){if(!e)return console.warn("no AudioInfo to resume");if($){if(null==e||!e.source)return console.warn("no AudioInfo.source to resume");e.source.playbackRate.value=1}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to resume");e.audio.play()}}(se())})),Jt=()=>ie((()=>{let e=se();e&&De(e)})),ti=async(e,t=!1,r=1)=>{if(ke()||j())return;let o={url:e,volume:r,loop:t,onEnded:()=>{Qt(o)}};await Wt(o),(e=>{ne.add(e)})(o)},ri=e=>{(e=>{ne.forEach((t=>{t.url===e&&(Io(t),ne.delete(t))}))})(e)},oi=e=>async function(e){$&&await Bt(Q,e),Ft(e)}(e),ni=e=>{it(e.src,e)},G={};F(G,{clear:()=>si,disableDailyKey:()=>pi,enableDailyKey:()=>fi,genSwitcher:()=>ae,getItem:()=>Ge,getJSON:()=>Ho,isDisabledDailyKey:()=>ui,isEnabledDailyKey:()=>ci,removeItem:()=>ii,setItem:()=>ve,setJSON:()=>ai,toggleDailyKey:()=>di});var I=new Map,Ge=e=>(I.has(e)||I.set(e,b.localStorage.getItem(e)),I.get(e)),ve=(e,t)=>{let r=Ge(e);r&&r===t||(I.set(e,t),b.localStorage.setItem(e,t))},ii=e=>{I.has(e)&&I.delete(e),b.localStorage.removeItem(e)},si=()=>{I=new Map,b.localStorage.clear()},Ho=e=>{if(!I.has(e))try{I.set(e,JSON.parse(b.localStorage.getItem(e)))}catch(t){I.set(e,null)}return I.get(e)},ai=(e,t)=>{let r=Ho(e);if((!r||r!==t)&&t)try{ve(e,JSON.stringify(t)),I.set(e,t)}catch(o){console.warn("setJSON failed: ",o)}},ae=(e,t=!0)=>{let r=`${e}_switcher_disabled`,o=!t;null===Ge(r)?ve(r,t?"false":"true"):o="true"===Ge(r);let n={isEnabled:()=>!o,isDisabled:()=>o,disable(){ve(r,"true"),o=!0},enable(){ve(r,"false"),o=!1},toggle(){o?n.enable():n.disable()}};return n},Ne=e=>`${e}_${(()=>{let e=new Date;return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`})()}`,ci=(e,t=!0)=>ae(Ne(e),t).isEnabled(),ui=(e,t=!0)=>ae(Ne(e),t).isDisabled(),pi=e=>{ae(Ne(e)).disable()},fi=e=>{ae(Ne(e)).enable()},di=e=>{ae(Ne(e)).toggle()},tr={};F(tr,{confirmAppApprovedByGeo:()=>Xo,getGeoCity:()=>gt,getLocalGeoCity:()=>mt,setCDNBase:()=>Uo});var jt="https://res.heigame.com/vivoRes/DeliciousFoodV2.3.0/static";function Uo(e){jt=e}var lt=String.fromCharCode,mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",ct={};function Qo(e){return null==e?"":""===e?null:function(e,t,r){let n,d,m,v,x,g,y,S,o=[],i=4,s=4,c=3,a="",u=[],f={val:r(0),position:t,index:1};for(d=0;d<3;d+=1)o[d]=d;for(v=0,g=Math.pow(2,2),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;switch(n=v){case 0:for(v=0,g=Math.pow(2,8),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;S=lt(v);break;case 1:for(v=0,g=Math.pow(2,16),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;S=lt(v);break;case 2:return""}for(o[3]=S,m=S,u.push(S);;){if(f.index>e)return"";for(v=0,g=Math.pow(2,c),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;switch(S=v){case 0:for(v=0,g=Math.pow(2,8),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;o[s++]=lt(v),S=s-1,i--;break;case 1:for(v=0,g=Math.pow(2,16),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;o[s++]=lt(v),S=s-1,i--;break;case 2:return u.join("")}if(0===i&&(i=Math.pow(2,c),c++),o[S])a=o[S];else{if(S!==s)return null;a=m+m.charAt(0)}u.push(a),o[s++]=m+a.charAt(0),i--,m=a,0===i&&(i=Math.pow(2,c),c++)}}((e=e.replace(/ /g,"+")).length,32,(function(t){return function(e,t){if(!ct[e]){ct[e]={};for(let r=0;r<e.length;r++)ct[e][e.charAt(r)]=r}return ct[e][t]}(mi,e.charAt(t))}))}function ye(e){return fetch(`${jt}/${e}.json`).then((t=>t.json())).then((t=>{let r=Qo(t.s);return JSON.parse(r)}))}var qo=dr(zo()),Xt=({latitude:e,longitude:t,address:r})=>r.find((o=>o.polygon.find((n=>{if((0,qo.default)([t,e],n))return n}))));function Yo({provinceList:e,latitude:t,longitude:r,index:o=0}){if(o>=e.length)return Promise.resolve(null);return ye(`province/${e[o].id}`).then((i=>Xt({latitude:t,longitude:r,address:[i]})||Yo({provinceList:e,latitude:t,longitude:r,index:o+1})))}function Jo({latitude:e,longitude:t}){return ye("province/short").then((r=>Yo({provinceList:r.filter((n=>Xt({latitude:e,longitude:t,address:[n]}))),latitude:e,longitude:t}))).then((r=>{if(!r)throw new Error("未找到省级行政编码");return["110000","120000","310000","500000","810000","820000"].includes(r.id)?r.id:ye(`city/${r.id}`).then((n=>{let i=Xt({latitude:e,longitude:t,address:n});return i?i.id:r.id}))}))}var vi=()=>{let e="http://ip-api.com/json/?lang=zh-CN&fields=city";return b.xyxAddAllowedUrlPrefix(e),k(e).then((t=>{if(t&&t.city)return t.city;throw new Error("获取城市失败")}))},xi=()=>(()=>{let e="https://www.taobao.com/help/getip.php";return b.xyxAddAllowedUrlPrefix(e),Le(e).then((t=>{let o=t.trim().match(/ip:"([^"]+)"/);if(o&&o[1])return o[1];throw new Error("获取 ip 失败")}))})().then((e=>{let t=`https://ip.taobao.com/outGetIpInfo?ip=${e}&accessKey=alibaba-inc`;return b.xyxAddAllowedUrlPrefix(t),k(t)})).then((e=>{if(0===e.code)return e.data.city;throw new Error("获取城市失败")})),Zt="xyx-cached-local-city",ut=null,pt=()=>localStorage.getItem(Zt),ft=e=>e.replace(/市$/,""),dt=()=>{let e=localStorage.getItem(Zt);return e?Promise.resolve(e):ut||(ut=(()=>{let e="http://whois.pconline.com.cn/ipJson.jsp?callback=jsShow";return b.xyxAddAllowedUrlPrefix(e),Le(e).then((t=>{let o=t.trim().match(/jsShow\((.*)\)/);if(o&&o[1]){let n=JSON.parse(o[1]);if(n.err)throw new Error("获取城市失败");return n.city}throw new Error("获取城市失败")}))})().catch(vi).catch(xi).catch((()=>(console.warn("getCity failed"),null))).then((t=>((t=ft(t||""))&&localStorage.setItem(Zt,t),t))),ut)},er="xyx-cached-local-geo-city",mt=()=>G.getItem(er);function gt({latitude:e,longitude:t}){return Jo({latitude:e,longitude:t}).then((r=>{if(!r)throw new Error("非中国境内");return function(e){let t={province:"",provinceCode:"",city:"",cityCode:"",district:"",districtCode:"",code:e,address:""};return ye("areaList/index").then((r=>{if(!r.some((n=>n.id===e?(t.province=n.name,t.provinceCode=n.id,!0):!!n.children&&n.children.some((i=>i.id===e&&(t.province=n.name,t.provinceCode=n.id,t.city=i.name,t.cityCode=i.id,!0))))))throw new Error("未找到行政编码关联的城市");return t}))}(r)})).then((r=>{let o=ft(r.city);return o||(o=ft(r.province)),G.setItem(er,o),o})).catch((r=>(console.error(r),G.setItem(er,"未知地区"),"未知地区")))}function W(){return l.currentPlatform}function ht(){let e=window.XYX_GAME_VERSION.replace(/\./g,"_");return`${W()}-${e}-approved`}function xe(e,t){return e===t||(e.length>=t.length?e.startsWith(t):t.startsWith(e))}var Si=10,Ai=19;function Z(e){let t=ht();if(!e)return console.log("checkAppApprovedStatusWithConfig: no config return false"),!1;let r=W();if(r===l.PLATFORMS.OPPO||r===l.PLATFORMS.VIVO||r===l.PLATFORMS.Web){let{blockedHourRange:o=[[Si,Ai]],hourRangeActiveCityList:n=[],checkHourRangeOnCityRequestFailed:i=!1}=e[r]||{},s=(new Date).getHours(),c=pt(),a=!1;for(let[u,d]of o)s>=u&&s<d&&(console.log("checkAppApprovedStatusWithConfig: under block range",s,o),a=!0);if(r===l.PLATFORMS.OPPO&&a)return console.log("checkAppApprovedStatusWithConfig: oppo under block range return false"),!1;if(r===l.PLATFORMS.VIVO||r===l.PLATFORMS.Web){if(null===c&&i&&a)return console.log("checkAppApprovedStatusWithConfig: get city failed & need check hour range & under block range, return false"),!1;if(null!==c&&n.some((u=>xe(u,c)))&&a)return console.log("checkAppApprovedStatusWithConfig: get city success & city in active city list & under block range, return false",c,n),!1}}return void 0===e[t]&&W()===l.PLATFORMS.Web?!(!window.IsGameApproved&&!window.isGameApproved):(console.log("checkAppApprovedStatusWithConfig: return config[platformVersionKey] === 1",1===e[t]),1===e[t])}function Xo(e){let t=Z(e);if(!t)return console.log("confirmAppApprovedByGeo: game is not approved by config, return false"),Promise.resolve(t);if((xyx.isVIVO||xyx.isWeb&&window.XYX_IS_DEVELOPMENT)&&e.vivo&&e.vivo.hourRangeActiveCityList.length>0){let r=QGUtils.getLocalCity();if(r&&e.vivo.hourRangeActiveCityList.some((i=>xe(r,i))))return console.log("confirmAppApprovedByGeo: current ip city is in active city list, return IsGameApproved"),Promise.resolve(t);let n=mt();return n?xe(r,n)?(console.log("confirmAppApprovedByGeo: city from ip and local geo is same, return IsGameApproved",r,n),Promise.resolve(t)):(console.log("confirmAppApprovedByGeo: city from ip and local geo is different, return false",r,n),Promise.resolve(!1)):new Promise(((e,t)=>{l.getLocation({success:r=>{e(r)},fail:r=>{t(r)}})})).then(gt).then((i=>xe(r,i)?(console.log("confirmAppApprovedByGeo: city from ip and geo is same, return IsGameApproved",r,i),t):(console.log("confirmAppApprovedByGeo: city from ip and geo is different, return false",r,i),!1))).catch((()=>"force-close"===e.vivo.policyOnGeoLocationFailed?(console.log("confirmAppApprovedByGeo: get geo failed, return false for force-close"),!1):(console.log("confirmAppApprovedByGeo: get geo failed, return IsGameApproved for follow-ip"),t)))}return Promise.resolve(t)}var ir={};F(ir,{EventAnalytics:()=>rr,EventEnterMainScene:()=>en,EventLevelEnd:()=>or,EventLevelNext:()=>rn,EventLevelReward:()=>nr,EventLevelStart:()=>tn,EventLoadingComplete:()=>Zo,EventRewardClick:()=>on,onAnalytics:()=>nn});var rr="game-analytics",Zo="loading_end",en="game_page",tn="level_begin",or="level_end",nr="level_reward",rn="level_next",on="reward_click",q=(e,t)=>{V(rr,{eventName:e,param:t})},nn=e=>{_(rr,e)};l.useCrossFrame&&nn((({eventName:e,param:t})=>{l.crossFrameRequest({action:"sendEvent",eventName:e,param:t})})),_("ready",(()=>{window.focus(),q(Zo)})),_("main-enter",(()=>{window.focus(),q(en)}));var z=1;_("level-start",(e=>{null!=e&&e.levelNum&&(z=e.levelNum),q(tn,{levelNum:z})})),_("level-pass",(e=>{q(or,{levelNum:z,result:"Pass"}),q(nr,{levelNum:z,withReward:null!=e&&e.withReward?1:0}),z++})),_("level-fail",(e=>{q(or,{levelNum:z,result:"Fail"}),q(nr,{levelNum:z,withReward:null!=e&&e.withReward?1:0})})),_("level-next",(e=>{null!=e&&e.levelNum&&(z=e.levelNum),q(rn,{levelNum:z})})),l.emiter.on(l.ADEvent.Play_Start,(e=>{e===l.ADType.RewardedVideoAd&&q(on,{sceneName:M.getCurrState()})}));var ar={};F(ar,{processIdMap:()=>Ci});var Fe="",Ci=e=>new Proxy(e,{get:(t,r)=>(t.hasOwnProperty(r)&&"string"==typeof r&&(Fe=r,de(100).then((()=>{Fe===r&&(Fe="")}))),Reflect.get(t,r))}),sr=!0;function sn({parentNodeGetter:e,isCacheResource:t,resources:r,onOK:o,onCancel:n,opt:i}){return Promise.resolve().then((()=>(tt(),et))).then((c=>{let a=c.default?c.default:c;return he([r.bg,r.contentBg,r.title,r.btnPrev,r.btnNext,r.btnOK,r.btnCancel,...r.contents],{isCache:t}).then((u=>{let[d,m,v,x,g,y,S,...f]=u,H=a.getStageWidth(),le=a.getStageHeight(),N=a.Confirm({stageSize:{width:H,height:le},contentSize:{width:.8*H|0,height:.8*le},imgs:{bg:d,contentBg:m,title:v,contents:f,btnPrev:x,btnNext:g,btnOK:y,btnCancel:S},onOK:o,onCancel:n,opt:i}),{container:xt}=N;return a.addChild(e(),xt.node),N})).catch((u=>{console.error("show confirm failed: ",u)}))})).catch((c=>{console.error("import native-ui failed: ",c)}))}function Ve(e){return(17*e.split("").join("C").split("").reduce(((r,o)=>r+o.charCodeAt(0)),0)).toString(16).split("").reverse().join("")}if(l.useCrossFrame&&l.emitter.on(l.ADEvent.Play_Request,(e=>{let{ad:t,showParam:r}=e;t.adType===l.ADType.InterstitialAd&&(r.intention=r.intention||(()=>{let e=M.getCurrState();return sr&&de(0).then((()=>{sr=!1})),sr&&"main"===e?l.ADIntention.Start:"pause"===e?l.ADIntention.Pause:"game"===e?l.ADIntention.Next:l.ADIntention.Browse})()),r.position=r.position||Fe||M.getCurrState()})),"92d3"!==Ve("gqk2020"))throw new Error("appIdEncoder 代码发生错误变更，请更正");var Be="https://res.heigame.com/xyx/config/";function vt(e,t=Be){return`${t}${e=e.replace(/-/g,"")}-${Ve(e)}.json`}var We={};function yt(e,t=Be){let r=vt(e,t),o=()=>k(r).then((n=>(We=n,n)));return xyx.isVIVO||xyx.isWeb&&window.XYX_IS_DEVELOPMENT?Promise.all([dt(),o()]).then((([n,i])=>i)):o()}function an(e,t){return`state-${e}-${t}`}function ln(e){var t,r,o,n,i,s,c,a,u,d;return e&&Z(We)?void 0!==(null==(r=null==(t=We[W()])?void 0:t.probabilityCloseAsClick)?void 0:r[e])?null==(n=null==(o=We[W()])?void 0:o.probabilityCloseAsClick)?void 0:n[e]:void 0!==(null==(c=null==(s=null==(i=null==window?void 0:window.xyxGameConfig)?void 0:i[W()])?void 0:s.probabilityCloseAsClick)?void 0:c[e])?null==(d=null==(u=null==(a=null==window?void 0:window.xyxGameConfig)?void 0:a[W()])?void 0:u.probabilityCloseAsClick)?void 0:d[e]:0:0}function cn(e,t=Be){let r=vt(e,t);return console.log("isGameApproved",e,r,ht()),yt(e,t).then(Z).catch((()=>!1))}var un=!1,lr=e=>new Promise((t=>{if("undefined"!=typeof qg&&qg.gameLoginWithReal)if(un)t();else{if(!e.hwAppId)throw new Error("hwAppId is required");qg.gameLoginWithReal({forceLogin:1,appid:e.hwAppId,success:()=>{un=!0,t()},fail:(...r)=>{console.error("gameLogin fail",...r),xyx.showDialog({title:"登录失败",content:"请检查网络并重试",confirmText:"重试",showCancel:!1,success:()=>{lr(e).then(t)}})}}),xyx.showToast({message:"登录进行中，请稍候..."})}else t()}));function pn({confirmData:e={},successData:t={}}){l.showDialog({title:"清除数据",content:"确认后将清除所有数据，包括游戏进度、账号信息等，是否继续？",confirmText:"确认",cancelText:"取消",success:r=>{if(r.confirm)try{l.storage.clear(),l.showDialog({title:"成功",content:"清除数据成功，请重新启动游戏",confirmText:"退出",showCancel:!1,success:()=>{l.exitApplication()},...t})}catch(o){l.showToast({message:"清除数据失败，请重试"})}},...e})}function fn(e,{onProgress:t,concurrency:r=1/0}={}){let o=e.map((()=>0));return new O({concurrency:r}).addAll(e.map(((s,c)=>()=>K(s,(s=>c=>{o[s]=c;let u=o.reduce(((d,m)=>d+m),0)/e.length;console.log("loadMultiSubpkg: ",e," progress: ",u),t&&t(u)})(c)))))}return(e=>fr(He({},"__esModule",{value:!0}),e))(Ei)})();window.QGUtils=QGUtils}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},796:()=>{var xyx=(()=>{var Se=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor,$t=Object.getOwnPropertyNames,jt=Object.prototype.hasOwnProperty,Pa={};((o,e)=>{for(var t in e)Se(o,t,{get:e[t],enumerable:!0})})(Pa,{ADEvent:()=>q,ADIntention:()=>pe,ADState:()=>X,ADType:()=>d,Emitter:()=>Q,Encoding:()=>R,FsmEvent:()=>F,GAME_RECORDER_VIDEO_PATH_NO_NEED:()=>he,NativeAdInteractionType:()=>K,PLATFORMS:()=>fe,QQShareAppType:()=>Je,QQShareItem:()=>Ye,ShareAppMessageCancel:()=>ft,TTShareChannel:()=>ue,TT_LANDSCAPE_MAX_AD_WIDTH:()=>Ve,TT_LANDSCAPE_MIN_AD_WIDTH:()=>Ne,TT_PORTRAIT_MIN_AD_WIDTH:()=>Ke,VIVOAdLayout:()=>ie,botPromise:()=>N,calcCustomAdHeight:()=>dt,calcStyle:()=>D,createAppBox:()=>Qo,createBannerAd:()=>ze,createBoxPortal:()=>Wo,createCanvas:()=>{},createCustomAd:()=>it,createFullScreenVideoAd:()=>Jo,createGameDrawerAd:()=>jo,createImage:()=>Po,createInnerAudioContext:()=>{},createInterstitialAd:()=>Xe,createLoopGameBannerAd:()=>$o,createRewardedVideoAd:()=>$e,createStaticGameBannerAd:()=>Xo,crossFrameRequest:()=>_,currentPlatform:()=>ea,devicePixelRatio:()=>He,download:()=>Gt,emiter:()=>Zr,emitter:()=>Jr,exitApplication:()=>Ee,getCanvasRenderingContext2D:()=>To,getErrorMsg:()=>I,getFileSystemManager:()=>{},getGameRecorderManager:()=>mt,getLocale:()=>lo,getLocaleContent:()=>x,getLocation:()=>Vt,getMainCanvas:()=>{},getNetworkType:()=>ko,getSupportedLocales:()=>io,getSystemInfoSync:()=>L,getUserPathPrefix:()=>xe,hasShortcutInstalled:()=>kt,hideKeyboard:()=>ht,hideLoading:()=>V,hideShareMenu:()=>Kr,installShortcut:()=>It,is2345:()=>Sa,isAFG:()=>va,isAndroid:()=>Ta,isBOTIM:()=>ba,isBrowser:()=>Ut,isCordova:()=>ha,isGPT:()=>ya,isHW:()=>fa,isHippoo:()=>Aa,isIOS:()=>Ca,isKS:()=>ma,isKwai:()=>ca,isMI:()=>pa,isMZ:()=>ia,isMz:()=>na,isNotchScreen:()=>ro,isOPPO:()=>aa,isOppo:()=>ra,isQQ:()=>la,isSupportAppBox:()=>zo,isSupportBoxPortalAd:()=>Uo,isSupportCustomAd:()=>st,isSupportCustomGameRecorderShareButton:()=>pt,isSupportDownload:()=>Bt,isSupportFS:()=>co,isSupportFavoriteGuide:()=>Dt,isSupportGameDrawerAd:()=>Yo,isSupportGameRecord:()=>ct,isSupportNativeAd:()=>at,isSupportNavigateToMiniGame:()=>Mt,isSupportPayment:()=>Wt,isSupportShareAppMessage:()=>$r,isSupportShortcut:()=>Lt,isSupportShowShareMenu:()=>Xr,isSupportVibrate:()=>eo,isTT:()=>da,isTt:()=>sa,isVIVO:()=>ta,isVivo:()=>oa,isWX:()=>ua,isWeb:()=>wa,isXLB:()=>ga,jumpGameCenter:()=>lt,loadFont:()=>{},loadSubpackage:()=>Rt,nativeAdCreator:()=>nt,navigateToMiniGame:()=>Et,navigateToVideoView:()=>zr,offHide:()=>Le,offKeyboardComplete:()=>bt,offKeyboardConfirm:()=>yt,offKeyboardInput:()=>St,offShareAppMessage:()=>Ur,offShow:()=>ke,onCompassChange:()=>Ct,onError:()=>Re,onExit:()=>Me,onFavoriteStateChange:()=>Ht,onHide:()=>Ie,onKeyboardComplete:()=>At,onKeyboardConfirm:()=>wt,onKeyboardInput:()=>gt,onNetworkStatusChange:()=>Io,onReady:()=>vo,onShareAppMessage:()=>Wr,onShow:()=>Oe,onTouchCancel:()=>{},onTouchEnd:()=>{},onTouchMove:()=>{},onTouchStart:()=>{},pick:()=>v,reportMonitor:()=>rt,request:()=>{},requestPayment:()=>Kt,setAdSilent:()=>qo,setLocale:()=>so,setPreferredFramesPerSecond:()=>vt,shareAppMessage:()=>Qr,showDialog:()=>qe,showFavoriteGuide:()=>Ft,showKeyboard:()=>ut,showLoading:()=>ae,showShareMenu:()=>Vr,showToast:()=>re,startCompass:()=>Tt,stopCompass:()=>Pt,storage:()=>xo,supportSetFrame:()=>xt,timeout:()=>Be,triggerReady:()=>me,useCrossFrame:()=>xa,vibrate:()=>Ze,wait:()=>P});window.qg,window.qg;"undefined"!=typeof globalThis&&globalThis.tt?globalThis.tt:"undefined"!=typeof window&&window.tt&&window.tt,window.mz,window.qg,window.mz_jsb;var U,W=window.cordova;U=window.devicePixelRatio||1;var oo,to="";{let o=/android/i.test(navigator.userAgent),e=getComputedStyle(document.documentElement),t=r=>{let a=e.getPropertyValue(r);return window.XYX_WITH_REAL_DEVICE_PIXEL_RATIO?a?parseInt(a,10):0:a?parseInt(a,10)*U:0};oo=()=>({brand:to,model:"",screenHeight:window.innerHeight*U,screenLogicHeight:window.innerHeight,screenWidth:window.innerWidth*U,screenLogicWidth:window.innerWidth,language:window.navigator.language,platform:o?"android":"ios",safeArea:{...G,top:t("--sat"),right:t("--sar"),bottom:t("--sab"),left:t("--sal")}})}W&&W.exec&&W.exec((o=>{console.debug("获取设备信息成功",o),to=o}),(()=>console.debug("获取设备信息失败")),"AdController","getDevice",["getDevice"]);"undefined"!=typeof globalThis&&globalThis.qq?globalThis.qq:"undefined"!=typeof window&&window.qq&&window.qq,window.qg,window.ks,window.qg,window.wx;var L,G={left:0,right:0,top:0,bottom:0,width:0,height:0},Ae=()=>({brand:"",model:"",screenHeight:0,screenLogicHeight:0,screenWidth:0,screenLogicWidth:0,language:"zh_CN",platform:"android",safeArea:G});Ae=function(){return oo()};var ro=()=>0!==Ae().safeArea.top;function B(o){return void 0!==o&&"function"==typeof o.then&&"function"==typeof o.catch}function P(o,e){return new Promise((t=>{setTimeout((()=>t(e)),o)}))}function ao(o,e,t){let r=!1;for(let a=0;a<o.length;){let l=o[a],[n,m]=l;if(-1!==e&&n===e)return o.splice(a,1),!0;null!==t&&t===m&&(o.splice(a,1),r=!0),a++}return r}L=()=>{let o=Ae();return window.XYX_WITH_REAL_DEVICE_PIXEL_RATIO&&(o.screenWidth=o.screenLogicWidth,o.screenHeight=o.screenLogicHeight),o};var de=class{constructor(){this.maps={},this.uid=0,this._duringEmit=!1}add(e,t,r=null,a=0,l=!1){if(!e)throw new Error("can not listen on empty eventName");let n=this.uid++,m=this.maps[e]||[];return m.push([n,t,r,a,l]),m.sort((function(M,T){return T[3]-M[3]})),this.maps[e]=m,n}on(e,t,r=null,a=0){return this.add(e,t,r,a,!1)}once(e,t,r=null,a=0){return this.add(e,t,r,a,!0)}every(e,t=null){let r=this.uid++,a=this.everyEventListeners||[];return a.push([r,e,t,0,!1]),this.everyEventListeners=a,r}rmEvery(e){let t,r=-1;"number"==typeof e?r=e:t=e;let a=this.everyEventListeners||[];this._duringEmit&&(this.everyEventListeners=a=a.concat()),ao(a,r,t)}rm(e,t){let r=-1,a=null;"number"==typeof e?r=e:a=e;let l=t?[t]:Object.keys(this.maps),n=!1;for(let m=l.length-1;m>=0;m--){let M=l[m],T=this.maps[M];T&&(this._duringEmit&&(this.maps[M]=T=T.concat()),ao(T,r,a)&&(n=!0))}return n}rmall(e){null==e?(console.warn("rmall without eventName, so REMOVE ALL EVENTS"),this.maps={}):delete this.maps[e]}_emit(e,...t){let a,r=this.maps[e];if(console.log("emit event: ",e,...t),r&&r.length>0){let n=r.concat();for(let m=n.length-1;m>=0;m--){let M=n[m],[T,f,p,Oa,Qt]=M;Qt&&r.splice(m,1),this._duringEmit=!0;try{a=f.call(p,...t)}catch(zt){console.error(`emit event: ${e} with args: ${t} for callback: `,f,"failed with error",zt)}if(this._duringEmit=!1,a===de.CONST.break)break}}let l=this.everyEventListeners||[];for(let n=0;n<l.length;n++){let m=l[n],[M,T,f]=m;try{a=T.call(f,e,...t)}catch(p){console.error(`emit event: ${e} with args: ${t} for callback: `,T,"failed with error",p)}if(a===de.CONST.break)break}return!0}async emit(e,t){await P(1),this._emit(e,t)}},Q=de;Q.CONST={break:{}};var ee,E=new Q,be=["zh","en","es","pt"],io=()=>[...be],cr={zh:{WrongParameter:"参数错误",IOError:"I/O错误",FileNotExists:"文件不存在",AdLoading:"广告加载中...",AdSkipped:"完整观看完广告才能获得奖励哦",AdError:"广告播放失败，请稍后再试",FavoriteGuide:"一键添加到「我的小程序」",Tips:"提示",TipsRequired:"请设置提示内容",Confirm:"确定",Cancel:"取消",BtnTextDownload:"立即下载",BtnTextView:"点击查看"},en:{WrongParameter:"Wrong parameter",IOError:"I/O error",FileNotExists:"File not exists",AdLoading:"Ad loading...",AdSkipped:"Watch full AD for reward",AdError:"Ad play failed, please try again later",FavoriteGuide:'Add to "My Mini Program" with one click',Tips:"Tips",TipsRequired:"Please set the tips content",Confirm:"Confirm",Cancel:"Cancel",BtnTextDownload:"Download",BtnTextView:"View"},es:{WrongParameter:"Parámetro incorrecto",IOError:"Error de E/S",FileNotExists:"Archivo no existe",AdLoading:"Cargando anuncio...",AdSkipped:"Mira el anuncio entero para la recompensa",AdError:"Error al reproducir anuncio, inténtelo luego",FavoriteGuide:'Añadir a "Mi Mini Programa" con un clic',Tips:"Consejos",TipsRequired:"Por favor establece el contenido de los consejos",Confirm:"Confirmar",Cancel:"Cancelar",BtnTextDownload:"Descargar",BtnTextView:"Ver"},pt:{WrongParameter:"Parâmetro incorreto",IOError:"Erro de E/S",FileNotExists:"Arquivo não existe",AdLoading:"Anúncio carregando...",AdSkipped:"Assista o anúncio completo para obter a recompensa",AdError:"Falha ao reproduzir anúncio, por favor tente novamente mais tarde",FavoriteGuide:'Adicionar a "Meu Mini Programa" com um clique',Tips:"Dicas",TipsRequired:"Por favor, defina o conteúdo das dicas",Confirm:"Confirmar",Cancel:"Cancelar",BtnTextDownload:"Baixar",BtnTextView:"Ver"}},no=L().language.split("-")[0];ee=be.includes(no)?no:"zh";var xe,r,t,so=o=>{if("cn"===o&&(console.warn("cn is not a valid locale, use zh instead"),o="zh"),!be.includes(o))throw new Error(`unsupported locale: ${o}`);ee=o},lo=()=>ee,x=o=>cr[ee][o],I=o=>{if(o instanceof Error)return o.message;if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(e){return o.toString()}},R=((t=R||{}).utf8="utf8",t.binary="binary",t),F=((r=F||{}).READ_FILE_START="read-file-start",r.READ_FILE_SUCCESS="read-file-success",r.READ_FILE_FAILED="read-file-failed",r),co=()=>!1;xe=()=>{return/\/$/.test(o="")?o:o+"/";var o};var ur={getItem:o=>window.localStorage.getItem(o),setItem(o,e){window.localStorage.setItem(o,e)},removeItem(o){window.localStorage.removeItem(o)},clear(){window.localStorage.clear()}},po=ur,fo=o=>(...e)=>console.log(`${o}: `,...e),Ce=o=>{if("string"==typeof o)return o.length>100?o.slice(0,100)+"...":o;let t=String(o);return t.length>100?t.slice(0,100)+"...":t},oe=o=>{var e;return!0!==(null==(e=window.xyxLogMuteControl)?void 0:e[o])};function i(o="unknow"){return()=>{console.debug(`this is a fallback for function ${o}, because current platform is not support it`)}}var Te=new Set,Pe=new Set;document.addEventListener("visibilitychange",(o=>{"visible"===document.visibilityState&&Te.forEach((e=>e(o))),"hidden"===document.visibilityState&&Pe.forEach((e=>e(o)))}));var bo=!1,le=new Set,vo=function(o){bo?setTimeout(o,1):le.has(o)||le.add(o)},me=function(){bo=!0,le.forEach((o=>o({}))),le.clear()},Oe=i("lifeCycle: onShow"),ke=i("lifeCycle: offShow"),Ie=i("lifeCycle: onHide"),Le=i("lifeCycle: offHide"),Me=i("lifeCycle: onExit"),Ee=i("lifeCycle: exitApplication"),Re=i("lifeCycle: onError");Oe=o=>{Te.add(o)},ke=o=>{Te.delete(o)},Ie=o=>{Pe.add(o)},Le=o=>{Pe.delete(o)},Me=o=>{let e="onpageshow"in self;window.addEventListener(e?"pagehide":"unload",o)},Re=o=>{window.addEventListener("error",(e=>{o({message:e.message,stack:e.stack||""})}),!1)},Ee=()=>{location.reload()};var te,N=new Promise((o=>{o}));te=po;var xo={getItem(o){let e=te.getItem(o);return oe("storage")&&console.debug(`the localstorage value of key: ${o} is ${Ce(e)}`),e},setItem:(o,e)=>(oe("storage")&&console.debug(`the localstorage set key: ${o} with value: ${Ce(e)}`),te.setItem(o,e)),removeItem(o){if(!o)throw new Error("Please specify the key");return oe("storage")&&console.debug(`the localstorage remove key: ${o}`),te.removeItem(o)},clear(){oe("storage")&&console.debug("the localstorage is cleared"),te.clear()}};"undefined"!=typeof document&&document.createElement&&document.getElementById&&(document.createElement.bind(document),document.getElementById.bind(document));var To=()=>undefined().getContext("2d"),Po=()=>{throw new Error("createImage not implemented")},ko=(window.HTMLAudioElement,i("getNetworkType")),Io=i("onNetworkStatusChange"),He=1;He=U;var ce=new Map,wr=0,H=o=>{if(!o)return;let e=wr++;return ce.set(e,o),e},_=({onSuccess:o,onFail:e,onClosed:t,action:r,...a})=>{var n,m;let l={...a,action:r};o&&(l.onSuccess=H(o)),e&&(l.onFail=H(e)),t&&(l.onClosed=H(t)),null==(m=null==(n=null==window?void 0:window.parent)?void 0:n.postMessage)||m.call(n,l,"*")},Mo=!0,j=async({adType:o,adIntention:e,adPosition:t,onClosed:r,onShowSuccess:a,...l})=>{e||(Mo?(e="start",Mo=!1):e="browse");let n={...l,action:"showAd",adType:o,adIntention:e,adPosition:t,onSuccess:a};return n.onClosed=m=>{window.dispatchEvent(new Event("focus")),r&&r(m)},await P(100),_(n)},vr=["http://localhost","http://127.0.0.1","http://192.168"];window.addEventListener("message",(o=>{if(!(o=>o===window.XYX_GAME_INDEX_ORIGIN||vr.some((e=>o.startsWith(e))))(o.origin))return;let e=o.data;(o=>{var e;return"call-callback"===(null==o?void 0:o.action)&&(null==(e=null==o?void 0:o.params)?void 0:e.length)>0&&"number"==typeof o.params[0]})(e)&&((o,...e)=>{ce.has(o)&&(ce.get(o).call(null,...e),ce.delete(o))})(e.params[0],...e.params.slice(1))}));var re,qe=o=>console.debug(o),ae=i("showLoading"),V=i("hideLoading");re=o=>{_({action:"showToast",param:o})},qe=o=>{let{confirmText:e=x("Confirm"),cancelText:t=x("Cancel"),showCancel:r=!0,success:a,fail:l,complete:n}=o,m={...o,confirmText:e,cancelText:t,showCancel:r,success:H(a),fail:H(l),complete:H(n)};_({action:"showDialog",param:m})},ae=o=>{let{success:e,fail:t,complete:r}=o,a={...o,success:H(e),fail:H(t),complete:H(r)};_({action:"showLoading",param:a})},V=()=>{_({action:"hideLoading"})};var p,f,a,X=((f=X||{})[f.Download_Waiting=0]="Download_Waiting",f[f.Downloading=1]="Downloading",f[f.Download_Success=2]="Download_Success",f[f.Download_Failed=3]="Download_Failed",f[f.Requesting=4]="Requesting",f[f.Playing=5]="Playing",f[f.Play_Auto_Finish=6]="Play_Auto_Finish",f[f.Play_User_Finish=7]="Play_User_Finish",f[f.Play_Hide=8]="Play_Hide",f[f.Play_Failed=9]="Play_Failed",f),q=((p=q||{}).Download_Success="xyx-ad-event-download-success",p.Download_Failed="xyx-ad-event-download-failed",p.Play_Request="xyx-ad-event-play-request",p.Play_Start="xyx-ad-event-play-start",p.Play_Auto_Finish="xyx-ad-event-play-auto-finish",p.Play_User_Finish="xyx-ad-event-play-user-finish",p.Play_Failed="xyx-ad-event-play-failed",p.Play_Complete="xyx-ad-event-play-complete",p.Expanded="xyx-ad-event-expanded",p.Folded="xyx-ad-event-folded",p.Clicked="xyx-ad-event-clicked",p),d=(p=>(p.BannerAd="banner-ad",p.InterstitialAd="interstitial-ad",p.RewardedVideoAd="rewarded-video-ad",p.FullScreenVideoAd="full-screen-video-ad",p.AppBox="app-box",p.BoxPortal="box-portal",p.GameDrawerAd="game-drawer-ad",p.StaticGameBannerAd="static-game-banner-ad",p.LoopGameBannerAd="loop-game-banner-ad",p.CustomAd="custom-ad",p.NativeAd="native-ad",p))(d||{}),pe=((a=pe||{}).Start="start",a.Pause="pause",a.Next="next",a.Browse="browse",a),Tr=Date.now();function qo(){throw new Error("xyx.setAdSilent is deprecated, use AD.setAdSilent instead")}var C=(o,e)=>{console.log("emitAdEvent:",e,o.adType,o.id),E.emit(e,o)},s=class{constructor(e,t){this.adType=t,B(e)?(this.promiseId=e,this.promiseId.then((r=>{this.id=r}))):this.id=e,this.prevShowTime=0,this.showInterval=0,this.disableDurationAfterUserClosed=0,this.prevUserCloseTime=0,this.silentTimeInSecond=0,this.hideDelay=2e3,this._setState(0),this.isHiding=!1,this.asyncActionManager=function({beforeNextAction:o,handleAction:e}){let a,t=[],r=!1;return{addAsyncAction(n){console.log("asyncActions: addAsyncAction: ",n),t.push(n),r||(a&&clearTimeout(a),a=setTimeout((()=>{console.log("asyncActions: addAsyncAction: execute it"),r||this.doNextAction()}),100))},setPending(){console.log("asyncActions: setPending"),r=!0},doNextAction(){if(a&&(clearTimeout(a),a=null),console.log("asyncActions: doNextAction"),r=!1,console.log("asyncActions: doNextAction: before filter: ",t),t=t.filter((n=>!n.isNeedProcess||n.isNeedProcess())).sort(((n,m)=>(m.priority||0)-(n.priority||0))),console.log("asyncActions: doNextAction: before callback: ",t),o&&(t=o(t)),console.log("asyncActions: doNextAction: before handle: ",t),t.length>0){let n=t.shift();console.log("asyncActions: doNextAction: ",n),e(n)}}}}({beforeNextAction:r=>this._beforeNextAction(r),handleAction:r=>this._handleAction(r)}),this._showParams=new Set,this._passiveAdCount=0}_beforeNextAction(e){var a,l;if(e.length<=1)return e;let t={id:5===this.state?"show":"hide",data:{id:this.idWillUseToShow}},r=[];for(e.forEach((n=>{var M,T,f,p;if(0===r.length)return console.log("asyncActions: beforeNextAction: empty action list: ",n),void r.push(n);let m=r[r.length-1];return m.id===n.id&&(null==(M=null==m?void 0:m.data)?void 0:M.id)===(null==(T=null==n?void 0:n.data)?void 0:T.id)?(console.log("asyncActions: beforeNextAction: same action: ",m,n),r.shift(),void r.push(n)):m.id!==n.id&&(null==(f=null==m?void 0:m.data)?void 0:f.id)===(null==(p=null==n?void 0:n.data)?void 0:p.id)?(console.log("asyncActions: beforeNextAction: conflict action: ",m,n),void r.shift()):void r.push(n)}));r.length>0&&r[0].id===t.id&&(null==(l=null==(a=r[0])?void 0:a.data)?void 0:l.id)===t.data.id;)console.log("asyncActions: beforeNextAction: next action with same state: ",r[0],t),r.shift();return r}_shouldPassiveAdSuccess(){return++this._passiveAdCount%2==0}_handleAction(e){switch(this.log("handleAction: ",e),e.id){case"show":this.show(e.data);break;case"hide":this.hide();break;default:throw new Error("unknown action id: "+e.id)}}getState(){return this.state}log(e,...t){let r=this.idWillUseToShow||this.id;console.debug(`AD:${this.adType}:${r}: ${e}`,...t)}_setState(e){this.log(`setState: ${e}`),this.state=e}_show(e){this.log("unimplemented the _show method"),setTimeout((()=>this._handleShowFailed(e)),0)}_handleShowSuccess(e,t=!0){V(),this.log("_handleShowSuccess"),t&&(this.prevShowTime=Date.now()),this.loadPromise=null,C(this,"xyx-ad-event-play-start"),e.onShow&&(this.log("_handleShowSuccess trigger onShow"),e.onShow(this.state,this)),this._showParams.add(e),this.asyncActionManager.doNextAction()}_handleShowFailed(e,t=!0){V(),this.log("_handleShowFailed"),this.loadPromise=null,t&&(this.prevShowTime=Date.now()),9!==this.state&&(this._setState(9),C(this,"xyx-ad-event-play-failed"),C(this,"xyx-ad-event-play-complete"),e.onFail&&(this.log("_handleShowFailed trigger onFail"),e.onFail(this.state,this)),e.onComplete&&(this.log("_handleShowFailed trigger onComplete"),e.onComplete(this.state,this)),this.asyncActionManager.doNextAction())}_handleClosed(e){V(),this.log(`_handleClosed, isUserClose: ${e}`),e?(this._setState(7),this.prevUserCloseTime=Date.now(),C(this,"xyx-ad-event-play-user-finish"),C(this,"xyx-ad-event-play-complete")):(this._setState(6),C(this,"xyx-ad-event-play-auto-finish"),C(this,"xyx-ad-event-play-complete")),this._showParams.forEach((t=>{t.onClose&&(this.log("_handleClosed trigger onClose"),t.onClose(this.state,this)),t.onComplete&&(this.log("_handleClosed trigger onComplete"),t.onComplete(this.state,this))})),this._showParams.clear()}_handleDownloadSuccess(){this.log("_handleDownloadSuccess"),this._setState(2),C(this,"xyx-ad-event-download-success")}_handleDownloadFailed(){V(),this.log("_handleDownloadFailed"),this._setState(3),C(this,"xyx-ad-event-download-failed")}_handleExpand(){C(this,"xyx-ad-event-expanded")}_handleFolded(){C(this,"xyx-ad-event-folded")}isUnderShowInterval(){let e=Date.now()-this.prevShowTime;return this.log("showInterval check: ",e,this.showInterval),e<this.showInterval}isUnderDurationAfterUserClosed(){let e=Date.now()-this.prevUserCloseTime;return this.log("durationAfterUserClosed check: ",e,this.disableDurationAfterUserClosed),e<this.disableDurationAfterUserClosed}isAbleToShow(){return!this.isUnderShowInterval()&&!this.isUnderDurationAfterUserClosed()}setAdSilent(e){this.silentTimeInSecond=e}isUnderSilent(){let t=(Date.now()-Tr)/1e3|0;return this.log("isUnderSilent: ",t,this.silentTimeInSecond),t<this.silentTimeInSecond}async show(e={}){this.log("show with param:",e);let t=!1;if(e){if("function"==typeof e)throw new Error("show param should be an object");if("string"==typeof e)throw new Error("show param should be an object");let{id:n,cbk:m}=e;if(m)throw new Error("cbk is not allowed in show param, use onShow, onClose, onFail instead");n&&(t=!0,this.idWillUseToShow=n,this.log("will show with id",n))}else e={};"rewarded-video-ad"===this.adType&&!t&&window.xyxIdWillUseToShowRewardedVideoAd&&(e.id=this.idWillUseToShow=window.xyxIdWillUseToShowRewardedVideoAd,this.log("will show with id",this.idWillUseToShow,"from window.xyxIdWillUseToShowRewardedVideoAd")),e.isAbleShow=e.isAbleShow||(()=>!0),await xyx.emitter.emit("xyx-ad-event-play-request",{ad:this,showParam:e}),this._setState(4);let r=async()=>{await P(0),this._handleShowFailed(e,!1)},a=async()=>{await P(0),this._handleShowSuccess(e,!1)};if(this.isUnderShowInterval())return this.log("show failed with showInterval limit"),r();if(this.isUnderDurationAfterUserClosed())return this.log("show failed with disableDurationAfterUserClosed limit"),r();if(e.isAbleShow&&!e.isAbleShow())return this.log("show failed with isAbleShow => false"),r();"rewarded-video-ad"===this.adType&&ae({title:x("AdLoading")});let l=this.isUnderSilent();if(this.asyncActionManager.setPending(),!(o=>{var t,r,a;return!!window.xyxPassiveAd&&("interstitial-ad"===o.adType?"string"!=typeof(null==(t=null==window?void 0:window.xyxWebSupport)?void 0:t.systemAdLikePlatform):"box-portal"===o.adType?!0!==(null==(r=null==window?void 0:window.xyxWebSupport)?void 0:r.boxPortal):"app-box"===o.adType?!0!==(null==(a=null==window?void 0:window.xyxWebSupport)?void 0:a.appBox):!["custom-ad","banner-ad"].includes(o.adType))})(this)&&!l)return this.id||this.idWillUseToShow?this.loadThenShow(e):this.promiseId?await this.promiseId?this.loadThenShow(e):(this.log("has no id, so show failed"),r()):(this._setState(3),r(),this.log("id is empty, can not show"),this.log("id is empty, can not show"),void this.log("id is empty, can not show"));if(await P(1e3),l||this._shouldPassiveAdSuccess()){this.log("set ad success for ",l?"silent":"passive"),await a();let n=["interstitial-ad","custom-ad"];await P(1e3),this._handleClosed(n.includes(this.adType))}else"rewarded-video-ad"===this.adType&&this._passiveAdCount%4==1?(this.log("set ad closed by user for passive ad"),await a(),await P(1e3),this._handleClosed(!0)):(this.log("set ad failed for passive ad"),await r())}showPromise(){return new Promise(((e,t)=>{this.show({onClose:r=>{if("rewarded-video-ad"===this.adType){if(6===r)return e();{let a;return a=x(7===r?"AdSkipped":"AdError"),re({message:a}),t({message:a})}}return this.adType,e()},onFail:t})}))}loadThenShow(e){return this.log("loadThenShow:undownload:load"),this.load().then((()=>this.realShow(e))).catch((t=>{this.log("load failed: ",t),this._handleShowFailed(e,!1)}))}realShow(e){if(this._setState(5),this.checkIsAbleShow(e))return this._show(e)}checkIsAbleShow(e,t=!0){return!!e.isAbleShow()||(this.log("show failed for can not show"),t&&setTimeout((()=>this._handleShowFailed(e)),0),!1)}load(){return this._load()}_load(){return Promise.resolve()}triggerFakeAdHideSuccess(){return P(this.hideDelay).then((()=>this._handleHideSuccess()))}_hide(){this.triggerFakeAdHideSuccess()}hide(){this.log("hide"),this.isHiding=!0,this.asyncActionManager.setPending(),this._hide()}_handleHideSuccess(){this.log("_handleHideSuccess"),this.isHiding=!1,this._handleClosed(!1),this.asyncActionManager.doNextAction()}_handleHideFail(){this.log("_handeHideFail"),this.isHiding=!1,this.asyncActionManager.doNextAction()}_handleError(e){this.log("_handleError:",I(e),e),this.isHiding&&this._handleHideFail()}asyncShow(e,t){!t||!t.isNeedProcess||e&&e.isAbleShow?e&&e.isAbleShow&&!(t&&t.isNeedProcess)&&((t=t||{}).isNeedProcess=t.isNeedProcess||e.isAbleShow):(e=e||{}).isAbleShow=e.isAbleShow||t.isNeedProcess,this.asyncActionManager.addAsyncAction({id:"show",data:e,...null!=t?t:{}})}asyncHide(e){this.asyncActionManager.addAsyncAction({id:"hide",data:{id:this.idWillUseToShow},...null!=e?e:{}})}},O=class extends s{constructor(t,r){super(t,"banner-ad"),this.autoShowInterval=(null==r?void 0:r.autoShowInterval)||Ge,this.isAutoShowEnabled=!1,this.loopShowInterval=(null==r?void 0:r.freshInterval)||45e3}_updateStyle(t){throw new Error("should implement by instance")}updateStyle(t){this._updateStyle(t)}_handleShowSuccess(t){super._handleShowSuccess(t),8===this.state&&this.hide()}hide(){super.hide(),this.isAutoShowEnabled&&setTimeout((()=>{this.log("auto show after hide"),this.show()}),this.autoShowInterval)}enableAutoShow(t){this.isAutoShowEnabled=!0,t&&(this.loopShowInterval=t),this.loopShowTimer&&(clearInterval(this.loopShowTimer),this.loopShowTimer=null),this.loopShowTimer=setInterval((()=>{this.log("loop show to trigger a hide"),this.hide()}),this.loopShowInterval)}disableAutoShow(){this.isAutoShowEnabled=!1,this.loopShowTimer&&clearInterval(this.loopShowTimer)}};function Be(o,e,t=!0){return new Promise(((r,a)=>{setTimeout((()=>{t?a(new Error("timeout")):r({})}),e),o.then(r,a)}))}Math.min(undefined,undefined);function D(o,e){let t={top:0,left:0},{vertical:r="top",horizontal:a="center"}=o,{screenWidth:l,screenHeight:n,adWidth:m,adHeight:M,scale:T}=e,f=(n-M)/T,p=(l-m)/T;switch(r){case"bottom":t.top=f;break;case"top":t.top=0;break;default:t.top=f*r}switch(a){case"center":t.left=p/2;break;case"left":t.left=0;break;case"right":t.left=p;break;default:t.left=p*a}return{left:0|t.left,top:0|t.top}}var b,Ne=128,Ve=208,Ke=300,fe=((b=fe||{}).VIVO="vivo",b.OPPO="oppo",b.TT="tt",b.MZ="mz",b.QQ="qq",b.HW="hw",b.Web="web",b.KS="ks",b.KWAI="kwai",b.Cordova="cordova",b.XLB="xlb",b.Game2345="2345",b.QuickGame="quickgame",b.MI="mi",b.WX="wx",b.GPT="gpt",b.Hippoo="hippoo",b.AFG="afg",b.BOTIM="botim",b),Ge=(window.qg,3e3),ze=o=>{let e=new O(o);return e._show=i("BannerAd: _show"),e};function v(o){return Array.isArray(o)?o[Math.floor(Math.random()*o.length)]:o}ze=()=>{let o=new O("cross-frame-no-need-banner-ad-id");return o._updateStyle=e=>{console.log("updateStyle:",e)},o._show=e=>{j({adType:"banner",adIntention:e.intention,adPosition:e.position,onShowSuccess:()=>o._handleShowSuccess(e),onFail:()=>o._handleShowFailed(e)})},o._hide=()=>{(({adType:o})=>{_({action:"hideAd",adType:o,onSuccess(){console.log("hide ad success")}})})({adType:"banner"}),o.triggerFakeAdHideSuccess()},o};var Xe=o=>{let e=new s(o,"interstitial-ad");return e._show=t=>{setTimeout((()=>{e._handleShowSuccess(t)}),300)},e};Xe=()=>{let o=new s("cross-frame-no-need-interstitial-ad-id","interstitial-ad");return o._show=e=>{j({adType:"interstitial",adIntention:e.intention,adPosition:e.position,onShowSuccess:()=>{o._handleShowSuccess(e)},onClosed:()=>{o._handleClosed(!0)},onFail:t=>{o.log("show failed with msg: "+t),o._handleShowFailed(e)}})},o.setAdSilent(10),o.showInterval=6e4,o};var $e;$e=()=>{let o=new s("fake-rewarded-video-id","rewarded-video-ad");return o._show=e=>{j({adType:"reward",adIntention:e.intention,adPosition:e.position,onShowSuccess:()=>{o._handleShowSuccess(e)},onClosed:t=>{o._handleClosed(t)},onFail:t=>{console.log("onFail",t),o._handleShowFailed(e)}})},o};var Wo=(o,e)=>{let t=new s(o,"box-portal");return t._show=i("BoxPortalAd: _show"),t},Uo=()=>!1,Qo=o=>{let e=new s(o,"app-box");return e._show=i("AppBox: _show"),e},zo=()=>!1,Xo=o=>new s(o,"static-game-banner-ad"),$o=o=>new s(o,"loop-game-banner-ad"),jo=o=>{let e=new s(o,"game-drawer-ad");return e._show=i("AppBox: _show"),e},Yo=()=>!1,Jo=()=>new s("fake-full-screen-video-ad","full-screen-video-ad"),rt=()=>{};var K=(t=>(t[t.Download=0]="Download",t[t.Open=1]="Open",t))(K||{});var o,l,at=!1,nt=(o=(o,e)=>e,e=>{let t={adType:"native-ad",log:fo("NativeAd:"),reportAdShow({adId:o}){throw new Error("reportAdShow unimplemented")},reportAdClick({adId:o}){throw new Error("reportAdClick unimplemented")},getData(){throw new Error("getData unimplemented")}};return function(o){return B(o)?o:Promise.resolve(o)}(e).then((r=>o(r,t)))}),Y=class extends s{constructor(t,r={}){var a,l,n;super(t,"custom-ad"),this.vivoAdLayout=null!=(a=r.vivoAdLayout)?a:0,this.adStyle=null!=(l=r.adStyle)?l:{},this.willReloadOnNoAd=null!=(n=r.willReloadOnNoAd)&&n}show({adStyle:t={vertical:"bottom",horizontal:"center"},vivoAdLayout:r=0,willReloadOnNoAd:a=!0,...l}={}){return this.adStyle=t,this.vivoAdLayout=r,this.willReloadOnNoAd=a,super.show(l)}},ie=((l=ie||{})[l.LEFT_IMG_RIGHT_TEXT=0]="LEFT_IMG_RIGHT_TEXT",l[l.LEFT_TEXT_RIGHT_IMG=1]="LEFT_TEXT_RIGHT_IMG",l[l.UP_IMG_DOWN_TEXT=2]="UP_IMG_DOWN_TEXT",l[l.UP_TEXT_DOWN_IMG=3]="UP_TEXT_DOWN_IMG",l[l.HORIZONTAL_IMG=4]="HORIZONTAL_IMG",l),Nr=new Map;window.adInstCache=Nr;var n,it=o=>{let e=new Y(o);return e._show=i("CustomAd: _show"),e},st=()=>!1,dt=()=>0,lt=function(o){},ue=(a=>(a.article="article",a.video="video",a.token="token",a.card="",a))(ue||{}),he="no-need",mt=()=>({start:i("GameRecorderManager.start"),onStart:i("GameRecorderManager.onStart"),recordClip:i("GameRecorderManager.recordClip"),clipVideo:i("GameRecorderManager.clipVideo"),pause:i("GameRecorderManager.pause"),onPause:i("GameRecorderManager.onPause"),resume:i("GameRecorderManager.resume"),onResume:i("GameRecorderManager.onResume"),stop:i("GameRecorderManager.stop"),onStop:i("GameRecorderManager.onStop"),onError:i("GameRecorderManager.onError"),onInterruptionBegin:i("GameRecorderManager.onInterruptionBegin"),onInterruptionEnd:i("GameRecorderManager.onInterruptionEnd"),publishVideo:i("GameRecorderManager.publishVideo")}),ct=!1,pt=()=>!1,Ye=(a=>(a.qq="qq",a.qzone="qzone",a.wechatFriends="wechatFriends",a.wechatMoment="wechatMoment",a))(Ye||{}),Je=((n=Je||{}).qq="qq",n.qqFastShare="qqFastShare",n.qqFastShareList="qqFastShareList",n.qzone="qzone",n.wechatFriends="wechatFriends",n.wechatMoment="wechatMoment",n),Vr=i("share: showShareMenu"),Kr=i("share: hideShareMenu"),Wr=i("share: onShareAppMessage"),Ur=i("share: offShareAppMessage"),Qr=i("share: shareAppMessage"),zr=i("share: navigateToVideoView"),Xr=!1,$r=!1,ft="shareAppMessage:cancel",ut=i("keyboard: showKeyboard"),ht=i("keyboard: hideKeyboard"),gt=i("keyboard: onKeyboardInput"),St=i("keyboard: offKeyboardInput"),wt=i("keyboard: onKeyboardConfirm"),yt=i("keyboard: offKeyboardConfirm"),At=i("keyboard: onKeyboardComplete"),bt=i("keyboard: offKeyboardComplete"),vt=i("frame: setPreferredFramesPerSecond"),xt=!1,Ct=i("compass: onCompassChange"),Tt=i("compass: startCompass"),Pt=i("compass: stopCompass");window.XMLHttpRequest;var kt=({success:o,fail:e})=>{setTimeout((()=>o(!1)),1)},It=()=>{throw new Error("Please achievement this function")},Lt=()=>!1,Mt=()=>!1,Et=o=>{throw new Error("Unsupport this method, use isSupportNavigateToMiniGame() to check support before use it")},Rt=o=>{let e=new Set;return setTimeout((()=>{o.success(""),e.forEach((t=>t({progress:1,totalBytesWritten:100,totalBytesExpectedToWrite:100})))}),100),console.debug("this is a fallback for LoadSubpackage"),{onProgressUpdate(t){e.add(t),console.debug("this is a fallback for LoadSubpackageTask.onProgressUpdate")}}},Ft=i("showFavoriteGuide"),Ht=i("onFavoriteStateChange"),Dt=()=>!1,Gt=o=>({abort:i("download.abort"),onProgressUpdate:i("download.onProgressUpdate")}),Bt=()=>!1,Ze=()=>{},eo=()=>!1;Ze=(o=!1)=>{let e=navigator.vibrate;e?e.call(navigator,o?400:30):console.warn("has no support for vibrate")},eo=()=>!0;var Vt=o=>{setTimeout((()=>{console.warn("getLocation unimplemented"),o.fail&&o.fail(),o.complete&&o.complete()}),100)},Kt=()=>Promise.reject(new Error("requestPayment not initialized")),Wt=()=>!1,Jr=E,Zr=E,ea="hippoo",oa=!1,ta=!1,ra=!1,aa=!1,na=!1,ia=!1,sa=!1,da=!1,la=!1,ma=!1,ca=!1,pa=!1,fa=!1,ua=!1,ha=!1,ga=!1,Sa=!1,wa=!1,ya=!1,Aa=!0,ba=!1,va=!1,Ut=!0,xa=!0;Ut||setTimeout(me,1);var Ca=()=>"ios"===L().platform,Ta=()=>"android"===L().platform;return(o=>((o,e,t,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let a of $t(e))!jt.call(o,a)&&a!==t&&Se(o,a,{get:()=>e[a],enumerable:!(r=Xt(e,a))||r.enumerable});return o})(Se({},"__esModule",{value:!0}),o))(Pa)})();window.xyx=xyx},447:()=>{(()=>{var tt=Object.defineProperty,Z=(e,t)=>{for(var r in t)tt(e,r,{get:t[r],enumerable:!0})},Le={};Z(Le,{default:()=>ct});var ct,e,t,Ie=(e=()=>{ct=ZipFileServer},()=>(e&&(t=e(e=0)),t)),le={};Z(le,{Audio:()=>$t,Image:()=>Ct,XMLHttpRequest:()=>Dt,cancelAnimationFrame:()=>Ze,close:()=>Ot,devicePixelRatio:()=>Gt,fetch:()=>Ft,localStorage:()=>De,location:()=>c,name:()=>At,navigator:()=>He,open:()=>Mt,opener:()=>Ut,requestAnimationFrame:()=>We,sessionStorage:()=>Ce,setLocale:()=>Ne,setLocation:()=>de,xyxSetFramePerSecond:()=>je});var ce,pe,fe,me,f=xyx,U="http:",A="127.0.0.1",z="/";{let e=window.location;fe=e.href,ce=e.port,U=e.protocol,pe=e.hostname,A=e.host,z=e.pathname,me=e.origin}var c={href:fe,pathname:z,search:"",hash:"",protocol:U,origin:me,host:A,hostname:pe,ancestorOrigins:"",port:ce,assign(e){},replace(e){},reload:function(){}},de=e=>{{let t=new URL(e);c.href=t.href,c.pathname=t.pathname,c.search=t.search,c.hash=t.hash,c.protocol=t.protocol,c.origin=t.origin,c.host=t.host,c.hostname=t.hostname,c.port=t.port}};function F(e){let t=f.getUserPathPrefix();return t&&0===e.indexOf(t)}function V(e){if(e.startsWith("blob:")||e.startsWith("data:"))return e;let t=(e=>/\/$/.test(e)?e:e+"/")(c.origin+c.pathname.split("/").slice(0,-1).join("/"));return e.replace(t,"")}function Y(e){return 0!==e.indexOf("http")||F(e)?e.split("?")[0]:e}function J(e){return F(e)?e:e.replace(/^\.\//,"").replace(/^\/\//,"")}function it(e){return function(e){for(;-1!==e.indexOf("%");)e=decodeURIComponent(e);return e}(e).replace(/[\\\/\:\*\?\"\<\>\|\s]/g,"_").replace(/%/g,"_").replace(/[^\u0021-\u007E\u4e00-\u9fa5\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g,(t=>{let r=t.codePointAt?t.codePointAt(0):t.charCodeAt(0);return r?`u${r}`:"_"}))}var m=(e,{disableSpecialLetterRemove:t=!1}={})=>e.startsWith("blob:")||e.startsWith("data:")?e:t?J(Y(V(e))):function(e){let t=e.indexOf("?"),r="";-1!==t&&(r=e.slice(t),e=e.slice(0,t));let o=e.indexOf("#"),n="";-1!==o&&(n=e.slice(o),e=e.slice(0,o));let i=e.indexOf("//"),l="";if(-1!==i){let a=e.indexOf("/",i+2);-1!==a?(l=e.slice(0,a),e=e.slice(a)):(l=e,e="")}return`${l}${e.split("/").map(it).join("/")}${r}${n}`}(J(Y(V(e)))),I=[],C=new Set,T=new Map,M=()=>I,Q=(e,t,r)=>{!window.XYX_IS_DEVELOPMENT||(I=I.filter((o=>o.groupName!==e))).unshift({groupName:e,filter:t,after:r})},$=e=>{!window.XYX_IS_DEVELOPMENT||(I=I.filter((t=>t.groupName!==e)))},D=new Set,g=e=>e.startsWith("data:")?e.split(",")[0]:e,p=(e,t)=>{let r=t||window.xyxLogMuteControl;if(!r)return!0;if(Array.isArray(e)){let[o,...n]=e;return p(o,r||{})&&(0===n.length||p(n,(null==r?void 0:r[o])||{}))}if(e.includes(".")){let[o,...n]=e.split(".");return p(o,r||{})&&p(n,(null==r?void 0:r[o])||{})}return!0!==(null==t?void 0:t[e])},E=e=>()=>p(e),b=(e,...t)=>{"log"===e?(window.xyxEnableRecordDebug||p("recordUrl.log"))&&console.log(...t):(window.xyxEnableRecordDebug||p("recordUrl.warn"))&&console.warn(...t)},w=e=>{var o;if(!window.XYX_IS_DEVELOPMENT)return;if(e=m(e),/^http/.test(e))return void b("warn",`don't record un-relative url: ${g(e)}`);if(e.length<=0)return void b("warn",`don't record empty url: ${g(e)}`);if(e.startsWith("/"))return void b("warn",`don't record url starts with /: ${g(e)}`);if(0===M().length)return void b("warn",`No request group is currently active, cannot record url ${g(e)}`);let t=M().find((n=>!n.filter||n.filter(e))),r=-1!==e.indexOf("/")?e.split("/")[0]:"";t?/^data:\w/.test(e)?b("warn",`Url ${g(e)} is not a valid url`):(C.has(e)||C.add(e),T.has(t.groupName)||T.set(t.groupName,new Set),t.groupName===r&&(e=e.replace(new RegExp(`^${r}/`),"")),b("log",t.groupName,"recordUrl: ",e),T.get(t.groupName).add(e),null==(o=t.after)||o.call(t,e)):b("warn",`No request group can handle url ${g(e)}`)},O=E("request.getMappedRoute"),st=(e,t)=>{if("string"==typeof e)return e;if(Array.isArray(e)){let r=t;for(let o of e){let n=o(r);!1!==n&&(r=n)}return r}return e(t)},at=[".webm",".ogg"],ee=e=>{let t=at.find((r=>e.endsWith(r)));if(t){let r=new RegExp(`\\${t}$`),o=e.replace(r,".mp3");return O()&&console.log("mapAudioUrl: ",e,"->",o),o}return e};function h(e,{mapAudio:t}={mapAudio:!0}){if(!window.xyxRouteMapRoute)return t?(O()&&console.log("getMappedRoute: no rule, map audio",e),ee(e)):(O()&&console.log("getMappedRoute: no rule",e),e);for(let[r,o]of window.xyxRouteMapRoute){let n;if("string"==typeof r){if(0!==e.indexOf(r))continue}else if(!0!==r.test(e))continue;if(n=st(o,e),!1!==n)return O()&&console.log("getMappedRoute: ",e,"->",n),t?ee(n):n}return O()&&console.log("getMappedRoute: no map",e),t?ee(e):e}var lt=new Map;var Re=e=>{let r=/\?([^#]*)/.exec(e);if(r){let o=new Map;return r[1].split("&").forEach((n=>{let[i,l]=n.split("=");o.set(i,l)})),o}return new Map},ut=[{urlPrefix:"https://www.yiv.com/forgame/games.json",data:"[]"},{urlPrefix:"https://h5gamessdk.yyggames.com/in.php",data:'{"redirect":0,"adstxt":0,"linksClickable":1,"inGameAd":1,"videoAdType":3,"videoLength":30,"adInterval":60,"thumb":1,"newADSDK":0.2}'},{urlPrefix:"https://catalog.api.gamedistribution.com/api/v1.0/admin/wdomains",data:'{"success":true,"error":null,"result":true,"statusCode":200,"timestamp":"1600834088"}'},{urlPrefix:"https://tracker.gamedock.io/v1/events-tracker/track/gd/event/pageview",data:""},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"rewarded"},data:"{}"},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"preroll"},data:"{}"},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"gdbanner"},data:"{}"},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"midroll"},data:"{}"},{urlPrefix:"https://msgrt.gamedistribution.com/collect",data:"OK"},{urlPrefix:"https://ana.headerlift.com/event?page_url",data:""},{urlPrefix:"https://hbopenbid.pubmatic.com/translator?",data:""},{urlPrefix:"https://prg.smartadserver.com/prebid/v1",data:""},{urlPrefix:"https://www8.smartadserver.com/prebid/v1",data:""},{urlPrefix:"https://hb.go2speed.media/bidder/",data:""}],te=E("request.getMappedData");async function G(e,t){if(window.globalRouteMaps)throw new Error("Abandoned: window.globalRouteMaps is abandoned, please use window.xyxRouteMapData instead!");if(e.startsWith("blob:")){let i=function(e){return lt.get(e)}(e);return i?(te()&&console.log("getDataFromRouteMap: blob:",e,"->",i),i.arrayBuffer()):(console.warn(`can not find related blob data for url: ${e}`),null)}let o=[...window.xyxRouteMapData||[],...ut];if(!o||0===o.length)return null;let n=o.find((({urlPrefix:i,searchParam:l})=>{if(i&&0!==e.indexOf(i))return!1;if(l){Array.isArray(l)||(l=[l]);let s=Re(e);return l.every((({key:a,value:u})=>!!s.has(a)&&!(u&&s.get(a)!==u)))}return!0}));if(n){if(void 0!==n.data)return te()&&console.log("getDataFromRouteMap: from data",e,"->",n.data),n.data;if("function"==typeof n.server){let i=await n.server(e,t);return te()&&console.log("getDataFromRouteMap: from server",e,"->",i),i}throw new Error(`can not find related data for url: ${e}`)}return null}function re(e){var t;return(null==(t=m(e).match(/\.(\w+)$/))?void 0:t[1])||""}var be=["https://cdn.imagehost.top/","https://res.heigame.com/","https://api.chayumingwang.com/","http://localhost","http://127.0.0.1","file:///android_asset/www/","http://192.168","http://res.heigame.com/"];function X(e){return""!==e&&!(!function(e){return 0!==e.indexOf("http")}(e)&&!be.some((t=>0===e.indexOf(t))))}var ve={FORM_URLENCODED:"application/x-www-form-urlencoded",GIF:"image/gif",JPEG:"image/jpeg",DDS:"image/dds",JSON:"application/json",PNG:"image/png",TEXT:"text/plain",XML:"application/xml",WAV:"audio/x-wav",OGG:"audio/ogg",MP3:"audio/mpeg",MP4:"audio/mp4",AAC:"audio/aac",BIN:"application/octet-stream",BASIS:"image/basis"},d=null,Te=null,oe=null;function y(e){Te=e}var pt=async()=>{let e=(await Promise.resolve().then((()=>(Ie(),Le)))).default;return d=new e.ZipFileServer({remotes:window.xyxZipBundleConfig.remotes,fallbackUrl:window.xyxZipBundleConfig.fallbackUrl,fetch:(t,r)=>Te(t,r)})};async function _(){return oe||(oe=pt()),oe}var H=({url:e,method:t,data:r})=>/\.\w+$/.test(e)&&"GET"===t.toUpperCase()&&null===r;async function Pe(e){let{url:t,headers:r,success:o,fail:n,method:i,dataType:l,data:s}=e;if(window.xyxZipBundleConfig&&H({url:t,method:i,data:s}))return d||await _(),y(fetch),void d.getData(t,{headers:r}).then((a=>{switch(l){case"text":return a.text();case"arraybuffer":return a.arrayBuffer();case"json":return a.json();default:return a.blob()}})).then(o).catch(n);(({url:e,data:t,dataType:r,isBinary:o,method:n,headers:i,success:l,fail:s},a)=>{a.responseType=r,p("xhr.readStart")&&console.log("XMLHttpRequest read file with Origin XMLHttpRequest start: ",e),a.addEventListener("load",(()=>{if(200===a.status){let u;u=f.isBrowser&&"json"===a.responseType||o?a.response:a.responseText,p("xhr.readStart")&&console.log("XMLHttpRequest read file with Origin XMLHttpRequest back: ",e),l(u)}else s(a.status)})),a.addEventListener("error",(()=>{s(a.status)})),a.addEventListener("timeout",(()=>{s(500)})),a.open(n,e,!0),i&&Object.keys(i).forEach((u=>{a.setRequestHeader(u,i[u])})),a.send(t)})(e,new XMLHttpRequest)}var ft=window.XMLHttpRequest,mt=e=>{switch(e){case"":case"text":case"document":return"text";case"blob":return"blob";case"arraybuffer":return"arraybuffer";case"json":return"json"}},dt=e=>"blob"===e||"arraybuffer"===e,gt=new Set(["url","method","async","responseType","response","responseText","getAllResponseHeaders","open","send","status","statusText","readyState"]);function S(){this.__xhr=new ft,this.__async=!0,this.__status=0,this.__statusText="",this.__responseType="",this.__response=null,this.__responseText=null,this.__readyState=0,this.__headers={},Object.defineProperties(this,{url:{enumerable:!0,get:()=>this.__url},method:{enumerable:!0,get:()=>this.__method},async:{enumerable:!0,get:()=>this.__async},responseType:{enumerable:!0,get:()=>this.__responseType,set:e=>{this.__responseType=e,this.__xhr.responseType=e}},response:{enumerable:!0,get:()=>this.__response?this.__response:this.__xhr.response},responseText:{enumerable:!0,get:()=>this.__responseText?this.__responseText:this.__xhr.responseText},status:{enumerable:!0,get:()=>this.__status?this.__status:this.__xhr.status},statusText:{enumerable:!0,get:()=>this.__statusText?this.__statusText:this.__xhr.statusText},readyState:{enumerable:!0,get:()=>this.__readyState?this.__readyState:this.__xhr.readyState}});for(let e in this.__xhr)gt.has(e)||("function"==typeof this.__xhr[e]?this[e]=this.__xhr[e].bind(this.__xhr):Object.defineProperty(this,e,{enumerable:!0,get:()=>this.__xhr[e],set:t=>{this.__xhr[e]=t}}))}S.prototype.setRequestHeader=function(e,t){this.__xhr.setRequestHeader(e,t),this.__headers||(this.__headers={}),this.__headers[e]=t},S.prototype.__getContentType=function(){let e=this.__xhr.getResponseHeader("content-type");if(e)return e;let t=re(this.__url)||re(this.__realUrl);return e=ve[t],e||"text/plain"},S.prototype.getAllResponseHeaders=function(){let e=this.__xhr.getAllResponseHeaders();return e?e.replace(/access-control-allow-origin:.*?\r\n/i,"access-control-allow-origin: *\r\n"):`date: ${(new Date).toUTCString()}\r\ncontent-encoding: gzip\r\naccess-control-allow-origin: *\r\naccess-control-allow-methods: PUT, GET, HEAD, POST, DELETE, OPTIONS\r\nx-content-type-options: nosniff\r\nserver: meinheld/0.6.1\r\nx-frame-options: DENY\r\ncontent-type: ${this.__getContentType()}\r\nconnection: keep-alive\r\nstrict-transport-security: max-age=63072000\r\nvary: Cookie, Accept-Encoding\r\ncontent-length: 6502\r\nx-xss-protection: 1; mode=block\r\n`},S.prototype.open=function(e,t,r=!0){var o;this.__url=t,this.__method=e,this.__async=r,w(t),this.__realUrl=h(m(t,{disableSpecialLetterRemove:null==(o=null==window?void 0:window.xyxFormatUrlOption)?void 0:o.disableSpecialLetterRemove}),{mapAudio:!!window.xyxEnableAudioMapForLiteMode}),this.__xhr.open(this.__method,this.__realUrl,this.__async)},S.prototype.send=function(e=null){let t={url:this.__url,method:this.__method,isRelatedSubpageLoaded:!0,dataType:mt(this.__xhr.responseType),headers:this.__headers,isBinary:dt(this.__xhr.responseType),data:e};this.__async?G(this.__realUrl,t).then((r=>{let o=()=>{this.__status=404,this.__statusText="Not Found",this.__readyState=4;let u=new Event("readystatechange");this.__xhr.onreadystatechange&&this.__xhr.onreadystatechange(u);let R=new ProgressEvent("load");this.__xhr.dispatchEvent(R)},n=u=>{this.__response="json"===t.dataType&&"string"==typeof u?JSON.parse(u):u,"string"==typeof u&&(this.__responseText=u),this.__status=200,this.__statusText="OK",this.__readyState=4;let R=new Event("readystatechange");this.__xhr.onreadystatechange&&this.__xhr.onreadystatechange(R);let L=new ProgressEvent("load");this.__xhr.dispatchEvent(L)},i=this.__xhr.onload,l=this.__xhr.onreadystatechange,s=this,a=u=>new Proxy(u,{get:(R,L)=>"target"===L?s:"function"==typeof R[L]?R[L].bind(s):R[L]});return this.__xhr.onload=u=>{i&&i(a(u))},this.__xhr.onreadystatechange=u=>{l&&l(a(u))},null!==r?(p("request.getMappedData")&&console.log(`url: ${this.__realUrl} is mapped to data:`,r),void n(r)):(p("request.getMappedData")&&console.log(`url: ${this.__realUrl} is not mapped to any data`),""!==this.__realUrl.trim()?X(this.__realUrl)?/\.js$/.test(this.__realUrl)&&!0!==window.xyxRequestScriptAllowed?(console.warn(`url: ${this.__realUrl} is a request for script which is not allowed`),void n("{}")):void Pe({...t,url:this.__realUrl,success:u=>{n(u)},fail:u=>{console.warn(`request ${this.__realUrl} failed with code: ${u}`),o()}}):(console.warn(`url: ${this.__realUrl} is not allowed to make a request`),void o()):void o())})):this.__xhr.send(e)};var N=e=>"string"==typeof e?e:"string"==typeof e.url?e.url:e.toString(),ht=window.Request;var xt=window.fetch,Oe=e=>new Response(null,{status:e,statusText:"Fail"});var wt=["getItem","setItem","removeItem","clear","key","length"],k=e=>new Proxy(e,{get:(t,r)=>"string"==typeof r?-1!==wt.indexOf(r)?t[r]:t.getItem(r):t[r]}),Fe="__keyToStorageKeys__",x=[],ie=()=>{f.storage.setItem(Fe,JSON.stringify(x))},Ae=e=>{-1===x.indexOf(e)&&(x.push(e),ie())},ne=e=>window.XYX_LOCAL_STORAGE_KEY_PREFIX?`${window.XYX_LOCAL_STORAGE_KEY_PREFIX}--${e}`:e,St={getItem(e){let t=ne(e),r=f.storage.getItem(t);return null===r&&e!==t&&(r=f.storage.getItem(e),null!==r&&(f.storage.setItem(t,r),f.storage.removeItem(e))),null!==r&&Ae(t),r},setItem(e,t){if(e=ne(e),Ae(e),void 0===t)t="undefined";else if(null===t)t="null";else{if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a string");t=t.toString()}return f.storage.setItem(e,t)},removeItem:e=>((e=>{let t=x.indexOf(e);-1!==t&&(x.splice(t,1),ie())})(e=ne(e)),f.storage.removeItem(e)),clear:()=>(x=[],ie(),f.storage.clear()),get length(){return x.length},key:e=>(e=>window.XYX_LOCAL_STORAGE_KEY_PREFIX?e.replace(`${window.XYX_LOCAL_STORAGE_KEY_PREFIX}--`,""):e)(x[e])};(()=>{try{x=JSON.parse(f.storage.getItem(Fe)||"[]")}catch(e){x=[]}})();var De=k(St),v=new Map,vt={getItem:e=>v.has(e)?v.get(e):null,setItem:(e,t)=>v.set(e,t),removeItem:e=>v.delete(e),clear:()=>v.clear(),get length(){return v.size},key:e=>Array.from(v.keys())[e]},Ce=k(vt),$e=!1;function j(e,t,r){return function(...o){if(!$e){$e=!0;try{f.crossFrameRequest({action:"renderStart"})}catch(i){console.warn("can not send renderStart message",i)}}let n=o[o.length-1];return n&&n.__xyxPlatformSource&&(o[o.length-1]=n.__xyxPlatformSource),t(...o)}}async function B(e){return window.xyxZipBundleConfig?(d||await _(),y(fetch),d.getUrl(e)):{url:e,onComplete:()=>{}}}var Lt=window.Image,P=class extends Lt{constructor(){super(),this._originSrc="",this._realSrc="",this.crossOrigin="anonymous",this._complete=!0}_waitLoaded(){let o=Date.now(),n=0,i=0;return new Promise((l=>{let s=()=>{l(),i&&clearInterval(i),this.removeEventListener("load",s),this.removeEventListener("error",s)};super.complete?s():(this.addEventListener("load",s),this.addEventListener("error",s),i=setInterval((()=>{super.complete?(clearInterval(i),s()):(n=o-Date.now(),n>=1e4&&(clearInterval(i),s()))}),300))}))}get complete(){return!(!super.complete||!this._realSrc)||this._complete}get src(){return this._originSrc}set src(r){var n;p("img.setSrc")&&console.log("HTMLImageElement#set src:",g(r)),this._originSrc=r,this._realSrc="",this._complete=!1,w(r),B(h(m(r,{disableSpecialLetterRemove:null==(n=null==window?void 0:window.xyxFormatUrlOption)?void 0:n.disableSpecialLetterRemove}),{mapAudio:!!window.xyxEnableAudioMapForLiteMode})).then((({url:i,onComplete:l})=>{super.src=this._realSrc=i,this._waitLoaded().then((()=>{p("img.onload")&&console.log("HTMLImageElement#onload:",g(this.src)),this._complete=!0,null==l||l()}))}))}},It=window.Audio,q=class extends It{constructor(r){super(),this._originSrc="",this._realSrc="",r&&(this.src=r)}_waitLoaded(){let o=Date.now(),n=0,i=0;return new Promise((l=>{let s=()=>{l(),i&&clearInterval(i),this.removeEventListener("load",s),this.removeEventListener("error",s),this.removeEventListener("abort",s)};this.readyState===this.HAVE_ENOUGH_DATA?s():(this.addEventListener("canplaythrough",s),this.addEventListener("error",s),this.addEventListener("abort",s),i=setInterval((()=>{this.readyState===this.HAVE_ENOUGH_DATA?(clearInterval(i),s()):(n=o-Date.now(),n>=1e4&&(clearInterval(i),s()))}),300))}))}get src(){return this._originSrc}set src(r){var n;this._originSrc=r,w(r),B(h(m(r,{disableSpecialLetterRemove:null==(n=null==window?void 0:window.xyxFormatUrlOption)?void 0:n.disableSpecialLetterRemove}),{mapAudio:!!window.xyxEnableAudioMapForLiteMode})).then((({url:i,onComplete:l})=>{super.src=this._realSrc=i,this._waitLoaded().then(l)}))}},Tt=E("navigator.sendBeacon"),Et=Object.create(window.navigator),se={language:window.navigator.language,languages:window.navigator.languages,sendBeacon:(e,t)=>(Tt()&&console.log("navigator.sendBeacon",e,t),!0)},Pt=Object.keys(se),He=new Proxy(Et,{get:(e,t)=>Pt.includes(t)?se[t]:void 0!==window.navigator[t]?"function"==typeof window.navigator[t]?window.navigator[t].bind(window.navigator):window.navigator[t]:void 0,set:(e,t,r)=>(console.warn(`trying to set navigator.${t} = ${r}`),!0)}),Ne=(e=>t=>{switch("cn"===t&&(console.warn("cn is not a valid locale, use zh instead"),t="zh"),t){case"en":e.language="en-US",e.languages=["en-US","en"];break;case"zh":e.language="zh-CN",e.languages=["zh-CN","zh"];break;case"es":e.language="es-ES",e.languages=["es-ES","es"];break;case"pt":e.language="pt-PT",e.languages=["pt-PT","pt"];break;default:throw new Error(`unsupported locale: ${t}`)}})(se),qt=1,K=new Map,W=-1,je=e=>{if(e>60)throw new Error("max fps is 60");xyx.supportSetFrame?(xyx.setPreferredFramesPerSecond(e),W=-1):W=Math.floor(1e3/(e+2))},Be=window.requestAnimationFrame,ae=0;Be((function Ke(e){Be(Ke);let t=Date.now();if(t>=ae){ae=W<0?t:t+W;let r=Array.from(K.values());K.clear();for(let o of r)o(e)}}));var We=e=>{let t=qt++;return K.set(t,e),t},Ze=e=>{K.delete(e)};window.mainCanvas=document.querySelector("canvas");{let e=window.mainCanvas.getContext;window.mainCanvas.getContext=function(t,r){if("webgl2"===t||"webgl"===t){let o=e.call(this,t,r);return o&&function(e){let t=e.texImage2D.bind(e);e.texImage2D=j(0,t);let r=e.compressedTexImage2D.bind(e);e.compressedTexImage2D=j(0,r);let o=e.texSubImage2D.bind(e);e.texSubImage2D=j(0,o);let n=e.compressedTexSubImage2D.bind(e);e.compressedTexSubImage2D=j(0,n)}(o),o}return e.call(this,t,r)}}var Mt=()=>{},Ot=()=>{},Ut=null,At="",Ft=async function(e,t){let r=m(N(e));w(r);let o=h(r,{mapAudio:!!window.xyxEnableAudioMapForLiteMode}),n=await G(o,e);if(null!==n)return n instanceof Response?n:new Response(n,{status:200,statusText:"OK"});if(""===o.trim())return console.warn("empty url is not allowed to make a request"),Oe(400);if(!X(o))return console.warn(`url: ${o} is not allowed to make a request`),Oe(400);if(/\.js$/.test(o))return console.warn(`url: ${o} is a request for script which is not allowed`),new Response("{}",{status:200,statusText:"OK"});let i=await(async(e,t)=>{if("string"==typeof e)return t;let r=e;if("string"===r.url){if(r.url=t,r.url===t)return r;let i,o=e;return o.headers.get("Content-Type")&&(i=await o.blob()),new ht(t,{method:o.method,headers:o.headers,body:i,referrer:o.referrer,referrerPolicy:o.referrerPolicy,mode:o.mode,credentials:o.credentials,cache:o.cache,redirect:o.redirect,integrity:o.integrity})}return t})(e,o);return async function(e,t,r){let o=m(N(t)),n=t.method||(null==r?void 0:r.method)||"GET",i=t.body||(null==r?void 0:r.body)||null;return window.xyxZipBundleConfig&&H({url:o,method:n,data:i})?(d||await _(),y(e),d.getData(o,r)):e(t,r)}(xt,i,t)},Dt=S,Ct=P,$t=q,Gt=window.devicePixelRatio,ue={};Z(ue,{FontFace:()=>Je,document:()=>Ve});var Xt=window.location,Ht=Object.create(window.document);function ze(e,t){if("img"===e.toLowerCase())return new P;if("audio"===e.toLowerCase())return new q;if("a"!==e||window.xyxDisableAnchorTagProxyForLiteMode)return window.document.createElement(e,t);let r=window.document.createElement("a",t),o="",n=!1;return Object.defineProperty(r,"href",{get:()=>n?["http:","https:","blob:","data: "].some((i=>o.startsWith(i)))?o:new URL(o,c.href).href:"",set(i){n=!0,o=i}}),r}function Nt(e,t,r){return"http://www.w3.org/1999/xhtml"===e?ze(t,r):window.document.createElementNS(e,t,r)}function jt(e){let t=function(e){if(!e)return e;let t=new URL(e),r=Xt.pathname.split("/").slice(0,-1).join("/");return 0===t.pathname.indexOf(r)&&(t.pathname=t.pathname.slice(r.length)),t.pathname.slice(1)}(e);return new URL(t,c.href).href}var Ve=new Proxy(Ht,{get:(e,t)=>"URL"===t?c.href:"createElement"===t?ze:"createElementNS"===t?Nt:"currentScript"===t?window.document.currentScript?new Proxy(window.document.currentScript,{get:(e,t)=>"src"===t?jt(e[t]):"function"==typeof e[t]?e[t].bind(e):e[t]}):window.document.currentScript:void 0!==window.document[t]?"function"==typeof window.document[t]?window.document[t].bind(window.document):window.document[t]:void 0,set:(e,t,r)=>(console.warn(`trying to set document.${t} = ${r}`),Reflect.set(window.document,t,r))}),Ye=window.FontFace;function Je(e,t,r){if("string"==typeof t){let o=t.match(/url\((.+)\)/)[1];return o=o.replace(/^['"](.+)['"]$/,"$1"),new Ye(e,`url(${m(o)})`,r)}return new Ye(e,t,r)}var Kt={...le,...ue,preloadZipBundle:async function(e){return window.xyxZipBundleConfig?(d||await _(),y(fetch),d.preload(e)):Promise.resolve()},getMappedRoute:h};{let t;if(["http://localhost","http://127.0.0.1","http://192.168","https://doxh.net","https://cdn.imagehost.top/"].some((r=>0===location.href.indexOf(r))))t=!1;else if("undefined"!=typeof URLSearchParams){if(t="preview"!==new URLSearchParams(window.location.search).get("ad_env"),t&&window.top!==window)try{t="preview"!==new URLSearchParams(window.top.location.search).get("ad_env")}catch(o){console.log("detect InProduction from top window failed",o)}}else if(t=!0!==/\bad_env=preview\b/.test(window.location.search),t&&window.top!==window)try{t=!0!==/\bad_env=preview\b/.test(window.top.location.search)}catch(r){console.log("detect InProduction from top window failed",r)}t&&(console.log=console.info=console.warn=console.error=()=>{})}window.xyxVM=Kt,window.xyxGroupRequestStart=Q,window.xyxGroupRequestComplete=$,window.xyxGetGroupRequestMap=()=>{let e={};return T.forEach(((t,r)=>{e[r]=Array.from(t)})),e},window.xyxPresetGroupWithPkgMap=e=>{Object.keys(e).forEach((t=>{let r=e[t];r.forEach((o=>{C.add(o)})),T.set(t,new Set(r))}))},window.xyxGetRequestGroupStack=M,window.xyxAutoGroupRequestStart=e=>{let t=0,o=0;if(D.size>0)return;let n=()=>{t=0;let i="auto"+o++;D.add(i),Q(i,e,(()=>{t++,t>=100&&($(i),n())}))};n()},window.xyxAutoGroupRequestComplete=()=>{D.forEach((e=>{$(e)})),D.clear()}})()},811:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){const{initSystemAdLogic}=__webpack_require__(144),{initCustomAdLogic}=__webpack_require__(786),{initNativeAdLogic}=__webpack_require__(701),{initCommonAdLogic}=__webpack_require__(794),{addBtnShowPrivacyConfirm,onPrivacyConfirmComplete}=__webpack_require__(521),USE_NATIVE_AD=xyx.isSupportNativeAd&&!xyx.isVIVO;function initAdLogic(){initCommonAdLogic(),USE_NATIVE_AD?initNativeAdLogic():xyx.isSupportCustomAd()?initCustomAdLogic():initSystemAdLogic()}window.NeedPrivacyConfirm?(addBtnShowPrivacyConfirm(),onPrivacyConfirmComplete().then(initAdLogic)):(window.autoShowPrivacyConfirm=()=>Promise.resolve(),initAdLogic())}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},179:(__unused_webpack_module,exports)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){let adInterstitialId="",adRewardedVideoId="",rewardedAdIdMap={"list-unlock-level":"","skip-to-next-level":"","skip-get-answer":"",new_skin_take:""};adInterstitialId="fake-system-interstitial",adRewardedVideoId="fake-system-rewarded-video",exports.adBannerId="",exports.adInterstitialId=adInterstitialId,exports.adRewardedVideoId=adRewardedVideoId,exports.adAppBoxId="",exports.adBoxPortalId="",exports.nativeAdIdMap={"state-main-interstitial":"","state-list-banner":"","state-shop-interstitial":"","state-complete-interstitial":"","state-skip-banner":"","state-new-skin-interstitial":""},exports.rewardedAdIdMap=rewardedAdIdMap,window.rewardedAdIdMap=rewardedAdIdMap}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},794:(__unused_webpack_module,exports,__webpack_require__)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){const{adBoxPortalId,adAppBoxId,adRewardedVideoId}=__webpack_require__(179),{initAdBoxPortal}=__webpack_require__(803),{initAdAppBox}=__webpack_require__(833);exports.initCommonAdLogic=function(){window.adRewardedVideo=xyx.createRewardedVideoAd(adRewardedVideoId),window.rewardedAdIdMap=rewardedAdIdMap,initAdAppBox(adAppBoxId),initAdBoxPortal(adBoxPortalId)}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},786:(__unused_webpack_module,exports,__webpack_require__)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){const{nativeAdIdMap}=__webpack_require__(179),{STATE_ANSWER}=__webpack_require__(844),customAdCenterY=(window.innerHeight-xyx.calcCustomAdHeight(xyx.VIVOAdLayout.UP_IMG_DOWN_TEXT))/2;QGUtils.GameStates.COMPLETE;exports.initCustomAdLogic=function(){window.adBanner=xyx.createCustomAd(nativeAdIdMap["state-game-banner"])}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},844:()=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){window.EVENT_RECORDING_END="recording-end",window.EVENT_PRESET_SONG_PLAY="preset-song-play",window.EVENT_BACK_TO_MAIN="back-to-main"}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},833:(__unused_webpack_module,exports)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){exports.initAdAppBox=function(adAppBoxId){if(xyx.isSupportAppBox()&&adAppBoxId){const adAppBox=window.adAppBox=xyx.createAppBox(adAppBoxId);let moreGameBtn;const initMoreGameBtn=()=>{NativeUI.Bitmap.loadFromUrl("btn-more-game.png").then((btn=>{NativeUI.getRootNode().addChild(btn.node),btn.x=0,btn.y=0,btn.addEventListener("click",(()=>{QGUtils.showAdAppBox(adAppBox)}))}))},destroyMoreGameBtn=()=>{moreGameBtn&&(moreGameBtn.destroy(),moreGameBtn=null)};QGUtils.onState(QGUtils.GameStates.MAIN,initMoreGameBtn,destroyMoreGameBtn)}}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},803:(__unused_webpack_module,exports)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){exports.initAdBoxPortal=function(adBoxPortalId){xyx.isSupportBoxPortalAd()&&adBoxPortalId&&QGUtils.registerAdBoxPortal({adBoxId:adBoxPortalId,showOnState:[QGUtils.GameStates.MAIN,QGUtils.GameStates.COMPLETE,STATE_SKIP],marginTop:435})}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},701:(__unused_webpack_module,exports,__webpack_require__)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){const{nativeAdIdMap,adBannerId,adInterstitialId}=__webpack_require__(179);exports.initNativeAdLogic=function(){window.adBanner=xyx.createBannerAd(adBannerId,{style:{vertical:"bottom",horizontal:"center",autoShowInterval:0}}),window.adInterstitial=xyx.createInterstitialAd(adInterstitialId)}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},521:(__unused_webpack_module,exports)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){const handleShow=privacyConfirm=>{window.privacyConfirm=privacyConfirm};let privacyConfirmResolve=null;window.autoShowPrivacyConfirm=()=>new Promise(((resolve,reject)=>{QGUtils.privacyConfirm.autoShowPrivacyConfirm({showOnEvent:null,parentNodeGetter:()=>null,onShow:handleShow,onComplete:()=>{privacyConfirmResolve&&privacyConfirmResolve(),QGUtils.gameLogin({hwAppId:appId}).then(resolve)}})}));const showPrivacyConfirm=()=>{QGUtils.privacyConfirm.showPrivacyConfirm({parentNodeGetter:()=>null}).then(handleShow)};exports.addBtnShowPrivacyConfirm=()=>{let btn;QGUtils.onState(QGUtils.GameStates.MAIN,(()=>QGUtils.assetManager.load(["btn-show-privacy-confirm.png"],{isCache:!1}).then((([img])=>{const btn=NativeUI.Bitmap.loadFromImage(img),rootNode=NativeUI.getRootNode();return btn.addEventListener("click",showPrivacyConfirm),rootNode.addChild(btn.node),btn.scaleX=btn.scaleY=.3,btn.y=112,btn.x=22,window.btnShowPrivacyConfirm=btnShowPrivacyConfirm=btn,btn}))),(()=>{btn&&(btn.destroy(),btn=null)}))},exports.onPrivacyConfirmComplete=function(){return new Promise((resolve=>{privacyConfirmResolve=resolve}))}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},144:(__unused_webpack_module,exports,__webpack_require__)=>{(function(window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){const{adBannerId,adInterstitialId}=__webpack_require__(179);__webpack_require__(844),exports.initSystemAdLogic=function(){window.adBanner=xyx.createBannerAd(adBannerId,{style:{vertical:"bottom",horizontal:"center",autoShowInterval:0}});const adInterstitial=window.adInterstitial=xyx.createInterstitialAd(adInterstitialId),showInterstitial=adParam=>adInterstitial.show(adParam),showInterstitialWithDelay=delay=>adParam=>{setTimeout((()=>{showInterstitial(adParam)}),delay)};QGUtils.onGameEvent(window.EVENT_PRESET_SONG_PLAY,showInterstitialWithDelay(300)),QGUtils.onGameEvent(window.EVENT_RECORDING_END,showInterstitialWithDelay(300)),QGUtils.onGameEvent(window.EVENT_BACK_TO_MAIN,showInterstitialWithDelay(300))}}).call(window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}(()=>{window.XYX_IS_BROWSER=!0;const XYX_GAME_VERSION=window.XYX_GAME_VERSION="1.0.1",XYX_IS_DEVELOPMENT=(window.XYX_GAME_ID="blob-opera",window.XYX_GAME_NAME="Blob Opera",window.XYX_USE_VM=!0,window.XYX_IS_DEVELOPMENT=!1);window.self||(window.self=window),window.XYX_IS_BROWSER&&(window.XYX_LOCAL_STORAGE_KEY_PREFIX=window.XYX_GAME_ID);const extendedWindow={location:()=>window.xyxVM.location,navigator:()=>window.xyxVM.navigator,document:()=>window.xyxVM.document,localStorage:()=>window.xyxVM.localStorage,sessionStorage:()=>window.xyxVM.sessionStorage,requestAnimationFrame:()=>window.xyxVM.requestAnimationFrame,cancelAnimationFrame:()=>window.xyxVM.cancelAnimationFrame,XMLHttpRequest:()=>window.xyxVM.XMLHttpRequest,fetch:()=>window.xyxVM.fetch,FontFace:()=>window.xyxVM.FontFace,open:()=>window.xyxVM.open,Image:()=>window.xyxVM.Image,Audio:()=>window.xyxVM.Audio},extendedKeys=new Set(Object.keys(extendedWindow)),globalNames=new Set(["global","window","self","top","parent"]),optionalPropsProxiesByVM=(Object.getOwnPropertyNames(window),new Set(["webkitAudioContext","webkitOfflineAudioContext","matchMedia","PointerEvent","indexedDB","AudioContext"]),new Set([]),new Set(["onfocus","onblur","onload","ontouchstart","ontouchmove","ontouchend","ontouchcancel"]));optionalPropsProxiesByVM.forEach((prop=>{prop in window||(window[prop]=void 0)}));const proxyObject=Object.create(window),updatedGlobalProps=new Set,isUnWriteableGlobalFunction=prop=>"function"==typeof window[prop]&&/^[a-z]/.test(prop)&&!updatedGlobalProps.has(prop),proxiesWindow=new Proxy(proxyObject,{get:(target,prop)=>extendedKeys.has(prop)?extendedWindow[prop]():globalNames.has(prop)?proxiesWindow:isUnWriteableGlobalFunction(prop)?(...args)=>window[prop](...args):window[prop],set:(target,prop,value)=>(optionalPropsProxiesByVM.has(prop),extendedKeys.has(prop)||window.xyxVM&&window.xyxVM.hasOwnProperty(prop)||isUnWriteableGlobalFunction(prop)||globalNames.has(prop)?(console.warn("can not set window."+prop),!0):(window[prop]=value,updatedGlobalProps.add(prop),!0)),defineProperty:(target,prop,descriptor)=>(console.warn("window: defineProperty",prop,descriptor),extendedKeys.has(prop)||window.xyxVM&&window.xyxVM.hasOwnProperty(prop)||isUnWriteableGlobalFunction(prop)||globalNames.has(prop)?(console.warn("can not set window."+prop),!0):(Object.defineProperty(window,prop,descriptor),updatedGlobalProps.add(prop),!0))});window.extendedWindow=extendedWindow,window.proxiesWindow=proxiesWindow,window.XYX_GAME_INDEX_ORIGIN=location.origin,document.addEventListener("DOMContentLoaded",(function(){window.XYX_GAME_INDEX_ORIGIN=location.origin,xyx.triggerReady();const domVersion=document.getElementById("version");domVersion&&XYX_GAME_VERSION&&(domVersion.textContent=XYX_GAME_VERSION+"")}),!1);try{const inProduction=!0,inPreview="preview"===new URLSearchParams(window.top.location.search).get("ad_env");inProduction&&!inPreview&&(console.log=console.warn=console.error=console.info=console.debug=()=>{})}catch(e){console.warn("overwrite console failed: ",e)}window.xyxWebSupport={nativeAd:!1,customAd:!1,gameRecord:!1,shortcutStatus:0,appBox:!1,boxPortal:!1},window.xyxLogMuteControl={storage:!0,recordUrl:!0,xhr:{readStart:!0,readBack:!0},request:{getMappedRoute:!0,getMappedData:!0},img:{setSrc:!0,onload:!0}},__webpack_require__(796),__webpack_require__(447),__webpack_require__(712),QGUtils.Locale.setLocale(["web","kwai","hippoo","afg","botim"].includes("hippoo")?"en":"zh");const isLocaleZH="zh"===QGUtils.Locale.getLocale();window.NeedRemoteConfig=!1,window.IsGameApproved=!window.NeedRemoteConfig,window.NeedPrivacyConfirm=!(xyx.isTT||xyx.isKS)&&isLocaleZH,window.IsSmallScreen=window.innerHeight/2<window.innerWidth,window.HealthNoteStayMinTime=xyx.isHW?2300:300,window.NeedInitAdAfterPrivacyConfirm=xyx.isHW||xyx.isWeb,window.NeedHealthNote=isLocaleZH,window.NeedCopyRight=(xyx.isHW||xyx.isOPPO||xyx.isWeb)&&isLocaleZH,window.NeedAgeTips=!xyx.isTT&&isLocaleZH,window.NeedRemoteConfig&&QGUtils.getGameConfig("GameName").then((config=>{const IsGameApproved=QGUtils.checkAppApprovedStatusWithConfig(config),NeedGeoConfirm=xyx.isVIVO||xyx.isWeb&&XYX_IS_DEVELOPMENT;console.log("IsGameApproved by ip and config: ",IsGameApproved,config),IsGameApproved&&NeedGeoConfirm?QGUtils.onGameEvent(QGUtils.GameEvent.EVENT_PRIVACY_COMPLETE,(()=>{QGUtils.geo.confirmAppApprovedByGeo(config).then((res=>{window.IsGameApproved=res}))}),!0):window.IsGameApproved=IsGameApproved})),function(){try{__webpack_require__(811)}catch(e){throw console.log(e),xyx.showDialog({title:"出错了",content:e.stack}),e}}()})()})();