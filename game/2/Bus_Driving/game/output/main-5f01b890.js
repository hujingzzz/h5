(self.webpackChunkreal_bus_simulator_3d=self.webpackChunkreal_bus_simulator_3d||[]).push([[125],{211:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){var NativeAd=(()=>{var q=Object.defineProperty,we=Object.getOwnPropertyDescriptor,Ce=Object.getOwnPropertyNames,Se=Object.prototype.hasOwnProperty,Ue={};((e,o)=>{for(var t in o)q(e,t,{get:o[t],enumerable:!0})})(Ue,{AdWeight:()=>R,CloseBy:()=>k,TagedAdStatus:()=>b,getAdShowing:()=>he,loadAdWithTag:()=>D,registeTagedAd:()=>Ae,reportClickAdWithTag:()=>fe,requestHideAdWithTag:()=>S,requestShowAdWithTag:()=>T,setDisableDurationAfterUserClosed:()=>W,setShowInterval:()=>le,setSilentSecond:()=>j});var g=xyx;var{addTagedAd:X,getTagedAd:f,clearTagedAd:We}=function(){let e=new Map;return{addTagedAd(o){e.set(o.tag,o)},getTagedAd:o=>e.get(o),clearTagedAd(){e.clear()}}}();var{addNativeAd:G,getNativeAd:w,clearNativeAd:Me}=function(){let e=new Map;return{addNativeAd(o){e.set(o.id,o)},getNativeAd:o=>e.get(o),clearNativeAd(){e.clear()}}}();var{queueRequest:I,dequeueRequest:Q,queryRequest:Y,removeRequestWithId:J,getQueue:He,clearQueue:Be}=function(){let e=[];return{queueRequest(o,t){"front"===t?e.unshift(o):e.push(o)},dequeueRequest:()=>e.shift(),queryRequest:o=>e.filter((t=>t.tag===o)),removeRequestWithId(o){let t=Array.isArray(o)?o:[o];e=e.filter((n=>!t.includes(n.requestId)))},getQueue:()=>e,clearQueue(){e=[]}}}();var{setShowingTagedAdContext:K,getShowingTagedAdContext:c,clearShowingTagedAdContext:z}=function(){let e=null;return{setShowingTagedAdContext(o){e=o},getShowingTagedAdContext:()=>e,clearShowingTagedAdContext(){e=null}}}();var{isUnderSilent:V,setSilentSecond:j}=function(){let e=Date.now(),o=0;return{isUnderSilent:()=>Date.now()-e<1e3*o,setSilentSecond:t=>{o=t}}}();var{isClickFrequencyLimit:_,updateClickTime:Z}=function(){let e=0;return{isClickFrequencyLimit:()=>Date.now()-e<1e3,updateClickTime(){e=Date.now()}}}();var i,n,s,{resetReportClickStatus:Fe,isReportClickDisabled:ee,delayTouchMoveEnable:oe}=function(){let t,e=!1,o=!1,n=()=>{e=!0,o=!0,console.log("reportClick is disabled from onHide",e,o),t&&(clearTimeout(t),t=void 0)},r=()=>{console.log("reportClick handleShow",o,e),t=setTimeout((()=>{o=!1,console.log("reportClick is enabled from onShow")}),3e3)};return g.onHide(n),g.onShow(r),{resetReportClickStatus(){e=!1,o=!1,t&&(clearTimeout(t),t=void 0),g.offShow(r),g.offHide(n)},isReportClickDisabled:()=>o,delayTouchMoveEnable(){t&&(clearTimeout(t),t=null),t=setTimeout((()=>{console.log("reportClick is enabled from call"),o=!1}),300)}}}(),R=((n=R||{})[n.Low=0]="Low",n[n.Middle=1]="Middle",n[n.High=2]="High",n),k=((i=k||{}).UserClosed="UserClosed",i.UnknownError="UnknownError",i.WeightConflict="WeightConflict",i.ConditionUnmatched="ConditionUnmatched",i.StateChange="StateChange",i),b=((s=b||{})[s.INIT=0]="INIT",s[s.LOADING=1]="LOADING",s[s.LOADED=2]="LOADED",s[s.SHOWING=3]="SHOWING",s[s.CLOSED=4]="CLOSED",s[s.SKIPPED=5]="SKIPPED",s[s.FAILED=6]="FAILED",s),x=QGUtils,y=xyxVM,E=g.isMI?"https://res.heigame.com/xyx/cross-ui/ad-logo-mi.png":"https://res.heigame.com/xyx/cross-ui/ad-logo.png",h=[],N=e=>{let o=h.find((t=>t[0]===e));if(o){if(o[1].src)return o[2]=o[2]+1,console.log(`Image ${e} is cached, match times: ${o[2]}`),Promise.resolve(o[1]);console.warn(`Image ${e} is destroyed, remove it from cache`),h.splice(h.indexOf(o),1)}return new Promise(((t,n)=>{let r=new Image;r.onload=()=>{h.push([e,r,0]),h.length>20&&(h=h.sort(((i,a)=>i[2]-a[2])),h.shift()),t(r)},r.onerror=()=>{n(new Error(`Failed to load image: ${e}`))},r.crossOrigin="Anonymous",r.src=e}))},O=()=>{let e=document.createElement("canvas");return e.width=8,e.height=8,e.getContext("2d").clearRect(0,0,8,8),e};var ae=e=>{let o=g.nativeAdCreator(e),t=null,n=null,r={id:e,loadData:i=>t||(V()?Promise.reject(new Error("under silent")):t=o.then((a=>new Promise(((s,d)=>{n||(console.log(`nativeAd: loadData: getData for id: ${e}`),n=a.getData());let l=!1;console.log(`nativeAd: loadData: getDataPromise for id: ${e}`),n.then((m=>{console.log(`nativeAd: loadData: getDataPromise back for id: ${e}`),l=!0,s(m)})).catch((m=>{l=!0,n=null,d(m)})),setTimeout((()=>{l||console.warn(`nativeAd: loadData: getData timeout for id: ${e}`),d(new Error("timeout for limit: 5000"))}),5e3)})))).then((a=>{if(!a)throw new Error("empty data");return console.log(`nativeAd: loadData: getData back for id: ${e}:`,JSON.stringify(a)),((e,{isNeedIcon:o,isNeedImg:t,preferImgAsIcon:n})=>{if(g.isVIVO?(console.log(`nativeAd: use defaultAdLogoUrl: ${E} to replace ${e.logoUrl}`),e.logoUrl=E):e.logoUrl||(e.logoUrl=E),o&&(n?e.imgUrl&&(console.log(`nativeAd: adaptNativeAdData: preferImgAsIcon so use img: ${e.imgUrl} as icon`),e.icon=e.imgUrl):e.icon||(console.log(`nativeAd: adaptNativeAdData: icon is empty, use img: ${e.imgUrl} as icon`),e.icon=e.imgUrl)),t&&!e.imgUrl&&(console.log(`nativeAd: adaptNativeAdData: img is empty, use icon: ${e.icon} as img`),e.imgUrl=e.icon),y.xyxAddAllowedUrlPrefix(e.logoUrl),y.xyxAddAllowedUrlPrefix(e.icon),y.xyxAddAllowedUrlPrefix(e.imgUrl),!e.clickBtnTxt)switch(e.interactionType){case g.NativeAdInteractionType.Download:e.clickBtnTxt="点击下载";break;case g.NativeAdInteractionType.Open:default:e.clickBtnTxt="立即查看"}return console.log("nativeAd: adaptNativeAdData: adapted data",JSON.stringify(e)),e})(a,i)})).catch((a=>{throw console.warn(`nativeAd: loadData: getData failed for id: ${e}, reset dataRequestPromise`,g.getErrorMsg(a)),t=null,a}))),loadResource:i=>r.loadData(i).then((a=>function(e,{isNeedIcon:o,isNeedImg:t,preferImgAsIcon:n}){console.log("nativeAd: loadResource with",JSON.stringify(e),JSON.stringify({isNeedIcon:o,isNeedImg:t,preferImgAsIcon:n}));let l,m,A,{icon:r,imgUrl:i,logoUrl:a,...s}=e,d=[];d.push(N(a).then((p=>l=p)));let u=r===i;return o?d.push(N(r).then((p=>m=p))):(console.log("nativeAd: loadResource not need icon, use empty image"),m=O()),console.log("nativeAd: loadResource options:",JSON.stringify({isNeedImg:t,imgUrl:i,isNeedIcon:o,preferImgAsIcon:n,iconUrl:r,isIconUsingImg:u})),i&&t&&!u?(console.log(`nativeAd: loadResource load img image: ${i}`),d.push(N(i).then((p=>A=p)))):(console.log("nativeAd: loadResource, no need img or no need img repeat load, use empty image"),A=O()),Promise.all(d).then((()=>(console.log("nativeAd: loadResource complete:",JSON.stringify({logoUrl:a,imgUrl:i,iconUrl:r})),{icon:m,img:u&&t?m:A,logo:l,...s})))}(a,i))),reportShow(i,a){3!==i.status||a?(e=>4===e.status||5===e.status||6===e.status)(i)?console.warn(`nativeAd: ${e} can not report show when context completed`):1!==i.status?(console.log(`nativeAd: before reportShow ${e}`),Promise.all([o,t]).then((([s,d])=>{s.reportAdShow({adId:d.adId}),i.onShow("native")}))):console.warn(`nativeAd: can not show ad: ${e} when loading`):console.warn("nativeAd: current ad instance is showing, no need reportShow again")},reportClick(i){if("system"!==i.showType){if(3===i.status)return ee()?(console.warn("report click disabled"),void oe()):void(_()?console.log("nativeAd: report click too frequency:"):(Z(),i.nativeAdClicked=!0,Promise.all([o,t]).then((([a,s])=>{console.log(`nativeAd: reportClick ${e}, call reportAdClick`),a.reportAdClick({adId:s.adId})})).catch((a=>{console.log(`nativeAd: reportClick ${e}, reportAdClick failed:`,a)}))));console.warn("can not report click when not showing")}else console.warn("can not report click when using system ad")},clear(){n=null,t=null}};return r},C=e=>{let o=w(e);return o||(console.log(`getNativeAdByTag: nativeAd: ${e} has not created, so create it`),o=ae(e),G(o)),o};function D(e){console.log("tagedAd: loadAdWithTag: ",e);let o=f(e);if(!o)throw new Error(`tagedAd: loadAdWithTag: tag: ${e} not found`);let{isNeedIcon:t,isNeedImg:n,preferImgAsIcon:r}=o;return C(o.nativeAdId).loadResource({isNeedIcon:t,isNeedImg:n,preferImgAsIcon:r})}var U=0,L=0,$={interstitial:{prevShowTime:0,prevUserCloseTime:0},banner:{prevShowTime:0,prevUserCloseTime:0}},P=e=>-1!==e.indexOf("interstitial")?"interstitial":"banner",le=e=>{U=e},W=e=>{L=e};function M(e,o){var t,n;4!==e.status?(e.usingSystemAd?null==(t=e.systemAd)||t.hide():(null==(n=e.layoutControl)||n.handleHide(),e.layoutControl=null),e.status=4,e.onClose(o)):console.warn("nativeAd: can not close ad: when closed")}g.isMI&&(console.log("state: isMI"),W(3e4));var S=(e,o="UserClosed")=>{let t=c(),n=!1;if("string"==typeof e?t&&t.tag===e&&(n=!0):n=t===e,n)M(t,o);else if("string"==typeof e){let r=Y(e);r.forEach((i=>{i.onSkip("RequestHideInQueue")})),J(r.map((i=>i.requestId)))}else M(e,o)};var me=({onShow:e,onSkip:o,onClose:t,onError:n,onCompleted:r,...i})=>{let a={...i,onShow(s){a.showed=!0,a.showType=s,a.status=3,(e=>{$[P(e)].prevShowTime=Date.now()})(a.tag),e(s)},onClose(s){a.status=4,a.closeBy=s,"UserClosed"===s&&(e=>{$[P(e)].prevUserCloseTime=Date.now()})(a.tag);let d=C(a.nativeAdId);d&&d.clear(),t(s),a.onCompleted()},onSkip(s){a.status=5,a.skipBy=s,o(s),a.onCompleted()},onError(s){a.status=6,a.errType=s,n(s),a.onCompleted()},onCompleted(){r(),c()===a&&(console.log(`tagedAd: ${a.tag} onCompleted: clearShowingTagedAdContext`),z(),function(){let e=Q();e&&T(e)}())},layoutControl:null,usingSystemAd:!1,showed:!1,showType:"native",status:0,nativeAdClicked:!1,closeBy:null,skipBy:null,errType:null};return a},be=1,H=()=>be++;var e,T=e=>{let o=(e=>{let o;if(function(e){return void 0!==e.requestId}(e))return e;let t="string"==typeof e?e:e.tag,n=f(t);if(!n)throw new Error(`tagedAd: generateRequest: tag: ${t} not found`);let{preloadOnEnterState:r,showOnEnterState:i,hideOnLeaveState:a,...s}=n;if("string"==typeof e){let d={onShow(l){},onClose(l){d.onCompleted()},onSkip(l){d.onCompleted()},onError(l){d.onCompleted()},onCompleted(){}};o={requestId:H(),...s,...d}}else{let d={onShow(l){e.onShow&&e.onShow(l)},onClose(l){e.onClose&&e.onClose(l),d.onCompleted()},onSkip(l){e.onSkip&&e.onSkip(l),d.onCompleted()},onError(l){e.onError&&e.onError(l),d.onCompleted()},onCompleted(){e.onCompleted&&e.onCompleted()}};o={requestId:H(),...s,...e,...d}}return o})(e),{tag:t}=o;if(console.log("tagedAd: requestShowAdWithTag: ",t),!(e=>{let o=Date.now(),{prevShowTime:t,prevUserCloseTime:n}=$[P(e)],r=o-t,i=o-n;return r<U?(console.warn(`tagedAd: can not show for showInterval: ${r}/${U}`,e),!1):!(i<L&&(console.warn(`tagedAd: can not show for disableDurationAfterUserClosed: ${i}/${L}`,e),1))})(t))return console.log(`tagedAd: requestShowAdWithTag: tag: ${t} is not able to show`),void o.onSkip("UnderDisableDuration");let n=c();if(n)return n.tag===t?(console.log(`tagedAd: requestShowAdWithTag: tag: ${t} is already showing`),void o.onSkip("IdSameAsShowing")):o.weight<=n.weight?(console.log(`tagedAd: requestShowAdWithTag: tag: ${t} is added to queue end`),void I(o,"end")):(I(o,"front"),console.log(`tagedAd: requestShowAdWithTag: tag: ${t} is added to queue front`),void S(n,"WeightConflict"));let r=me(o);K(r);let i=C(o.nativeAdId),{isNeedImg:a,isNeedIcon:s,preferImgAsIcon:d,preloadResource:l}=r;console.log(`tagedAd: load resource for ad: ${t}`),r.status=1;let m={isNeedImg:a,isNeedIcon:s,preferImgAsIcon:d},A=l?i.loadResource(m):i.loadData(m);Promise.all([A,r.isAbleShow()]).then((([u,p])=>(console.log(`tagedAd: load resource for ad: ${t} completed`),r.status=2,p?r!==c()?(console.log(`tagedAd: adShowing is changed during ad: ${t} loading data, so do not show it`),Promise.reject(new Error("showing context changed"))):r.layoutFunction(u,{tag:t,reportClick(){i.reportClick(r)},reportClose(){console.log("DEPRECATED!! tagedAd: reportClose: ",t)}}):(console.log("tagedAd: unable to show tag: ",e,"for unmatched condition, so close it!"),void r.onSkip("ConditionUnmatched"))))).then((u=>{if(console.log(`tagedAd: ${t} show completed with layoutFunction`),r.layoutControl=u,r!==c())return console.log(`tagedAd: adShowing is changed during ad: ${t} layoutFunction, so do not show it`),u.handleHide(),Promise.reject(new Error("showing context changed"));i.reportShow(r)})).catch((u=>{console.log(`tagedAd: load resource for ad: ${t} failed: `,g.getErrorMsg(u)),r!==c()?(console.log(`tagedAd: adShowing is changed during ad: ${t} prepare show, so do not show it`),r.onSkip("NotShowingContext")):(e=>{if(!e.systemAd)return console.warn(`showWithSystemAd: ${e.tag} has no fallback systemAd`),void e.onError("NoSystemAdOnRequired");e.usingSystemAd=!0,e.systemAd.show({id:e.systemAdId,onShow(){e.onShow("system")},onClose(){console.log(`showWithSystemAd: the fallback systemAd for ad: ${e.tag} closed by user`),e.onClose("UserClosed")},onFail(o){o===g.ADState.Download_Failed?(console.log(`showWithSystemAd: the fallback systemAd for ad: ${e.tag} has no data`),e.onError("NoData")):(console.log(`showWithSystemAd: the fallback systemAd for ad: ${e.tag} play failed`),e.onError("UnknownError"))}})})(r)}))},Oe=()=>Promise.resolve(!0),Ae=e=>{var a,s;let{tag:o,layoutFunction:t,nativeAdId:n}=e;if(!o||!t||!n)throw new Error("miss required param, tag, layoutFunction, nativeAdId");if(f(o))throw new Error(`tag ${o} already exist`);return null!=e.systemAd||(e.systemAd=null),null!=e.systemAdId||(e.systemAdId=""),e.weight=null!=(a=e.weight)?a:1,e.isAbleShow=null!=(s=e.isAbleShow)?s:Oe,null!=e.isNeedImg||(e.isNeedImg=!0),null!=e.isNeedIcon||(e.isNeedIcon=!0),null!=e.preferImgAsIcon||(e.preferImgAsIcon=!1),null!=e.preloadOnClose||(e.preloadOnClose=!0),null!=e.preloadOnEnterState||(e.preloadOnEnterState=[]),null!=e.showOnEnterState||(e.showOnEnterState=[]),null!=e.hideOnLeaveState||(e.hideOnLeaveState=[]),null!=e.preloadResource||(e.preloadResource=!0),e.preloadOnEnterState.length>0&&e.preloadOnEnterState.forEach((v=>x.onEnterState(v,(()=>D(o))))),e.showOnEnterState.length>0&&e.showOnEnterState.forEach((v=>x.onEnterState(v,(()=>T(o))))),e.hideOnLeaveState.length>0&&e.hideOnLeaveState.forEach((v=>x.onLeaveState(v,(()=>S(o,"StateChange"))))),X(e),e},he=()=>{var o;let e=c();return null!=(o=null==e?void 0:e.tag)?o:""},fe=e=>{let o=c();(null==o?void 0:o.tag)===e&&w(o.nativeAdId).reportClick(o)};return g.onShow((()=>{if(!g.isHW)return;let e=c();if(!e)return;let o=w(e.nativeAdId);console.log("tagedAd: onShow, reportShow for adShowing:",e.tag),o.reportShow(e,!0)})),e=Ue,((e,o,t,n)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let r of Ce(o))!Se.call(e,r)&&r!==t&&q(e,r,{get:()=>o[r],enumerable:!(n=we(o,r))||n.enumerable});return e})(q({},"__esModule",{value:!0}),e)})();window.NativeAd=NativeAd}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},807:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){var NativeUI=(()=>{var we=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,Et=Object.getOwnPropertyNames,Ct=Object.prototype.hasOwnProperty,Ue=(e,t)=>{for(var r in t)we(e,r,{get:t[r],enumerable:!0})},Ht={};function p(e,{level:t="error"}={}){if("warn"!==t)throw new Error(`Unsupported feature: ${e} for framework: laya`);console.warn(`Unsupported feature: ${e} for framework: laya`)}Ue(Ht,{BannerAd1:()=>xe,BannerAd2:()=>tt,Bitmap:()=>O,Confirm:()=>Ie,Container:()=>M,Graphics:()=>J,IconAd:()=>it,InterstitialAd1:()=>ot,LanguageSelectPopup:()=>ct,Popup:()=>ae,PrivacyConfirm:()=>st,ShapeRect:()=>k,Text:()=>X,addChild:()=>Fe,addEventListener:()=>G,adjustTo:()=>W,animation:()=>Ye,blockInputEvents:()=>se,createNativeUI:()=>Xe,destroyNode:()=>ye,findChildBy:()=>We,findChildByName:()=>He,genXPath:()=>pt,getAlpha:()=>ue,getChildren:()=>Pe,getHeight:()=>be,getName:()=>ce,getNode:()=>lt,getParent:()=>re,getRootNode:()=>$e,getScale:()=>dt,getScaleX:()=>Z,getScaleY:()=>ee,getStageHeight:()=>he,getStageSize:()=>rt,getStageWidth:()=>Q,getVisible:()=>ge,getWidth:()=>Oe,isDestroyed:()=>q,isVisible:()=>De,outlineNode:()=>ut,removeEvent:()=>ze,removeEventListener:()=>Re,setAlpha:()=>ht,setHeight:()=>Qe,setScale:()=>ft,setScaleX:()=>me,setScaleY:()=>de,setVisible:()=>mt,setWidth:()=>Je});var q=e=>!e||!!e.destroyed,ue=e=>(e=>e.alpha)(e),ge=e=>(e=>!!e.visible)(e),Oe=(e,t)=>((e,{isContainer:t}={})=>{var r;return t?null!=(r=e.__crossUIWidth)?r:e.getBounds().width:e.width})(e,t),be=(e,t)=>((e,{isContainer:t}={})=>{var r;return t?null!=(r=e.__crossUIHeight)?r:e.getBounds().height:e.height})(e,t),Z=e=>(e=>e.scaleX)(e),Ne=e=>e.isScaleAffectedSize?1:e.scaleX,ee=e=>(e=>e.scaleY)(e),te=e=>e.isScaleAffectedSize?1:e.scaleY;function re(e){return e.parent}var De=(e,{isCheckParent:t=!0,isContainer:r,__isParent:o=!1}={})=>{if(!e||q(e)||ue(e)<=0||!1===ge(e)||Oe(e,{isContainer:r})<=0||be(e,{isContainer:r})<=0||0===Z(e)||0===ee(e))return!1;if(t){let i=re(e);if(i)return De(i,{isCheckParent:t,isContainer:!0,__isParent:!0})}return!0},Mt=(e,t,r)=>{switch(t){case"click":e.off(Laya.Event.CLICK,e,r);break;case"touchmove":e.off(Laya.Event.MOUSE_MOVE,e,r);break;default:console.error("removeEventListenerLaya has no support for eventName: ",t)}};function Ve(e,t,r){return Mt(e,t,r)}function ze(e,t,r){console.warn("Deprecated: removeEvent, use removeEventListener instead"),Ve(e,t,r)}var Re=Ve,ye=e=>{if(!q(e))return(e=>{e.destroy(!0)})(e)},$e=()=>{p("getRootNode")},Tt=(e,t,r)=>{switch(e.on(t,e,r),t){case"click":e.on(Laya.Event.CLICK,e,r);break;case"touchmove":e.on(Laya.Event.MOUSE_MOVE,e,r);break;case"touchend":e.on(Laya.Event.MOUSE_UP,e,r);break;case"touchstart":e.on(Laya.Event.MOUSE_DOWN,e,r);break;default:console.error("has no support for eventName: ",t)}};function G(e,t,r){return Tt(e,t,r)}var M,H=class{constructor(){this.isScaleAffectedSize=!1,this._anchorX=0,this._anchorY=0}addEventListener(t,r){G(this.node,t,r)}removeEventListener(t,r){Re(this.node,t,r)}get x(){return this.node.x}set x(t){this.node.x=t}get y(){return this.node.y}set y(t){this.node.y=t}get width(){return this.node.width}set width(t){this.node.width=t,this.anchorX=this._anchorX}get height(){return this.node.height}set height(t){this.node.height=t,this.anchorY=this._anchorY}get visible(){return this.node.visible}set visible(t){this.node.visible=t}get anchorX(){return this.width?this._anchorX=this.node.pivotX/this.width:this._anchorX}set anchorX(t){this._anchorX=t,this.node.pivotX=t*this.width}get anchorY(){return this.height?this._anchorY=this.node.pivotY/this.height:this._anchorY}set anchorY(t){this._anchorY=t,this.node.pivotY=t*this.height}get scaleX(){return this.node.scaleX}set scaleX(t){this.node.scaleX=t}get scaleY(){return this.node.scaleY}set scaleY(t){this.node.scaleY=t}getBounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get alpha(){return this.node.alpha}set alpha(t){this.node.alpha=t}get name(){return this.node.name}set name(t){this.node.name=t}destroy(){ye(this.node)}},$=class extends H{constructor(r){super(),this.children=[],this.node=r||new Laya.Sprite,r||(this.name="CrossUI-Laya-Container")}addChild(r){this.children.push(r),this.node.addChild(r.node),r.parent=this}removeChild(r){let o=this.children.findIndex((i=>i===r));-1!==o&&(this.children.splice(o,1),this.node.removeChild(r.node),r.parent=null)}get width(){return this._width}set width(r){this._width=r,this.node.width=r}get height(){return this._height}set height(r){this._height=r,this.node.height=r}};M=$;var O,Le=e=>new Promise(((t,r)=>{let o=new Image;o.onload=()=>{t(o)},o.onerror=()=>{r(new Error(`Failed to load image: ${e}`))},o.crossOrigin="Anonymous",o.src=e})),Y=class extends H{constructor(){super(),this.node=new Laya.Sprite,this.name="CrossUI-Laya-Bitmap"}get src(){return this._src}set src(r){this.imgLoadPromise=this.loadImage(r)}loadImage(r){return"string"!=typeof r?(this._src=r.src,this.node.texture=Y._createTextureFromImage(r),this.node.repaint(Laya.SpriteConst.REPAINT_ALL),Promise.resolve(this)):(this._src=r,Le(r).then((o=>this.loadImage(o))))}static _createTextureFromImage(r){let o=new Laya.Texture2D;return o.loadImageSource(r,!0),new Laya.Texture(o)}static loadFromImage(r){let o=new Y,i=Y._createTextureFromImage(r);return o.node.texture=i,o.node.repaint(Laya.SpriteConst.REPAINT_ALL),o}static loadFromUrl(r){return Le(r).then(Y.loadFromImage)}},Je=(e,t,r)=>((e,t,{isContainer:r}={})=>(r?e.__crossUIWidth=t:e.width=t,e))(e,t,r),Qe=(e,t,r)=>((e,t,{isContainer:r}={})=>(r?e.__crossUIHeight=t:e.height=t,e))(e,t,r);O=Y;var X;X=class extends H{constructor(){super(),this.node=new Laya.Text,this.name="CrossUI-Laya-Text"}_onSizeUpdate(){this.anchorX=this._anchorX,this.anchorY=this._anchorY}get text(){return this.node.text}set text(r){this.node.text=r,this._onSizeUpdate()}get color(){return this.node.color}set color(r){this.node.color=r}get fontSize(){return this.node.fontSize}set fontSize(r){this.node.fontSize=r,this._onSizeUpdate()}get fontFamily(){return this.node.font}set fontFamily(r){this.node.font=r,this._onSizeUpdate()}get fontWeight(){return this.node.bold?"bold":"normal"}set fontWeight(r){this.node.bold="bold"===r,this._onSizeUpdate()}get maxWidth(){return this.node.width}set maxWidth(r){this.node.wordWrap=!0,this.node.width=r}get align(){return this.node.align}set align(r){this.node.align=r}};var J,Xe,Ge="#000",qe={Bitmap:O,Container:M,Text:X,Graphics:J=class extends H{constructor(){super(),this.node=new Laya.Sprite,this.name="CrossUI-Laya-Graphics"}drawCircle(r,o,i,s=Ge){this.node.graphics.drawCircle(r,o,i,s)}drawRect(r,o,i,s,n=Ge){this.node.graphics.drawRect(r,o,i,s,n)}}};function k({width:e=0,height:t=0},r="#ffffff"){let o=new J;return o.drawRect(0,0,e,t,r),o.width=e,o.height=t,o}Xe=e=>{let t,r,o,i,s,n;return{mount(a){r=new $(a||Laya.stage),t=new $,t.visible=!1,({onShow:o,onHide:i,onMount:s,onUnMount:n}=e(t,qe)),r.addChild(t),s&&s(a)},unmount(...a){r&&t&&(n&&n(...a),r.removeChild(t),r=null,t=null)},show(...a){t&&(t.visible=!0,o&&o(...a))},hide(...a){t&&(t.visible=!1,i&&i(...a))}}};var W=(e,t=!1)=>(r,o,i={})=>{var S,u;let s=e.width*Ne(e),n=e.height*te(e),a=r.width*Ne(r),h=r.height*te(r),F=t?0:e.x-s*e.anchorX,g=t?0:e.y-n*e.anchorY,c=r.x-a*r.anchorX,l=r.y-h*r.anchorY,m=0,f=0;if(o.h)switch(o.h){case"left":m=F-c;break;case"center":m=F-c+(s-a)/2;break;case"right":m=F-c+s-a}if(o.v)switch(o.v){case"top":f=g-l;break;case"center":f=g-l+(n-h)/2;break;case"bottom":f=g-l+n-h}return r.x+=m+(null!=(S=i.x)?S:0),r.y+=f+(null!=(u=i.y)?u:0),r},_=(e,t)=>()=>{setTimeout((()=>{e()}),t)},ke=QGUtils,ve=({boundNode:e,cornerNode:t,position:r,willContain:o=!0})=>{let[i,s]=r.split("-");W(e,o)(t,{v:i,h:s})},Nt=({tag:e,probabilityCloseAsClick:t})=>"number"==typeof t?t:ke.getProbabilityCloseAsClickForNativeAd(e);function U({tag:e,size:t,closeImg:r,handleClose:o,handleClick:i,probabilityCloseAsClick:s,parentNode:n,position:a}){let h=O.loadFromImage(r);return h.width=h.height=t,h.addEventListener("click",(()=>{ke.probability(Nt({tag:e,probabilityCloseAsClick:s}))?(i(),setTimeout(o,1e3)):o()})),n.addChild(h),ve({boundNode:n,cornerNode:h,position:a,willContain:!0}),h}function oe({scale:e,logoImg:t,parentNode:r,position:o}){let i=O.loadFromImage(t);return i.scaleX=i.scaleY=e,r.addChild(i),ve({boundNode:r,cornerNode:i,position:o,willContain:!0}),i}function ie({text:e,bgColor:t="#6584cd",textColor:r="#ffffff",fontSize:o=28,width:i,height:s,responsive:n,onClick:a}){n||(i=i||180,s=s||68);let h=new M,A=new X;if(A.text=e,A.color=r,A.fontSize=o,n){let c=e.length;i=A.width/c*(c+1),s=1.5*A.height}h.width=i,h.height=s;let F=W(h,!0),g=k({width:i,height:s},t);return h.addChild(g),h.addChild(A),F(g,{h:"left",v:"top"}),F(A,{h:"center",v:"center"}),a&&g.addEventListener("click",a),h}function Ae({titleText:e,descText:t,parentNode:r,textMaxWidth:o,baseX:i,titleDescGap:s=10,titleFontSize:n=32,titleColor:a="#333333",descFontSize:h=24,descColor:A="#666666"}){e===t&&(t="");let g=e&&t&&e!==t?"top":"center",c="center"===g?"center":"left",l=new X;l.text=e,l.fontSize=n,l.color=a,l.maxWidth=o,l.align=c;let m=new X;m.text=t,m.fontSize=h,m.color=A,m.maxWidth=o,m.align=c;let f=Math.max(n,l.height);l.height>2*n&&t&&(n=Math.min(n,h+2),l.fontSize=n,f=Math.max(n,l.height));let S=Math.max(h,m.height),b=e?t?f+s+S:l.height:m.height,u=Math.max(0,(r.height-b)/2),I="top"===g?u:0,R="top"===g?I+f+s:0,x=W(r,!0);return r.addChild(l),x(l,{h:"left",v:g},{x:i,y:I}),r.addChild(m),x(m,{h:"left",v:g},{x:i,y:R}),{title:l,desc:m}}var et=(e=8,t)=>{t=t||e;let r=document.createElement("canvas");return r.width=e,r.height=t,r.getContext("2d").clearRect(0,0,e,t),r};function ne(e,t){let r=et(e,t=t||e),o=O.loadFromImage(r);return o.width=e,o.height=t,o}var Be="image-text";function xe({tag:e,data:t,closeImg:r,boundRect:o,handleClick:i,handleClose:s,bgColor:n="#ffffff",closeBtnSize:a=30,titleFontSize:h=32,titleColor:A="#333333",descFontSize:F=24,descColor:g="#666666",titleDescGap:c=10,direction:l=Be,touchMoveAsClick:m,probabilityCloseAsClick:f,logoScale:S=2/3,logoPosition:b="top-left",closeBtnPosition:u="top-right",withBtn:I=!1}){let{width:R,height:x}=o,C=new M;C.width=R,C.height=x;let y=l===Be,E=10,j=x-20,v=j*t.icon.width/t.icon.height,d=R-v-30,D=y?v+20:E,K=W(C,!0),w=k({width:R,height:x},n);C.addChild(w),K(w,{h:"left",v:"top"});let P,L=0;I&&(P=ie({text:t.clickBtnTxt,responsive:!0}),C.addChild(P),K(P,{h:"right",v:"center"},{x:-E}),d-=P.width+E,L=P.width);let T=O.loadFromImage(t.icon);T.width=v,T.height=j,C.addChild(T),y?K(T,{h:"left",v:"center"},{x:E}):K(T,{h:"right",v:"center"},{x:-20-L});let{title:N,desc:V}=Ae({titleText:t.title,descText:t.desc,parentNode:C,textMaxWidth:d,baseX:D,titleDescGap:c,titleFontSize:h,titleColor:A,descColor:g,descFontSize:F}),z=oe({scale:S,position:b,parentNode:C,logoImg:t.logo}),B=ne(R,x);return C.addChild(B),K(B,{h:"left",v:"top"}),B.addEventListener("click",i),m&&G(B.node,"touchmove",_(i,100)),{ad:C,bg:w,icon:T,title:N,desc:V,close:U({closeImg:r,size:a,handleClose:s,handleClick:i,tag:e,probabilityCloseAsClick:f,parentNode:C,position:u}),logo:z}}function le(e,t){var r,o;return e.width/e.height>t.width/t.height?o=(r=t.width)*e.height/e.width:r=(o=t.height)*e.width/e.height,{...e,width:r,height:o}}function tt({tag:e,data:t,closeImg:r,boundRect:o,handleClick:i,handleClose:s,closeBtnSize:n=30,touchMoveAsClick:a,probabilityCloseAsClick:h,logoScale:A=2/3,logoPosition:F="top-left",closeBtnPosition:g="top-right",withDetail:c=!1,titleFontSize:l=32,titleColor:m="#333333",descFontSize:f=24,descColor:S="#666666",titleDescGap:b=10}){let u,R,x,C,y,I=0,E=10,j=0;if(c){u=ie({text:t.clickBtnTxt,responsive:!0}),I=2*u.height,R=o.width,x=o.height;let z={width:R-20,height:x-I-20};j=E,({width:C,height:y}=le({width:1280,height:720},z))}else({width:C,height:y}=le({width:1280,height:720},o)),R=C,x=y;let v=new M;v.width=R,v.height=x;let D,d=W(v,!0);c&&(D=k({width:R,height:x}),v.addChild(D),d(D,{h:"left",v:"top"}));let K=O.loadFromImage(t.img);K.width=C,K.height=y,v.addChild(K),d(K,{h:"center",v:"top"},{y:j});let P,L,T,w=oe({scale:A,parentNode:v,position:F,logoImg:t.logo});if(c){P=new M,P.width=R,P.height=I,v.addChild(P),d(P,{h:"left",v:"bottom"});let z=W(P,!0);P.addChild(u),z(u,{h:"right",v:"center"},{x:-E}),({title:L,desc:T}=Ae({titleText:t.title,descText:t.desc,parentNode:P,textMaxWidth:R-u.width-30,baseX:E,titleFontSize:l,descFontSize:f,titleColor:m,descColor:S,titleDescGap:b}))}let N=ne(R,x);return v.addChild(N),d(N,{h:"left",v:"top"}),N.addEventListener("click",i),a&&G(N.node,"touchmove",_(i,100)),{ad:v,bg:D,img:K,logo:w,close:U({size:n,closeImg:r,handleClose:s,handleClick:i,tag:e,probabilityCloseAsClick:h,parentNode:v,position:g}),detail:P,title:L,desc:T,btn:u}}function Fe(e,t){return e.addChild(t),e}function Q(){return Laya.stage.width}function he(){return Laya.stage.height}function rt(){return{width:Q(),height:he()}}function ae({node:e,boundRect:t,bgColor:r="#000",bg:o,alpha:i=.7}={}){let s=t?t.width:Q(),n=t?t.height:he(),a=new M;return a.width=s,a.height=n,o||((o=k({width:s,height:n},r)).alpha=i),se(o.node),a.addChild(o),W(a,!0)(o,{v:"top",h:"left"}),e&&Fe(a.node,e),a}function ot({tag:e,data:t,closeImg:r,boundRect:o,handleClick:i,handleClose:s,closeBtnSize:n=30,withPopup:a=!1,popupOptions:h={},adBtnText:A,touchMoveAsClick:F,probabilityCloseAsClick:g,bgColor:c="#ffffff",titleColor:l="#333333",titleFontSize:m=32,descColor:f="#aaaaaa",descFontSize:S=24,adBtnWidth:b=180,adBtnHeight:u=68,adBtnTextFontSize:I=28,adBtnTextColor:R="#ffffff",adBtnBgColor:x="#6584cd",logoScale:C=2/3,logoPosition:y="top-left",closeBtnPosition:E="top-right"}){let K,{width:j,height:v}=o,d=new M;d.width=j,d.height=v,a&&(K=ae({node:d.node,...h}));let w=W(d,!0),P=k({width:j,height:v},c);d.addChild(P),w(P,{v:"top",h:"left"});let L=O.loadFromImage(t.img);L.width=j-20,L.height=L.width*t.img.height/t.img.width,d.addChild(L),w(L,{h:"center",v:"top"},{y:10});let T=new X;T.text=t.title,T.fontSize=m,T.color=l,T.maxWidth=L.width,T.align="center",d.addChild(T);let N=new X;N.text=t.desc,N.fontSize=S,N.color=f,N.maxWidth=L.width,N.align="center",d.addChild(N);let V=ie({text:A||t.clickBtnTxt,fontSize:I,textColor:R,bgColor:x,width:b,height:u});d.addChild(V);let z=oe({scale:C,position:y,parentNode:d,logoImg:t.logo}),B=ne(j,v);w(B,{v:"top",h:"left"}),d.addChild(B),B.addEventListener("click",i),F&&G(B.node,"touchmove",_(i,100));let Se=U({size:n,closeImg:r,handleClose:s,handleClick:i,tag:e,probabilityCloseAsClick:g,parentNode:d,position:E}),pe=t.title.length>0?T.height:0,fe=t.desc.length>0?N.height:0,Me=4;0===pe&&(Me-=1),0===fe&&(Me-=1);let je=10+L.height+10,Te=(v-je-(pe+fe+u))/Me,Ke=0===pe?je:je+Te,_e=0===fe?Ke+pe:Ke+pe+Te,Rt=_e+fe+Te;return w(T,{h:"center",v:"top"},{y:Ke}),w(N,{h:"center",v:"top"},{y:_e}),w(V,{h:"center",v:"top"},{y:Rt}),{ad:d,bg:P,popup:K,img:L,title:T,desc:N,btn:V,logo:z,close:Se,clickRect:B}}function it({tag:e,data:t,closeImg:r,boundRect:o,handleClick:i,handleClose:s,closeBtnSize:n=30,closeBtnPosition:a="top-left",touchMoveAsClick:h,probabilityCloseAsClick:A}){let{width:F,height:g}=o,c=new M;c.width=F,c.height=g;let l=W(c,!0);c.addEventListener("click",i),c.addEventListener("click",i),h&&G(c.node,"touchmove",_(i,100));let m=O.loadFromImage(t.icon);m.width=F,m.height=g,c.addChild(m),l(m,{h:"center",v:"center"});let f=O.loadFromImage(t.logo),S=F/5*2,b=S/f.width;return f.width=S,f.height=f.height*b,c.addChild(f),l(f,{h:"right",v:"bottom"}),{ad:c,img:m,close:U({size:n,closeImg:r,handleClose:s,handleClick:i,tag:e,probabilityCloseAsClick:A,parentNode:c,position:a}),logo:f}}function se(e){return G(e,"click",(()=>console.log("blockInputEvents"))),e}function Ie({stageSize:e,contentSize:t,imgs:r,onOK:o,onCancel:i,opt:s={}}){let n=new M,a=O.loadFromImage(r.bg),{bgAlpha:h=.8,padding:A=20,titleScale:F=1,btnScale:g=1}=s;n.width=a.width=e.width,n.height=a.height=e.height,a.alpha=h,se(a.node),n.addChild(a),W(n,!0)(a,{v:"top",h:"left"});let c=new M;c.width=t.width,c.height=t.height,W(a)(c,{v:"center",h:"center"}),n.addChild(c);let l=W(c,!0),m=O.loadFromImage(r.contentBg);m.width=t.width,m.height=t.height,l(m,{v:"center",h:"center"}),c.addChild(m);let f=O.loadFromImage(r.title);f.anchorX=f.anchorY=.5,f.scaleX=f.scaleY=F,l(f,{v:"top",h:"center"},{y:-.5*f.height}),c.addChild(f);let S=O.loadFromImage(r.contents[0]);(function(e,t){e.width=t.width,e.height=t.height})(S,le(S.getBounds(),function(e,t,r){return void 0===r&&(r=t),{...e,width:e.width*t,height:e.height*r}}({x:0,y:0,...t},.9))),l(S,{v:"center",h:"center"}),c.addChild(S);let b=O.loadFromImage(r.btnNext);b.scaleX=b.scaleY=g,l(b,{v:"center",h:"right"},{x:.5*b.width}),c.addChild(b);let u=O.loadFromImage(r.btnPrev);u.scaleX=u.scaleY=g,l(u,{v:"center",h:"left"},{x:-.5*u.width}),c.addChild(u);let I=O.loadFromImage(r.btnOK);I.scaleX=I.scaleY=g,l(I,{v:"bottom",h:"center"},{y:.5*I.height,x:.5*I.width+.5*A}),c.addChild(I);let R=null;r.btnCancel&&i?(R=O.loadFromImage(r.btnCancel),R.scaleX=R.scaleY=g,l(R,{v:"bottom",h:"center"},{y:.5*R.height,x:-.5*R.width-.5*A}),c.addChild(R)):l(I,{v:"bottom",h:"center"},{y:.5*I.height});let x=0,C=[],y=()=>{S.src=C[x],b.visible=x<C.length-1,u.visible=x>0};b.addEventListener("click",(()=>{x=Math.min(x+1,C.length-1),y()})),u.addEventListener("click",(()=>{x=Math.max(x-1,0),y()}));let E=v=>{x=0,C=v,y()};E(r.contents.map((v=>v.src)));let j={container:n,bg:a,contentContainer:c,contentBg:m,title:f,imgContent:S,btnNext:b,btnPrev:u,btnOK:I,btnCancel:R,setContents:E,adjustToContent:l,updateContent:y};return I.addEventListener("click",(()=>{o?o(j):n.destroy()})),R&&R.addEventListener("click",(()=>{i?i(j):n.destroy()})),j}function st({stageSize:e,contentSize:t,imgs:r,handleAgree:o,handleDisagree:i,isNeedUserAgreement:s,agreementResources:n,opt:a={}}){let d,{bgAlpha:h=.8,padding:A=20,activeTitleScale:F=.9,inactiveTitleScale:g=.6,...c}=a,{container:l,bg:m,contentContainer:f,contentBg:S,title:b,imgContent:u,btnNext:I,btnPrev:R,btnOK:x,btnCancel:C,setContents:y,adjustToContent:E,updateContent:j}=Ie({stageSize:e,contentSize:t,imgs:{bg:r.bg,contentBg:r.contentBg,title:r.title,contents:r.contents,btnPrev:r.btnPrev,btnNext:r.btnNext,btnOK:r.btnAgree,btnCancel:r.btnDisagree},onOK:o,onCancel:i,opt:{...c,bgAlpha:h,padding:A}}),v=r.contents.map((D=>D.src));if(s){d=O.loadFromImage(n.title),d.anchorX=d.anchorY=.5,f.addChild(d);let D=n.contents.map((P=>P.src)),K=-1,w=P=>{P!==K&&(K=P,0===P?(y(v),b.scaleX=b.scaleY=F,d.scaleX=d.scaleY=g):(y(D),b.scaleX=b.scaleY=g,d.scaleX=d.scaleY=F),E(b,{v:"top",h:"center"},{y:-.5*b.height*te(b),x:-.25*t.width}),E(d,{v:"top",h:"center"},{y:-.5*d.height*te(d),x:.25*t.width}),j())};w(0),b.addEventListener("click",(()=>{w(0)})),d.addEventListener("click",(()=>{w(1)}))}return{container:l,bg:m,contentContainer:f,contentBg:S,title:b,agreementsTitle:d,imgContent:u,btnNext:I,btnPrev:R,btnAgree:x,btnDisagree:C}}async function ct({supportedLanguages:e,onClose:t,currentLanguage:r,onLanguageChange:o,flagUrlBase:i,flagScale:s=1}){let n=await Promise.all(e.map((y=>`${i}/flag-${y}.png`)).map((y=>O.loadFromUrl(y))));n.forEach((y=>y.scaleX=y.scaleY=s));let a=e.indexOf(r),h=await O.loadFromUrl(`${i}/flag-choose.png`),A=.8*Q(),F=n[0].width,g=n[0].height,c=20*s,l=c+h.height,m=Math.min(function(e,t,r){return Math.floor((t-r)/(e+r))}(F,A,c),n.length),S=Math.ceil(n.length/m)*(n[0].height+l)+l,b=(A-(F*m+c*(m-1)))/2,u=new M;u.width=A,u.height=S;let I=W(u,!0);function R(y){let E=Math.floor(y/m);return{x:b+y%m*(F+c),y:l+E*(g+l)}}function x(y){let{x:E,y:j}=R(y),v=E+(F-h.width)/2;I(h,{v:"top",h:"left"},{x:v,y:j+g})}n.forEach(((y,E)=>{u.addChild(y);let{x:j,y:v}=R(E);I(y,{v:"top",h:"left"},{x:j,y:v}),y.addEventListener("click",(()=>{if(E===a)return C.destroy(),void(t&&t());x(E),setTimeout((()=>{C.destroy(),o(e[E]),t&&t()}),300)}))})),u.addChild(h),x(a);let C=ae();return C.addChild(u),NativeUI.adjustTo(C,!0)(u,{v:"center",h:"center"}),C}function Pe(e){let t=[];return t=e._children,t}function ce(e){return e.name}function We({node:e,depth:t=1/0,comparater:r,level:o=0,isChild:i=!1}){if(i){if(r(e,{level:o}))return e;o++}let s=Pe(e);if(t>0&&s.length>0){let a,n=t-1;if(s.find((h=>null!==(a=We({node:h,depth:n,comparater:r,level:o,isChild:!0})))))return a}return null}function He({node:e,name:t,depth:r=1/0,isAllowNameSplit:o=!0,nameSpliter:i="/"}){return o&&"string"==typeof t&&t.indexOf(i)>-1&&(t=t.split(i)),Array.isArray(t)?t.reduce(((s,n,a)=>s?He({node:s,name:n,depth:r-a,isAllowNameSplit:!1,nameSpliter:i}):null),e):We({node:e,depth:r,comparater:(s,{level:n})=>{let a=Array.isArray(t)?t[n]:t;return ce(s)===a}})}function pt(e,{target:t=null,splitter:r="/",nameGetter:o=ce,parentGetter:i=re}={}){let s=[],n=e;for(;n&&n!==t;)s.unshift(o(n)),n=i(n);return s.join(r)}function lt(e){return e}xe.DIRECTION_IMAGE_TEXT=Be,xe.DIRECTION_TEXT_IMAGE="text-image";var ht=(e,t)=>((e,t)=>(e.alpha=t,e))(e,t),mt=(e,t)=>((e,t)=>(e.visible=t,e))(e,t),me=(e,t)=>((e,t)=>(e.scaleX=t,e))(e,t),de=(e,t)=>((e,t)=>(e.scaleY=t,e))(e,t),dt=e=>[Z(e),ee(e)],ft=(e,t,r)=>(void 0===r?(me(e,t),de(e,t)):(me(e,t),de(e,r)),e),ut=e=>{p("outlineNode")},Ye={};Ue(Ye,{breath:()=>gt});var e,gt=e=>{p("breath")};return e=Ht,((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of Et(t))!Ct.call(e,i)&&i!==r&&we(e,i,{get:()=>t[i],enumerable:!(o=yt(t,i))||o.enumerable});return e})(we({},"__esModule",{value:!0}),e)})();window.NativeUI=NativeUI}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},712:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){var QGUtils=(()=>{var mn=Object.create,He=Object.defineProperty,gn=Object.getOwnPropertyDescriptor,hn=Object.getOwnPropertyNames,vn=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty,pr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),F=(e,t)=>{for(var r in t)He(e,r,{get:t[r],enumerable:!0})},fr=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of hn(t))!yn.call(e,n)&&n!==r&&He(e,n,{get:()=>t[n],enumerable:!(o=gn(t,n))||o.enumerable});return e},dr=(e,t,r)=>(r=null!=e?mn(vn(e)):{},fr(!t&&e&&e.__esModule?r:He(r,"default",{value:e,enumerable:!0}),e)),gr=pr(((Li,St)=>{"use strict";var Sn=Object.prototype.hasOwnProperty,P="~";function we(){}function An(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function mr(e,t,r,o,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");var i=new An(r,o||e,n),s=P?P+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],i]:e._events[s].push(i):(e._events[s]=i,e._eventsCount++),e}function Ue(e,t){0==--e._eventsCount?e._events=new we:delete e._events[t]}function C(){this._events=new we,this._eventsCount=0}Object.create&&(we.prototype=Object.create(null),(new we).__proto__||(P=!1)),C.prototype.eventNames=function(){var r,o,t=[];if(0===this._eventsCount)return t;for(o in r=this._events)Sn.call(r,o)&&t.push(P?o.slice(1):o);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t},C.prototype.listeners=function(t){var r=P?P+t:t,o=this._events[r];if(!o)return[];if(o.fn)return[o.fn];for(var n=0,i=o.length,s=new Array(i);n<i;n++)s[n]=o[n].fn;return s},C.prototype.listenerCount=function(t){var r=P?P+t:t,o=this._events[r];return o?o.fn?1:o.length:0},C.prototype.emit=function(t,r,o,n,i,s){var c=P?P+t:t;if(!this._events[c])return!1;var d,m,a=this._events[c],u=arguments.length;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),u){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,r),!0;case 3:return a.fn.call(a.context,r,o),!0;case 4:return a.fn.call(a.context,r,o,n),!0;case 5:return a.fn.call(a.context,r,o,n,i),!0;case 6:return a.fn.call(a.context,r,o,n,i,s),!0}for(m=1,d=new Array(u-1);m<u;m++)d[m-1]=arguments[m];a.fn.apply(a.context,d)}else{var x,v=a.length;for(m=0;m<v;m++)switch(a[m].once&&this.removeListener(t,a[m].fn,void 0,!0),u){case 1:a[m].fn.call(a[m].context);break;case 2:a[m].fn.call(a[m].context,r);break;case 3:a[m].fn.call(a[m].context,r,o);break;case 4:a[m].fn.call(a[m].context,r,o,n);break;default:if(!d)for(x=1,d=new Array(u-1);x<u;x++)d[x-1]=arguments[x];a[m].fn.apply(a[m].context,d)}}return!0},C.prototype.on=function(t,r,o){return mr(this,t,r,o,!1)},C.prototype.once=function(t,r,o){return mr(this,t,r,o,!0)},C.prototype.removeListener=function(t,r,o,n){var i=P?P+t:t;if(!this._events[i])return this;if(!r)return Ue(this,i),this;var s=this._events[i];if(s.fn)s.fn===r&&(!n||s.once)&&(!o||s.context===o)&&Ue(this,i);else{for(var c=0,a=[],u=s.length;c<u;c++)(s[c].fn!==r||n&&!s[c].once||o&&s[c].context!==o)&&a.push(s[c]);a.length?this._events[i]=1===a.length?a[0]:a:Ue(this,i)}return this},C.prototype.removeAllListeners=function(t){var r;return t?(r=P?P+t:t,this._events[r]&&Ue(this,r)):(this._events=new we,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=P,C.EventEmitter=C,void 0!==St&&(St.exports=C)})),et={};F(et,{default:()=>kn});var kn,e,t,tt=(e=()=>{kn=NativeUI},()=>(e&&(t=e(e=0)),t)),zo=pr(((xa,$o)=>{$o.exports=function(t,r,o,n){var i=t[0],s=t[1],c=!1;void 0===o&&(o=0),void 0===n&&(n=r.length);for(var a=(n-o)/2,u=0,d=a-1;u<a;d=u++){var m=r[o+2*u+0],v=r[o+2*u+1],x=r[o+2*d+0],g=r[o+2*d+1];v>s!=g>s&&i<(x-m)*(s-v)/(g-v)+m&&(c=!c)}return c}})),Ei={};F(Ei,{EnergyEvent:()=>_t,GameEvent:()=>_e,GameStates:()=>Lt,Locale:()=>fe,PQueue:()=>O,ad:()=>ar,addShortcut:()=>Ze,analytics:()=>ir,appIdEncoder:()=>Ve,assetManager:()=>Gt,audioManager:()=>Kt,chainAd:()=>Zr,checkAppApprovedStatusWithConfig:()=>Z,clearData:()=>pn,configLoader:()=>br,createStateMachine:()=>je,delay:()=>jr,gameLogin:()=>lr,gameState:()=>M,geo:()=>tr,getCity:()=>dt,getEnergyManager:()=>Ir,getGameConfig:()=>yt,getJSON:()=>k,getLocalCity:()=>pt,getNativeAdTag:()=>an,getProbabilityCloseAsClickForNativeAd:()=>ln,initShortcutButton:()=>Kr,isBigScreen:()=>Xr,isGameApproved:()=>cn,isNeedAddShortcut:()=>Xe,loadMultiSubpkg:()=>fn,loadSubpkg:()=>K,localStorage:()=>G,onAdShowSuccess:()=>_n,onEnterState:()=>_r,onGameEvent:()=>_,onLeaveState:()=>Mr,onState:()=>Tn,pool:()=>qr,prefetchContent:()=>Me,prefetchMultiContent:()=>Hr,prevGameEvent:()=>Er,privacyConfirm:()=>Nt,probability:()=>Dr,promisifyShowAd:()=>Rt,rangeCall:()=>zr,recordVideoAndShare:()=>kt,registeGameState:()=>Ln,registerAdBoxPortal:()=>to,removeGameEvent:()=>En,repeat:()=>Qr,setSubPkgWithConfig:()=>Wr,showAdAppBox:()=>eo,showConfirm:()=>sn,throttle:()=>Yr,triggerEvent:()=>V,wait:()=>de});var Pr=dr(gr(),1),Se=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},At=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},hr=e=>void 0===globalThis.DOMException?new At(e):new DOMException(e),vr=e=>{let t=void 0===e.reason?hr("This operation was aborted."):e.reason;return t instanceof Error?t:hr(t)};var U,ee=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)},Ae=class{constructor(){U.set(this,[])}enqueue(t,r){let o={priority:(r={priority:0,...r}).priority,run:t};if(this.size&&ee(this,U,"f")[this.size-1].priority>=r.priority)return void ee(this,U,"f").push(o);let n=function(e,t,r){let o=0,n=e.length;for(;n>0;){let i=Math.trunc(n/2),s=o+i;r(e[s],t)<=0?(o=++s,n-=i+1):n=i}return o}(ee(this,U,"f"),o,((i,s)=>s.priority-i.priority));ee(this,U,"f").splice(n,0,o)}dequeue(){let t=ee(this,U,"f").shift();return null==t?void 0:t.run}filter(t){return ee(this,U,"f").filter((r=>r.priority===t.priority)).map((r=>r.run))}get size(){return ee(this,U,"f").length}};U=new WeakMap;var A,Pe,be,J,Ye,Ee,Qe,D,Ce,T,$e,L,Te,Y,ce,ue,te,ze,yr,xr,Cr,wr,Sr,Ar,qe,bt,Et,Je,w=function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r},p=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)},Ke=()=>{},Cn=new Se,Tt=class extends Error{},O=class extends Pr.default{constructor(t){var r,o,n,i;if(super(),A.add(this),Pe.set(this,void 0),be.set(this,void 0),J.set(this,0),Ye.set(this,void 0),Ee.set(this,void 0),Qe.set(this,0),D.set(this,void 0),Ce.set(this,void 0),T.set(this,void 0),$e.set(this,void 0),L.set(this,0),Te.set(this,void 0),Y.set(this,void 0),ce.set(this,Ke),ue.set(this,Ke),te.set(this,void 0),ze.set(this,void 0),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ae,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(o=null===(r=t.intervalCap)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);w(this,Pe,t.carryoverConcurrencyCount,"f"),w(this,be,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),w(this,Ye,t.intervalCap,"f"),w(this,Ee,t.interval,"f"),w(this,T,new t.queueClass,"f"),w(this,$e,t.queueClass,"f"),this.concurrency=t.concurrency,w(this,te,t.timeout,"f"),w(this,ze,!0===t.throwOnTimeout,"f"),w(this,Y,!1===t.autoStart,"f")}get concurrency(){return p(this,Te,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);w(this,Te,t,"f"),p(this,A,"m",Je).call(this)}async add(t,r={}){return new Promise(((o,n)=>{p(this,T,"f").enqueue((async()=>{var s,c,a;w(this,L,(c=p(this,L,"f"),++c),"f"),w(this,J,(a=p(this,J,"f"),++a),"f");try{if(null!==(s=r.signal)&&void 0!==s&&s.aborted)return void n(new Tt("The task was aborted."));let d=await(void 0===p(this,te,"f")&&void 0===r.timeout?t({signal:r.signal}):function(e,t,r,o){let n,i=new Promise(((s,c)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((o={customTimers:{setTimeout,clearTimeout},...o}).signal){let{signal:a}=o;a.aborted&&c(vr(a)),a.addEventListener("abort",(()=>{c(vr(a))}))}n=o.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof r){try{s(r())}catch(d){c(d)}return}let u=r instanceof Error?r:new Se("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),c(u)}),t),(async()=>{try{s(await e)}catch(a){c(a)}finally{o.customTimers.clearTimeout.call(void 0,n)}})()}else s(e)}));return i.clear=()=>{clearTimeout(n),n=void 0},i}(Promise.resolve(t({signal:r.signal})),void 0===r.timeout?p(this,te,"f"):r.timeout,(()=>{(void 0===r.throwOnTimeout?p(this,ze,"f"):r.throwOnTimeout)&&n(Cn)})));o(d),this.emit("completed",d)}catch(u){n(u),this.emit("error",u)}p(this,A,"m",Cr).call(this)}),r),p(this,A,"m",qe).call(this),this.emit("add")}))}async addAll(t,r){return Promise.all(t.map((async o=>this.add(o,r))))}start(){return p(this,Y,"f")?(w(this,Y,!1,"f"),p(this,A,"m",Je).call(this),this):this}pause(){w(this,Y,!0,"f")}clear(){w(this,T,new(p(this,$e,"f")),"f")}async onEmpty(){if(0!==p(this,T,"f").size)return new Promise((t=>{let r=p(this,ce,"f");w(this,ce,(()=>{r(),t()}),"f")}))}async onSizeLessThan(t){if(!(p(this,T,"f").size<t))return new Promise((r=>{let o=()=>{p(this,T,"f").size<t&&(this.removeListener("next",o),r())};this.on("next",o)}))}async onIdle(){if(0!==p(this,L,"f")||0!==p(this,T,"f").size)return new Promise((t=>{let r=p(this,ue,"f");w(this,ue,(()=>{r(),t()}),"f")}))}get size(){return p(this,T,"f").size}sizeBy(t){return p(this,T,"f").filter(t).length}get pending(){return p(this,L,"f")}get isPaused(){return p(this,Y,"f")}get timeout(){return p(this,te,"f")}set timeout(t){w(this,te,t,"f")}};Pe=new WeakMap,be=new WeakMap,J=new WeakMap,Ye=new WeakMap,Ee=new WeakMap,Qe=new WeakMap,D=new WeakMap,Ce=new WeakMap,T=new WeakMap,$e=new WeakMap,L=new WeakMap,Te=new WeakMap,Y=new WeakMap,ce=new WeakMap,ue=new WeakMap,te=new WeakMap,ze=new WeakMap,A=new WeakSet,yr=function(){return p(this,be,"f")||p(this,J,"f")<p(this,Ye,"f")},xr=function(){return p(this,L,"f")<p(this,Te,"f")},Cr=function(){var t;w(this,L,(t=p(this,L,"f"),--t),"f"),p(this,A,"m",qe).call(this),this.emit("next")},wr=function(){p(this,ce,"f").call(this),w(this,ce,Ke,"f"),0===p(this,L,"f")&&(p(this,ue,"f").call(this),w(this,ue,Ke,"f"),this.emit("idle"))},Sr=function(){p(this,A,"m",Et).call(this),p(this,A,"m",bt).call(this),w(this,Ce,void 0,"f")},Ar=function(){let t=Date.now();if(void 0===p(this,D,"f")){let r=p(this,Qe,"f")-t;if(!(r<0))return void 0===p(this,Ce,"f")&&w(this,Ce,setTimeout((()=>{p(this,A,"m",Sr).call(this)}),r),"f"),!0;w(this,J,p(this,Pe,"f")?p(this,L,"f"):0,"f")}return!1},qe=function(){if(0===p(this,T,"f").size)return p(this,D,"f")&&clearInterval(p(this,D,"f")),w(this,D,void 0,"f"),p(this,A,"m",wr).call(this),!1;if(!p(this,Y,"f")){let t=!p(this,A,"m",Ar).call(this);if(p(this,A,"a",yr)&&p(this,A,"a",xr)){let r=p(this,T,"f").dequeue();return!!r&&(this.emit("active"),r(),t&&p(this,A,"m",bt).call(this),!0)}}return!1},bt=function(){p(this,be,"f")||void 0!==p(this,D,"f")||(w(this,D,setInterval((()=>{p(this,A,"m",Et).call(this)}),p(this,Ee,"f")),"f"),w(this,Qe,Date.now()+p(this,Ee,"f"),"f"))},Et=function(){0===p(this,J,"f")&&0===p(this,L,"f")&&p(this,D,"f")&&(clearInterval(p(this,D,"f")),w(this,D,void 0,"f")),w(this,J,p(this,Pe,"f")?p(this,L,"f"):0,"f"),p(this,A,"m",Je).call(this)},Je=function(){for(;p(this,A,"m",qe).call(this););};var Le=e=>new Promise(((t,r)=>{let o=new XMLHttpRequest;o.open("GET",e),o.responseType="text",o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):r(o.responseText))},o.send()})),Pn=e=>e.replace(/\s/g," ").trim();function k(e){return Le(e).then((t=>{try{return JSON.parse(Pn(t))}catch(r){return r.message}}))}function br(e,t="https://cdn.imagehost.top/heigame/"){return k(`${t}${e}.json`)}var l=xyx;function je(e,t){let s,r=new Set,o=[],n=e.reduce(((u,d)=>(u[d]=0,u)),{}),i=()=>o[0];let a={resetState:()=>{o.length=0,s=void 0,Object.keys(n).forEach((u=>{n[u]=0}))},isInState:u=>o[0]===u,gotoState:u=>{i()!==u&&(function(u){let d=i();if(t&&d&&!t.find((([v,x])=>v===d&&x===u)))throw new Error(`state flow rule error: ${d} -> ${u}`)}(u),s=i(),o.unshift(u),n[u]=n[u]+1,r.forEach((d=>d(s,u))))},gotoPrevHistoryState:()=>{o.length>1&&(s=o.shift(),r.forEach((u=>u(s,i()))))},gotoPrevState:()=>{a.gotoState(s)},getCurrState:i,getPrevState:()=>s,getPrevHistoryState:()=>o[1],getTimes:u=>n[u],onStateChange:u=>{r.add(u)},addState:u=>{n.hasOwnProperty(u)&&(n[u]=0)}};return a}var g,h,_e=((h=_e||{}).Loading="Loading",h.Ready="ready",h.MainEnter="main-enter",h.LevelListEnter="level-list-enter",h.LevelReady="level-ready-enter",h.LevelLoading="level-loading-enter",h.LevelStart="level-start",h.LevelStartAuto="level-start-auto",h.LevelPass="level-pass",h.LevelFail="level-fail",h.LevelComplete="level-complete",h.LevelPause="level-pause",h.LevelResume="level-resume",h.LevelRestart="level-restart",h.LevelQuit="level-quit",h.LevelNext="level-next",h.LevelNextScene="level-next-scene",h.LevelSceneStart="level-scene-start",h.LevelSceneComplete="level-scene-complete",h.LevelShowRevive="level-show-revive",h.LevelRevived="level-revived",h.SkinTrialShow="skin-trial-show",h.SkinTrialClose="skin-trial-close",h.GameComplete="game-complete",h.ShowRewardedVideoAdRequest="show-rewarded-vide-ad-request",h.ShopEnter="shop-enter",h.ShopLeave="shop-leave",h.AchievementEnter="achievement-enter",h.AchievementLeave="achievement-leave",h.HappyTime="happy-time",h.ShareVideoRecordRequest="share-video-record-request",h.SignEnter="sign-enter",h.SignLeave="sign-leave",h.EVENT_PRIVACY_CONFIRMED="event-privacy-confirmed",h.EVENT_PRIVACY_SHOWED="event-privacy-showed",h.EVENT_PRIVACY_COMPLETE="event-privacy-complete",h.LocaleChanged="locale-changed",h),Er="Loading",Lt=((g=Lt||{}).LOADING="loading",g.MAIN="main",g.LIST="list",g.READY="ready",g.LEVEL_LOADING="level-loading",g.GAME="game",g.SHOP="shop",g.SIGN="sign",g.ACHIEVEMENT="achievement",g.COMPLETE="complete",g.REVIVE="revive",g.PAUSE="pause",g.SKIN_TRIAL="skin-trial",g.PRIVACY_CONFIRM="privacy-confirm",g),M=je(["loading","main","list","ready","level-loading","game","shop","sign","achievement","complete","revive","pause","skin-trial","privacy-confirm"]);function _(e,t,r=!1){if(!e)throw new Error("can not listen empty event");return r?l.emiter.once(e,t):l.emiter.on(e,t)}function En(e,t){if(!e)throw new Error("can not remove empty event");t?l.emiter.rm(t,e):l.emiter.rmall(e)}var Tr=e=>`enter-state-${e}`,Lr=e=>`leave-state-${e}`;function _r(e,t,r=!1){_(Tr(e),t,r)}function Mr(e,t,r=!1){_(Lr(e),t,r)}function Tn(e,t,r,o=!1){t&&_r(e,t,o),r&&Mr(e,r,o)}var pe={loading:{eventsEnter:new Set(["Loading"]),eventsHistoryBack:new Set},main:{eventsEnter:new Set(["main-enter"]),eventsHistoryBack:new Set},list:{eventsEnter:new Set(["level-list-enter"]),eventsHistoryBack:new Set},"level-loading":{eventsEnter:new Set(["level-loading-enter"]),eventsHistoryBack:new Set},game:{eventsEnter:new Set(["level-start","level-resume","level-next-scene","level-scene-start","level-scene-complete"]),eventsHistoryBack:new Set},pause:{eventsEnter:new Set(["level-pause"]),eventsHistoryBack:new Set},shop:{eventsEnter:new Set(["shop-enter"]),eventsHistoryBack:new Set(["shop-leave"])},ready:{eventsEnter:new Set(["level-ready-enter"]),eventsHistoryBack:new Set},complete:{eventsEnter:new Set(["level-pass","level-fail","level-complete"]),eventsHistoryBack:new Set},achievement:{eventsEnter:new Set(["achievement-enter"]),eventsHistoryBack:new Set(["achievement-leave"])},revive:{eventsEnter:new Set(["level-show-revive"]),eventsHistoryBack:new Set(["level-revived"])},"skin-trial":{eventsEnter:new Set(["skin-trial-show"]),eventsHistoryBack:new Set(["skin-trial-close"])},sign:{eventsEnter:new Set(["sign-enter"]),eventsHistoryBack:new Set(["sign-leave"])},"privacy-confirm":{eventsEnter:new Set(["event-privacy-showed"]),eventsHistoryBack:new Set(["event-privacy-confirmed"])}},Ln=(e,t,r=[])=>{if("string"==typeof t&&(t=[t]),"string"==typeof r&&(r=[r]),pe[e]){let o=pe[e];t.forEach((n=>o.eventsEnter.add(n))),r.forEach((n=>o.eventsHistoryBack.add(n)))}else pe[e]={eventsEnter:new Set(t),eventsHistoryBack:new Set(r)},M.addState(e)},V=(e,t)=>{var o;if(!e)throw new Error("can not trigger empty event");if("level-complete"===e)throw new Error("do not trigger LevelComplete directly, use LevelPass or LevelFail instead which will trigger LevelComplete automatically");Er=e;let r=Object.keys(pe).find((n=>pe[n].eventsEnter.has(e)));return r?M.gotoState(r):null!=(o=pe[M.getCurrState()])&&o.eventsHistoryBack.has(e)&&M.gotoPrevHistoryState(),l.emiter.emit(e,t),("level-pass"===e||"level-fail"===e)&&l.emiter.emit("level-complete",t),!1};M.onStateChange(((e,t)=>{e&&l.emiter.emit(Lr(e),t),l.emiter.emit(Tr(t),e)})),M.gotoState("loading");var _n=(e,t)=>{l.emiter.on(l.ADEvent.Play_Start,(r=>{r.adType===e&&t()}))},Rr="xyx-utils-energy-manager",_t=(t=>(t.Changed="energy-changed",t))(_t||{});function Ir(e){let t;try{let f=l.storage.getItem(Rr);f&&(t=JSON.parse(f))}catch(f){t=null}let{maxEnergy:r=10,minutesForRecovery:o=3,videoRewardedEnergy:n=3,shareVideoRewardedEnergy:i=2,levelCostEnergy:s=1,autoUpdateInterval:c=1e4,numToShowTips:a=4,videoRequestHandler:u}=e||{};e.initialEnery&&console.warn("EnergyManager: initialEnery is deprecated, use initialEnergy instead");let d=e.initialEnergy||e.initialEnery||r,m=0;function v(){c&&(m=setTimeout((function(){console.log("autoUpdate"),y(),x(),v()}),c))}function x(){l.storage.setItem(Rr,JSON.stringify(t))}function g(f,H=!1){let le=t.energy;if(H&&t.energy>=r)return t;let N=t.energy+f;H&&(N=Math.min(N,r)),t={...t,energy:N},N!==le&&l.emiter.emit("energy-changed",N)}function y(){let{num:f,newRecordTime:H}=function(e,t){let r=Date.now()-e,o=6e4*t|0,n=Math.floor(r/o),i=e+o*n;return console.log(`calcRecoveryNum: recordTime: ${e}, num: ${n}, newRecordTime: ${i}`),{num:n,newRecordTime:i}}(t.recordTime,o);f&&(console.log("recoveryEnergy: ",f),g(f,!0),t={...t,recordTime:H},console.log(t.recordTime)),t.energy>=r&&(t={...t,recordTime:Date.now()})}t||(t={energy:d,recordTime:Date.now()},x()),v();let S={getConfig:()=>({maxEnergy:r,minutesForRecovery:o,videoRewardedEnergy:n,shareVideoRewardedEnergy:i,levelCostEnergy:s,numToShowTips:a}),addEnergyFromVideo(){y(),g(n),x()},addEnergyFromShareViedo(){y(),g(i),x()},useEnergy:()=>!(t.energy<=0)&&(y(),t={...t,energy:Math.max(0,t.energy-s)},x(),l.emiter.emit("energy-changed"),!0),getEnergy:()=>(y(),x(),console.log("EnergyManager:getEnergy",t.energy),t.energy),getEnergyPercent:()=>Math.min(S.getEnergy(),r)/r,requestEnergyVideo(){u()},startAutoUpdate:v,stopAutoUpdate(){m&&clearTimeout(m)}};return S}function Dr(e){let t=Math.ceil(100*Math.random());return console.log(`probability: res: ${t} vs target: ${e}`),t<=e}var B=new Map,b=xyxVM;var Mt="xyx_locale",Rn=["zh","en","es","pt"];function Nr(e,...t){for(let r=0;r<t.length;r++)e=e.replace(`[${r+1}]`,t[r]);return e}function Fr(e,t,...r){let o=e[t];if(null===o)return"";if(0===r.length)return o;if("object"==typeof o){let n=r[0];return r.shift(),Fr(o,n,...r)}return Nr(o,...r)}function Gr(e,t,...r){let o=e[l.getLocale()][t];if(null===o)return"";if(0===r.length)return o;if("object"==typeof o){let n=r[0];return r.shift(),Fr(o,n,...r)}return Nr(o,...r)}var fe=class{static setLocale(t){let r=l.getLocale();if(r===t)return;let o=r;G.setItem(Mt,t),l.setLocale(t),b.setLocale(t),r=l.getLocale(),V("locale-changed",{prevLocale:o,curLocale:r})}static getLocale(){return l.getLocale()}static isLocaleSelected(){return null!==G.getItem(Mt)}static getSuggestedLocale(){let t=G.getItem(Mt);if(t)return t;let r=l.getSystemInfoSync().language.split("_")[0];return l.getSupportedLocales().includes(r)?r:l.getLocale()}static getValue(t,r,...o){return Gr(t,r,...o)}constructor(t){this.localization=t}getValue(t,...r){return Gr(this.localization,t,...r)}patchLocalization(t){Rn.forEach((r=>{this.localization[r]?this.localization[r]={...this.localization[r],...t[r]}:this.localization[r]=t[r]}))}},Vr=new fe({zh:{"load-failed-title":"加载分包失败","load-failed-content":"分包：[1] 加载失败：[2]。请退出重进"},en:{"load-failed-title":"Load Subpackage Failed","load-failed-content":"Subpackage: [1] load failed: [2]. Please restart the game"},es:{"load-failed-title":"Error al cargar subpaquete","load-failed-content":"Error al cargar subpaquete: [1]: [2]. Por favor, reinicie el juego"},pt:{"load-failed-title":"Erro ao carregar subpacote","load-failed-content":"Erro ao carregar subpacote: [1]: [2]. Por favor, reinicie o jogo"}});function K(e,t){console.log("loadSubpackage: ",e);let o,r=B.get(e);return r?(console.log("loadSubpackage from cache: ",e),t&&(1===r.status?t(1):r.progress.add(t)),r.promise):(o=window.xyxZipBundleConfig?async function(e){await b.preloadZipBundle(e);let t=B.get(e);t&&(t.status=1,t.progress.forEach((r=>r(1))))}(e):function(e){return new Promise((function(t,r){l.loadSubpackage({name:e,success:function(n){console.log("loadSubpackage: ",e," success",n),setTimeout((()=>{let i=B.get(e);i&&(i.status=1,i.progress.forEach((s=>s(1)))),t()}),30)},fail:function(n){l.showDialog({title:Vr.getValue("load-failed-title"),content:Vr.getValue("load-failed-content",e,n.msg?n.msg:l.getErrorMsg(n))}),console.error(n);let i=B.get(e);i&&(i.progress.clear(),B.delete(e),i=null),r(n)}}).onProgressUpdate((n=>{console.log("subPackage: ",e,"downloading progress: ",n.progress);let i=B.get(e);i&&i.progress.forEach((s=>s(n.progress)))}))}))}(e),r={name:e,status:0,promise:o,progress:new Set},t&&r.progress.add(t),B.set(e,r),o)}var Wr=(e,{extraSubPkg:t=new Set(["privacyConfirm"]),subPkgIgnoreAutoLoad:r=new Set,routeProcessor:o}={})=>k(e).then((n=>{let i=(e=>{let t=new Map;return Object.keys(e).forEach((r=>{let o=e[r];t.set(r,new Set(o))})),t})(n);window.xyxRouteMapRoute=window.xyxRouteMapRoute||[],window.xyxRouteMapRoute.unshift(["",s=>{s=o?o(s):s;for(let[c,a]of i.entries())if(a.has(s))return`${c}/${s}`;return!1}]),window.xyxLoadSubpkgForMappedRoute=s=>{if(-1===s.indexOf("/"))return Promise.resolve();let c=s.split("/")[0];return!i.has(c)&&!t.has(c)||r.has(c)?Promise.resolve():K(c)}})).catch((n=>{console.error("load config failed: ",n)}));function Me(e){return console.warn("prefetchContent is deprecated and has no effect"),Promise.resolve(e)}function Hr(e,{onProgress:t,concurrency:r=1/0}){let o=e.map((()=>0)),i=e.map((s=>s));return new O({concurrency:r}).addAll(e.map(((s,c)=>()=>Me(s).then((a=>(i[c]=a,(s=>c=>{o[s]=c;let a=o.reduce(((u,d)=>u+d),0);t&&t(a/e.length)})(c)(1),a))))))}function Qr(e,t=1,r=null,o=300){let i,n=1;return new Promise((s=>{Ur(e,r,t,n)?(n++,i=setInterval((()=>{Ur(e,r,t,n)?n++:(clearInterval(i),s())}),o)):s()}))}function Ur(e,t,r,o){if(console.log("doRepeat: ",r,o),o>r)return!1;try{return e.call(t),!0}catch(n){return!1}}var $r=new Map;function zr(e,t=1,r=1/0){var n;let o=null!=(n=$r.get(e))?n:0;console.debug("rangeCall: ",e,t,o,r),o>=t&&o<=r&&e(),$r.set(e,o+1)}function qr(e,t=0,r="pool"){let o=[],n=(...i)=>console.log(`pool-${r}: `,...i);if(0!==t){n(`precreate ${t} of item`);for(let i=0;i<t;i++)o.push(e(null))}return{take:function(){return o.length?(n("take from poll"),e(o.pop())):(n("take from create"),e(null))},collect(i){-1===o.indexOf(i)&&(n("collect"),o.push(i))}}}function Yr(e,t,r=null){let o=!0;return(...n)=>{o&&(o=!1,e.call(r,...n),setTimeout((()=>o=!0),t))}}var Jr="xyx-shortcut-installed";function Xe(){return new Promise((e=>{if(!l.isSupportShortcut())return e(!1);l.hasShortcutInstalled({success(t){e(!t)},fail(){e(!1)}})}))}function Ze(){return new Promise(((e,t)=>{l.installShortcut({success(){let r=null===l.storage.getItem(Jr);e(r),l.storage.setItem(Jr,"1")},fail(r){t(r)}})}))}function Kr(e,{onAddSuccess:t}){Promise.resolve().then((()=>(tt(),et))).then((r=>{let o=r.createNativeUI(((n,i)=>{let s=new i.Container,{onShow:c,onHide:a,onMount:u,onUnMount:d}=e(s,i);return s.visible=!1,n.addChild(s),s.addEventListener("click",(()=>{Ze().then((()=>{t(),o.hide()})).catch((()=>{l.showToast({message:"添加失败"})}))})),{onShow(...m){Xe().then((v=>{v&&n.visible&&(s.visible=!0,c&&c(...m))}))},onHide(...m){s.visible=!1,a&&a(...m)},onMount:u,onUnMount:d}}));return o}))}var de=e=>new Promise((t=>setTimeout(t,e))),jr=e=>t=>de(e).then(t),Xr=Math.max(window.innerWidth,window.innerHeight)/Math.min(window.innerWidth,window.innerHeight)>16/9;function Rt(e){return new Promise(((t,r)=>{e.show({onShow:()=>{t()},onFail:()=>{r(new Error("Failed to show"))}})}))}function Zr(e){let t;return{show:()=>(t=null,e.reduce(((r,o)=>r.catch((()=>(t=o,Rt(o))))),Promise.reject())),hide(){t&&t.hide()}}}var rt=!1;function eo(e,{timeout:t=3e3,MSG_REQUESTING:r="更多游戏请求中",MSG_NO_DATA:o="暂无更多游戏推荐"}={}){if(rt)return l.showToast({message:r});rt=!0,setTimeout((()=>{rt=!1}),t),e.show({onComplete:n=>{rt=!1,n!==l.ADState.Play_User_Finish&&l.showToast({message:o})}})}function to({adId:e,image:t,marginTop:r,showOnState:o,hideDelay:n=1e3}){Array.isArray(o)||(o=[o]);let i,s,c=()=>{s=null,i&&i.hide()};o.forEach((u=>{QGUtils.onState(u,(()=>{s?(clearTimeout(s),s=null):(i=l.createBoxPortal(e,{image:t,marginTop:r}),i.show())}),(()=>{s=setTimeout(c,n)}))}))}var kt={};F(kt,{VideoEvents:()=>no,VideoStatus:()=>oo,configShare:()=>Qn,isAbleShareRecordVideo:()=>Un,pause:()=>Wn,recordClip:()=>io,resume:()=>Hn,share:()=>$n,start:()=>Vn,stop:()=>Bn});var re,s,c,R=l.getGameRecorderManager(),me="",oe=0,ro=0,ot=3,oo=((c=oo||{})[c.Unstart=0]="Unstart",c[c.Recording=1]="Recording",c[c.StopCalled=2]="StopCalled",c[c.Stoped=3]="Stoped",c[c.Cliping=4]="Cliping",c[c.Failed=5]="Failed",c[c.Finished=6]="Finished",c),no=((s=no||{}).RecordStart="record-video-start",s.RecordStopCalled="record-video-stop-called",s.RecordStop="record-video-stop",s.ClipFinished="clip-video-finished",s.ClipFailed="clip-video-failed",s.RecordShareSuccess="record-video-share-success",s),E=0,Re=[],nt=!1;R.onStart((e=>{console.log("gameRecorderManager: onStart"),E=1,oe=0,ro=Date.now(),l.emiter.emit("record-video-start")})),R.onStop((e=>{console.log("gameRecorderManager: onStop with videoPath: ",e.videoPath),E=3,me=e.videoPath;let t=Math.min(oe,30);if(t>ot&&!nt){E=4;let r={path:e.videoPath,success(o){console.log("gameRecorderManager: clipVideo success with videoPath: ",me),me=o.videoPath,E=6,l.emiter.emit("clip-video-finished")},fail(){console.log("gameRecorderManager: clipVideo fail"),E=5,l.emiter.emit("clip-video-failed")}};Re.length?(console.log("gameRecorderManager: clipVideo with clipRange: "),r.clipRange=Re):(console.log("gameRecorderManager: clipVideo with timeRage: ",t),r.timeRange=[t,0]),console.log("gameRecorderManager: clipVideo start"),R.clipVideo(r)}l.emiter.emit("record-video-stop"),nt=!1})),R.onError((()=>{console.log("gameRecorderManager: onError"),E=5,oe=0,me=""}));var Dt=!1,It=(e=300)=>{console.log("gameRecorderManager: call _start"),Dt=!0,Re=[],E=1,R.start({duration:e})};function Vn(e=300){console.log("gameRecorderManager: call start"),re?(console.log("gameRecorderManager: will call start when stopPromise resolved"),re.then((()=>{console.log("gameRecorderManager: stopPromise resolved, call start"),It(e)})).catch((()=>{console.log("gameRecorderManager: stopPromise rejected, call start"),It(e)}))):It(e)}function Bn(e=!1){return nt=e,console.log("gameRecorderManager: call stop"),oe=(Date.now()-ro)/1e3|0,Dt?(Dt=!1,l.isSupportGameRecord||window.xyxPassiveShareVideo?(Re.length&&!nt?(console.log("gameRecorderManager: do recordClip then stop"),io(5,0).then((()=>{console.log("gameRecorderManager: recordClip success then stop"),R.stop()})).catch((function(){console.log("gameRecorderManager: recordClip fail then stop"),R.stop()}))):(console.log("gameRecorderManager: do stop"),R.stop()),l.emiter.emit("record-video-stop-called"),E=2,re=new Promise(((t,r)=>{let o=()=>{i(),t()},n=()=>{i(),r()},i=()=>{l.emiter.rm(o,"clip-video-finished"),l.emiter.rm(n,"clip-video-failed"),re=null};l.emiter.once("clip-video-finished",o),l.emiter.once("clip-video-failed",n),setTimeout((()=>{i(),r()}),1e3)})),window.xyxPassiveShareVideo&&setTimeout((()=>{E=6,l.emiter.emit("clip-video-finished")}),300),re):Promise.resolve()):(console.log("gameRecorderManager: call stop but not start so return"),E=0,Promise.resolve())}function Wn(){console.log("gameRecorderManager: call pause"),R.pause()}function Hn(){console.log("gameRecorderManager: call resume"),R.resume()}function io(e=3,t=3){return console.log("gameRecorderManager: recordClip",e,t),new Promise(((r,o)=>{R.recordClip({timeRange:[e,t],success(n){Re.push(n.index),r({})},fail(){o()}})}))}function Un(){return l.isSupportGameRecord&&oe>=ot||window.xyxPassiveShareVideo}var Ot={templateId:"",desc:"",title:"",videoTopics:[]};function Qn(e){Ot={...Ot,...e}}function $n(e){let{fail:t,success:r,templateId:o,desc:n,title:i,videoTopics:s}={...Ot,...e};if(window.xyxPassiveShareVideo)return r&&r({msg:"passive success"}),l.emiter.emit("record-video-share-success");if(0===E)return console.log("gameRecorderManager: share but not start"),t&&t("分享失败：录屏时长过短");if(5===E)return t&&t("录屏失败，不能分享");if(2===E)return t&&t("录屏结束处理中，请稍后再试");if(4===E)return t&&t("录屏裁剪中，请稍候再试");if(oe<=ot)return console.log("录屏时长: ",oe),t&&t(`录屏失败：录屏时长低于 ${ot} 秒`);let c=()=>{console.log("gameRecorderManager: do share with: ",me,o),R.publishVideo({templateId:o,title:i,desc:n,video:me,tags:s,success:a=>{r&&r(a),l.emiter.emit("record-video-share-success")},fail:a=>{if(console.log("recordVideoAndShare: share failed",a),"shareAppMessage:cancel"===a)t&&t("分享已取消");else{if(a.startsWith("shareAppMessage:fail video file is too short"))return t&&t("分享失败：录屏时长过短");if(a.startsWith("shareAppMessage:fail can not be shared without clicking by user"))return t&&t("分享失败，未能捕捉事件，请再次点击尝试");t&&t("分享失败，请稍后再试")}}})};if(6!==E)return re?(l.showLoading({title:"正在生成录屏，请稍等"}),void re.then((()=>{l.hideLoading(),c()})).catch((a=>{l.hideLoading(),t&&t("录屏生成失败，请稍后再试")}))):t&&t("录屏还未结束，请稍候再试");c()}var Gt={};F(Gt,{getAssetTypeWithUrl:()=>ao,load:()=>he,loadAudio:()=>co,loadImage:()=>lo});var ge=new Map,ao=e=>{let t=e.split("?")[0];if(/[png|jpg|jpeg]$/.test(t))return 0;if(/[mp3|ogg]$/.test(t))return 1;throw new Error(`Unknown asset type for url: ${e}`)},lo=(e,t)=>t&&ge.has(t)?Promise.resolve(ge.get(t)):new Promise(((r,o)=>{let n=new Image;n.onload=()=>{t&&ge.set(t,n),r(n)},n.onerror=()=>o(n),n.crossOrigin="anonymous",n.src=e})),co=(e,t)=>t&&ge.has(t)?Promise.resolve(ge.get(t)):new Promise(((r,o)=>{let n=new Audio;n.addEventListener("canplaythrough",(()=>{t&&ge.set(t,n),r(n)})),n.addEventListener("error",(()=>o(n))),n.src=e})),so=(e,{isCache:t}={})=>e?Me(e).then((r=>{let o=ao(r),n=t?e:void 0;switch(o){case 0:return lo(r,n).then((i=>i));case 1:return co(r,n).then((i=>i))}})):Promise.resolve(null);function he(e,{isCache:t}={isCache:!0}){return Array.isArray(e)?Promise.all(e.map((r=>so(r,{isCache:t})))):so(e,{isCache:t})}var Nt={};F(Nt,{EVENT_PRIVACY_COMPLETE:()=>zn,EVENT_PRIVACY_CONFIRMED:()=>fo,EVENT_PRIVACY_SHOWED:()=>mo,autoShowPrivacyConfirm:()=>qn,isPrivacyConfirmAgreed:()=>po,showPrivacyConfirm:()=>go});var uo="privacy-confirm-is-argreed",po=()=>"true"===localStorage.getItem(uo),fo="event-privacy-confirmed",mo="event-privacy-showed",zn="event-privacy-complete",Ie=!1;function go({parentNodeGetter:e,isCacheResource:t,resources:r={bg:"privacyConfirm/privacy-confirm-bg.png",contentBg:"privacyConfirm/privacy-confirm-content-bg.png",title:"privacyConfirm/privacy-confirm-title.png",btnPrev:"privacyConfirm/privacy-confirm-prev.png",btnNext:"privacyConfirm/privacy-confirm-next.png",btnAgree:"privacyConfirm/privacy-confirm-agree.png",btnDisagree:"privacyConfirm/privacy-confirm-disagree.png",contents:["privacyConfirm/privacy-confirm-1.png","privacyConfirm/privacy-confirm-2.png","privacyConfirm/privacy-confirm-3.png","privacyConfirm/privacy-confirm-4.png"]},isNeedUserAgreement:o=!1,agreementResources:n={title:"privacyConfirm/user-agreements-title.png",contents:["privacyConfirm/user-agreements-1.png","privacyConfirm/user-agreements-2.png"]},onConfirmed:i,onRejected:s,opt:c}){if(Ie)return void console.warn("There is a privacy confirm showing, please wait until it is closed.");Ie=!0;let a=()=>{let u=he([r.bg,r.contentBg,r.title,r.btnPrev,r.btnNext,r.btnAgree,r.btnDisagree,...r.contents],{isCache:t});return o?Promise.all([u,he([n.title,...n.contents],{isCache:t})]):Promise.all([u])};return Promise.resolve().then((()=>(tt(),et))).then((u=>{let d=u.default?u.default:u;return K("privacyConfirm").then(a).then((m=>{let[v,x=[]]=m,[g,y,S,f,H,le,N,...xt]=v;console.log("privacy confirm resources all loaded");let cr=d.getStageWidth(),ur=d.getStageHeight(),wt=d.PrivacyConfirm({stageSize:{width:cr,height:ur},contentSize:{width:.8*cr|0,height:.8*ur},imgs:{bg:g,contentBg:y,title:S,contents:xt,btnPrev:f,btnNext:H,btnAgree:le,btnDisagree:N},isNeedUserAgreement:o,agreementResources:{title:x[0],contents:x.slice(1)},opt:c,handleAgree:()=>{localStorage.setItem(uo,"true"),wt.container.destroy(),Ie=!1,i&&i(),V(fo)},handleDisagree:()=>{s?s():l.showDialog({title:"注意",content:"需要同意《隐私政策》才能继续游戏",showCancel:!1,confirmText:"确定"})}}),{container:dn}=wt;return d.addChild(e(),dn.node),V(mo),wt})).catch((m=>{console.log("privacy confirm resources load failed",m.message,m),Ie=!1}))})).catch((u=>{console.error("import native-ui failed",u.message,u),Ie=!1}))}function qn({showOnEvent:e="main-enter",onShow:t,onComplete:r,...o}){let n=()=>{if(po())return r&&r(),void V("event-privacy-complete");go({...o,onConfirmed:()=>{o.onConfirmed&&o.onConfirmed(),r&&r(),V("event-privacy-complete")}}).then((i=>{t&&i&&t(i)}))};e?_(e,n,!0):n()}var Kt={};F(Kt,{addCachedAudio:()=>ni,disableAudio:()=>Bo,disableMusic:()=>ko,disableSound:()=>Fo,enableAudio:()=>Vo,enableMusic:()=>Oo,enableSound:()=>No,isAudioDisabled:()=>j,isMusicDisabled:()=>X,isSoundDisabled:()=>ke,pauseMusic:()=>Zn,playMusic:()=>Wo,playSound:()=>ti,preloadAudio:()=>oi,resumeMusic:()=>ei,setMaxPoolSizePerAudio:()=>yo,stopMusic:()=>Jt,stopSound:()=>ri,toggleAudio:()=>Xn,toggleMusic:()=>Kn,toggleSound:()=>jn});var ho=new Map,vo=10,yo=e=>{vo=e},xo=e=>{let t=ho.get(e);return t||(t={size:0,pool:new Set},ho.set(e,t)),t},Ft=e=>{let r,t=xo(e);return 0===t.pool.size?t.size>=vo?(console.log("AudioManager: audio pool is full for url:",e),null):(t.size++,r=new Audio(e),r.addEventListener("ended",(()=>{t.pool.add(r)})),r):(r=t.pool.values().next().value,t.pool.delete(r),r)},it=(e,t)=>{xo(e).pool.add(t)},Vt=new Map,Bt=async(e,t)=>{if(Vt.has(t))return Vt.get(t);let r=await(async(e,t)=>{let o=await(await fetch(t)).arrayBuffer();return await e.decodeAudioData(o)})(e,t);return Vt.set(t,r),r},$=xyx.isBrowser&&!xyx.isWeb,Q=null;$&&(Q=new AudioContext);async function Wt(e){if(!e)return console.warn("no AudioInfo to operation");if($){e.source&&De(e);let t=await Bt(Q,e.url);e.source=Q.createBufferSource(),e.source.buffer=t,e.source.loop=e.loop,e.gain=Q.createGain(),e.gain.gain.value=e.volume,e.source.connect(e.gain),e.gain.connect(Q.destination),e.source.start(0),e.onEnded&&(e.source.onended=()=>{e.onEnded(e)})}else{if(e.audio||(e.audio=Ft(e.url)),!e.audio)return;e.audio.loop=e.loop,e.audio.volume=e.volume,e.onEnded&&(e.audio.onended=()=>{e.onEnded(e)}),await e.audio.play()}}function De(e){if(!e)return console.warn("no AudioInfo to stop");if($){if(!e.source)return console.warn("no AudioInfo.source to stop");try{e.source.buffer&&e.source.stop(),e.source.disconnect(),e.gain.disconnect()}catch(t){console.error("stopAudioInfo: failed: ",e,t)}e.source=null,e.gain=null}else{if(!e.audio)return console.warn("no AudioInfo.audio to stop");e.audio.pause(),e.audio.currentTime=0}}function st(e,t){if(!e)return console.warn("no AudioInfo to set mute status");if($){if(null==e||!e.gain)return console.warn("no AudioInfo.gain to set mute status");e.gain.gain.value=t?0:e.volume}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to set mute status");e.audio.muted=t}}var Oe,Ht,Ut,ne=new Set,To=null,Yn=new O({concurrency:1}),ie=e=>(console.log("addMusicOperation: ",e),Yn.add(e)),at=Promise.resolve();xyx.isBrowser&&(at=new Promise((e=>{let t=!1,r=()=>{window.mainCanvas.removeEventListener("touchstart",r),t||(t=!0,e()),e()};window.mainCanvas.addEventListener("touchstart",r)}))),Oe="true"===localStorage.getItem("xyx-audio-disabled"),Ht="true"===localStorage.getItem("xyx-music-disabled")||Oe,Ut="true"===localStorage.getItem("xyx-sound-disabled")||Oe;var j=()=>Oe,X=()=>Ht,ke=()=>Ut,Qt=e=>{ne.delete(e)};function Io(e){De(e),Qt(e),e.audio&&it(e.url,e.audio)}var $t=(e,t)=>{Ht=!e,t&&(e?localStorage.removeItem("xyx-music-disabled"):localStorage.setItem("xyx-music-disabled","true"))},zt=(e,t)=>{Ut=!e,t&&(e?localStorage.removeItem("xyx-sound-disabled"):localStorage.setItem("xyx-sound-disabled","true"))},qt=(e,t)=>{Oe=!e,t&&(e?localStorage.removeItem("xyx-audio-disabled"):localStorage.setItem("xyx-audio-disabled","true"))},se=()=>To,Yt=0;at.then((()=>{Q&&"suspended"===Q.state&&Q.resume()}));var Oo=async e=>{$t(!0,e);let t=se();t&&await Wo(t.url,t.loop,t.volume)},ko=async e=>{$t(!1,e),await Jt()},Kn=async e=>{X()?await Oo(e):await ko(e)},Go=e=>((e=>{ne.forEach((t=>st(t,e)))})(e),ie((()=>{let t=se();t&&st(t,e)}))),No=e=>{zt(!0,e)},Fo=e=>{zt(!1,e),ne.forEach(Io),ne.clear()},jn=e=>{ke()?No(e):Fo(e)},Vo=async e=>{qt(!0,e),await Go(!1)},Bo=async e=>{qt(!1,e),await Go(!0)},Xn=async e=>{j()?await Vo(e):await Bo(e)},Wo=async(e,t=!0,r=1)=>{let o=se();if(o&&o.url===e&&(e=>!!e&&($?e.source&&e.source.buffer:e.audio&&!e.audio.paused))(o)){if(X()||j())return;return void function(e,t){if(!e)return console.warn("no AudioInfo to set volume");if($){if(null==e||!e.gain)return console.warn("no AudioInfo.gain to set volume");e.gain.gain.value=t}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to set volume");e.audio.volume=t}}(o,r)}await Jt();let n=++Yt,i={url:e,volume:r,loop:t};if(await ie((()=>(e=>To=e)(i))),!X()&&!j()&&i)return await at,n!==Yt||X()||j()?void 0:ie((()=>Wt(i)))},Zn=()=>ie((()=>function(e){if(!e)return console.warn("no AudioInfo to pause");if($){if(null==e||!e.source)return console.warn("no AudioInfo.source to pause");e.source.playbackRate.value=0}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to pause");e.audio.pause()}}(se()))),ei=()=>ie((()=>{X()||function(e){if(!e)return console.warn("no AudioInfo to resume");if($){if(null==e||!e.source)return console.warn("no AudioInfo.source to resume");e.source.playbackRate.value=1}else{if(null==e||!e.audio)return console.warn("no AudioInfo.audio to resume");e.audio.play()}}(se())})),Jt=()=>ie((()=>{let e=se();e&&De(e)})),ti=async(e,t=!1,r=1)=>{if(ke()||j())return;let o={url:e,volume:r,loop:t,onEnded:()=>{Qt(o)}};await Wt(o),(e=>{ne.add(e)})(o)},ri=e=>{(e=>{ne.forEach((t=>{t.url===e&&(Io(t),ne.delete(t))}))})(e)},oi=e=>async function(e){$&&await Bt(Q,e),Ft(e)}(e),ni=e=>{it(e.src,e)},G={};F(G,{clear:()=>si,disableDailyKey:()=>pi,enableDailyKey:()=>fi,genSwitcher:()=>ae,getItem:()=>Ge,getJSON:()=>Ho,isDisabledDailyKey:()=>ui,isEnabledDailyKey:()=>ci,removeItem:()=>ii,setItem:()=>ve,setJSON:()=>ai,toggleDailyKey:()=>di});var I=new Map,Ge=e=>(I.has(e)||I.set(e,b.localStorage.getItem(e)),I.get(e)),ve=(e,t)=>{let r=Ge(e);r&&r===t||(I.set(e,t),b.localStorage.setItem(e,t))},ii=e=>{I.has(e)&&I.delete(e),b.localStorage.removeItem(e)},si=()=>{I=new Map,b.localStorage.clear()},Ho=e=>{if(!I.has(e))try{I.set(e,JSON.parse(b.localStorage.getItem(e)))}catch(t){I.set(e,null)}return I.get(e)},ai=(e,t)=>{let r=Ho(e);if((!r||r!==t)&&t)try{ve(e,JSON.stringify(t)),I.set(e,t)}catch(o){console.warn("setJSON failed: ",o)}},ae=(e,t=!0)=>{let r=`${e}_switcher_disabled`,o=!t;null===Ge(r)?ve(r,t?"false":"true"):o="true"===Ge(r);let n={isEnabled:()=>!o,isDisabled:()=>o,disable(){ve(r,"true"),o=!0},enable(){ve(r,"false"),o=!1},toggle(){o?n.enable():n.disable()}};return n},Ne=e=>`${e}_${(()=>{let e=new Date;return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`})()}`,ci=(e,t=!0)=>ae(Ne(e),t).isEnabled(),ui=(e,t=!0)=>ae(Ne(e),t).isDisabled(),pi=e=>{ae(Ne(e)).disable()},fi=e=>{ae(Ne(e)).enable()},di=e=>{ae(Ne(e)).toggle()},tr={};F(tr,{confirmAppApprovedByGeo:()=>Xo,getGeoCity:()=>gt,getLocalGeoCity:()=>mt,setCDNBase:()=>Uo});var jt="https://res.heigame.com/vivoRes/DeliciousFoodV2.3.0/static";function Uo(e){jt=e}var lt=String.fromCharCode,mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",ct={};function Qo(e){return null==e?"":""===e?null:function(e,t,r){let n,d,m,v,x,g,y,S,o=[],i=4,s=4,c=3,a="",u=[],f={val:r(0),position:t,index:1};for(d=0;d<3;d+=1)o[d]=d;for(v=0,g=Math.pow(2,2),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;switch(n=v){case 0:for(v=0,g=Math.pow(2,8),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;S=lt(v);break;case 1:for(v=0,g=Math.pow(2,16),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;S=lt(v);break;case 2:return""}for(o[3]=S,m=S,u.push(S);;){if(f.index>e)return"";for(v=0,g=Math.pow(2,c),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;switch(S=v){case 0:for(v=0,g=Math.pow(2,8),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;o[s++]=lt(v),S=s-1,i--;break;case 1:for(v=0,g=Math.pow(2,16),y=1;y!==g;)x=f.val&f.position,f.position>>=1,0===f.position&&(f.position=t,f.val=r(f.index++)),v|=(x>0?1:0)*y,y<<=1;o[s++]=lt(v),S=s-1,i--;break;case 2:return u.join("")}if(0===i&&(i=Math.pow(2,c),c++),o[S])a=o[S];else{if(S!==s)return null;a=m+m.charAt(0)}u.push(a),o[s++]=m+a.charAt(0),i--,m=a,0===i&&(i=Math.pow(2,c),c++)}}((e=e.replace(/ /g,"+")).length,32,(function(t){return function(e,t){if(!ct[e]){ct[e]={};for(let r=0;r<e.length;r++)ct[e][e.charAt(r)]=r}return ct[e][t]}(mi,e.charAt(t))}))}function ye(e){return fetch(`${jt}/${e}.json`).then((t=>t.json())).then((t=>{let r=Qo(t.s);return JSON.parse(r)}))}var qo=dr(zo()),Xt=({latitude:e,longitude:t,address:r})=>r.find((o=>o.polygon.find((n=>{if((0,qo.default)([t,e],n))return n}))));function Yo({provinceList:e,latitude:t,longitude:r,index:o=0}){if(o>=e.length)return Promise.resolve(null);return ye(`province/${e[o].id}`).then((i=>Xt({latitude:t,longitude:r,address:[i]})||Yo({provinceList:e,latitude:t,longitude:r,index:o+1})))}function Jo({latitude:e,longitude:t}){return ye("province/short").then((r=>Yo({provinceList:r.filter((n=>Xt({latitude:e,longitude:t,address:[n]}))),latitude:e,longitude:t}))).then((r=>{if(!r)throw new Error("未找到省级行政编码");return["110000","120000","310000","500000","810000","820000"].includes(r.id)?r.id:ye(`city/${r.id}`).then((n=>{let i=Xt({latitude:e,longitude:t,address:n});return i?i.id:r.id}))}))}var vi=()=>{let e="http://ip-api.com/json/?lang=zh-CN&fields=city";return b.xyxAddAllowedUrlPrefix(e),k(e).then((t=>{if(t&&t.city)return t.city;throw new Error("获取城市失败")}))},xi=()=>(()=>{let e="https://www.taobao.com/help/getip.php";return b.xyxAddAllowedUrlPrefix(e),Le(e).then((t=>{let o=t.trim().match(/ip:"([^"]+)"/);if(o&&o[1])return o[1];throw new Error("获取 ip 失败")}))})().then((e=>{let t=`https://ip.taobao.com/outGetIpInfo?ip=${e}&accessKey=alibaba-inc`;return b.xyxAddAllowedUrlPrefix(t),k(t)})).then((e=>{if(0===e.code)return e.data.city;throw new Error("获取城市失败")})),Zt="xyx-cached-local-city",ut=null,pt=()=>localStorage.getItem(Zt),ft=e=>e.replace(/市$/,""),dt=()=>{let e=localStorage.getItem(Zt);return e?Promise.resolve(e):ut||(ut=(()=>{let e="http://whois.pconline.com.cn/ipJson.jsp?callback=jsShow";return b.xyxAddAllowedUrlPrefix(e),Le(e).then((t=>{let o=t.trim().match(/jsShow\((.*)\)/);if(o&&o[1]){let n=JSON.parse(o[1]);if(n.err)throw new Error("获取城市失败");return n.city}throw new Error("获取城市失败")}))})().catch(vi).catch(xi).catch((()=>(console.warn("getCity failed"),null))).then((t=>((t=ft(t||""))&&localStorage.setItem(Zt,t),t))),ut)},er="xyx-cached-local-geo-city",mt=()=>G.getItem(er);function gt({latitude:e,longitude:t}){return Jo({latitude:e,longitude:t}).then((r=>{if(!r)throw new Error("非中国境内");return function(e){let t={province:"",provinceCode:"",city:"",cityCode:"",district:"",districtCode:"",code:e,address:""};return ye("areaList/index").then((r=>{if(!r.some((n=>n.id===e?(t.province=n.name,t.provinceCode=n.id,!0):!!n.children&&n.children.some((i=>i.id===e&&(t.province=n.name,t.provinceCode=n.id,t.city=i.name,t.cityCode=i.id,!0))))))throw new Error("未找到行政编码关联的城市");return t}))}(r)})).then((r=>{let o=ft(r.city);return o||(o=ft(r.province)),G.setItem(er,o),o})).catch((r=>(console.error(r),G.setItem(er,"未知地区"),"未知地区")))}function W(){return l.currentPlatform}function ht(){let e=window.XYX_GAME_VERSION.replace(/\./g,"_");return`${W()}-${e}-approved`}function xe(e,t){return e===t||(e.length>=t.length?e.startsWith(t):t.startsWith(e))}var Si=10,Ai=19;function Z(e){let t=ht();if(!e)return console.log("checkAppApprovedStatusWithConfig: no config return false"),!1;let r=W();if(r===l.PLATFORMS.OPPO||r===l.PLATFORMS.VIVO||r===l.PLATFORMS.Web){let{blockedHourRange:o=[[Si,Ai]],hourRangeActiveCityList:n=[],checkHourRangeOnCityRequestFailed:i=!1}=e[r]||{},s=(new Date).getHours(),c=pt(),a=!1;for(let[u,d]of o)s>=u&&s<d&&(console.log("checkAppApprovedStatusWithConfig: under block range",s,o),a=!0);if(r===l.PLATFORMS.OPPO&&a)return console.log("checkAppApprovedStatusWithConfig: oppo under block range return false"),!1;if(r===l.PLATFORMS.VIVO||r===l.PLATFORMS.Web){if(null===c&&i&&a)return console.log("checkAppApprovedStatusWithConfig: get city failed & need check hour range & under block range, return false"),!1;if(null!==c&&n.some((u=>xe(u,c)))&&a)return console.log("checkAppApprovedStatusWithConfig: get city success & city in active city list & under block range, return false",c,n),!1}}return void 0===e[t]&&W()===l.PLATFORMS.Web?!(!window.IsGameApproved&&!window.isGameApproved):(console.log("checkAppApprovedStatusWithConfig: return config[platformVersionKey] === 1",1===e[t]),1===e[t])}function Xo(e){let t=Z(e);if(!t)return console.log("confirmAppApprovedByGeo: game is not approved by config, return false"),Promise.resolve(t);if((xyx.isVIVO||xyx.isWeb&&window.XYX_IS_DEVELOPMENT)&&e.vivo&&e.vivo.hourRangeActiveCityList.length>0){let r=QGUtils.getLocalCity();if(r&&e.vivo.hourRangeActiveCityList.some((i=>xe(r,i))))return console.log("confirmAppApprovedByGeo: current ip city is in active city list, return IsGameApproved"),Promise.resolve(t);let n=mt();return n?xe(r,n)?(console.log("confirmAppApprovedByGeo: city from ip and local geo is same, return IsGameApproved",r,n),Promise.resolve(t)):(console.log("confirmAppApprovedByGeo: city from ip and local geo is different, return false",r,n),Promise.resolve(!1)):new Promise(((e,t)=>{l.getLocation({success:r=>{e(r)},fail:r=>{t(r)}})})).then(gt).then((i=>xe(r,i)?(console.log("confirmAppApprovedByGeo: city from ip and geo is same, return IsGameApproved",r,i),t):(console.log("confirmAppApprovedByGeo: city from ip and geo is different, return false",r,i),!1))).catch((()=>"force-close"===e.vivo.policyOnGeoLocationFailed?(console.log("confirmAppApprovedByGeo: get geo failed, return false for force-close"),!1):(console.log("confirmAppApprovedByGeo: get geo failed, return IsGameApproved for follow-ip"),t)))}return Promise.resolve(t)}var ir={};F(ir,{EventAnalytics:()=>rr,EventEnterMainScene:()=>en,EventLevelEnd:()=>or,EventLevelNext:()=>rn,EventLevelReward:()=>nr,EventLevelStart:()=>tn,EventLoadingComplete:()=>Zo,EventRewardClick:()=>on,onAnalytics:()=>nn});var rr="game-analytics",Zo="loading_end",en="game_page",tn="level_begin",or="level_end",nr="level_reward",rn="level_next",on="reward_click",q=(e,t)=>{V(rr,{eventName:e,param:t})},nn=e=>{_(rr,e)};l.useCrossFrame&&nn((({eventName:e,param:t})=>{l.crossFrameRequest({action:"sendEvent",eventName:e,param:t})})),_("ready",(()=>{window.focus(),q(Zo)})),_("main-enter",(()=>{window.focus(),q(en)}));var z=1;_("level-start",(e=>{null!=e&&e.levelNum&&(z=e.levelNum),q(tn,{levelNum:z})})),_("level-pass",(e=>{q(or,{levelNum:z,result:"Pass"}),q(nr,{levelNum:z,withReward:null!=e&&e.withReward?1:0}),z++})),_("level-fail",(e=>{q(or,{levelNum:z,result:"Fail"}),q(nr,{levelNum:z,withReward:null!=e&&e.withReward?1:0})})),_("level-next",(e=>{null!=e&&e.levelNum&&(z=e.levelNum),q(rn,{levelNum:z})})),l.emiter.on(l.ADEvent.Play_Start,(e=>{e===l.ADType.RewardedVideoAd&&q(on,{sceneName:M.getCurrState()})}));var ar={};F(ar,{processIdMap:()=>Ci});var Fe="",Ci=e=>new Proxy(e,{get:(t,r)=>(t.hasOwnProperty(r)&&"string"==typeof r&&(Fe=r,de(100).then((()=>{Fe===r&&(Fe="")}))),Reflect.get(t,r))}),sr=!0;function sn({parentNodeGetter:e,isCacheResource:t,resources:r,onOK:o,onCancel:n,opt:i}){return Promise.resolve().then((()=>(tt(),et))).then((c=>{let a=c.default?c.default:c;return he([r.bg,r.contentBg,r.title,r.btnPrev,r.btnNext,r.btnOK,r.btnCancel,...r.contents],{isCache:t}).then((u=>{let[d,m,v,x,g,y,S,...f]=u,H=a.getStageWidth(),le=a.getStageHeight(),N=a.Confirm({stageSize:{width:H,height:le},contentSize:{width:.8*H|0,height:.8*le},imgs:{bg:d,contentBg:m,title:v,contents:f,btnPrev:x,btnNext:g,btnOK:y,btnCancel:S},onOK:o,onCancel:n,opt:i}),{container:xt}=N;return a.addChild(e(),xt.node),N})).catch((u=>{console.error("show confirm failed: ",u)}))})).catch((c=>{console.error("import native-ui failed: ",c)}))}function Ve(e){return(17*e.split("").join("C").split("").reduce(((r,o)=>r+o.charCodeAt(0)),0)).toString(16).split("").reverse().join("")}if(l.useCrossFrame&&l.emitter.on(l.ADEvent.Play_Request,(e=>{let{ad:t,showParam:r}=e;t.adType===l.ADType.InterstitialAd&&(r.intention=r.intention||(()=>{let e=M.getCurrState();return sr&&de(0).then((()=>{sr=!1})),sr&&"main"===e?l.ADIntention.Start:"pause"===e?l.ADIntention.Pause:"game"===e?l.ADIntention.Next:l.ADIntention.Browse})()),r.position=r.position||Fe||M.getCurrState()})),"92d3"!==Ve("gqk2020"))throw new Error("appIdEncoder 代码发生错误变更，请更正");var Be="https://res.heigame.com/xyx/config/";function vt(e,t=Be){return`${t}${e=e.replace(/-/g,"")}-${Ve(e)}.json`}var We={};function yt(e,t=Be){let r=vt(e,t),o=()=>k(r).then((n=>(We=n,n)));return xyx.isVIVO||xyx.isWeb&&window.XYX_IS_DEVELOPMENT?Promise.all([dt(),o()]).then((([n,i])=>i)):o()}function an(e,t){return`state-${e}-${t}`}function ln(e){var t,r,o,n,i,s,c,a,u,d;return e&&Z(We)?void 0!==(null==(r=null==(t=We[W()])?void 0:t.probabilityCloseAsClick)?void 0:r[e])?null==(n=null==(o=We[W()])?void 0:o.probabilityCloseAsClick)?void 0:n[e]:void 0!==(null==(c=null==(s=null==(i=null==window?void 0:window.xyxGameConfig)?void 0:i[W()])?void 0:s.probabilityCloseAsClick)?void 0:c[e])?null==(d=null==(u=null==(a=null==window?void 0:window.xyxGameConfig)?void 0:a[W()])?void 0:u.probabilityCloseAsClick)?void 0:d[e]:0:0}function cn(e,t=Be){let r=vt(e,t);return console.log("isGameApproved",e,r,ht()),yt(e,t).then(Z).catch((()=>!1))}var un=!1,lr=e=>new Promise((t=>{if("undefined"!=typeof qg&&qg.gameLoginWithReal)if(un)t();else{if(!e.hwAppId)throw new Error("hwAppId is required");qg.gameLoginWithReal({forceLogin:1,appid:e.hwAppId,success:()=>{un=!0,t()},fail:(...r)=>{console.error("gameLogin fail",...r),xyx.showDialog({title:"登录失败",content:"请检查网络并重试",confirmText:"重试",showCancel:!1,success:()=>{lr(e).then(t)}})}}),xyx.showToast({message:"登录进行中，请稍候..."})}else t()}));function pn({confirmData:e={},successData:t={}}){l.showDialog({title:"清除数据",content:"确认后将清除所有数据，包括游戏进度、账号信息等，是否继续？",confirmText:"确认",cancelText:"取消",success:r=>{if(r.confirm)try{l.storage.clear(),l.showDialog({title:"成功",content:"清除数据成功，请重新启动游戏",confirmText:"退出",showCancel:!1,success:()=>{l.exitApplication()},...t})}catch(o){l.showToast({message:"清除数据失败，请重试"})}},...e})}function fn(e,{onProgress:t,concurrency:r=1/0}={}){let o=e.map((()=>0));return new O({concurrency:r}).addAll(e.map(((s,c)=>()=>K(s,(s=>c=>{o[s]=c;let u=o.reduce(((d,m)=>d+m),0)/e.length;console.log("loadMultiSubpkg: ",e," progress: ",u),t&&t(u)})(c)))))}return(e=>fr(He({},"__esModule",{value:!0}),e))(Ei)})();window.QGUtils=QGUtils}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},240:()=>{var xyx=(()=>{var Se=Object.defineProperty,Jt=Object.getOwnPropertyDescriptor,Zt=Object.getOwnPropertyNames,er=Object.prototype.hasOwnProperty,Ma={};((o,e)=>{for(var t in e)Se(o,t,{get:e[t],enumerable:!0})})(Ma,{ADEvent:()=>q,ADIntention:()=>pe,ADState:()=>X,ADType:()=>d,Emitter:()=>U,Encoding:()=>R,FsmEvent:()=>F,GAME_RECORDER_VIDEO_PATH_NO_NEED:()=>he,NativeAdInteractionType:()=>K,PLATFORMS:()=>fe,QQShareAppType:()=>oo,QQShareItem:()=>eo,ShareAppMessageCancel:()=>St,TTShareChannel:()=>ue,TT_LANDSCAPE_MAX_AD_WIDTH:()=>Qe,TT_LANDSCAPE_MIN_AD_WIDTH:()=>We,TT_PORTRAIT_MIN_AD_WIDTH:()=>Ue,VIVOAdLayout:()=>ie,botPromise:()=>N,calcCustomAdHeight:()=>pt,calcStyle:()=>D,createAppBox:()=>jo,createBannerAd:()=>je,createBoxPortal:()=>Xo,createCanvas:()=>{},createCustomAd:()=>mt,createFullScreenVideoAd:()=>tt,createGameDrawerAd:()=>et,createImage:()=>He,createInnerAudioContext:()=>{},createInterstitialAd:()=>Ye,createLoopGameBannerAd:()=>Zo,createRewardedVideoAd:()=>Je,createStaticGameBannerAd:()=>Jo,crossFrameRequest:()=>_,currentPlatform:()=>na,devicePixelRatio:()=>qe,download:()=>Kt,emiter:()=>aa,emitter:()=>ra,exitApplication:()=>Ee,getCanvasRenderingContext2D:()=>Io,getErrorMsg:()=>I,getFileSystemManager:()=>{},getGameRecorderManager:()=>ut,getLocale:()=>fo,getLocaleContent:()=>x,getLocation:()=>ao,getMainCanvas:()=>{},getNetworkType:()=>De,getSupportedLocales:()=>co,getSystemInfoSync:()=>L,getUserPathPrefix:()=>xe,hasShortcutInstalled:()=>Et,hideKeyboard:()=>yt,hideLoading:()=>V,hideShareMenu:()=>Xr,installShortcut:()=>Rt,is2345:()=>va,isAFG:()=>Oa,isAndroid:()=>La,isBOTIM:()=>Pa,isBrowser:()=>$t,isCordova:()=>Aa,isGPT:()=>Ca,isHW:()=>wa,isHippoo:()=>Ta,isIOS:()=>Ia,isKS:()=>ha,isKwai:()=>ga,isMI:()=>Sa,isMZ:()=>ca,isMz:()=>ma,isNotchScreen:()=>so,isOPPO:()=>la,isOppo:()=>da,isQQ:()=>ua,isSupportAppBox:()=>Yo,isSupportBoxPortalAd:()=>$o,isSupportCustomAd:()=>ct,isSupportCustomGameRecorderShareButton:()=>gt,isSupportDownload:()=>Wt,isSupportFS:()=>ho,isSupportFavoriteGuide:()=>Bt,isSupportGameDrawerAd:()=>ot,isSupportGameRecord:()=>ht,isSupportNativeAd:()=>dt,isSupportNavigateToMiniGame:()=>Ht,isSupportPayment:()=>Xt,isSupportShareAppMessage:()=>ea,isSupportShortcut:()=>Ft,isSupportShowShareMenu:()=>Zr,isSupportVibrate:()=>ro,isTT:()=>fa,isTt:()=>pa,isVIVO:()=>sa,isVivo:()=>ia,isWX:()=>ya,isWeb:()=>xa,isXLB:()=>ba,jumpGameCenter:()=>ft,loadFont:()=>{},loadSubpackage:()=>_t,nativeAdCreator:()=>lt,navigateToMiniGame:()=>Dt,navigateToVideoView:()=>Jr,offHide:()=>Le,offKeyboardComplete:()=>Tt,offKeyboardConfirm:()=>xt,offKeyboardInput:()=>bt,offShareAppMessage:()=>jr,offShow:()=>ke,onCompassChange:()=>kt,onError:()=>Re,onExit:()=>Me,onFavoriteStateChange:()=>Gt,onHide:()=>Ie,onKeyboardComplete:()=>Ct,onKeyboardConfirm:()=>vt,onKeyboardInput:()=>At,onNetworkStatusChange:()=>_e,onReady:()=>Po,onShareAppMessage:()=>$r,onShow:()=>Oe,onTouchCancel:()=>{},onTouchEnd:()=>{},onTouchMove:()=>{},onTouchStart:()=>{},pick:()=>v,reportMonitor:()=>st,request:()=>{},requestPayment:()=>zt,setAdSilent:()=>Vo,setLocale:()=>po,setPreferredFramesPerSecond:()=>Pt,shareAppMessage:()=>Yr,showDialog:()=>Ne,showFavoriteGuide:()=>qt,showKeyboard:()=>wt,showLoading:()=>ae,showShareMenu:()=>zr,showToast:()=>re,startCompass:()=>It,stopCompass:()=>Lt,storage:()=>Oo,supportSetFrame:()=>Ot,timeout:()=>Ke,triggerReady:()=>me,useCrossFrame:()=>ka,vibrate:()=>to,wait:()=>P});window.qg,window.qg;"undefined"!=typeof globalThis&&globalThis.tt?globalThis.tt:"undefined"!=typeof window&&window.tt&&window.tt,window.mz,window.qg,window.mz_jsb;var Q,W=window.cordova;Q=window.devicePixelRatio||1;var no,io="";{let o=/android/i.test(navigator.userAgent),e=getComputedStyle(document.documentElement),t=r=>{let a=e.getPropertyValue(r);return window.XYX_WITH_REAL_DEVICE_PIXEL_RATIO?a?parseInt(a,10):0:a?parseInt(a,10)*Q:0};no=()=>({brand:io,model:"",screenHeight:window.innerHeight*Q,screenLogicHeight:window.innerHeight,screenWidth:window.innerWidth*Q,screenLogicWidth:window.innerWidth,language:window.navigator.language,platform:o?"android":"ios",safeArea:{...G,top:t("--sat"),right:t("--sar"),bottom:t("--sab"),left:t("--sal")}})}W&&W.exec&&W.exec((o=>{console.debug("获取设备信息成功",o),io=o}),(()=>console.debug("获取设备信息失败")),"AdController","getDevice",["getDevice"]);"undefined"!=typeof globalThis&&globalThis.qq?globalThis.qq:"undefined"!=typeof window&&window.qq&&window.qq,window.qg,window.ks,window.qg,window.wx;var L,G={left:0,right:0,top:0,bottom:0,width:0,height:0},Ae=()=>({brand:"",model:"",screenHeight:0,screenLogicHeight:0,screenWidth:0,screenLogicWidth:0,language:"zh_CN",platform:"android",safeArea:G});Ae=function(){return no()};var so=()=>0!==Ae().safeArea.top;function B(o){return void 0!==o&&"function"==typeof o.then&&"function"==typeof o.catch}function P(o,e){return new Promise((t=>{setTimeout((()=>t(e)),o)}))}function lo(o,e,t){let r=!1;for(let a=0;a<o.length;){let l=o[a],[n,m]=l;if(-1!==e&&n===e)return o.splice(a,1),!0;null!==t&&t===m&&(o.splice(a,1),r=!0),a++}return r}L=()=>{let o=Ae();return window.XYX_WITH_REAL_DEVICE_PIXEL_RATIO&&(o.screenWidth=o.screenLogicWidth,o.screenHeight=o.screenLogicHeight),o};var de=class{constructor(){this.maps={},this.uid=0,this._duringEmit=!1}add(e,t,r=null,a=0,l=!1){if(!e)throw new Error("can not listen on empty eventName");let n=this.uid++,m=this.maps[e]||[];return m.push([n,t,r,a,l]),m.sort((function(M,T){return T[3]-M[3]})),this.maps[e]=m,n}on(e,t,r=null,a=0){return this.add(e,t,r,a,!1)}once(e,t,r=null,a=0){return this.add(e,t,r,a,!0)}every(e,t=null){let r=this.uid++,a=this.everyEventListeners||[];return a.push([r,e,t,0,!1]),this.everyEventListeners=a,r}rmEvery(e){let t,r=-1;"number"==typeof e?r=e:t=e;let a=this.everyEventListeners||[];this._duringEmit&&(this.everyEventListeners=a=a.concat()),lo(a,r,t)}rm(e,t){let r=-1,a=null;"number"==typeof e?r=e:a=e;let l=t?[t]:Object.keys(this.maps),n=!1;for(let m=l.length-1;m>=0;m--){let M=l[m],T=this.maps[M];T&&(this._duringEmit&&(this.maps[M]=T=T.concat()),lo(T,r,a)&&(n=!0))}return n}rmall(e){null==e?(console.warn("rmall without eventName, so REMOVE ALL EVENTS"),this.maps={}):delete this.maps[e]}_emit(e,...t){let a,r=this.maps[e];if(console.log("emit event: ",e,...t),r&&r.length>0){let n=r.concat();for(let m=n.length-1;m>=0;m--){let M=n[m],[T,f,p,Ea,jt]=M;jt&&r.splice(m,1),this._duringEmit=!0;try{a=f.call(p,...t)}catch(Yt){console.error(`emit event: ${e} with args: ${t} for callback: `,f,"failed with error",Yt)}if(this._duringEmit=!1,a===de.CONST.break)break}}let l=this.everyEventListeners||[];for(let n=0;n<l.length;n++){let m=l[n],[M,T,f]=m;try{a=T.call(f,e,...t)}catch(p){console.error(`emit event: ${e} with args: ${t} for callback: `,T,"failed with error",p)}if(a===de.CONST.break)break}return!0}async emit(e,t){await P(1),this._emit(e,t)}},U=de;U.CONST={break:{}};var ee,E=new U,be=["zh","en","es","pt"],co=()=>[...be],hr={zh:{WrongParameter:"参数错误",IOError:"I/O错误",FileNotExists:"文件不存在",AdLoading:"广告加载中...",AdSkipped:"完整观看完广告才能获得奖励哦",AdError:"广告播放失败，请稍后再试",FavoriteGuide:"一键添加到「我的小程序」",Tips:"提示",TipsRequired:"请设置提示内容",Confirm:"确定",Cancel:"取消",BtnTextDownload:"立即下载",BtnTextView:"点击查看"},en:{WrongParameter:"Wrong parameter",IOError:"I/O error",FileNotExists:"File not exists",AdLoading:"Ad loading...",AdSkipped:"Watch full AD for reward",AdError:"Ad play failed, please try again later",FavoriteGuide:'Add to "My Mini Program" with one click',Tips:"Tips",TipsRequired:"Please set the tips content",Confirm:"Confirm",Cancel:"Cancel",BtnTextDownload:"Download",BtnTextView:"View"},es:{WrongParameter:"Parámetro incorrecto",IOError:"Error de E/S",FileNotExists:"Archivo no existe",AdLoading:"Cargando anuncio...",AdSkipped:"Mira el anuncio entero para la recompensa",AdError:"Error al reproducir anuncio, inténtelo luego",FavoriteGuide:'Añadir a "Mi Mini Programa" con un clic',Tips:"Consejos",TipsRequired:"Por favor establece el contenido de los consejos",Confirm:"Confirmar",Cancel:"Cancelar",BtnTextDownload:"Descargar",BtnTextView:"Ver"},pt:{WrongParameter:"Parâmetro incorreto",IOError:"Erro de E/S",FileNotExists:"Arquivo não existe",AdLoading:"Anúncio carregando...",AdSkipped:"Assista o anúncio completo para obter a recompensa",AdError:"Falha ao reproduzir anúncio, por favor tente novamente mais tarde",FavoriteGuide:'Adicionar a "Meu Mini Programa" com um clique',Tips:"Dicas",TipsRequired:"Por favor, defina o conteúdo das dicas",Confirm:"Confirmar",Cancel:"Cancelar",BtnTextDownload:"Baixar",BtnTextView:"Ver"}},mo=L().language.split("-")[0];ee=be.includes(mo)?mo:"zh";var xe,r,t,po=o=>{if("cn"===o&&(console.warn("cn is not a valid locale, use zh instead"),o="zh"),!be.includes(o))throw new Error(`unsupported locale: ${o}`);ee=o},fo=()=>ee,x=o=>hr[ee][o],I=o=>{if(o instanceof Error)return o.message;if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(e){return o.toString()}},R=((t=R||{}).utf8="utf8",t.binary="binary",t),F=((r=F||{}).READ_FILE_START="read-file-start",r.READ_FILE_SUCCESS="read-file-success",r.READ_FILE_FAILED="read-file-failed",r),ho=()=>!1;xe=()=>{return/\/$/.test(o="")?o:o+"/";var o};var wr={getItem:o=>window.localStorage.getItem(o),setItem(o,e){window.localStorage.setItem(o,e)},removeItem(o){window.localStorage.removeItem(o)},clear(){window.localStorage.clear()}},go=wr,So=o=>(...e)=>console.log(`${o}: `,...e),Ce=o=>{if("string"==typeof o)return o.length>100?o.slice(0,100)+"...":o;let t=String(o);return t.length>100?t.slice(0,100)+"...":t},oe=o=>{var e;return!0!==(null==(e=window.xyxLogMuteControl)?void 0:e[o])};function i(o="unknow"){return()=>{console.debug(`this is a fallback for function ${o}, because current platform is not support it`)}}var Te=new Set,Pe=new Set;document.addEventListener("visibilitychange",(o=>{"visible"===document.visibilityState&&Te.forEach((e=>e(o))),"hidden"===document.visibilityState&&Pe.forEach((e=>e(o)))}));var To=!1,le=new Set,Po=function(o){To?setTimeout(o,1):le.has(o)||le.add(o)},me=function(){To=!0,le.forEach((o=>o({}))),le.clear()},Oe=i("lifeCycle: onShow"),ke=i("lifeCycle: offShow"),Ie=i("lifeCycle: onHide"),Le=i("lifeCycle: offHide"),Me=i("lifeCycle: onExit"),Ee=i("lifeCycle: exitApplication"),Re=i("lifeCycle: onError");Oe=o=>{Te.add(o)},ke=o=>{Te.delete(o)},Ie=o=>{Pe.add(o)},Le=o=>{Pe.delete(o)},Me=o=>{let e="onpageshow"in self;window.addEventListener(e?"pagehide":"unload",o)},Re=o=>{window.addEventListener("error",(e=>{o({message:e.message,stack:e.stack||""})}),!1)},Ee=()=>{location.reload()};var te,N=new Promise((o=>{o}));te=go;var Oo={getItem(o){let e=te.getItem(o);return oe("storage")&&console.debug(`the localstorage value of key: ${o} is ${Ce(e)}`),e},setItem:(o,e)=>(oe("storage")&&console.debug(`the localstorage set key: ${o} with value: ${Ce(e)}`),te.setItem(o,e)),removeItem(o){if(!o)throw new Error("Please specify the key");return oe("storage")&&console.debug(`the localstorage remove key: ${o}`),te.removeItem(o)},clear(){oe("storage")&&console.debug("the localstorage is cleared"),te.clear()}};"undefined"!=typeof document&&document.createElement&&document.getElementById&&(document.createElement.bind(document),document.getElementById.bind(document));var Io=()=>undefined().getContext("2d"),He=()=>{throw new Error("createImage not implemented")};He=()=>new Image;window.HTMLAudioElement;window.Audio;var Mo=()=>{let o=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(o)switch(o.type){case"none":return"none";case"unknown":default:return"unknown";case"ethernet":case"wifi":case"wimax":return"wifi";case"cellular":case"bluetooth":return"slow-2g"===o.effectiveType?"2g":o.effectiveType}return"unknown"},De=i("getNetworkType"),_e=i("onNetworkStatusChange");De=({success:o})=>{setTimeout((()=>o&&o({networkType:Mo()})),0)},_e=o=>{let e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&(e.onchange=function(){o({networkType:Mo()})})};var qe=1;qe=Q;var ce=new Map,xr=0,H=o=>{if(!o)return;let e=xr++;return ce.set(e,o),e},_=({onSuccess:o,onFail:e,onClosed:t,action:r,...a})=>{var n,m;let l={...a,action:r};o&&(l.onSuccess=H(o)),e&&(l.onFail=H(e)),t&&(l.onClosed=H(t)),null==(m=null==(n=null==window?void 0:window.parent)?void 0:n.postMessage)||m.call(n,l,"*")},Ho=!0,j=async({adType:o,adIntention:e,adPosition:t,onClosed:r,onShowSuccess:a,...l})=>{e||(Ho?(e="start",Ho=!1):e="browse");let n={...l,action:"showAd",adType:o,adIntention:e,adPosition:t,onSuccess:a};return n.onClosed=m=>{window.dispatchEvent(new Event("focus")),r&&r(m)},await P(100),_(n)},Or=["http://localhost","http://127.0.0.1","http://192.168"];window.addEventListener("message",(o=>{if(!(o=>o===window.XYX_GAME_INDEX_ORIGIN||Or.some((e=>o.startsWith(e))))(o.origin))return;let e=o.data;(o=>{var e;return"call-callback"===(null==o?void 0:o.action)&&(null==(e=null==o?void 0:o.params)?void 0:e.length)>0&&"number"==typeof o.params[0]})(e)&&((o,...e)=>{ce.has(o)&&(ce.get(o).call(null,...e),ce.delete(o))})(e.params[0],...e.params.slice(1))}));var re,Ne=o=>console.debug(o),ae=i("showLoading"),V=i("hideLoading");re=o=>{_({action:"showToast",param:o})},Ne=o=>{let{confirmText:e=x("Confirm"),cancelText:t=x("Cancel"),showCancel:r=!0,success:a,fail:l,complete:n}=o,m={...o,confirmText:e,cancelText:t,showCancel:r,success:H(a),fail:H(l),complete:H(n)};_({action:"showDialog",param:m})},ae=o=>{let{success:e,fail:t,complete:r}=o,a={...o,success:H(e),fail:H(t),complete:H(r)};_({action:"showLoading",param:a})},V=()=>{_({action:"hideLoading"})};var p,f,a,X=((f=X||{})[f.Download_Waiting=0]="Download_Waiting",f[f.Downloading=1]="Downloading",f[f.Download_Success=2]="Download_Success",f[f.Download_Failed=3]="Download_Failed",f[f.Requesting=4]="Requesting",f[f.Playing=5]="Playing",f[f.Play_Auto_Finish=6]="Play_Auto_Finish",f[f.Play_User_Finish=7]="Play_User_Finish",f[f.Play_Hide=8]="Play_Hide",f[f.Play_Failed=9]="Play_Failed",f),q=((p=q||{}).Download_Success="xyx-ad-event-download-success",p.Download_Failed="xyx-ad-event-download-failed",p.Play_Request="xyx-ad-event-play-request",p.Play_Start="xyx-ad-event-play-start",p.Play_Auto_Finish="xyx-ad-event-play-auto-finish",p.Play_User_Finish="xyx-ad-event-play-user-finish",p.Play_Failed="xyx-ad-event-play-failed",p.Play_Complete="xyx-ad-event-play-complete",p.Expanded="xyx-ad-event-expanded",p.Folded="xyx-ad-event-folded",p.Clicked="xyx-ad-event-clicked",p),d=(p=>(p.BannerAd="banner-ad",p.InterstitialAd="interstitial-ad",p.RewardedVideoAd="rewarded-video-ad",p.FullScreenVideoAd="full-screen-video-ad",p.AppBox="app-box",p.BoxPortal="box-portal",p.GameDrawerAd="game-drawer-ad",p.StaticGameBannerAd="static-game-banner-ad",p.LoopGameBannerAd="loop-game-banner-ad",p.CustomAd="custom-ad",p.NativeAd="native-ad",p))(d||{}),pe=((a=pe||{}).Start="start",a.Pause="pause",a.Next="next",a.Browse="browse",a),Lr=Date.now();function Vo(){throw new Error("xyx.setAdSilent is deprecated, use AD.setAdSilent instead")}var C=(o,e)=>{console.log("emitAdEvent:",e,o.adType,o.id),E.emit(e,o)},s=class{constructor(e,t){this.adType=t,B(e)?(this.promiseId=e,this.promiseId.then((r=>{this.id=r}))):this.id=e,this.prevShowTime=0,this.showInterval=0,this.disableDurationAfterUserClosed=0,this.prevUserCloseTime=0,this.silentTimeInSecond=0,this.hideDelay=2e3,this._setState(0),this.isHiding=!1,this.asyncActionManager=function({beforeNextAction:o,handleAction:e}){let a,t=[],r=!1;return{addAsyncAction(n){console.log("asyncActions: addAsyncAction: ",n),t.push(n),r||(a&&clearTimeout(a),a=setTimeout((()=>{console.log("asyncActions: addAsyncAction: execute it"),r||this.doNextAction()}),100))},setPending(){console.log("asyncActions: setPending"),r=!0},doNextAction(){if(a&&(clearTimeout(a),a=null),console.log("asyncActions: doNextAction"),r=!1,console.log("asyncActions: doNextAction: before filter: ",t),t=t.filter((n=>!n.isNeedProcess||n.isNeedProcess())).sort(((n,m)=>(m.priority||0)-(n.priority||0))),console.log("asyncActions: doNextAction: before callback: ",t),o&&(t=o(t)),console.log("asyncActions: doNextAction: before handle: ",t),t.length>0){let n=t.shift();console.log("asyncActions: doNextAction: ",n),e(n)}}}}({beforeNextAction:r=>this._beforeNextAction(r),handleAction:r=>this._handleAction(r)}),this._showParams=new Set,this._passiveAdCount=0}_beforeNextAction(e){var a,l;if(e.length<=1)return e;let t={id:5===this.state?"show":"hide",data:{id:this.idWillUseToShow}},r=[];for(e.forEach((n=>{var M,T,f,p;if(0===r.length)return console.log("asyncActions: beforeNextAction: empty action list: ",n),void r.push(n);let m=r[r.length-1];return m.id===n.id&&(null==(M=null==m?void 0:m.data)?void 0:M.id)===(null==(T=null==n?void 0:n.data)?void 0:T.id)?(console.log("asyncActions: beforeNextAction: same action: ",m,n),r.shift(),void r.push(n)):m.id!==n.id&&(null==(f=null==m?void 0:m.data)?void 0:f.id)===(null==(p=null==n?void 0:n.data)?void 0:p.id)?(console.log("asyncActions: beforeNextAction: conflict action: ",m,n),void r.shift()):void r.push(n)}));r.length>0&&r[0].id===t.id&&(null==(l=null==(a=r[0])?void 0:a.data)?void 0:l.id)===t.data.id;)console.log("asyncActions: beforeNextAction: next action with same state: ",r[0],t),r.shift();return r}_shouldPassiveAdSuccess(){return++this._passiveAdCount%2==0}_handleAction(e){switch(this.log("handleAction: ",e),e.id){case"show":this.show(e.data);break;case"hide":this.hide();break;default:throw new Error("unknown action id: "+e.id)}}getState(){return this.state}log(e,...t){let r=this.idWillUseToShow||this.id;console.debug(`AD:${this.adType}:${r}: ${e}`,...t)}_setState(e){this.log(`setState: ${e}`),this.state=e}_show(e){this.log("unimplemented the _show method"),setTimeout((()=>this._handleShowFailed(e)),0)}_handleShowSuccess(e,t=!0){V(),this.log("_handleShowSuccess"),t&&(this.prevShowTime=Date.now()),this.loadPromise=null,C(this,"xyx-ad-event-play-start"),e.onShow&&(this.log("_handleShowSuccess trigger onShow"),e.onShow(this.state,this)),this._showParams.add(e),this.asyncActionManager.doNextAction()}_handleShowFailed(e,t=!0){V(),this.log("_handleShowFailed"),this.loadPromise=null,t&&(this.prevShowTime=Date.now()),9!==this.state&&(this._setState(9),C(this,"xyx-ad-event-play-failed"),C(this,"xyx-ad-event-play-complete"),e.onFail&&(this.log("_handleShowFailed trigger onFail"),e.onFail(this.state,this)),e.onComplete&&(this.log("_handleShowFailed trigger onComplete"),e.onComplete(this.state,this)),this.asyncActionManager.doNextAction())}_handleClosed(e){V(),this.log(`_handleClosed, isUserClose: ${e}`),e?(this._setState(7),this.prevUserCloseTime=Date.now(),C(this,"xyx-ad-event-play-user-finish"),C(this,"xyx-ad-event-play-complete")):(this._setState(6),C(this,"xyx-ad-event-play-auto-finish"),C(this,"xyx-ad-event-play-complete")),this._showParams.forEach((t=>{t.onClose&&(this.log("_handleClosed trigger onClose"),t.onClose(this.state,this)),t.onComplete&&(this.log("_handleClosed trigger onComplete"),t.onComplete(this.state,this))})),this._showParams.clear()}_handleDownloadSuccess(){this.log("_handleDownloadSuccess"),this._setState(2),C(this,"xyx-ad-event-download-success")}_handleDownloadFailed(){V(),this.log("_handleDownloadFailed"),this._setState(3),C(this,"xyx-ad-event-download-failed")}_handleExpand(){C(this,"xyx-ad-event-expanded")}_handleFolded(){C(this,"xyx-ad-event-folded")}isUnderShowInterval(){let e=Date.now()-this.prevShowTime;return this.log("showInterval check: ",e,this.showInterval),e<this.showInterval}isUnderDurationAfterUserClosed(){let e=Date.now()-this.prevUserCloseTime;return this.log("durationAfterUserClosed check: ",e,this.disableDurationAfterUserClosed),e<this.disableDurationAfterUserClosed}isAbleToShow(){return!this.isUnderShowInterval()&&!this.isUnderDurationAfterUserClosed()}setAdSilent(e){this.silentTimeInSecond=e}isUnderSilent(){let t=(Date.now()-Lr)/1e3|0;return this.log("isUnderSilent: ",t,this.silentTimeInSecond),t<this.silentTimeInSecond}async show(e={}){this.log("show with param:",e);let t=!1;if(e){if("function"==typeof e)throw new Error("show param should be an object");if("string"==typeof e)throw new Error("show param should be an object");let{id:n,cbk:m}=e;if(m)throw new Error("cbk is not allowed in show param, use onShow, onClose, onFail instead");n&&(t=!0,this.idWillUseToShow=n,this.log("will show with id",n))}else e={};"rewarded-video-ad"===this.adType&&!t&&window.xyxIdWillUseToShowRewardedVideoAd&&(e.id=this.idWillUseToShow=window.xyxIdWillUseToShowRewardedVideoAd,this.log("will show with id",this.idWillUseToShow,"from window.xyxIdWillUseToShowRewardedVideoAd")),e.isAbleShow=e.isAbleShow||(()=>!0),await xyx.emitter.emit("xyx-ad-event-play-request",{ad:this,showParam:e}),this._setState(4);let r=async()=>{await P(0),this._handleShowFailed(e,!1)},a=async()=>{await P(0),this._handleShowSuccess(e,!1)};if(this.isUnderShowInterval())return this.log("show failed with showInterval limit"),r();if(this.isUnderDurationAfterUserClosed())return this.log("show failed with disableDurationAfterUserClosed limit"),r();if(e.isAbleShow&&!e.isAbleShow())return this.log("show failed with isAbleShow => false"),r();"rewarded-video-ad"===this.adType&&ae({title:x("AdLoading")});let l=this.isUnderSilent();if(this.asyncActionManager.setPending(),!(o=>{var t,r,a;return!!window.xyxPassiveAd&&("interstitial-ad"===o.adType?"string"!=typeof(null==(t=null==window?void 0:window.xyxWebSupport)?void 0:t.systemAdLikePlatform):"box-portal"===o.adType?!0!==(null==(r=null==window?void 0:window.xyxWebSupport)?void 0:r.boxPortal):"app-box"===o.adType?!0!==(null==(a=null==window?void 0:window.xyxWebSupport)?void 0:a.appBox):!["custom-ad","banner-ad"].includes(o.adType))})(this)&&!l)return this.id||this.idWillUseToShow?this.loadThenShow(e):this.promiseId?await this.promiseId?this.loadThenShow(e):(this.log("has no id, so show failed"),r()):(this._setState(3),r(),this.log("id is empty, can not show"),this.log("id is empty, can not show"),void this.log("id is empty, can not show"));if(await P(1e3),l||this._shouldPassiveAdSuccess()){this.log("set ad success for ",l?"silent":"passive"),await a();let n=["interstitial-ad","custom-ad"];await P(1e3),this._handleClosed(n.includes(this.adType))}else"rewarded-video-ad"===this.adType&&this._passiveAdCount%4==1?(this.log("set ad closed by user for passive ad"),await a(),await P(1e3),this._handleClosed(!0)):(this.log("set ad failed for passive ad"),await r())}showPromise(){return new Promise(((e,t)=>{this.show({onClose:r=>{if("rewarded-video-ad"===this.adType){if(6===r)return e();{let a;return a=x(7===r?"AdSkipped":"AdError"),re({message:a}),t({message:a})}}return this.adType,e()},onFail:t})}))}loadThenShow(e){return this.log("loadThenShow:undownload:load"),this.load().then((()=>this.realShow(e))).catch((t=>{this.log("load failed: ",t),this._handleShowFailed(e,!1)}))}realShow(e){if(this._setState(5),this.checkIsAbleShow(e))return this._show(e)}checkIsAbleShow(e,t=!0){return!!e.isAbleShow()||(this.log("show failed for can not show"),t&&setTimeout((()=>this._handleShowFailed(e)),0),!1)}load(){return this._load()}_load(){return Promise.resolve()}triggerFakeAdHideSuccess(){return P(this.hideDelay).then((()=>this._handleHideSuccess()))}_hide(){this.triggerFakeAdHideSuccess()}hide(){this.log("hide"),this.isHiding=!0,this.asyncActionManager.setPending(),this._hide()}_handleHideSuccess(){this.log("_handleHideSuccess"),this.isHiding=!1,this._handleClosed(!1),this.asyncActionManager.doNextAction()}_handleHideFail(){this.log("_handeHideFail"),this.isHiding=!1,this.asyncActionManager.doNextAction()}_handleError(e){this.log("_handleError:",I(e),e),this.isHiding&&this._handleHideFail()}asyncShow(e,t){!t||!t.isNeedProcess||e&&e.isAbleShow?e&&e.isAbleShow&&!(t&&t.isNeedProcess)&&((t=t||{}).isNeedProcess=t.isNeedProcess||e.isAbleShow):(e=e||{}).isAbleShow=e.isAbleShow||t.isNeedProcess,this.asyncActionManager.addAsyncAction({id:"show",data:e,...null!=t?t:{}})}asyncHide(e){this.asyncActionManager.addAsyncAction({id:"hide",data:{id:this.idWillUseToShow},...null!=e?e:{}})}},O=class extends s{constructor(t,r){super(t,"banner-ad"),this.autoShowInterval=(null==r?void 0:r.autoShowInterval)||Ve,this.isAutoShowEnabled=!1,this.loopShowInterval=(null==r?void 0:r.freshInterval)||45e3}_updateStyle(t){throw new Error("should implement by instance")}updateStyle(t){this._updateStyle(t)}_handleShowSuccess(t){super._handleShowSuccess(t),8===this.state&&this.hide()}hide(){super.hide(),this.isAutoShowEnabled&&setTimeout((()=>{this.log("auto show after hide"),this.show()}),this.autoShowInterval)}enableAutoShow(t){this.isAutoShowEnabled=!0,t&&(this.loopShowInterval=t),this.loopShowTimer&&(clearInterval(this.loopShowTimer),this.loopShowTimer=null),this.loopShowTimer=setInterval((()=>{this.log("loop show to trigger a hide"),this.hide()}),this.loopShowInterval)}disableAutoShow(){this.isAutoShowEnabled=!1,this.loopShowTimer&&clearInterval(this.loopShowTimer)}};function Ke(o,e,t=!0){return new Promise(((r,a)=>{setTimeout((()=>{t?a(new Error("timeout")):r({})}),e),o.then(r,a)}))}Math.min(undefined,undefined);function D(o,e){let t={top:0,left:0},{vertical:r="top",horizontal:a="center"}=o,{screenWidth:l,screenHeight:n,adWidth:m,adHeight:M,scale:T}=e,f=(n-M)/T,p=(l-m)/T;switch(r){case"bottom":t.top=f;break;case"top":t.top=0;break;default:t.top=f*r}switch(a){case"center":t.left=p/2;break;case"left":t.left=0;break;case"right":t.left=p;break;default:t.left=p*a}return{left:0|t.left,top:0|t.top}}var b,We=128,Qe=208,Ue=300,fe=((b=fe||{}).VIVO="vivo",b.OPPO="oppo",b.TT="tt",b.MZ="mz",b.QQ="qq",b.HW="hw",b.Web="web",b.KS="ks",b.KWAI="kwai",b.Cordova="cordova",b.XLB="xlb",b.Game2345="2345",b.QuickGame="quickgame",b.MI="mi",b.WX="wx",b.GPT="gpt",b.Hippoo="hippoo",b.AFG="afg",b.BOTIM="botim",b),Ve=(window.qg,3e3),je=o=>{let e=new O(o);return e._show=i("BannerAd: _show"),e};function v(o){return Array.isArray(o)?o[Math.floor(Math.random()*o.length)]:o}je=()=>{let o=new O("cross-frame-no-need-banner-ad-id");return o._updateStyle=e=>{console.log("updateStyle:",e)},o._show=e=>{j({adType:"banner",adIntention:e.intention,adPosition:e.position,onShowSuccess:()=>o._handleShowSuccess(e),onFail:()=>o._handleShowFailed(e)})},o._hide=()=>{(({adType:o})=>{_({action:"hideAd",adType:o,onSuccess(){console.log("hide ad success")}})})({adType:"banner"}),o.triggerFakeAdHideSuccess()},o};var Ye=o=>{let e=new s(o,"interstitial-ad");return e._show=t=>{setTimeout((()=>{e._handleShowSuccess(t)}),300)},e};Ye=()=>{let o=new s("cross-frame-no-need-interstitial-ad-id","interstitial-ad");return o._show=e=>{j({adType:"interstitial",adIntention:e.intention,adPosition:e.position,onShowSuccess:()=>{o._handleShowSuccess(e)},onClosed:()=>{o._handleClosed(!0)},onFail:t=>{o.log("show failed with msg: "+t),o._handleShowFailed(e)}})},o.setAdSilent(10),o.showInterval=6e4,o};var Je;Je=()=>{let o=new s("fake-rewarded-video-id","rewarded-video-ad");return o._show=e=>{j({adType:"reward",adIntention:e.intention,adPosition:e.position,onShowSuccess:()=>{o._handleShowSuccess(e)},onClosed:t=>{o._handleClosed(t)},onFail:t=>{console.log("onFail",t),o._handleShowFailed(e)}})},o};var Xo=(o,e)=>{let t=new s(o,"box-portal");return t._show=i("BoxPortalAd: _show"),t},$o=()=>!1,jo=o=>{let e=new s(o,"app-box");return e._show=i("AppBox: _show"),e},Yo=()=>!1,Jo=o=>new s(o,"static-game-banner-ad"),Zo=o=>new s(o,"loop-game-banner-ad"),et=o=>{let e=new s(o,"game-drawer-ad");return e._show=i("AppBox: _show"),e},ot=()=>!1,tt=()=>new s("fake-full-screen-video-ad","full-screen-video-ad"),st=()=>{};var K=(t=>(t[t.Download=0]="Download",t[t.Open=1]="Open",t))(K||{});var o,l,dt=!1,lt=(o=(o,e)=>e,e=>{let t={adType:"native-ad",log:So("NativeAd:"),reportAdShow({adId:o}){throw new Error("reportAdShow unimplemented")},reportAdClick({adId:o}){throw new Error("reportAdClick unimplemented")},getData(){throw new Error("getData unimplemented")}};return function(o){return B(o)?o:Promise.resolve(o)}(e).then((r=>o(r,t)))}),Y=class extends s{constructor(t,r={}){var a,l,n;super(t,"custom-ad"),this.vivoAdLayout=null!=(a=r.vivoAdLayout)?a:0,this.adStyle=null!=(l=r.adStyle)?l:{},this.willReloadOnNoAd=null!=(n=r.willReloadOnNoAd)&&n}show({adStyle:t={vertical:"bottom",horizontal:"center"},vivoAdLayout:r=0,willReloadOnNoAd:a=!0,...l}={}){return this.adStyle=t,this.vivoAdLayout=r,this.willReloadOnNoAd=a,super.show(l)}},ie=((l=ie||{})[l.LEFT_IMG_RIGHT_TEXT=0]="LEFT_IMG_RIGHT_TEXT",l[l.LEFT_TEXT_RIGHT_IMG=1]="LEFT_TEXT_RIGHT_IMG",l[l.UP_IMG_DOWN_TEXT=2]="UP_IMG_DOWN_TEXT",l[l.UP_TEXT_DOWN_IMG=3]="UP_TEXT_DOWN_IMG",l[l.HORIZONTAL_IMG=4]="HORIZONTAL_IMG",l),Ur=new Map;window.adInstCache=Ur;var n,mt=o=>{let e=new Y(o);return e._show=i("CustomAd: _show"),e},ct=()=>!1,pt=()=>0,ft=function(o){},ue=(a=>(a.article="article",a.video="video",a.token="token",a.card="",a))(ue||{}),he="no-need",ut=()=>({start:i("GameRecorderManager.start"),onStart:i("GameRecorderManager.onStart"),recordClip:i("GameRecorderManager.recordClip"),clipVideo:i("GameRecorderManager.clipVideo"),pause:i("GameRecorderManager.pause"),onPause:i("GameRecorderManager.onPause"),resume:i("GameRecorderManager.resume"),onResume:i("GameRecorderManager.onResume"),stop:i("GameRecorderManager.stop"),onStop:i("GameRecorderManager.onStop"),onError:i("GameRecorderManager.onError"),onInterruptionBegin:i("GameRecorderManager.onInterruptionBegin"),onInterruptionEnd:i("GameRecorderManager.onInterruptionEnd"),publishVideo:i("GameRecorderManager.publishVideo")}),ht=!1,gt=()=>!1,eo=(a=>(a.qq="qq",a.qzone="qzone",a.wechatFriends="wechatFriends",a.wechatMoment="wechatMoment",a))(eo||{}),oo=((n=oo||{}).qq="qq",n.qqFastShare="qqFastShare",n.qqFastShareList="qqFastShareList",n.qzone="qzone",n.wechatFriends="wechatFriends",n.wechatMoment="wechatMoment",n),zr=i("share: showShareMenu"),Xr=i("share: hideShareMenu"),$r=i("share: onShareAppMessage"),jr=i("share: offShareAppMessage"),Yr=i("share: shareAppMessage"),Jr=i("share: navigateToVideoView"),Zr=!1,ea=!1,St="shareAppMessage:cancel",wt=i("keyboard: showKeyboard"),yt=i("keyboard: hideKeyboard"),At=i("keyboard: onKeyboardInput"),bt=i("keyboard: offKeyboardInput"),vt=i("keyboard: onKeyboardConfirm"),xt=i("keyboard: offKeyboardConfirm"),Ct=i("keyboard: onKeyboardComplete"),Tt=i("keyboard: offKeyboardComplete"),Pt=i("frame: setPreferredFramesPerSecond"),Ot=!1,kt=i("compass: onCompassChange"),It=i("compass: startCompass"),Lt=i("compass: stopCompass");window.XMLHttpRequest;var Et=({success:o,fail:e})=>{setTimeout((()=>o(!1)),1)},Rt=()=>{throw new Error("Please achievement this function")},Ft=()=>!1,Ht=()=>!1,Dt=o=>{throw new Error("Unsupport this method, use isSupportNavigateToMiniGame() to check support before use it")},_t=o=>{let e=new Set;return setTimeout((()=>{o.success(""),e.forEach((t=>t({progress:1,totalBytesWritten:100,totalBytesExpectedToWrite:100})))}),100),console.debug("this is a fallback for LoadSubpackage"),{onProgressUpdate(t){e.add(t),console.debug("this is a fallback for LoadSubpackageTask.onProgressUpdate")}}},qt=i("showFavoriteGuide"),Gt=i("onFavoriteStateChange"),Bt=()=>!1,Kt=o=>({abort:i("download.abort"),onProgressUpdate:i("download.onProgressUpdate")}),Wt=()=>!1,to=()=>{},ro=()=>!1;to=(o=!1)=>{let e=navigator.vibrate;e?e.call(navigator,o?400:30):console.warn("has no support for vibrate")},ro=()=>!0;var ao=o=>{setTimeout((()=>{console.warn("getLocation unimplemented"),o.fail&&o.fail(),o.complete&&o.complete()}),100)};ao=({success:o,fail:e,complete:t})=>{var r;if(null==(r=null==window?void 0:window.navigator)||!r.geolocation)return console.warn("navigator.geolocation not supported"),void setTimeout((()=>{e&&e(),t&&t()}),100);window.navigator.geolocation.getCurrentPosition((a=>{o&&o({longitude:a.coords.longitude,latitude:a.coords.latitude}),t&&t()}),(a=>{switch(console.log("navigator.geolocation.getCurrentPosition: error",a),a.code){case 1:console.log("getLocation: 用户拒绝了位置信息请求");break;case 2:console.log("getLocation: 无法获取当前位置");break;case 3:console.log("getLocation: 超时")}e&&e(),t&&t()}),{maximumAge:0,timeout:3e3,enableHighAccuracy:!1})};var zt=()=>Promise.reject(new Error("requestPayment not initialized")),Xt=()=>!1,ra=E,aa=E,na="hippoo",ia=!1,sa=!1,da=!1,la=!1,ma=!1,ca=!1,pa=!1,fa=!1,ua=!1,ha=!1,ga=!1,Sa=!1,wa=!1,ya=!1,Aa=!1,ba=!1,va=!1,xa=!1,Ca=!1,Ta=!0,Pa=!1,Oa=!1,$t=!0,ka=!0;$t||setTimeout(me,1);var Ia=()=>"ios"===L().platform,La=()=>"android"===L().platform;return(o=>((o,e,t,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let a of Zt(e))!er.call(o,a)&&a!==t&&Se(o,a,{get:()=>e[a],enumerable:!(r=Jt(e,a))||r.enumerable});return o})(Se({},"__esModule",{value:!0}),o))(Ma)})();window.xyx=xyx},158:()=>{(()=>{var tt=Object.defineProperty,Z=(e,t)=>{for(var r in t)tt(e,r,{get:t[r],enumerable:!0})},Le={};Z(Le,{default:()=>pt});var pt,e,t,Ie=(e=()=>{pt=ZipFileServer},()=>(e&&(t=e(e=0)),t)),le={};Z(le,{Audio:()=>Ct,Image:()=>Dt,XMLHttpRequest:()=>Ft,cancelAnimationFrame:()=>Ze,close:()=>Mt,devicePixelRatio:()=>$t,fetch:()=>At,localStorage:()=>De,location:()=>p,name:()=>Ut,navigator:()=>He,open:()=>qt,opener:()=>Ot,requestAnimationFrame:()=>We,sessionStorage:()=>Ce,setLocale:()=>Ne,setLocation:()=>de,xyxSetFramePerSecond:()=>je});var pe,ce,fe,me,f=xyx,U="http:",A="127.0.0.1",z="/";{let e=window.location;fe=e.href,pe=e.port,U=e.protocol,ce=e.hostname,A=e.host,z=e.pathname,me=e.origin}var p={href:fe,pathname:z,search:"",hash:"",protocol:U,origin:me,host:A,hostname:ce,ancestorOrigins:"",port:pe,assign(e){},replace(e){},reload:function(){}},de=e=>{{let t=new URL(e);p.href=t.href,p.pathname=t.pathname,p.search=t.search,p.hash=t.hash,p.protocol=t.protocol,p.origin=t.origin,p.host=t.host,p.hostname=t.hostname,p.port=t.port}};function F(e){let t=f.getUserPathPrefix();return t&&0===e.indexOf(t)}function V(e){if(e.startsWith("blob:")||e.startsWith("data:"))return e;let t=(e=>/\/$/.test(e)?e:e+"/")(p.origin+p.pathname.split("/").slice(0,-1).join("/"));return e.replace(t,"")}function Y(e){return 0!==e.indexOf("http")||F(e)?e.split("?")[0]:e}function J(e){return F(e)?e:e.replace(/^\.\//,"").replace(/^\/\//,"")}function it(e){return function(e){for(;-1!==e.indexOf("%");)e=decodeURIComponent(e);return e}(e).replace(/[\\\/\:\*\?\"\<\>\|\s]/g,"_").replace(/%/g,"_").replace(/[^\u0021-\u007E\u4e00-\u9fa5\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g,(t=>{let r=t.codePointAt?t.codePointAt(0):t.charCodeAt(0);return r?`u${r}`:"_"}))}var m=(e,{disableSpecialLetterRemove:t=!1}={})=>e.startsWith("blob:")||e.startsWith("data:")?e:t?J(Y(V(e))):function(e){let t=e.indexOf("?"),r="";-1!==t&&(r=e.slice(t),e=e.slice(0,t));let o=e.indexOf("#"),n="";-1!==o&&(n=e.slice(o),e=e.slice(0,o));let i=e.indexOf("//"),l="";if(-1!==i){let a=e.indexOf("/",i+2);-1!==a?(l=e.slice(0,a),e=e.slice(a)):(l=e,e="")}return`${l}${e.split("/").map(it).join("/")}${r}${n}`}(J(Y(V(e)))),I=[],C=new Set,T=new Map,M=()=>I,Q=(e,t,r)=>{!window.XYX_IS_DEVELOPMENT||(I=I.filter((o=>o.groupName!==e))).unshift({groupName:e,filter:t,after:r})},$=e=>{!window.XYX_IS_DEVELOPMENT||(I=I.filter((t=>t.groupName!==e)))},D=new Set,g=e=>e.startsWith("data:")?e.split(",")[0]:e,c=(e,t)=>{let r=t||window.xyxLogMuteControl;if(!r)return!0;if(Array.isArray(e)){let[o,...n]=e;return c(o,r||{})&&(0===n.length||c(n,(null==r?void 0:r[o])||{}))}if(e.includes(".")){let[o,...n]=e.split(".");return c(o,r||{})&&c(n,(null==r?void 0:r[o])||{})}return!0!==(null==t?void 0:t[e])},E=e=>()=>c(e),b=(e,...t)=>{"log"===e?(window.xyxEnableRecordDebug||c("recordUrl.log"))&&console.log(...t):(window.xyxEnableRecordDebug||c("recordUrl.warn"))&&console.warn(...t)},w=e=>{var o;if(!window.XYX_IS_DEVELOPMENT)return;if(e=m(e),/^http/.test(e))return void b("warn",`don't record un-relative url: ${g(e)}`);if(e.length<=0)return void b("warn",`don't record empty url: ${g(e)}`);if(e.startsWith("/"))return void b("warn",`don't record url starts with /: ${g(e)}`);if(0===M().length)return void b("warn",`No request group is currently active, cannot record url ${g(e)}`);let t=M().find((n=>!n.filter||n.filter(e))),r=-1!==e.indexOf("/")?e.split("/")[0]:"";t?/^data:\w/.test(e)?b("warn",`Url ${g(e)} is not a valid url`):(C.has(e)||C.add(e),T.has(t.groupName)||T.set(t.groupName,new Set),t.groupName===r&&(e=e.replace(new RegExp(`^${r}/`),"")),b("log",t.groupName,"recordUrl: ",e),T.get(t.groupName).add(e),null==(o=t.after)||o.call(t,e)):b("warn",`No request group can handle url ${g(e)}`)},O=E("request.getMappedRoute"),st=(e,t)=>{if("string"==typeof e)return e;if(Array.isArray(e)){let r=t;for(let o of e){let n=o(r);!1!==n&&(r=n)}return r}return e(t)},at=[".webm",".ogg"],ee=e=>{let t=at.find((r=>e.endsWith(r)));if(t){let r=new RegExp(`\\${t}$`),o=e.replace(r,".mp3");return O()&&console.log("mapAudioUrl: ",e,"->",o),o}return e};function h(e,{mapAudio:t}={mapAudio:!0}){if(!window.xyxRouteMapRoute)return t?(O()&&console.log("getMappedRoute: no rule, map audio",e),ee(e)):(O()&&console.log("getMappedRoute: no rule",e),e);for(let[r,o]of window.xyxRouteMapRoute){let n;if("string"==typeof r){if(0!==e.indexOf(r))continue}else if(!0!==r.test(e))continue;if(n=st(o,e),!1!==n)return O()&&console.log("getMappedRoute: ",e,"->",n),t?ee(n):n}return O()&&console.log("getMappedRoute: no map",e),t?ee(e):e}var lt=new Map;var Re=e=>{let r=/\?([^#]*)/.exec(e);if(r){let o=new Map;return r[1].split("&").forEach((n=>{let[i,l]=n.split("=");o.set(i,l)})),o}return new Map},ut=[{urlPrefix:"https://www.yiv.com/forgame/games.json",data:"[]"},{urlPrefix:"https://h5gamessdk.yyggames.com/in.php",data:'{"redirect":0,"adstxt":0,"linksClickable":1,"inGameAd":1,"videoAdType":3,"videoLength":30,"adInterval":60,"thumb":1,"newADSDK":0.2}'},{urlPrefix:"https://catalog.api.gamedistribution.com/api/v1.0/admin/wdomains",data:'{"success":true,"error":null,"result":true,"statusCode":200,"timestamp":"1600834088"}'},{urlPrefix:"https://tracker.gamedock.io/v1/events-tracker/track/gd/event/pageview",data:""},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"rewarded"},data:"{}"},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"preroll"},data:"{}"},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"gdbanner"},data:"{}"},{urlPrefix:"https://pub.headerlift.com/opphb?page_url=",searchParam:{key:"ad_position",value:"midroll"},data:"{}"},{urlPrefix:"https://msgrt.gamedistribution.com/collect",data:"OK"},{urlPrefix:"https://ana.headerlift.com/event?page_url",data:""},{urlPrefix:"https://hbopenbid.pubmatic.com/translator?",data:""},{urlPrefix:"https://prg.smartadserver.com/prebid/v1",data:""},{urlPrefix:"https://www8.smartadserver.com/prebid/v1",data:""},{urlPrefix:"https://hb.go2speed.media/bidder/",data:""}],te=E("request.getMappedData");async function G(e,t){if(window.globalRouteMaps)throw new Error("Abandoned: window.globalRouteMaps is abandoned, please use window.xyxRouteMapData instead!");if(e.startsWith("blob:")){let i=function(e){return lt.get(e)}(e);return i?(te()&&console.log("getDataFromRouteMap: blob:",e,"->",i),i.arrayBuffer()):(console.warn(`can not find related blob data for url: ${e}`),null)}let o=[...window.xyxRouteMapData||[],...ut];if(!o||0===o.length)return null;let n=o.find((({urlPrefix:i,searchParam:l})=>{if(i&&0!==e.indexOf(i))return!1;if(l){Array.isArray(l)||(l=[l]);let s=Re(e);return l.every((({key:a,value:u})=>!!s.has(a)&&!(u&&s.get(a)!==u)))}return!0}));if(n){if(void 0!==n.data)return te()&&console.log("getDataFromRouteMap: from data",e,"->",n.data),n.data;if("function"==typeof n.server){let i=await n.server(e,t);return te()&&console.log("getDataFromRouteMap: from server",e,"->",i),i}throw new Error(`can not find related data for url: ${e}`)}return null}function re(e){var t;return(null==(t=m(e).match(/\.(\w+)$/))?void 0:t[1])||""}var be=["https://cdn.imagehost.top/","https://res.heigame.com/","https://api.chayumingwang.com/","http://localhost","http://127.0.0.1","file:///android_asset/www/","http://192.168","http://res.heigame.com/"];function X(e){return""!==e&&!(!function(e){return 0!==e.indexOf("http")}(e)&&!be.some((t=>0===e.indexOf(t))))}var ve={FORM_URLENCODED:"application/x-www-form-urlencoded",GIF:"image/gif",JPEG:"image/jpeg",DDS:"image/dds",JSON:"application/json",PNG:"image/png",TEXT:"text/plain",XML:"application/xml",WAV:"audio/x-wav",OGG:"audio/ogg",MP3:"audio/mpeg",MP4:"audio/mp4",AAC:"audio/aac",BIN:"application/octet-stream",BASIS:"image/basis"},d=null,Te=null,oe=null;function _(e){Te=e}var ct=async()=>{let e=(await Promise.resolve().then((()=>(Ie(),Le)))).default;return d=new e.ZipFileServer({remotes:window.xyxZipBundleConfig.remotes,fallbackUrl:window.xyxZipBundleConfig.fallbackUrl,fetch:(t,r)=>Te(t,r)})};async function y(){return oe||(oe=ct()),oe}var H=({url:e,method:t,data:r})=>/\.\w+$/.test(e)&&"GET"===t.toUpperCase()&&null===r;async function Pe(e){let{url:t,headers:r,success:o,fail:n,method:i,dataType:l,data:s}=e;if(window.xyxZipBundleConfig&&H({url:t,method:i,data:s}))return d||await y(),_(fetch),void d.getData(t,{headers:r}).then((a=>{switch(l){case"text":return a.text();case"arraybuffer":return a.arrayBuffer();case"json":return a.json();default:return a.blob()}})).then(o).catch(n);(({url:e,data:t,dataType:r,isBinary:o,method:n,headers:i,success:l,fail:s},a)=>{a.responseType=r,c("xhr.readStart")&&console.log("XMLHttpRequest read file with Origin XMLHttpRequest start: ",e),a.addEventListener("load",(()=>{if(200===a.status){let u;u=f.isBrowser&&"json"===a.responseType||o?a.response:a.responseText,c("xhr.readStart")&&console.log("XMLHttpRequest read file with Origin XMLHttpRequest back: ",e),l(u)}else s(a.status)})),a.addEventListener("error",(()=>{s(a.status)})),a.addEventListener("timeout",(()=>{s(500)})),a.open(n,e,!0),i&&Object.keys(i).forEach((u=>{a.setRequestHeader(u,i[u])})),a.send(t)})(e,new XMLHttpRequest)}var ft=window.XMLHttpRequest,mt=e=>{switch(e){case"":case"text":case"document":return"text";case"blob":return"blob";case"arraybuffer":return"arraybuffer";case"json":return"json"}},dt=e=>"blob"===e||"arraybuffer"===e,gt=new Set(["url","method","async","responseType","response","responseText","getAllResponseHeaders","open","send","status","statusText","readyState"]);function S(){this.__xhr=new ft,this.__async=!0,this.__status=0,this.__statusText="",this.__responseType="",this.__response=null,this.__responseText=null,this.__readyState=0,this.__headers={},Object.defineProperties(this,{url:{enumerable:!0,get:()=>this.__url},method:{enumerable:!0,get:()=>this.__method},async:{enumerable:!0,get:()=>this.__async},responseType:{enumerable:!0,get:()=>this.__responseType,set:e=>{this.__responseType=e,this.__xhr.responseType=e}},response:{enumerable:!0,get:()=>this.__response?this.__response:this.__xhr.response},responseText:{enumerable:!0,get:()=>this.__responseText?this.__responseText:this.__xhr.responseText},status:{enumerable:!0,get:()=>this.__status?this.__status:this.__xhr.status},statusText:{enumerable:!0,get:()=>this.__statusText?this.__statusText:this.__xhr.statusText},readyState:{enumerable:!0,get:()=>this.__readyState?this.__readyState:this.__xhr.readyState}});for(let e in this.__xhr)gt.has(e)||("function"==typeof this.__xhr[e]?this[e]=this.__xhr[e].bind(this.__xhr):Object.defineProperty(this,e,{enumerable:!0,get:()=>this.__xhr[e],set:t=>{this.__xhr[e]=t}}))}S.prototype.setRequestHeader=function(e,t){this.__xhr.setRequestHeader(e,t),this.__headers||(this.__headers={}),this.__headers[e]=t},S.prototype.__getContentType=function(){let e=this.__xhr.getResponseHeader("content-type");if(e)return e;let t=re(this.__url)||re(this.__realUrl);return e=ve[t],e||"text/plain"},S.prototype.getAllResponseHeaders=function(){let e=this.__xhr.getAllResponseHeaders();return e?e.replace(/access-control-allow-origin:.*?\r\n/i,"access-control-allow-origin: *\r\n"):`date: ${(new Date).toUTCString()}\r\ncontent-encoding: gzip\r\naccess-control-allow-origin: *\r\naccess-control-allow-methods: PUT, GET, HEAD, POST, DELETE, OPTIONS\r\nx-content-type-options: nosniff\r\nserver: meinheld/0.6.1\r\nx-frame-options: DENY\r\ncontent-type: ${this.__getContentType()}\r\nconnection: keep-alive\r\nstrict-transport-security: max-age=63072000\r\nvary: Cookie, Accept-Encoding\r\ncontent-length: 6502\r\nx-xss-protection: 1; mode=block\r\n`},S.prototype.open=function(e,t,r=!0){var o;this.__url=t,this.__method=e,this.__async=r,w(t),this.__realUrl=h(m(t,{disableSpecialLetterRemove:null==(o=null==window?void 0:window.xyxFormatUrlOption)?void 0:o.disableSpecialLetterRemove}),{mapAudio:!!window.xyxEnableAudioMapForLiteMode}),this.__xhr.open(this.__method,this.__realUrl,this.__async)},S.prototype.send=function(e=null){let t={url:this.__url,method:this.__method,isRelatedSubpageLoaded:!0,dataType:mt(this.__xhr.responseType),headers:this.__headers,isBinary:dt(this.__xhr.responseType),data:e};this.__async?G(this.__realUrl,t).then((r=>{let o=()=>{this.__status=404,this.__statusText="Not Found",this.__readyState=4;let u=new Event("readystatechange");this.__xhr.onreadystatechange&&this.__xhr.onreadystatechange(u);let R=new ProgressEvent("load");this.__xhr.dispatchEvent(R)},n=u=>{this.__response="json"===t.dataType&&"string"==typeof u?JSON.parse(u):u,"string"==typeof u&&(this.__responseText=u),this.__status=200,this.__statusText="OK",this.__readyState=4;let R=new Event("readystatechange");this.__xhr.onreadystatechange&&this.__xhr.onreadystatechange(R);let L=new ProgressEvent("load");this.__xhr.dispatchEvent(L)},i=this.__xhr.onload,l=this.__xhr.onreadystatechange,s=this,a=u=>new Proxy(u,{get:(R,L)=>"target"===L?s:"function"==typeof R[L]?R[L].bind(s):R[L]});return this.__xhr.onload=u=>{i&&i(a(u))},this.__xhr.onreadystatechange=u=>{l&&l(a(u))},null!==r?(c("request.getMappedData")&&console.log(`url: ${this.__realUrl} is mapped to data:`,r),void n(r)):(c("request.getMappedData")&&console.log(`url: ${this.__realUrl} is not mapped to any data`),""!==this.__realUrl.trim()?X(this.__realUrl)?/\.js$/.test(this.__realUrl)&&!0!==window.xyxRequestScriptAllowed?(console.warn(`url: ${this.__realUrl} is a request for script which is not allowed`),void n("{}")):void Pe({...t,url:this.__realUrl,success:u=>{n(u)},fail:u=>{console.warn(`request ${this.__realUrl} failed with code: ${u}`),o()}}):(console.warn(`url: ${this.__realUrl} is not allowed to make a request`),void o()):void o())})):this.__xhr.send(e)};var N=e=>"string"==typeof e?e:"string"==typeof e.url?e.url:e.toString();var ht=window.fetch,Oe=e=>new Response(null,{status:e,statusText:"Fail"});var xt=["getItem","setItem","removeItem","clear","key","length"],k=e=>new Proxy(e,{get:(t,r)=>"string"==typeof r?-1!==xt.indexOf(r)?t[r]:t.getItem(r):t[r]}),Fe="__keyToStorageKeys__",x=[],ie=()=>{f.storage.setItem(Fe,JSON.stringify(x))},Ae=e=>{-1===x.indexOf(e)&&(x.push(e),ie())},ne=e=>window.XYX_LOCAL_STORAGE_KEY_PREFIX?`${window.XYX_LOCAL_STORAGE_KEY_PREFIX}--${e}`:e,bt={getItem(e){let t=ne(e),r=f.storage.getItem(t);return null===r&&e!==t&&(r=f.storage.getItem(e),null!==r&&(f.storage.setItem(t,r),f.storage.removeItem(e))),null!==r&&Ae(t),r},setItem(e,t){if(e=ne(e),Ae(e),void 0===t)t="undefined";else if(null===t)t="null";else{if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a string");t=t.toString()}return f.storage.setItem(e,t)},removeItem:e=>((e=>{let t=x.indexOf(e);-1!==t&&(x.splice(t,1),ie())})(e=ne(e)),f.storage.removeItem(e)),clear:()=>(x=[],ie(),f.storage.clear()),get length(){return x.length},key:e=>(e=>window.XYX_LOCAL_STORAGE_KEY_PREFIX?e.replace(`${window.XYX_LOCAL_STORAGE_KEY_PREFIX}--`,""):e)(x[e])};(()=>{try{x=JSON.parse(f.storage.getItem(Fe)||"[]")}catch(e){x=[]}})();var De=k(bt),v=new Map,St={getItem:e=>v.has(e)?v.get(e):null,setItem:(e,t)=>v.set(e,t),removeItem:e=>v.delete(e),clear:()=>v.clear(),get length(){return v.size},key:e=>Array.from(v.keys())[e]},Ce=k(St),$e=!1;function j(e,t,r){return function(...o){if(!$e){$e=!0;try{f.crossFrameRequest({action:"renderStart"})}catch(i){console.warn("can not send renderStart message",i)}}let n=o[o.length-1];return n&&n.__xyxPlatformSource&&(o[o.length-1]=n.__xyxPlatformSource),t(...o)}}async function B(e){return window.xyxZipBundleConfig?(d||await y(),_(fetch),d.getUrl(e)):{url:e,onComplete:()=>{}}}var vt=window.Image,P=class extends vt{constructor(){super(),this._originSrc="",this._realSrc="",this.crossOrigin="anonymous",this._complete=!0}_waitLoaded(){let o=Date.now(),n=0,i=0;return new Promise((l=>{let s=()=>{l(),i&&clearInterval(i),this.removeEventListener("load",s),this.removeEventListener("error",s)};super.complete?s():(this.addEventListener("load",s),this.addEventListener("error",s),i=setInterval((()=>{super.complete?(clearInterval(i),s()):(n=o-Date.now(),n>=1e4&&(clearInterval(i),s()))}),300))}))}get complete(){return!(!super.complete||!this._realSrc)||this._complete}get src(){return this._originSrc}set src(r){var n;c("img.setSrc")&&console.log("HTMLImageElement#set src:",g(r)),this._originSrc=r,this._realSrc="",this._complete=!1,w(r),B(h(m(r,{disableSpecialLetterRemove:null==(n=null==window?void 0:window.xyxFormatUrlOption)?void 0:n.disableSpecialLetterRemove}),{mapAudio:!!window.xyxEnableAudioMapForLiteMode})).then((({url:i,onComplete:l})=>{super.src=this._realSrc=i,this._waitLoaded().then((()=>{c("img.onload")&&console.log("HTMLImageElement#onload:",g(this.src)),this._complete=!0,null==l||l()}))}))}},Lt=window.Audio,q=class extends Lt{constructor(r){super(),this._originSrc="",this._realSrc="",r&&(this.src=r)}_waitLoaded(){let o=Date.now(),n=0,i=0;return new Promise((l=>{let s=()=>{l(),i&&clearInterval(i),this.removeEventListener("load",s),this.removeEventListener("error",s),this.removeEventListener("abort",s)};this.readyState===this.HAVE_ENOUGH_DATA?s():(this.addEventListener("canplaythrough",s),this.addEventListener("error",s),this.addEventListener("abort",s),i=setInterval((()=>{this.readyState===this.HAVE_ENOUGH_DATA?(clearInterval(i),s()):(n=o-Date.now(),n>=1e4&&(clearInterval(i),s()))}),300))}))}get src(){return this._originSrc}set src(r){var n;this._originSrc=r,w(r),B(h(m(r,{disableSpecialLetterRemove:null==(n=null==window?void 0:window.xyxFormatUrlOption)?void 0:n.disableSpecialLetterRemove}),{mapAudio:!!window.xyxEnableAudioMapForLiteMode})).then((({url:i,onComplete:l})=>{super.src=this._realSrc=i,this._waitLoaded().then(l)}))}},It=E("navigator.sendBeacon"),Tt=Object.create(window.navigator),se={language:window.navigator.language,languages:window.navigator.languages,sendBeacon:(e,t)=>(It()&&console.log("navigator.sendBeacon",e,t),!0)},Et=Object.keys(se),He=new Proxy(Tt,{get:(e,t)=>Et.includes(t)?se[t]:void 0!==window.navigator[t]?"function"==typeof window.navigator[t]?window.navigator[t].bind(window.navigator):window.navigator[t]:void 0,set:(e,t,r)=>(console.warn(`trying to set navigator.${t} = ${r}`),!0)}),Ne=(e=>t=>{switch("cn"===t&&(console.warn("cn is not a valid locale, use zh instead"),t="zh"),t){case"en":e.language="en-US",e.languages=["en-US","en"];break;case"zh":e.language="zh-CN",e.languages=["zh-CN","zh"];break;case"es":e.language="es-ES",e.languages=["es-ES","es"];break;case"pt":e.language="pt-PT",e.languages=["pt-PT","pt"];break;default:throw new Error(`unsupported locale: ${t}`)}})(se),Pt=1,K=new Map,W=-1,je=e=>{if(e>60)throw new Error("max fps is 60");xyx.supportSetFrame?(xyx.setPreferredFramesPerSecond(e),W=-1):W=Math.floor(1e3/(e+2))},Be=window.requestAnimationFrame,ae=0;Be((function Ke(e){Be(Ke);let t=Date.now();if(t>=ae){ae=W<0?t:t+W;let r=Array.from(K.values());K.clear();for(let o of r)o(e)}}));var We=e=>{let t=Pt++;return K.set(t,e),t},Ze=e=>{K.delete(e)};window.mainCanvas=document.querySelector("canvas");{let e=window.mainCanvas.getContext;window.mainCanvas.getContext=function(t,r){if("webgl2"===t||"webgl"===t){let o=e.call(this,t,r);return o&&function(e){let t=e.texImage2D.bind(e);e.texImage2D=j(0,t);let r=e.compressedTexImage2D.bind(e);e.compressedTexImage2D=j(0,r);let o=e.texSubImage2D.bind(e);e.texSubImage2D=j(0,o);let n=e.compressedTexSubImage2D.bind(e);e.compressedTexSubImage2D=j(0,n)}(o),o}return e.call(this,t,r)}}var qt=()=>{},Mt=()=>{},Ot=null,Ut="",At=async function(e,t){let r=m(N(e));w(r);let o=h(r,{mapAudio:!!window.xyxEnableAudioMapForLiteMode}),n=await G(o,e);return null!==n?n instanceof Response?n:new Response(n,{status:200,statusText:"OK"}):""===o.trim()?(console.warn("empty url is not allowed to make a request"),Oe(400)):X(o)?/\.js$/.test(o)?(console.warn(`url: ${o} is a request for script which is not allowed`),new Response("{}",{status:200,statusText:"OK"})):async function(e,t,r){let o=m(N(t)),n=t.method||(null==r?void 0:r.method)||"GET",i=t.body||(null==r?void 0:r.body)||null;return window.xyxZipBundleConfig&&H({url:o,method:n,data:i})?(d||await y(),_(e),d.getData(o,r)):e(t,r)}(ht,((e,t)=>"string"==typeof e?t:"string"==typeof e.url?(e.url=t,e):t)(e,o),t):(console.warn(`url: ${o} is not allowed to make a request`),Oe(400))},Ft=S,Dt=P,Ct=q,$t=window.devicePixelRatio,ue={};Z(ue,{FontFace:()=>Je,document:()=>Ve});var Gt=window.location,Xt=Object.create(window.document);function ze(e,t){if("img"===e.toLowerCase())return new P;if("audio"===e.toLowerCase())return new q;if("a"!==e||window.xyxDisableAnchorTagProxyForLiteMode)return window.document.createElement(e,t);let r=window.document.createElement("a",t),o="",n=!1;return Object.defineProperty(r,"href",{get:()=>n?["http:","https:","blob:","data: "].some((i=>o.startsWith(i)))?o:new URL(o,p.href).href:"",set(i){n=!0,o=i}}),r}function Ht(e,t,r){return"http://www.w3.org/1999/xhtml"===e?ze(t,r):window.document.createElementNS(e,t,r)}function kt(e){let t=function(e){if(!e)return e;let t=new URL(e),r=Gt.pathname.split("/").slice(0,-1).join("/");return 0===t.pathname.indexOf(r)&&(t.pathname=t.pathname.slice(r.length)),t.pathname.slice(1)}(e);return new URL(t,p.href).href}var Ve=new Proxy(Xt,{get:(e,t)=>"URL"===t?p.href:"createElement"===t?ze:"createElementNS"===t?Ht:"currentScript"===t?window.document.currentScript?new Proxy(window.document.currentScript,{get:(e,t)=>"src"===t?kt(e[t]):"function"==typeof e[t]?e[t].bind(e):e[t]}):window.document.currentScript:void 0!==window.document[t]?"function"==typeof window.document[t]?window.document[t].bind(window.document):window.document[t]:void 0,set:(e,t,r)=>(console.warn(`trying to set document.${t} = ${r}`),Reflect.set(window.document,t,r))}),Ye=window.FontFace;function Je(e,t,r){if("string"==typeof t){let o=t.match(/url\((.+)\)/)[1];return o=o.replace(/^['"](.+)['"]$/,"$1"),new Ye(e,`url(${m(o)})`,r)}return new Ye(e,t,r)}var Bt={...le,...ue,preloadZipBundle:async function(e){return window.xyxZipBundleConfig?(d||await y(),_(fetch),d.preload(e)):Promise.resolve()},getMappedRoute:h};{let t;if(["http://localhost","http://127.0.0.1","http://192.168","https://doxh.net","https://cdn.imagehost.top/"].some((r=>0===location.href.indexOf(r))))t=!1;else if("undefined"!=typeof URLSearchParams){if(t="preview"!==new URLSearchParams(window.location.search).get("ad_env"),t&&window.top!==window)try{t="preview"!==new URLSearchParams(window.top.location.search).get("ad_env")}catch(o){console.log("detect InProduction from top window failed",o)}}else if(t=!0!==/\bad_env=preview\b/.test(window.location.search),t&&window.top!==window)try{t=!0!==/\bad_env=preview\b/.test(window.top.location.search)}catch(r){console.log("detect InProduction from top window failed",r)}t&&(console.log=console.info=console.warn=console.error=()=>{})}window.xyxVM=Bt,window.xyxGroupRequestStart=Q,window.xyxGroupRequestComplete=$,window.xyxGetGroupRequestMap=()=>{let e={};return T.forEach(((t,r)=>{e[r]=Array.from(t)})),e},window.xyxPresetGroupWithPkgMap=e=>{Object.keys(e).forEach((t=>{let r=e[t];r.forEach((o=>{C.add(o)})),T.set(t,new Set(r))}))},window.xyxGetRequestGroupStack=M,window.xyxAutoGroupRequestStart=e=>{let t=0,o=0;if(D.size>0)return;let n=()=>{t=0;let i="auto"+o++;D.add(i),Q(i,e,(()=>{t++,t>=100&&($(i),n())}))};n()},window.xyxAutoGroupRequestComplete=()=>{D.forEach((e=>{$(e)})),D.clear()}})()},591:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){(()=>{var a,t,i,o,g=((a=g||{})[a.en_ADBREAK=0]="en_ADBREAK",a[a.en_GAMEDISTRIBUTION=1]="en_GAMEDISTRIBUTION",a[a.en_GAMEMONETIZE=2]="en_GAMEMONETIZE",a[a.en_H4399=3]="en_H4399",a),f=((t=f||{}).INTERSTITIAL="INTERSTITIAL",t.REWARD="REWARD",t),S=((i=S||{}).YYGSDK_INITIALIZED="YYGSDK_INITIALIZED",i.AD_LOADED="AD_LOADED",i.AD_SKIPPED="AD_SKIPPED",i.AD_ERROR="AD_ERROR",i.AD_COMPLETE="AD_COMPLETE",i),A=(i=>(i[i.en_YAD=0]="en_YAD",i[i.en_YIV=1]="en_YIV",i[i.en_BABYGAMES=2]="en_BABYGAMES",i[i.en_BESTGAMES=3]="en_BESTGAMES",i[i.en_CARGAMES=4]="en_CARGAMES",i))(A||{}),y={TYPE:f,Event:S,ChannelType:A,EventHandler:{create:function(o,e){return function(...t){e.call(o,...t)}}},Options:()=>({gameNameId:"",gamedistributionID:""})},d=xyx,v=QGUtils,n={pause:!1,isShowAD:!1,afgConfig:{channel:null},afcConfig:{channel:null},source:null},l=new Map,u={adsManager:{request:function(o,e,t){if("INTERSTITIAL"!==o){if("REWARD"===o){if(!window.adRewardedVideo)throw new Error("Please set window.adRewardedVideo");console.log("YYGSDK adsManager request: show rewarded video"),n.isShowAD=!0,window.adRewardedVideo.show({onClose:s=>{s===d.ADState.Play_Auto_Finish?(e("AD_COMPLETE"),u.trigger("AD_COMPLETE")):s===d.ADState.Play_User_Finish?(d.showToast({message:d.getLocaleContent("AdSkipped")}),t("AD_SKIPPED"),u.trigger("AD_SKIPPED"),u.trigger("AD_ERROR")):(d.showToast({message:d.getLocaleContent("AdError")}),t("AD_ERROR"),u.trigger("AD_ERROR"))},onFail:()=>{d.showToast({message:d.getLocaleContent("AdError")}),t("AD_ERROR"),u.trigger("AD_ERROR")},onComplete:()=>{n.isShowAD=!1}})}}else if(console.log("YYGSDK adsManager request: show interstitial"),n.isShowAD=!0,window.xyxNeedOriginInterstitialAdLogic){if(!window.adInterstitial)throw new Error("Please set window.adInterstitial");window.adInterstitial.show({onComplete(){n.isShowAD=!1,u.trigger("AD_COMPLETE")}})}else setTimeout((()=>{n.isShowAD=!1,u.trigger("AD_COMPLETE")}),300)},on(o,e,t){u.on(o,e,t)}},navigateTo(o,e,t){console.log(`YYGSDK: navigateTo: ${o}, ${e}, ${t}`)},navigate(o,e,t){console.log(`YYGSDK: navigate: ${o}, ${e}, ${t}`)},__init__:function(o,e){console.log(`YYGSDK: init with channel: ${o} and gameNameId: ${e.gameNameId}`),setTimeout((function(){u.trigger(y.Event.YYGSDK_INITIALIZED)}),1)},on(o,e,t){l.set(o,new Map);let s=new Map;l.has(o)&&(s=l.get(o)),"YYGSDK_INITIALIZED"===o?setTimeout((()=>{t.call(this)}),1):s.set(t,e)},trigger(o){l.has(o)&&l.get(o).forEach(((e,t)=>{t.call(e)}))},showInterstitial(o){if(console.log("YYGSDK showInterstitial: show interstitial"),n.isShowAD=!0,window.xyxNeedOriginInterstitialAdLogic){if(!window.adInterstitial)throw new Error("Please set window.adInterstitial");window.adInterstitial.show({onComplete(){n.isShowAD=!1,o({})}})}else setTimeout((()=>{n.isShowAD=!1,o({})}),300)},forgames:[]},p=class{constructor(){this._volume=1,this._dirContext={},this.loop=!1,this.pause=!1,this._context=null,this._state="suspended",this._audioPausedBySuspend=new Set}init(){}get context(){return this._context}isSuspend(){return"suspended"===this._state}suspend(){this._state="suspended";for(let e of Object.values(this._dirContext))!e.paused&&e.currentTime>0&&!e.ended&&(this._audioPausedBySuspend.add(e),e.pause());return Promise.resolve()}resume(){let e=[];if(!this.pause){this._state="running";for(let t of this._audioPausedBySuspend)e.push(t.play());return this._audioPausedBySuspend.clear(),Promise.all(e).then((()=>{}))}}set volume(e){this._volume=e;for(let t of Object.values(this._dirContext))t.volume=this._volume}get volume(){return this._volume}play(e){if(this.isSuspend())return;let t=this._dirContext[e];if(t)try{t.loop=this.loop,t.currentTime=0,t.play()}catch(s){console.error("playBuffer error. Exception: "+s)}else this.decode(e)}stop(e){if(this.isSuspend())return;let t=this._dirContext[e];t&&(t.pause(),t.currentTime=0)}stopAll(){if(!this.isSuspend())for(let e of Object.values(this._dirContext))e.pause(),e.currentTime=0}decode(e){return new Promise(((t,s)=>{if(this._dirContext[e])return void t();let a=this,i=new Audio;i.addEventListener("canplaythrough",(()=>{i.volume=a.volume,i.loop=a.loop,a._dirContext[e]=i,i.play().then(t)})),i.addEventListener("error",s),i.src=e}))}},E_aotuPauseTimerOnVisibilityChange=!1,Y={timerScale:1,pause(){"undefined"!=typeof Laya&&(this.timerScale=Laya.timer.scale,Laya.timer.scale=0)},resume(){"undefined"!=typeof Laya&&(Laya.timer.scale=this.timerScale)}},_=class{constructor(){this._muted=!1,this.resumeId=-1,this.enabled=!0,this.hiddenMuted=!1,this.inited=!1}init(){if(!this.inited){this.inited=!0;try{this.music=new p,this.music.init(),this.music.loop=!0,this.sound=new p,this.sound.init(),window.document.addEventListener("mousedown",(()=>{setTimeout((()=>{n.isShowAD||this.resume()}),100)}),!0),window.document.addEventListener("touchstart",(()=>{setTimeout((()=>{n.isShowAD||this.resume()}),100)}),!0),window.document.addEventListener("visibilitychange",this.changeVisibility.bind(this)),this.enabled=!0,this.music.volume=.6,this.resume()}catch(e){this.enabled=!1,console.error("Web Audio API is not supported in this browser")}}}resume(){n.isShowAD||this.pause||this._muted||n.pause||(this.music.isSuspend()&&this.music.resume(),this.sound.isSuspend()&&this.sound.resume(),this.music.isSuspend()&&this.sound.isSuspend()||(window.document.removeEventListener("mousedown",this.resume.bind(this),!0),window.document.removeEventListener("touchstart",this.resume.bind(this),!0),clearInterval(this.resumeId),this.resumeId=-1))}changeVisibility(){n.isShowAD||("hidden"===document.visibilityState?(this.muted||(this.hiddenMuted=this.muted=!0),"undefined"!=typeof Laya&&E_aotuPauseTimerOnVisibilityChange&&(Y.pause(),Laya.stage.renderingEnabled=!1,Laya.updateTimer&&Laya.updateTimer.pause(),Laya.physicsTimer&&Laya.physicsTimer.pause())):"visible"===document.visibilityState&&(this.hiddenMuted&&(this.hiddenMuted=this.muted=!1),"undefined"!=typeof Laya&&E_aotuPauseTimerOnVisibilityChange&&(Y.resume(),Laya.stage.renderingEnabled=!0,Laya.updateTimer&&Laya.updateTimer.resume(),Laya.physicsTimer&&Laya.physicsTimer.resume())))}get pause(){return n.pause}set pause(e){this.pauseMusic=e,this.pauseSound=e,n.pause=e}get pauseMusic(){return this.music.isSuspend()}set pauseMusic(e){this.music.pause=e,e?this.music.suspend():this.muted||this.music.resume()}get pauseSound(){return this.sound.isSuspend()}set pauseSound(e){this.sound.pause=e,e?this.sound.suspend():this.muted||this.sound.resume()}set muted(e){this._muted=e,this._muted?(this.music.suspend(),this.sound.suspend()):-1===this.resumeId&&(this.resumeId=window.setInterval(this.resume.bind(this),200))}get muted(){return this._muted}playMusic(e){n.pause||this.music.play(e)}stopMusic(){this.music.stopAll()}playSound(e){n.pause||this.sound.play(e)}stopSound(){this.sound.stopAll()}},r=(o="YYGGames:",(...e)=>console.log(`${o}: `,...e)),L=()=>{},P=o=>new Promise((e=>setTimeout(e,o))),m=class{constructor(){this.forgames=[],this.version="1.0.8",this.isStartuped=!1,this.adPlatformType=3,this._emitter=new d.Emitter,this.canNavigate=!1,this.events={adBreakDone:"adBreakDone",adDismissed:"adDismissed",adViewed:"adViewed",afterShowAd:"afterShowAd",beforeShowAd:"beforeShowAd"},this.tid=-1,this.icon={scale:L},this.gameBox={game1:{},game2:{},scale:L,setBannerSize(e,t){},pos(e,t){}},this.gameBanner={setBannerSize(e,t){},pos(e,t){},games:{},bg:{}},this.audio=new _,this.audioEngine=this.audio,this._debug=!1,this.navigateParam={}}static create(){return new m}static showTips(e){d.showToast({message:e})}get inited(){return this.isStartuped}$(){console.log("YYGGames: $() traceVersion")}on(e,t,s){u.on(e,t,s)}__init__(e,t){u.__init__(e,t)}init(e,t){let s={};return"string"==typeof e?(s.appName=e,s.complete=t):s=e,this.startup(s)}startupByYad(e){return e.channel=0,this.startup(e)}startupByCargames(e){return e.channel=4,this.startup(e)}startupByBestGames(e){return e.channel=3,this.startup(e)}startupByBabyGames(e){return e.channel=2,this.startup(e)}startupByYiv(e){return e.channel=1,this.startup(e)}async getForgames(e){return r("getForgames: ",e),this.forgames=[],this.forgames}canShowForgames(){return r("canShowForgames"),!1}async startup(e){if(r("startup",e),this.isStartuped)return;window.xyxDisableAutoReadyEvent||v.triggerEvent(v.GameEvent.Ready);let t=e.channel,s=e.appName;!s&&e.config&&(s=e.config.appName),this.appName=s,!e.debugOpen&&e.config&&(e.debugOpen=e.config.debugOpen),e.debugOpen&&this.debugOpen(),this.audioEngine.init();let a=this;return this.audioEngine.enabled&&"undefined"!=typeof Laya&&(Laya.SoundManager.playMusic=(i,D,w,c)=>(a.audioEngine.playMusic(i),null),Laya.SoundManager.stopMusic=()=>{a.audioEngine.stopMusic()},Laya.SoundManager.playSound=function(i,D,w,c,T){return a.audioEngine.playSound(i),null},Laya.SoundManager.stopSound=function(){a.audioEngine.stopSound()}),await this.getForgames(t),e.complete&&(e.complete(),e.complete=null),this.isStartuped=!0,await this._emitter.emit("onStartup"),!0}_setAdPlatformType(e){this.adPlatformType=e}getAdPlatformType(){return r("getAdPlatformType"),this.adPlatformType}getDebugOpen(){return this._debug}debugOpen(){this._debug=!0}checkVersion(){return r("checkVersion"),"2.0.0"}async showInterstitial(e,t){r("showInterstitial");let s={};"function"==typeof e?s.afterShowAd=e:"function"==typeof t?s.afterShowAd=t:(s.beforeShowAd=e.beforeShowAd,s.afterShowAd=e.afterShowAd),await P(0),n.isShowAD=!0,await this._emitter.emit("beforeShowAd"),s.beforeShowAd&&s.beforeShowAd(""),s.beforeShowAd=null;let a=this;return new Promise((i=>{if(window.xyxNeedOriginInterstitialAdLogic){if(!window.adInterstitial)throw new Error("Please set window.adInterstitial");window.adInterstitial.show({onComplete(){n.isShowAD=!1,a._emitter.emit("afterShowAd"),s.afterShowAd&&s.afterShowAd(""),s.afterShowAd=null,i()}})}else setTimeout((()=>{n.isShowAD=!1,a._emitter.emit("afterShowAd"),s.afterShowAd&&s.afterShowAd(""),s.afterShowAd=null,i()}),300)}))}async showReward(e,t,s,a){r("showReward");let i={};"function"==typeof e?(i.rewardComplete=e,i.rewardDismissed=t,i.afterShowAd=s):"function"==typeof t?(i.rewardComplete=t,i.rewardDismissed=s,i.afterShowAd=a):(i.beforeShowAd=e.beforeShowAd,i.rewardComplete=e.rewardComplete,i.rewardDismissed=e.rewardDismissed,i.afterShowAd=e.afterShowAd),await P(0),n.isShowAD=!0,await this._emitter.emit("beforeShowAd"),i.beforeShowAd&&i.beforeShowAd(""),i.beforeShowAd=null,this.audio.pauseSound=!0,this.audio.pauseMusic=!0;let D=this;return new Promise((w=>{window.adRewardedVideo.show({onClose:c=>{c===d.ADState.Play_Auto_Finish?(i.rewardComplete&&i.rewardComplete(""),i.rewardComplete=null):c===d.ADState.Play_User_Finish?(d.showToast({message:d.getLocaleContent("AdSkipped")}),i.rewardDismissed&&i.rewardDismissed(""),i.rewardDismissed=null):(d.showToast({message:d.getLocaleContent("AdError")}),i.rewardDismissed&&i.rewardDismissed(""),i.rewardDismissed=null),i.afterShowAd&&i.afterShowAd(""),i.afterShowAd=null,w()},onFail:()=>{d.showToast({message:d.getLocaleContent("AdError")}),i.rewardDismissed&&i.rewardDismissed(""),i.rewardDismissed=null,i.afterShowAd&&i.afterShowAd(""),i.afterShowAd=null,w()},onComplete:()=>{D._emitter.emit("afterShowAd"),this.audio.pauseSound=!1,this.audio.pauseMusic=!1,n.isShowAD=!1}})}))}canShowReward(){return!0}get rewardReady(){return this.canShowReward()}showSplash(e){r("showSplash",e)}hideSplash(){r("hideSplash")}showBanner(e){r("showBanner",e)}hideBanner(){r("hideBanner")}navigate(e,t,s){r("navigate: ",e,t,s)}onNavigate(){r("onNavigate")}onStartup(e){this.inited?e():this._emitter.on("onStartup",e)}onBeforeShowAd(e){this._emitter.on("beforeShowAd",e)}onAfterShowAd(e){this._emitter.on("afterShowAd",e)}getSystemInfoSync(){return{windowHeight:window.innerHeight,windowWidth:window.innerWidth}}setLoadingProgress(e){r("setLoadingProgress: ",e)}showLoading(){r("showLoading")}hideLoading(){r("hideLoading")}reportAnalytics(){r("reportAnalytics")}vibrate(){r("vibrate")}checkin(){r("checkin")}track(e,t){r("track: ",e,t)}showTip(e,t){r("showTip: ",e,t)}async loadConfig(){return new Promise(((e,t)=>{var s=new XMLHttpRequest;s.open("GET","cnf.json",!0),s.onload=function(){if(200!==s.status&&0!==s.status)throw"no response";try{e(JSON.parse(s.responseText))}catch(a){e({})}},s.onerror=function(){throw e({}),"no response"},s.ontimeout=function(){e({})},s.onabort=function(){e({})},s.send(null)}))}addEventListener(e,t,...s){r("addEventListener: ",e,t,s),this._emitter.on(e,t)}},h=class{};h.pause=!1,h.isShowAd=!1,h.isDebug=!1,h.websiteAddress="",h.tags=[];var I=class{static getInstance(){return this.instance||(this.instance=new this),this.instance}};window.YYG=y,window.YYGSDK=u,window.YYGGames=m.create(),window._YYGGames=window.YYGGames,window.AdPlatformType=g,window.ytag=class extends I{constructor(){super(),this.appName="",this.fns=new Map,this.inited=!1}async init(t,s){return this.inited||(this.appName="string"==typeof t?t:t.appName,this.inited=!0,window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){window.dataLayer.push(arguments)},this.register("game_tag",(()=>h.tags)),this.register("button_name",(()=>"")),this.register("custom_source",(()=>"othersite")),s&&s()),!0}register(t,s){this.fns.set(t,s)}event(t,s){console.log("YTag event",t,s)}}.getInstance()})()}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},699:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ZipFileServer:()=>fi});var K=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],sn=1440,bi=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],pi=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],mi=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],xi=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Ti=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],wi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],J=15;function ot(){let t,e,i,r,s,a;function f(E,d,b,p,O,y,l,o,c,u,h){let x,S,R,A,w,g,m,T,I,D,F,P,N,M,L;D=0,w=b;do{i[E[d+D]]++,D++,w--}while(0!==w);if(i[0]==b)return l[0]=-1,o[0]=0,0;for(T=o[0],g=1;g<=J&&0===i[g];g++);for(m=g,T<g&&(T=g),w=J;0!==w&&0===i[w];w--);for(R=w,T>w&&(T=w),o[0]=T,M=1<<g;g<w;g++,M<<=1)if((M-=i[g])<0)return-3;if((M-=i[w])<0)return-3;for(i[w]+=M,a[1]=g=0,D=1,N=2;0!=--w;)a[N]=g+=i[D],N++,D++;w=0,D=0;do{0!==(g=E[d+D])&&(h[a[g]++]=w),D++}while(++w<b);for(b=a[R],a[0]=w=0,D=0,A=-1,P=-T,s[0]=0,F=0,L=0;m<=R;m++)for(x=i[m];0!=x--;){for(;m>P+T;){if(A++,P+=T,L=R-P,L=L>T?T:L,(S=1<<(g=m-P))>x+1&&(S-=x+1,N=m,g<L))for(;++g<L&&!((S<<=1)<=i[++N]);)S-=i[N];if(L=1<<g,u[0]+L>sn)return-3;s[A]=F=u[0],u[0]+=L,0!==A?(a[A]=w,r[0]=g,r[1]=T,g=w>>>P-T,r[2]=F-s[A-1]-g,c.set(r,3*(s[A-1]+g))):l[0]=F}for(r[1]=m-P,D>=b?r[0]=192:h[D]<p?(r[0]=h[D]<256?0:96,r[2]=h[D++]):(r[0]=y[h[D]-p]+16+64,r[2]=O[h[D++]-p]),S=1<<m-P,g=w>>>P;g<L;g+=S)c.set(r,3*(F+g));for(g=1<<m-1;w&g;g>>>=1)w^=g;for(w^=g,I=(1<<P)-1;(w&I)!=a[A];)A--,P-=T,I=(1<<P)-1}return 0!==M&&1!=R?-5:0}function _(E){let d;for(t||(t=[],e=[],i=new Int32Array(J+1),r=[],s=new Int32Array(J),a=new Int32Array(J+1)),e.length<E&&(e=[]),d=0;d<E;d++)e[d]=0;for(d=0;d<J+1;d++)i[d]=0;for(d=0;d<3;d++)r[d]=0;s.set(i.subarray(0,J),0),a.set(i.subarray(0,J+1),0)}this.inflate_trees_bits=function(E,d,b,p,O){let y;return _(19),t[0]=0,y=f(E,0,19,19,null,null,b,d,p,t,e),-3==y?O.msg="oversubscribed dynamic bit lengths tree":(-5==y||0===d[0])&&(O.msg="incomplete dynamic bit lengths tree",y=-3),y},this.inflate_trees_dynamic=function(E,d,b,p,O,y,l,o,c){let u;return _(288),t[0]=0,u=f(b,0,E,257,mi,xi,y,p,o,t,e),0!=u||0===p[0]?(-3==u?c.msg="oversubscribed literal/length tree":-4!=u&&(c.msg="incomplete literal/length tree",u=-3),u):(_(288),u=f(b,E,d,0,Ti,wi,l,O,o,t,e),0!=u||0===O[0]&&E>257?(-3==u?c.msg="oversubscribed distance tree":-5==u?(c.msg="incomplete distance tree",u=-3):-4!=u&&(c.msg="empty distance tree with lengths",u=-3),u):0)}}ot.inflate_trees_fixed=function(n,t,e,i){return n[0]=9,t[0]=5,e[0]=bi,i[0]=pi,0};var Ce=0,Zt=1,Ht=2,Bt=3,Wt=4,Gt=5,Kt=6,rt=7,Yt=8,Pe=9;function Ai(){let t,i,b,O,n=this,e=0,r=0,s=0,a=0,f=0,_=0,E=0,d=0,p=0,y=0;function l(o,c,u,h,x,S,R,A){let w,g,m,T,I,D,F,P,N,M,L,be,C,se,U,k;F=A.next_in_index,P=A.avail_in,I=R.bitb,D=R.bitk,N=R.write,M=N<R.read?R.read-N-1:R.end-N,L=K[o],be=K[c];do{for(;D<20;)P--,I|=(255&A.read_byte(F++))<<D,D+=8;if(w=I&L,g=u,m=h,k=3*(m+w),0!==(T=g[k]))for(;;){if(I>>=g[k+1],D-=g[k+1],16&T){for(T&=15,C=g[k+2]+(I&K[T]),I>>=T,D-=T;D<15;)P--,I|=(255&A.read_byte(F++))<<D,D+=8;for(w=I&be,g=x,m=S,k=3*(m+w),T=g[k];;){if(I>>=g[k+1],D-=g[k+1],16&T){for(T&=15;D<T;)P--,I|=(255&A.read_byte(F++))<<D,D+=8;if(se=g[k+2]+(I&K[T]),I>>=T,D-=T,M-=C,N>=se)U=N-se,N-U>0&&2>N-U?(R.win[N++]=R.win[U++],R.win[N++]=R.win[U++],C-=2):(R.win.set(R.win.subarray(U,U+2),N),N+=2,U+=2,C-=2);else{U=N-se;do{U+=R.end}while(U<0);if(T=R.end-U,C>T){if(C-=T,N-U>0&&T>N-U)do{R.win[N++]=R.win[U++]}while(0!=--T);else R.win.set(R.win.subarray(U,U+T),N),N+=T,U+=T,T=0;U=0}}if(N-U>0&&C>N-U)do{R.win[N++]=R.win[U++]}while(0!=--C);else R.win.set(R.win.subarray(U,U+C),N),N+=C,U+=C,C=0;break}if(64&T)return A.msg="invalid distance code",C=A.avail_in-P,C=D>>3<C?D>>3:C,P+=C,F-=C,D-=C<<3,R.bitb=I,R.bitk=D,A.avail_in=P,A.total_in+=F-A.next_in_index,A.next_in_index=F,R.write=N,-3;w+=g[k+2],w+=I&K[T],k=3*(m+w),T=g[k]}break}if(64&T)return 32&T?(C=A.avail_in-P,C=D>>3<C?D>>3:C,P+=C,F-=C,D-=C<<3,R.bitb=I,R.bitk=D,A.avail_in=P,A.total_in+=F-A.next_in_index,A.next_in_index=F,R.write=N,1):(A.msg="invalid literal/length code",C=A.avail_in-P,C=D>>3<C?D>>3:C,P+=C,F-=C,D-=C<<3,R.bitb=I,R.bitk=D,A.avail_in=P,A.total_in+=F-A.next_in_index,A.next_in_index=F,R.write=N,-3);if(w+=g[k+2],w+=I&K[T],k=3*(m+w),0===(T=g[k])){I>>=g[k+1],D-=g[k+1],R.win[N++]=g[k+2],M--;break}}else I>>=g[k+1],D-=g[k+1],R.win[N++]=g[k+2],M--}while(M>=258&&P>=10);return C=A.avail_in-P,C=D>>3<C?D>>3:C,P+=C,F-=C,D-=C<<3,R.bitb=I,R.bitk=D,A.avail_in=P,A.total_in+=F-A.next_in_index,A.next_in_index=F,R.write=N,0}n.init=function(o,c,u,h,x,S){t=Ce,E=o,d=c,b=u,p=h,O=x,y=S,i=null},n.proc=function(o,c,u){let h,x,S,g,m,T,I,R=0,A=0,w=0;for(w=c.next_in_index,g=c.avail_in,R=o.bitb,A=o.bitk,m=o.write,T=m<o.read?o.read-m-1:o.end-m;;)switch(t){case Ce:if(T>=258&&g>=10&&(o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,u=l(E,d,b,p,O,y,o,c),w=c.next_in_index,g=c.avail_in,R=o.bitb,A=o.bitk,m=o.write,T=m<o.read?o.read-m-1:o.end-m,0!=u)){t=1==u?rt:Pe;break}s=E,i=b,r=p,t=Zt;case Zt:for(h=s;A<h;){if(0===g)return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);u=0,g--,R|=(255&c.read_byte(w++))<<A,A+=8}if(x=3*(r+(R&K[h])),R>>>=i[x+1],A-=i[x+1],S=i[x],0===S){a=i[x+2],t=Kt;break}if(16&S){f=15&S,e=i[x+2],t=Ht;break}if(!(64&S)){s=S,r=x/3+i[x+2];break}if(32&S){t=rt;break}return t=Pe,c.msg="invalid literal/length code",u=-3,o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);case Ht:for(h=f;A<h;){if(0===g)return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);u=0,g--,R|=(255&c.read_byte(w++))<<A,A+=8}e+=R&K[h],R>>=h,A-=h,s=d,i=O,r=y,t=Bt;case Bt:for(h=s;A<h;){if(0===g)return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);u=0,g--,R|=(255&c.read_byte(w++))<<A,A+=8}if(x=3*(r+(R&K[h])),R>>=i[x+1],A-=i[x+1],S=i[x],16&S){f=15&S,_=i[x+2],t=Wt;break}if(!(64&S)){s=S,r=x/3+i[x+2];break}return t=Pe,c.msg="invalid distance code",u=-3,o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);case Wt:for(h=f;A<h;){if(0===g)return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);u=0,g--,R|=(255&c.read_byte(w++))<<A,A+=8}_+=R&K[h],R>>=h,A-=h,t=Gt;case Gt:for(I=m-_;I<0;)I+=o.end;for(;0!==e;){if(0===T&&(m==o.end&&0!==o.read&&(m=0,T=m<o.read?o.read-m-1:o.end-m),0===T&&(o.write=m,u=o.inflate_flush(c,u),m=o.write,T=m<o.read?o.read-m-1:o.end-m,m==o.end&&0!==o.read&&(m=0,T=m<o.read?o.read-m-1:o.end-m),0===T)))return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);o.win[m++]=o.win[I++],T--,I==o.end&&(I=0),e--}t=Ce;break;case Kt:if(0===T&&(m==o.end&&0!==o.read&&(m=0,T=m<o.read?o.read-m-1:o.end-m),0===T&&(o.write=m,u=o.inflate_flush(c,u),m=o.write,T=m<o.read?o.read-m-1:o.end-m,m==o.end&&0!==o.read&&(m=0,T=m<o.read?o.read-m-1:o.end-m),0===T)))return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);u=0,o.win[m++]=a,T--,t=Ce;break;case rt:if(A>7&&(A-=8,g++,w--),o.write=m,u=o.inflate_flush(c,u),m=o.write,T=m<o.read?o.read-m-1:o.end-m,o.read!=o.write)return o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);t=Yt;case Yt:return u=1,o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);case Pe:return u=-3,o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u);default:return u=-2,o.bitb=R,o.bitk=A,c.avail_in=g,c.total_in+=w-c.next_in_index,c.next_in_index=w,o.write=m,o.inflate_flush(c,u)}},n.free=function(){}}var Vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=0,st=1,jt=2,Xt=3,qt=4,$t=5,Fe=6,Le=7,Jt=8,ae=9;function gi(n,t){let f,e=this,i=fe,r=0,s=0,a=0,_=[0],E=[0],d=new Ai,b=0,p=new Int32Array(3*sn),y=new ot;e.bitk=0,e.bitb=0,e.win=new Uint8Array(t),e.end=t,e.read=0,e.write=0,e.reset=function(l,o){o&&(o[0]=0),i==Fe&&d.free(l),i=fe,e.bitk=0,e.bitb=0,e.read=e.write=0},e.reset(n,null),e.inflate_flush=function(l,o){let c,u,h;return u=l.next_out_index,h=e.read,c=(h<=e.write?e.write:e.end)-h,c>l.avail_out&&(c=l.avail_out),0!==c&&-5==o&&(o=0),l.avail_out-=c,l.total_out+=c,l.next_out.set(e.win.subarray(h,h+c),u),u+=c,h+=c,h==e.end&&(h=0,e.write==e.end&&(e.write=0),c=e.write-h,c>l.avail_out&&(c=l.avail_out),0!==c&&-5==o&&(o=0),l.avail_out-=c,l.total_out+=c,l.next_out.set(e.win.subarray(h,h+c),u),u+=c,h+=c),l.next_out_index=u,e.read=h,o},e.proc=function(l,o){let c,u,h,x,S,R,A,w;for(x=l.next_in_index,S=l.avail_in,u=e.bitb,h=e.bitk,R=e.write,A=R<e.read?e.read-R-1:e.end-R;;){let g,m,T,I,D,F,P,N;switch(i){case fe:for(;h<3;){if(0===S)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);o=0,S--,u|=(255&l.read_byte(x++))<<h,h+=8}switch(c=7&u,b=1&c,c>>>1){case 0:u>>>=3,h-=3,c=7&h,u>>>=c,h-=c,i=st;break;case 1:g=[],m=[],T=[[]],I=[[]],ot.inflate_trees_fixed(g,m,T,I),d.init(g[0],m[0],T[0],0,I[0],0),u>>>=3,h-=3,i=Fe;break;case 2:u>>>=3,h-=3,i=Xt;break;case 3:return u>>>=3,h-=3,i=ae,l.msg="invalid block type",o=-3,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o)}break;case st:for(;h<32;){if(0===S)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);o=0,S--,u|=(255&l.read_byte(x++))<<h,h+=8}if((~u>>>16&65535)!=(65535&u))return i=ae,l.msg="invalid stored block lengths",o=-3,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);r=65535&u,u=h=0,i=0!==r?jt:0!==b?Le:fe;break;case jt:if(0===S||0===A&&(R==e.end&&0!==e.read&&(R=0,A=R<e.read?e.read-R-1:e.end-R),0===A&&(e.write=R,o=e.inflate_flush(l,o),R=e.write,A=R<e.read?e.read-R-1:e.end-R,R==e.end&&0!==e.read&&(R=0,A=R<e.read?e.read-R-1:e.end-R),0===A)))return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);if(o=0,c=r,c>S&&(c=S),c>A&&(c=A),e.win.set(l.read_buf(x,c),R),x+=c,S-=c,R+=c,A-=c,0!=(r-=c))break;i=0!==b?Le:fe;break;case Xt:for(;h<14;){if(0===S)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);o=0,S--,u|=(255&l.read_byte(x++))<<h,h+=8}if(s=c=16383&u,(31&c)>29||(c>>5&31)>29)return i=ae,l.msg="too many length or distance symbols",o=-3,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);if(c=258+(31&c)+(c>>5&31),!f||f.length<c)f=[];else for(w=0;w<c;w++)f[w]=0;u>>>=14,h-=14,a=0,i=qt;case qt:for(;a<4+(s>>>10);){for(;h<3;){if(0===S)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);o=0,S--,u|=(255&l.read_byte(x++))<<h,h+=8}f[Vt[a++]]=7&u,u>>>=3,h-=3}for(;a<19;)f[Vt[a++]]=0;if(_[0]=7,c=y.inflate_trees_bits(f,_,E,p,l),0!=c)return-3==(o=c)&&(f=null,i=ae),e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);a=0,i=$t;case $t:for(;c=s,!(a>=258+(31&c)+(c>>5&31));){let M,L;for(c=_[0];h<c;){if(0===S)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);o=0,S--,u|=(255&l.read_byte(x++))<<h,h+=8}if(c=p[3*(E[0]+(u&K[c]))+1],L=p[3*(E[0]+(u&K[c]))+2],L<16)u>>>=c,h-=c,f[a++]=L;else{for(w=18==L?7:L-14,M=18==L?11:3;h<c+w;){if(0===S)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);o=0,S--,u|=(255&l.read_byte(x++))<<h,h+=8}if(u>>>=c,h-=c,M+=u&K[w],u>>>=w,h-=w,w=a,c=s,w+M>258+(31&c)+(c>>5&31)||16==L&&w<1)return f=null,i=ae,l.msg="invalid bit length repeat",o=-3,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);L=16==L?f[w-1]:0;do{f[w++]=L}while(0!=--M);a=w}}if(E[0]=-1,D=[],F=[],P=[],N=[],D[0]=9,F[0]=6,c=s,c=y.inflate_trees_dynamic(257+(31&c),1+(c>>5&31),f,D,F,P,N,p,l),0!=c)return-3==c&&(f=null,i=ae),o=c,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);d.init(D[0],F[0],p,P[0],p,N[0]),i=Fe;case Fe:if(e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,1!=(o=d.proc(e,l,o)))return e.inflate_flush(l,o);if(o=0,d.free(l),x=l.next_in_index,S=l.avail_in,u=e.bitb,h=e.bitk,R=e.write,A=R<e.read?e.read-R-1:e.end-R,0===b){i=fe;break}i=Le;case Le:if(e.write=R,o=e.inflate_flush(l,o),R=e.write,A=R<e.read?e.read-R-1:e.end-R,e.read!=e.write)return e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);i=Jt;case Jt:return o=1,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);case ae:return o=-3,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o);default:return o=-2,e.bitb=u,e.bitk=h,l.avail_in=S,l.total_in+=x-l.next_in_index,l.next_in_index=x,e.write=R,e.inflate_flush(l,o)}}},e.free=function(l){e.reset(l,null),e.win=null,p=null},e.set_dictionary=function(l,o,c){e.win.set(l.subarray(o,o+c),0),e.read=e.write=c},e.sync_point=function(){return i==st?1:0}}var Q=13,Di=[0,0,255,255];function Ni(){let n=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):-2}n.mode=0,n.method=0,n.was=[0],n.need=0,n.marker=0,n.wbits=0,n.inflateEnd=function(e){return n.blocks&&n.blocks.free(e),n.blocks=null,0},n.inflateInit=function(e,i){return e.msg=null,n.blocks=null,i<8||i>15?(n.inflateEnd(e),-2):(n.wbits=i,e.istate.blocks=new gi(e,1<<i),t(e),0)},n.inflate=function(e,i){let r,s;if(!e||!e.istate||!e.next_in)return-2;let a=e.istate;for(i=4==i?-5:0,r=-5;;)switch(a.mode){case 0:if(0===e.avail_in)return r;if(r=i,e.avail_in--,e.total_in++,8!=(15&(a.method=e.read_byte(e.next_in_index++)))){a.mode=Q,e.msg="unknown compression method",a.marker=5;break}if(8+(a.method>>4)>a.wbits){a.mode=Q,e.msg="invalid win size",a.marker=5;break}a.mode=1;case 1:if(0===e.avail_in)return r;if(r=i,e.avail_in--,e.total_in++,s=255&e.read_byte(e.next_in_index++),((a.method<<8)+s)%31!=0){a.mode=Q,e.msg="incorrect header check",a.marker=5;break}if(!(32&s)){a.mode=7;break}a.mode=2;case 2:if(0===e.avail_in)return r;r=i,e.avail_in--,e.total_in++,a.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,a.mode=3;case 3:if(0===e.avail_in)return r;r=i,e.avail_in--,e.total_in++,a.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,a.mode=4;case 4:if(0===e.avail_in)return r;r=i,e.avail_in--,e.total_in++,a.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,a.mode=5;case 5:return 0===e.avail_in?r:(r=i,e.avail_in--,e.total_in++,a.need+=255&e.read_byte(e.next_in_index++),a.mode=6,2);case 6:return a.mode=Q,e.msg="need dictionary",a.marker=0,-2;case 7:if(r=a.blocks.proc(e,r),-3==r){a.mode=Q,a.marker=0;break}if(0==r&&(r=i),1!=r)return r;r=i,a.blocks.reset(e,a.was),a.mode=12;case 12:return e.avail_in=0,1;case Q:return-3;default:return-2}},n.inflateSetDictionary=function(e,i,r){let s=0,a=r;if(!e||!e.istate||6!=e.istate.mode)return-2;let f=e.istate;return a>=1<<f.wbits&&(a=(1<<f.wbits)-1,s=r-a),f.blocks.set_dictionary(i,s,a),f.mode=7,0},n.inflateSync=function(e){let i,r,s,a,f;if(!e||!e.istate)return-2;let _=e.istate;if(_.mode!=Q&&(_.mode=Q,_.marker=0),0===(i=e.avail_in))return-5;for(r=e.next_in_index,s=_.marker;0!==i&&s<4;)e.read_byte(r)==Di[s]?s++:s=0!==e.read_byte(r)?0:4-s,r++,i--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=i,_.marker=s,4!=s?-3:(a=e.total_in,f=e.total_out,t(e),e.total_in=a,e.total_out=f,_.mode=7,0)},n.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():-2}}function an(){}an.prototype={inflateInit(n){let t=this;return t.istate=new Ni,n||(n=15),t.istate.inflateInit(t,n)},inflate(n){let t=this;return t.istate?t.istate.inflate(t,n):-2},inflateEnd(){let n=this;if(!n.istate)return-2;let t=n.istate.inflateEnd(n);return n.istate=null,t},inflateSync(){let n=this;return n.istate?n.istate.inflateSync(n):-2},inflateSetDictionary(n,t){let e=this;return e.istate?e.istate.inflateSetDictionary(e,n,t):-2},read_byte(n){return this.next_in[n]},read_buf(n,t){return this.next_in.subarray(n,n+t)}};new Date(2107,11,31),new Date(1980,0,1);var W=void 0,_e="undefined",Ue="function",me=class{constructor(t){return class extends TransformStream{constructor(e,i){let r=new t(i);super({transform(s,a){a.enqueue(r.append(s))},flush(s){let a=r.flush();a&&s.enqueue(a)}})}}}},ln=2;try{typeof navigator!=_e&&navigator.hardwareConcurrency&&(ln=navigator.hardwareConcurrency)}catch(n){}var Ci={chunkSize:524288,maxWorkers:ln,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:W,CompressionStreamNative:typeof CompressionStream!=_e&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=_e&&DecompressionStream},ee=Object.assign({},Ci);function Me(n){let{baseURL:t,chunkSize:e,maxWorkers:i,terminateWorkerTimeout:r,useCompressionStream:s,useWebWorkers:a,Deflate:f,Inflate:_,CompressionStream:E,DecompressionStream:d,workerScripts:b}=n;if(z("baseURL",t),z("chunkSize",e),z("maxWorkers",i),z("terminateWorkerTimeout",r),z("useCompressionStream",s),z("useWebWorkers",a),f&&(ee.CompressionStream=new me(f)),_&&(ee.DecompressionStream=new me(_)),z("CompressionStream",E),z("DecompressionStream",d),b!==W){let{deflate:p,inflate:O}=b;if((p||O)&&(ee.workerScripts||(ee.workerScripts={})),p){if(!Array.isArray(p))throw new Error("workerScripts.deflate must be an array");ee.workerScripts.deflate=p}if(O){if(!Array.isArray(O))throw new Error("workerScripts.inflate must be an array");ee.workerScripts.inflate=O}}}function z(n,t){t!==W&&(ee[n]=t)}var _n=[];for(let n=0;n<256;n++){let t=n;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;_n[n]=t}var q=class{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let i=0,r=0|t.length;i<r;i++)e=e>>>8^_n[255&(e^t[i])];this.crc=e}get(){return~this.crc}},xe=class extends TransformStream{constructor(){let t,e=new q;super({transform(i,r){e.append(i),r.enqueue(i)},flush(){let i=new Uint8Array(4);new DataView(i.buffer).setUint32(0,e.get()),t.value=i}}),t=this}};var G={concat(n,t){if(0===n.length||0===t.length)return n.concat(t);let e=n[n.length-1],i=G.getPartial(e);return 32===i?n.concat(t):G._shiftRight(t,i,0|e,n.slice(0,n.length-1))},bitLength(n){let t=n.length;if(0===t)return 0;let e=n[t-1];return 32*(t-1)+G.getPartial(e)},clamp(n,t){if(32*n.length<t)return n;let e=(n=n.slice(0,Math.ceil(t/32))).length;return t&=31,e>0&&t&&(n[e-1]=G.partial(t,n[e-1]&2147483648>>t-1,1)),n},partial:(n,t,e)=>32===n?t:(e?0|t:t<<32-n)+1099511627776*n,getPartial:n=>Math.round(n/1099511627776)||32,_shiftRight(n,t,e,i){for(void 0===i&&(i=[]);t>=32;t-=32)i.push(e),e=0;if(0===t)return i.concat(n);for(let a=0;a<n.length;a++)i.push(e|n[a]>>>t),e=n[a]<<32-t;let r=n.length?n[n.length-1]:0,s=G.getPartial(r);return i.push(G.partial(t+s&31,t+s>32?e:i.pop(),1)),i}},Te={bytes:{fromBits(n){let r,e=G.bitLength(n)/8,i=new Uint8Array(e);for(let s=0;s<e;s++)3&s||(r=n[s/4]),i[s]=r>>>24,r<<=8;return i},toBits(n){let e,t=[],i=0;for(e=0;e<n.length;e++)i=i<<8|n[e],3==(3&e)&&(t.push(i),i=0);return 3&e&&t.push(G.partial(8*(3&e),i)),t}}},dn={sha1:class{constructor(n){let t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],n?(t._h=n._h.slice(0),t._buffer=n._buffer.slice(0),t._length=n._length):t.reset()}reset(){let n=this;return n._h=n._init.slice(0),n._buffer=[],n._length=0,n}update(n){let t=this;"string"==typeof n&&(n=Te.utf8String.toBits(n));let e=t._buffer=G.concat(t._buffer,n),i=t._length,r=t._length=i+G.bitLength(n);if(r>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");let s=new Uint32Array(e),a=0;for(let f=t.blockSize+i-(t.blockSize+i&t.blockSize-1);f<=r;f+=t.blockSize)t._block(s.subarray(16*a,16*(a+1))),a+=1;return e.splice(0,16*a),t}finalize(){let n=this,t=n._buffer,e=n._h;t=G.concat(t,[G.partial(1,1)]);for(let i=t.length+2;15&i;i++)t.push(0);for(t.push(Math.floor(n._length/4294967296)),t.push(0|n._length);t.length;)n._block(t.splice(0,16));return n.reset(),e}_f(n,t,e,i){return n<=19?t&e|~t&i:n<=39?t^e^i:n<=59?t&e|t&i|e&i:n<=79?t^e^i:void 0}_S(n,t){return t<<n|t>>>32-n}_block(n){let t=this,e=t._h,i=Array(80);for(let E=0;E<16;E++)i[E]=n[E];let r=e[0],s=e[1],a=e[2],f=e[3],_=e[4];for(let E=0;E<=79;E++){E>=16&&(i[E]=t._S(1,i[E-3]^i[E-8]^i[E-14]^i[E-16]));let d=t._S(5,r)+t._f(E,s,a,f)+_+i[E]+t._key[Math.floor(E/20)]|0;_=f,f=a,a=t._S(30,s),s=r,r=d}e[0]=e[0]+r|0,e[1]=e[1]+s|0,e[2]=e[2]+a|0,e[3]=e[3]+f|0,e[4]=e[4]+_|0}}},lt={aes:class{constructor(n){let t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();let s,a,f,e=t._tables[0][4],i=t._tables[1],r=n.length,_=1;if(4!==r&&6!==r&&8!==r)throw new Error("invalid aes key size");for(t._key=[a=n.slice(0),f=[]],s=r;s<4*r+28;s++){let E=a[s-1];(s%r==0||8===r&&s%r==4)&&(E=e[E>>>24]<<24^e[E>>16&255]<<16^e[E>>8&255]<<8^e[255&E],s%r==0&&(E=E<<8^E>>>24^_<<24,_=_<<1^283*(_>>7))),a[s]=a[s-r]^E}for(let E=0;s;E++,s--){let d=a[3&E?s:s-4];f[E]=s<=4||E<4?d:i[0][e[d>>>24]]^i[1][e[d>>16&255]]^i[2][e[d>>8&255]]^i[3][e[255&d]]}}encrypt(n){return this._crypt(n,0)}decrypt(n){return this._crypt(n,1)}_precompute(){let a,f,_,E,n=this._tables[0],t=this._tables[1],e=n[4],i=t[4],r=[],s=[];for(let d=0;d<256;d++)s[(r[d]=d<<1^283*(d>>7))^d]=d;for(let d=a=0;!e[d];d^=f||1,a=s[a]||1){let b=a^a<<1^a<<2^a<<3^a<<4;b=b>>8^255&b^99,e[d]=b,i[b]=d,E=r[_=r[f=r[d]]];let p=16843009*E^65537*_^257*f^16843008*d,O=257*r[b]^16843008*b;for(let y=0;y<4;y++)n[y][d]=O=O<<24^O>>>8,t[y][b]=p=p<<24^p>>>8}for(let d=0;d<5;d++)n[d]=n[d].slice(0),t[d]=t[d].slice(0)}_crypt(n,t){if(4!==n.length)throw new Error("invalid aes block size");let o,c,u,e=this._key[t],i=e.length/4-2,r=[0,0,0,0],s=this._tables[t],a=s[0],f=s[1],_=s[2],E=s[3],d=s[4],b=n[0]^e[0],p=n[t?3:1]^e[1],O=n[2]^e[2],y=n[t?1:3]^e[3],l=4;for(let h=0;h<i;h++)o=a[b>>>24]^f[p>>16&255]^_[O>>8&255]^E[255&y]^e[l],c=a[p>>>24]^f[O>>16&255]^_[y>>8&255]^E[255&b]^e[l+1],u=a[O>>>24]^f[y>>16&255]^_[b>>8&255]^E[255&p]^e[l+2],y=a[y>>>24]^f[b>>16&255]^_[p>>8&255]^E[255&O]^e[l+3],l+=4,b=o,p=c,O=u;for(let h=0;h<4;h++)r[t?3&-h:h]=d[b>>>24]<<24^d[p>>16&255]<<16^d[O>>8&255]<<8^d[255&y]^e[l++],o=b,b=p,p=O,O=y,y=o;return r}}},En={getRandomValues(n){let t=new Uint32Array(n.buffer),e=i=>{let r=987654321,s=4294967295;return function(){return r=36969*(65535&r)+(r>>16)&s,(((r<<16)+(i=18e3*(65535&i)+(i>>16)&s)&s)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let r,i=0;i<n.length;i+=4){let s=e(4294967296*(r||Math.random()));r=987654071*s(),t[i/4]=4294967296*s()|0}return n}},ft={ctrGladman:class{constructor(n,t){this._prf=n,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(n){return this.calculate(this._prf,n,this._iv)}incWord(n){if(255==(n>>24&255)){let t=n>>16&255,e=n>>8&255,i=255&n;255===t?(t=0,255===e?(e=0,255===i?i=0:++i):++e):++t,n=0,n+=t<<16,n+=e<<8,n+=i}else n+=1<<24;return n}incCounter(n){0===(n[0]=this.incWord(n[0]))&&(n[1]=this.incWord(n[1]))}calculate(n,t,e){let i;if(!(i=t.length))return[];let r=G.bitLength(t);for(let s=0;s<i;s+=4){this.incCounter(e);let a=n.encrypt(e);t[s]^=a[0],t[s+1]^=a[1],t[s+2]^=a[2],t[s+3]^=a[3]}return G.clamp(t,r)}}},te={importKey:n=>new te.hmacSha1(Te.bytes.toBits(n)),pbkdf2(n,t,e,i){if(e=e||1e4,i<0||e<0)throw new Error("invalid params to pbkdf2");let s,a,f,_,E,r=1+(i>>5)<<2,d=new ArrayBuffer(r),b=new DataView(d),p=0,O=G;for(t=Te.bytes.toBits(t),E=1;p<(r||1);E++){for(s=a=n.encrypt(O.concat(t,[E])),f=1;f<e;f++)for(a=n.encrypt(a),_=0;_<a.length;_++)s[_]^=a[_];for(f=0;p<(r||1)&&f<s.length;f++)b.setInt32(p,s[f]),p+=4}return d.slice(0,i/8)},hmacSha1:class{constructor(n){let t=this,e=t._hash=dn.sha1,i=[[],[]];t._baseHash=[new e,new e];let r=t._baseHash[0].blockSize/32;n.length>r&&(n=(new e).update(n).finalize());for(let s=0;s<r;s++)i[0][s]=909522486^n[s],i[1][s]=1549556828^n[s];t._baseHash[0].update(i[0]),t._baseHash[1].update(i[1]),t._resultHash=new e(t._baseHash[0])}reset(){let n=this;n._resultHash=new n._hash(n._baseHash[0]),n._updated=!1}update(n){this._updated=!0,this._resultHash.update(n)}digest(){let n=this,t=n._resultHash.finalize(),e=new n._hash(n._baseHash[1]).update(t).finalize();return n.reset(),e}encrypt(n){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(n),this.digest(n)}}},Pi="undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues,ne="Invalid password",oe="Invalid signature",$="zipjs-abort-check-password";function ke(n){return Pi?crypto.getRandomValues(n):En.getRandomValues(n)}var Fi="raw",bn={name:"PBKDF2"},Mi=Object.assign({hash:{name:"HMAC"}},bn),_t=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},bn),ki=["deriveBits"],Ae=[8,12,16],we=[16,24,32],vi=[0,0,0,0],pn="undefined",mn="function",He=typeof crypto!=pn,ye=He&&crypto.subtle,xn=He&&typeof ye!=pn,j=Te.bytes,Zi=lt.aes,Hi=ft.ctrGladman,Bi=te.hmacSha1,Rn=He&&xn&&typeof ye.importKey==mn,hn=He&&xn&&typeof ye.deriveBits==mn,ve=class extends TransformStream{constructor({password:t,signed:e,encryptionStrength:i,checkPasswordOnly:r}){super({start(){Object.assign(this,{ready:new Promise((s=>this.resolveReady=s)),password:t,signed:e,strength:i-1,pending:new Uint8Array})},async transform(s,a){let f=this,{password:_,strength:E,resolveReady:d,ready:b}=f;_?(await async function(n,t,e,i){let r=await wn(n,t,e,Y(i,0,Ae[t])),s=Y(i,Ae[t]);if(r[0]!=s[0]||r[1]!=s[1])throw new Error(ne)}(f,E,_,Y(s,0,Ae[E]+2)),s=Y(s,Ae[E]+2),r?a.error(new Error($)):d()):await b;let p=new Uint8Array(s.length-10-(s.length-10)%16);a.enqueue(Tn(f,s,p,0,10,!0))},async flush(s){let{signed:a,ctr:f,hmac:_,pending:E,ready:d}=this;if(_&&f){await d;let b=Y(E,0,E.length-10),p=Y(E,E.length-10),O=new Uint8Array;if(b.length){let y=Oe(j,b);_.update(y);let l=f.update(y);O=ge(j,l)}if(a){let y=Y(ge(j,_.digest()),0,10);for(let l=0;l<10;l++)if(y[l]!=p[l])throw new Error(oe)}s.enqueue(O)}}})}},Ze=class extends TransformStream{constructor({password:t,encryptionStrength:e}){let i;super({start(){Object.assign(this,{ready:new Promise((r=>this.resolveReady=r)),password:t,strength:e-1,pending:new Uint8Array})},async transform(r,s){let a=this,{password:f,strength:_,resolveReady:E,ready:d}=a,b=new Uint8Array;f?(b=await async function(n,t,e){let i=ke(new Uint8Array(Ae[t])),r=await wn(n,t,e,i);return ut(i,r)}(a,_,f),E()):await d;let p=new Uint8Array(b.length+r.length-r.length%16);p.set(b,0),s.enqueue(Tn(a,r,p,b.length,0))},async flush(r){let{ctr:s,hmac:a,pending:f,ready:_}=this;if(a&&s){await _;let E=new Uint8Array;if(f.length){let d=s.update(Oe(j,f));a.update(d),E=ge(j,d)}i.signature=ge(j,a.digest()).slice(0,10),r.enqueue(ut(E,i.signature))}}}),i=this}};function Tn(n,t,e,i,r,s){let d,{ctr:a,hmac:f,pending:_}=n,E=t.length-r;for(_.length&&(t=ut(_,t),e=function(n,t){if(t&&t>n.length){let e=n;(n=new Uint8Array(t)).set(e,0)}return n}(e,E-E%16)),d=0;d<=E-16;d+=16){let b=Oe(j,Y(t,d,d+16));s&&f.update(b);let p=a.update(b);s||f.update(p),e.set(ge(j,p),d+i)}return n.pending=Y(t,d),e}async function wn(n,t,e,i){n.password=null;let r=function(n){if("undefined"==typeof TextEncoder){n=unescape(encodeURIComponent(n));let t=new Uint8Array(n.length);for(let e=0;e<t.length;e++)t[e]=n.charCodeAt(e);return t}return(new TextEncoder).encode(n)}(e),s=await async function(n,t,e,i,r){if(!Rn)return te.importKey(t);try{return await ye.importKey(n,t,e,i,r)}catch(s){return Rn=!1,te.importKey(t)}}(Fi,r,Mi,!1,ki),a=await async function(n,t,e){if(!hn)return te.pbkdf2(t,n.salt,_t.iterations,e);try{return await ye.deriveBits(n,t,e)}catch(i){return hn=!1,te.pbkdf2(t,n.salt,_t.iterations,e)}}(Object.assign({salt:i},_t),s,8*(2*we[t]+2)),f=new Uint8Array(a),_=Oe(j,Y(f,0,we[t])),E=Oe(j,Y(f,we[t],2*we[t])),d=Y(f,2*we[t]);return Object.assign(n,{keys:{key:_,authentication:E,passwordVerification:d},ctr:new Hi(new Zi(_),Array.from(vi)),hmac:new Bi(E)}),d}function ut(n,t){let e=n;return n.length+t.length&&(e=new Uint8Array(n.length+t.length),e.set(n,0),e.set(t,n.length)),e}function Y(n,t,e){return n.subarray(t,e)}function ge(n,t){return n.fromBits(t)}function Oe(n,t){return n.toBits(t)}var Be=class extends TransformStream{constructor({password:t,passwordVerification:e,checkPasswordOnly:i}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),yn(this,t)},transform(r,s){let a=this;if(a.password){let f=An(a,r.subarray(0,12));if(a.password=null,f[11]!=a.passwordVerification)throw new Error(ne);r=r.subarray(12)}i?s.error(new Error($)):s.enqueue(An(a,r))}})}},We=class extends TransformStream{constructor({password:t,passwordVerification:e}){super({start(){Object.assign(this,{password:t,passwordVerification:e}),yn(this,t)},transform(i,r){let a,f,s=this;if(s.password){s.password=null;let _=ke(new Uint8Array(12));_[11]=s.passwordVerification,a=new Uint8Array(i.length+_.length),a.set(gn(s,_),0),f=12}else a=new Uint8Array(i.length),f=0;a.set(gn(s,i),f),r.enqueue(a)}})}};function An(n,t){let e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=Sn(n)^t[i],dt(n,e[i]);return e}function gn(n,t){let e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=Sn(n)^t[i],dt(n,t[i]);return e}function yn(n,t){let e=[305419896,591751049,878082192];Object.assign(n,{keys:e,crcKey0:new q(e[0]),crcKey2:new q(e[2])});for(let i=0;i<t.length;i++)dt(n,t.charCodeAt(i))}function dt(n,t){let[e,i,r]=n.keys;n.crcKey0.append([t]),e=~n.crcKey0.get(),i=On(Math.imul(On(i+Dn(e)),134775813)+1),n.crcKey2.append([i>>>24]),r=~n.crcKey2.get(),n.keys=[e,i,r]}function Sn(n){let t=2|n.keys[2];return Dn(Math.imul(t,1^t)>>>8)}function Dn(n){return 255&n}function On(n){return 4294967295&n}var Nn="deflate-raw",Ge=class extends TransformStream{constructor(t,{chunkSize:e,CompressionStream:i,CompressionStreamNative:r}){super({});let p,O,{compressed:s,encrypted:a,useCompressionStream:f,zipCrypto:_,signed:E,level:d}=t,b=this,y=In(super.readable);(!a||_)&&E&&(p=new xe,y=X(y,p)),s&&(y=Pn(y,f,{level:d,chunkSize:e},r,i)),a&&(_?y=X(y,new We(t)):(O=new Ze(t),y=X(y,O))),Cn(b,y,(()=>{let l;a&&!_&&(l=O.signature),(!a||_)&&E&&(l=new DataView(p.value.buffer).getUint32(0)),b.signature=l}))}},Ke=class extends TransformStream{constructor(t,{chunkSize:e,DecompressionStream:i,DecompressionStreamNative:r}){super({});let b,p,{zipCrypto:s,encrypted:a,signed:f,signature:_,compressed:E,useCompressionStream:d}=t,O=In(super.readable);a&&(s?O=X(O,new Be(t)):(p=new ve(t),O=X(O,p))),E&&(O=Pn(O,d,{chunkSize:e},r,i)),(!a||s)&&f&&(b=new xe,O=X(O,b)),Cn(this,O,(()=>{if((!a||s)&&f){let y=new DataView(b.value.buffer);if(_!=y.getUint32(0,!1))throw new Error(oe)}}))}};function In(n){return X(n,new TransformStream({transform(t,e){t&&t.length&&e.enqueue(t)}}))}function Cn(n,t,e){t=X(t,new TransformStream({flush:e})),Object.defineProperty(n,"readable",{get:()=>t})}function Pn(n,t,e,i,r){try{n=X(n,new(t&&i?i:r)(Nn,e))}catch(s){if(!t)throw s;n=X(n,new r(Nn,e))}return n}function X(n,t){return n.pipeThrough(t)}var Fn="message",Ln="start",Un="pull",Et="data",Mn="ack",kn="close",Ve="inflate",Ye=class extends TransformStream{constructor(t,e){super({});let s,i=this,{codecType:r}=t;r.startsWith("deflate")?s=Ge:r.startsWith(Ve)&&(s=Ke);let a=0,f=new s(t,e),_=super.readable,E=new TransformStream({transform(d,b){d&&d.length&&(a+=d.length,b.enqueue(d))},flush(){let{signature:d}=f;Object.assign(i,{signature:d,size:a})}});Object.defineProperty(i,"readable",{get:()=>_.pipeThrough(f).pipeThrough(E)})}},ji=typeof Worker!=_e,Ee=class{constructor(t,{readable:e,writable:i},{options:r,config:s,streamOptions:a,useWebWorkers:f,transferStreams:_,scripts:E},d){let{signal:b}=a;return Object.assign(t,{busy:!0,readable:e.pipeThrough(new ht(e,a,s),{signal:b}),writable:i,options:Object.assign({},r),scripts:E,transferStreams:_,terminate(){let{worker:p,busy:O}=t;p&&!O&&(p.terminate(),t.interface=null)},onTaskFinished(){t.busy=!1,d(t)}}),(f&&ji?qi:Xi)(t,s)}},ht=class extends TransformStream{constructor(t,{onstart:e,onprogress:i,size:r,onend:s},{chunkSize:a}){let f=0;super({start(){e&&Rt(e,r)},async transform(_,E){f+=_.length,i&&await Rt(i,f,r),E.enqueue(_)},flush(){t.size=f,s&&Rt(s,f)}},{highWaterMark:1,size:()=>a})}};async function Rt(n,...t){try{await n(...t)}catch(e){}}function Xi(n,t){return{run:()=>async function({options:n,readable:t,writable:e,onTaskFinished:i},r){let s=new Ye(n,r);try{await t.pipeThrough(s).pipeTo(e,{preventClose:!0,preventAbort:!0});let{signature:a,size:f}=s;return{signature:a,size:f}}finally{i()}}(n,t)}}function qi(n,{baseURL:t,chunkSize:e}){return n.interface||Object.assign(n,{worker:zi(n.scripts[0],t,n),interface:{run:()=>async function(n,t){let e,i,r=new Promise(((p,O)=>{e=p,i=O}));Object.assign(n,{reader:null,writer:null,resolveResult:e,rejectResult:i,result:r});let{readable:s,options:a,scripts:f}=n,{writable:_,closed:E}=function(n){let e,t=n.getWriter(),i=new Promise((s=>e=s));return{writable:new WritableStream({async write(s){await t.ready,await t.write(s)},close(){t.releaseLock(),e()},abort:s=>t.abort(s)}),closed:i}}(n.writable);bt({type:Ln,scripts:f.slice(1),options:a,config:t,readable:s,writable:_},n)||Object.assign(n,{reader:s.getReader(),writer:_.getWriter()});let b=await r;try{await _.getWriter().close()}catch(p){}return await E,b}(n,{chunkSize:e})}}),n.interface}var Zn=!0,Hn=!0;function zi(n,t,e){let r,s,i={type:"module"};typeof n==Ue&&(n=n());try{r=new URL(n,t)}catch(a){r=n}if(Zn)try{s=new Worker(r)}catch(a){Zn=!1,s=new Worker(r,i)}else s=new Worker(r,i);return s.addEventListener(Fn,(a=>async function({data:n},t){let{type:e,value:i,messageId:r,result:s,error:a}=n,{reader:f,writer:_,resolveResult:E,rejectResult:d,onTaskFinished:b}=t;try{if(a){let{message:O,stack:y,code:l,name:o}=a,c=new Error(O);Object.assign(c,{stack:y,code:l,name:o}),p(c)}else{if(e==Un){let{value:O,done:y}=await f.read();bt({type:Et,value:O,done:y,messageId:r},t)}e==Et&&(await _.ready,await _.write(new Uint8Array(i)),bt({type:Mn,messageId:r},t)),e==kn&&p(null,s)}}catch(O){p(O)}function p(O,y){O?d(O):E(y),_&&_.releaseLock(),b()}}(a,e))),s}function bt(n,{worker:t,writer:e,onTaskFinished:i,transferStreams:r}){try{let{value:s,readable:a,writable:f}=n,_=[];if(s&&(n.value=s.buffer,_.push(n.value)),r&&Hn?(a&&_.push(a),f&&_.push(f)):n.readable=n.writable=null,_.length)try{return t.postMessage(n,_),!0}catch(E){Hn=!1,n.readable=n.writable=null,t.postMessage(n)}else t.postMessage(n)}catch(s){throw e&&e.releaseLock(),i(),s}}var ce=[],pt=[],Bn=0;function Wn(n){let{terminateTimeout:t}=n;t&&(clearTimeout(t),n.terminateTimeout=null)}var ir=65536,Kn="writable",Se=class{constructor(){this.size=0}init(){this.initialized=!0}},je=class extends Se{get readable(){let t=this,{chunkSize:e=ir}=t,i=new ReadableStream({start(){this.chunkOffset=0},async pull(r){let{offset:s=0,size:a,diskNumberStart:f}=i,{chunkOffset:_}=this;r.enqueue(await B(t,s+_,Math.min(e,a-_),f)),_+e>a?r.close():this.chunkOffset+=e}});return i}},Re=class extends je{constructor(t){super(),Object.assign(this,{blob:t,size:t.size})}async readUint8Array(t,e){let i=this,r=t+e,a=await(t||r<i.size?i.blob.slice(t,r):i.blob).arrayBuffer();return a.byteLength>e&&(a=a.slice(t,r)),new Uint8Array(a)}},De=class extends Se{constructor(t){super();let i=new TransformStream,r=[];t&&r.push(["Content-Type",t]),Object.defineProperty(this,Kn,{get:()=>i.writable}),this.blob=new Response(i.readable,{headers:r}).blob()}getData(){return this.blob}},mt=class extends je{constructor(t){super(),this.readers=t}async init(){let t=this,{readers:e}=t;t.lastDiskNumber=0,t.lastDiskOffset=0,await Promise.all(e.map((async(i,r)=>{await i.init(),r!=e.length-1&&(t.lastDiskOffset+=i.size),t.size+=i.size}))),super.init()}async readUint8Array(t,e,i=0){let a,r=this,{readers:s}=this,f=i;-1==f&&(f=s.length-1);let _=t;for(;_>=s[f].size;)_-=s[f].size,f++;let E=s[f],d=E.size;if(_+e<=d)a=await B(E,_,e);else{let b=d-_;a=new Uint8Array(e),a.set(await B(E,_,b)),a.set(await r.readUint8Array(t+b,e-b,i),b)}return r.lastDiskNumber=Math.max(f,r.lastDiskNumber),a}},Xe=class extends Se{constructor(t,e=4294967295){super();let i=this;Object.assign(i,{diskNumber:0,diskOffset:0,size:0,maxSize:e,availableSize:e});let r,s,a,f=new WritableStream({async write(d){let{availableSize:b}=i;if(a)d.length>=b?(await _(d.slice(0,b)),await E(),i.diskOffset+=r.size,i.diskNumber++,a=null,await this.write(d.slice(b))):await _(d);else{let{value:p,done:O}=await t.next();if(O&&!p)throw new Error("Writer iterator completed too soon");r=p,r.size=0,r.maxSize&&(i.maxSize=r.maxSize),i.availableSize=i.maxSize,await Ne(r),s=p.writable,a=s.getWriter(),await this.write(d)}},async close(){await a.ready,await E()}});async function _(d){let b=d.length;b&&(await a.ready,await a.write(d),r.size+=b,i.size+=b,i.availableSize-=b)}async function E(){s.size=r.size,await a.close()}Object.defineProperty(i,Kn,{get:()=>f})}};async function Ne(n,t){n.init&&!n.initialized&&await n.init(t)}function B(n,t,e,i){return n.readUint8Array(t,e,i)}var jn="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),rr=256==jn.length;function qe(n,t){return t&&"cp437"==t.trim().toLowerCase()?function(n){if(rr){let t="";for(let e=0;e<n.length;e++)t+=jn[n[e]];return t}return(new TextDecoder).decode(n)}(n):new TextDecoder(t).decode(n)}var xt="filename",Tt="rawFilename",wt="comment",At="rawComment",gt="uncompressedSize",Ot="compressedSize",$e="diskNumberStart",Je="lastModDate",Qe="rawLastModDate",St="lastAccessDate",qn="rawLastAccessDate",Dt="creationDate",$n="rawCreationDate",lr=[xt,Tt,Ot,gt,Je,Qe,wt,At,St,Dt,"offset",$e,$e,"internalFileAttribute","externalFileAttribute","msDosCompatible","zip64","directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"],Ie=class{constructor(t){lr.forEach((e=>this[e]=t[e]))}},Ct="File format is not recognized",Cr="Zip64 extra field not found",ii="Compression method not supported",ri="Split zip file",Lr=[[gt,4294967295],[Ot,4294967295],["offset",4294967295],[$e,65535]],Ur={65535:{getValue:v,bytes:4},4294967295:{getValue:et,bytes:8}},tt=class{constructor(t,e={}){var n;Object.assign(this,{reader:(n=t,Array.isArray(n)&&(n=new mt(n)),n instanceof ReadableStream&&(n={readable:n}),n),options:e,config:ee})}async*getEntriesGenerator(t={}){let e=this,{reader:i}=e,{config:r}=e;if(await Ne(i),(i.size===W||!i.readUint8Array)&&(i=new Re(await new Response(i.readable).blob()),await Ne(i)),i.size<22)throw new Error(Ct);var n;i.chunkSize=(n=r,Math.max(n.chunkSize,64));let s=await async function(n,t,e,i,r){let s=new Uint8Array(4),a=H(s);!function(n,t,e){n.setUint32(t,e,!0)}(a,0,t);let f=i+r;return await _(i)||await _(Math.min(f,e));async function _(E){let d=e-E,b=await B(n,d,E);for(let p=b.length-i;p>=0;p--)if(b[p]==s[0]&&b[p+1]==s[1]&&b[p+2]==s[2]&&b[p+3]==s[3])return{offset:d+p,buffer:b.slice(p,p+i).buffer}}}(i,101010256,i.size,22,1048560);if(!s){throw 134695760==v(H(await B(i,0,4)))?new Error(ri):new Error("End of central directory not found")}let a=H(s),f=v(a,12),_=v(a,16),E=s.offset,d=Z(a,20),b=E+22+d,p=Z(a,4),O=i.lastDiskNumber||0,y=Z(a,6),l=Z(a,8),o=0,c=0;if(4294967295==_||4294967295==f||65535==l||65535==y){let T=H(await B(i,s.offset-20,20));if(117853008!=v(T,0))throw new Error("End of Zip64 central directory not found");_=et(T,8);let I=await B(i,_,56,-1),D=H(I),F=s.offset-20-56;if(101075792!=v(D,0)&&_!=F){let P=_;_=F,o=_-P,I=await B(i,_,56,-1),D=H(I)}if(101075792!=v(D,0))throw new Error("End of Zip64 central directory locator not found");65535==p&&(p=v(D,16)),65535==y&&(y=v(D,20)),65535==l&&(l=et(D,32)),4294967295==f&&(f=et(D,40)),_-=f}if(O!=p)throw new Error(ri);if(_<0||_>=i.size)throw new Error(Ct);let u=0,h=await B(i,_,f,y),x=H(h);if(f){let m=s.offset-f;if(33639248!=v(x,u)&&_!=m){let T=_;_=m,o=_-T,h=await B(i,_,f,y),x=H(h)}}let S=s.offset-_-(i.lastDiskOffset||0);if(f!=S&&S>=0&&(f=S,h=await B(i,_,f,y),x=H(h)),_<0||_>=i.size)throw new Error(Ct);let R=V(e,t,"filenameEncoding"),A=V(e,t,"commentEncoding");for(let m=0;m<l;m++){let T=new Ft(i,r,e.options);if(33639248!=v(x,u))throw new Error("Central directory header not found");ci(T,x,u+6);let I=!!T.bitFlag.languageEncodingFlag,D=u+46,F=D+T.filenameLength,P=F+T.extraFieldLength,N=Z(x,u+4),M=0==(0&N),L=h.subarray(D,F),be=Z(x,u+32),C=P+be,se=h.subarray(P,C),U=I,k=I,Lt=M&&16==(16&he(x,u+38)),Ut=v(x,u+42)+o;Object.assign(T,{versionMadeBy:N,msDosCompatible:M,compressedSize:0,uncompressedSize:0,commentLength:be,directory:Lt,offset:Ut,diskNumberStart:Z(x,u+34),internalFileAttribute:Z(x,u+36),externalFileAttribute:v(x,u+38),rawFilename:L,filenameUTF8:U,commentUTF8:k,rawExtraField:h.subarray(F,P)});let[Mt,_i]=await Promise.all([qe(L,U?"utf-8":R||"cp437"),qe(se,k?"utf-8":A||"cp437")]);Object.assign(T,{rawComment:se,filename:Mt,comment:_i,directory:Lt||Mt.endsWith("/")}),c=Math.max(Ut,c),await li(T,T,x,u+6);let it=new Ie(T);it.getData=(vt,ui)=>T.getData(vt,it,ui),u=C;let{onprogress:kt}=t;if(kt)try{await kt(m+1,l,new Ie(T))}catch(vt){}yield it}let w=V(e,t,"extractPrependedData"),g=V(e,t,"extractAppendedData");return w&&(e.prependedData=c>0?await B(i,0,c):new Uint8Array),e.comment=d?await B(i,E+22,d):new Uint8Array,g&&(e.appendedData=b<i.size?await B(i,b,i.size-b):new Uint8Array),!0}async getEntries(t={}){let e=[];for await(let i of this.getEntriesGenerator(t))e.push(i);return e}async close(){}},Ft=class{constructor(t,e,i){Object.assign(this,{reader:t,config:e,options:i})}async getData(t,e,i={}){let r=this,{reader:s,offset:a,diskNumberStart:f,extraFieldAES:_,compressionMethod:E,config:d,bitFlag:b,signature:p,rawLastModDate:O,uncompressedSize:y,compressedSize:l}=r,o=e.localDirectory={},u=H(await B(s,a,30,f)),h=V(r,i,"password");if(h=h&&h.length&&h,_&&99!=_.originalCompressionMethod)throw new Error(ii);if(0!=E&&8!=E)throw new Error(ii);if(67324752!=v(u,0))throw new Error("Local file header not found");ci(o,u,4),o.rawExtraField=o.extraFieldLength?await B(s,a+30+o.filenameLength,o.extraFieldLength,f):new Uint8Array,await li(r,o,u,4,!0),Object.assign(e,{lastAccessDate:o.lastAccessDate,creationDate:o.creationDate});let x=r.encrypted&&o.encrypted,S=x&&!_;if(x){if(!S&&_.strength===W)throw new Error("Encryption method not supported");if(!h)throw new Error("File contains encrypted entry")}let R=a+30+o.filenameLength+o.extraFieldLength,A=l,w=s.readable;Object.assign(w,{diskNumberStart:f,offset:R,size:A});let g=V(r,i,"signal"),m=V(r,i,"checkPasswordOnly");m&&(t=new WritableStream),t=function(n){n.writable===W&&typeof n.next==Ue&&(n=new Xe(n)),n instanceof WritableStream&&(n={writable:n});let{writable:t}=n;return t.size===W&&(t.size=0),n instanceof Xe||Object.assign(n,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),n}(t),await Ne(t,y);let{writable:T}=t,{onstart:I,onprogress:D,onend:F}=i,P={options:{codecType:Ve,password:h,zipCrypto:S,encryptionStrength:_&&_.strength,signed:V(r,i,"checkSignature"),passwordVerification:S&&(b.dataDescriptor?O>>>8&255:p>>>24&255),signature:p,compressed:0!=E,encrypted:x,useWebWorkers:V(r,i,"useWebWorkers"),useCompressionStream:V(r,i,"useCompressionStream"),transferStreams:V(r,i,"transferStreams"),checkPasswordOnly:m},config:d,streamOptions:{signal:g,size:A,onstart:I,onprogress:D,onend:F}},N=0;try{({outputSize:N}=await async function(n,t){let{options:e,config:i}=t,{transferStreams:r,useWebWorkers:s,useCompressionStream:a,codecType:f,compressed:_,signed:E,encrypted:d}=e,{workerScripts:b,maxWorkers:p,terminateWorkerTimeout:O}=i;t.transferStreams=r||r===W;let y=!(_||E||d||t.transferStreams);t.useWebWorkers=!y&&(s||s===W&&i.useWebWorkers),t.scripts=t.useWebWorkers&&b?b[f]:[],e.useCompressionStream=a||a===W&&i.useCompressionStream;let l,o=ce.find((u=>!u.busy));if(o)Wn(o),l=new Ee(o,n,t,c);else if(ce.length<p){let u={indexWorker:Bn};Bn++,ce.push(u),l=new Ee(u,n,t,c)}else l=await new Promise((u=>pt.push({resolve:u,stream:n,workerOptions:t})));return l.run();function c(u){if(pt.length){let[{resolve:h,stream:x,workerOptions:S}]=pt.splice(0,1);h(new Ee(u,x,S,c))}else u.worker?(Wn(u),Number.isFinite(O)&&O>=0&&(u.terminateTimeout=setTimeout((()=>{ce=ce.filter((h=>h!=u)),u.terminate()}),O))):ce=ce.filter((h=>h!=u))}}({readable:w,writable:T},P))}catch(M){if(!m||M.message!=$)throw M}finally{let M=V(r,i,"preventClose");T.size+=N,!M&&!T.locked&&await T.getWriter().close()}return m?void 0:t.getData?t.getData():T}};function ci(n,t,e){let i=n.rawBitFlag=Z(t,e+2),r=1==(1&i),s=v(t,e+6);Object.assign(n,{encrypted:r,version:Z(t,e),bitFlag:{level:(6&i)>>1,dataDescriptor:8==(8&i),languageEncodingFlag:2048==(2048&i)},rawLastModDate:s,lastModDate:Br(s),filenameLength:Z(t,e+22),extraFieldLength:Z(t,e+24)})}async function li(n,t,e,i,r){let{rawExtraField:s}=t,a=t.extraField=new Map,f=H(new Uint8Array(s)),_=0;try{for(;_<s.length;){let c=Z(f,_),u=Z(f,_+2);a.set(c,{type:c,data:s.slice(_+4,_+4+u)}),_+=4+u}}catch(c){}let E=Z(e,i+4);Object.assign(t,{signature:v(e,i+10),uncompressedSize:v(e,i+18),compressedSize:v(e,i+14)});let d=a.get(1);d&&(function(n,t){t.zip64=!0;let e=H(n.data),i=Lr.filter((([r,s])=>t[r]==s));for(let r=0,s=0;r<i.length;r++){let[a,f]=i[r];if(t[a]==f){let _=Ur[f];t[a]=n[a]=_.getValue(e,s),s+=_.bytes}else if(n[a])throw new Error(Cr)}}(d,t),t.extraFieldZip64=d);let b=a.get(28789);b&&(await oi(b,xt,Tt,t,n),t.extraFieldUnicodePath=b);let p=a.get(25461);p&&(await oi(p,wt,At,t,n),t.extraFieldUnicodeComment=p);let O=a.get(39169);O?(function(n,t,e){let i=H(n.data),r=he(i,4);Object.assign(n,{vendorVersion:he(i,0),vendorId:he(i,2),strength:r,originalCompressionMethod:e,compressionMethod:Z(i,5)}),t.compressionMethod=n.compressionMethod}(O,t,E),t.extraFieldAES=O):t.compressionMethod=E;let y=a.get(10);y&&(function(n,t){let r,e=H(n.data),i=4;try{for(;i<n.data.length&&!r;){let s=Z(e,i),a=Z(e,i+2);1==s&&(r=n.data.slice(i+4,i+4+a)),i+=4+a}}catch(s){}try{if(r&&24==r.length){let s=H(r),a=s.getBigUint64(0,!0),f=s.getBigUint64(8,!0),_=s.getBigUint64(16,!0);Object.assign(n,{rawLastModDate:a,rawLastAccessDate:f,rawCreationDate:_});let p={lastModDate:Pt(a),lastAccessDate:Pt(f),creationDate:Pt(_)};Object.assign(n,p),Object.assign(t,p)}}catch(s){}}(y,t),t.extraFieldNTFS=y);let l=a.get(21589);l&&(function(n,t,e){let i=H(n.data),r=he(i,0),s=[],a=[];e?(1==(1&r)&&(s.push(Je),a.push(Qe)),2==(2&r)&&(s.push(St),a.push(qn)),4==(4&r)&&(s.push(Dt),a.push($n))):n.data.length>=5&&(s.push(Je),a.push(Qe));let f=1;s.forEach(((_,E)=>{if(n.data.length>=f+4){let d=v(i,f);t[_]=n[_]=new Date(1e3*d);let b=a[E];n[b]=d}f+=4}))}(l,t,r),t.extraFieldExtendedTimestamp=l);let o=a.get(6534);o&&(t.extraFieldUSDZ=o)}async function oi(n,t,e,i,r){let s=H(n.data),a=new q;a.append(r[e]);let f=H(new Uint8Array(4));f.setUint32(0,a.get(),!0);let _=v(s,1);Object.assign(n,{version:he(s,0),[t]:qe(n.data.subarray(5)),valid:!r.bitFlag.languageEncodingFlag&&_==v(f,0)}),n.valid&&(i[t]=n[t],i[t+"UTF8"]=!0)}function V(n,t,e){return t[e]===W?n.options[e]:t[e]}function Br(n){let t=(4294901760&n)>>16,e=65535&n;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&e)>>11,(2016&e)>>5,2*(31&e),0)}catch(i){}}function Pt(n){return new Date(Number(n/BigInt(1e4)-BigInt(116444736e5)))}function he(n,t){return n.getUint8(t)}function Z(n,t){return n.getUint16(t,!0)}function v(n,t){return n.getUint32(t,!0)}function et(n,t){return Number(n.getBigUint64(t,!0))}function H(n){return new DataView(n.buffer)}Me({Inflate:function(n){let e=new an,i=n&&n.chunkSize?Math.floor(2*n.chunkSize):131072,s=new Uint8Array(i),a=!1;e.inflateInit(),e.next_out=s,this.append=function(f,_){let d,b,E=[],p=0,O=0,y=0;if(0!==f.length){e.next_in_index=0,e.next_in=f,e.avail_in=f.length;do{if(e.next_out_index=0,e.avail_out=i,0===e.avail_in&&!a&&(e.next_in_index=0,a=!0),d=e.inflate(0),a&&-5===d){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==d&&1!==d)throw new Error("inflating: "+e.msg);if((a||1===d)&&e.avail_in===f.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===i?E.push(new Uint8Array(s)):E.push(s.subarray(0,e.next_out_index))),y+=e.next_out_index,_&&e.next_in_index>0&&e.next_in_index!=p&&(_(e.next_in_index),p=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return E.length>1?(b=new Uint8Array(y),E.forEach((function(l){b.set(l,O),O+=l.length}))):b=E[0]?new Uint8Array(E[0]):new Uint8Array,b}},this.flush=function(){e.inflateEnd()}}});var nt=class nt{constructor(t){this.zipCache=new Map,Me({useWebWorkers:!1}),this.remotes=t.remotes,this.fetch=t.fetch,this.fallbackUrl=t.fallbackUrl.endsWith("/")?t.fallbackUrl:`${t.fallbackUrl}/`}async getData(t,e){let i=(null==e?void 0:e.headers)||{};if(null!=e&&e.method&&"GET"!==(null==e?void 0:e.method)&&!this.isPathUrl(t))return this.fetch(t,e);let r=await this.getBlob(t,i);return r?new Response(r,{status:200,statusText:"OK",headers:i}):this.fetch(t,e)}async getUrl(t){if(!this.isPathUrl(t))return{url:t,onComplete:()=>{}};let e=await this.getBlob(t);if(e){let i=URL.createObjectURL(e);return{url:i,onComplete:()=>{URL.revokeObjectURL(i)}}}return{url:this.getFallbackUrl(t),onComplete:()=>{}}}async preload(t){let e=this.remotes.find((i=>i.name===t));if(!e)return console.error(`Failed to preload zip file: ${t}, not found`);await this.getZip(e.zipUrl)}async unload(t){let e=this.remotes.find((i=>i.name===t));if(!e)return console.error(`Failed to unload zip file: ${t}, not found`);this.zipCache.delete(e.zipUrl)}isPathUrl(t){return!t.startsWith("blob:")&&!t.startsWith("data:")}getFallbackUrl(t){return t=t.startsWith("/")?t.slice(1):t,this.fallbackUrl?`${this.fallbackUrl}${t}`:t}async getBlob(t,e){let i=await this.getTargetEntry(t);if(i){let r;return r=null!=e&&e["content-type"]?this.getWriterBasedOnContentType(e["content-type"]):this.getWriterBasedOnUrl(t),i.getData(r)}return null}getWriterBasedOnUrl(t){let e=this.getMimeTypeFromUrl(t);return new De(e)}getSuffixFromUrl(t){let e=t.split("?").pop().split(".").pop();return e?e.toLowerCase():""}getMimeTypeFromUrl(t){let e=this.getSuffixFromUrl(t).toUpperCase();return nt.SuffixMapContentType[e]||"application/octet-stream"}getWriterBasedOnContentType(t){let e=t.split(";")[0];return new De(e)}async getTargetEntry(t){let e=this.getRemote(t);if(!e)return null;let i=e.zipUrl,r=t.slice(e.prefix.length);try{return(await this.getZip(i)).find((a=>a.filename===r))||null}catch(s){return console.error(s),null}}getRemote(t){return this.remotes.find((e=>t.startsWith(e.prefix)))||null}async getZip(t){return this.zipCache.has(t)||this.zipCache.set(t,new Promise((async(e,i)=>{let r=await this.fetch(t);r.ok||i(new Error(`Failed to fetch zip from ${t}: ${r.status} ${r.statusText}`));let s=await r.blob(),a=new tt(new Re(s)),f=await a.getEntries();a.close(),e(f)}))),this.zipCache.get(t)}};nt.SuffixMapContentType={FORM_URLENCODED:"application/x-www-form-urlencoded",GIF:"image/gif",JPEG:"image/jpeg",DDS:"image/dds",JSON:"application/json",PNG:"image/png",TEXT:"text/plain",XML:"application/xml",WAV:"audio/x-wav",OGG:"audio/ogg",MP3:"audio/mpeg",MP4:"audio/mp4",AAC:"audio/aac",BIN:"application/octet-stream",BASIS:"image/basis",WASM:"application/wasm",GLB:"model/gltf-binary"};var fi=nt}}]);