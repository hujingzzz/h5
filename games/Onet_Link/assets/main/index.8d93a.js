window.__require=function t(e,n,i){function o(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){return o(e[r][1][t]||t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({ADManager:[function(t,e,n){"use strict";cc._RF.push(e,"f0ea2GzAfhCJLbef8lh5BJq","ADManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../GameApp"),o=t("../BaseConfig"),a=t("../sdk/SDKConst"),r=function(){function t(){}return t.rewardIsLoaded=function(){return!!i.default.DEBUG||(o.default.AlternateAD?i.default.SDK.ADisLoaded(a.default.AD_TYPE_REWARD)||i.default.SDK.ADisLoaded(a.default.AD_TYPE_INTERST):i.default.SDK.ADisLoaded(a.default.AD_TYPE_REWARD))},t.interstitialIsLoaded=function(){return!!i.default.DEBUG||i.default.SDK.ADisLoaded(a.default.AD_TYPE_INTERST)},t.showInterstitial=function(t,e){return i.default.DEBUG?(t&&e&&t.apply(e),!1):(i.default.SDK.playAD(t,e,a.default.AD_TYPE_INTERST,"showInterstitial"),!0)},t.showReward=function(t,e){return i.default.DEBUG?(t&&e&&t.apply(e),!1):i.default.SDK.ADisLoaded(a.default.AD_TYPE_REWARD)?i.default.SDK.playAD(t,e,a.default.AD_TYPE_REWARD,"showReward"):o.default.AlternateAD&&i.default.SDK.ADisLoaded(a.default.AD_TYPE_INTERST)?i.default.SDK.playAD(t,e,a.default.AD_TYPE_INTERST,"showInterstitial"):void 0},t.showBanner=function(){i.default.DEBUG||i.default.SDK.Command("showBanner")},t.hideBanner=function(){i.default.DEBUG||i.default.SDK.Command("hideBanner")},t}();n.default=r,cc._RF.pop()},{"../BaseConfig":"BaseConfig","../GameApp":"GameApp","../sdk/SDKConst":"SDKConst"}],AnimatorControlParticle:[function(t,e,n){"use strict";cc._RF.push(e,"7032dzz1SpBHbC66JiE9WEz","AnimatorControlParticle");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,u=r.requireComponent,p=r.disallowMultiple,d=function(){function t(){this._particle=null,this._loop=!0,this._playOnLoad=!0,this.appointAnimation=!1,this.animationClip=null,this.playing=!1}return Object.defineProperty(t.prototype,"particle",{get:function(){return this._particle},set:function(t){this._particle=t,t&&(t.autoRemoveOnFinish=!this._loop,t.playOnLoad=this.playOnLoad)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.particle&&(this.particle.autoRemoveOnFinish=!t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playOnLoad",{get:function(){return this._playOnLoad},set:function(t){this._playOnLoad=t,this.particle&&(this.particle.playOnLoad=this.playOnLoad,this.particle.node.opacity=this.playOnLoad?255:0)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.particle&&(this.particle.node.opacity=this.playOnLoad?255:0)},t.prototype.play=function(){this.particle&&(this.particle.node.opacity=255,this.particle.resetSystem(),this.playing=!0)},t.prototype.stop=function(){if(this.particle){if(!this.playing)return;this.particle.node.opacity=0,this.particle.stopSystem(),this.playing=!1}},a([c({type:cc.ParticleSystem})],t.prototype,"_particle",void 0),a([c({type:cc.ParticleSystem})],t.prototype,"particle",null),a([c()],t.prototype,"_loop",void 0),a([c({tooltip:!1})],t.prototype,"loop",null),a([c()],t.prototype,"_playOnLoad",void 0),a([c({tooltip:!1})],t.prototype,"playOnLoad",null),a([c({tooltip:!1})],t.prototype,"appointAnimation",void 0),a([c({type:cc.AnimationClip,tooltip:!1,visible:function(){return this.appointAnimation}})],t.prototype,"animationClip",void 0),a([s("AnimatorParticle")],t)}(),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.particleGroup=[],e}return o(e,t),e.prototype.onLoad=function(){for(var t=0,e=this.particleGroup.length;t<e;t++)this.particleGroup[t].onLoad()},e.prototype.playParticle=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t)for(var n=0,i=void 0,o=void 0;n<t.length;n++)if(o="boolean"!=typeof t[n]?Number(t[n]):-1,i=this.particleGroup[o])if(i.appointAnimation&&i.animationClip){var a=this.getComponent(cc.Animation);a&&a.currentClip&&a.currentClip.name===i.animationClip.name&&i.play()}else i.play()},e.prototype.stopParticle=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t)for(var n=0,i=void 0,o=void 0;n<t.length;n++)o="boolean"!=typeof t[n]?Number(t[n]):-1,(i=this.particleGroup[o])&&i.stop()},e.prototype.start=function(){},a([c({type:[d],tooltip:"\u52a8\u753b\u9700\u8981\u7684\u7c92\u5b50"})],e.prototype,"particleGroup",void 0),a([s,l("Display/\u52a8\u753b\u5185\u7c92\u5b50\u4e8b\u4ef6\u63a7\u5236\u5668<cc.Animation>"),u(cc.Animation),p],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],AssetsLoader:[function(t,e,n){"use strict";cc._RF.push(e,"9f1acp9k4NP/pfuJgrInFmy","AssetsLoader"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./AssetsSkin"),o=t("./event/EventManager"),a=t("./manager/RESManager"),r=t("./util/I18N"),s=function(){function t(){}return t.getRes=function(e){return t.RES[e]},t.updateProgress=function(){o.default.instance.emit("DataLoadeProgress",t.current/t.total)},t.loadData=function(e,n,o){var a=i.default.ResSkin.slice(0);a.push({url:"I18N/"+r.default.defaultLocation,type:cc.TextAsset,key:"defaultLocal"}),(o=r.default.getLocalKey(o))!=r.default.defaultLocation&&a.push({url:"I18N/"+o,type:cc.TextAsset,key:"userLocal"}),t.total=a.length,0!=t.total?this.loadDataRes(a,e,n):e.call(n)},t.loadDataResLazy=function(){t.loadMusic()},t.loadDataRes=function(e,n,i){if(0!=e.length){var o=e.shift();cc.loader.loadRes(o.url,o.type,function(r,s){s instanceof cc.JsonAsset?(t.RES[o.key]=s.json,a.default.setResource(o.key,s.json)):s instanceof cc.BufferAsset?(t.RES[o.key]=s._buffer,a.default.setResource(o.key,s._buffer)):s instanceof cc.TextAsset?(t.RES[o.key]=s.text,a.default.setResource(o.key,s.text)):(t.RES[o.key]=s,a.default.setResource(o.key,s)),t.current++,t.updateProgress(),t.loadDataRes(e,n,i)})}else n.call(i)},t.loadMusic=function(){for(var e,n=[],o={},r=0,s=i.default.SoundList;r<s.length;r++){var c=s[r];o[e=t.soundResDirPath+c]=c,n.push(e)}cc.loader.loadResArray(n,cc.AudioClip,function(t,e){if(t)throw t;if(e)for(var n=0;n<e.length;n++){var i=e[n];a.default.setResource(i.name,i)}})},t.loadRes=function(e,n,i,o){var r=e.split("/"),s=r[r.length-1];t.cacheFlag[e]?i&&i.call(o,a.default.getResource(s)):cc.loader.loadRes(e,n,function(n,r){n?cc.error(n):(a.default.setResource(s,r),t.cacheFlag[e]=!0,i&&i.call(o,r))})},t.loadAssets=function(e,n,i){e instanceof Array||(e=[e]);for(var o=(e=cc.js.array.copy(e)).length,r=function(){0==--o&&n&&n.call(i)},s=function(n){var i=e[n];t.cacheFlag[i.key]?r():cc.loader.loadRes(i.url,i.type,function(e,n){e?cc.error(e):(a.default.setResource(i.key,n),t.cacheFlag[i.key]=!0,r())})},c=0;c<e.length;c++)s(c)},t.cacheFlag={},t.soundResDirPath="sound/",t.RES={},t.total=0,t.current=0,t}();n.default=s,cc._RF.pop()},{"./AssetsSkin":"AssetsSkin","./event/EventManager":"EventManager","./manager/RESManager":"RESManager","./util/I18N":"I18N"}],AssetsSkin:[function(t,e,n){"use strict";cc._RF.push(e,"017454QgH9M0LLQOr5il/Z4","AssetsSkin"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.ResSkin=[],t.SoundList=[],t}();n.default=i,cc._RF.pop()},{}],BaseConfig:[function(t,e,n){"use strict";cc._RF.push(e,"a6baazdSxpJxZp2M71K94YL","BaseConfig"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.delayRenderDuration=cc.sys.isNative?.1:0,t.serverURL="https://",t.AlternateAD=!1,t.StorageKey="ko_game_dl",t}();n.default=i,cc._RF.pop()},{}],BaseWindow:[function(t,e,n){"use strict";cc._RF.push(e,"ab118f7CaFJ+7iuNetQmQH8","BaseWindow");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/UIManager"),s=t("../manager/PopUpManager"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.winKey=null,e.isStart=!1,e.opening=!1,e.closing=!1,e}return o(e,t),e.prototype.onLoad=function(){this.node.width=r.default.instance.stage.width,this.node.height=r.default.instance.stage.height},Object.defineProperty(e.prototype,"ViewName",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.isStart=!0},e.prototype.open=function(t,e){void 0===e&&(e=null),this.isOpen=!0,this.opening=!0,this.data=e,t?this.node.parent!=t&&(this.node.parent=t):this.node.parent=r.default.instance.stage,this.openEffect?(this.node.getComponent(cc.Animation).once("finished",this.openFinished,this),this.node.getComponent(cc.Animation).play(this.openEffect)):this.openEnd()},e.prototype.openFinished=function(){this.openEnd()},e.prototype.openEnd=function(){this.opening=!1},e.prototype.close=function(){this.opening||this.closing||(this.closing=!0,this.closeEffect?(this.node.getComponent(cc.Animation).once("finished",this.effectFinished,this),this.node.getComponent(cc.Animation).play(this.closeEffect)):this.doClose())},e.prototype.effectFinished=function(){this.doClose()},e.prototype.hide=function(){this.closeEffect?(this.node.getComponent(cc.Animation).once("finished",this.hideEffectFinished,this),this.node.getComponent(cc.Animation).play(this.closeEffect)):this.node.active=!1},e.prototype.show=function(){this.node.active=!0,this.openEffect&&(this.node.getComponent(cc.Animation).once("finished",this.openFinished,this),this.node.getComponent(cc.Animation).play(this.openEffect))},e.prototype.hideEffectFinished=function(){this.node.active=!1},e.prototype.doClose=function(){var t=this;this.dispose(),this.isOpen=!1,this.closing=!1,s.default.removePop(this),this.scheduleOnce(function(){t.closeCallBack&&t.closeCallBack(),t.closeCallBack=null})},e.prototype.dispose=function(){this.data=null},a([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../manager/PopUpManager":"PopUpManager","../manager/UIManager":"UIManager"}],BlackBlockComponent:[function(t,e,n){"use strict";cc._RF.push(e,"55130ZWSFRIzLDPr8qPvu6p","BlackBlockComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,r.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){this.node.getComponent(cc.BlockInputEvents)||this.node.addComponent(cc.BlockInputEvents),this.node.width=cc.view.getCanvasSize().width/cc.view.getScaleX(),this.node.height=cc.view.getCanvasSize().height/cc.view.getScaleY(),this.node.position=this.node.parent.convertToNodeSpaceAR(cc.Canvas.instance.node.convertToWorldSpaceAR(cc.Canvas.instance.node.position)),this.node.color=cc.Color.BLACK,this.node.opacity=180},a([s,c("Display/BlackBlockComponent")],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],ButtonEffect:[function(t,e,n){"use strict";cc._RF.push(e,"f6496lCOJ9DNZjFlSgr6pPT","ButtonEffect");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/SoundManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.requireComponent,p=s.disallowMultiple,d=s.menu,h=s.help,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ScaleTo=1,e.ColorTo=cc.Color.WHITE,e.sound="",e}return o(e,t),e.prototype.onLoad=function(){this.but=this.node.getComponent(cc.Button),this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.sound="button"},e.prototype.onDestroy=function(){this.but=this.node.getComponent(cc.Button),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},e.prototype._onTouchBegan=function(){this.but.interactable&&this.but.enabledInHierarchy&&(1!=this.ScaleTo&&this.node.runAction(cc.scaleTo(.05,this.ScaleTo)),this.node.color=this.ColorTo)},e.prototype._onTouchEnded=function(){this.but.interactable&&this.but.enabledInHierarchy&&(this.sound&&this.but._pressed&&this.sound&&r.default.instance.playEffect(this.sound),1!=this.ScaleTo&&this.node.runAction(cc.scaleTo(.05,1)),this.node.color=cc.Color.WHITE)},e.prototype._onTouchCancel=function(){this.but.interactable&&this.but.enabledInHierarchy&&(1!=this.ScaleTo&&this.node.runAction(cc.scaleTo(.05,1)),this.node.color=cc.Color.WHITE)},a([l],e.prototype,"ScaleTo",void 0),a([l(cc.Color)],e.prototype,"ColorTo",void 0),a([l],e.prototype,"sound",void 0),a([c,u(cc.Button),p,d("Display/\u6309\u94ae\u6548\u679c"),h("\u6309\u94ae\u70b9\u51fb\u6548\u679c")],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../manager/SoundManager":"SoundManager"}],ByteArray:[function(t,e,n){"use strict";cc._RF.push(e,"e4aee43OtxM85wz2gzwk/f6","ByteArray"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Endian"),o=t("../manager/ErrorManager"),a=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=0),this.$endian=0,this.bufferExtSize=0,this._position=0,this.write_position=0,this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,e<0&&(e=0),this.bufferExtSize=e;var n,o=0;if(t){var a=void 0;t instanceof Uint8Array?(a=t,o=t.length):(o=t.byteLength,a=new Uint8Array(t)),(n=0==e?new Uint8Array(o):new Uint8Array((1+(o/e|0))*e)).set(a)}else n=new Uint8Array(e);this.write_position=o,this._position=0,this._bytes=n,this.data=new DataView(n.buffer),this.endian=i.default.BIG_ENDIAN}return Object.defineProperty(t.prototype,"endian",{get:function(){return 0==this.$endian?i.default.LITTLE_ENDIAN:i.default.BIG_ENDIAN},set:function(t){this.$endian=t==i.default.LITTLE_ENDIAN?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,n=t.byteLength,i=new Uint8Array(t),o=this.bufferExtSize;(e=0==o?new Uint8Array(n):new Uint8Array((1+(n/o|0))*o)).set(i),this.write_position=n,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bytes",{get:function(){return this._bytes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,t>this.write_position&&(this.write_position=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!1,configurable:!0}),t.prototype._validateBuffer=function(t){if(this.data.byteLength<t){var e=this.bufferExtSize,n=void 0;(n=0==e?new Uint8Array(t):new Uint8Array((1+(t/e>>0))*e)).set(this._bytes),this._bytes=n,this.data=new DataView(n.buffer)}},Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!1,configurable:!0}),t.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},t.prototype.readBoolean=function(){if(this.validate(1))return!!this._bytes[this.position++]},t.prototype.readByte=function(){if(this.validate(1))return this.data.getInt8(this.position++)},t.prototype.readBytes=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),t){var i=this._position,a=this.write_position-i;if(a<0)o.default.error(1025);else{if(0==n)n=a;else if(n>a)return void o.default.error(1025);var r=t._position;t._position=0,t.validateBuffer(e+n),t._position=r,t._bytes.set(this._bytes.subarray(i,i+n),e),this.position+=n}}},t.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},t.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},t.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},t.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},t.prototype.readUnsignedByte=function(){if(this.validate(1))return this._bytes[this.position++]},t.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},t.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},t.prototype.readUTF=function(){var t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""},t.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,n=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(n)}},t.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},t.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},t.prototype.writeBytes=function(t,e,n){var i;void 0===e&&(e=0),void 0===n&&(n=0),e<0||n<0||(i=0==n?t.length-e:Math.min(t.length-e,n))>0&&(this.validateBuffer(i),this._bytes.set(t._bytes.subarray(e,e+i),this._position),this.position=this._position+i)},t.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},t.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},t.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},t.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},t.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},t.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},t.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),n=e.length;this.validateBuffer(2+n),this.data.setUint16(this._position,n,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},t.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},t.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},t.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var n=this._position,i=n+t.length;e&&this.validateBuffer(i),this.bytes.set(t,n),this.position=i},t.prototype.validate=function(t){var e=this._bytes.length;if(e>0&&this._position+t<=e)return!0;o.default.error(1025)},t.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},t.prototype.encodeUTF8=function(t){for(var e=0,n=this.stringToCodePoints(t),i=[];n.length>e;){var o=n[e++];if(this.inRange(o,55296,57343))this.encoderError(o);else if(this.inRange(o,0,127))i.push(o);else{var a=void 0,r=void 0;for(this.inRange(o,128,2047)?(a=1,r=192):this.inRange(o,2048,65535)?(a=2,r=224):this.inRange(o,65536,1114111)&&(a=3,r=240),i.push(this.div(o,Math.pow(64,a))+r);a>0;){var s=this.div(o,Math.pow(64,a-1));i.push(128+s%64),a-=1}}}return new Uint8Array(i)},t.prototype.decodeUTF8=function(t){for(var e,n=0,i="",o=0,a=0,r=0,s=0;t.length>n;){var c=t[n++];if(c==this.EOF_byte)e=0!=a?this.decoderError(!1):this.EOF_code_point;else if(0==a)this.inRange(c,0,127)?e=c:(this.inRange(c,194,223)?(a=1,s=128,o=c-192):this.inRange(c,224,239)?(a=2,s=2048,o=c-224):this.inRange(c,240,244)?(a=3,s=65536,o=c-240):this.decoderError(!1),o*=Math.pow(64,a),e=null);else if(this.inRange(c,128,191))if(r+=1,o+=(c-128)*Math.pow(64,a-r),r!==a)e=null;else{var l=o,u=s;o=0,a=0,r=0,s=0,e=this.inRange(l,u,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(!1,c)}else o=0,a=0,r=0,s=0,n--,e=this.decoderError(!1,c);null!==e&&e!==this.EOF_code_point&&(e<=65535?e>0&&(i+=String.fromCharCode(e)):(e-=65536,i+=String.fromCharCode(55296+(e>>10&1023)),i+=String.fromCharCode(56320+(1023&e))))}return i},t.prototype.encoderError=function(t){o.default.error(1026,t)},t.prototype.decoderError=function(t,e){return t&&o.default.error(1027),e||65533},t.prototype.inRange=function(t,e,n){return e<=t&&t<=n},t.prototype.div=function(t,e){return Math.floor(t/e)},t.prototype.stringToCodePoints=function(t){for(var e=[],n=0,i=t.length;n<t.length;){var o=t.charCodeAt(n);if(this.inRange(o,55296,57343))if(this.inRange(o,56320,57343))e.push(65533);else if(n==i-1)e.push(65533);else{var a=t.charCodeAt(n+1);if(this.inRange(a,56320,57343)){var r=1023&o,s=1023&a;n+=1,e.push(65536+(r<<10)+s)}else e.push(65533)}else e.push(o);n+=1}return e},t}();n.default=a,cc._RF.pop()},{"../manager/ErrorManager":"ErrorManager","./Endian":"Endian"}],ChuanYinH5:[function(t,e,n){"use strict";cc._RF.push(e,"ae7daKbWq5H9rEVSj2OjqTS","ChuanYinH5"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./SDKConst"),o=function(){function t(){this.preloadedRewardedVideo={},t.instance=this}return t.prototype.hideSplash=function(){},t.prototype.getVersion=function(){},t.prototype.getCountry=function(){},t.prototype.Command=function(){},t.prototype.clearData=function(){},t.prototype.createVideoAd=function(){throw new Error("Method not implemented.")},t.prototype.createInterstitialAd=function(){throw new Error("Method not implemented.")},t.prototype.showRewardAD=function(t,e){this.playAD(t,e,i.default.AD_TYPE_REWARD)},t.prototype.showIntersitialAD=function(t,e){this.playAD(t,e,i.default.AD_TYPE_INTERST)},t.prototype.setItem=function(t,e){try{cc.sys.localStorage.setItem(t,e)}catch(n){}},t.prototype.removeItem=function(t){try{cc.sys.localStorage.removeItem(t)}catch(e){}},t.prototype.getItem=function(t,e){try{return cc.sys.localStorage.getItem(t)}catch(n){}return e||null},t.prototype.showToast=function(){},t.prototype.hideToast=function(){},t.prototype.showLoading=function(){},t.prototype.hideLoading=function(){},t.prototype.fetchRemoteConfig=function(){},t.prototype.remoteLogEvent=function(){},t.prototype.playFloatAD=function(){},t.prototype.closeFloatAD=function(){},t.prototype.initAsyncData=function(t,e,n){this.getData(t,e,n)},t.prototype.init=function(){},t.prototype.startGame=function(){this.RootViewController()},t.prototype.RootViewController=function(){},t.prototype.getPlatform=function(){return"H5"},t.prototype.getSDKPlatform=function(){return"ChuanYinH5"},t.prototype.command=function(t){console.log(t)},t.prototype.rate=function(){},t.prototype.isRate=function(){return!0},t.prototype.logEvent=function(t){"gameLoaded"==t},t.prototype.initAD=function(){this.ShowTitleAdv(function(){},this)},t.prototype.hasBanner=function(){return!1},t.prototype.ADisLoaded=function(t){return void 0===t&&(t=i.default.AD_TYPE_REWARD),!0},t.prototype.setUid=function(){},t.prototype.playAD=function(t,e,n){var o=this;return void 0===n&&(n=i.default.AD_TYPE_REWARD),this.ADCall={callback:t,thisObj:e},
// n==i.default.AD_TYPE_REWARD?window.h5sdk.adBreak({type:"reward",name:"my_reward",beforeAd:function(){console.log("beforeAd")},afterAd:function(){console.log("afterAd")},adDismissed:function(){console.log("adDismissed")},adViewed:function(){console.log("adViewed")},beforeReward:function(t){console.log("beforeReward"),t()},adBreakDone:function(t){"dismissed"!==t.breakStatus?"viewed"===t.breakStatus?(o.ADCall&&(o.ADCall.callback.call(o.ADCall.thisObj,!0),o.ADCall=null),window.h5sdk.hide()):alert("\u5e7f\u544a\u5f02\u5e38"+t.breakStatus):alert("\u53d6\u6d88\u89c2\u770b"+t.breakStatus)}}):window.h5sdk.adBreak({type:"start",name:"my_start",beforeAd:function(){console.log("beforeAd")},afterAd:function(){console.log("afterAd")},adBreakDone:function(){var t;o.ADCall&&(null===(t=o.ADCall.callback)||void 0===t||t.call(o.ADCall.thisObj),o.ADCall=null)}}),
!0},t.prototype.loadAD=function(t,e){void 0===e&&(e=i.default.AD_TYPE_REWARD)},t.prototype.SDKCallBack=function(){},t.prototype.share=function(){return!0},t.prototype.chooseAsync=function(){return!0},t.prototype.createAsync=function(){return!0},t.prototype.getFriendList=function(t,e){t.call(e,[])},t.prototype.updateLeaderboard=function(t,e,n,i){return void 0===i&&(i=!1),!0},t.prototype.getRankList=function(t,e,n,i,o){void 0===i&&(i=100),void 0===o&&(o=0),e.call(n,[])},t.prototype.getUserRank=function(t,e){e.call(this,null)},t.prototype.getRankCount=function(t,e,n){e.call(n,0)},t.prototype.getFriendsRankList=function(t,e,n,i,o){void 0===i&&(i=100),void 0===o&&(o=0),e.call(n,[])},t.prototype.pay=function(){},t.prototype.onChargeRequest=function(){},t.prototype.onChargeSuccess=function(){},t.prototype.onRewardDiamond=function(){},t.prototype.onPurchase=function(){},t.prototype.onUse=function(){},t.prototype.ShowTitleAdv=function(){},t.prototype.createShortcut=function(){},t.prototype.subscribeBotAsync=function(){},t.prototype.isLogin=function(){return!0},t.prototype.loginFb=function(t,e){t.call(e)},t.prototype.getFriendsInfo=function(){},t.prototype.logOutFb=function(t,e){t.call(e)},t.prototype.showResourceProgress=function(){},t.prototype.achievedLevel=function(){},t.prototype.getUid=function(){return""+((new Date).getTime()+(Math.floor(-899999*Math.random())+999999))},t.prototype.getLocal=function(){return"en_US"},t.prototype.getNickName=function(){},t.prototype.getPhoto=function(){return"head_png"},t.prototype.getData=function(e,n,i){var o=cc.sys.localStorage.getItem(t.localStorageKey),a=o?JSON.parse(o):{};if(e){for(var r={},s=0,c=e;s<c.length;s++){var l=c[s];r[l]=a[l]}n.call(i,r)}else n.call(i,a)},t.prototype.setData=function(e){var n=cc.sys.localStorage.getItem(t.localStorageKey),i=n?JSON.parse(n):{};for(var o in e)i[o]=e[o];cc.sys.localStorage.setItem(t.localStorageKey,JSON.stringify(i))},t.prototype.getNumberData=function(e,n,i){var o=cc.sys.localStorage.getItem(t.localStorageKey+"_num"),a=o?JSON.parse(o):{};if(e){for(var r={},s=0,c=e;s<c.length;s++){var l=c[s];r[l]=a[l]}n.call(i,r)}else n.call(i,a)},t.prototype.setNumberData=function(e){var n=cc.sys.localStorage.getItem(t.localStorageKey+"_num"),i=n?JSON.parse(n):{};for(var o in e)i[o]=e[o];cc.sys.localStorage.setItem(t.localStorageKey+"_num",JSON.stringify(i))},t.prototype.incrementStatsAsync=function(e,n,i){var o=cc.sys.localStorage.getItem(t.localStorageKey+"_num"),a=o?JSON.parse(o):{},r={};for(var s in e)r[s]=(a[s]||0)+e[s],a[s]=r[s];cc.sys.localStorage.setItem(t.localStorageKey+"_num",JSON.stringify(a)),n&&n.call(i,r)},t.uid="",t.rankListTime={},t.localStorageKey="game_MD_1",t}();n.default=o,cc._RF.pop()},{"./SDKConst":"SDKConst"}],Collider:[function(t,e,n){"use strict";cc._RF.push(e,"4d4b5j46uJGdalz7NSONRsx","Collider");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../lib/models/QuadTree"),s=t("./NodeX"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodePrefab=null,e.nodes=[],e.worldTree=null,e}return o(e,t),e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0;var t={x:0,y:0,width:cc.Canvas.instance.node.width,height:cc.Canvas.instance.node.height};this.worldTree=new r.Quadtree(t);for(var e=0;e<1e3;e++){var n=cc.instantiate(this.nodePrefab);this.node.addChild(n),this.nodes.push(n)}},e.prototype.update=function(){this.quadTreeCheck()},e.prototype.quadTreeCheck=function(){for(var t=0,e=this.nodes;t<e.length;t++)(i=e[t]).getComponent(s.default).setIsCollision(!1),this.worldTree.insert(i);for(var n=0;n<this.nodes.length;n++)for(var i=this.nodes[n],o=this.worldTree.retrieve(i),a=0;a<o.length;a++){var r=o[a];if(r!==i){var c=this.isCollision(r,i);c&&(i.getComponent(s.default).setIsCollision(c),r.getComponent(s.default).setIsCollision(c))}}this.worldTree.clear()},e.prototype.isCollision=function(t,e){var n=t.getPosition(),i=e.getPosition(),o=n.x,a=i.x,r=n.y-t.height,s=i.y-e.height;return o<a+e.width&&o+t.width>a&&r<s+e.height&&r+t.height>s},a([u(cc.Prefab)],e.prototype,"nodePrefab",void 0),a([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../lib/models/QuadTree":"QuadTree","./NodeX":"NodeX"}],ColorAssembler2D:[function(t,e,n){"use strict";cc._RF.push(e,"449d7k875lFxZbJoJf+l17Q","ColorAssembler2D");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.executeInEditMode,u=r.requireComponent,p=r.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._colors=[],e}return o(e,t),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors},set:function(t){this._colors=t,this._updateColors()},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this)},e.prototype.update=function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this)},e.prototype.onDisable=function(){cc.director.off(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this),this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR},e.prototype._updateColors=function(){var t=this.getComponent(cc.RenderComponent);if(t){var e=t._assembler;if(e instanceof cc.Assembler2D){var n=e._renderData.uintVDatas[0];if(n)for(var i=this.node.color,o=e.floatsPerVert,a=0,r=e.colorOffset,s=n.length;r<s;r+=o)n[r]=(this.colors[a++]||i)._val}}},a([c],e.prototype,"_colors",void 0),a([c({type:[cc.Color]})],e.prototype,"colors",null),a([s,l,u(cc.RenderComponent),p("i18n:MAIN_MENU.component.renderers/ColorAssembler2D-lamyoung.com")],e)}(cc.Component);n.default=d,cc._RF.pop()},{}],ColorUtil:[function(t,e,n){"use strict";cc._RF.push(e,"baaa1e/AKNDRJg9WHvLwCRm","ColorUtil");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,r=(o.property,function(){function t(){}var e;return e=t,t.getColorInfo=function(t,n){void 0===n&&(n=e.RGB_TYPE);var i=[];return n==e.RGB_TYPE?(i[0]=t>>16,i[1]=t>>8&255,i[2]=255&t):n==e.ARGB_TYPE&&(i[3]=t>>>24,i[0]=t>>>16&255,i[1]=t>>>8&255,i[2]=255&t),i},t.buildColor=function(t,n,i,o,a){return void 0===o&&(o=0),void 0===a&&(a=e.RGB_TYPE),a==e.RGB_TYPE?t<<16|n<<8|i:o<<24|t<<16|n<<8|i},t.toHtml16String=function(t){return"#"+t.toString(16).toUpperCase()},t.ReversalColor=function(t){return(255&t)<<16|(t>>8&255)<<8|t>>16},t.setGrayFlilter=function(t){return e.ColorMatrixFilter(t,[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},t.brightness=function(t,n){void 0===n&&(n=0);var i=[1,0,0,0,n,0,1,0,0,n,0,0,1,0,n,0,0,0,1,0];return e.ColorMatrixFilter(t,i)},t.contrast=function(t,n){void 0===n&&(n=0);var i=[n,0,0,0,128*(1-n),0,n,0,0,128*(1-n),0,0,n,0,128*(1-n),0,0,0,1,0];return e.ColorMatrixFilter(t,i)},t.ColorMatrixFilter=function(t,e){var n=t.getR(),i=t.getG(),o=t.getB(),a=t.getA(),r=e[0]*n+e[1]*i+e[2]*o+e[3]*a+e[4],s=e[5]*n+e[6]*i+e[7]*o+e[8]*a+e[9],c=e[10]*n+e[11]*i+e[12]*o+e[13]*a+e[14],l=e[15]*n+e[16]*i+e[17]*o+e[18]*a+e[19];return new cc.Color(r,s,c,l)},t.RGB_TYPE=24,t.ARGB_TYPE=32,e=i([a],t)}());n.default=r,cc._RF.pop()},{}],DataEvent:[function(t,e,n){"use strict";cc._RF.push(e,"7f63ao4uWBLcaNt8M5pmogp","DataEvent"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.DataEvent=function(t,e){void 0===e&&(e=null),this._type=t,this._data=e},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),t}();n.default=i,cc._RF.pop()},{}],DataManager:[function(t,e,n){"use strict";cc._RF.push(e,"fa5708hUSJAf6lY3Iza1ByM","DataManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataManager=void 0;var i=t("../util/StorageUtil"),o=function(){function t(){this.cacheData={},this.getData=i.default.getItem,this.setData=i.default.setItem,this.removeData=i.default.removeItem,this.BundleList=null,this.BundleList={}}return t.prototype.setBundle=function(t,e){this.BundleList[t]||(this.BundleList[t]=e)},t.prototype.getBundle=function(t){if(this.BundleList[t])return this.BundleList[t]},t}();n.DataManager=o,cc._RF.pop()},{"../util/StorageUtil":"StorageUtil"}],DateUtils:[function(t,e,n){"use strict";cc._RF.push(e,"d814d6hHKpF97MY4whNY7wi","DateUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getTimeStamp=function(t){return new Date(t).getTime()},t.getTimeStampToSecond=function(e){return Math.floor(t.getTimeStamp(e)/1e3)},t.timeFormat=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n="Hour");var i=Math.floor(e?t/1e3:t),o=i%60,a=(o<10?"0":"")+o;return i-=i%60,o=(i/=60)%60,i-=i%60,"Hour"==n||i>0?((o=i/60)<10?"0":"")+o+":"+a:(i<10?"0":"")+i+":"+a},t.timeStampDay=function(t,e){void 0===e&&(e=!1);var n=Math.floor(t/60/24),i=Math.floor(t/60%24),o=Math.floor(t%60),a="";return n>0&&(a=n+"d"),i>0&&(a+=" "+i+"h"),e&&o>0&&(a+=" "+o+"m"),n<=0&&(a=this.timeFormat(60*t,!1,"Hour")),a},t.getTodayEndTime=function(){var t=(new Date).getFullYear(),e=(new Date).getMonth(),n=(new Date).getDate(),i=new Date(t,e,n,23,59,59).getTime();return console.log(t,e,n,i),i},t.getTodayDate=function(t){var e=t||new Date,n=e.getFullYear().toString(),i=(e.getMonth()+1).toString(),o=e.getDate().toString();return n+"-"+(i=Number(i)<0?"0"+i:i)+"-"+(Number(o)<0?"0"+o:o)},t.timeFormatToCountDown=function(t){var e=Math.ceil(t/1e3),n=e/3600,i=e%3600/60,o=e%60;return 0!=(0|n)?[0|n,"h ",0|i," min"].join(""):[0|i,"min ",0|o," s"].join("")},t.CountDown=function(t){var e=t,n=Math.floor(e%3600/60),i=Math.floor(e%60);return n+":"+(i>9?i:"0"+i)},t}();n.default=i,cc._RF.pop()},{}],DecodeStream:[function(t,e,n){"use strict";cc._RF.push(e,"7dc6e4kHxZGZ4Ji8YrIxbXH","DecodeStream"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype.ensureBuffer=function(t){var e=this.buffer,n=e?e.byteLength:0;if(t<n)return e;for(var i=512;i<t;)i<<=1;for(var o=new Uint8Array(i),a=0;a<n;++a)o[a]=e[a];return this.buffer=o},t.prototype.getBytes=function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var n=e+t;!this.eof&&this.bufferLength<n;)this.readBlock();var i=this.bufferLength;n>i&&(n=i)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)},t.prototype.readBlock=function(){},t}();n.default=i,cc._RF.pop()},{}],DesignView:[function(t,e,n){"use strict";cc._RF.push(e,"812db104QJDqrmHNlsnvWUj","DesignView");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.executeInEditMode,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sprite=null,e._spriteFrame=null,e._prefabFileId="",e._opacity=70,e._offsetX=0,e._offsetY=0,e._showTop=!0,e._designUrl="",e}return o(e,t),Object.defineProperty(e.prototype,"spriteFrame",{get:function(){return this._spriteFrame},set:function(t){this._updateDesignView(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTop",{get:function(){return this._showTop},set:function(t){this._showTop=t,this._updateOrder()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=t,this._updateOpatity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this._offsetX},set:function(t){this._offsetX=t,this._updateOffset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this._offsetY},set:function(t){this._offsetY=t,this._updateOffset()},enumerable:!1,configurable:!0}),e.prototype._updateDesignView=function(t){if(this._spriteFrame!==t){if(this._designUrl=t?t._uuid:"",!this._sprite){var e=new cc.Node("DesignView");this._sprite=e.addComponent(cc.Sprite),e.parent=this.node,e._objFlags|=cc.Object.Flags.DontSave|cc.Object.Flags.LockedInEditor|cc.Object.Flags.HideInHierarchy,this._updateOffset(),this._updateOrder(),this._updateOpatity()}this._sprite.spriteFrame=t,this._spriteFrame=t}},e.prototype._updateOffset=function(){if(this._sprite){var t=this._sprite.node;t.x=this._offsetX,t.y=this._offsetY}},e.prototype._updateOrder=function(){this._sprite&&(this._sprite.node.zIndex=this._showTop?999:-1)},e.prototype._updateOpatity=function(){this._sprite&&(this._sprite.node.opacity=this._opacity)},e.prototype.onLoad=function(){},e.prototype._isCurPrefab=function(){var t=this.node._prefab;return t&&t.root&&(!this._prefabFileId||this._prefabFileId===t.fileId)},e.prototype.onEnable=function(){this._sprite&&(this._sprite.enabled=!0)},e.prototype.onDisable=function(){this._sprite&&(this._sprite.enabled=!1)},e.prototype.onDestroy=function(){!this._sprite||this._sprite.node._objFlags&cc.Object.Flags.Destroying||this._sprite.node.destroy()},a([c],e.prototype,"_prefabFileId",void 0),a([c],e.prototype,"_opacity",void 0),a([c],e.prototype,"_offsetX",void 0),a([c],e.prototype,"_offsetY",void 0),a([c],e.prototype,"_showTop",void 0),a([c],e.prototype,"_designUrl",void 0),a([c({type:cc.SpriteFrame,displayName:"\u8bbe\u8ba1\u56fe"})],e.prototype,"spriteFrame",null),a([c({type:cc.Boolean,displayName:"\u7f6e\u9876"})],e.prototype,"showTop",null),a([c({type:cc.Integer,displayName:"\u900f\u660e\u5ea6",slide:!0,min:0,max:255})],e.prototype,"opacity",null),a([c({type:cc.Integer,displayName:"X\u504f\u79fb"})],e.prototype,"offsetX",null),a([c({type:cc.Integer,displayName:"Y\u504f\u79fb"})],e.prototype,"offsetY",null),a([s,l],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],EffectClearGuideLine:[function(t,e,n){"use strict";cc._RF.push(e,"89dbaerTkBNvJzrOtU8RRGG","EffectClearGuideLine");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GameConfig"),s=t("../GameCore"),c=t("../TileUtils"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Line=null,e.LinePoint1=null,e.LinePoint2=null,e.LineTurnPoint1=null,e.LineTurnPoint2=null,e}return o(e,t),e.prototype.onLoad=function(){this.LinePoint1.active=!0,this.LinePoint2.active=!0,this.LineTurnPoint1.active=!0,this.LineTurnPoint2.active=!0},e.prototype.onDestroy=function(){},e.prototype.setLineLength=function(t,e,n,i,o,a){var l=r.default.ClearLineLengthRate*c.default.getTileLength(s.default.instance.curGridXCount,s.default.instance.curGridYCount);t==n&&(this.Line.width=l,this.Line.height=Math.abs(e-i),this.node.position=cc.v3(t,(e+i)/2)),e==i&&(this.Line.width=Math.abs(t-n),this.Line.height=l,this.node.position=cc.v3((t+n)/2,e));var u=s.default.instance.GameEffectUpContent.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(cc.v3(t,e))),p=s.default.instance.GameEffectUpContent.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(cc.v3(n,i)));if(3==a)switch(o){case 0:this.LinePoint1.position=u,this.LinePoint2.active=!1,this.LineTurnPoint1.active=!1,this.LineTurnPoint2.active=!1;break;case 1:this.LineTurnPoint1.position=u,this.LineTurnPoint2.position=p,this.LinePoint1.active=!1,this.LinePoint2.active=!1;break;case 2:this.LinePoint2.position=p,this.LinePoint1.active=!1,this.LineTurnPoint1.active=!1,this.LineTurnPoint2.active=!1}else if(2==a)switch(o){case 0:this.LinePoint1.position=u,this.LineTurnPoint1.position=p,this.LinePoint2.active=!1,this.LineTurnPoint2.active=!1;break;case 1:this.LinePoint2.position=p,this.LinePoint1.active=!1,this.LineTurnPoint1.active=!1,this.LineTurnPoint2.active=!1}else this.LinePoint1.position=u,this.LinePoint2.position=p,this.LineTurnPoint1.active=!1,this.LineTurnPoint2.active=!1;this.LinePoint1.parent=s.default.instance.GameEffectUpContent,this.LinePoint2.parent=s.default.instance.GameEffectUpContent,this.LineTurnPoint1.parent=s.default.instance.GameEffectUpContent,this.LineTurnPoint2.parent=s.default.instance.GameEffectUpContent,cc.tween(this.Line).to(.4,{opacity:255}).delay(.3).to(.2,{opacity:0}).removeSelf().start(),this.LinePoint1.opacity=0,this.LinePoint2.opacity=0,this.LineTurnPoint1.opacity=0,this.LineTurnPoint2.opacity=0,cc.tween(this.LinePoint1).to(.3,{opacity:255}).delay(.5).to(.2,{opacity:0}).removeSelf().start(),cc.tween(this.LinePoint2).to(.3,{opacity:255}).delay(.5).to(.2,{opacity:0}).removeSelf().start(),cc.tween(this.LineTurnPoint1).to(.4,{opacity:255}).delay(.33).to(.2,{opacity:0}).removeSelf().start(),cc.tween(this.LineTurnPoint2).to(.4,{opacity:255}).delay(.33).to(.2,{opacity:0}).removeSelf().start()},e.prototype.showLine=function(t,e,n,i,o,a){this.setLineLength(t,e,n,i,o,a),cc.tween(this.node).delay(r.default.TileGuideClearTime).removeSelf().start()},a([p(cc.Node)],e.prototype,"Line",void 0),a([p(cc.Node)],e.prototype,"LinePoint1",void 0),a([p(cc.Node)],e.prototype,"LinePoint2",void 0),a([p(cc.Node)],e.prototype,"LineTurnPoint1",void 0),a([p(cc.Node)],e.prototype,"LineTurnPoint2",void 0),a([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../GameConfig":"GameConfig","../GameCore":"GameCore","../TileUtils":"TileUtils"}],EffectClearLine:[function(t,e,n){"use strict";cc._RF.push(e,"ffb1fyYRXJBgIm22Dw+cwqT","EffectClearLine");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/event/EventManager"),s=t("../../Datas/EventName"),c=t("../../GameConfig"),l=t("../GameCore"),u=t("../TileUtils"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Line=null,e.LinePoint1=null,e.LinePoint2=null,e}return o(e,t),e.prototype.onLoad=function(){this.LinePoint1.active=!0,this.LinePoint2.active=!0,r.default.instance.on(s.default.ClearTipTile,this.clearTipTile,this)},e.prototype.onDestroy=function(){r.default.instance.off(s.default.ClearTipTile,this.clearTipTile,this)},e.prototype.setLineLength=function(t,e,n,i,o){void 0===o&&(o=!1);var a=c.default.ClearLineLengthRate*u.default.getTileLength(l.default.instance.curGridXCount,l.default.instance.curGridYCount);t==n&&(this.Line.width=a,this.Line.height=Math.abs(e-i),this.node.position=cc.v3(t,(e+i)/2)),e==i&&(this.Line.width=Math.abs(t-n),this.Line.height=a,this.node.position=cc.v3((t+n)/2,e)),o?(this.LinePoint1.opacity=255,this.LinePoint2.opacity=255):(this.LinePoint1.opacity=0,this.LinePoint2.opacity=0),this.LinePoint1.setContentSize(a,a),this.LinePoint2.setContentSize(a,a),this.LinePoint1.position=this.node.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(cc.v3(t,e))),this.LinePoint2.position=this.node.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(cc.v3(n,i)))},e.prototype.showLine=function(t,e,n,i,o){void 0===o&&(o=!1),this.node.opacity=0,this.setLineLength(t,e,n,i,o),cc.tween(this.node).to(c.default.TileClearTime,{opacity:255}).to(c.default.TileClearTime,{opacity:0}).removeSelf().start()},e.prototype.showGuideLine=function(t,e,n,i){this.node.opacity=0,this.setLineLength(t,e,n,i),cc.tween(this.node).to(c.default.TileClearTime,{opacity:255}).to(c.default.TileClearTime,{opacity:0}).removeSelf().start()},e.prototype.showTipLine=function(t,e,n,i){this.node.opacity=0,this.LinePoint1.opacity=255,this.LinePoint2.opacity=255,this.setLineLength(t,e,n,i,!0),cc.tween(this.node).to(c.default.TileClearTime,{opacity:255}).start()},e.prototype.clearTipTile=function(){cc.tween(this.node).to(c.default.TileClearTime,{opacity:0}).removeSelf().start()},a([h(cc.Node)],e.prototype,"Line",void 0),a([h(cc.Node)],e.prototype,"LinePoint1",void 0),a([h(cc.Node)],e.prototype,"LinePoint2",void 0),a([d],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../Datas/EventName":"EventName","../../GameConfig":"GameConfig","../GameCore":"GameCore","../TileUtils":"TileUtils"}],EffectUtils:[function(t,e,n){"use strict";cc._RF.push(e,"5b974m5THBDZqMGQ6ON0ij8","EffectUtils");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Framework/core/event/EventManager"),a=t("../../../Framework/core/manager/SoundManager"),r=t("../../../Framework/core/util/Utils"),s=t("../../Datas/EventName"),c=t("../../Datas/GameDataManager"),l=t("../../GameConfig"),u=t("../GameCore"),p=t("./EffectClearGuideLine"),d=t("./EffectClearLine"),h=cc._decorator,f=h.ccclass,m=(h.property,function(){function t(){this.comboNames={2:"ComboGoodTip",3:"ComboGreatTip",4:"ComboExcellentTip",5:"ComboUnbelievableTip"}}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.getEffectClearLine=function(t,e,n,i,o){void 0===o&&(o=!1),c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/ClearLine",cc.Prefab,function(a,r){if(a)console.error(a);else{var s=cc.instantiate(r);s.parent=u.default.instance.GameEffectContent,s.getComponent(d.default).showLine(t,e,n,i,o)}})},t.prototype.getEffectGuideClearLine=function(t,e,n,i,o,a){c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/ClearGuideLine",cc.Prefab,function(r,s){if(r)console.error(r);else{var c=cc.instantiate(s);c.parent=u.default.instance.GameEffectContent,c.getComponent(p.default).showLine(t,e,n,i,o,a)}})},t.prototype.getEffectClearTipLine=function(t,e,n,i){c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/ClearLine",cc.Prefab,function(o,a){if(o)console.error(o);else{var r=cc.instantiate(a);r.parent=u.default.instance.GameEffectContent,r.getComponent(d.default).showTipLine(t,e,n,i)}})},t.prototype.getEffectClearStar=function(t,e,n){c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/ClearStar",cc.Prefab,function(i,a){if(i)console.error(i);else{var r=cc.instantiate(a);r.parent=u.default.instance.GameEffectUpContent,r.position=t,r.scale=0;var c=t.sub(e),l=c.normalize().mul(1.08*c.mag()).add(e);cc.tween(r).to(.2,{scale:1},{easing:"backOut"}).delay(n).to(.3,{position:l},{easing:"cubicOut"}).to(.6,{position:e},{easing:"cubicIn"}).call(function(){r.getChildByName("Star").active=!1,r.getChildByName("Streak").getComponent(cc.ParticleSystem).stopSystem(),r.getChildByName("Knock").getComponent(cc.ParticleSystem).resetSystem(),o.default.instance.emit(s.default.StarAdd)}).delay(1).removeSelf().start()}})},t.prototype.getEffectTimeClearStar=function(t,e){c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/ClearTimeStar",cc.Prefab,function(n,i){if(n)console.error(n);else{var r=cc.instantiate(i);r.parent=u.default.instance.GameEffectUpContent,r.position=t,r.setSiblingIndex(0),r.scale=0;var c=cc.v2(t.x+.1*Math.abs(e.x-t.x),e.y-2*Math.abs(e.y-t.y));cc.tween(r).parallel(cc.tween().to(.2,{scale:1}),cc.bezierTo(l.default.TimeOverStarFlyTime,[cc.v2(t),c,cc.v2(e)]).easing(cc.easeQuarticActionOut())).call(function(){r.getChildByName("Star").active=!1,r.getComponentInChildren(cc.ParticleSystem).resetSystem(),a.default.instance.starFly(),o.default.instance.emit(s.default.StarAdd)}).delay(1).removeSelf().start()}})},t.prototype.getEffectCombo=function(t,e){e>=2&&(e=Math.min(5,e),c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/"+this.comboNames[e],cc.Prefab,function(e,n){if(e)console.error(e);else{var i=cc.instantiate(n);i.parent=u.default.instance.GameEffectContent,i.position=t,i.scale=.5;var o=i.getComponent(cc.Animation);o.on("finished",function(){i.destroy()}),o.play()}}))},t.prototype.getEffectClearRocket=function(t,e){c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/ClearRocket",cc.Prefab,function(n,i){if(n)console.error(n);else{var c=cc.instantiate(i);c.parent=u.default.instance.GameEffectContent,c.position=u.default.instance.GameEffectContent.convertToNodeSpaceAR(t.getRocketEffectWorldPosition());var p=u.default.instance.GameEffectContent.convertToNodeSpaceAR(e.node.parent.convertToWorldSpaceAR(e.node.position)),d=r.default.getLineAngle(t.node.x,t.node.y,e.node.x,e.node.y)-90;cc.tween(c).delay(l.default.RocketPrepareTime).set({angle:d}).call(function(){a.default.instance.RocketFly()}).to(l.default.RocketFlyTime,{position:p}).removeSelf().call(function(){e.clearFromGame(),u.default.instance.giveStar(e.x,e.y),o.default.instance.emit(s.default.GameMoveWay),u.default.instance.isGameStalemate=!0,u.default.instance.GameStalemateTime+=l.default.TileClearTime,o.default.instance.emit(s.default.GameResult)}).start()}})},t.prototype.getEffectMineBomb=function(t,e){var n=this;c.default.instance.getBundle(l.default.MainBundleName).load("Prefabs/Effects/MineBomb",cc.Prefab,function(i,o){if(i)console.error(i);else{var a=cc.instantiate(o);a.parent=u.default.instance.GameEffectContent,a.position=t,a.getComponent(cc.Animation).on("finished",function(){a.removeFromParent(!1),null==e||e.call()},n)}})},e=i([f],t)}());n.default=m,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/Utils":"Utils","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../GameConfig":"GameConfig","../GameCore":"GameCore","./EffectClearGuideLine":"EffectClearGuideLine","./EffectClearLine":"EffectClearLine"}],EgretWebSocket:[function(t,e,n){"use strict";cc._RF.push(e,"bcd39kOqmpIrLlc0xG0Sz9R","EgretWebSocket");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("./HTML5WebSocket"),r=t("../data/ByteArray"),s=t("../manager/ErrorManager"),c=t("../event/EventConst"),l=function(t){function e(n,i){void 0===n&&(n=""),void 0===i&&(i=0);var o=t.call(this)||this;return o._writeMessage="",o._readMessage="",o._connected=!1,o._connecting=!1,o._isReadySend=!1,o._bytesWrite=!1,o._type=e.TYPE_STRING,o._connected=!1,o._writeMessage="",o._readMessage="",o.socket=new a.default,o.socket.addCallBacks(o.onConnect,o.onClose,o.onSocketData,o.onError,o),o}return o(e,t),e.prototype.connect=function(t,e){this._connecting||this._connected||(this._connecting=!0,this.socket.connect(t,e))},e.prototype.connectByUrl=function(t){this._connecting||this._connected||(this._connecting=!0,this.socket.connectByUrl(t))},e.prototype.close=function(){this._connected&&this.socket.close()},e.prototype.onConnect=function(){this._connected=!0,this._connecting=!1,this.dispatch(c.default.CONNECT)},e.prototype.onClose=function(){this._connected=!1,this.dispatch(c.default.CLOSE)},e.prototype.onError=function(){this._connecting&&(this._connecting=!1),this.dispatch(c.default.IO_ERROR)},e.prototype.onSocketData=function(t){"string"==typeof t?this._readMessage+=t:this._readByte._writeUint8Array(new Uint8Array(t)),this.dispatch(c.default.PROGRESS,this)},e.prototype.flush=function(){this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),this._isReadySend=!1):s.default.warn(3101)},e.prototype.writeUTF=function(t){this._connected?(this._type==e.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(t)):this._writeMessage+=t,this.flush()):s.default.warn(3101)},e.prototype.readUTF=function(){var t;return this._type==e.TYPE_BINARY?(this._readByte.position=0,t=this._readByte.readUTF(),this._readByte.clear()):(t=this._readMessage,this._readMessage=""),t},e.prototype.writeBytes=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._connected?this._writeByte?(this._bytesWrite=!0,this._writeByte.writeBytes(t,e,n),this.flush()):s.default.warn(3102):s.default.warn(3101)},e.prototype.readBytes=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(t,e,n),this._readByte.clear()):s.default.warn(3102)},Object.defineProperty(e.prototype,"connected",{get:function(){return this._connected},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,t!=e.TYPE_BINARY||this._writeByte||(this._readByte=new r.default,this._writeByte=new r.default)},enumerable:!1,configurable:!0}),e.TYPE_STRING="webSocketTypeString",e.TYPE_BINARY="webSocketTypeBinary",e}(t("../event/EventDispatcher").default);n.default=l,cc._RF.pop()},{"../data/ByteArray":"ByteArray","../event/EventConst":"EventConst","../event/EventDispatcher":"EventDispatcher","../manager/ErrorManager":"ErrorManager","./HTML5WebSocket":"HTML5WebSocket"}],Endian:[function(t,e,n){"use strict";cc._RF.push(e,"d49f0FapmNBdoxXZUcKKmsr","Endian"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();n.default=i,cc._RF.pop()},{}],EnhancedComponent:[function(t,e,n){"use strict";cc._RF.push(e,"add014ilbFEpIEmxppS3COj","EnhancedComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.EnhancedComponent=void 0;var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.executePreFrame=function(t,e){var n=this;return new Promise(function(i){var o=t,a=function(){for(var t=(new Date).getTime(),r=o.next();;r=o.next()){if(null==r||r.done)return void i();if((new Date).getTime()-t>e)return void n.scheduleOnce(function(){a()})}};a()})},a([s],e)}(cc.Component));n.EnhancedComponent=c,cc._RF.pop()},{}],ErrorManager:[function(t,e,n){"use strict";cc._RF.push(e,"48f6dBLQDlDvJw3eYFnocR9","ErrorManager");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.error=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n=[];for(var o=1;o<arguments.length;o++)n[o-1]=arguments[o];var a=[];for(o=1;o<arguments.length;o++)a[o-1]=arguments[o];var r=e.ErrorCode[t];r||(r="{"+t+"}");for(var s=a.length,c=0;c<s;c++)r=r.replace("{"+c+"}",a[c]);throw console.error("Error #"+t+": "+r),new Error("#"+t+": "+r)},e.warn=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n=[];for(var o=1;o<arguments.length;o++)n[o-1]=arguments[o];var a=[];for(o=1;o<arguments.length;o++)a[o-1]=arguments[o];var r=e.ErrorCode[t];r||(r="{"+t+"}");for(var s=a.length,c=0;c<s;c++)r=r.replace("{"+c+"}",a[c]);console.warn("Warning #"+t+": "+r)},e.ErrorCode={1011:"\u6d41\u9519\u8bef\u3002URL: {0}",1025:"\u9047\u5230\u6587\u4ef6\u5c3e",1026:"EncodingError! The code point {0} could not be encoded.",1027:"DecodingError",1052:"\u7f51\u7edc\u8bf7\u6c42\u8d85\u65f6:{0}",3100:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket",3101:"\u8bf7\u5148\u8fde\u63a5WebSocket",3102:"\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"},e}(cc.Component);n.default=a,cc._RF.pop()},{}],EventConst:[function(t,e,n){"use strict";cc._RF.push(e,"1e32dAZvGNCxpfMmOJAHXCf","EventConst"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.CONNECT="connect",t.CLOSE="close",t.IO_ERROR="IO_error",t.PROGRESS="Progress",t.COMPLETE="complete",t}();n.default=i,cc._RF.pop()},{}],EventDispatcher:[function(t,e,n){"use strict";cc._RF.push(e,"d3dc7+DEcRE/5o3sxDIXvCM","EventDispatcher"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.listenerList={}}return t.prototype.addEventListener=function(t,e,n){var i=this.listenerList[t];null==i&&(i=[]),i.push({listener:e,target:n}),this.listenerList[t]=i},t.prototype.removeEventListener=function(t,e,n){var i=this.listenerList[t];if(null!=i){for(var o,a=i.length-1;a>=0;a--)if((o=i[a]).listener==e&&o.target==n){i.splice(a,1);break}0==i.length&&delete this.listenerList[t]}},t.prototype.removeEventListeners=function(t){null!=this.listenerList[t]&&delete this.listenerList[t]},t.prototype.dispatchEvent=function(t){if(null==t)return!1;var e=this.listenerList[t.type];if(null==e)return!1;for(var n=0,i=e;n<i.length;n++){var o=i[n];o.listener.call(o.target,t)}return!0},t.prototype.dispatch=function(t,e,n,i,o,a){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),void 0===a&&(a=void 0);var r=this.listenerList[t];if(null==r)return!1;for(var s=0,c=r;s<c.length;s++){var l=c[s];l.listener.call(l.target,e,n,i,o,a)}return!0},t.prototype.hasEventListener=function(t){return this.listenerList.hasOwnProperty(t)},t}();n.default=i,cc._RF.pop()},{}],EventInterface:[function(t,e,n){"use strict";cc._RF.push(e,"23ddeCEEghPU5k/R0jTjjfy","EventInterface"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],EventManager:[function(t,e,n){"use strict";cc._RF.push(e,"3de36pqBDJHUaJIqpKOOMAN","EventManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this._eventCacheMap=new Map}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype._on=function(t,e,n,i){var o=this._eventCacheMap.get(t);o||(o=[]),-1===o.findIndex(function(t){return t.target===n&&t.callback===e})&&(o.push({target:n,callback:e,once:i}),this._eventCacheMap.set(t,o))},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this._eventCacheMap.get(t);if(i)for(var o=null,a=i.length-1;a>=0;a--)(o=i[a]).callback.apply(o.target,e),o.once&&i.splice(a,1)},t.prototype.on=function(t,e,n){this._on(t,e,n,!1)},t.prototype.onOnce=function(t,e,n){this._on(t,e,n,!0)},t.prototype.off=function(t,e,n){var i=this._eventCacheMap.get(t);if(i)if(e&&n){var o=i.findIndex(function(t){return t.target===n&&t.callback===e});-1!==o&&(i.splice(o,1),this._eventCacheMap.set(t,i))}else i=null,this._eventCacheMap.delete(t)},t.prototype.offTarget=function(t){this._eventCacheMap.forEach(function(e){if(e)for(var n=e.length-1;n>=0;n--)e[n].target===t&&e.splice(n,1)})},t}();n.default=i,cc._RF.pop()},{}],EventName:[function(t,e,n){"use strict";cc._RF.push(e,"2476aXYrpVAuLgmiksRbWcG","EventName"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.i18n="i18n",t.GameReset="GameReset",t.GameResult="GameResult",t.GameMoveWay="GameMoveWay",t.GameStalemate="GameStalemate",t.ResetUIGame="ResetUIGame",t.UpdateUIGame="UpdateUIGame",t.UpdateCoin="UpdateCoin",t.UpdateMilestoneGetCount="UpdateMilestoneGetCount",t.StarAdd="StarAdd",t.GameClickTile="GameClickTile",t.UpdateTileIcon="UpdateTileIcon",t.Combo="Combo",t.ClearTipTile="ClearTipTile",t.MapScrollTo="MapScrollTo",t.MapSetShowLevel="MapSetShowLevel",t.MapHidePositionAnimation="MapHidePositionAnimation",t.MapAnimation="MapAnimation",t.MapProgressAnimation="MapProgressAnimation",t.MapLandmarkUnlockFinish="MapLandmarkUnlockFinish",t.MapChapterFinish="MapChapterFinish",t}();n.default=i,cc._RF.pop()},{}],FlateStream:[function(t,e,n){"use strict";cc._RF.push(e,"160cfx6G8ZGMrHNDtAponFZ","FlateStream");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(n){var i=t.call(this)||this;i.codeSize=0,i.codeBuf=0;var o=0,a=n[o++],r=n[o++];return-1!=a&&-1!=r||e.error("Invalid header in flate stream"),8!=(15&a)&&e.error("Unknown compression method in flate stream"),((a<<8)+r)%31!=0&&e.error("Bad FCHECK in flate stream"),32&r&&e.error("FDICT bit set in flate stream"),i.bytes=n,i.bytesPos=2,i.codeSize=0,i.codeBuf=0,i}return o(e,t),e.error=function(t){throw new Error(t)},e.prototype.getBits=function(t){for(var n,i=this.codeSize,o=this.codeBuf,a=this.bytes,r=this.bytesPos;i<t;)void 0===(n=a[r++])&&e.error("Bad encoding in flate stream"),o|=n<<i,i+=8;return n=o&(1<<t)-1,this.codeBuf=o>>t,this.codeSize=i-=t,this.bytesPos=r,n},e.prototype.getCode=function(t){for(var n=t[0],i=t[1],o=this.codeSize,a=this.codeBuf,r=this.bytes,s=this.bytesPos;o<i;){var c;void 0===(c=r[s++])&&e.error("Bad encoding in flate stream"),a|=c<<o,o+=8}var l=n[a&(1<<i)-1],u=l>>16,p=65535&l;return(0==o||o<u||0==u)&&e.error("Bad encoding in flate stream"),this.codeBuf=a>>u,this.codeSize=o-u,this.bytesPos=s,p},e.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,i=0;i<e;++i)t[i]>n&&(n=t[i]);for(var o=1<<n,a=new Uint32Array(o),r=1,s=0,c=2;r<=n;++r,s<<=1,c<<=1)for(var l=0;l<e;++l)if(t[l]==r){var u=0,p=s;for(i=0;i<r;++i)u=u<<1|1&p,p>>=1;for(i=u;i<o;i+=c)a[i]=r<<16|l;++s}return[a,n]},e.prototype.readBlock=function(){function t(t,e,n,i,o){for(var a=t.getBits(n)+i;a-- >0;)e[l++]=o}var n=this.getBits(3);if(1&n&&(this.eof=!0),0!=(n>>=1)){var i,o;if(1==n)i=e.fixedLitCodeTab,o=e.fixedDistCodeTab;else if(2==n){for(var a=this.getBits(5)+257,r=this.getBits(5)+1,s=this.getBits(4)+4,c=Array(e.codeLenCodeMap.length),l=0;l<s;)c[e.codeLenCodeMap[l++]]=this.getBits(3);for(var u=this.generateHuffmanTable(c),p=0,d=(l=0,a+r),h=new Array(d);l<d;){var f=this.getCode(u);16==f?t(this,h,2,3,p):17==f?t(this,h,3,3,p=0):18==f?t(this,h,7,11,p=0):h[l++]=p=f}i=this.generateHuffmanTable(h.slice(0,a)),o=this.generateHuffmanTable(h.slice(a,d))}else e.error("Unknown block type in flate stream");for(var m=(I=this.buffer)?I.length:0,g=this.bufferLength;;){var y=this.getCode(i);if(y<256)g+1>=m&&(m=(I=this.ensureBuffer(g+1)).length),I[g++]=y;else{if(256==y)return void(this.bufferLength=g);y-=257;var v=(y=e.lengthDecode[y])>>16;v>0&&(v=this.getBits(v)),p=(65535&y)+v,y=this.getCode(o),(v=(y=e.distDecode[y])>>16)>0&&(v=this.getBits(v));var _=(65535&y)+v;g+p>=m&&(m=(I=this.ensureBuffer(g+p)).length);for(var C=0;C<p;++C,++g)I[g]=I[g-_]}}}else{var b,T=this.bytes,S=this.bytesPos;void 0===(b=T[S++])&&e.error("Bad block header in flate stream");var w=b;void 0===(b=T[S++])&&e.error("Bad block header in flate stream"),w|=b<<8,void 0===(b=T[S++])&&e.error("Bad block header in flate stream");var D=b;void 0===(b=T[S++])&&e.error("Bad block header in flate stream"),(D|=b<<8)!=(65535&~w)&&e.error("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var L=this.bufferLength,I=this.ensureBuffer(L+w),M=L+w;this.bufferLength=M;for(var R=L;R<M;++R){if(void 0===(b=T[S++])){this.eof=!0;break}I[R]=b}this.bytesPos=S}},e.codeLenCodeMap=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e.lengthDecode=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),e.distDecode=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),e.fixedLitCodeTab=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],e.fixedDistCodeTab=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],e}(t("./DecodeStream").default);n.default=a,cc._RF.pop()},{"./DecodeStream":"DecodeStream"}],GameApp:[function(t,e,n){"use strict";cc._RF.push(e,"347c3Wr+TRHPazSUy54R6Qs","GameApp"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./sdk/SDKDefault"),o=t("./log/Logger"),a=t("./sdk/ChuanYinH5");cc.macro.ENABLE_WEBGL_ANTIALIAS=!0,cc.macro.CLEANUP_IMAGE_CACHE=!0,cc.dynamicAtlasManager.enabled=!1;var r=function(){function t(){}return Object.defineProperty(t,"VERSION",{get:function(){return t.SDK.getVersion()||"1.0.0"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SDK",{get:function(){return this._SDK||(t.DEBUG?this._SDK=new i.default:this._SDK=new a.default),this._SDK},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Logger",{get:function(){return this._Logger||(this._Logger=new o.default,this._Logger.init({enableLog:this.DEBUG})),this._Logger},enumerable:!1,configurable:!0}),t.DEBUG=!1,t.LANGUAGE="en_US",t._SDK=null,t._Logger=null,t}();n.default=r,cc._RF.pop()},{"./log/Logger":"Logger","./sdk/ChuanYinH5":"ChuanYinH5","./sdk/SDKDefault":"SDKDefault"}],GameConfig:[function(t,e,n){"use strict";cc._RF.push(e,"fe554iemBRGVZau9797/OIQ","GameConfig");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Channel=void 0;var a,r=t("../Framework/core/BaseConfig");(function(t){t[t.Kwai=0]="Kwai",t[t.Chuanyin=1]="Chuanyin"})(a=n.Channel||(n.Channel={}));var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.Channel=a.Kwai,e.MainBundleName="BundleResources",e.PoolNameTile="PoolNameTile",e.TilesPlistMax=144,e.LevelMax=2e4,e.RocketIndex=1e3,e.MilestoneUnlockLevel=13,e.CountDownStartLevel=5,e.GamingADInterShow=30,e.ADInterShow=20,e.ADInterShowCountDown=60,e.FixedADInterShowTime=60,e.ADFreeCoinCoinCount=100,e.ADFreeCoinCoinMaxTime=6,e.UnlimitedTimeShowRate=.3,e.UnlimitedTimeCountDown=10,e.GuideData=[1,5,4,10,8,2,6,9,2,10,3,5,-1,-1,-1,3,7,9,-1,-1,4,8,7,6,1],e.SkillBuyPay={Filp:60,Turn:200,Find:100},e.SkillADBuyMax=6,e.TileGuideClearTime=1,e.TileClearTime=.2,e.TileMoveTime=.5,e.TileMoveMinCount=10,e.TileSlowMoveTime=.8,e.TileFilpTime=.2,e.MineOverTime=60,e.MineOverRetryTime=5,e.RocketPrepareTime=.3,e.RocketFlyTime=.5,e.MapLandmarkStartTime=1.5,e.MapMoveToChapterTime=4,e.TimeOverStarUnit=3,e.TimeOverDesUnit=6,e.TimeOverRetryTime=5,e.TimeOverRetryAddCountDownTime=60,e.TimeOverStarFlyTime=.8,e.ComboTime=5,e.ComboTipY=500,e.ClearLineLengthRate=.15,e.TileDefaultLength=105,e.TileMaxWidth=660,e.TileMaxHeight=800,e.StarProRate1=.55,e.StarProRate2=.25,e.StarProRate3=.2,e.GetBoxMaxLevel=7,e}(r.default);n.default=s,cc._RF.pop()},{"../Framework/core/BaseConfig":"BaseConfig"}],GameCore:[function(t,e,n){"use strict";cc._RF.push(e,"7d644kk5/lF1qT4/h0wfqcQ","GameCore");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Direction=n.GameState=void 0;var r,s,c=t("../../Framework/core/GameApp"),l=t("../../Framework/core/event/EventManager"),u=t("../../Framework/core/manager/ObjectPoolManager"),p=t("../../Framework/core/manager/PopUpManager"),d=t("../../Framework/core/manager/SoundManager"),h=t("../../Framework/core/manager/UIManager"),f=t("../../Framework/core/util/DateUtils"),m=t("../../Framework/core/util/Utils"),g=t("../Datas/EventName"),y=t("../Datas/GameDataManager"),v=t("../Datas/PopupKey"),_=t("../GameConfig"),C=t("./Effects/EffectUtils"),b=t("./GameGuide"),T=t("./GameLinkAlgorithm"),S=t("./SpriteUtils"),w=t("./TileUtils"),D=t("./Tiles/Tile"),L=t("./UI/UIGame"),I=t("./UserData"),M=cc._decorator,R=M.ccclass,P=M.property;(function(t){t.None="None",t.RoundStart="RoundStart",t.RoundRuning="RoundRuning",t.RoundEnd="RoundEnd"})(r=n.GameState||(n.GameState={})),function(t){t.LEFT="LEFT",t.RIGHT="RIGHT",t.UP="UP",t.DOWN="DOWN"}(s=n.Direction||(n.Direction={}));var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PackData=null,e.PackConfig=null,e.LevelData=null,e.LevelStarData=null,e.GameUI=null,e.PrefabTile=null,e.GameContent=null,e.GameGuideContent=null,e.GameEffectContent=null,e.GameEffectUpContent=null,e.TouchContent=null,e.m_GameState=r.None,e.isGaming=!1,e.isRuning=!1,e.isTiming=!1,e.isTiping=!1,e.LevelSerial=0,e.curLevelIndex=0,e.curGridXCount=0,e.curGridYCount=0,e.TilesMap=null,e.SelectTile=null,e.ComboCount=0,e.ComboMaxCount=0,e.StarCount=0,e.levelStar=0,e.levelAddStar=0,e.levelHasStar=0,e.MineCount=0,e.moveDir=0,e.moveDirXY=null,e.moveDirIndex=0,e.moveDirMulti=[],e.GameCountDownTime=0,e.GameTime=0,e.isGameUnlimitedTime=!1,e.isShowGameUnlimitedTime=!1,e.GameStalemateTime=0,e.isGameStalemate=!1,e.GameUseAtlasName="",e.GameUseAtlas=null,e.interADShow=!1,e.interADGamingShow=!1,e.interADTime=0,e.interADCountDown=0,e.fixedInterADShow=!1,e.fixedInterADTime=0,e.touchID=-1,e.tempCountDownTime=0,e.shakeTween=null,e}var n;return o(e,t),n=e,Object.defineProperty(e.prototype,"GameState",{get:function(){return this.m_GameState},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n.instance=this,u.default.instance.createObjectPool(_.default.PoolNameTile,this.PrefabTile,120),this.TouchContent.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.TouchContent._touchListener.setSwallowTouches(!1),l.default.instance.on(g.default.GameClickTile,this.gameClickTile,this),l.default.instance.on(g.default.GameReset,this.gameReset,this),l.default.instance.on(g.default.GameStalemate,this.gameStalemate,this),l.default.instance.on(g.default.GameMoveWay,this.moveWayTiles,this),l.default.instance.on(g.default.GameResult,this.gameResult,this)},e.prototype.onDestroy=function(){u.default.instance.clearPool(_.default.PoolNameTile),this.TouchContent.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),l.default.instance.off(g.default.GameClickTile,this.gameClickTile,this),l.default.instance.off(g.default.GameReset,this.gameReset,this),l.default.instance.off(g.default.GameStalemate,this.gameStalemate,this),l.default.instance.off(g.default.GameMoveWay,this.moveWayTiles,this),l.default.instance.off(g.default.GameResult,this.gameResult,this)},e.prototype.start=function(){var t=this;0==I.default.instance.Level?this.gameStart(I.default.instance.Level):p.default.addPop(v.default.UIGameMenu),cc.game.on(cc.game.EVENT_HIDE,function(){t.isGaming&&t.isRuning},this),cc.game.on(cc.game.EVENT_SHOW,function(){t.isGaming&&t.isRuning},this)},e.prototype.touchStart=function(){this.interADTime=0},e.prototype.update=function(t){this.isGaming&&this.isRuning&&this.isTiming&&(this.GameTime+=t,this.curLevelIndex>=_.default.CountDownStartLevel&&(this.isGameUnlimitedTime||(this.GameCountDownTime-=t,this.tempCountDownTime!=Math.floor(this.GameCountDownTime)&&(this.tempCountDownTime=Math.floor(this.GameCountDownTime),this.tempCountDownTime>=0&&this.tempCountDownTime<=5&&d.default.instance.TimeOver()),!this.isShowGameUnlimitedTime&&this.GameCountDownTime<=_.default.UnlimitedTimeShowRate*y.default.instance.getLevelCountDownTime(this.LevelData.layout)&&(this.isShowGameUnlimitedTime=!0,this.GameUI.showUnlimitedTime()),this.GameCountDownTime<=0&&this.gameTimeOver())),this.isGameStalemate&&(this.GameStalemateTime-=t,this.GameStalemateTime<0&&(this.GameStalemateTime=0,this.isGameStalemate=!1,this.gameStalemate())))},e.prototype.gameStart=function(t){this.curLevelIndex=t,this.gameReset(),this.isGaming=!0,this.isRuning=!0,this.LevelData=y.default.instance.getLevelData(this.curLevelIndex),this.LevelStarData=y.default.instance.getGetStarConfig(this.curLevelIndex,this.LevelData.layout),this.curLevelIndex>=_.default.CountDownStartLevel&&(this.GameCountDownTime=y.default.instance.getLevelCountDownTime(this.LevelData.layout)),this.MineCount=this.LevelData.mine,this.moveDir=this.LevelData.moveWay,this.randomMoveDir(),c.default.Logger.log("@StartGame",this.LevelData),this.generateSpriteAtlas(this.curLevelIndex),l.default.instance.emit(g.default.UpdateUIGame),l.default.instance.emit(g.default.ClearTipTile),h.default.instance.loadedTransition(function(){d.default.instance.levelStart()})},e.prototype.generateSpriteAtlas=function(t){var e=this,n="";n=t>=I.default.instance.Level?"Img"+Math.min(_.default.TilesPlistMax,I.default.instance.Level):"Img"+m.default.randomInt(0,Math.min(_.default.TilesPlistMax,t)),this.GameUseAtlasName=n,S.default.instance.getSpriteAltas("Textures/Tiles/"+n,function(t){e.GameUseAtlas=t,e.parseLevelData(),e.gameStalemate(),e.updateMine(),e.updateSiblingIndex(),0!=I.default.instance.Level&&e.gameTilesStartAnimation(),b.default.instance.startGuide(e.curLevelIndex)},this)},e.prototype.parseLevelData=function(){this.LevelSerial=this.LevelData.index,this.curGridXCount=this.LevelData.row+2,this.curGridYCount=this.LevelData.col+2;for(var t=w.default.getTileLength(this.curGridXCount,this.curGridYCount),e=0,n=null,i=0;i<this.curGridXCount;i++)for(var o=0;o<this.curGridYCount;o++){this.TilesMap[i]||(this.TilesMap[i]=[]);var a=!1;0==i||0==o||i==this.curGridXCount-1||o==this.curGridYCount-1?(a=!0,n=null):(n=this.LevelData.values[e],e++);var r=u.default.instance.getObject(_.default.PoolNameTile);r.parent=this.GameContent,r.position=w.default.XYToPosition(i,o,this.curGridXCount,this.curGridYCount);var s=r.getComponent(D.default);this.TilesMap[i][o]=s,this.TilesMap[i][o].setDataView(i,o,n,a,t)}},e.prototype.gameTilesStartAnimation=function(){for(var t=0;t<this.curGridXCount;t++)for(var e=0;e<this.curGridYCount;e++)this.TilesMap[t][e].generateAnimation()},e.prototype.gameReset=function(){if(this.m_GameState=r.None,this.isGaming=!1,this.isRuning=!1,this.isTiping=!1,this.isTiming=!1,this.TilesMap)for(var t=0;t<this.curGridXCount;t++)for(var e=0;e<this.curGridYCount;e++)this.TilesMap[t][e]&&this.TilesMap[t][e].removeSelf();this.TilesMap=[],this.SelectTile=null,this.ComboCount=0,this.ComboMaxCount=0,this.GameCountDownTime=0,this.GameTime=0,this.GameStalemateTime=0,this.isGameStalemate=!1,this.StarCount=0,this.MineCount=0,this.moveDir=0,this.moveDirXY=null,this.moveDirIndex=0,this.moveDirMulti=[s.UP,s.DOWN,s.LEFT,s.RIGHT],m.default.shuffleArray(this.moveDirMulti),this.levelStar=0,this.levelAddStar=0,this.levelHasStar=0,this.interADTime=0,this.interADGamingShow=!1,this.fixedInterADTime=0,this.fixedInterADShow=!1,this.isGameUnlimitedTime=!1,this.isShowGameUnlimitedTime=!1,this.GameUseAtlasName="",this.GameUseAtlas=null,this.GameGuideContent.active=!1,this.GameGuideContent.getChildByName("BlockBg").active=!1,l.default.instance.emit(g.default.ResetUIGame)},e.prototype.gameStalemate=function(){this.isStalemate()&&(c.default.Logger.log("@gameStalemate"),this.randomTiles())},e.prototype.gameResult=function(){var t=this;c.default.Logger.log("@gameResult");for(var e=0;e<this.TilesMap.length;e++)for(var n=0;n<this.TilesMap[e].length;n++){var i=this.TilesMap[e][n];if(i&&!i.isBroken)return!1}this.isTiming=!1,this.isRuning=!1,this.levelAddStar=this.levelStar-I.default.instance.getStarByLevel(this.curLevelIndex),this.levelHasStar=I.default.instance.getStarByLevel(this.curLevelIndex),I.default.instance.setStarByLevel(this.curLevelIndex,this.levelStar);var o=I.default.instance.Level==this.curLevelIndex;return I.default.instance.Level=Math.min(_.default.LevelMax,Math.max(I.default.instance.Level,this.curLevelIndex+1)),this.scheduleOnce(function(){t.isGaming&&(t.GameCountDownTime>0?t.settlementCountDownTime():t.gameOver(!0,o))},.5),!0},e.prototype.gameOver=function(t,e){void 0===e&&(e=!0),this.isTiming=!1,this.isRuning=!1,this.isGaming=!1,0==this.curLevelIndex?p.default.addPop(v.default.UIGameGuideOver):t?p.default.addPop(v.default.UIGameLevelComplete,{isWin:t,isNew:e}):p.default.addPop(v.default.UIGameOver,{isWin:t,isNew:e})},e.prototype.gameMineOver=function(){this.isTiming=!1,this.isRuning=!1,p.default.addPop(v.default.UIGameMineOver)},e.prototype.gameTimeOver=function(){if(this.isGaming){this.isTiming=!1,this.isRuning=!1;var t=_.default.TimeOverRetryAddCountDownTime;p.default.addPop(v.default.UIGameTimeOver,t)}},e.prototype.settlementCountDownTime=function(){var t=this;h.default.instance.disableOperation(),this.isTiming=!1,this.isRuning=!1;var e=Math.floor(this.GameCountDownTime/_.default.TimeOverStarUnit);this.StarCount+=e;var n=this.getStarProgress(),i=(n[0],n[1]);this.levelStar=Math.max(this.levelStar,i),I.default.instance.setStarByLevel(this.curLevelIndex,this.levelStar);var o=Math.floor(this.GameCountDownTime/_.default.TimeOverDesUnit),a=Math.floor(o*(1/30)/.08);this.schedule(function(){var e=t.getStarProgress(),n=(e[0],e[1]),i=t.GameEffectUpContent.convertToNodeSpaceAR(t.GameUI.getClockWorldPosition()),o=t.GameEffectUpContent.convertToNodeSpaceAR(t.GameUI.getStarWorldPosition(n));C.default.instance.getEffectTimeClearStar(i,o)},.08,a),this.schedule(function(){t.GameCountDownTime-=_.default.TimeOverDesUnit,t.GameUI.LabTime.string=f.default.CountDown(Math.max(0,t.GameCountDownTime))},1/30,o),this.scheduleOnce(function(){h.default.instance.enableOperation(),t.gameOver(!0)},o*(1/30)+_.default.TimeOverStarFlyTime)},e.prototype.updateMine=function(){if(this.MineCount>0){this.MineCount--;for(var t=[],e=0;e<this.TilesMap.length;e++)for(var n=0;n<this.TilesMap[e].length;n++){var i=this.TilesMap[e][n];i.isValidTile&&!i.isRocket&&t.push(i)}if(t.length>0){var o=m.default.randomInt(0,t.length-1);t[o].isMine=!0,t[o].startMine()}}},e.prototype.updateSiblingIndex=function(){for(var t=0,e=0;e<this.TilesMap[0].length;e++)for(var n=0;n<this.TilesMap.length;n++){var i=this.TilesMap[n][e];i&&(i.node.setSiblingIndex(t),t++)}},e.prototype.isClearDoubleTiles=function(t){return this.SelectTile.index>=0&&t.index>=0&&(this.SelectTile.index===t.index||this.SelectTile.isRocket&&t.isRocket)},e.prototype.gameClickTile=function(t){if(d.default.instance.btnClick(),this.isRuning&&!t.isUnclickable)if(this.isTiming=!0,this.isTiping&&(l.default.instance.emit(g.default.ClearTipTile),this.isTiping=!1),b.default.instance.hideTip(),this.SelectTile)if(this.SelectTile!==t)if(this.isClearDoubleTiles(t)){var e=T.default.instance.FindPaths(this.TilesMap,this.SelectTile,t);this.isVaildPaths(e)?this.clearTiles(this.SelectTile,t,e):this.shakeError(),this.SelectTile.clearSelected(),this.SelectTile=null}else this.SelectTile.clearSelected(),this.SelectTile=t,this.SelectTile.selectedAnimation(),this.SelectTile.selected();else this.SelectTile.selectedAnimation(),this.SelectTile.clearSelected(),this.SelectTile=null;else this.SelectTile=t,this.SelectTile.selectedAnimation(),this.SelectTile.selected()},e.prototype.findSameTile=function(t){for(var e=0;e<this.TilesMap.length;e++)for(var n=0;n<this.TilesMap[e].length;n++){var i=this.TilesMap[e][n];if(i&&i.isValidTile&&t!=i&&t.index==i.index)return i}},e.prototype.isStalemate=function(){for(var t=0;t<this.TilesMap.length;t++)for(var e=0;e<this.TilesMap[t].length;e++){var n=this.TilesMap[t][e];if(n&&!n.isBroken){var i=this.findSameTile(n),o=T.default.instance.FindPaths(this.TilesMap,n,i);if(this.isVaildPaths(o))return!1}}return!0},e.prototype.isHasMovingTile=function(){for(var t=0;t<this.TilesMap.length;t++)for(var e=0;e<this.TilesMap[t].length;e++){var n=this.TilesMap[t][e];if(n&&n.isAnimation)return!1}return!0},e.prototype.isVaildPaths=function(t){return t&&t.length>=4},e.prototype.findThroughPaths=function(t){for(var e=[],n=0;n<t.length/2;n++)if(n==t.length/2-1){var i=t[2*n],o=t[2*n+1];e.push(i),e.push(o)}else{i=t[2*n],o=t[2*n+1];var a=t[2*n+2],r=t[2*n+3];if(e.push(i),e.push(o),i==a)for(var s=Math.min(o,r)+1;s<Math.max(o,r);s++)e.push(i),e.push(s);else if(o==r)for(var c=Math.min(i,a)+1;c<Math.max(i,a);c++)e.push(c),e.push(o)}return e},e.prototype.clearTiles=function(t,e,n){t.clearFromGame(),e.clearFromGame();var i=!1;if(t.isRocket&&e.isRocket&&(this.rocketClearTiles(t,e),i=!0),this.curLevelIndex>0){for(var o=this.findThroughPaths(n),a=0;a<o.length/2;a++){var r=o[2*a],s=o[2*a+1];this.giveStar(r,s)}this.ComboCount++,this.ComboMaxCount=Math.max(this.ComboCount,this.ComboMaxCount),l.default.instance.emit(g.default.Combo,this.ComboCount),d.default.instance.combo(this.ComboCount>5?5:this.ComboCount)}for(a=0;a<n.length/2-1;a++){r=n[2*a],s=n[2*a+1];var c=n[2*a+2],u=n[2*a+3],p=w.default.XYToPosition(r,s,this.curGridXCount,this.curGridYCount),h=w.default.XYToPosition(c,u,this.curGridXCount,this.curGridYCount);0==this.curLevelIndex?C.default.instance.getEffectGuideClearLine(p.x,p.y,h.x,h.y,a,n.length/2-1):C.default.instance.getEffectClearLine(p.x,p.y,h.x,h.y,i)}if(b.default.instance.stepGuide(),4==this.moveDir&&this.randomMoveDir(4),!this.gameResult()){this.isGameStalemate=!0;var f=this.moveWayTiles();this.GameStalemateTime+=f?2*_.default.TileClearTime+_.default.TileSlowMoveTime+.1:_.default.TileClearTime+.1}},e.prototype.getVaildTilesCount=function(){for(var t=0,e=0;e<this.TilesMap.length;e++)for(var n=0;n<this.TilesMap[e].length;n++){var i=this.TilesMap[e][n];i&&i.isValidTile&&t++}return t},e.prototype.randomMoveDir=function(t){if(void 0===t&&(t=0),4==t)this.moveDirXY=this.moveDirMulti[this.moveDirIndex],this.moveDirIndex=++this.moveDirIndex>=this.moveDirMulti.length?0:this.moveDirIndex;else switch(m.default.randomInt(0,3)){case 0:this.moveDirXY=s.LEFT;break;case 1:this.moveDirXY=s.RIGHT;break;case 2:this.moveDirXY=s.DOWN;break;case 3:this.moveDirXY=s.UP}},e.prototype.moveWayTiles=function(){if(0==this.moveDir||this.getVaildTilesCount()<=_.default.TileMoveMinCount)return!1;var t=0,e=0,n=0,i=0;switch(this.moveDirXY){case s.LEFT:t=0,e=this.TilesMap[0].length,n=0,i=this.TilesMap.length;break;case s.RIGHT:t=0,e=this.TilesMap[0].length,n=this.TilesMap.length,i=0;break;case s.DOWN:t=0,e=this.TilesMap.length,n=this.TilesMap[0].length,i=0;break;case s.UP:t=0,e=this.TilesMap.length,n=0,i=this.TilesMap[0].length}for(var o=!1,a=e>t?t:t-1;e>t?a<e:a>=e;e>t?a++:a--)for(var r=[],c=i>n?n:n-1;i>n?c<i:c>=i;i>n?c++:c--){var l=a,u=c;this.moveDirXY!=s.LEFT&&this.moveDirXY!=s.RIGHT||(l=c,u=a);var p=this.TilesMap[l][u];if(p&&!p.isBorder)if(p.isBroken)r.push(p);else if(r.length>0){var d=r.shift();r.push(d);var h=w.default.XYToIndex(p.x,p.y,this.TilesMap.length),f=w.default.XYToIndex(d.x,d.y,this.TilesMap.length),m=this.TilesMap[p.x][p.y];this.TilesMap[p.x][p.y]=d,this.TilesMap[d.x][d.y]=m;var g=w.default.IndexToXY(f,this.TilesMap.length);p.moveSlowTile(g.x,g.y),g=w.default.IndexToXY(h,this.TilesMap.length),d.moveSlowTile(g.x,g.y),o=!0}}return this.updateSiblingIndex(),o},e.prototype.addStar=function(t){void 0===t&&(t=1),this.StarCount+=t;var e=this.getStarProgress(),n=(e[0],e[1]);this.levelStar=Math.max(this.levelStar,n)},e.prototype.giveStar=function(t,e){this.StarCount++;var n=this.getStarProgress(),i=(n[0],n[1]);this.levelStar=Math.max(this.levelStar,i);var o=w.default.XYToPosition(t,e,this.curGridXCount,this.curGridYCount),a=this.GameEffectContent.convertToNodeSpaceAR(this.GameUI.getStarWorldPosition(i));C.default.instance.getEffectClearStar(o,a,m.default.randomFloat(.1,.65))},e.prototype.getStarProgress=function(){return this.StarCount<this.LevelStarData[0]?[this.StarCount/this.LevelStarData[0]*_.default.StarProRate1,0]:this.StarCount<this.LevelStarData[0]+this.LevelStarData[1]?[(this.StarCount-this.LevelStarData[0])/this.LevelStarData[1]*_.default.StarProRate2+_.default.StarProRate1,1]:this.StarCount<this.LevelStarData[0]+this.LevelStarData[1]+this.LevelStarData[2]?[(this.StarCount-this.LevelStarData[0]-this.LevelStarData[1])/this.LevelStarData[2]*_.default.StarProRate3+_.default.StarProRate2+_.default.StarProRate1,2]:[1,3]},e.prototype.randomTiles=function(){var t=this;this.isRuning=!1;for(var e={},n=0;n<this.TilesMap.length;n++)for(var i=0;i<this.TilesMap[n].length;i++)!(s=this.TilesMap[n][i])||s.isBorder||s.isBroken||(e[w.default.XYToIndex(s.x-1,s.y-1,this.curGridXCount-2)]=s);var o=Object.keys(e),a=Object.values(e);m.default.shuffleArray(a);for(var r=0;r<o.length;r++)e[o[r]]=a[r];for(var r in e){var s=e[r],c=w.default.IndexToXY(parseInt(r),this.curGridXCount-2);this.TilesMap[c.x+1][c.y+1]=s,s.moveTile(c.x+1,c.y+1)}this.updateSiblingIndex(),this.scheduleOnce(function(){t.isRuning=!0,t.gameStalemate()},_.default.TileMoveTime)},e.prototype.shakeError=function(){var t=this;this.shakeTween||(d.default.instance.unclear(),this.shakeTween=cc.tween(this.GameContent).by(.06,{x:-20,y:-20}).by(.06,{x:40,y:40}).by(.06,{x:-40,y:-40}).by(.06,{x:40,y:40}).by(.06,{x:-20,y:-20}).call(function(){t.shakeTween=null}).start())},e.prototype.rocketClearTiles=function(t,e){for(var n=[],i=0;i<this.TilesMap.length;i++)for(var o=0;o<this.TilesMap[i].length;o++)(s=this.TilesMap[i][o]).isValidTile&&!s.isRocket&&n.push(s);if(n.length>0)for(var a=n[m.default.randomInt(0,n.length-1)],r=0;r<n.length;r++){var s;if((s=n[r])!=a&&s.index==a.index)return a.isUnclickable=!0,s.isUnclickable=!0,C.default.instance.getEffectClearRocket(t,a),C.default.instance.getEffectClearRocket(e,s),this.addStar(Math.abs(a.x-s.x)-1),void this.addStar(Math.abs(a.y-s.y))}},e.prototype.filpTiles=function(){var t=this;this.isRuning=!1,this.isTiping&&(l.default.instance.emit(g.default.ClearTipTile),this.isTiping=!1);var e=I.default.instance.getData("SkillFilpCount")||0;for(I.default.instance.setData("SkillFilpCount",e-1);;){var n="Img"+m.default.randomInt(0,Math.min(_.default.TilesPlistMax,I.default.instance.Level));if(this.GameUseAtlasName!=n){this.GameUseAtlasName=n,S.default.instance.getSpriteAltas("Textures/Tiles/"+n,function(e){t.GameUseAtlas=e,l.default.instance.emit(g.default.UpdateTileIcon,!0),t.scheduleOnce(function(){t.isRuning=!0},2*_.default.TileFilpTime)},this);break}}},e.prototype.turnTile=function(){var t=this;this.isRuning=!1,this.isTiping&&(l.default.instance.emit(g.default.ClearTipTile),this.isTiping=!1),this.randomTiles(),this.scheduleOnce(function(){t.isRuning=!0},_.default.TileMoveTime)},e.prototype.findClearTile=function(){if(!this.isTiping){this.isTiping=!0;for(var t=0;t<this.TilesMap.length;t++)for(var e=0;e<this.TilesMap[t].length;e++){var n=this.TilesMap[t][e];if(!n.isBroken)for(var i=0;i<this.TilesMap.length;i++)for(var o=0;o<this.TilesMap[t].length;o++){var a=this.TilesMap[i][o];if(!a.isBroken&&a!=n&&a.index==n.index){var r=T.default.instance.FindPaths(this.TilesMap,n,a);if(this.isVaildPaths(r))return this.drawTipLine(r),n.setTipTile(),a.setTipTile(),!0}}}return!1}},e.prototype.drawTipLine=function(t){for(var e=0;e<t.length/2-1;e++){var n=t[2*e],i=t[2*e+1],o=t[2*e+2],a=t[2*e+3],r=w.default.XYToPosition(n,i,this.curGridXCount,this.curGridYCount),s=w.default.XYToPosition(o,a,this.curGridXCount,this.curGridYCount);C.default.instance.getEffectClearTipLine(r.x,r.y,s.x,s.y)}},e.instance=null,a([P(L.default)],e.prototype,"GameUI",void 0),a([P(cc.Prefab)],e.prototype,"PrefabTile",void 0),a([P(cc.Node)],e.prototype,"GameContent",void 0),a([P(cc.Node)],e.prototype,"GameGuideContent",void 0),a([P(cc.Node)],e.prototype,"GameEffectContent",void 0),a([P(cc.Node)],e.prototype,"GameEffectUpContent",void 0),a([P(cc.Node)],e.prototype,"TouchContent",void 0),n=a([R],e)}(cc.Component);n.default=O,cc._RF.pop()},{"../../Framework/core/GameApp":"GameApp","../../Framework/core/event/EventManager":"EventManager","../../Framework/core/manager/ObjectPoolManager":"ObjectPoolManager","../../Framework/core/manager/PopUpManager":"PopUpManager","../../Framework/core/manager/SoundManager":"SoundManager","../../Framework/core/manager/UIManager":"UIManager","../../Framework/core/util/DateUtils":"DateUtils","../../Framework/core/util/Utils":"Utils","../Datas/EventName":"EventName","../Datas/GameDataManager":"GameDataManager","../Datas/PopupKey":"PopupKey","../GameConfig":"GameConfig","./Effects/EffectUtils":"EffectUtils","./GameGuide":"GameGuide","./GameLinkAlgorithm":"GameLinkAlgorithm","./SpriteUtils":"SpriteUtils","./TileUtils":"TileUtils","./Tiles/Tile":"Tile","./UI/UIGame":"UIGame","./UserData":"UserData"}],GameDataManager:[function(t,e,n){"use strict";cc._RF.push(e,"d74a6FlmY1BCIYTJnjkpDsV","GameDataManager");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(e){a(e)}}function s(t){try{c(i.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.OpenFunctionId=void 0;var s=t("../../Framework/core/GameApp"),c=t("../../Framework/core/util/I18N"),l=t("../../Framework/core/manager/RESManager"),u=t("../../Framework/core/manager/DataManager"),p=t("../GameConfig"),d=t("./PopupKey"),h=t("../Game/UserData"),f=t("../../Framework/core/util/Utils"),m=t("../../Framework/core/event/EventManager");(function(t){t[t.Filp=1]="Filp",t[t.Magic=2]="Magic",t[t.Turn=3]="Turn",t[t.Find=4]="Find"})(n.OpenFunctionId||(n.OpenFunctionId={}));var g=function(t){function e(){var e=t.call(this)||this;return e.DefaultLocation="defaultLocation",e.UserLocation="userLocation",e.ResourceList=[{key:d.default.UIGameMenu,url:"UI/UIGameMenu",type:cc.Prefab}],e.soundResDirPath="Sounds/",e.SoundList=["music_game_bgm"],e.levelDatas=null,e.levelTimeDatas=null,e.bombTimeData=null,e.levelStarDatas=null,e.milestoneDatas=null,e.storeDatas=null,e.openFunctionDatas=null,e.turnTableDatas=null,e.signDatas=null,e.Chapter=null,e.Landmark=null,e.ChapterData=null,e.ChapterLevelIndexsData=null,e._loadDataCount=0,e.loadDataTotalCount=0,e._loadResCount=0,e.loadResTotalCount=0,e.loadStart=!1,e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e,this._instance.init()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadDataCount",{get:function(){return this._loadDataCount},set:function(t){this._loadDataCount=t,m.default.instance.emit(d.default.LoadDataProgress,this._loadDataCount/this.loadDataTotalCount*.1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadResCount",{get:function(){return this._loadResCount},set:function(t){this._loadResCount=t,m.default.instance.emit(d.default.LoadResProgress,this._loadResCount/this.loadResTotalCount*.1)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.loadStart=!1},e.prototype.loadData=function(t,e){this.loadLocalData(t,e)},e.prototype.loadLocalData=function(t,e){var n=this.ResourceList,i=s.default.SDK.getLocal();i=h.default.instance.language,s.default.Logger.log("loadData\u2014\u2014>language: ",i),n.push({url:"i18n/"+c.default.defaultLocation,type:cc.Asset,key:this.DefaultLocation});var o=c.default.getLocalKey(i);o!=c.default.defaultLocation&&n.push({url:"i18n/"+o,type:cc.Asset,key:this.UserLocation}),this.loadResTotalCount=this.ResourceList.length,this.loadDataRes(n,t,e)},e.prototype.loadDataRes=function(t,e,n){var i=this;if(0!=t.length){var o=t.shift();this.getBundle(p.default.MainBundleName).load(o.url,o.type,function(a,r){r instanceof cc.JsonAsset?l.default.setResource(o.key,r.json):r instanceof cc.BufferAsset?l.default.setResource(o.key,r._buffer):r instanceof cc.TextAsset?l.default.setResource(o.key,r.text):r instanceof cc.Prefab?l.default.setPrefab(o.key,r):l.default.setResource(o.key,r),i.loadResCount++,i.loadDataRes(t,e,n)})}else e&&e.call(n)},e.prototype.loadUIRes=function(t,e,n,i){return a(this,void 0,void 0,function(){var o=this;return r(this,function(){return[2,new Promise(function(a){o.getBundle(p.default.MainBundleName).load(e,cc.Prefab,function(e,o){o instanceof cc.Prefab&&l.default.setPrefab(t,o),null==n||n.call(i),a(o)})})]})})},e.prototype.loadSounds=function(){for(var t,e=[],n={},i=0,o=this.SoundList;i<o.length;i++){var a=o[i];n[t=this.soundResDirPath+a]=a,e.push(t)}this.getBundle(p.default.MainBundleName).loadDir(this.soundResDirPath,cc.AudioClip,function(t,e){if(t)throw t;if(e)for(var n=0;n<e.length;n++){var i=e[n];l.default.setResource(i.name,i)}})},e.prototype.loadI18NRes=function(t,n,i){var o=this;void 0===n&&(n=null),void 0===i&&(i=null),this.getBundle(p.default.MainBundleName).load("i18n/"+t,cc.TextAsset,function(t,a){a instanceof cc.TextAsset&&(l.default.setResource(o.UserLocation,a.text),c.default.loadProperty(l.default.getResource(e.instance.DefaultLocation),l.default.getResource(e.instance.UserLocation))),null==n||n.call(i)})},e.prototype.isLoadAllConfigDatas=function(){return this.loadStart&&this.loadDataTotalCount==this.loadDataCount},e.prototype.loadStop=function(){this.loadStart=!1},e.prototype.loadConfigDatas=function(){this.loadStart=!0,this.loadLevelData(),this.loadCsvLandmark(),this.loadCsvChapter(),this.loadLevelCountDownTime(),this.loadBombTime(),this.loadLevelStar(),this.loadMilestone(),this.loadStore(),this.loadTurnTable(),this.loadOpenFunction(),this.loadSign()},e.prototype.loadLevelData=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/LevelDatas_B",cc.TextAsset,function(e,n){e?s.default.Logger.error(e):(t.levelDatas=n.text.split(/\r?\n/),t.levelDatas.splice(0,1),t.loadDataCount++)})},e.prototype.getLevelData=function(t){var e={},n=this.levelDatas[t].split(",");e.layout=n[0];var i=n[0].split("*");e.row=parseInt(i[0]),e.col=parseInt(i[1]);var o=e.row*e.col;if(0==t)e.values=Array.from({length:o},function(t,e){return{index:p.default.GuideData[e]}});else{e.values=Array.from({length:o},function(t,e){return{index:Math.floor(e/4)}});var a=2*parseInt(n[6]);if(a>0)for(;;){for(var r=f.default.randomInt(0,Math.floor(o/4)-1),s=0;s<e.values.length&&(e.values[s].index!=r||e.values[s].rocket||(e.values[s].rocket=!0,e.values[s].index=p.default.RocketIndex,!(--a<=0)));s++);if(a<=0)break}f.default.shuffleArray(e.values)}return e.mine=parseInt(n[2]),e.moveWay=parseInt(n[3]),e},e.prototype.loadLevelCountDownTime=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/csvLevelTimeData",cc.TextAsset,function(e,n){if(e)s.default.Logger.error(e);else{t.levelTimeDatas=n.text.split(/\r?\n/),t.levelTimeDatas.splice(0,1);for(var i=0;i<t.levelTimeDatas.length;i++)t.levelTimeDatas[i]=t.levelTimeDatas[i].split(",");t.loadDataCount++}})},e.prototype.loadBombTime=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/layoutBombTime",cc.TextAsset,function(e,n){if(e)s.default.Logger.error(e);else{var i=n.text.split(/\r?\n/);i.splice(0,1),i=i[1].split(","),t.bombTimeData={"5*8":parseInt(i[1]),"6*10":parseInt(i[2]),"7*10":parseInt(i[3]),"7*12":parseInt(i[4])},t.loadDataCount++}})},e.prototype.loadCsvChapter=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/csvChapter",cc.TextAsset,function(e,n){if(e)s.default.Logger.error(e);else{t.Chapter=[];for(var i=n.text.split(/\r?\n/),o=i.splice(0,1)[0].split(","),a=0;a<i.length;a++){for(var r=i[a].split(","),c={},l=0;l<r.length;l++)c[o[l]]=r[l];t.Chapter.push(c)}t.loadDataCount++}})},e.prototype.loadLevelStar=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/JsonStarLevel",cc.TextAsset,function(e,n){e?s.default.Logger.error(e):(t.levelStarDatas=JSON.parse(n.text),t.loadDataCount++)})},e.prototype.loadMilestone=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/Milestone",cc.TextAsset,function(e,n){e?s.default.Logger.error(e):(t.milestoneDatas=JSON.parse(n.text),t.loadDataCount++)})},e.prototype.loadStore=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/Store",cc.TextAsset,function(e,n){e?s.default.Logger.error(e):(t.storeDatas=JSON.parse(n.text),t.loadDataCount++)})},e.prototype.loadTurnTable=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/TurnTable",cc.TextAsset,function(e,n){e?s.default.Logger.error(e):(t.turnTableDatas=JSON.parse(n.text),t.loadDataCount++)})},e.prototype.loadSign=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/Sign",cc.TextAsset,function(e,n){e?s.default.Logger.error(e):(t.signDatas=JSON.parse(n.text),t.loadDataCount++)})},e.prototype.loadOpenFunction=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/csvFunctionOpenB",cc.TextAsset,function(e,n){if(e)s.default.Logger.error(e);else{t.openFunctionDatas=[];for(var i=n.text.split(/\r?\n/),o=i.splice(0,1)[0].split(","),a=0;a<i.length;a++){for(var r=i[a].split(","),c={},l=0;l<r.length;l++)c[o[l]]=r[l];t.openFunctionDatas.push(c)}t.loadDataCount++}})},e.prototype.loadCsvLandmark=function(){var t=this;this.loadDataTotalCount++,this.getBundle(p.default.MainBundleName).load("Datas/CsvLandmark",cc.TextAsset,function(e,n){if(e)s.default.Logger.error(e);else{t.Landmark=[];for(var i=n.text.split(/\r?\n/),o=i.splice(0,1)[0].split(","),a=0;a<i.length;a++){for(var r=i[a].split(","),c={},l=0;l<r.length;l++)c[o[l]]=r[l];t.Landmark.push(c)}t.loadDataCount++}})},e.prototype.getLevelCountDownTime=function(t){for(var e=0;e<this.levelTimeDatas.length;e++)if(this.levelTimeDatas[e][0]==t)return parseInt(this.levelTimeDatas[e][1]);return 0},e.prototype.setChapterData=function(){var t=this;if(null==this.ChapterData){this.ChapterData=[],this.ChapterLevelIndexsData=[];for(var e=!1,n={lv:[]},i=n.lv.length,o=0,a=function(o,a,r,s){void 0===s&&(s=null),i++,n.lv.push(r),r>0&&(t.ChapterLevelIndexsData[r]=o.length),s&&n.lv.length>=4&&(n.landmark=s),a&&r==parseInt(a.end_lv)?(n.Chaptelandmark=n.lv.length,n.landmark=s,n.isRight=!e,e=!e,o.push(n),(n={}).lv=[],i=n.lv.length,n.Chapter=a):i>=4&&(n.isRight=!e,e=!e,o.push(n),(n={}).lv=[],i=n.lv.length),s&&n.lv.length<4&&(n.landmark=s)},r=0;r<this.Chapter.length;r++)for(var s=this.Chapter[r],c=parseInt(s.start_lv);c<=parseInt(s.end_lv);c++){o=c,c==parseInt(s.start_lv)&&(n.start=!0);var l=this.getLandmark(c);a(this.ChapterData,s,c,l),l&&c!=parseInt(s.end_lv)&&(a(this.ChapterData,s,-1),a(this.ChapterData,s,0))}for(c=o+1;c<=p.default.LevelMax;c++)n.lv||(n.lv=[]),c==o+1&&(n.start=!0),a(this.ChapterData,null,c);a=null}},e.prototype.getChapter=function(t){for(var e=null,n=0;n<this.Chapter.length;n++){var i=this.Chapter[n];parseInt(i.end_lv)==t&&(e=i)}return e},e.prototype.getLandmark=function(t){for(var e=null,n=0;n<this.Landmark.length;n++){var i=this.Landmark[n];parseInt(i.condition_global)==t&&(e=i)}return e},e.prototype.getLandmarks=function(t,e){for(var n=[],i=0;i<this.Landmark.length;i++){var o=this.Landmark[i];parseInt(o.condition_global)>=t&&parseInt(o.condition_global)<=e&&n.push(o)}return n},e.prototype.getLandmarkProgress=function(){for(var t=h.default.instance.Level-1,e=t,n=this.Landmark[0].condition_lv,i=null,o=0;o<this.Landmark.length;o++){var a=i?parseInt(i.condition_global):0;if(i=this.Landmark[o],t>=a&&t<parseInt(this.Landmark[o].condition_global)){e=t-a,n=parseInt(i.condition_lv);break}}return[e,n]},e.prototype.getChapterProgress=function(t,e){var n=parseInt(t.contain_lv);return[e>parseInt(t.end_lv)?parseInt(t.contain_lv):e<parseInt(t.start_lv)?0:e-parseInt(t.start_lv),n]},e.prototype.getChapterData=function(){return this.ChapterData},e.prototype.getChapterLevelIndexsData=function(){return this.ChapterLevelIndexsData},e.prototype.getGetStarConfig=function(t,e){var n;n=t<=100?this.levelStarDatas.StarLevels[0]:t<=200?this.levelStarDatas.StarLevels[1]:t<=300?this.levelStarDatas.StarLevels[2]:t<=400?this.levelStarDatas.StarLevels[3]:this.levelStarDatas.StarLevels[4];for(var i=0;i<n.length;i++){var o=n[i];if(o.levelLayout==e)return[o.blocks,o.TwoStar,o.ThreeStar]}},e.prototype.getInChapterDataByLevel=function(t){for(var e=null,n=0;n<this.Chapter.length;n++){var i=this.Chapter[n];t<=parseInt(i.end_lv)&&t>=parseInt(i.start_lv)&&(e=i)}return e},e.prototype.getCurLandMarkData=function(t){for(var e=null,n=0;n<this.Landmark.length;n++){var i=this.Landmark[n];t>i.condition_global-i.condition_lv&&t<=i.condition_global&&(e=i)}return e},e.prototype.getBombTimeData=function(){return this.bombTimeData},e.prototype.getMilestoneData=function(){return this.milestoneDatas},e.prototype.getStoreData=function(){return this.storeDatas},e.prototype.getCurMilestoneIndex=function(t){for(var e="0",n=0;n<this.milestoneDatas.length;n++){var i=this.milestoneDatas[n];t>=parseInt(i.Stars)&&(e=i.id)}return parseInt(e)},e.prototype.getMilestoneDataById=function(t){for(var e=0;e<this.milestoneDatas.length;e++){var n=this.milestoneDatas[e];if(n.id==t.toString())return n}},e.prototype.getStoreDataById=function(t){for(var e=0;e<this.storeDatas.length;e++){var n=this.storeDatas[e];if(n.id==t.toString())return n}},e.prototype.getMilestoneCurProgress=function(t){for(var e=0,n=null,i=0;i<this.milestoneDatas.length;i++){var o=this.milestoneDatas[i];if(t>parseInt(o.Stars)&&(e=parseInt(o.Stars)),t<=parseInt(o.Stars)){n=parseInt(o.Stars);break}}return null==n?1:(t-e)/(n-e)},e.prototype.getTurnTableDatas=function(){return this.turnTableDatas},e.prototype.getOpenFunctionLevel=function(t){for(var e=0;e<this.openFunctionDatas.length;e++){var n=this.openFunctionDatas[e];if(n.id==t.toString())return parseInt(n.threshold)}},e.prototype.getSignDatas=function(){return this.signDatas},e}(u.DataManager);n.default=g,cc._RF.pop()},{"../../Framework/core/GameApp":"GameApp","../../Framework/core/event/EventManager":"EventManager","../../Framework/core/manager/DataManager":"DataManager","../../Framework/core/manager/RESManager":"RESManager","../../Framework/core/util/I18N":"I18N","../../Framework/core/util/Utils":"Utils","../Game/UserData":"UserData","../GameConfig":"GameConfig","./PopupKey":"PopupKey"}],GameGuide:[function(t,e,n){"use strict";cc._RF.push(e,"7f6e2zOqbRCVY7coF0oyx/q","GameGuide");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/core/util/I18N"),s=t("../Datas/GameDataManager"),c=t("./GameCore"),l=t("./ItemsUtils"),u=t("./UserData"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){var e=t.call(this)||this;return e.step=0,e.guideTip=null,e.guideHand=null,e.guideArrowHand=null,e.guideHandTile=null,e.tile1=null,e.tile2=null,e.Level=0,e._parent=null,e._position=null,e.textTips=["guide_method0","guide_method0","guide_method1","guide_method2","guide_method3"],e.filpTips=["item_image"],e.turnTips=["item_rearrange"],e.findTips=["item_show"],e}var n;return o(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new n),this._instance},enumerable:!1,configurable:!0}),e.prototype.startGuide=function(t){this.Level=t,this.step=0,0==this.Level&&(c.default.instance.GameGuideContent.active=!0,c.default.instance.GameGuideContent.getChildByName("BlockBg").active=!0,this.stepGuide());var e=s.default.instance.getOpenFunctionLevel(s.OpenFunctionId.Filp);this.Level==e&&u.default.instance.Level==e&&this.stepGuide(),e=s.default.instance.getOpenFunctionLevel(s.OpenFunctionId.Turn),this.Level==e&&u.default.instance.Level==e&&this.stepGuide(),e=s.default.instance.getOpenFunctionLevel(s.OpenFunctionId.Find),this.Level==e&&u.default.instance.Level==e&&this.stepGuide()},e.prototype.showTip=function(t,e){void 0===t&&(t=cc.v3()),void 0===e&&(e=this.textTips),this.guideTip?(this.guideTip.position=t,cc.tween(this.guideTip).to(.5,{opacity:255}).start(),this.guideTip.getComponentInChildren(cc.Label).string=r.default.get(e[this.step])):l.default.instance.getGuideTip(this,c.default.instance.GameGuideContent,t,r.default.get(e[this.step]))},e.prototype.hideTip=function(){this.guideTip&&cc.tween(this.guideTip).to(.5,{opacity:0}).start(),this.guideHand&&this.handTip()},e.prototype.handTip=function(){this.guideHand?(this.guideHand.setSiblingIndex(this.guideHand.parent.childrenCount),this.showHand()):l.default.instance.getGuideHand(this,c.default.instance.GameGuideContent)},e.prototype.showHand=function(){this.guideHandTile==this.tile1?this.guideHandTile=this.tile2:this.guideHandTile=this.tile1,this.tile1==c.default.instance.SelectTile?this.guideHandTile=this.tile2:this.tile2==c.default.instance.SelectTile&&(this.guideHandTile=this.tile1),this.guideHand&&(this.guideHand.getComponent(cc.Animation).stop(),this.guideHand.position=c.default.instance.GameGuideContent.convertToNodeSpaceAR(c.default.instance.GameContent.convertToWorldSpaceAR(this.guideHandTile.node.position)),this.guideHand.getComponent(cc.Animation).play())},e.prototype.showArrowHand=function(t){l.default.instance.getGuideArrowHand(this,c.default.instance.GameGuideContent,t)},e.prototype.stepGuide=function(){if(0==this.Level){switch(this.step){case 0:this.tile1=c.default.instance.TilesMap[3][1],this.tile1.node.parent=c.default.instance.GameGuideContent,this.tile2=c.default.instance.TilesMap[4][1],this.tile2.node.parent=c.default.instance.GameGuideContent,this.showTip(),this.handTip();break;case 1:this.tile1=c.default.instance.TilesMap[2][3],this.tile1.node.parent=c.default.instance.GameGuideContent,this.tile2=c.default.instance.TilesMap[4][3],this.tile2.node.parent=c.default.instance.GameGuideContent,this.showTip(cc.v3(0,500)),this.handTip();break;case 2:this.tile1=c.default.instance.TilesMap[4][2],this.tile1.node.parent=c.default.instance.GameGuideContent,this.tile2=c.default.instance.TilesMap[5][3],this.tile2.node.parent=c.default.instance.GameGuideContent,this.showTip(cc.v3(0,-400)),this.handTip();break;case 3:this.tile1=c.default.instance.TilesMap[2][1],this.tile1.node.parent=c.default.instance.GameGuideContent,this.tile2=c.default.instance.TilesMap[2][4],this.tile2.node.parent=c.default.instance.GameGuideContent,this.showTip(cc.v3(0,-400)),this.handTip();break;case 4:this.showTip(cc.v3(0,-400)),this.guideHand.removeFromParent(!1),this.guideHand=null,c.default.instance.GameGuideContent.getChildByName("BlockBg").active=!1}this.step++}this.skillStepGuide(c.default.instance.GameUI.ButtonFilp,s.OpenFunctionId.Filp,this.filpTips),this.skillStepGuide(c.default.instance.GameUI.ButtonTurn,s.OpenFunctionId.Turn,this.turnTips),this.skillStepGuide(c.default.instance.GameUI.ButtonFind,s.OpenFunctionId.Find,this.findTips)},e.prototype.skillStepGuide=function(t,e,n){var i=s.default.instance.getOpenFunctionLevel(e);if(this.Level==i&&u.default.instance.Level==i){if(0==this.step){c.default.instance.GameGuideContent.active=!0,c.default.instance.GameGuideContent.getChildByName("BlockBg").active=!0,this.showTip(cc.v3(),n),this._parent=t.parent,this._position=t.position;var o=c.default.instance.GameGuideContent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position));this.showArrowHand(o),t.parent=c.default.instance.GameGuideContent,t.position=o}else 1==this.step&&(t.parent=this._parent,t.position=this._position,c.default.instance.GameGuideContent.active=!1,this.guideTip.removeFromParent(!1),this.guideTip=null,this.guideArrowHand.removeFromParent(!1),this.guideArrowHand=null);this.step++}},n=a([d],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Framework/core/util/I18N":"I18N","../Datas/GameDataManager":"GameDataManager","./GameCore":"GameCore","./ItemsUtils":"ItemsUtils","./UserData":"UserData"}],GameLaunch:[function(t,e,n){"use strict";cc._RF.push(e,"bc683KSPfdGUJO6AJA1cPv1","GameLaunch");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Framework/components/LaunchComponent"),s=t("../Framework/core/GameApp"),c=t("./Datas/GameDataManager"),l=t("./Game/UserData"),u=t("./GameConfig"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this),n.instance=this},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.start=function(){this.preloadGame()},e.prototype.getLoadScene=function(){return"Main"},e.prototype.preloadGame=function(){var t=this;l.default.instance.initData(this.userDataLoaded,this),cc.assetManager.loadBundle(u.default.MainBundleName,function(e,n){c.default.instance.setBundle(u.default.MainBundleName,n),n.preloadScene(t.getLoadScene(),function(e,n){t.sceneProgress=e/n*.8,t.updateProgress()},function(e){s.default.Logger.log("@LoadScene \u2014\u2014> preLoaded"),e?s.default.Logger.error(e):t.localDataLoaded()})})},e.prototype.userDataLoaded=function(){},e.prototype.localDataLoaded=function(){c.default.instance.loadData(function(){c.default.instance.loadConfigDatas()},this),c.default.instance.loadSounds(),s.default.Logger.log("@GameData \u2014\u2014> Loaded")},e.prototype.lateUpdate=function(){c.default.instance.isLoadAllConfigDatas()&&(l.default.instance.GameDataLoaded(),c.default.instance.loadStop(),c.default.instance.setChapterData(),this.playGame())},e.prototype.playGame=function(){var t=this;this.node.removeComponent(cc.Canvas),cc.game.removePersistRootNode(this.node),this.scheduleOnce(function(){t.node.destroy()}),cc.director.loadScene(this.getLoadScene())},e.instance=null,n=a([d],e)}(r.default));n.default=h,cc._RF.pop()},{"../Framework/components/LaunchComponent":"LaunchComponent","../Framework/core/GameApp":"GameApp","./Datas/GameDataManager":"GameDataManager","./Game/UserData":"UserData","./GameConfig":"GameConfig"}],GameLinkAlgorithm:[function(t,e,n){"use strict";cc._RF.push(e,"09ad6o26zNPYqypRroz8DwI","GameLinkAlgorithm"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.Map=null,this.Start=null,this.End=null,this.Width=0,this.Height=0}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.FindPaths=function(t,e,n){var i;if(this.Map=t,this.Start=e,this.End=n,this.Width=this.Map.length,this.Map[0]&&(this.Height=this.Map[0].length),this.isZeroTurnLinked(this.Start.x,this.Start.y,this.End.x,this.End.y))return[this.Start.x,this.Start.y,this.End.x,this.End.y];var o=this.isOneTurnLinked(this.Start.x,this.Start.y,this.End.x,this.End.y),a=o[0],r=o[1];return a?r:(a=(i=this.isTwoTurnLinked(this.Start.x,this.Start.y,this.End.x,this.End.y))[0],r=i[1],a?r:null)},t.prototype.isBlock=function(t,e){return t>=0&&t<this.Width&&e>=0&&e<this.Height&&this.Map[t][e]!=this.Start&&this.Map[t][e]!=this.End&&!this.Map[t][e].isBroken},t.prototype.isHorLinked=function(t,e,n,i){if(e!==i)return!1;for(var o=Math.min(t,n),a=Math.max(t,n),r=o;r<=a;r++)if(this.isBlock(r,e))return!1;return!0},t.prototype.isVerLinked=function(t,e,n,i){if(t!==n)return!1;for(var o=Math.min(e,i),a=Math.max(e,i),r=o;r<=a;r++)if(this.isBlock(t,r))return!1;return!0},t.prototype.isZeroTurnLinked=function(t,e,n,i){return!!this.isHorLinked(t,e,n,i)||!!this.isVerLinked(t,e,n,i)},t.prototype.isOneTurnLinked=function(t,e,n,i){for(var o=[t,n],a=[i,e],r=0;r<o.length;r++)if(this.isZeroTurnLinked(o[r],a[r],t,e)&&this.isZeroTurnLinked(o[r],a[r],n,i))return[!0,[t,e,o[r],a[r],n,i]];return[!1,null]},t.prototype.isTwoTurnLinked=function(t,e,n,i){for(var o=Math.min(t,n),a=Math.max(t,n),r=Math.min(e,i),s=Math.max(e,i),c=0,l=0,u=0,p=0,d=o;d<=a;d++)if(l=e,(c=d)!=t&&(p=i,(u=d)!=n&&this.isZeroTurnLinked(c,l,u,p)&&this.isZeroTurnLinked(c,l,t,e)&&this.isZeroTurnLinked(u,p,n,i)))return[!0,[t,e,c,l,u,p,n,i]];for(var h=r;h<=s;h++)if(c=t,(l=h)!=e&&(u=n,(p=h)!=i&&this.isZeroTurnLinked(c,l,u,p)&&this.isZeroTurnLinked(c,l,t,e)&&this.isZeroTurnLinked(u,p,n,i)))return[!0,[t,e,c,l,u,p,n,i]];for(var f=Math.max(o,this.Width-a),m=1;m<=f;m++){if(c=o-m,l=e,u=o-m,p=i,this.isZeroTurnLinked(c,l,u,p)&&this.isZeroTurnLinked(c,l,t,e)&&this.isZeroTurnLinked(u,p,n,i))return[!0,[t,e,c,l,u,p,n,i]];if(c=a+m,l=e,u=a+m,p=i,this.isZeroTurnLinked(c,l,u,p)&&this.isZeroTurnLinked(c,l,t,e)&&this.isZeroTurnLinked(u,p,n,i))return[!0,[t,e,c,l,u,p,n,i]]}var g=Math.max(r,this.Height-s);for(m=1;m<=g;m++){if(c=t,l=r-m,u=n,p=r-m,this.isZeroTurnLinked(c,l,u,p)&&this.isZeroTurnLinked(c,l,t,e)&&this.isZeroTurnLinked(u,p,n,i))return[!0,[t,e,c,l,u,p,n,i]];if(c=t,l=s+m,u=n,p=s+m,this.isZeroTurnLinked(c,l,u,p)&&this.isZeroTurnLinked(c,l,t,e)&&this.isZeroTurnLinked(u,p,n,i))return[!0,[t,e,c,l,u,p,n,i]]}return[!1,null]},t}();n.default=i,cc._RF.pop()},{}],GrayRenderState:[function(t,e,n){"use strict";cc._RF.push(e,"9456fz2octBR7QR9e6gv/IT","GrayRenderState");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc.Enum({GRAY:1,NORMAL:0}),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.useSystem=!0,e._state=r.NORMAL,e.grayFrame=null,e.normalFrame=null,e._graySpriteMaterial=null,e._spriteMaterial=null,e._normalColor=null,e._outLineColor=null,e._shadowColor=null,e._oriFrame=null,e}return o(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!==t){this._state=t;var e=this.node.getComponent(cc.RenderComponent);e instanceof cc.Label&&(this.useSystem=!0),this.useSystem?e instanceof cc.Sprite?(e.spriteFrame||(e.spriteFrame=this._oriFrame),this.switchSpriteGrayMaterial(t===r.GRAY,e)):this.switchLabelGrayMaterial(t===r.GRAY,e):e instanceof cc.Sprite&&(this._oriFrame||(this._oriFrame=e.spriteFrame),t===r.GRAY?e.spriteFrame=this.grayFrame:e.spriteFrame=this.normalFrame)}},enumerable:!1,configurable:!0}),e.prototype.switchSpriteGrayMaterial=function(t,e){this.compareVesion(cc.ENGINE_VERSION,"2.3.0")>=0?this.switchSpriteGrayMaterial230(t,e):this.compareVesion(cc.ENGINE_VERSION,"2.1.1")<=0?this.switchSpriteGrayMaterial211(t,e):this.switchSpriteGrayMaterial220(t,e)},e.prototype.switchSpriteGrayMaterial230=function(t,e){var n;t?((n=this._graySpriteMaterial)||(n=cc.Material.getBuiltinMaterial("2d-gray-sprite")),n=this._graySpriteMaterial=cc.MaterialVariant.create(n,e)):((n=this._spriteMaterial)||(n=cc.Material.getBuiltinMaterial("2d-sprite")),n=this._spriteMaterial=cc.MaterialVariant.create(n,e)),e.setMaterial(0,n)},e.prototype.switchSpriteGrayMaterial220=function(t,e){var n;cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&(t?((n=this._graySpriteMaterial)||(n=cc.Material.getBuiltinMaterial("2d-gray-sprite")),n=this._graySpriteMaterial=cc.Material.getInstantiatedMaterial(n,e)):((n=this._spriteMaterial)||(n=cc.Material.getBuiltinMaterial("2d-sprite",e)),n=this._spriteMaterial=cc.Material.getInstantiatedMaterial(n,e)),e.setMaterial(0,n))},e.prototype.switchSpriteGrayMaterial211=function(t,e){var n;t?((n=this._graySpriteMaterial)||(n=cc.Material.getBuiltinMaterial("gray-sprite")),n=this._graySpriteMaterial=cc.Material.getInstantiatedMaterial(n,e)):((n=this._spriteMaterial)||(n=cc.Material.getBuiltinMaterial("sprite",e)),(n=this._spriteMaterial=cc.Material.getInstantiatedMaterial(n,e)).define("USE_TEXTURE",!0)),e.setMaterial(0,n)},e.prototype.switchLabelGrayMaterial=function(t,e){var n=e.node.getComponent(cc.LabelOutline),i=e.node.getComponent(cc.LabelShadow);this._normalColor||(this._normalColor=e.node.color,n&&(this._outLineColor=n.color.clone()),i&&(this._shadowColor=i.color.clone())),t?(n&&(n.color=this.setGrayFlilter(this._outLineColor)),i&&(i.color=this.setGrayFlilter(this._shadowColor)),e.node.color=this.setGrayFlilter(this._normalColor)):(e.node.color=this._normalColor,n&&(n.color=this._outLineColor),i&&(i.color=this._shadowColor))},e.prototype.setGrayFlilter=function(t){return this.colorMatrixFilter(t,[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},e.prototype.colorMatrixFilter=function(t,e){var n=t.getR(),i=t.getG(),o=t.getB(),a=t.getA(),r=e[0]*n+e[1]*i+e[2]*o+e[3]*a+e[4],s=e[5]*n+e[6]*i+e[7]*o+e[8]*a+e[9],c=e[10]*n+e[11]*i+e[12]*o+e[13]*a+e[14],l=e[15]*n+e[16]*i+e[17]*o+e[18]*a+e[19];return new cc.Color(r,s,c,l)},e.prototype.compareVesion=function(t,e){for(var n=t.split("."),i=e.split("."),o=0;o<n.length;++o){var a=parseInt(n[o]),r=parseInt(i[o]||0);if(a!==r)return a-r}return i.length>n.length?-1:0},e.State=r,a([l],e.prototype,"useSystem",void 0),a([l({type:r})],e.prototype,"_state",void 0),a([l({type:r})],e.prototype,"state",null),a([l({type:cc.SpriteFrame,visible:function(){return!this.useSystem}})],e.prototype,"grayFrame",void 0),a([l({type:cc.SpriteFrame,visible:function(){return!this.useSystem}})],e.prototype,"normalFrame",void 0),a([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],HTML5WebSocket:[function(t,e,n){"use strict";cc._RF.push(e,"8df707+j9RPi4259w8/eUvo","HTML5WebSocket"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../manager/ErrorManager"),o=function(){function t(){this.host="",this.port=0,this.host="",this.port=0,"undefined"==typeof WebSocket&&i.default.error(3100)}return t.prototype.addCallBacks=function(t,e,n,i,o){this.onConnect=t,this.onClose=e,this.onSocketData=n,this.onError=i,this.thisObject=o},t.prototype.connect=function(t,e){this.host=t,this.port=e;var n="ws://"+this.host+":"+this.port;this.socket=new WebSocket(n),this.socket.binaryType="arraybuffer",this._bindEvent()},t.prototype.connectByUrl=function(t){this.socket=new WebSocket(t),this.socket.binaryType="arraybuffer",this._bindEvent()},t.prototype._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject,e)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject,e)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},t.prototype.send=function(t){this.socket.send(t)},t.prototype.close=function(){this.socket.close()},t.prototype.disconnect=function(){this.socket.disconnect&&this.socket.disconnect()},t}();n.default=o,cc._RF.pop()},{"../manager/ErrorManager":"ErrorManager"}],HotUpdate:[function(t,e,n){"use strict";cc._RF.push(e,"37903ix9g5IVaKGz402efui","HotUpdate");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=cc._decorator,c=s.ccclass,l=s.property,u=["No use hot update!","No local manifest file found, hot update skipped.","Fail to download manifest file, hot update skipped.","Fail to parse manifest file, hot update skipped.","Asset update error.","Compression package decoding failed.","Already up to date with the latest remote version.","New version found, please try to update.","Update finished.","Update failed."];(function(t){t[t.NONE=0]="NONE",t[t.ERROR_NO_LOCAL_MANIFEST=1]="ERROR_NO_LOCAL_MANIFEST",t[t.ERROR_DOWNLOAD_MANIFEST=2]="ERROR_DOWNLOAD_MANIFEST",t[t.ERROR_PARSE_MANIFEST=3]="ERROR_PARSE_MANIFEST",t[t.ERROR_UPDATING=4]="ERROR_UPDATING",t[t.ERROR_DECOMPRESS=5]="ERROR_DECOMPRESS",t[t.ALREADY_UP_TO_DATE=6]="ALREADY_UP_TO_DATE",t[t.NEW_VERSION_FOUND=7]="NEW_VERSION_FOUND",t[t.UPDATE_FINISHED=8]="UPDATE_FINISHED",t[t.UPDATE_FAILED=9]="UPDATE_FAILED",t[t.UPDATE_PROGRESSION=10]="UPDATE_PROGRESSION"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.manifestUrl=null,e.checkHandlers=[],e.updateHandlers=[],e.state=r.NONE,e._updating=!1,e._canRetry=!1,e._am=null,e._failCount=0,e._totalFilesCount=0,e._totalBytesCount=0,e}return o(e,t),e.prototype.init=function(){if(cc.sys.isNative){var t=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"blackjack-remote-asset";console.log("Storage path for remote asset : "+t),this._am=new jsb.AssetsManager("",t,function(t,e){console.log("JS Custom Version Compare: version A is "+t+", version B is "+e);for(var n=t.split("."),i=e.split("."),o=0;o<n.length;++o){var a=parseInt(n[o]),r=parseInt(i[o]||0);if(a!==r)return a-r}return i.length>n.length?-1:0}),this._am.setVerifyCallback(function(t,e){var n=e.compressed,i=e.md5,o=e.path;return e.size,n?(console.log("Verification passed : "+o),!0):(console.log("Verification passed : "+o+" ("+i+")"),!0)}),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2)}},e.prototype.checkUpdate=function(){if(cc.sys.isNative)if(this._updating)console.log("Checking or updating ...");else{if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),this._am.loadLocalManifest(t)}this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._am.setEventCallback(this.checkUpdateCallback.bind(this)),this._am.checkUpdate(),this._updating=!0):console.log("Failed to load local manifest ...")}else cc.Component.EventHandler.emitEvents(this.checkHandlers,this.state)},e.prototype.hotUpdate=function(){if(console.log("\u5c06\u670d\u52a1\u5668\u8d44\u6e90\u66f4\u65b0\u5230\u672c\u5730"),cc.sys.isNative){if(this._am&&!this._updating){if(this._am.setEventCallback(this.hotUpdateCallback.bind(this)),this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),this._am.loadLocalManifest(t)}this._failCount=0,this._am.update(),this._updating=!0}}else cc.Component.EventHandler.emitEvents(this.updateHandlers,this.state)},e.prototype.retry=function(){cc.sys.isNative&&!this._updating&&this._canRetry&&(this._canRetry=!1,this._am.downloadFailedAssets())},e.prototype.checkUpdateCallback=function(t){var e;switch(console.log("Code: "+t.getEventCode()),t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.state=r.ERROR_NO_LOCAL_MANIFEST;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:this.state=r.ERROR_DOWNLOAD_MANIFEST;break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.state=r.ERROR_PARSE_MANIFEST;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.state=r.ALREADY_UP_TO_DATE;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.state=r.NEW_VERSION_FOUND;break;default:return}this._am.setEventCallback(null),this._updating=!1,e=u[this.state],console.log("checkUpdateCallback:",e),cc.Component.EventHandler.emitEvents(this.checkHandlers,this.state)},e.prototype.hotUpdateCallback=function(t){var e=!1,n=!1,i=0,o=0,a="0/0",s="0/0";switch(t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.state=r.ERROR_NO_LOCAL_MANIFEST,n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:this.state=r.UPDATE_PROGRESSION,this._totalFilesCount=t.getTotalFiles(),this._totalBytesCount=t.getTotalBytes(),o=t.getPercentByFile(),s=t.getDownloadedFiles()+" / "+this._totalFilesCount,i=t.getPercent(),a=t.getDownloadedBytes()+" / "+this._totalBytesCount;t.getMessage();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:this.state=r.ERROR_DOWNLOAD_MANIFEST;break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.state=r.ERROR_PARSE_MANIFEST,n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.state=r.ALREADY_UP_TO_DATE,n=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.state=r.UPDATE_FINISHED,i=1,o=1,a=this._totalBytesCount+"/"+this._totalBytesCount,s=this._totalFilesCount+"/"+this._totalFilesCount,e=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.state=r.UPDATE_FAILED,this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:this.state=r.ERROR_UPDATING,t.getAssetId(),t.getMessage(),this._failCount++;break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.state=r.ERROR_DECOMPRESS,t.getMessage()}if(n&&(this._am.setEventCallback(null),this._updating=!1),e){this._am.setEventCallback(null);var c=jsb.fileUtils.getSearchPaths(),l=this._am.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(c,l),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(c)),jsb.fileUtils.setSearchPaths(c),console.log("hotupdate done!")}cc.Component.EventHandler.emitEvents(this.updateHandlers,this.state,i,o,a,s)},e.prototype.onDestroy=function(){cc.sys.isNative&&this._am&&this._am.setEventCallback(null)},e.State=r,a([l({type:cc.Asset,tooltip:"\u5f53\u524d\u7248\u672c\u8d44\u6e90\u8bb0\u5f55\u7684manifest\u6587\u4ef6"})],e.prototype,"manifestUrl",void 0),a([l({type:cc.Component.EventHandler,tooltip:"\u68c0\u6d4b\u7ebf\u4e0a\u7248\u672c\u4e0e\u670d\u52a1\u5668\u7248\u672c\u7684\u56de\u8c03"})],e.prototype,"checkHandlers",void 0),a([l({type:cc.Component.EventHandler,tooltip:"\u70ed\u66f4\u65b0\u8fc7\u7a0b\u56de\u8c03"})],e.prototype,"updateHandlers",void 0),a([c],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],HttpRequest:[function(t,e,n){"use strict";cc._RF.push(e,"f6f80Xr6eZCr4qLxbO7jcB3","HttpRequest");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("../manager/ErrorManager"),r=t("../event/EventDispatcher"),s=t("../event/EventConst"),c=function(t){function e(){var e=t.call(this)||this;return e.timeout=0,e._url="",e._method="",e}return o(e,t),Object.defineProperty(e.prototype,"response",{get:function(){return this._xhr?null!=this._xhr.response?this._xhr.response:"text"==this._responseType?this._xhr.responseText:"arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)?this._xhr.responseBody:"document"==this._responseType?this._xhr.responseXML:null:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!1,configurable:!0}),e.prototype.getXHR=function(){return cc.loader.getXMLHttpRequest()},e.prototype.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e,this._xhr&&(this._xhr.abort(),this._xhr=null);var n=this.getXHR();window.XMLHttpRequest?(n.addEventListener("load",this.onload.bind(this)),n.addEventListener("error",this.onerror.bind(this))):n.onreadystatechange=this.onReadyStateChange.bind(this),n.onprogress=this.updateProgress.bind(this),n.ontimeout=this.onTimeout.bind(this),n.open(this._method,this._url,!0),this._xhr=n},e.prototype.send=function(t){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var e in this.headerObj)this._xhr.setRequestHeader(e,this.headerObj[e]);this._xhr.timeout=this.timeout,this._xhr.send(t)},e.prototype.abort=function(){this._xhr&&this._xhr.abort()},e.prototype.getAllResponseHeaders=function(){return this._xhr?this._xhr.getAllResponseHeaders()||"":null},e.prototype.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},e.prototype.getResponseHeader=function(t){return this._xhr?this._xhr.getResponseHeader(t)||"":null},e.prototype.onTimeout=function(){a.default.warn(1052,this._url),this.dispatch(s.default.IO_ERROR)},e.prototype.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var e=t.status>=400||0==t.status,n=this._url,i=this;window.setTimeout(function(){e?(i.hasEventListener(s.default.IO_ERROR)||a.default.error(1011,n),i.dispatch(s.default.IO_ERROR)):i.dispatch(s.default.COMPLETE)},0)}},e.prototype.updateProgress=function(t){t.lengthComputable&&this.dispatch(s.default.PROGRESS,[t.loaded,t.total])},e.prototype.onload=function(){var t=this,e=this._xhr,n=this._url,i=e.status>=400;window.setTimeout(function(){i?(t.hasEventListener(s.default.IO_ERROR)||a.default.error(1011,n),t.dispatch(s.default.IO_ERROR)):t.dispatch(s.default.COMPLETE)},0)},e.prototype.onerror=function(){var t=this._url,e=this;window.setTimeout(function(){e.hasEventListener(s.default.IO_ERROR)||a.default.error(1011,t),e.dispatch(s.default.IO_ERROR)},0)},e}(r.default);n.default=c,cc._RF.pop()},{"../event/EventConst":"EventConst","../event/EventDispatcher":"EventDispatcher","../manager/ErrorManager":"ErrorManager"}],HttpResponseType:[function(t,e,n){"use strict";cc._RF.push(e,"f74d367yxtKZrA+DvCfPU72","HttpResponseType"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();n.default=i,cc._RF.pop()},{}],I18N:[function(t,e,n){"use strict";cc._RF.push(e,"f2f2aIygUVIdKsTQ9oGY7Wn","I18N"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../display/LocalText"),o=function(){function t(){}return t.getLocalKey=function(e){return t.countryCodeMap[e]?t.countryCodeMap[e]:(e=(e=e.split("_")[0]).toLowerCase(),(e=t.countryCodeMap[e])||(e=t.defaultLocation),e)},t.loadProperty=function(e,n){e&&(t.defaultData=t.readProperty(e)),t.datas=n?t.readProperty(n):{}},t.readProperty=function(t){for(var e={},n=0,i=t.split(/\r?\n/);n<i.length;n++){var o=i[n];if("#"!=o.charAt(0)){var a=o.indexOf("=");if(-1!=a){var r=o.substring(0,a);r=(r=r.replace(/[\s]+/g,"")).replace(/\"/gi,"");var s=o.substring(a+1,o.length);s=s.trim(),e[r]=s}}}return e},t.get=function(e){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e=(e=e.replace(/\n/gi,"\\n")).replace(/[\s]+/g,""),n=t.datas.hasOwnProperty(e)?t.datas[e]:t.defaultData[e],(n=this.i18nFormat(n,i))||(cc.warn("[I18N] NO:",e),"i18n error")},t.getDefault=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t.defaultData[e];return(o=this.i18nFormat(o,n))||e},t.i18nFormat=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t&&(t=(t=(t=(t=(t=(t=(t=t.replace(/\\n/gi,"\n")).replace(/\[n\]/gi,"\n")).replace(/\\"/gi,'"')).replace(/\"/gi,"")).replace(/%%/gi,"%")).replace(/%1/gi,"")).replace(/%2/gi,"")),this.setArgs(t,e[0]&&e[0]instanceof Array?e[0]:e)},t.setArgs=function(t,e){if(!t)return t;for(var n=0;n<e.length;n++)if(null!=e[n]){var i=new RegExp("({)"+n+"(})","g");t=t.replace(i,e[n])}return t},t.setLocalText=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=t.getComponent(i.default);a||(a=t.addComponent(i.default)),a.text=e,a.params=n,a.updateText()},t.setLocalTextRichText=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=t.getComponent(i.default);a||(a=t.addComponent(i.default)),a.text=e,a.params=n,a.updateRichText()},t.removeLocalText=function(t){t.node.removeComponent(i.default)},t.countryCodeMap={zh:"cn",zh_CN:"cn",zh_TW:"tw",zh_HK:"tw",zh_MO:"tw",en:"en",en_US:"en",en_GB:"en",ja:"jp",ru:"ru",ko:"kr",kr:"kr",de:"de",es:"es",fr:"fr",it:"it",pt:"po",in:"in"},t.defaultLocation="en_US",t.datas={},t.defaultData={},t}();n.default=o,cc._RF.pop()},{"../display/LocalText":"LocalText"}],ISDK:[function(t,e,n){"use strict";cc._RF.push(e,"27fc5z99J9BxYmmBGK90Cb4","ISDK"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Image:[function(t,e,n){"use strict";cc._RF.push(e,"dddb67MFKtNbaUJ3SeceObl","Image");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../manager/RESManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.requireComponent,p=s.disallowMultiple,d=s.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.source="",e}return o(e,t),e.prototype.onLoad=function(){if(this.source){var t=this;this.source.startsWith("http")?cc.loader.load(this.source,function(e,n){t.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)}):r.default.binding(this.node.getComponent(cc.Sprite),this.source)}},a([l()],e.prototype,"source",void 0),a([c,u(cc.Sprite),p,d("Display/\u4f4d\u56fe")],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../manager/RESManager":"RESManager"}],ItemLevelMap:[function(t,e,n){"use strict";cc._RF.push(e,"6213eINRS9HKYnskRpSKwM1","ItemLevelMap");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/event/EventManager"),s=t("../../../Framework/core/manager/PopUpManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../../../Framework/core/manager/UIManager"),u=t("../../../Framework/core/util/I18N"),p=t("../../Datas/EventName"),d=t("../../Datas/GameDataManager"),h=t("../../Datas/PopupKey"),f=t("../../GameConfig"),m=t("../UserData"),g=cc._decorator,y=g.ccclass,v=g.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Normal=null,e.First=null,e.Buttons=null,e.LevelPosition=null,e.LevelCircle=null,e.wayLeft=null,e.wayRight=null,e.wayLeftFirst=null,e.wayRightFirst=null,e.wayLeftLocal=null,e.wayRightLocal=null,e.Location=null,e.landmark=null,e.ButtonLeftTrip=[],e.ButtonRightTrip=[],e.landMarkLeftPos=[cc.v3(-160,-170),cc.v3(-160,-60),cc.v3(-60,-16),cc.v3(60,-16),cc.v3(160,30)],e.landMarkRightPos=[cc.v3(160,-170),cc.v3(160,-60),cc.v3(60,-16),cc.v3(-60,-16),cc.v3(-160,30)],e.idx=0,e.UIMap=null,e.chapterData=null,e.way=null,e.progressWay=null,e.isProgressing=!1,e.progressStart=0,e.progressEnd=0,e.progressTime=0,e.progressMaxTime=0,e.progressType=null,e.progress=0,e.progressCallback=null,e}return o(e,t),e.prototype.onLoad=function(){r.default.instance.on(p.default.MapHidePositionAnimation,this.MapHidePositionAnimation,this),r.default.instance.on(p.default.MapAnimation,this.MapAnimation,this),r.default.instance.on(p.default.MapProgressAnimation,this.MapProgressAnimation,this),r.default.instance.on(p.default.MapLandmarkUnlockFinish,this.MapLandmarkUnlockFinish,this),r.default.instance.on(p.default.MapChapterFinish,this.MapChapterFinish,this)},e.prototype.onDestroy=function(){r.default.instance.off(p.default.MapHidePositionAnimation,this.MapHidePositionAnimation,this),r.default.instance.off(p.default.MapAnimation,this.MapAnimation,this),r.default.instance.off(p.default.MapProgressAnimation,this.MapProgressAnimation,this),r.default.instance.off(p.default.MapLandmarkUnlockFinish,this.MapLandmarkUnlockFinish,this),r.default.instance.off(p.default.MapChapterFinish,this.MapChapterFinish,this)},e.prototype.update=function(t){var e;this.isProgressing&&(this.progressTime+=t,this.progress=this.progressStart+(this.progressEnd-this.progressStart)*(this.progressTime/this.progressMaxTime),this.progressTime>=this.progressMaxTime&&(this.progress=this.progressEnd,this.isProgressing=!1,null===(e=this.progressCallback)||void 0===e||e.call(),this.progressCallback=null),this.progressWay&&("Normal"==this.progressType?this.drawNormalCurLevel(!0,this.progressWay,this.progress):this.drawFirstCurLevel(!0,this.progressWay,this.progress)))},e.prototype.setInfo=function(t,e){this.idx=t,this.UIMap=e;for(var n=0;n<this.ButtonLeftTrip.length;n++)this.ButtonLeftTrip[n].node.active=!1;for(n=0;n<this.ButtonRightTrip.length;n++)this.ButtonRightTrip[n].node.active=!1;this.wayLeft.active=!1,this.wayRight.active=!1,this.wayLeftFirst.active=!1,this.wayRightFirst.active=!1,this.wayLeftLocal.active=!1,this.wayRightLocal.active=!1,this.Location.active=!1,this.landmark.active=!1,this.LevelPosition.node.opacity=255,this.LevelPosition.node.active=!1,this.LevelPosition.stop(),this.LevelCircle.node.active=!1,this.LevelCircle.stop(),this.Buttons.active=!0,this.First.active=!0,this.Normal.active=!0,this.Normal.y=0,this.node.height=200;var i=d.default.instance.getChapterLevelIndexsData()[this.UIMap.showLevel]||0,o=!1,a=!1;t==i?(o=!0,a=!0):t>i?(this.wayLeft.getChildByName("WayProgress").active=!1,this.wayRight.getChildByName("WayProgress").active=!1,this.wayLeftFirst.getChildByName("WayProgress").active=!1,this.wayRightFirst.getChildByName("WayProgress").active=!1,this.wayLeftLocal.getChildByName("WayProgress").active=!1,this.wayRightLocal.getChildByName("WayProgress").active=!1):t<i&&(this.wayLeft.getChildByName("WayProgress").active=!0,this.wayRight.getChildByName("WayProgress").active=!0,this.wayLeftFirst.getChildByName("WayProgress").active=!0,this.wayRightFirst.getChildByName("WayProgress").active=!0,this.wayLeftLocal.getChildByName("WayProgress").active=!0,this.wayRightLocal.getChildByName("WayProgress").active=!0,this.wayLeft.getComponentInChildren(cc.Mask).enabled=!1,this.wayRight.getComponentInChildren(cc.Mask).enabled=!1,this.wayLeftFirst.getComponentInChildren(cc.Mask).enabled=!1,this.wayRightFirst.getComponentInChildren(cc.Mask).enabled=!1,this.wayLeftLocal.getComponentInChildren(cc.Mask).enabled=!1,this.wayRightLocal.getComponentInChildren(cc.Mask).enabled=!1);var r=0,s=cc.v3(),c=this.UIMap.showLevel;if(this.UIMap.isUnlockChapter){c-=1,a=!1;var l=d.default.instance.getChapterLevelIndexsData();this.idx==l[c]&&(a=!0)}var p=d.default.instance.getChapterData();if(this.chapterData=p[t],p[t].isRight){for(n=0;n<p[t].lv.length;n++)(h=p[t].lv[n])>0&&this.ButtonRightTrip[n]&&(this.ButtonRightTrip[n].node.active=!0,this.ButtonRightTrip[n].node.getComponentInChildren(cc.Label).string=h,this.ButtonRightTrip[n].interactable=h<=c,this.setStar(this.ButtonRightTrip[n],h,c),this.setPlayGame(this.ButtonRightTrip[n],h),h==c&&(s=this.ButtonRightTrip[n].node.position),h==this.UIMap.showLevel&&(r=n+1)),-1==h&&(this.landmark.active=!0,this.landmark.position=this.landMarkRightPos[n]);null!=p[t].Chaptelandmark&&(this.landmark.active=!0,this.landmark.position=this.landMarkRightPos[p[t].Chaptelandmark]),p[t].start?(this.wayRightFirst.active=!0,this.wayRightLocal.active=!0,this.UIMap.isUnlockChapter?this.drawFirstCurLevel(o,this.wayRightFirst.getComponentInChildren(cc.Mask),0):this.drawFirstCurLevel(o,this.wayRightFirst.getComponentInChildren(cc.Mask),r),this.drawNormalCurLevel(o,this.wayRightLocal.getComponentInChildren(cc.Mask),4)):(this.wayRight.active=!0,this.drawNormalCurLevel(o,this.wayRight.getComponentInChildren(cc.Mask),r))}else{for(n=0;n<p[t].lv.length;n++){var h;(h=p[t].lv[n])>0&&this.ButtonLeftTrip[n]&&(this.ButtonLeftTrip[n].node.active=!0,this.ButtonLeftTrip[n].node.getComponentInChildren(cc.Label).string=h,this.ButtonLeftTrip[n].interactable=h<=c,this.setStar(this.ButtonLeftTrip[n],h,c),this.setPlayGame(this.ButtonLeftTrip[n],h),h==c&&(s=this.ButtonLeftTrip[n].node.position),h==this.UIMap.showLevel&&(r=n+1)),-1==h&&(this.landmark.active=!0,this.landmark.position=this.landMarkLeftPos[n])}null!=p[t].Chaptelandmark&&(this.landmark.active=!0,this.landmark.position=this.landMarkLeftPos[p[t].Chaptelandmark]),p[t].start?(this.wayLeftFirst.active=!0,this.wayLeftLocal.active=!0,this.UIMap.isUnlockChapter?this.drawFirstCurLevel(o,this.wayLeftFirst.getComponentInChildren(cc.Mask),0):this.drawFirstCurLevel(o,this.wayLeftFirst.getComponentInChildren(cc.Mask),r),this.drawNormalCurLevel(o,this.wayLeftLocal.getComponentInChildren(cc.Mask),4)):(this.wayLeft.active=!0,this.drawNormalCurLevel(o,this.wayLeft.getComponentInChildren(cc.Mask),r))}if(p[t].Chapter){var f=p[t].Chapter.chapter_name,m=this.Location.getComponent(cc.Sprite);this.UIMap.setLocation(m,f);var g=cc.MaterialVariant.createWithBuiltin(cc.MaterialVariant.BUILTIN_NAME.SPRITE);this.UIMap.showLevel<parseInt(p[t].Chapter.start_lv)&&(g=cc.MaterialVariant.createWithBuiltin(cc.MaterialVariant.BUILTIN_NAME.GRAY_SPRITE)),m.setMaterial(0,g);var y=this.Location.getChildByName("LabContent").getChildByName("LabStage").getComponent(cc.Label),v=this.Location.getChildByName("LabContent").getChildByName("LabChapterName").getComponent(cc.Label);y.setMaterial(0,g),v.setMaterial(0,g),u.default.setLocalText(y,"list_stage",p[t].Chapter.chapter_id),v.string=f}if(p[t].landmark){f=p[t].landmark.landmark_name;var _=parseInt(p[t].landmark.condition_global),C=this.landmark.getChildByName("LandIcon").getComponent(cc.Sprite);this.landmark.getChildByName("grey").opacity=255,this.landmark.getChildByName("grey").active=this.UIMap.showLevel<=_,this.UIMap.setLandMark(C,f),g=cc.MaterialVariant.createWithBuiltin(cc.MaterialVariant.BUILTIN_NAME.SPRITE),this.UIMap.showLevel<=_&&(g=cc.MaterialVariant.createWithBuiltin(cc.MaterialVariant.BUILTIN_NAME.GRAY_SPRITE)),C.setMaterial(0,g)}if(p[t].start)if(0!=t){this.node.height=900,this.Location.active=!0;var b=this.Location.getComponentInChildren(sp.Skeleton);b.node.active=!0;var T=d.default.instance.getChapterProgress(this.chapterData.Chapter,this.UIMap.showLevel),S=T[0],w=T[1];this.Location.getChildByName("Detail").active=!0,this.Location.getChildByName("Detail").getComponentInChildren(cc.ProgressBar).progress=S/w,this.Location.getChildByName("Detail").getChildByName("LabPro").getComponent(cc.Label).string=S+"/"+w,this.UIMap.showLevel>parseInt(p[t].Chapter.end_lv)?b.setAnimation(0,"complete",!1):this.UIMap.showLevel>=parseInt(p[t].Chapter.start_lv)?b.setAnimation(0,"normal",!1):(this.Location.getChildByName("Detail").active=!1,b.setAnimation(0,"lock",!1))}else this.node.height=580,this.wayLeftLocal.active=!1,this.wayRightLocal.active=!1;a&&(this.LevelPosition.node.active=!0,this.LevelPosition.node.position=s,this.LevelPosition.play(),this.LevelCircle.node.active=!0,this.LevelCircle.node.position=s,this.LevelCircle.play())},e.prototype.setStar=function(t,e,n){var i=t.node.getChildByName("Stars");if(e<=n){i.active=!0;for(var o=m.default.instance.getStarByLevel(e),a=1;a<=3;a++)i.getChildByName("Star"+a).children[0].active=a<=o}else i.active=!1},e.prototype.setPlayGame=function(t,e){if(0==t.clickEvents.length){var n=new cc.Component.EventHandler;n.target=this.node,n.component="ItemLevelMap",n.handler="onPlayGame",n.customEventData=e.toString(),t.clickEvents.push(n)}else t.clickEvents[0].customEventData=e.toString()},e.prototype.onPlayGame=function(t,e){c.default.instance.btnClick();var n=parseInt(e);s.default.addPop(h.default.UIGameStartLevel,n)},e.prototype.drawNormalCurLevel=function(t,e,n){if(t){e.node.active=!0,e.enabled=!0;var i=e._graphics;i.clear();var o=Math.floor(n),a=n%1;if(0==o){var r=97*a;i.moveTo(-106,-94),i.lineTo(-106+r,-94)}else o>0&&(i.moveTo(-106,-94),i.lineTo(-9,-94));1==o?(r=90*a,i.arc(-18,6,100,cc.misc.degreesToRadians(-90),cc.misc.degreesToRadians(-90+r),!0)):o>1&&i.arc(-18,6,100,cc.misc.degreesToRadians(-90),cc.misc.degreesToRadians(0),!0),2==o?(r=90*a,i.arc(-18,6,100,cc.misc.degreesToRadians(0),cc.misc.degreesToRadians(0+r),!0)):o>2&&i.arc(-18,6,100,cc.misc.degreesToRadians(0),cc.misc.degreesToRadians(90),!0),3==o?(r=-97*a,i.moveTo(-9,106),i.lineTo(-9+r,106)):o>3&&(i.moveTo(-9,106),i.lineTo(-106,106)),i.lineWidth=40,i.lineCap=cc.Graphics.LineCap.BUTT,i.lineJoin=cc.Graphics.LineJoin.ROUND,i.strokeColor=cc.color(255,255,255,255),i.stroke()}},e.prototype.drawFirstCurLevel=function(t,e,n){if(t){e.node.active=!0,e.enabled=!0;var i=e._graphics;i.clear();var o=Math.floor(n),a=n%1;if(0==o){var r=289*(a>.7?1:a);i.moveTo(-93,-279),i.lineTo(-93,-279+r),r=-90*(a<=.7?0:a>.85?1:(a-.7)/.15),i.arc(-37,8,53,cc.misc.degreesToRadians(-180),cc.misc.degreesToRadians(-180+r)),r=40*(a<=.85?0:(a-.85)/.15),i.moveTo(-40,65),i.lineTo(-40+r,65)}else o>0&&(i.moveTo(-93,-279),i.lineTo(-93,10),i.arc(-37,8,53,cc.misc.degreesToRadians(-180),cc.misc.degreesToRadians(-270)),i.moveTo(-40,65),i.lineTo(0,65));1==o?(r=90*a,i.arc(-6,165,100,cc.misc.degreesToRadians(-90),cc.misc.degreesToRadians(-90+r),!0)):o>1&&i.arc(-6,165,100,cc.misc.degreesToRadians(-90),cc.misc.degreesToRadians(0),!0),2==o?(r=90*a,i.arc(-6,165,100,cc.misc.degreesToRadians(0),cc.misc.degreesToRadians(0+r),!0)):o>2&&i.arc(-6,165,100,cc.misc.degreesToRadians(0),cc.misc.degreesToRadians(90),!0),3==o?(r=-93*a,i.moveTo(0,265),i.lineTo(0+r,265)):o>3&&(i.moveTo(0,265),i.lineTo(-93,265)),i.lineWidth=40,i.lineCap=cc.Graphics.LineCap.BUTT,i.lineJoin=cc.Graphics.LineJoin.ROUND,i.strokeColor=cc.color(255,255,255,255),i.stroke()}},e.prototype.MapAnimation=function(t){var e=d.default.instance.getChapterLevelIndexsData(),n=-1;if(e[t]&&(n=e[t])==this.idx)if(d.default.instance.getChapter(t))for(var i=0;i<this.chapterData.lv.length;i++)this.chapterData.lv[i]==t&&(3==i?r.default.instance.emit(p.default.MapProgressAnimation,n+1,"chapterLocal",0,1,this):2==i?r.default.instance.emit(p.default.MapProgressAnimation,n,"landmark",3,4):1==i?r.default.instance.emit(p.default.MapProgressAnimation,n,"landmark",2,3):0==i&&r.default.instance.emit(p.default.MapProgressAnimation,n,"landmark",1,2));else for(i=0;i<this.chapterData.lv.length;i++)this.chapterData.lv[i]==t&&(3==i?r.default.instance.emit(p.default.MapProgressAnimation,n+1,"landmark",0,1):2==i?r.default.instance.emit(p.default.MapProgressAnimation,n,"landmark",3,4):1==i?r.default.instance.emit(p.default.MapProgressAnimation,n,"landmark",2,3):0==i&&r.default.instance.emit(p.default.MapProgressAnimation,n,"landmark",1,2))},e.prototype.MapProgressAnimation=function(t,e,n,i,o){var a=this;if(void 0===o&&(o=null),this.idx==t){this.progressType="Normal",this.progressStart=n,this.progressEnd=i,this.isProgressing=!0,this.progressTime=0,this.progressMaxTime=f.default.MapLandmarkStartTime,this.progress=n;var r=d.default.instance.getChapterData();"landmark"==e?(r[t].isRight?this.progressWay=this.wayRight.getComponentInChildren(cc.Mask):this.progressWay=this.wayLeft.getComponentInChildren(cc.Mask),this.progressCallback=function(){a.landmarkUnlock()}):"unlockFinish"==e?(r[t].isRight?this.progressWay=this.wayRight.getComponentInChildren(cc.Mask):this.progressWay=this.wayLeft.getComponentInChildren(cc.Mask),this.progressCallback=function(){a.unlockFinish()}):"chapterFinish"==e?(r[t].isRight?this.progressWay=this.wayRightLocal.getComponentInChildren(cc.Mask):this.progressWay=this.wayLeftLocal.getComponentInChildren(cc.Mask),this.progressCallback=function(){a.chapterLandmarkUnlockFinish()}):"chapterLocal"==e?(r[t].isRight?this.progressWay=this.wayRightLocal.getComponentInChildren(cc.Mask):this.progressWay=this.wayLeftLocal.getComponentInChildren(cc.Mask),this.progressCallback=function(){(o=o||a).landmarkUnlock()}):"unlockFinishFirst"==e&&(r[t].isRight?this.progressWay=this.wayRightFirst.getComponentInChildren(cc.Mask):this.progressWay=this.wayLeftFirst.getComponentInChildren(cc.Mask),this.progressType="First",this.progressCallback=function(){a.unlockFinish()})}},e.prototype.MapLandmarkUnlockFinish=function(t){var e=d.default.instance.getChapterLevelIndexsData();if(e[t]&&e[t]==this.idx)if(d.default.instance.getChapter(t))for(var n=0;n<this.chapterData.lv.length;n++)this.chapterData.lv[n]==t&&(3==n?r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"chapterFinish",2,4):2==n?r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"chapterFinish",1,4):1==n?r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"chapterFinish",0,4):0==n&&r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"chapterFinish",0,4));else for(n=0;n<this.chapterData.lv.length;n++)this.chapterData.lv[n]==t&&(3==n?r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"unlockFinish",2,3):1==n?r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"unlockFinish",0,1):2==n?r.default.instance.emit(p.default.MapProgressAnimation,this.idx+1,"unlockFinish",1,2):0==n&&r.default.instance.emit(p.default.MapProgressAnimation,this.idx,"unlockFinish",3,4))},e.prototype.MapChapterFinish=function(t,e){var n=this;if(t==this.idx){var i=this.Location.getComponentInChildren(sp.Skeleton);i.node.active=!0,i.setAnimation(0,"deblocking",!1),i.setCompleteListener(function(){n.UIMap.isUnlockChapter=!0,r.default.instance.emit(p.default.MapScrollTo,e,f.default.MapMoveToChapterTime,.3,function(){r.default.instance.emit(p.default.MapProgressAnimation,e,"unlockFinishFirst",0,1)}),r.default.instance.emit(p.default.MapSetShowLevel,m.default.instance.Level),i.setCompleteListener(null)}),cc.tween(this.Location.getChildByName("LabContent")).delay(20/30).to(4/30,{scale:1.2}).call(function(){var t=cc.MaterialVariant.createWithBuiltin(cc.MaterialVariant.BUILTIN_NAME.SPRITE),e=n.Location.getComponent(cc.Sprite),i=n.Location.getChildByName("LabContent").getChildByName("LabStage").getComponent(cc.Label),o=n.Location.getChildByName("LabContent").getChildByName("LabChapterName").getComponent(cc.Label);e.setMaterial(0,t),i.setMaterial(0,t),o.setMaterial(0,t);var a=d.default.instance.getChapterProgress(n.chapterData.Chapter,n.UIMap.showLevel),r=a[0],s=a[1];n.Location.getChildByName("Detail").active=!0,n.Location.getChildByName("Detail").getComponentInChildren(cc.ProgressBar).progress=r/s,n.Location.getChildByName("Detail").getChildByName("LabPro").getComponent(cc.Label).string=r+"/"+s}).to(4/30,{scale:1}).start()}},e.prototype.landmarkUnlock=function(){var t=this,e=this.landmark.getChildByName("LandIcon").getComponent(cc.Sprite);e.node.color=cc.Color.GRAY,cc.tween(this.landmark.getChildByName("grey")).delay(1).to(.1,{opacity:0}).start(),cc.tween(this.landmark).to(.15,{scale:.6,angle:12}).to(.1,{angle:-12}).to(.1,{angle:12}).to(.1,{angle:-8}).to(.1,{angle:8}).to(.1,{angle:-4}).to(.1,{angle:4}).to(.1,{angle:-2}).to(.1,{angle:0}).to(.1,{scale:.7}).call(function(){e.node.color=cc.Color.WHITE;var n=cc.MaterialVariant.createWithBuiltin(cc.MaterialVariant.BUILTIN_NAME.SPRITE);e.setMaterial(0,n),t.landmark.getComponentInChildren(cc.ParticleSystem).resetSystem()}).to(.1,{scale:.9}).to(.1,{scale:.7}).call(function(){s.default.addPop(h.default.UIGameLandmarkUnlock,{idx:t.idx,chapterData:t.chapterData})}).start()},e.prototype.unlockFinish=function(){for(var t=this,e=m.default.instance.Level,n=function(n){var o=i.chapterData.lv[n],a=null;i.chapterData.isRight?o==e&&i.ButtonRightTrip[n]&&(a=i.ButtonRightTrip[n]):o==e&&i.ButtonLeftTrip[n]&&(a=i.ButtonLeftTrip[n]),a&&cc.tween(a.node).to(.2,{scaleX:1.2,scaleY:.8}).to(.2,{scaleX:.8,scaleY:1.2}).to(.2,{scaleX:1,scaleY:1}).call(function(){a.interactable=!0,t.setStar(a,o,e),t.setPlayGame(a,o),t.UIMap.isUnlockChapter=!1,r.default.instance.emit(p.default.MapHidePositionAnimation),t.scheduleOnce(function(){t.UIMap.backLevelButton(function(){l.default.instance.enableOperation(),t.levelPositionShowAnimation(a.node.position),r.default.instance.emit(p.default.MapSetShowLevel,m.default.instance.Level)})},.4)}).start()},i=this,o=0;o<this.chapterData.lv.length;o++)n(o)},e.prototype.chapterLandmarkUnlockFinish=function(){var t=this,e=d.default.instance.getChapterProgress(this.chapterData.Chapter,m.default.instance.Level),n=e[0],i=e[1];this.Location.getChildByName("Detail").getComponentInChildren(cc.ProgressBar).progress=n/i,this.Location.getChildByName("Detail").getChildByName("LabPro").getComponent(cc.Label).string=n+"/"+i;var o=m.default.instance.Level,a=this.Location.getComponentInChildren(sp.Skeleton);a.node.active=!0,a.setAnimation(0,"get badges",!1),a.setCompleteListener(function(){s.default.addPop(h.default.UIGameChapterUnlock,{chapter:t.chapterData.Chapter,idx:o,backIdx:t.idx}),a.setCompleteListener(null)})},e.prototype.MapHidePositionAnimation=function(){var t=this;this.LevelPosition.node.active&&(this.LevelCircle.node.active=!1,this.LevelCircle.stop(),this.LevelPosition.stop(),cc.tween(this.LevelPosition.node).to(.4,{scale:0,opacity:0}).call(function(){t.LevelPosition.node.active=!1}).start())},e.prototype.levelPositionShowAnimation=function(t){var e=this;this.LevelPosition.node.active=!0,this.LevelPosition.node.position=t,this.LevelPosition.node.opacity=0,this.LevelPosition.stop(),this.LevelCircle.node.active=!0,this.LevelCircle.node.position=t,this.LevelCircle.play(),cc.tween(this.LevelPosition.node).to(.3,{scale:1.3,opacity:255}).to(.2,{scale:1}).call(function(){e.LevelPosition.play()}).start()},a([v(cc.Node)],e.prototype,"Normal",void 0),a([v(cc.Node)],e.prototype,"First",void 0),a([v(cc.Node)],e.prototype,"Buttons",void 0),a([v(cc.Animation)],e.prototype,"LevelPosition",void 0),a([v(cc.Animation)],e.prototype,"LevelCircle",void 0),a([v(cc.Node)],e.prototype,"wayLeft",void 0),a([v(cc.Node)],e.prototype,"wayRight",void 0),a([v(cc.Node)],e.prototype,"wayLeftFirst",void 0),a([v(cc.Node)],e.prototype,"wayRightFirst",void 0),a([v(cc.Node)],e.prototype,"wayLeftLocal",void 0),a([v(cc.Node)],e.prototype,"wayRightLocal",void 0),a([v(cc.Node)],e.prototype,"Location",void 0),a([v(cc.Node)],e.prototype,"landmark",void 0),a([v(cc.Button)],e.prototype,"ButtonLeftTrip",void 0),a([v(cc.Button)],e.prototype,"ButtonRightTrip",void 0),a([y],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../UserData":"UserData"}],ItemMilestone:[function(t,e,n){"use strict";cc._RF.push(e,"fe1a6dqhDtKRriFCCtSkhTh","ItemMilestone");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/event/EventManager"),s=t("../../../Framework/core/manager/PopUpManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../../Datas/EventName"),u=t("../../Datas/GameDataManager"),p=t("../../Datas/PopupKey"),d=t("../ItemsUtils"),h=t("../UserData"),f=cc._decorator,m=f.ccclass,g=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgEnd=null,e.Content=null,e.Mask=null,e.LabStarCount=null,e.DownProgress=null,e.UpProgress=null,e.CoinLabTip=null,e.LabRewardCount=null,e.CenterProgress=null,e.Coin=null,e.Filp=null,e.Turn=null,e.Magic=null,e.Find=null,e.Tiles=null,e.MilestoneBox=null,e.Rewards=null,e.CheckMark=null,e.ButtonGet=null,e.LabHasStarCount=null,e.HasStar=null,e.idx=0,e.UIMenu=null,e.id=0,e.starCount=0,e.rewardId=0,e.rewardCount=0,e.nextStarCount=null,e}return o(e,t),e.prototype.onLoad=function(){cc.tween(this.ButtonGet).sequence(cc.tween().to(.3,{scale:1.1},{easing:"cubicOut"}),cc.tween().to(.3,{scale:1},{easing:"cubicIn"})).repeatForever().start()},e.prototype.setInfo=function(t,e){this.idx=t,this.UIMenu=e;var n=u.default.instance.getMilestoneData(),i=u.default.instance.getMilestoneDataById(this.idx),o=u.default.instance.getMilestoneDataById(this.idx+1);i&&(this.id=parseInt(i.id),this.starCount=parseInt(i.Stars),this.rewardId=parseInt(i.RewardItem),this.rewardCount=parseInt(i.RewardCount)),this.nextStarCount=o?parseInt(o.Stars):null;var a=this.UIMenu.StarsCount>=this.starCount;this.Coin.active=1==this.rewardId,this.Filp.active=2==this.rewardId,this.Turn.active=3==this.rewardId,this.Find.active=4==this.rewardId,this.Magic.active=5==this.rewardId,this.Tiles.active=6==this.rewardId,this.MilestoneBox.active=7==this.rewardId,this.CheckMark.active=!1,this.ButtonGet.active=!1,this.HasStar.active=!1,this.Content.active=!0,this.BgEnd.active=!1,this.CenterProgress.active=!0,this.UpProgress.active=!1,this.DownProgress.active=!1,this.node.height=220,0==this.idx?(this.DownProgress.active=!0,this.Content.active=!1,this.node.height=556,this.DownProgress.getComponent(cc.Widget).updateAlignment(),this.UIMenu.StarsCount>=0&&this.UIMenu.StarsCount<this.nextStarCount&&(this.DownProgress.getChildByName("bar").height=140*this.UIMenu.StarsCount/this.nextStarCount,this.HasStar.y=this.HasStar.parent.convertToNodeSpaceAR(this.DownProgress.convertToWorldSpaceAR(this.DownProgress.getChildByName("bar").position)).y+this.DownProgress.getChildByName("bar").height,this.HasStar.active=!0)):this.idx==n.length+1?(this.BgEnd.active=!0,this.Content.active=!1,this.node.height=800):this.idx==n.length?(this.CenterProgress.active=!1,this.UpProgress.active=!0,this.UIMenu.StarsCount>=this.starCount?(this.HasStar.y=20,this.HasStar.active=!0,this.UpProgress.getChildByName("bar").height=22):this.UpProgress.getChildByName("bar").height=0):this.UIMenu.StarsCount>=this.starCount&&this.UIMenu.StarsCount<this.nextStarCount?(this.CenterProgress.getChildByName("bar").height=this.node.height*(this.UIMenu.StarsCount-this.starCount)/(this.nextStarCount-this.starCount),this.HasStar.y=this.HasStar.parent.convertToNodeSpaceAR(this.CenterProgress.convertToWorldSpaceAR(this.CenterProgress.getChildByName("bar").position)).y+this.CenterProgress.getChildByName("bar").height,this.HasStar.active=!0):null!=this.nextStarCount&&this.UIMenu.StarsCount<this.nextStarCount?(this.CenterProgress.getChildByName("bar").height=0,this.UpProgress.getChildByName("bar").height=0):this.UIMenu.StarsCount>this.starCount&&(this.CenterProgress.getChildByName("bar").height=this.node.height,this.UpProgress.getChildByName("bar").height=this.node.height),this.LabHasStarCount.string=this.UIMenu.StarsCount.toString(),this.CoinLabTip.active=1==this.rewardId,this.LabRewardCount.string="x"+this.rewardCount,this.LabStarCount.string=this.starCount.toString();var r=h.default.instance.isMilestoneRewardGet(this.id);this.Mask.active=!a,this.CheckMark.active=a&&r,this.ButtonGet.active=a&&!r,this.setGetReward(this.ButtonGet.getComponent(cc.Button),this.id)},e.prototype.setGetReward=function(t,e){if(0==t.clickEvents.length){var n=new cc.Component.EventHandler;n.target=this.node,n.component="ItemMilestone",n.handler="onGetReward",n.customEventData=e.toString(),t.clickEvents.push(n)}else t.clickEvents[0].customEventData=e.toString()},e.prototype.onGetReward=function(){switch(c.default.instance.btnClick(),h.default.instance.setMilestoneReward(this.id),this.CheckMark.active=!0,this.ButtonGet.active=!1,this.rewardId){case 1:h.default.instance.Coin+=this.rewardCount,r.default.instance.emit(l.default.UpdateCoin),d.default.instance.getMilestoneReward(this.node,this.Rewards.position,this.rewardCount,"coin");break;case 2:h.default.instance.Filp+=this.rewardCount,d.default.instance.getMilestoneReward(this.node,this.Rewards.position,this.rewardCount,"filp");break;case 3:h.default.instance.Turn+=this.rewardCount,d.default.instance.getMilestoneReward(this.node,this.Rewards.position,this.rewardCount,"turn");break;case 4:h.default.instance.Find+=this.rewardCount,d.default.instance.getMilestoneReward(this.node,this.Rewards.position,this.rewardCount,"find");break;case 5:case 6:break;case 7:h.default.instance.Filp+=2,h.default.instance.Find+=2,s.default.addPop(p.default.UIGameItemGet,{Filp:2,Find:2,callback:null})}r.default.instance.emit(l.default.UpdateMilestoneGetCount)},a([g(cc.Node)],e.prototype,"BgEnd",void 0),a([g(cc.Node)],e.prototype,"Content",void 0),a([g(cc.Node)],e.prototype,"Mask",void 0),a([g(cc.Label)],e.prototype,"LabStarCount",void 0),a([g(cc.Node)],e.prototype,"DownProgress",void 0),a([g(cc.Node)],e.prototype,"UpProgress",void 0),a([g(cc.Node)],e.prototype,"CoinLabTip",void 0),a([g(cc.Label)],e.prototype,"LabRewardCount",void 0),a([g(cc.Node)],e.prototype,"CenterProgress",void 0),a([g(cc.Node)],e.prototype,"Coin",void 0),a([g(cc.Node)],e.prototype,"Filp",void 0),a([g(cc.Node)],e.prototype,"Turn",void 0),a([g(cc.Node)],e.prototype,"Magic",void 0),a([g(cc.Node)],e.prototype,"Find",void 0),a([g(cc.Node)],e.prototype,"Tiles",void 0),a([g(cc.Node)],e.prototype,"MilestoneBox",void 0),a([g(cc.Node)],e.prototype,"Rewards",void 0),a([g(cc.Node)],e.prototype,"CheckMark",void 0),a([g(cc.Node)],e.prototype,"ButtonGet",void 0),a([g(cc.Label)],e.prototype,"LabHasStarCount",void 0),a([g(cc.Node)],e.prototype,"HasStar",void 0),a([m],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../ItemsUtils":"ItemsUtils","../UserData":"UserData"}],ItemStore:[function(t,e,n){"use strict";cc._RF.push(e,"2714fyD3kNDhoF/AT42V2Pm","ItemStore");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/event/EventManager"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../../Framework/core/util/I18N"),p=t("../../Datas/EventName"),d=t("../../Datas/GameDataManager"),h=t("../../Datas/PopupKey"),f=t("../UserData"),m=cc._decorator,g=m.ccclass,y=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonGet=null,e.ButtonGetGray=null,e.LabCount=null,e.LabHasTime=null,e.Coin=null,e.Filp=null,e.Turn=null,e.Find=null,e.UIMenu=null,e.idx=0,e.id=0,e.rewardId=0,e.rewardCount=0,e.maxTime=0,e}return o(e,t),e.prototype.onLoad=function(){cc.tween(this.ButtonGet).sequence(cc.tween().to(.3,{scale:1.1},{easing:"cubicOut"}),cc.tween().to(.3,{scale:1},{easing:"cubicIn"})).repeatForever().start()},e.prototype.setInfo=function(t,e){this.idx=t,this.UIMenu=e,this.id=t+1;var n=d.default.instance.getStoreDataById(this.id);this.rewardId=parseInt(n.reward),this.rewardCount=parseInt(n.reward_number),this.maxTime=parseInt(n.times),this.updateInfo(),this.Coin.active=1==this.rewardId,this.Filp.active=2==this.rewardId,this.Turn.active=3==this.rewardId,this.Find.active=4==this.rewardId,this.setGetReward(this.ButtonGet.getComponent(cc.Button),this.id)},e.prototype.updateInfo=function(){var t=f.default.instance.getStoreTime(this.id);this.LabCount.string="x "+this.rewardCount,u.default.setLocalText(this.LabHasTime,"shop_remaining",(this.maxTime-t).toString()),this.ButtonGet.active=!(this.maxTime<=t),this.ButtonGetGray.active=this.maxTime<=t},e.prototype.setGetReward=function(t,e){if(0==t.clickEvents.length){var n=new cc.Component.EventHandler;n.target=this.node,n.component="ItemStore",n.handler="onADGetReward",n.customEventData=e.toString(),t.clickEvents.push(n)}else t.clickEvents[0].customEventData=e.toString()},e.prototype.onADGetReward=function(){var t=this;l.default.instance.btnClick(),s.default.showReward(function(){f.default.instance.setStoreTime(t.id),t.UIMenu.hideStoreInfo();var e=function(){t.UIMenu.showStoreInfo()};switch(t.rewardId){case 1:f.default.instance.Coin+=t.rewardCount,r.default.instance.emit(p.default.UpdateCoin),c.default.addPop(h.default.UIGameItemGet,{Coin:t.rewardCount,callback:e});break;case 2:f.default.instance.Filp+=t.rewardCount,c.default.addPop(h.default.UIGameItemGet,{Filp:t.rewardCount,callback:e});break;case 3:f.default.instance.Turn+=t.rewardCount,c.default.addPop(h.default.UIGameItemGet,{Turn:t.rewardCount,callback:e});break;case 4:f.default.instance.Find+=t.rewardCount,c.default.addPop(h.default.UIGameItemGet,{Find:t.rewardCount,callback:e})}t.updateInfo()},this)},a([y(cc.Node)],e.prototype,"ButtonGet",void 0),a([y(cc.Node)],e.prototype,"ButtonGetGray",void 0),a([y(cc.Label)],e.prototype,"LabCount",void 0),a([y(cc.Label)],e.prototype,"LabHasTime",void 0),a([y(cc.Node)],e.prototype,"Coin",void 0),a([y(cc.Node)],e.prototype,"Filp",void 0),a([y(cc.Node)],e.prototype,"Turn",void 0),a([y(cc.Node)],e.prototype,"Find",void 0),a([g],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../UserData":"UserData"}],ItemsUtils:[function(t,e,n){"use strict";cc._RF.push(e,"361afoqvKlHyrQL3S1GnZhh","ItemsUtils");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Datas/GameDataManager"),a=t("../GameConfig"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function t(){}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.getMilestoneReward=function(t,e,n,i,r){void 0===r&&(r=0),o.default.instance.getBundle(a.default.MainBundleName).load("Prefabs/Items/ItemReward",cc.Prefab,function(o,a){if(o)console.error(o);else{var s=cc.instantiate(a);s.parent=t,s.position=e,s.opacity=0,s.getComponentInChildren(cc.Label).string="x"+n,s.getChildByName(i).active=!0,cc.tween(s).delay(r).parallel(cc.tween().to(.1,{opacity:255}).delay(.3).to(.1,{opacity:0}),cc.tween().by(.5,{y:100})).removeSelf().start()}})},t.prototype.getGuideTip=function(t,e,n,i){void 0===i&&(i=""),o.default.instance.getBundle(a.default.MainBundleName).load("Prefabs/Items/ItemGuideTip",cc.Prefab,function(o,a){if(o)console.error(o);else{var r=cc.instantiate(a);r.parent=e,r.position=n,r.opacity=0,r.getComponentInChildren(cc.Label).string=i,cc.tween(r).to(.1,{opacity:255}).start(),t.guideTip=r}})},t.prototype.getGuideHand=function(t,e){var n=this;o.default.instance.getBundle(a.default.MainBundleName).load("Prefabs/Items/ItemGuideHand",cc.Prefab,function(i,o){if(i)console.error(i);else{var a=cc.instantiate(o);a.parent=e,t.guideHand=a,a.getComponent(cc.Animation).on("finished",function(){t.handTip()},n),t.handTip()}})},t.prototype.getGuideArrowHand=function(t,e,n){o.default.instance.getBundle(a.default.MainBundleName).load("Prefabs/Items/ItemGuideArrowHand",cc.Prefab,function(i,o){if(i)console.error(i);else{var a=cc.instantiate(o);a.parent=e,a.position=n,t.guideArrowHand=a}})},e=i([s],t)}());n.default=c,cc._RF.pop()},{"../Datas/GameDataManager":"GameDataManager","../GameConfig":"GameConfig"}],LabelAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"254efJEYTdPFahi0tgd6shm","LabelAdapter"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this._numberValue=0,this.prefix="",this.Suffix="",this.label=t,this._numberValue=Number(t.string)||0}return Object.defineProperty(t.prototype,"NumberValue",{get:function(){return this._numberValue},set:function(t){this._numberValue=t,this.label.string=Math.floor(t)+""},enumerable:!1,configurable:!0}),t}();n.default=i,cc._RF.pop()},{}],LaunchComponent:[function(t,e,n){"use strict";cc._RF.push(e,"0459eEoCEFJvZnPho70TvP7","LaunchComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Scripts/Datas/PopupKey"),s=t("../core/event/EventManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labProgress=null,e.loadingProgress=null,e.resProgress=0,e.dataProgress=0,e.sceneProgress=0,e}return o(e,t),e.prototype.onLoad=function(){s.default.instance.on(r.default.LoadResProgress,this.progressResCallback,this),s.default.instance.on(r.default.LoadDataProgress,this.progressDataCallback,this),this.loadingProgress.progress=0,this.resProgress=0,this.dataProgress=0},e.prototype.onDestroy=function(){s.default.instance.off(r.default.LoadResProgress,this.progressResCallback,this),s.default.instance.off(r.default.LoadDataProgress,this.progressDataCallback,this)},e.prototype.progressResCallback=function(t){this.resProgress=t,this.updateProgress()},e.prototype.progressDataCallback=function(t){this.dataProgress=t,this.updateProgress()},e.prototype.updateProgress=function(){this.loadingProgress.progress=this.resProgress+this.dataProgress+this.sceneProgress},a([u(cc.Label)],e.prototype,"labProgress",void 0),a([u(cc.ProgressBar)],e.prototype,"loadingProgress",void 0),a([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Scripts/Datas/PopupKey":"PopupKey","../core/event/EventManager":"EventManager"}],ListItem:[function(t,e,n){"use strict";cc._RF.push(e,"19ae7rSmo9Fnop8Ddoj2KIc","ListItem");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=cc._decorator,c=s.ccclass,l=s.property,u=s.disallowMultiple,p=s.menu,d=s.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=r.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return o(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case r.TOGGLE:this.selectedFlag.active=t;break;case r.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==r.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,n){if(void 0===n&&(n=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var i=new cc.Component.EventHandler;return i.target=n||t.node,i.component=t.comName,i.handler=e,i}},e.prototype.showAni=function(t,e,n){var i,o=this;switch(t){case 0:i=cc.tween(o.node).to(.2,{scale:.7}).by(.3,{y:2*o.node.height});break;case 1:i=cc.tween(o.node).to(.2,{scale:.7}).by(.3,{x:2*o.node.width});break;case 2:i=cc.tween(o.node).to(.2,{scale:.7}).by(.3,{y:-2*o.node.height});break;case 3:i=cc.tween(o.node).to(.2,{scale:.7}).by(.3,{x:-2*o.node.width});break;default:i=cc.tween(o.node).to(.3,{scale:.1})}(e||n)&&i.call(function(){if(n){o.list._delSingleItem(o.node);for(var t=o.list.displayData.length-1;t>=0;t--)if(o.list.displayData[t].id==o.listId){o.list.displayData.splice(t,1);break}}e()}),i.start()},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},a([l({type:cc.Sprite,tooltip:!1})],e.prototype,"icon",void 0),a([l({type:cc.Node,tooltip:!1})],e.prototype,"title",void 0),a([l({type:cc.Enum(r),tooltip:!1})],e.prototype,"selectedMode",void 0),a([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>r.NONE}})],e.prototype,"selectedFlag",void 0),a([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==r.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),a([l({tooltip:!1})],e.prototype,"adaptiveSize",void 0),a([c,u(),p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),d(-5001)],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],List:[function(t,e,n){"use strict";cc._RF.push(e,"435e72ElzNKLLyxC2Ce2rxP","List");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s,c,l=cc._decorator,u=l.ccclass,p=l.property,d=l.disallowMultiple,h=l.menu,f=l.executionOrder,m=l.requireComponent,g=t("./ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(r||(r={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(c||(c={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=r.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=s.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=c.NONE,e.repeatEventSingle=!1,e.selectedEvent=new cc.Component.EventHandler,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return o(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,n=this;switch(n.selectedMode){case c.SINGLE:if(!n.repeatEventSingle&&t==n._selectedId)return;e=n.getItemByListId(t);var i=void 0;if(n._selectedId>=0?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=t,e&&((i=e.getComponent(g.default)).selected=!0),n._lastSelectedId>=0&&n._lastSelectedId!=n._selectedId){var o=n.getItemByListId(n._lastSelectedId);o&&(o.getComponent(g.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(e=n.getItemByListId(t)))return;i=e.getComponent(g.default),n._selectedId>=0&&(n._lastSelectedId=n._selectedId),n._selectedId=t;var a=!i.selected;i.selected=a;var r=n.multSelected.indexOf(t);a&&r<0?n.multSelected.push(t):!a&&r>=0&&n.multSelected.splice(r,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems,a)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=s.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var n=e.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var i=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<i;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(o=0;o<e._numItems;o++)e._createOrUpdateItem2(o);e.displayItemNum=e._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;cc.isValid(t._itemTmp)&&t._itemTmp.destroy(),cc.isValid(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},e.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==r.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=s.ADHERING&&t._slideMode!=s.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var n=e-1;e=n*n*n*n*n+1}var i=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),o=this._scrollView.getScrollEndedEventTiming(),a=Math.abs(e-1)<=o;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),a&&(this._scrollView._autoScrolling=!1);var r=i.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),a),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var n=t.getComponent(g.default),i=!1;switch(n||(i=!0),i&&(e.selectedMode=c.NONE),(n=t.getComponent(cc.Widget))&&n.enabled&&(e._needUpdateWidget=!0),e.selectedMode==c.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((o+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var a=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((a+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var n=e._getFixedSize(null);t=e._leftGap+n.val+e._itemSize.width*(e._numItems-n.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e._customSize?(n=e._getFixedSize(null),t=e._topGap+n.val+e._itemSize.height*(e._numItems-n.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*i+e._lineGap*(i-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*o+e._columnGap*(o-1)+e._rightGap}}var a=e.content.getComponent(cc.Layout);if(a&&(a.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var r=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,r-=e._cyclicPos1,e._cyclicNum=Math.ceil(r/e._allItemSizeNoEdge)+1;var s=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+s,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+s*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=s*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var n=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),i=this._sizeType?cc.v2(0,n):cc.v2(n,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)))}}var o,a,r,s;if(this._calcViewPos(),this._sizeType?(o=this.viewTop,r=this.viewBottom):(a=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,u=this._numItems-1;if(this._customSize)for(var p=!1;l<=u&&!p;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=o&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=o&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0)}}else{var d=this._itemSize.width+this._columnGap,h=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s-this._leftGap)/d,u=(a-this._leftGap)/d;break;case 2:l=(-a-this._rightGap)/d,u=(-s-this._rightGap)/d;break;case 3:l=(-o-this._topGap)/h,u=(-r-this._topGap)/h;break;case 4:l=(r-this._bottomGap)/h,u=(o-this._bottomGap)/h}for(l=Math.floor(l)*this._colLineNum,u=Math.ceil(u)*this._colLineNum,l<0&&(l=0),--u>=this._numItems&&(u=this._numItems-1);l<=u;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,m=this.displayItemNum!=f;if(m&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),m=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||m)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var g=0;g<this.displayItemNum;g++)this._createOrUpdateItem(this.displayData[g]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,n,i,o,a,r,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);a=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(u=this._customSize[t])>0?u:this._itemSize.width}else a=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return this.lackCenter&&(a-=this._leftGap,a+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:a,right:r=a+e,x:a+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),r=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(u=this._customSize[t])>0?u:this._itemSize.width):(r=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),this.lackCenter&&(r+=this._rightGap,r-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:r,left:a=r-e,x:a+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),i=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),n=(u=this._customSize[t])>0?u:this._itemSize.height):(i=-this._topGap-(this._itemSize.height+this._lineGap)*t,n=this._itemSize.height),this.lackCenter&&(i+=this._topGap,i-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:i,bottom:o=i-n,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var u;if(this._customSize)l=this._getFixedSize(t),o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),n=(u=this._customSize[t])>0?u:this._itemSize.height;else o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,n=this._itemSize.height;return this.lackCenter&&(o-=this._bottomGap,o+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:i=o+n,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var p=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(o=(i=-this._topGap-(this._itemSize.height+this._lineGap)*p)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:i=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*p)+this._itemSize.height,c=o+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:t,top:i,bottom:o,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(a=this._leftGap+(this._itemSize.width+this._columnGap)*p)+this._itemSize.width,s=a+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(a=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*p)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:a,right:r,x:s,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var n={id:t,x:e.x,y:e.y};return this._sizeType?(n.top=e.y+e.height*(1-e.anchorY),n.bottom=e.y-e.height*e.anchorY):(n.left=e.x-e.width*e.anchorX,n.right=e.x+e.width*(1-e.anchorX)),n},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,n=0;for(var i in this._customSize)parseInt(i)<t&&(e+=this._customSize[i],n++);return{val:e,count:n}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(t.curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=s.ADHERING||t.adhering?t._slideMode==s.PAGE&&(null!=t._beganPos&&t.curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(this.curScrollIsTouch=!0,t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var n=t.target;null==n._listId&&n.parent;)n=n.parent;this._scrollItem=null!=n._listId?n:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==s.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var n=this;n._scrollView.hasNestedViewGroup(t,e)||t.simulate||(n._scrollPos=null,n._slideMode==s.ADHERING?(n.adhering&&(n._adheringBarrier=!0),n.adhere()):n._slideMode==s.PAGE&&(null!=n._beganPos?n._pageAdhere():n.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3),this._scrollToOffset)))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,n=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>n)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var n=this.displayData[e];n&&this._createOrUpdateItem(n)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var n=this._pool.size()>0;if(e=n?this._pool.get():cc.instantiate(this._itemTmp),n&&cc.isValid(e)||(e=cc.instantiate(this._itemTmp),n=!1),e._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),n&&this._needUpdateWidget){var i=e.getComponent(cc.Widget);i&&i.updateAlignment()}var o=e.getComponent(g.default);e.listItem=o,o&&(o.listId=t.id,o.list=this,o._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id),e.setSiblingIndex(-t.id-1)},e.prototype._createOrUpdateItem2=function(t){var e,n=this.content.children[t];n?this._forceUpdate&&this.renderEvent&&(n._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t%this._actualNumItems)):((n=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(n),e=n.getComponent(g.default),n.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>c.NONE){var e=t.node;switch(this.selectedMode){case c.SINGLE:t.selected=this.selectedId==e._listId;break;case c.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),n=this.getItemPos(e._listId);e.setPosition(n.x,n.y)},e.prototype.setMultSelected=function(t,e){var n=this;if(n.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)n.multSelected=t;else{var i=void 0,o=void 0;if(e)for(var a=t.length-1;a>=0;a--)i=t[a],(o=n.multSelected.indexOf(i))<0&&n.multSelected.push(i);else for(a=t.length-1;a>=0;a--)i=t[a],(o=n.multSelected.indexOf(i))>=0&&n.multSelected.splice(o,1)}n._forceUpdate=!0,n._onScrolling()}},e.prototype.getMultSelected=function(){return this.multSelected},e.prototype.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++){var i=t[e],o=this.getItemByListId(i);o&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,i%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--){var n=this.content.children[e];if(n._listId==t)return n}},e.prototype._getOutsideItem=function(){for(var t,e=[],n=this.content.childrenCount-1;n>=0;n--)t=this.content.children[n],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var n=t[e];if(!this._scrollItem||n._listId!=this._scrollItem._listId){n.isCached=!0,this._pool.put(n);for(var i=this._lastDisplayData.length-1;i>=0;i--)if(this._lastDisplayData[i]==n._listId){this._lastDisplayData.splice(i,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,n){var i=this;if(!i.checkInited()||i.cyclic||!i._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(i._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var o,a=i.getItemByListId(t);if(a){o=a.getComponent(g.default),i._aniDelRuning=!0,i._aniDelCB=e,i._aniDelItem=a,i._aniDelBeforePos=a.position,i._aniDelBeforeScale=a.scale;var r=i.displayData[i.displayData.length-1].id,s=o.selected;o.showAni(n,function(){var n,o,l;if(r<i._numItems-2&&(n=r+1),null!=n){var u=i._calcItemPos(n);i.displayData.push(u),i._virtual?i._createOrUpdateItem(u):i._createOrUpdateItem2(n)}else i._numItems--;if(i.selectedMode==c.SINGLE)s?i._selectedId=-1:i._selectedId-1>=0&&i._selectedId--;else if(i.selectedMode==c.MULT&&i.multSelected.length){var p=i.multSelected.indexOf(t);p>=0&&i.multSelected.splice(p,1);for(var d=i.multSelected.length-1;d>=0;d--)(m=i.multSelected[d])>=t&&i.multSelected[d]--}if(i._customSize){i._customSize[t]&&delete i._customSize[t];var h={},f=void 0;for(var m in i._customSize){f=i._customSize[m];var g=parseInt(m);h[g-(g>=t?1:0)]=f}i._customSize=h}for(d=null!=n?n:r;d>=t+1;d--)if(a=i.getItemByListId(d)){var y=i._calcItemPos(d-1);o=cc.tween(a).to(.2333,{position:cc.v2(y.x,y.y)}),d<=t+1&&(l=!0,o.call(function(){i._aniDelRuning=!1,e(t),delete i._aniDelCB})),o.start()}l||(i._aniDelRuning=!1,e(t),i._aniDelCB=null)},!0)}else e(t)},e.prototype.scrollTo=function(t,e,n,i){void 0===e&&(e=.5),void 0===n&&(n=null),void 0===i&&(i=!1);var o=this;if(o.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=o._numItems&&(t=o._numItems-1),!o._virtual&&o._layout&&o._layout.enabled&&o._layout.updateLayout();var a,r,s=o.getItemPos(t);if(!s)return!1;switch(this._scrollToOffset=n,o._alignCalcType){case 1:a=s.left,a-=null!=n?o.node.width*n:o._leftGap,s=cc.v2(a,0);break;case 2:a=s.right-o.node.width,a+=null!=n?o.node.width*n:o._rightGap,s=cc.v2(a+o.content.width,0);break;case 3:r=s.top,r+=null!=n?o.node.height*n:o._topGap,s=cc.v2(0,-r);break;case 4:r=s.bottom+o.node.height,r-=null!=n?o.node.height*n:o._bottomGap,s=cc.v2(0,-r+o.content.height)}var c=o.content.getPosition();c=Math.abs(o._sizeType?c.y:c.x);var l=o._sizeType?s.y:s.x;Math.abs((null!=o._scrollPos?o._scrollPos:c)-l)>.5&&(o._scrollView.scrollToOffset(s,e),o._scrollToListId=t,o._scrollToEndTime=(new Date).getTime()/1e3+e,o._scrollToSo=o.scheduleOnce(function(){if(o._adheringBarrier||(o.adhering=o._adheringBarrier=!1),o._scrollPos=o._scrollToListId=o._scrollToEndTime=o._scrollToSo=null,i){var e=o.getItemByListId(t);e&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},e+.1),e<=0&&o._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,n,i,o,a,r=this;r.nearestListId=null,r._virtual&&r._calcViewPos(),n=r.viewTop,i=r.viewRight,o=r.viewBottom,a=r.viewLeft;for(var s=!1,c=0;c<r.content.childrenCount&&!s;c+=r._colLineNum)if(t=r._virtual?r.displayData[c]:r._calcExistItemPos(c))switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:t.right>=a&&(r.nearestListId=t.id,a>e&&(r.nearestListId+=r._colLineNum),s=!0);break;case 2:t.left<=i&&(r.nearestListId=t.id,i<e&&(r.nearestListId+=r._colLineNum),s=!0);break;case 3:t.bottom<=n&&(r.nearestListId=t.id,n<e&&(r.nearestListId+=r._colLineNum),s=!0);break;case 4:t.top>=o&&(r.nearestListId=t.id,o>e&&(r.nearestListId+=r._colLineNum),s=!0)}if((t=r._virtual?r.displayData[r.displayItemNum-1]:r._calcExistItemPos(r._numItems-1))&&t.id==r._numItems-1)switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:i>e&&(r.nearestListId=t.id);break;case 2:a<e&&(r.nearestListId=t.id);break;case 3:o<e&&(r.nearestListId=t.id);break;case 4:n>e&&(r.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var n=this;if(n.checkInited())return n._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=n._numItems||n.curPageNum!=t&&(n.curPageNum=t,n.pageChangeEvent&&cc.Component.EventHandler.emitEvents([n.pageChangeEvent],t),n.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var n=cc.instantiate(e._itemTmp);e.content.addChild(n);for(var i=0;i<t;i++)cc.Component.EventHandler.emitEvents([e.renderEvent],n,i),n.height==e._itemSize.height&&n.width==e._itemSize.width||(e._customSize[i]=e._sizeType?n.height:n.width);return Object.keys(e._customSize).length||(e._customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),e._customSize}},a([p({type:cc.Enum(r),tooltip:!1})],e.prototype,"templateType",void 0),a([p({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==r.NODE}})],e.prototype,"tmpNode",void 0),a([p({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==r.PREFAB}})],e.prototype,"tmpPrefab",void 0),a([p()],e.prototype,"_slideMode",void 0),a([p({type:cc.Enum(s),tooltip:!1})],e.prototype,"slideMode",null),a([p({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageDistance",void 0),a([p({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageChangeEvent",void 0),a([p()],e.prototype,"_virtual",void 0),a([p({type:cc.Boolean,tooltip:!1})],e.prototype,"virtual",null),a([p({tooltip:!1,visible:function(){var t=this.slideMode==s.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),a([p({tooltip:!1,visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),a([p({tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),a([p({type:cc.Integer})],e.prototype,"_updateRate",void 0),a([p({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,"updateRate",null),a([p({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),a([p({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"renderEvent",void 0),a([p({type:cc.Enum(c),tooltip:!1})],e.prototype,"selectedMode",void 0),a([p({tooltip:!1,visible:function(){return this.selectedMode==c.SINGLE}})],e.prototype,"repeatEventSingle",void 0),a([p({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],e.prototype,"selectedEvent",void 0),a([p({serializable:!1})],e.prototype,"_numItems",void 0),a([u,d(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),m(cc.ScrollView),f(-5e3)],e)}(cc.Component);n.default=y,cc._RF.pop()},{"./ListItem":"ListItem"}],LocalImage:[function(t,e,n){"use strict";cc._RF.push(e,"9e8a6dO+gJBqpL4qJM7/2h5","LocalImage");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameApp"),s=t("../util/I18N"),c=t("../manager/RESManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.requireComponent,h=l.disallowMultiple,f=l.menu,m=l.help,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e}return o(e,t),e.prototype.onLoad=function(){var t=s.default.getLocalKey(r.default.LANGUAGE),e=c.default.getAtlas("LanguageImage_"+t);if(e){var n=e.getSpriteFrame(this.text);n?this.getComponent(cc.Sprite).spriteFrame=n:cc.warn("\u3010LocalText\u3011:"+this.text+"\u6ca1\u627e\u5230\u56fe\u7247")}else cc.warn("\u3010LocalText\u3011:"+t+"\u6ca1\u627e\u5230\u56fe\u7247\u5408\u96c6")},a([p({tooltip:"key"})],e.prototype,"text",void 0),a([u,d(cc.Label),h,f("Display/\u9644\u52a0\u591a\u8bed\u8a00\u56feKey"),m("\u8f93\u5165\u591a\u8bed\u8a00key\u5373\u53ef\u7ed1\u5b9a\u5bf9\u5e94\u7684Image\u7ec4\u4ef6")],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../GameApp":"GameApp","../manager/RESManager":"RESManager","../util/I18N":"I18N"}],LocalText:[function(t,e,n){"use strict";cc._RF.push(e,"94b68eaNKFDB5fEznE3DHR3","LocalText");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scripts/Datas/EventName"),s=t("../event/EventManager"),c=t("../util/I18N"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.requireComponent,h=l.disallowMultiple,f=l.menu,m=l.help,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e.params=[],e}return o(e,t),e.prototype.onLoad=function(){this.updateText(),s.default.instance.on(r.default.i18n,this.updateText,this),s.default.instance.on(r.default.i18n,this.updateRichText,this)},e.prototype.onDestroy=function(){s.default.instance.off(r.default.i18n,this.updateText,this),s.default.instance.off(r.default.i18n,this.updateRichText,this)},e.prototype.updateText=function(){if(""!=this.text){var t=c.default.get(this.text);this.params.length>0&&(t=c.default.setArgs(t,this.params));var e=this.node.getComponent(cc.Label);t&&e?e.string=t:cc.warn("\u3010LocalText\u3011:"+this.text+"\u6ca1\u627e\u5230\u6587\u672c")}},e.prototype.updateRichText=function(){if(""!=this.text){var t=c.default.get(this.text);this.params.length>0&&(t=c.default.setArgs(t,this.params));var e=this.node.getComponent(cc.RichText);t&&e?e.string=t:cc.warn("\u3010LocalText\u3011:"+this.text+"\u6ca1\u627e\u5230\u6587\u672c")}},a([p({tooltip:"key"})],e.prototype,"text",void 0),a([p({type:cc.String,tooltip:"\u901a\u914d\u7b26\u53c2\u6570"})],e.prototype,"params",void 0),a([u,d(cc.Label),h,f("Display/\u9644\u52a0\u591a\u8bed\u8a00Key"),m("\u8f93\u5165\u591a\u8bed\u8a00key\u5373\u53ef\u7ed1\u5b9a\u5bf9\u5e94\u7684Label\u7ec4\u4ef6")],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Scripts/Datas/EventName":"EventName","../event/EventManager":"EventManager","../util/I18N":"I18N"}],LoggerInterface:[function(t,e,n){"use strict";cc._RF.push(e,"c36dfADGy9P7YpPAawHZiQq","LoggerInterface"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Logger:[function(t,e,n){"use strict";cc._RF.push(e,"730ebQ3s6NC55eToZRSHsm0","Logger"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this._option=null}return t.prototype.init=function(t){this._option=t},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._option&&this._option.enableLog&&cc.sys.isNative?console.log(this._format(t)):console.log.apply(null,t)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._option&&this._option.enableLog&&cc.sys.isNative?console.debug(this._format(t)):console.debug.apply(null,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._option&&this._option.enableLog&&cc.sys.isNative?console.info(this._format(t)):console.info.apply(null,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._option&&this._option.enableLog&&cc.sys.isNative?console.warn(this._format(t)):console.warn.apply(null,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._option&&this._option.enableLog&&cc.sys.isNative?console.error(this._format(t)):console.error.apply(null,t)},t.prototype._format=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";return t.forEach(function(t,e,i){if(null==t)n+="null";else{var o=typeof t;n+="string"===o||"number"===o?t:JSON.stringify(t)}e+1<i.length&&(n+=",")}),n},t}();n.default=i,cc._RF.pop()},{}],LongTouchComponent:[function(t,e,n){"use strict";cc._RF.push(e,"6b233asrrlPC4GhaOj9q38G","LongTouchComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.requireComponent,u=r.disallowMultiple,p=r.menu,d=r.help,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchInterval=.1,e.enableMultiTouching=!1,e.longTouchEvents=[],e._touchCounter=0,e._isTouching=!1,e}return o(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},e.prototype._onTouchStart=function(t){if(!this.enableMultiTouching){if(this._isTouching)return;this.node.getBoundingBoxToWorld().contains(t.getLocation())?this._isTouching=!0:this._isTouching=!1,this._isTouching&&(this.publishOneTouch(),this.schedule(this._touchCounterCallback,this.touchInterval))}},e.prototype._onTouchEnd=function(){this._isTouching=!1,this._touchCounter=0,this.unschedule(this._touchCounterCallback)},e.prototype._onTouchCancel=function(){this._isTouching=!1,this._touchCounter=0,this.unschedule(this._touchCounterCallback)},e.prototype._touchCounterCallback=function(){this._isTouching?this.publishOneTouch():this.unschedule(this._touchCounterCallback)},e.prototype.publishOneTouch=function(){var t=this;this._isTouching&&(this._touchCounter++,this.longTouchEvents.forEach(function(e){e.emit([t._touchCounter])}))},a([c({tooltip:"\u89e6\u6478\u56de\u8c03\u95f4\u9694\uff08\u79d2\uff09\u3002\u5047\u5982\u4e3a0.1\uff0c\u90a3\u4e481\u79d2\u5185\u4f1a\u56de\u8c0310\u6b21 ${longTouchEvents} \u4e8b\u4ef6\u6570\u7ec4"})],e.prototype,"touchInterval",void 0),a([c({readonly:!0,tooltip:"\u662f\u5426\u652f\u6301\u591a\u70b9\u89e6\u63a7\uff08\u5f53\u524d\u8fd8\u4e0d\u652f\u6301\uff09"})],e.prototype,"enableMultiTouching",void 0),a([c({type:[cc.Component.EventHandler],tooltip:"\u56de\u8c03\u4e8b\u4ef6\u6570\u7ec4\uff0c\u6bcf\u95f4\u9694 ${toucheInterval}s \u56de\u8c03\u4e00\u6b21"})],e.prototype,"longTouchEvents",void 0),a([s,l(cc.Component),u,p("Display/\u957f\u6309\u76d1\u542c\u7ec4\u4ef6"),d("\u6309\u4f4f")],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],NestPageView:[function(t,e,n){"use strict";cc._RF.push(e,"78ea5mIiJhHqILS1Zmth7P7","NestPageView");var i,o,a=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.none=0]="none",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(o||(o={}));var s=cc._decorator,c=s.ccclass,l=(s.property,s.requireComponent),u=s.disallowMultiple,p=s.menu,d=s.help,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveDirection=0,e}var n;return a(e,t),n=e,e.prototype._onTouchBegan=function(e,n){this.innerScoll&&(this.innerScoll.enabled=!0),this.moveDirection=0,t.prototype._onTouchBegan.call(this,e,n)},e.prototype._onTouchMoved=function(e,i){var a=e.touch;if(0==this.moveDirection){var r=Math.abs(a.getLocation().x-a.getStartLocation().x),s=Math.abs(a.getLocation().y-a.getStartLocation().y);s<r&&r>n.moveDis?this.moveDirection=o.Horizontal:s>n.moveDis&&r<s&&(this.moveDirection=o.Vertical)}this.moveDirection==o.Horizontal&&(this.innerScoll=this.getScollerView(e.target),this.innerScoll&&(this.innerScoll._enabled=!1,e.stopPropagation())),t.prototype._onTouchMoved.call(this,e,i)},e.prototype._onTouchEnded=function(e,n){this.moveDirection=0,t.prototype._onTouchEnded.call(this,e,n),this.innerScoll&&(this.innerScoll.enabled=!0)},e.prototype._onTouchCancelled=function(e,n){this.moveDirection=0,t.prototype._onTouchCancelled.call(this,e,n),this.innerScoll&&(this.innerScoll.enabled=!0)},e.prototype.hasNestedViewGroup=function(t,e){if(t.eventPhase===cc.Event.CAPTURING_PHASE){if(this.innerScoll&&!this.innerScoll._enabled)return!1;if(e)for(var n=0;n<e.length;++n){var i=e[n];if(this.node===i)return!!t.target.getComponent(cc.ViewGroup);if(i.getComponent(cc.ViewGroup))return!0}return!1}},e.prototype.getScollerView=function(t){for(var e;t&&t!=this.node;){if(e=t.getComponent(cc.ScrollView))return e;t=t.parent}return null},e.moveDis=10,n=r([c,l(cc.PageView),u,p("Display/\u5d4c\u5957\u7ffb\u9875\u7ec4\u4ef6"),d("\u7ffb\u9875\u7ec4\u4ef6\u4e0a\u6dfb\u52a0\u6eda\u52a8\u7ec4\u4ef6")],e)}(cc.PageView);n.default=h,cc._RF.pop()},{}],NetManager:[function(t,e,n){"use strict";cc._RF.push(e,"586c2dMDSNFAraEcwARndXq","NetManager");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../GameApp"),a=cc._decorator,r=a.ccclass,s=(a.property,function(){function t(){}var e;return e=t,t.getUrlParam=function(t){var e="";for(var n in t)e&&(e+="&"),e+=n+"="+t[n];return e},t.setBaseBody=function(t){e.baseReq=t},t.send=function(t,n,i,a,r,s,c){void 0===a&&(a=null),void 0===s&&(s=null),void 0===c&&(c=!0),i||(i={}),i.Service=t,i.Method=n,e.loopRequest.push({body:i,url:o.default.ServerURL,callback:a,thisObj:r,errorCallBack:s,isPost:c}),this.doHttp()},t.doHttp=function(){if(!e.isSending&&0!=e.loopRequest.length){e.currentReq=e.loopRequest.shift(),e.currentReq.body;var t=cc.loader.getXMLHttpRequest(),n=setTimeout(function(t){console.log("\u8bf7\u6c42\u8d85\u65f6"),e.currentReq.callback&&e.currentReq.callback.call(e.currentReq.thisObj,"ERROR"),t.onerror()},3e4,t);t.onreadystatechange=function(){if(4===t.readyState&&t.status>=200&&t.status<300){var i=t.responseText;if(i){var o=i;-1!=o.indexOf("{")||-1!=o.indexOf("[")?o=JSON.parse(i):o&&o.length>0&&(o=o.replace(/"/gi,"")),e.currentReq.callback&&e.currentReq.callback.call(e.currentReq.thisObj,o)}else console.error("error: server data is ",i);clearTimeout(n),e.isSending=!1,e.doHttp()}else 1===t.readyState&&0===t.status||2===t.readyState||3===t.readyState||(cc.log("\u8bf7\u6c42\u5931\u8d25\uff01"),e.currentReq.callback&&e.currentReq.callback.call(e.currentReq.thisObj,"ERROR"),clearTimeout(n),e.isSending=!1,e.doHttp())},t.onerror=function(){cc.log("\u8bf7\u6c42\u9519\u8bef!"),e.currentReq.callback&&e.currentReq.callback.call(e.currentReq.thisObj,"ERROR"),clearTimeout(n),e.isSending=!1,e.doHttp()},e.isSending=!0,t.timeout=3e4,e.currentReq.isPost?(t.open("POST",e.currentReq.url,!0),t.setRequestHeader("Content-Type","multipart/form-data"),e.currentReq.body?t.send(JSON.stringify(e.currentReq.body)):t.send()):(t.open("GET",e.currentReq.url+"?"+encodeURIComponent(e.getUrlParam(e.currentReq.body)),!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send())}},t.loopRequest=[],t.isSending=!1,t.baseReq=null,e=i([r],t)}());n.default=s,window.NetManager=s,cc._RF.pop()},{"../GameApp":"GameApp"}],NodeX:[function(t,e,n){"use strict";cc._RF.push(e,"9f9e4tE4f5DsJaF4rMhW0Ug","NodeX");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator.ccclass,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCollision=!1,e}return o(e,t),e.prototype.start=function(){var t=this.node.getPosition();t.x=Math.random()*screen.width,t.y=Math.random()*screen.height,this.node.setPosition(t)},e.prototype.update=function(){var t=this.node.getPosition();t.x+=15*(Math.random()-.5),t.y+=15*(Math.random()-.5),this.node.setPosition(t)},e.prototype.setIsCollision=function(t){this.isCollision=t,this.node.color=t?new cc.Color(255,0,0):new cc.Color(255,255,255)},a([r],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],ObjectPoolManager:[function(t,e,n){"use strict";cc._RF.push(e,"318aaHV0iNHu7HUAkI8H1rm","ObjectPoolManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this._ObjectPools=null,this._ObjectPoolPrefab=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,this._instance.init()),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._ObjectPools||(this._ObjectPools={}),this._ObjectPoolPrefab||(this._ObjectPoolPrefab={})},t.prototype.createObjectPool=function(t,e,n){if(void 0===n&&(n=10),!this._ObjectPools[t]){var i=new cc.NodePool;this._ObjectPools[t]=i,this._ObjectPoolPrefab[t]=e;for(var o=0;o<n;o++){var a=cc.instantiate(e);i.put(a)}}},t.prototype.getPoolSize=function(t){var e=this._ObjectPools[t];return e?e.size():0},t.prototype.getObject=function(t){var e=this._ObjectPools[t];if(e)return e.size()>0?e.get():cc.instantiate(this._ObjectPoolPrefab[t])},t.prototype.putObject=function(t,e){var n=this._ObjectPools[t];n?n.put(e):e.destroy()},t.prototype.clearPool=function(t){var e=this._ObjectPools[t];e&&(e.clear(),delete this._ObjectPools[t],delete this._ObjectPoolPrefab[t])},t.prototype.clearAllPool=function(){for(var t in this._ObjectPools)this.clearPool(t)},t.prototype.getAllPoolNames=function(){return Object.keys(this._ObjectPools)},t}();n.default=i,cc._RF.pop()},{}],PNGDataDecoder:[function(t,e,n){"use strict";cc._RF.push(e,"2dc9042n+tOz4af1+f4Cu7U","PNGDataDecoder"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./ByteArray"),o=t("./zlib/FlateStream"),a=function(){function t(){}return t.unencryptionString=function(t){t.position=33;var e=t.readUnsignedInt(),n=(t.readUnsignedInt(),new i.default);t.readBytes(n,0,e),n.position=0;var a=new o.default(n.bytes);(n=new i.default(a.getBytes(a.bufferLength))).readByte(),e=n.readUnsignedInt();var r=n.readUnsignedInt();n.position=0;for(var s=new i.default,c=0;c<r;c++){n.readByte();for(var l=0;l<r;l++)s.writeUnsignedInt(n.readUnsignedInt())}return s.position=8,s.readUTFBytes(e)},t.unencryption=function(t){t.position=33;var e=t.readUnsignedInt(),n=(t.readUnsignedInt(),new i.default);t.readBytes(n,0,e),n.position=0;var a=new o.default(n.bytes);(n=new i.default(a.getBytes(a.bufferLength))).readByte(),e=n.readUnsignedInt();var r=n.readUnsignedInt();n.position=0;for(var s=new i.default,c=0;c<r;c++){n.readByte();for(var l=0;l<r;l++)s.writeUnsignedInt(n.readUnsignedInt())}s.position=8;var u=new i.default;return s.readBytes(u,0,e),u},t}();n.default=a,cc._RF.pop()},{"./ByteArray":"ByteArray","./zlib/FlateStream":"FlateStream"}],PlatformUtils:[function(t,e,n){"use strict";cc._RF.push(e,"5191afhvllIIoHREM4zHTd7","PlatformUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.getPlatformOS=function(){return cc.sys.os},Object.defineProperty(t,"isBrowser",{get:function(){return cc.sys.isBrowser},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){return cc.sys.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return this.getPlatformOS()===cc.sys.OS_ANDROID},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isIOS",{get:function(){return this.getPlatformOS()===cc.sys.OS_IOS},enumerable:!1,configurable:!0}),t}();n.default=i,cc._RF.pop()},{}],PopUpManager:[function(t,e,n){"use strict";cc._RF.push(e,"8adeabKvj5EZ7uXcZr3RV3q","PopUpManager");var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(e){a(e)}}function s(t){try{c(i.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.PopType=void 0;var a,r=t("../../../Scripts/Datas/GameDataManager"),s=t("./RESManager"),c=t("./UIManager");(function(t){t[t.Default=0]="Default",t[t.Queue=1]="Queue",t[t.Link=2]="Link",t[t.Replace=3]="Replace"})(a=n.PopType||(n.PopType={}));var l=function(){function t(){}return t.regeistWin=function(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!0),t.winData[e]={name:e,prefab:i||s.default.getPrefab(e),cls:n,cache:o}},t.isRegeistWin=function(e){return null!=t.winData[e]},t.resetWinData=function(){t.winInstance={},t.winData={}},t.getWindow=function(e){return t.winInstance[e]},t.isOpen=function(e){var n=t.winInstance[e];return!!n&&n.isOpen},t.preloadWin=function(e){var n=t.winInstance[e];if(!n){var i=t.winData[e];i&&i.cache&&(n=cc.instantiate(i.prefab).getComponent(i.cls),t.winInstance[e]=n,n.node.parent=c.default.instance.preloadStage)}},t.addPop=function(e,n,c,l){return void 0===n&&(n=null),void 0===c&&(c=a.Default),void 0===l&&(l=null),i(this,void 0,Promise,function(){var i,u;return o(this,function(o){switch(o.label){case 0:return(i=t.winInstance[e])?[3,4]:(u=t.winData[e])?u.prefab?[3,2]:[4,r.default.instance.loadUIRes(e,"UI/"+e,function(){u.prefab=s.default.getPrefab(e)},this)]:[3,3];case 1:o.sent(),o.label=2;case 2:return i=cc.instantiate(u.prefab).getComponent(u.cls),u.cache&&(t.winInstance[e]=i),[3,4];case 3:return[2];case 4:return i.isOpen?[2]:(t.currentOpenWin=i,c==a.Default?t.openWindows.push({win:i,data:n}):c==a.Link?(this.linkWin[this.linkWin.length-1]&&this.linkWin[this.linkWin.length-1].hide(),this.linkWin.push(i)):c==a.Queue||c==a.Replace&&(t.openWindows.length>0&&t.openWindows.pop().win.close(),t.openWindows.push({win:i,data:n})),i.winKey=e,l?i.open(l,n):i.open(t.stage,n),[2])}})})},t.removePop=function(e){if(e.node.removeFromParent(!1),t.linkWin[this.linkWin.length-1]==e)t.linkWin.pop(),this.linkWin[this.linkWin.length-1]&&(t.currentOpenWin=this.linkWin[this.linkWin.length-1]),t.currentOpenWin&&t.currentOpenWin.show();else if(t.currentOpenWin==e&&(t.openWindows.pop(),t.currentOpenWin=null,t.openWindows.length>0)){var n=t.openWindows[t.openWindows.length-1];t.currentOpenWin=n.win}},t.hideAllPop=function(){for(var e=0;e<t.openWindows.length;e++)t.openWindows[e].win.hide()},t.showAllPop=function(){for(var e=0;e<t.openWindows.length;e++)t.openWindows[e].win.show()},t.removeAllPop=function(){for(var e=0;e<t.openWindows.length;e++){var n=t.openWindows[e];n.win.show(),n.win.close()}t.openWindows=[],t.currentOpenWin=null},t.clear=function(){t.winInstance={},t.linkWin=[],t.openWindows=[],t.currentOpenWin=null},t.pause=function(){},t.resume=function(){},t.getCurrentWin=function(){return t.currentOpenWin},t.winData={},t.winInstance={},t.openWindows=[],t.linkWin=[],t.isPause=!1,t}();n.default=l,cc._RF.pop()},{"../../../Scripts/Datas/GameDataManager":"GameDataManager","./RESManager":"RESManager","./UIManager":"UIManager"}],PopupKey:[function(t,e,n){"use strict";cc._RF.push(e,"ac5ffaQNU5IWoHV4P2d1uGn","PopupKey"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.LoadDataProgress="LoadDataProgress",t.LoadResProgress="LoadResProgress",t.UIGameTip="UIGameTip",t.UIGameMenu="UIGameMenu",t.UIGameMap="UIGameMap",t.UIGameOver="UIGameOver",t.UIGamePause="UIGamePause",t.UIGameSetting="UIGameSetting",t.UIGameStore="UIGameStore",t.UIGameLanguage="UIGameLanguage",t.UIGameStartLevel="UIGameStartLevel",t.UIGameMineOver="UIGameMineOver",t.UIGameTimeOver="UIGameTimeOver",t.UIGameFail="UIGameFail",t.UIGameLevelComplete="UIGameLevelComplete",t.UIGameLandmarkUnlock="UIGameLandmarkUnlock",t.UIGameChapterUnlock="UIGameChapterUnlock",t.UIGameOverGoldGet="UIGameOverGoldGet",t.UIGameItemGet="UIGameItemGet",t.UIGameBoxGet="UIGameBoxGet",t.UIGameTurnTable="UIGameTurnTable",t.UIGameGuideOver="UIGameGuideOver",t.UIGameSkillBuy="UIGameSkillBuy",t.UIGameUnlimitedTime="UIGameUnlimitedTime",t.UIGameFreeCoin="UIGameFreeCoin",t.UIGameDailySign="UIGameDailySign",t}();n.default=i,cc._RF.pop()},{}],PopuprRegeit:[function(t,e,n){"use strict";cc._RF.push(e,"07bb7pRHD9GK6yYHYWY0B/8","PopuprRegeit");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/core/manager/PopUpManager"),s=t("../Game/UI/UIGameBoxGet"),c=t("../Game/UI/UIGameChapterUnlock"),l=t("../Game/UI/UIGameFail"),u=t("../Game/UI/UIGameOverGoldGet"),p=t("../Game/UI/UIGameLandmarkUnlock"),d=t("../Game/UI/UIGameLevelComplete"),h=t("../Game/UI/UIGameMap"),f=t("../Game/UI/UIGameMenu"),m=t("../Game/UI/UIGameMineOver"),g=t("../Game/UI/UIGameOver"),y=t("../Game/UI/UIGamePause"),v=t("../Game/UI/UIGameStartLevel"),_=t("../Game/UI/UIGameTimeOver"),C=t("../Game/UI/UIGameTip"),b=t("./PopupKey"),T=t("../Game/UI/UIGameItemGet"),S=t("../Game/UI/UIGameTurnTable"),w=t("../Game/UI/UIGameGuideOver"),D=t("../Game/UI/UIGameSkillBuy"),L=t("../Game/UI/UIGameSetting"),I=t("../Game/UI/UIGameUnlimitedTime"),M=t("../Game/UI/UIGameFreeCoin"),R=t("../Game/UI/UIGameDailySign"),P=cc._decorator.ccclass,O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){r.default.regeistWin(b.default.UIGameTip,C.default),r.default.regeistWin(b.default.UIGameMenu,f.default),r.default.regeistWin(b.default.UIGamePause,y.default),r.default.regeistWin(b.default.UIGameMap,h.default),r.default.regeistWin(b.default.UIGameStartLevel,v.default),r.default.regeistWin(b.default.UIGameMineOver,m.default),r.default.regeistWin(b.default.UIGameTimeOver,_.default),r.default.regeistWin(b.default.UIGameOver,g.default),r.default.regeistWin(b.default.UIGameFail,l.default),r.default.regeistWin(b.default.UIGameLevelComplete,d.default),r.default.regeistWin(b.default.UIGameLandmarkUnlock,p.default),r.default.regeistWin(b.default.UIGameChapterUnlock,c.default),r.default.regeistWin(b.default.UIGameOverGoldGet,u.default),r.default.regeistWin(b.default.UIGameItemGet,T.default),r.default.regeistWin(b.default.UIGameBoxGet,s.default),r.default.regeistWin(b.default.UIGameTurnTable,S.default),r.default.regeistWin(b.default.UIGameGuideOver,w.default),r.default.regeistWin(b.default.UIGameSkillBuy,D.default),r.default.regeistWin(b.default.UIGameSetting,L.default),r.default.regeistWin(b.default.UIGameUnlimitedTime,I.default),r.default.regeistWin(b.default.UIGameFreeCoin,M.default),r.default.regeistWin(b.default.UIGameDailySign,R.default)},a([P],e)}(cc.Component);n.default=O,cc._RF.pop()},{"../../Framework/core/manager/PopUpManager":"PopUpManager","../Game/UI/UIGameBoxGet":"UIGameBoxGet","../Game/UI/UIGameChapterUnlock":"UIGameChapterUnlock","../Game/UI/UIGameDailySign":"UIGameDailySign","../Game/UI/UIGameFail":"UIGameFail","../Game/UI/UIGameFreeCoin":"UIGameFreeCoin","../Game/UI/UIGameGuideOver":"UIGameGuideOver","../Game/UI/UIGameItemGet":"UIGameItemGet","../Game/UI/UIGameLandmarkUnlock":"UIGameLandmarkUnlock","../Game/UI/UIGameLevelComplete":"UIGameLevelComplete","../Game/UI/UIGameMap":"UIGameMap","../Game/UI/UIGameMenu":"UIGameMenu","../Game/UI/UIGameMineOver":"UIGameMineOver","../Game/UI/UIGameOver":"UIGameOver","../Game/UI/UIGameOverGoldGet":"UIGameOverGoldGet","../Game/UI/UIGamePause":"UIGamePause","../Game/UI/UIGameSetting":"UIGameSetting","../Game/UI/UIGameSkillBuy":"UIGameSkillBuy","../Game/UI/UIGameStartLevel":"UIGameStartLevel","../Game/UI/UIGameTimeOver":"UIGameTimeOver","../Game/UI/UIGameTip":"UIGameTip","../Game/UI/UIGameTurnTable":"UIGameTurnTable","../Game/UI/UIGameUnlimitedTime":"UIGameUnlimitedTime","./PopupKey":"PopupKey"}],QuadTreeCollider:[function(t,e,n){"use strict";cc._RF.push(e,"f3224zujG5KTalAmjPXqED1","QuadTreeCollider");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../lib/models/QuadTree"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.worldTree=null,e.nodes=[],e.skillNodes=[],e}return o(e,t),e.prototype.onEnable=function(){var t={x:0,y:0,width:cc.Canvas.instance.node.width,height:cc.Canvas.instance.node.height};this.worldTree=new r.Quadtree(t)},e.prototype.update=function(){this.quadTreeCheck()},e.prototype.isCollision=function(t,e){return t.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())},e.prototype.quadTreeCheck=function(){for(var t=0;t<this.node.childrenCount;t++){var e=this.node.children[t];this.worldTree.insert(e),this.nodes.push(e)}for(t=0;t<this.nodes.length;t++){e=this.nodes[t];for(var n=this.worldTree.retrieve(e),i=0;i<n.length;i++){var o=n[i];o!==e&&this.isCollision(o,e)}}this.nodes.length=0,this.worldTree.clear()},a([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../lib/models/QuadTree":"QuadTree"}],QuadTree:[function(t,e,n){"use strict";cc._RF.push(e,"028ccc6kjxHo5BMIVRqybg4","QuadTree"),Object.defineProperty(n,"__esModule",{value:!0}),n.Quadtree=void 0;var i=function(){function t(t,e,n,i){this.max_objects=e||10,this.max_levels=n||4,this.level=i||0,this.bounds=t,this.objects=[],this.nodes=[]}return t.prototype.split=function(){var e=this.level+1,n=this.bounds.width/2,i=this.bounds.height/2,o=this.bounds.x,a=this.bounds.y;this.nodes[0]=new t({x:o+n,y:a,width:n,height:i},this.max_objects,this.max_levels,e),this.nodes[1]=new t({x:o,y:a,width:n,height:i},this.max_objects,this.max_levels,e),this.nodes[2]=new t({x:o,y:a+i,width:n,height:i},this.max_objects,this.max_levels,e),this.nodes[3]=new t({x:o+n,y:a+i,width:n,height:i},this.max_objects,this.max_levels,e)},t.prototype.getIndex=function(t){var e=t.getPosition(),n=[],i=this.bounds.x+this.bounds.width/2,o=this.bounds.y+this.bounds.height/2,a=e.y<o,r=e.x<i,s=e.x+t.width>i,c=e.y+t.height>o;return a&&s&&n.push(0),r&&a&&n.push(1),r&&c&&n.push(2),s&&c&&n.push(3),n},t.prototype.insert=function(t){var e,n=0;if(this.nodes.length)for(var i=this.getIndex(t),o=0;o<i.length;o++)this.nodes[i[o]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),n=0;n<this.objects.length;n++){e=this.getIndex(this.objects[n]);for(var a=0;a<e.length;a++)this.nodes[e[a]].insert(this.objects[n])}this.objects=[]}},t.prototype.retrieve=function(t){var e=this.getIndex(t),n=this.objects;if(this.nodes.length)for(var i=0;i<e.length;i++)n=n.concat(this.nodes[e[i]].retrieve(t));return n=n.filter(function(t,e){return n.indexOf(t)>=e})},t.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[]},t}();n.Quadtree=i,cc._RF.pop()},{}],Queue:[function(t,e,n){"use strict";cc._RF.push(e,"c0065EGVwJJPq9G6TUMnDbe","Queue"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this._array=new Array}return t.prototype.push=function(t){return null!=t&&(this._array.push(t),!0)},t.prototype.pop=function(){return this._array.shift()},t.prototype.first=function(){return this.isEmpty()?null:this._array[0]},t.prototype.last=function(){return this.isEmpty()?null:this._array[this.size()-1]},t.prototype.size=function(){return this._array.length},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.clear=function(){delete this._array},t}();n.default=i,cc._RF.pop()},{}],RESManager:[function(t,e,n){"use strict";var i;cc._RF.push(e,"fd3167FAiNFaoMSjLQnltvc","RESManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ResourceType=void 0,function(t){t.TEXT="text",t.JSON="json",t.BINARY="binary"}(i=n.ResourceType||(n.ResourceType={}));var o=function(){function t(){}return t.setAtlas=function(e,n){t.AtlasRes[e]=n,t.readyList.push(n),t.buildeRes()},t.getAtlas=function(e){return t.AtlasRes[e]},t.setSpriteFrame=function(e,n){t.resMap[e]=n},t.setPrefab=function(t,e){this.prefabMap[t]=e},t.getPrefab=function(t){return this.prefabMap[t]},t.deletePrefab=function(t){delete this.prefabMap[t]},t.setResource=function(t,e){this.resourceMap[t]=e},t.getResource=function(t){return this.resourceMap[t]},t.getResByType=function(t,e){var n=this.resourceMap[t];if(!n)return n;switch(e){case i.TEXT:return n.text;case i.JSON:return n.json;case i.BINARY:return n._buffer;default:return n}},t.buildeRes=function(){if(0!=t.readyList.length){var e,n=t.readyList.pop();for(var i in n instanceof cc.SpriteAtlas?n._spriteFrames:n.getSpriteFrames()){e=n.getSpriteFrame(i),t.resMap[i]=e;var o=t.bindingList[i];if(o){for(var a=0,r=o;a<r.length;a++){var s=r[a];s.node&&(s.spriteFrame=e)}delete t.bindingList[i]}}this.buildeRes()}},t.binding=function(e,n){if(e&&n){var i=t.resMap[n];i?e.spriteFrame=i:t.bindingList[n]?t.bindingList[n].push(e):t.bindingList[n]=[e]}},t.getSpriteFrame=function(e){return t.resMap[e]},t.getImageNode=function(e,n,i){void 0===n&&(n=!0),void 0===i&&(i=cc.Sprite.SizeMode.TRIMMED);var o=new cc.Node,a=o.addComponent(cc.Sprite);return a.spriteFrame=t.resMap[e],a.trim=n,a.sizeMode=i,o},t.getIcon=function(e,n){return t.getAtlas(e).getSpriteFrame(n)},t.resMap={},t.resourceMap={},t.prefabMap={},t.bindingList={},t.AtlasRes={},t.readyList=[],t}();n.default=o,cc._RF.pop()},{}],RandomUtils:[function(t,e,n){"use strict";cc._RF.push(e,"e5d93cxUw1Hg6KS9B6DMwrH","RandomUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.seed=function(){},t.use=function(t){this.rng=t},t.float=function(t,e){return this.rng()*(e-t)+t},t.int=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(this.rng()*(e-t)+t)},t.intInclusive=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(this.rng()*(e-t+1))+t},t.sign=function(){return this.bool(.5)?1:-1},t.bool=function(t){return void 0===t&&(t=.5),t>=this.rng()},t.id=function(){return Math.max(this.rng(),2220446049250313e-31).toString(36).padEnd(11,"0").substr(-9)},t.getRandomWeightedIndex=function(t){for(var e=t.reduce(function(t,e){return t+e},0),n=this.float(0,e),i=0,o=0;o<t.length;o++)if(n<=(i+=t[o]))return o;return t.length-1},t.getRandomItem=function(t){return t[this.int(0,t.length)]},t.getRandomItems=function(t,e){return this.shuffle(t.concat(),!1).slice(0,e)},t.shuffle=function(t,e){void 0===e&&(e=!0);for(var n=t.length-1;n>0;n--){var i=Math.floor(this.rng()*(n+(e?0:1))),o=[t[i],t[n]];t[n]=o[0],t[i]=o[1]}return t},t.splitInteger=function(t,e,n,i){var o=Math.floor(t/e);n>Math.floor(.5*t)&&(n=Math.floor(.5*t)),o>=n&&o<i&&(n=o);var a=i;i>=t&&(i=t-1),a=i,n>i&&(a=n,i=n);for(var r,s=0,c=[],l=0;l<e;l++)if(s+=s+(r=n+Math.floor(Math.random()*(a-n+1)))>t||l===e-1?r=t-s:r,c.push(r),s===t)return c;return c},t.rng=Math.random,t}();n.default=i,cc._RF.pop()},{}],RemotConfigManager:[function(t,e,n){"use strict";cc._RF.push(e,"0f8bcBTFvFN2pGWMiuVUPro","RemotConfigManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../GameApp"),o=function(){function t(){this.isCanUse=!0,this.enabled=!0,this.configLoaded=!1,this.isGetRemoteConfig=!1,this.logEventParams={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.fetchRemoteConfig=function(){this.clear(),i.default.SDK.fetchRemoteConfig()},t.prototype.enterGame=function(){this.isCanUse=!1,this.isGetRemoteConfig},t.prototype.receiveMsg=function(t){this.isGetRemoteConfig=!0;var e=JSON.parse(t);i.default.DEBUG&&console.log("\u6d4b\u8bd5\u6570\u636e",e),this.configLoaded=!0},t.prototype.clear=function(){this.isCanUse=!0},t}();n.default=o,cc._RF.pop()},{"../GameApp":"GameApp"}],SDKAndroid:[function(t,e,n){"use strict";cc._RF.push(e,"7b702a2Pq5BBL7m9B+xjxRt","SDKAndroid");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("../GameApp"),r=t("./SDKBase"),s=t("./SDKConst"),c=function(t){function e(){var e=t.call(this)||this;return window.androidCallBack=e.SDKCallBack,window.androidCallSelf=e,e}return o(e,t),e.prototype.hideSplash=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideSplash","()V")},e.prototype.getSDKPlatform=function(){return"ANDROID"},e.prototype.getPlatform=function(){return"ANDROID"},e.prototype.getVersion=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getVersion","()Ljava/lang/String;")},e.prototype.getLocal=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getLocal","()Ljava/lang/String;")},e.prototype.getCountry=function(){return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getCountry","()Ljava/lang/String;")},e.prototype.logEvent=function(t,e){var n="";if(e)for(var i in e)""!=n&&(n+=","),n+=i+","+e[i];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,n)},e.prototype.Command=function(t,e){t&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","command","(Ljava/lang/String;Ljava/lang/String;)V",t,e||"")},e.prototype.SDKCallBack=function(t){if(cc.log("AndroidSDK SDKCallBack param="+JSON.stringify(t)),"updateRunMode"==t.type){var e="debug"==t.value;cc.debug.setDisplayStats(e),a.default.DEBUG=e}else"rewardComplete"==t.type?setTimeout(function(){var e=window.androidCallSelf.RewardADCall;e&&(e.callback.call(e.thisObj,t.reward),window.androidCallSelf.RewardADCall=null)},100):"RewardVideoClose"==t.type?setTimeout(function(){var t=window.androidCallSelf.RewardADCall;t&&(t.callback.call(t.thisObj),window.androidCallSelf.RewardADCall=null)},100):"InterstitialClose"==t.type&&setTimeout(function(){var t=window.androidCallSelf.InterADCall;t&&t.callback&&t.thisObj&&(t.callback.call(t.thisObj),window.androidCallSelf.InterADCall=null)},100)},e.prototype.ADisLoaded=function(t){return void 0===t&&(t=s.default.AD_TYPE_REWARD),t==s.default.AD_TYPE_REWARD?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isRewardVedioLoaded","()Z"):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isInterstitialLoaded","()Z")},e.prototype.playAD=function(t,e,n,i,o){return void 0===n&&(n=s.default.AD_TYPE_REWARD),void 0===i&&(i=""),void 0===o&&(o=""),n==s.default.AD_TYPE_REWARD?(this.RewardADCall={callback:t,thisObj:e},jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showRewardAD","(Ljava/lang/String;)V",i)):(this.InterADCall={callback:t,thisObj:e},jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInterstitialAD","(Ljava/lang/String;)V",i)),!0},e}(r.default);n.default=c,cc._RF.pop()},{"../GameApp":"GameApp","./SDKBase":"SDKBase","./SDKConst":"SDKConst"}],SDKBase:[function(t,e,n){"use strict";cc._RF.push(e,"7f46fbJalxFa7b07L9sh/Ap","SDKBase"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./SDKConst"),o=function(){function t(){window.SDKCallBack=this.SDKCallBack,window.SDKCallSelf=this}return t.prototype.CallStaticMethod=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return jsb.reflection.callStaticMethod(t,e,n)},t.prototype.init=function(){},t.prototype.hideSplash=function(){},t.prototype.getSDKPlatform=function(){return i.default.SDKPlatform.DEFAULT},t.prototype.getVersion=function(){return"1.0.0"},t.prototype.getLocal=function(){return"en_US"},t.prototype.getCountry=function(){return"CN"},t.prototype.logEvent=function(){},t.prototype.Command=function(){},t.prototype.SDKCallBack=function(){},t.prototype.initAD=function(){},t.prototype.ADisLoaded=function(t){return void 0===t&&(t=i.default.AD_TYPE_REWARD),!0},t.prototype.hasBanner=function(){return!0},t.prototype.loadAD=function(t,e){void 0===e&&(e=i.default.AD_TYPE_REWARD)},t.prototype.playAD=function(t,e,n){return void 0===n&&(n=i.default.AD_TYPE_REWARD),t&&t.call(e),!0},t.prototype.checkData=function(t){return"undefined"!=t&&!!t},t.prototype.setData=function(t){for(var e in t){var n=JSON.stringify(t[e]);void 0!==n&&cc.sys.localStorage.setItem(i.default.localStorageKey+"#"+e,n)}},t.prototype.getData=function(t,e,n){if(t){for(var o={},a=0,r=t;a<r.length;a++){var s=r[a],c=cc.sys.localStorage.getItem(i.default.localStorageKey+"#"+s);try{o[s]=this.checkData(c)?JSON.parse(c):""}catch(l){o[s]=""}}e&&e.call(n,o)}else e&&e.call(n)},t.prototype.clearData=function(){cc.sys.localStorage.clear()},t.prototype.fetchRemoteConfig=function(){},t}();n.default=o,cc._RF.pop()},{"./SDKConst":"SDKConst"}],SDKConfig:[function(t,e,n){"use strict";cc._RF.push(e,"ea587YfJOVIl5/z45x2Fn7f","SDKConfig"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.KWAI_REWARD_AD=["ad_c690aea8e861721a"],t.KWAI_SCREEN_AD=["ad_ddfa835a590ee8fd"],t.KWAI_BANNER_AD=[""],t}();n.default=i,cc._RF.pop()},{}],SDKConst:[function(t,e,n){"use strict";var i;cc._RF.push(e,"08c42rWGrpGgZTOC9MX9Pqp","SDKConst"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.DEFAULT="DEFAULT",t.ANDROID="ANDROID",t.IOS="IOS"}(i||(i={}));var o=function(){function t(){}return t.SDKPlatform=i,t.AD_STATUS_INIT="init",t.AD_STATUS_LOADING="loading",t.AD_STATUS_LOADED="loaded",t.AD_STATUS_ERROR="error",t.AD_STATUS_PLAYING="playing",t.AD_STATUS_PLAYEND="playend",t.AD_STATUS_PLAY_ERROR="playError",t.AD_TYPE_REWARD="Reward",t.AD_TYPE_INTERST="Interstitial",t.AD_TYPE_BANNER="Banner",t.localStorageKey="game_KO_ONPUZ_",t}();n.default=o,cc._RF.pop()},{}],SDKDefault:[function(t,e,n){"use strict";cc._RF.push(e,"05c1aQey/FJeriTlfnS9RwU","SDKDefault");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){return t.call(this)||this}return o(e,t),e}(t("./SDKBase").default);n.default=a,cc._RF.pop()},{"./SDKBase":"SDKBase"}],SDKKwai:[function(t,e,n){"use strict";cc._RF.push(e,"630f3gsnfBFfInZoT7ZFo54","SDKKwai"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./SDKConst"),o=t("../net/NetManager"),a=t("./SDKConfig"),r=t("../../../Scripts/Game/UserData"),s=t("../../../Scripts/GameLaunch"),c=function(){function t(){this.VERSION="1.0.30",this.avatarUrl="",this.nickName="",this.__visitId="",this.__deviceId="",this.systemInfoSync="",this.launchOptionsSync="",this.onlyUid="",this.userFrom="",this.fromUid="",this.shareDepth=0,this.isHaveUid=1,this.isLoadedCustomAd=!1,this.bannerIsEnabled=!0,this.GameClubButton=null,this._sharing=!1,this._shareClosedTime=0,this.onShareCallback=null,this.stage=0,this.reward_type=0,this._adsCacheObj={},this.sdkGlobal=window.wx}return t.prototype.Command=function(){},t.prototype.clearData=function(){},t.prototype.netWorkIsValibe=function(){throw!0},t.prototype.getAFStatus=function(){},t.prototype.setUid=function(){return 0},t.prototype.getLevel=function(){return 0},t.prototype.getVersion=function(){return this.VERSION},t.prototype.init=function(){},t.prototype.isLogin=function(){return!0},t.prototype.loginFb=function(t,e){t.call(e)},t.prototype.getFriendsInfo=function(){},t.prototype.logOutFb=function(t,e){t.call(e)},t.prototype.fetchRemoteConfig=function(){},t.prototype.remoteLogEvent=function(){},t.prototype.userPassLevel=function(){},t.prototype.userFirstWatchVideoCount=function(){},t.prototype.hideSplash=function(){},t.prototype.loadSubpackage=function(){this.sdkGlobal.loadSubpackage({name:"BundleResources",success:function(){console.log("========\u52a0\u8f7d\u5206\u5305\u6210\u529f"),s.default.instance.preloadGame()},fail:function(t){console.log(t)}}).onProgressUpdate(function(t){console.log("=========\u52a0\u8f7d\u5206\u5305\u8fdb\u5ea6:"+t)})},t.prototype.initAdjustSdk=function(){},t.prototype.getCountry=function(){return"US"},t.prototype.setSleepTime=function(){},t.prototype.login=function(t,e,n){var i=n||this;i.sdkGlobal?i.sdkGlobal.login({force:!1,success:function(n){console.log(n.code),t&&t.call(e,n.code)},fail:function(n){console.log("login\u8c03\u7528\u5931\u8d25",n),t.call(e,"error")}}):t.call(e,"error")},t.prototype.loginSetting=function(){this.sdkGlobal},t.prototype.reconnectNetUserInfo=function(){this.sdkGlobal.onHide(function(){console.log("\u9000\u51fa\u6e38\u620f")})},t.prototype.WxlogEvent=function(){},t.prototype.uuid=function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},t.prototype.send=function(t,e,n,i,a){var r=cc.loader.getXMLHttpRequest(),s=setTimeout(function(t){t.onerror()},1e4,r);if(r.onreadystatechange=function(){if(4===r.readyState&&r.status>=200&&r.status<300){var t=r.responseText;if(t){var e=t;-1!=e.indexOf("{")||-1!=e.indexOf("[")?e=JSON.parse(t):e&&e.length>0&&(e=e.replace(/"/gi,"")),i&&i(e)}else console.error("error: server data is ",t);clearTimeout(s)}else 1===r.readyState&&0===r.status||2===r.readyState||3===r.readyState||(cc.log("\u8bf7\u6c42\u5931\u8d25\uff01"),i&&i("ERROR"),clearTimeout(s))},r.onerror=function(){cc.log("\u8bf7\u6c42\u9519\u8bef!"),i&&i("ERROR"),clearTimeout(s)},"POST"===t){if(r.open("POST",e,!0),a)for(var c=0,l=a.length;c<l;c++)for(var u in a[c])if(a[c].hasOwnProperty(u)){var p=a[c][u];r.setRequestHeader(u,p)}n?r.send(JSON.stringify(n)):r.send()}else r.open("GET",e+"?"+o.default.getUrlParam(n)),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send()},t.prototype.showResourceProgress=function(t){console.log("loading......"+t+"%")},t.prototype.initAsyncData=function(t,e,n){this.getData(t,e,n)},t.prototype.startGame=function(t,e){t&&e&&t.apply(e)},t.prototype.getSDKPlatform=function(){return"KS"},t.prototype.getPlatform=function(){return"KSWEB"},t.prototype.logEvent=function(){},t.prototype.command=function(){},t.prototype.rate=function(){},t.prototype.isRate=function(){return!0},t.prototype.ADisLoaded=function(t){var e,n;void 0===t&&(t=i.default.AD_TYPE_REWARD),t==i.default.AD_TYPE_REWARD?e=a.default.KWAI_REWARD_AD:t==i.default.AD_TYPE_INTERST&&(e=a.default.KWAI_SCREEN_AD);for(var o=0;o<e.length;o++)if((n=this._adsCacheObj[e[o]])&&n.status==i.default.AD_STATUS_LOADED)return!0;return!1},t.prototype.hasBanner=function(){return!1},t.prototype.initAD=function(){for(var t=0;t<a.default.KWAI_REWARD_AD.length;t++)this.loadAD(a.default.KWAI_REWARD_AD[t],i.default.AD_TYPE_REWARD);for(t=0;t<a.default.KWAI_SCREEN_AD.length;t++)this.loadAD(a.default.KWAI_SCREEN_AD[t],i.default.AD_TYPE_INTERST)},t.prototype.loadAD=function(t,e){if(void 0===e&&(e=i.default.AD_TYPE_REWARD),e===i.default.AD_TYPE_REWARD)try{this.loadRewardAd(t,null)}catch(n){}else if(e===i.default.AD_TYPE_INTERST)try{this.loadInterstitialAd(t,null)}catch(n){}},t.prototype.loadBanner=function(){},t.prototype.showBanner=function(){return!1},t.prototype.hideBanner=function(){return!1},t.prototype.playAD=function(t,e,n){var o,r;void 0===n&&(n=i.default.AD_TYPE_REWARD),n==i.default.AD_TYPE_REWARD?o=a.default.KWAI_REWARD_AD:n==i.default.AD_TYPE_INTERST&&(o=a.default.KWAI_SCREEN_AD);for(var s=0;s<o.length;s++)if((r=this._adsCacheObj[o[s]])&&r.status==i.default.AD_STATUS_LOADED)return this.playWXAD(o[s],t,e,n);return!1},t.prototype.playWXAD=function(t,e,n,o){return void 0===o&&(o=i.default.AD_TYPE_REWARD),this._adsCacheObj[t]?this._adsCacheObj[t].status==i.default.AD_STATUS_LOADED&&(o==i.default.AD_TYPE_REWARD?this.showRewardAd(t,e,n):o==i.default.AD_TYPE_INTERST&&this.showInterstitialAd(t,e,n),!0):(this.loadAD(t,o),!1)},t.prototype.SDKCallBack=function(){},t.prototype.share=function(t,e,n,i,o){return this.onShareCallback=i,i.call(o,1),!0},t.prototype.convertToUrlParam=function(t){var e=[];for(var n in t){var i=t[n];t.hasOwnProperty(n)&&(e.push(n),e.push("="),e.push(i),e.push("&"))}return e.pop(),e.join("")},t.prototype.chooseAsync=function(){return!0},t.prototype.createAsync=function(){return!0},t.prototype.updateLeaderboard=function(t,e,n,i){return void 0===i&&(i=!1),!0},t.prototype.getRankList=function(t,e,n,i,o){void 0===i&&(i=100),void 0===o&&(o=0),e.call(n,[])},t.prototype.getUserRank=function(t,e){e.call(this,null)},t.prototype.getFriendList=function(t,e){t.call(e,[])},t.prototype.getRankCount=function(t,e,n){e.call(n,0)},t.prototype.getFriendsRankList=function(t,e,n,i,o){void 0===i&&(i=100),void 0===o&&(o=0),e.call(n,[])},t.prototype.pay=function(){},t.prototype.createShortcut=function(){},t.prototype.subscribeBotAsync=function(){},t.prototype.getUid=function(){return r.default.instance.Uid},t.prototype.getLocal=function(){return"pt_BR"},t.prototype.getEnv=function(){if(this.sdkGlobal){var t=this.sdkGlobal.getSystemInfoSync();if(t&&t.host)return t.host.env}return"kwaipro"},t.prototype.getNickName=function(){return this.nickName},t.prototype.getPhoto=function(){return this.avatarUrl||"head_png"},t.prototype.getData=function(e,n,i){if(e){for(var o={},a=0,r=e;a<r.length;a++){var s=r[a],c=cc.sys.localStorage.getItem(t.localStorageKey+"#"+s);o[s]=c?JSON.parse(c):c}n.call(i,o)}else n.call(i,null)},t.prototype.setData=function(e){for(var n in e)cc.sys.localStorage.setItem(t.localStorageKey+"#"+n,JSON.stringify(e[n]))},t.prototype.getNumberData=function(){},t.prototype.setNumberData=function(){},t.prototype.incrementStatsAsync=function(){},t.prototype.loadBannerAd=function(){},t.prototype._getBannerResizePos=function(t,e,n){void 0===n&&(n=80)},t.prototype.showBannerAd=function(){},t.prototype.hideBannerAd=function(){},t.prototype.loadInterstitialAd=function(t,e){this._adsCacheObj[t]||(this._adsCacheObj[t]={ad:null,status:i.default.AD_STATUS_INIT,loadCallback:null,showCallback:null});var n=this._adsCacheObj[t];n.loadCallback=e;var o=n.ad;if(o){if(n.status===i.default.AD_STATUS_LOADED)return void(e&&e(null))}else console.log("===\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a"),(o=n.ad=this.sdkGlobal.createInterstitialAd({adUnitId:t})).onError(function(t){n.status=i.default.AD_STATUS_ERROR,n.loadCallback&&n.loadCallback("inter ad load fail"),n.loadCallback=null,console.log("===\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25"+t)}),n.status=i.default.AD_STATUS_LOADED,n.loadCallback&&n.loadCallback(null),n.loadCallback=null,console.log("===\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a\u6210\u529f")},t.prototype.showInterstitialAd=function(t,e,n){var o=this._adsCacheObj[t];o.showCallback=e;var a=this;if(console.log("===\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a\u5f00\u59cb"+o.status),o&&o.status===i.default.AD_STATUS_LOADED){var r=function(t){console.log("===\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a"),o.showCallback&&o.showCallback.call(n),o.showCallback=null,o.status=i.default.AD_STATUS_PLAYEND,o.ad.offClose(r),a.destroyAd(t),a.loadInterstitialAd(t,null)}.bind(this,t);o.ad.onClose(r),o.ad.onError(function(t){console.log("===\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a\u9519\u8bef"+t)}),o.ad.show().then(function(){console.log("===\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a\u6210\u529f")}).catch(function(){console.log("===\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25"),o.showCallback&&o.showCallback.call(n),o.showCallback=null,o.status=i.default.AD_STATUS_ERROR,a.loadInterstitialAd(t,null)})}else console.log("===\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25\u5e76\u4e14\u5df2\u5b58\u5728"),o.showCallback&&o.showCallback.call(n),o.showCallback=null,a.destroyAd(t),a.loadInterstitialAd(t,null)},t.prototype.loadRewardAd=function(t,e){this._adsCacheObj[t]||(this._adsCacheObj[t]={ad:null,status:i.default.AD_STATUS_INIT,loadCallback:null,showCallback:null});var n=this._adsCacheObj[t];n.loadCallback=e;var o=n.ad;if(o){if(n.status===i.default.AD_STATUS_LOADED)return void(e&&e(null))}else console.log("===\u521b\u5efa\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a"),(o=n.ad=this.sdkGlobal.createRewardedVideoAd({adUnitId:t})).onError(function(){n.status=i.default.AD_STATUS_ERROR,n.loadCallback&&n.loadCallback("reward ad load fail"),n.loadCallback=null});try{var a=o.load();a&&a.then(function(){n.status=i.default.AD_STATUS_LOADED,n.loadCallback&&n.loadCallback(null),n.loadCallback=null}).catch(function(){n.status=i.default.AD_STATUS_ERROR,n.loadCallback&&n.loadCallback("reward ad load fail"),n.loadCallback=null})}catch(r){n.status=i.default.AD_STATUS_ERROR,n.loadCallback&&n.loadCallback("reward ad load fail"),n.loadCallback=null}},t.prototype.showRewardAd=function(t,e,n){var o=this;console.log("===\u5c55\u793a\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a");var a=this._adsCacheObj[t];a.showCallback=e;var r=this;if(a&&a.status===i.default.AD_STATUS_LOADED){var s=function(t,e){e.isEnded?(console.log("===\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u5b8c\u6bd5\u5e76\u8fd4\u56de"),a.showCallback&&a.showCallback.call(n),console.log("===\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u5b8c\u6bd5\u5e76\u8fd4\u56de\u6210\u529f")):console.log("===\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u4e00\u534a\uff0c\u6ca1\u6709\u83b7\u5f97\u5956\u52b1"),a.showCallback=null,a.status=i.default.AD_STATUS_PLAYEND,a.ad.offClose(s),r.loadRewardAd(t,null)}.bind(this,t);a.ad.onClose(s),a.ad.show().then(function(){}).catch(function(){a.status=i.default.AD_STATUS_ERROR,a.showCallback=null,o.sdkGlobal.showToast({title:"\u89c6\u9891\u64ad\u653e\u5931\u8d25\uff01",duration:1500,success:function(){},fail:function(){}}),r.loadRewardAd(t,null)})}else a.showCallback=null,r.loadRewardAd(t,null)},t.prototype.destroyAd=function(t){var e=this._adsCacheObj[t];e&&e.ad&&(e.ad.destroy(),e.ad=null,this._adsCacheObj[t]=null)},t.prototype.hasCustomAd=function(){return!1},t.prototype.loadCustomAd=function(){},t.prototype.showCustom=function(){return!1},t.prototype.showCustomAd=function(){},t.prototype.hideCustom=function(){return!1},t.prototype.hideCustomAd=function(){},t.prototype.createGameClubButton=function(){},t.prototype.showGameClubButton=function(){},t.prototype.hideGameClubButton=function(){},t.prototype.getGameClubButton=function(){},t.prototype.requestSubscribe=function(){},t.prototype.getSettingSubscribe=function(){},t.prototype.setUserCloudStorage=function(){this.sdkGlobal.setUserCloudStorage({})},t.prototype.updateScore=function(t,e){var n=this;if(this.isMiniGame()&&t&&e)return new Promise(function(i,o){e.uuid=""+Math.random();var a=[];a.push({key:t,value:JSON.stringify(e)}),console.log("===== \u5f00\u59cb\u4e0a\u4f20\u6570\u636e ==="),n.sdkGlobal.setUserCloudStorage({KVDataList:a,success:function(t){console.log("\u4e0a\u4f20\u6392\u884c\u699c\u6210\u529f.",t),i(t)},fail:function(t){console.log("\u4e0a\u4f20\u6392\u884c\u699c\u5931\u8d25.",t),o(t)}})})},t.prototype.isMiniGame=function(){return void 0!==this.sdkGlobal},t.prototype.sendMsgToContext=function(){},t.prototype.getShareCanvas=function(){},t.localStorageKey="g_boes_kwai",t}();n.default=c,cc._RF.pop()},{"../../../Scripts/Game/UserData":"UserData","../../../Scripts/GameLaunch":"GameLaunch","../net/NetManager":"NetManager","./SDKConfig":"SDKConfig","./SDKConst":"SDKConst"}],SDKiOS:[function(t,e,n){"use strict";cc._RF.push(e,"fc334Dw4a9BtasHYRj7QdtI","SDKiOS");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("./SDKBase"),r=t("./SDKConst"),s=function(t){function e(){var e=t.call(this)||this;return window.SDKCallBack=e.SDKCallBack,window.SDKCallSelf=e,e}return o(e,t),e.prototype.getSDKPlatform=function(){return"IOS"},e.prototype.getLocal=function(){return this.CallStaticMethod("AppController","getLocal")},e.prototype.getCountry=function(){return this.CallStaticMethod("AppController","getCountry")},e.prototype.getVersion=function(){return this.CallStaticMethod("AppController","getVersion")},e.prototype.logEvent=function(t,e){var n="";for(var i in e)""!=n&&(n+=","),n+=i+","+e[i];this.CallStaticMethod("AppController","logEvent:value:",t,n)},e.prototype.Command=function(t,e){this.CallStaticMethod("AppController","command:value:",t,e||"")},e.prototype.ADisLoaded=function(t){return void 0===t&&(t=r.default.AD_TYPE_REWARD),t==r.default.AD_TYPE_REWARD?this.CallStaticMethod("AppController","isRewardVedioLoaded"):this.CallStaticMethod("AppController","isInterstitialLoaded")},e.prototype.playAD=function(t,e,n,i){return void 0===n&&(n=r.default.AD_TYPE_REWARD),void 0===i&&(i=""),n==r.default.AD_TYPE_REWARD?(this.RewardADCall={callback:t,thisObj:e},this.CallStaticMethod("AppController","showRewardAD:",i)):(this.InterADCall={callback:t,thisObj:e},this.CallStaticMethod("AppController","showInterstitialAD:",i)),!0},e.prototype.SDKCallBack=function(t){if("rewardComplete"==t.type)(e=window.IosCallSelf.RewardADCall)&&(e.callback.call(e.thisObj),window.IosCallSelf.RewardADCall=null);else if("InterstitialClose"==t.type){var e;(e=window.IosCallSelf.InterADCall)&&(e.callback.call(e.thisObj),window.IosCallSelf.InterADCall=null)}},e}(a.default);n.default=s,cc._RF.pop()},{"./SDKBase":"SDKBase","./SDKConst":"SDKConst"}],SafeAreaAdapterComponent:[function(t,e,n){"use strict";cc._RF.push(e,"140ab6ZGddOWbVMDrjHGWXi","SafeAreaAdapterComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,e.prototype.onLoad=function(){this._onResize()},e.prototype.onEnable=function(){var t=this._onResize.bind(this);window.addEventListener("resize",t),window.addEventListener("orientationchange",t)},e.prototype.onDisable=function(){var t=this._onResize.bind(this);window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)},e.prototype._onResize=function(){n.safeArea=null,this.node&&(this.node.width=n.safeArea.safeAreaWidth/n.safeArea.designPxToScreenPxRatio,this.node.height=n.safeArea.safeAreaHeight/n.safeArea.designPxToScreenPxRatio,this.node.setPosition(cc.v2(n.safeArea.safeAreaXOffset/n.safeArea.designPxToScreenPxRatio,n.safeArea.safeAreaYOffset/n.safeArea.designPxToScreenPxRatio)))},Object.defineProperty(e,"safeArea",{get:function(){if(null==this._safeArea||null==this._safeArea){var t=cc.view.getCanvasSize().width,e=cc.view.getCanvasSize().height,n=cc.view.getVisibleSize().width,i=cc.view.getVisibleSize().height,o=Math.min(t/n,e/i),a=t-0-0,r=e-0-0;this._safeArea={screenWidth:t,screenHeight:e,safeAreaWidth:a,safeAreaHeight:r,safeAreaMarginTop:0,safeAreaMarginBottom:0,safeAreaMarginLeft:0,safeAreaMarginRight:0,safeAreaXOffset:0,safeAreaYOffset:0,designPxToScreenPxRatio:o}}return this._safeArea},set:function(t){this._safeArea=t},enumerable:!1,configurable:!0}),e.screenPxToDesignPx=function(t){return t/this.safeArea.designPxToScreenPxRatio},e.designPxToScreenPx=function(t){return t*this.safeArea.designPxToScreenPxRatio},n=a([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],SafeAreaWidgetAdapterComponent:[function(t,e,n){"use strict";cc._RF.push(e,"59625om3shNXbWvSuYABXpb","SafeAreaWidgetAdapterComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./SafeAreaAdapterComponent"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.withInsertTop=!1,e.withInsertBottom=!1,e.withInsertLeft=!1,e.withInsertRight=!1,e}return o(e,t),e.prototype.onLoad=function(){this._onResize()},e.prototype.onEnable=function(){var t=this._onResize.bind(this);window.addEventListener("resize",t),window.addEventListener("orientationchange",t)},e.prototype.onDisable=function(){var t=this._onResize.bind(this);window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)},e.prototype._onResize=function(){var t=this.getComponent(cc.Widget);t&&t.enabled&&(t.isAlignTop&&this.withInsertTop&&(t.isAbsoluteTop=!0,t.top=-r.default.screenPxToDesignPx(r.default.safeArea.safeAreaMarginTop),this.node.height+=Math.abs(t.top)),t.isAlignBottom&&this.withInsertBottom&&(t.isAbsoluteBottom=!0,t.bottom=-r.default.screenPxToDesignPx(r.default.safeArea.safeAreaMarginBottom),this.node.height+=Math.abs(t.bottom)),t.isAlignLeft&&this.withInsertLeft&&(t.isAbsoluteLeft=!0,t.left=-r.default.screenPxToDesignPx(r.default.safeArea.safeAreaMarginLeft),this.node.width+=Math.abs(t.left)),t.isAlignRight&&this.withInsertRight&&(t.isAbsoluteRight=!0,t.right=-r.default.screenPxToDesignPx(r.default.safeArea.safeAreaMarginRight),this.node.width+=Math.abs(t.right)),t.updateAlignment())},a([l({tooltip:"\u662f\u5426\u5305\u542b\u5b89\u5168\u533a\u57df\u548c\u5c4f\u5e55\u4e0a\u8fb9\u754c\u4e4b\u95f4\u7684\u7f1d\u9699"})],e.prototype,"withInsertTop",void 0),a([l({tooltip:"\u662f\u5426\u5305\u542b\u5b89\u5168\u533a\u57df\u548c\u5c4f\u5e55\u4e0b\u8fb9\u754c\u4e4b\u95f4\u7684\u7f1d\u9699"})],e.prototype,"withInsertBottom",void 0),a([l({tooltip:"\u662f\u5426\u5305\u542b\u5b89\u5168\u533a\u57df\u548c\u5c4f\u5e55\u5de6\u8fb9\u754c\u4e4b\u95f4\u7684\u7f1d\u9699"})],e.prototype,"withInsertLeft",void 0),a([l({tooltip:"\u662f\u5426\u5305\u542b\u5b89\u5168\u533a\u57df\u548c\u5c4f\u5e55\u53f3\u8fb9\u754c\u4e4b\u95f4\u7684\u7f1d\u9699"})],e.prototype,"withInsertRight",void 0),a([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./SafeAreaAdapterComponent":"SafeAreaAdapterComponent"}],SafeArea:[function(t,e,n){"use strict";cc._RF.push(e,"3fe16cZOL5AYLQAhbzOQIDF","SafeArea");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,r.executeInEditMode),l=r.requireComponent,u=r.menu;window.onOrientationChanged=function(){var t=0;switch(jsb.device.getDeviceRotation()){case 1:t=90;break;case 2:t=180;break;case 3:t=-90}window.orientation=t,cc.view.emit("landscape-resize")};var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEnable=function(){this.updateArea(),cc.view.on("canvas-resize",this.updateArea,this),cc.view.on("landscape-resize",this.updateArea,this)},e.prototype.onDisable=function(){cc.view.off("canvas-resize",this.updateArea,this),cc.view.off("landscape-resize",this.updateArea,this)},e.prototype.updateArea=function(){var t=this.node.getComponent(cc.Widget);if(t){t.updateAlignment(),this.node.position,this.node.getAnchorPoint(),t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var e=cc.winSize.width,n=cc.winSize.height,i=cc.sys.getSafeAreaRect();t.top=Math.abs(n-i.y-i.height),t.bottom=i.y,90===window.orientation?(t.left=Math.abs(i.x),t.right=0):-90===window.orientation?(t.left=0,t.right=Math.abs(e-i.x-i.width)):(t.left=Math.abs(i.x),t.right=Math.abs(e-i.x-i.width)),t.updateAlignment();var o=t.node.getComponentsInChildren(cc.Widget);if(o.length>0)for(var a=0;a<o.length;a++)o[a].updateAlignment();t.enabled=!0,cc.log("[ SafeArea ]",i.toString()),cc.log("[ SafeArea -  orientation]",window.orientation)}},a([s,u("Display/SafeArea"),l(cc.Widget),c],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],ScreenAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"72c407PKSNJRKfFi/YWIhBu","ScreenAdapter");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc.Enum({NONE:0,SHOW_ALL_CONTENT:1,SHOW_ALL_SCALE:2,EXACT_SCALE:3}),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=r.SHOW_ALL_CONTENT,e.enableDesignSolution=!0,e.enableSafeArea=!0,e._onResized=null,e._initedContentSize=!1,e._initWidth=0,e._initHeight=0,e._oriY=0,e}return o(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.type!==r.SHOW_ALL_SCALE&&this.type!==r.SHOW_ALL_CONTENT||(cc.Canvas.instance.fitWidth=!0,cc.Canvas.instance.fitHeight=!0)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.updateSize()},e.prototype.onEnable=function(){this.updateSize()},e.prototype._init=function(){this._initedContentSize||(this._onResized=this.updateSize.bind(this),this._initedContentSize=!0,this._initWidth=this.node.width,this._initHeight=this.node.height,this._oriY=this.node.y)},e.prototype.setFitContent=function(t){var e=this._initWidth,n=this._initHeight,i=cc.view.getCanvasSize(),o=Math.min(i.width/e,i.height/n),a=cc.Canvas.instance.designResolution,r=(this.enableDesignSolution?a.width:e)*o,s=(this.enableDesignSolution?a.height:n)*o;t.getComponent(cc.Sprite)&&(t.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM);var c=i.width/r,l=i.height/s;t.width=e*c,t.height=n*l;for(var u=t.getComponentsInChildren(cc.Widget),p=0;p<u.length;p++)u[p].updateAlignment()},e.prototype.getSafeAreaPixelY=function(){var t=cc.winSize.height,e=cc.sys.getSafeAreaRect();return e.y+(e.height-t)*this.node.anchorY},e.prototype.setFitScale=function(t){var e=this._initWidth,n=this._initHeight,i=cc.view.getCanvasSize(),o=cc.Canvas.instance.designResolution,a=Math.min(i.width/e,i.height/n),r=(this.enableDesignSolution?o.width:e)*a,s=(this.enableDesignSolution?o.height:n)*a;t.scale=Math.max(i.width/r,i.height/s)},e.prototype.setExactScale=function(t){var e=this._initWidth,n=this._initHeight,i=t.parent.getContentSize(),o=cc.Canvas.instance.designResolution;this.enableDesignSolution&&(i=o),t.scale=Math.max(i.width/e,i.height/n)},e.prototype.updateSize=function(){this._init(),this.type===r.SHOW_ALL_CONTENT?this.setFitContent(this.node):this.type===r.SHOW_ALL_SCALE?this.setFitScale(this.node):this.type===r.EXACT_SCALE&&this.setExactScale(this.node)},a([l],e.prototype,"_type",void 0),a([l({type:r,tooltip:!1})],e.prototype,"type",null),a([l({tooltip:"\u9ed8\u8ba4\uff1atrue ,\u4f7f\u7528\u8bbe\u8ba1\u5c3a\u5bf8\u7684\u6bd4\u4f8b\u9002\u914d\u3002\u5982\u679c\u8981\u4f7f\u7528\u8282\u70b9\u5927\u5c0f\u505a\u6bd4\u4f8b\u9002\u914d\u8bf7\u7f6e\u4e3afalse."})],e.prototype,"enableDesignSolution",void 0),a([l({tooltip:"\u9ed8\u8ba4\uff1atrue ,\u662f\u5426\u5f00\u542f\u9002\u914d\u5b89\u5168\u533a"})],e.prototype,"enableSafeArea",void 0),a([c,u("Display/ScreenAdatper")],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],ScrollViewPlusComponent:[function(t,e,n){"use strict";cc._RF.push(e,"f513e+E0UdCtIsfJE6NqBlk","ScrollViewPlusComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ScrollViewPlusItemComponent"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.caculatePosition=!1,e}var n;return o(e,t),n=e,e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.node.on("scrolling",this._onScrollingDrawCallOpt,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.node.off("scrolling",this._onScrollingDrawCallOpt,this)},e.prototype._onScrollingDrawCallOpt=function(){this.content.childrenCount>0&&this.optDc()},e.prototype.optDc=function(){n.optDc(this,this.caculatePosition)},e.prototype.isNodeVisiable=function(t){return n.isNodeVisiable(this,t)},e.isNodeVisiable=function(t,e){var n=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.x-t.node.anchorX*t.node.width,t.node.y-t.node.anchorY*t.node.height)),i=cc.rect(n.x,n.y,t.node.width,t.node.height);return e.getBoundingBoxToWorld().intersects(i)},e.optDc=function(t,e){void 0===e&&(e=!1);var n=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.x-t.node.anchorX*t.node.width,t.node.y-t.node.anchorY*t.node.height)),i=cc.rect(n.x,n.y,t.node.width,t.node.height);t.content.children.forEach(function(t){var n=t.getComponent(r.default);if(null!=n){var o=t.getBoundingBoxToWorld();o.intersects(i)?(n.isShowing||(n.isShowing=!0,n.publishOnEnterScrollView()),e&&n.isShowing&&n.publishOnPositionChange((o.x-(i.x-o.width/2))/(o.width+i.width),(o.y-(i.y-o.height/2))/(o.height+i.height))):n.isShowing&&(n.isShowing=!1,n.publishOnExitScrollView())}})},a([l({tooltip:"\u662f\u5426\u8ba1\u7b97\u5728\u53ef\u89c6\u533a\u57df\u4e2dItem\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff08\u53ef\u80fd\u4f1a\u76f8\u5bf9\u8017\u6027\u80fd\uff09"})],e.prototype,"caculatePosition",void 0),n=a([c],e)}(cc.ScrollView);n.default=u,cc._RF.pop()},{"./ScrollViewPlusItemComponent":"ScrollViewPlusItemComponent"}],ScrollViewPlusItemComponent:[function(t,e,n){"use strict";cc._RF.push(e,"7f5b39BSitAI5UInHCyhUmy","ScrollViewPlusItemComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onEnterScorllViewEvents=[],e.onExitScorllViewEvents=[],e.onPositionChangeEvents=[],e.isShowing=!1,e}return o(e,t),e.prototype.onDisable=function(){this.isShowing=!1},e.prototype.publishOnEnterScrollView=function(){this.onEnterScorllViewEvents&&this.onEnterScorllViewEvents.forEach(function(t){t.emit([])})},e.prototype.publishOnExitScrollView=function(){this.onExitScorllViewEvents&&this.onExitScorllViewEvents.forEach(function(t){t.emit([])})},e.prototype.publishOnPositionChange=function(t,e){this.onPositionChangeEvents&&this.onPositionChangeEvents.forEach(function(n){n.emit([t,e])})},a([c({type:[cc.Component.EventHandler],tooltip:"\u8fdb\u5165ScrollView\u65f6\u56de\u8c03"})],e.prototype,"onEnterScorllViewEvents",void 0),a([c({type:[cc.Component.EventHandler],tooltip:"\u79bb\u5f00ScrollView\u65f6\u56de\u8c03"})],e.prototype,"onExitScorllViewEvents",void 0),a([c({type:[cc.Component.EventHandler],tooltip:"\u8fdb\u5165ScrollView\u4e4b\u540e\uff0c\u4f4d\u7f6e\u53d1\u751f\u6539\u53d8\u65f6\u56de\u8c03"})],e.prototype,"onPositionChangeEvents",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],SoundManager:[function(t,e,n){"use strict";cc._RF.push(e,"8bb519avGBFSYNOOmExiQfc","SoundManager");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Scripts/Game/UserData"),a=t("./RESManager"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function t(){this._musicLock=!0,this._effectLock=!0}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"musicLock",{get:function(){return this._musicLock},set:function(t){this._musicLock=t,this._musicLock||(null!=this.musicChannel&&cc.audioEngine.stop(this.musicChannel),this.musicChannel=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effectLock",{get:function(){return this._effectLock},set:function(t){this._effectLock=t,this._effectLock?this.playBgSound():(null!=this.effectSoundChannel&&cc.audioEngine.stop(this.effectSoundChannel),null!=this.musicChannel&&cc.audioEngine.stop(this.musicChannel),this.effectSoundChannel=null,this.musicChannel=null)},enumerable:!1,configurable:!0}),t.prototype.saveUserSetting=function(){o.default.instance.setData("Sound",[this._musicLock,this._effectLock])},t.prototype.onPause=function(){this.clear()},t.prototype.onResume=function(){this.playBgSound()},t.prototype.playEffectLater=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!0),this.laterSound||(this.laterSound={});var o=this.laterSound[t];(!o||n&&o.overMe)&&(this.laterSound[t]={name:e,overMe:i})},t.prototype.playEffectAtLater=function(){for(var t in this.laterSound)this.playEffect(this.laterSound[t].name);this.laterSound=null},t.prototype.clear=function(){null!=this.effectSoundChannel&&cc.audioEngine.stop(this.effectSoundChannel),this.effectSoundChannel=null,null!=this.musicChannel&&cc.audioEngine.stop(this.musicChannel),this.musicChannel=null},t.prototype.playSound=function(t,e){if(void 0===e&&(e=!0),this.musicLock){null!=this.musicChannel&&cc.audioEngine.stop(this.musicChannel);var n=a.default.getResource(t);n&&(this.musicChannel=cc.audioEngine.playMusic(n,e))}},t.prototype.playEffect=function(t,e,n,i){if(void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===i&&(i=0),this.effectLock){var o=a.default.getResource(t);o&&(this.effectSoundChannel=cc.audioEngine.playEffect(o,n),i>0&&cc.audioEngine.setCurrentTime(this.effectSoundChannel,i))}},t.prototype.playBgSound=function(){null==this.musicChannel&&this.musicLock&&this.playSound("music_game_bgm")},t.prototype.stopBgSound=function(){null!=this.musicChannel&&(cc.audioEngine.stop(this.musicChannel),this.musicChannel=null)},t.prototype.winOpen=function(){},t.prototype.winClose=function(){},t.prototype.btnClick=function(){this.playEffect("sound_button_tap")},t.prototype.levelStart=function(){this.playEffect("sound_box_fall")},t.prototype.unclear=function(){this.playEffect("sound_cannot_link")},t.prototype.TimeOver=function(){this.playEffect("link1")},t.prototype.BoxUpgrade=function(){this.playEffect("magic_time_first_try")},t.prototype.gameFail=function(){this.playEffect("level_cleared_in")},t.prototype.mineBomb=function(){this.playEffect("dynamite_exp")},t.prototype.gameVectory=function(){this.playEffect("Victory")},t.prototype.RocketFly=function(){this.playEffect("rocket_m_version3")},t.prototype.RocketBomb=function(){this.playEffect("dynamite_exp")},t.prototype.combo=function(t){this.playEffect("Combo_"+t)},t.prototype.boxOpen=function(){this.playEffect("m2_chest_open")},t.prototype.starFly=function(){this.playEffect("pb_coins_in")},t.prototype.coinFly=function(){this.playEffect("pb_coins_full")},t.prototype.overStar=function(t){this.playEffect("challenge_stage"+t)},t.prototype.landmarkUnlock=function(){this.playEffect("missions_unlock")},t.prototype.chapterUnlock=function(){this.playEffect("missions_unlock")},t.prototype.turnTable=function(){this.playEffect("spin")},t.prototype.turnTableEnd=function(){this.playEffect("spin_end")},e=i([s],t)}());n.default=c,cc._RF.pop()},{"../../../Scripts/Game/UserData":"UserData","./RESManager":"RESManager"}],SpriteScaleAdapterComponent:[function(t,e,n){"use strict";cc._RF.push(e,"19cd1EtCxROy74vuajdNybo","SpriteScaleAdapterComponent");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SpriteAlignType=n.SpriteScaleType=void 0;var r,s,c=cc._decorator,l=c.ccclass,u=c.property;(function(t){t[t.FILL=0]="FILL",t[t.SUIT=1]="SUIT"})(r=n.SpriteScaleType||(n.SpriteScaleType={})),function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM",t[t.CENTER=4]="CENTER"}(s=n.SpriteAlignType||(n.SpriteAlignType={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scaleType=r.SUIT,e.alignType=s.CENTER,e._sprite=null,e}return o(e,t),e.prototype.onLoad=function(){this._sprite=this.node.getComponent(cc.Sprite)},e.prototype.start=function(){this.updateSprite(this.scaleType,this.alignType)},e.prototype.onEnable=function(){var t=this._onResize.bind(this);window.addEventListener("resize",t),window.addEventListener("orientationchange",t)},e.prototype.onDisable=function(){var t=this._onResize.bind(this);window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)},e.prototype._onResize=function(){this.updateSprite(this.scaleType,this.alignType)},e.prototype.updateSprite=function(t,e){if(this._sprite&&this._sprite.enabled&&this._sprite.spriteFrame){var n=this.node.parent.getComponent(cc.Widget);switch(n&&n.updateAlignment(),this.node.width=this._sprite.spriteFrame.getRect().width,this.node.height=this._sprite.spriteFrame.getRect().height,this.node.width/this.node.height>this.node.parent.width/this.node.parent.height?t==r.SUIT?this.node.scale=this.node.parent.width/this.node.width:t==r.FILL&&(this.node.scale=this.node.parent.height/this.node.height):t==r.SUIT?this.node.scale=this.node.parent.height/this.node.height:t==r.FILL&&(this.node.scale=this.node.parent.width/this.node.width),e){case s.CENTER:this.node.setPosition(cc.v2());break;case s.LEFT:this.node.setPosition(cc.v2(-.5*(this.node.parent.width-this.node.width*this.node.scale),0));break;case s.RIGHT:this.node.setPosition(cc.v2(.5*(this.node.parent.width-this.node.width*this.node.scale),0));break;case s.TOP:this.node.setPosition(cc.v2(0,.5*(this.node.parent.height-this.node.height*this.node.scale)));break;case s.BOTTOM:this.node.setPosition(cc.v2(0,-.5*(this.node.parent.height-this.node.height*this.node.scale)))}}},a([u({type:cc.Enum(r),tooltip:"\u7f29\u653e\u7c7b\u578b:\n-FILL: \u7f29\u653e\u5230\u586b\u6ee1\u7236\u8282\u70b9\uff08\u56fe\u50cf\u53ef\u80fd\u4f1a\u88ab\u88c1\u526a\uff0c\u4f46\u7236\u8282\u70b9\u6709\u7a7a\u767d\uff09\n-SUIT: \u7f29\u653e\u5230\u521a\u597d\u5728\u7236\u8282\u70b9\u5185\u90e8\u6700\u5927\u5316\u663e\u793a\uff08\u56fe\u50cf\u4f1a\u5b8c\u6574\u663e\u793a\uff0c\u4f46\u7236\u8282\u70b9\u4e0a\u4e0b\u6216\u8005\u5de6\u53f3\u53ef\u80fd\u4f1a\u7559\u7a7a\uff09"})],e.prototype,"scaleType",void 0),a([u({type:cc.Enum(s),tooltip:"\u5bf9\u9f50\u65b9\u5f0f\u7c7b\u578b:\n\u5982\uff1a\n-LEFT: \u7f29\u653e\u540e\u9760\u5de6\u5bf9\u9f50"})],e.prototype,"alignType",void 0),a([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],SpriteUtils:[function(t,e,n){"use strict";cc._RF.push(e,"033f1ZHDfhMFoz86rIdlBAh","SpriteUtils");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Framework/core/GameApp"),a=t("../Datas/GameDataManager"),r=t("../GameConfig"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function t(){}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.setSpriteFrame=function(t,e){""!=e&&a.default.instance.getBundle(r.default.MainBundleName).load(e,cc.SpriteFrame,function(e,n){e?o.default.Logger.error(e):t.spriteFrame=n})},t.prototype.getSpriteAltas=function(t,e,n){a.default.instance.getBundle(r.default.MainBundleName).load(t,cc.SpriteAtlas,function(t,i){t?o.default.Logger.error(t):null==e||e.call(n,i)})},e=i([c],t)}());n.default=l,cc._RF.pop()},{"../../Framework/core/GameApp":"GameApp","../Datas/GameDataManager":"GameDataManager","../GameConfig":"GameConfig"}],Stack:[function(t,e,n){"use strict";cc._RF.push(e,"3c7bcgiKDNOiohQrfHLJW9f","Stack"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this._array=new Array}return t.prototype.push=function(t){return null!=t&&(this._array.push(t),!0)},t.prototype.pop=function(){return this._array.pop()},t.prototype.first=function(){return this.isEmpty()?null:this._array[0]},t.prototype.last=function(){return this.isEmpty()?null:this._array[this.size()-1]},t.prototype.size=function(){return this._array.length},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.clear=function(){delete this._array},t}();n.default=i,cc._RF.pop()},{}],StorageUtil:[function(t,e,n){"use strict";cc._RF.push(e,"2d0e8P17aFIXKE3xRP7s80f","StorageUtil"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../Scripts/GameConfig").default.StorageKey,o=function(){function t(){}return t.setItem=function(e,n){var i={};i[e]=n,t.setData(i)},t.getItem=function(e){return t.getData(e)},t.removeItem=function(e){return t.removeData(e)},t.getData=function(t){if(t instanceof Array){for(var e={},n=0,o=t;n<o.length;n++){var a=o[n];r=cc.sys.localStorage.getItem(i+"#"+a),e[a]=r?JSON.parse(r):r}return e}var r;return(r=cc.sys.localStorage.getItem(i+"#"+t))&&"undefined"!==r&&"null"!==r?JSON.parse(r):void 0},t.setData=function(t){for(var e in t)cc.sys.localStorage.setItem(i+"#"+e,JSON.stringify(t[e]))},t.removeData=function(t){if(t instanceof Array)for(var e=0,n=t;e<n.length;e++){var o=n[e];cc.sys.localStorage.getItem(i+"#"+o)}else cc.sys.localStorage.removeItem(i+"#"+t)},t}();n.default=o,cc._RF.pop()},{"../../../Scripts/GameConfig":"GameConfig"}],TalkingdataSDK:[function(t,e,n){"use strict";cc._RF.push(e,"9ccfbBeX9VMHZCGJHJbOHia","TalkingdataSDK"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../GameApp"),o=function(){function t(){this.tdAppSdk=window.tdAppSdk}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.Event=function(t,e){i.default.DEBUG||(console.log("@TD",t),i.default.SDK.logEvent(t,e))},t.prototype.onEvent=function(t,e){this.tdAppSdk.event(t,e)},t.prototype.Account=function(t){this.tdAppSdk.Account(t)},t.prototype.setAccountName=function(t){this.tdAppSdk.setAccountName(t)},t.prototype.setAccountType=function(t){this.tdAppSdk.setAccountType(t)},t}();n.default=o,cc._RF.pop()},{"../GameApp":"GameApp"}],TaskManager:[function(t,e,n){"use strict";cc._RF.push(e,"7a04b47ZIhC5pan3BBsyfkn","TaskManager");var i,o,a=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.NORMAL=0]="NORMAL",t[t.POPUP=1]="POPUP"}(o||(o={}));var r=function(){function t(){this.isValid=!0,this.id="",this.type=o.NORMAL,this.executed=!1,this._$executed=!1,this.taskTime=0,this.taskDelay=1,this.args=null,this.running=!1,this.priority=-1}return t.prototype.execute=function(){},t.prototype.pause=function(){this.executed&&(this._$executed=this.executed),this.running=!1,this.executed=!1},t.prototype.resume=function(){this._$executed&&this.execute()},t.prototype.destroy=function(){this.args=null,this.executed=!1,this.running=!1,this.isValid=!1},t}(),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.args=null,e}return a(e,t),e.prototype.execute=function(t){this.executed||(this.running=!0,this.executed=!0,this.args&&this.args.executeFunc&&this.args.executeFunc.call(this.args.target,this.args.data,t))},e}(r),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.POPUP,e.component=null,e.parent=null,e.args=null,e._$executed=!1,e}return a(e,t),e.prototype.execute=function(){this.executed||(this.running=!0,this.executed=!0,this.component.node&&this.parent&&(this.component.node.parent=this.parent),this.args&&this.component&&this.component[this.args.executeFunc]&&(this.args.target?this.component[this.args.executeFunc].call(this.args.target,this.args.data):this.component[this.args.executeFunc].call(this.component,this.args.data)))},e.prototype.pause=function(){this.executed&&(this._$executed=this.executed,this.component.node&&this.parent&&this.component.node.removeFromParent(!1)),this.running=!1,this.executed=!1},e.prototype.resume=function(){this._$executed&&this.execute()},e.prototype.destroy=function(){this.parent&&this.component&&cc.isValid(this.component.node,!0)&&this.component.node.destroy(),this.component=null,this.parent=null,this.args=null,this.executed=!1,this.running=!1,this.isValid=!1},e}(r),l=function(){function t(){this.taskQueue=[],this._pause=!1}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,cc.director.getScheduler().enableForTarget(this._instance),cc.director.getScheduler().scheduleUpdate(this._instance,cc.Scheduler.PRIORITY_NON_SYSTEM,!1)),this._instance},enumerable:!1,configurable:!0}),t.prototype.pushPopUpTask=function(t,e,n,i){void 0===i&&(i=0);var o=cc.js.getClassName(t);if(this.hasTask(o)){var a=this.getTask(o);if(a.running)return a;this.removeTask(o)}cc.log("[ TaskManager ] - PUSH = ",o);var r=new c;if(r.component=t,r.parent=e,r.id=o,r.priority=i,n||(n={}),r.args=n,r.taskDelay=n.delay||0,r.taskDelay>0)this.taskQueue.push(r);else{var s=this.taskQueue[0];s&&!s.executed&&(s.taskTime=0),s?s.running?this.taskQueue.splice(1,0,r):this.taskQueue.unshift(r):this.taskQueue.push(r)}this.taskQueue.sort(this.sortPriority);for(var l=1;l<this.taskQueue.length;l++){var u=this.taskQueue[l];u.executed&&u.pause()}return r},t.prototype.sortPriority=function(t,e){return e.priority-t.priority},t.prototype.sortDelayTime=function(t,e){return t.taskDelay-e.taskDelay},t.prototype.removePopUpTask=function(t,e){void 0===e&&(e=0),this.removeTask(cc.js.getClassName(t),e)},t.prototype.pushTask=function(t,e,n){if(void 0===n&&(n=1),this.hasTask(t)){var i=this.getTask(t);if(i.running)return i;this.removeTask(t)}var a=new s;if(a.type=o.NORMAL,a.id=t,a.priority=n,e||(e={}),a.args=e,a.taskDelay=e.delay||0,a.taskDelay>0)this.taskQueue.push(a);else{var r=this.taskQueue[0];r&&!r.executed&&(r.taskTime=0),r?r.running?this.taskQueue.splice(1,0,a):this.taskQueue.unshift(a):this.taskQueue.push(a)}return this.taskQueue.sort(this.sortPriority),a},t.prototype.removeTask=function(t,e){void 0===e&&(e=0);for(var n=!1,i=0,o=void 0,a=this.taskQueue.length;i<a;i++){if((o=this.taskQueue[i])&&o.id==t)return n=!0,o.destroy(),cc.log("[ TaskManager ] - REMOVE = ",t),this.taskQueue.splice(i,1);n&&o&&o.isValid&&(o.taskTime+=e)}},t.prototype.hasTask=function(t){for(var e=0,n=void 0,i=this.taskQueue.length;e<i;e++)if((n=this.taskQueue[e])&&n.id==t)return!0;return!1},t.prototype.getTask=function(t){for(var e=0,n=void 0,i=this.taskQueue.length;e<i;e++)if((n=this.taskQueue[e])&&n.id==t)return n;return null},t.prototype.clearTask=function(t){var e=null;if("string"==typeof t)for(;e=this.taskQueue.pop();)e.id!==t&&e.destroy();else for(;e=this.taskQueue.pop();)e.destroy()},t.prototype.pause=function(){for(var t=0,e=void 0,n=this.taskQueue.length;t<n;t++)(e=this.taskQueue[t])&&e.pause();this._pause=!0},t.prototype.resume=function(){for(var t=0,e=void 0,n=this.taskQueue.length;t<n;t++)(e=this.taskQueue[t])&&e.resume();this._pause=!1},t.prototype.pauseTime=function(){this._pause=!0},t.prototype.resumeTime=function(){this._pause=!1},t.prototype.update=function(t){if(!this._pause){var e=this.taskQueue[0];if(e&&(e.taskTime+=t,e.taskTime>=e.taskDelay&&!e.executed&&!e.running))if(e.type===o.NORMAL){var n=this;e.execute(function(){n.taskQueue.splice(0,1)})}else e.execute()}},t._instance=null,t}();n.default=l,cc._RF.pop()},{}],TickManager:[function(t,e,n){"use strict";cc._RF.push(e,"2856a1pX6lGK7MIzn1Vd0AF","TickManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.CountdownVO=void 0;var i=t("../event/EventManager"),o=t("./UIManager");n.CountdownVO=function(){this.emitEnd=!1,this.emitEndComplete=!1};var a=function(){function t(){this.countdownList=[],this.countdownMap={},this.lastTime=0,this.handlerQueue=[],this.taskQueue=[],this.second=0,i.default.instance.on("tick",this.tickHandler,this),this.lastTime=(new Date).getTime()}return t.prototype.regiest=function(t,e,n){if(void 0===n&&(n=!1),this.countdownMap[t])return this.countdownMap[t];var i={key:t,time:e,current:e,emitEnd:n};return this.countdownList.push(i),this.countdownMap[t]=i,i},t.prototype.unRegiest=function(t){if(this.countdownMap[t]){delete this.countdownMap[t];for(var e=0;e<this.countdownList.length;e++)if(this.countdownList[e].key==t)return void this.countdownList.splice(e,1)}},t.prototype.getCountdown=function(t){return this.countdownMap[t]?this.countdownMap[t].current:-1},t.prototype.tickHandler=function(){for(var t=(new Date).getTime(),e=t-this.lastTime,n=0,o=this.countdownList;n<o.length;n++){var a=o[n];a.current-=e,a.current<=0&&a.emitEnd&&!a.emitEndComplete&&(i.default.instance.emit(a.key+"Complete"),a.emitEndComplete=!0)}this.lastTime=t},t.prototype.callLater=function(t,e,n,i,o,a,r){void 0===n&&(n=0),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===r&&(r=null);for(var s={handler:t,thisObj:e,daliy:n,param:i,isTime:o,pause:a,key:r},c=this.handlerQueue.length-1;c>=0;c--){var l=this.handlerQueue[c];if(null!=l.key&&l.key==r)return void(this.handlerQueue[c]=s)}this.handlerQueue.push(s)},t.prototype.clearCallLater=function(t){for(var e=this.handlerQueue.length-1;e>=0;e--)if(this.handlerQueue[e].key==t)return void this.handlerQueue.splice(e,1)},t.prototype.update=function(t){for(var e=this.handlerQueue.length-1;e>=0;e--){var n;(n=this.handlerQueue[e]).pause&&o.default.isPause||(n.isTime?n.daliy-=t:n.daliy--,n.daliy<=0&&(this.handlerQueue.splice(e,1),n.handler.call(n.thisObj,n.param)))}for(var a=0;this.taskQueue.length>0&&a<o.default.maxTaskNum;){a++;var r=this.taskQueue.shift();r.handler.call(r.thisObj,r.param)}this.second+=t,this.second>=1&&(this.second-=1,i.default.instance.emit("tick"))},t.prototype.executeTask=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.taskQueue.push({handler:t,thisObj:e,param:n})},t.instance=new t,t}();n.default=a,cc._RF.pop()},{"../event/EventManager":"EventManager","./UIManager":"UIManager"}],TileUtils:[function(t,e,n){"use strict";cc._RF.push(e,"46205VmH8hDSKkT6w245RmL","TileUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.Direction=void 0;var i=t("../GameConfig"),o=t("./GameCore");(function(t){t[t.UP=0]="UP",t[t.LEFT=1]="LEFT",t[t.DOWN=2]="DOWN",t[t.RIGHT=3]="RIGHT",t[t.CENTER=4]="CENTER"})(n.Direction||(n.Direction={}));var a=function(){function t(){}return t.getTileLength=function(t,e){var n=i.default.TileMaxWidth,a=i.default.TileMaxHeight;return t-2>=7&&(n=i.default.TileMaxWidth+30),e-2==10&&(a=i.default.TileMaxHeight+80),e-2>=12&&(a=i.default.TileMaxHeight+100),Math.min(n/720*o.default.instance.GameUI.node.width/(t-2),a/1280*o.default.instance.GameUI.node.height/(e-2))},t.InRange=function(t,e,n){return t>=0&&t<e*n},t.IndexToXY=function(t,e){return{x:Math.abs(t%e),y:Math.floor(t/e)}},t.XYToIndex=function(t,e,n){return t+e*n},t.XYToPosition=function(t,e,n,i){var o=this.getTileLength(n,i),a=(t-n/2+.5)*o,r=-(e-i/2+.5)*o;return 0==t?a+=o*this.m_BorderOffsetRate:t==n-1&&(a-=o*this.m_BorderOffsetRate),0==e?r-=o*this.m_BorderOffsetRate:e==i-1&&(r+=o*this.m_BorderOffsetRate),this.m_CenterOffsetPositon.add(cc.v3(a,r))},t.IndexToPosition=function(t,e,n){var i=this.IndexToXY(t,e);return this.XYToPosition(i.x,i.y,e,n)},t.PositionToXY=function(t,e,n){var i=this.getTileLength(e,n),o=this.IndexToPosition(0,e,n);return{row:Math.floor((t.x-(o.x-.5*i))/i),col:Math.floor((o.y+.5*i-t.y)/i)}},t.PositionToIndex=function(t,e,n){var i=this.PositionToXY(t,e,n);return this.XYToIndex(i.row,i.col,e)},t.m_CenterOffsetPositon=cc.v3(0,35),t.m_BorderOffsetRate=.3,t}();n.default=a,cc._RF.pop()},{"../GameConfig":"GameConfig","./GameCore":"GameCore"}],Tile:[function(t,e,n){"use strict";cc._RF.push(e,"cbcf2P2qrJN0YvCQQUUgA6T","Tile");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/event/EventManager"),s=t("../../../Framework/core/manager/ObjectPoolManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../../Datas/EventName"),u=t("../../Datas/GameDataManager"),p=t("../../GameConfig"),d=t("../Effects/EffectUtils"),h=t("../GameCore"),f=t("../TileUtils"),m=cc._decorator,g=m.ccclass,y=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DrawContent=null,e.LabTest=null,e.SprBackground=null,e.SprIcon=null,e.Select=null,e.LightOut=null,e.SelectAnimaNode=null,e.Rocket=null,e.Mine=null,e.MineProgress=null,e.LandMine=null,e.x=0,e.y=0,e.index=-1,e.drawLength=0,e.drawScale=1,e.isBroken=!1,e.isBorder=!1,e.isRocket=!1,e.isUnclickable=!1,e.isAnimation=!1,e.isMine=!1,e.mineTime=0,e.sprIconInitScale=.5,e.tweenSelected=null,e.tweenTip=null,e}return o(e,t),e.prototype.onLoad=function(){this.LabTest.node.active=!1,this.sprIconInitScale=this.SprIcon.node.scale,cc.tween(this.SelectAnimaNode).sequence(cc.tween().set({angle:0}),cc.tween().to(2,{angle:360})).repeatForever().start(),cc.tween(this.LightOut).sequence(cc.tween().set({angle:0}),cc.tween().to(5,{angle:360})).repeatForever().start(),this.LandMine.scale=.7,cc.tween(this.LandMine).sequence(cc.tween().to(.4,{scale:.5}),cc.tween().delay(.3).to(.4,{scale:.7},{easing:"sineOut"})).repeatForever().start()},e.prototype.onEnable=function(){r.default.instance.on(l.default.UpdateTileIcon,this.updateTileIcon,this),r.default.instance.on(l.default.ClearTipTile,this.clearTipTile,this)},e.prototype.onDisable=function(){r.default.instance.off(l.default.UpdateTileIcon,this.updateTileIcon,this),r.default.instance.off(l.default.ClearTipTile,this.clearTipTile,this)},e.prototype.removeSelf=function(){s.default.instance.putObject(p.default.PoolNameTile,this.node)},e.prototype.reset=function(){this.index=-1,this.mineTime=0,this.isBroken=!1,this.isBorder=!1,this.isMine=!1,this.isRocket=!1,this.isUnclickable=!1,this.isAnimation=!1,this.node.active=!0,this.node.opacity=255,this.Select.active=!1,this.LightOut.active=!1,this.Mine.active=!1,this.Rocket.active=!1,this.clearTipTile(),cc.Tween.stopAllByTarget(this.node)},e.prototype.setDataView=function(t,e,n,i,o){this.reset(),this.setXY(t,e);var a=f.default.getTileLength(h.default.instance.curGridXCount,h.default.instance.curGridYCount);this.node.width=a,this.node.height=a,this.drawLength=o,this.drawScale=this.drawLength/p.default.TileDefaultLength,this.DrawContent.scale=this.drawScale,this.LightOut.scale=this.drawScale,i?(this.isBorder=i,this.setBorderTile()):(this.index=null==n?void 0:n.index,this.index<0&&(this.node.opacity=0,this.isBroken=!0)),n&&(this.isRocket=!!n.rocket),this.updateTileIcon()},e.prototype.setXY=function(t,e){this.x=t,this.y=e},e.prototype.generateAnimation=function(){var t=this;this.node.position=cc.v3(),this.isUnclickable=!0,this.isAnimation=!0;var e=f.default.XYToPosition(this.x,this.y,h.default.instance.curGridXCount,h.default.instance.curGridYCount);cc.tween(this.node).to(p.default.TileMoveTime,{position:e},{easing:"quartOut"}).call(function(){t.isUnclickable=!1,t.isAnimation=!1}).start()},e.prototype.setBorderTile=function(){this.node.active=!1,this.isBroken=!0},e.prototype.update=function(t){this.updateMine(t)},e.prototype.updateTileIcon=function(t){var e=this;void 0===t&&(t=!1),this.isValidTile&&(t?cc.tween(this.SprIcon.node).to(p.default.TileFilpTime,{scaleX:0}).call(function(){e.setTileIcon()}).to(p.default.TileFilpTime,{scaleX:this.sprIconInitScale}).start():this.setTileIcon())},e.prototype.setTileIcon=function(){h.default.instance.GameUseAtlas&&(this.isRocket?(this.Rocket.active=!0,this.SprIcon.spriteFrame=null):(this.Rocket.active=!1,this.SprIcon.spriteFrame=h.default.instance.GameUseAtlas.getSpriteFrame(cc.path.mainFileName(h.default.instance.GameUseAtlas.name)+"_"+this.index)),this.SprBackground.spriteFrame=h.default.instance.GameUseAtlas.getSpriteFrame("cube_bg"))},e.prototype.startMine=function(){var t=u.default.instance.getBombTimeData();this.mineTime=t[h.default.instance.LevelData.layout]||p.default.MineOverTime,this.isMine=!0,this.MineProgress.progress=1,this.Mine.active=!0},e.prototype.updateMine=function(t){if(h.default.instance.isGaming&&h.default.instance.isRuning&&h.default.instance.isTiming&&this.isMine){this.mineTime-=t;var e=u.default.instance.getBombTimeData();this.MineProgress.progress=this.mineTime/(e[h.default.instance.LevelData.layout]||p.default.MineOverTime),this.Mine.active||(this.Mine.active=!0),this.mineTime<=0&&(this.isMine=!1,this.Mine.active=!1,c.default.instance.mineBomb(),d.default.instance.getEffectMineBomb(this.node.position,function(){h.default.instance.gameMineOver()}))}},e.prototype.closeMine=function(){this.isMine&&(this.isMine=!1,this.Mine.active=!1,h.default.instance.updateMine())},Object.defineProperty(e.prototype,"isValidTile",{get:function(){return!this.isBorder&&!this.isBroken&&null!=this.index&&this.index>=0},enumerable:!1,configurable:!0}),e.prototype.clearFromGame=function(){this.isBroken=!0,cc.tween(this.node).to(p.default.TileClearTime,{opacity:0}).start(),this.node.parent=h.default.instance.GameContent,this.closeMine()},e.prototype.onClickTile=function(){this.isBroken||r.default.instance.emit(l.default.GameClickTile,this)},e.prototype.selectedAnimation=function(){this.tweenSelected&&(this.tweenSelected.stop(),this.tweenSelected=null),this.DrawContent.scale=this.drawScale,this.tweenSelected=cc.tween(this.DrawContent).to(.1,{scale:.7*this.drawScale}).to(.15,{scale:this.drawScale},{easing:"backOut"}).start()},e.prototype.selected=function(){this.Select.active=!0},e.prototype.getRocketEffectWorldPosition=function(){return this.Rocket.convertToWorldSpaceAR(this.Rocket.getChildByName("RocketPosition").position)},e.prototype.clearSelected=function(){this.Select.active=!1},e.prototype.moveTile=function(t,e){var n=this;this.isUnclickable=!0,this.isAnimation=!0,this.setXY(t,e);var i=f.default.XYToPosition(t,e,h.default.instance.curGridXCount,h.default.instance.curGridYCount);cc.tween(this.node).to(p.default.TileMoveTime,{position:i},{easing:"quartOut"}).call(function(){n.isUnclickable=!1,n.isAnimation=!1}).start()},e.prototype.moveSlowTile=function(t,e){var n=this;this.isUnclickable=!0,this.isAnimation=!1,this.setXY(t,e);var i=f.default.XYToPosition(t,e,h.default.instance.curGridXCount,h.default.instance.curGridYCount);cc.tween(this.node).delay(2*p.default.TileClearTime).to(p.default.TileSlowMoveTime,{position:i},{easing:"quartOut"}).call(function(){n.isUnclickable=!1,n.isAnimation=!1}).start()},e.prototype.setTipTile=function(){this.LightOut.active=!0,this.tweenTip=cc.tween(this.DrawContent).sequence(cc.tween().to(.3,{scale:.7*this.drawScale}),cc.tween().by(.15,{angle:15}),cc.tween().by(.15,{angle:-30}),cc.tween().by(.15,{angle:30}),cc.tween().by(.15,{angle:-30}),cc.tween().by(.15,{angle:15}),cc.tween().to(.3,{scale:this.drawScale}),cc.tween().delay(.55)).repeatForever().start()},e.prototype.clearTipTile=function(){this.tweenTip&&(this.tweenTip.stop(),this.tweenTip=null),this.DrawContent.scale=this.drawScale,this.DrawContent.angle=0,this.LightOut.active=!1},a([y(cc.Node)],e.prototype,"DrawContent",void 0),a([y(cc.Label)],e.prototype,"LabTest",void 0),a([y(cc.Sprite)],e.prototype,"SprBackground",void 0),a([y(cc.Sprite)],e.prototype,"SprIcon",void 0),a([y(cc.Node)],e.prototype,"Select",void 0),a([y(cc.Node)],e.prototype,"LightOut",void 0),a([y(cc.Node)],e.prototype,"SelectAnimaNode",void 0),a([y(cc.Node)],e.prototype,"Rocket",void 0),a([y(cc.Node)],e.prototype,"Mine",void 0),a([y(cc.ProgressBar)],e.prototype,"MineProgress",void 0),a([y(cc.Node)],e.prototype,"LandMine",void 0),a([g],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ObjectPoolManager":"ObjectPoolManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../GameConfig":"GameConfig","../Effects/EffectUtils":"EffectUtils","../GameCore":"GameCore","../TileUtils":"TileUtils"}],UIGameBoxGet:[function(t,e,n){"use strict";cc._RF.push(e,"650a9FD4chC8ZgmHd0MEw3T","UIGameBoxGet");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/ADManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../Datas/EventName"),p=t("../UserData"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabReward=null,e.Box=null,e.Coin=null,e.Filp=null,e.Turn=null,e.Find=null,e.EffectContent=null,e.ButtonADGet=null,e.ButtonGet=null,e.getConfig=null,e.rewardCount=0,e.widthInterval=140,e.coinItem=null,e.filpItem=null,e.turnItem=null,e.findItem=null,e.startPos=cc.v3(0,140),e.delay=.7,e.endY=-140,e.jumpHeight=230,e.callbacks=[],e.callback=null,e.inAnimation=!1,e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.coinItem=null,this.filpItem=null,this.turnItem=null,this.findItem=null,this.Coin.active=!1,this.Filp.active=!1,this.Turn.active=!1,this.Find.active=!1,this.ButtonGet.active=!0,this.callbacks=[],this.getConfig=n,this.rewardCount=Object.keys(this.getConfig).length;var o=-(this.rewardCount-2)/2*this.widthInterval;this.EffectContent.removeAllChildren();var a=0;this.callback=n.callback,this.Box.node.active=!0,this.Box.setAnimation(0,"baoxiang",!1),this.inAnimation=!0,cc.tween(this.node).delay(this.delay).call(function(){l.default.instance.boxOpen()}).delay(.5).call(function(){i.inAnimation=!1}).start(),this.getConfig.Coin&&(this.coinItem=cc.instantiate(this.PrefabReward),this.coinItem.getChildByName("coin").active=!0,this.coinItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Coin,this.coinItem.parent=this.EffectContent,this.coinItem.position=this.startPos,this.coinItem.scale=0,cc.tween(this.coinItem).delay(this.delay).parallel(cc.tween().to(.5,{scale:1}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).start(),a++,this.Coin.active=!0,this.Coin.opacity=0,this.Coin.getComponentInChildren(cc.Label).string=(p.default.instance.Coin-this.getConfig.Coin).toString(),this.callbacks.push(function(){i.Coin.opacity=255,cc.tween(i.coinItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Coin.convertToWorldSpaceAR(i.Coin.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Coin.getComponentInChildren(cc.Label).string=p.default.instance.Coin.toString(),s.default.instance.emit(u.default.UpdateCoin)}).removeSelf().start()})),this.getConfig.Filp&&(this.filpItem=cc.instantiate(this.PrefabReward),this.filpItem.getChildByName("flip").active=!0,this.filpItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Filp,this.filpItem.parent=this.EffectContent,this.filpItem.position=this.startPos,this.filpItem.scale=0,cc.tween(this.filpItem).delay(this.delay).parallel(cc.tween().to(.5,{scale:1}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).start(),a++,this.Filp.active=!0,this.Filp.opacity=0,this.Filp.getComponentInChildren(cc.Label).string=(p.default.instance.Filp-this.getConfig.Filp).toString(),this.callbacks.push(function(){i.Filp.opacity=255,cc.tween(i.filpItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Filp.convertToWorldSpaceAR(i.Filp.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Filp.getComponentInChildren(cc.Label).string=p.default.instance.Filp.toString()}).removeSelf().start()})),this.getConfig.Turn&&(this.turnItem=cc.instantiate(this.PrefabReward),this.turnItem.getChildByName("turn").active=!0,this.turnItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Turn,this.turnItem.parent=this.EffectContent,this.turnItem.position=this.startPos,this.turnItem.scale=0,cc.tween(this.turnItem).delay(this.delay).parallel(cc.tween().to(.5,{scale:1}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).start(),a++,this.Turn.active=!0,this.Turn.opacity=0,this.Turn.getComponentInChildren(cc.Label).string=(p.default.instance.Turn-this.getConfig.Turn).toString(),this.callbacks.push(function(){i.Turn.opacity=255,cc.tween(i.turnItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Turn.convertToWorldSpaceAR(i.Turn.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Turn.getComponentInChildren(cc.Label).string=p.default.instance.Turn.toString()}).removeSelf().start()})),this.getConfig.Find&&(this.findItem=cc.instantiate(this.PrefabReward),this.findItem.getChildByName("find").active=!0,this.findItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Find,this.findItem.parent=this.EffectContent,this.findItem.position=this.startPos,this.findItem.scale=0,cc.tween(this.findItem).delay(this.delay).parallel(cc.tween().to(.5,{scale:1}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).start(),a++,this.Find.active=!0,this.Find.opacity=0,this.Find.getComponentInChildren(cc.Label).string=(p.default.instance.Find-this.getConfig.Find).toString(),this.callbacks.push(function(){i.Find.opacity=255,cc.tween(i.findItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Find.convertToWorldSpaceAR(i.Find.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Find.getComponentInChildren(cc.Label).string=p.default.instance.Find.toString()}).removeSelf().start()}))},e.prototype.onGet=function(){var t=this;if(!this.inAnimation){this.ButtonADGet.active=!1,this.ButtonGet.active=!1;for(var e=0;e<this.callbacks.length;e++)this.callbacks[e].call();this.scheduleOnce(function(){var e;t.close(),null===(e=t.callback)||void 0===e||e.call()},1.5)}},e.prototype.onADGet=function(){var t=this;this.inAnimation||c.default.showReward(function(){t.getConfig.Coin&&(p.default.instance.Coin+=t.getConfig.Coin,t.getConfig.Coin+=t.getConfig.Coin,t.coinItem.getComponentInChildren(cc.Label).string="x"+t.getConfig.Coin,t.Coin.getComponentInChildren(cc.Label).string=(p.default.instance.Coin-t.getConfig.Coin).toString()),t.getConfig.Filp&&(p.default.instance.Filp+=t.getConfig.Filp,t.getConfig.Filp+=t.getConfig.Filp,t.filpItem.getComponentInChildren(cc.Label).string="x"+t.getConfig.Filp,t.Filp.getComponentInChildren(cc.Label).string=(p.default.instance.Filp-t.getConfig.Filp).toString()),t.getConfig.Turn&&(p.default.instance.Turn+=t.getConfig.Turn,t.getConfig.Turn+=t.getConfig.Turn,t.turnItem.getComponentInChildren(cc.Label).string="x"+t.getConfig.Turn,t.Turn.getComponentInChildren(cc.Label).string=(p.default.instance.Turn-t.getConfig.Turn).toString()),t.getConfig.Find&&(p.default.instance.Find+=t.getConfig.Find,t.getConfig.Find+=t.getConfig.Find,t.findItem.getComponentInChildren(cc.Label).string="x"+t.getConfig.Find,t.Find.getComponentInChildren(cc.Label).string=(p.default.instance.Find-t.getConfig.Find).toString()),t.ButtonADGet.active=!1,t.ButtonGet.active=!1,t.scheduleOnce(function(){for(var e=0;e<t.callbacks.length;e++)t.callbacks[e].call()},.5),t.scheduleOnce(function(){var e;t.close(),null===(e=t.callback)||void 0===e||e.call()},2)},this)},a([f(cc.Prefab)],e.prototype,"PrefabReward",void 0),a([f(sp.Skeleton)],e.prototype,"Box",void 0),a([f(cc.Node)],e.prototype,"Coin",void 0),a([f(cc.Node)],e.prototype,"Filp",void 0),a([f(cc.Node)],e.prototype,"Turn",void 0),a([f(cc.Node)],e.prototype,"Find",void 0),a([f(cc.Node)],e.prototype,"EffectContent",void 0),a([f(cc.Node)],e.prototype,"ButtonADGet",void 0),a([f(cc.Node)],e.prototype,"ButtonGet",void 0),a([h],e)}(r.default);n.default=m,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../Datas/EventName":"EventName","../UserData":"UserData"}],UIGameChapterUnlock:[function(t,e,n){"use strict";cc._RF.push(e,"e07e5JU9DVP/qQPV+e9IyFW","UIGameChapterUnlock");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../../../Framework/core/manager/UIManager"),u=t("../../Datas/EventName"),p=t("../../Datas/GameDataManager"),d=t("../../GameConfig"),h=t("../SpriteUtils"),f=t("../UserData"),m=cc._decorator,g=m.ccclass,y=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SprChapter=null,e.LabChapter=null,e.LabStarCount=null,e.Layout1=null,e.Layout2=null,e.PreLandmark=null,e.level=null,e.backIdx=null,e.chapter=null,e.laba=null,e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),this.openEffect="ChapterShow",this.closeEffect="ChapterHide",t.prototype.open.call(this,e,n),c.default.instance.chapterUnlock(),this.level=n.idx,this.backIdx=n.backIdx,this.chapter=n.chapter,l.default.instance.enableOperation(),this.LabChapter.string=this.chapter.chapter_name,h.default.instance.getSpriteAltas("Textures/Plist/Location",function(t){i.SprChapter.spriteFrame=t.getSpriteFrame(i.chapter.chapter_name)},this);var o=f.default.instance.getChapterStarCount(parseInt(this.chapter.start_lv),parseInt(this.chapter.end_lv));this.LabStarCount.string=o+"/"+this.chapter.contain_lv,this.Layout1.removeAllChildren(),this.Layout2.removeAllChildren();for(var a=p.default.instance.getLandmarks(parseInt(this.chapter.start_lv),parseInt(this.chapter.end_lv)),r=function(t){var e=a[t],n=cc.instantiate(m.PreLandmark);n.parent=t<4?m.Layout1:m.Layout2,h.default.instance.getSpriteAltas("Textures/Plist/Landmarks",function(t){n.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(e.landmark_name)},m),n.scale=0,cc.tween(n).delay(2+.04*t).to(.15,{scale:1},{easing:"backOut"}).start()},m=this,g=0;g<a.length;g++)r(g);this.closeCallBack=function(){l.default.instance.disableOperation();var t=p.default.instance.getInChapterDataByLevel(i.level);if(t){var e=p.default.instance.getChapterLevelIndexsData();if(e[parseInt(t.end_lv)]){var n=e[parseInt(t.end_lv)];s.default.instance.emit(u.default.MapScrollTo,n+1,d.default.MapMoveToChapterTime,.2),i.scheduleOnce(function(){s.default.instance.emit(u.default.MapChapterFinish,n+1,i.backIdx),i.closeCallBack=null},d.default.MapMoveToChapterTime)}}else s.default.instance.emit(u.default.MapProgressAnimation,i.backIdx,"unlockFinishFirst",0,1)}},e.prototype.onClose=function(){c.default.instance.btnClick(),this.close()},e.prototype.playLaba=function(){this.laba.node.active=!0,this.laba.setAnimation(0,"animation",!1)},a([y(cc.Sprite)],e.prototype,"SprChapter",void 0),a([y(cc.Label)],e.prototype,"LabChapter",void 0),a([y(cc.Label)],e.prototype,"LabStarCount",void 0),a([y(cc.Node)],e.prototype,"Layout1",void 0),a([y(cc.Node)],e.prototype,"Layout2",void 0),a([y(cc.Prefab)],e.prototype,"PreLandmark",void 0),a([y(sp.Skeleton)],e.prototype,"laba",void 0),a([g],e)}(r.default);n.default=v,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../GameConfig":"GameConfig","../SpriteUtils":"SpriteUtils","../UserData":"UserData"}],UIGameDailySign:[function(t,e,n){"use strict";cc._RF.push(e,"66414VCBORJD51zLMVbRN9f","UIGameDailySign");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../../Framework/core/util/I18N"),p=t("../../Datas/GameDataManager"),d=t("../../Datas/PopupKey"),h=t("../SpriteUtils"),f=t("../UserData"),m=cc._decorator,g=m.ccclass,y=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Days=[],e.todayIndex=0,e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n);for(var i=p.default.instance.getSignDatas(),o=f.default.instance.getData("SignCount")||0,a=0;a<this.Days.length;a++){var r=this.Days[a],s=a+1;if(r.getChildByName("Normal").getChildByName("Label").getComponent(cc.Label).string=u.default.get("check_day",s),r.getChildByName("Current").getChildByName("Label").getComponent(cc.Label).string=u.default.get("check_day",s),r.getChildByName("Current").active=!1,r.getChildByName("Finish").active=!1,a<6)switch(r.getChildByName("icon").scale=.25,r.getChildByName("Label").getComponent(cc.Label).string="x"+i[a].reward_number1,i[a].reward1){case"1":h.default.instance.setSpriteFrame(r.getChildByName("icon").getComponent(cc.Sprite),"Textures/Common/Icon/golds"),r.getChildByName("icon").scale=.8;break;case"2":h.default.instance.setSpriteFrame(r.getChildByName("icon").getComponent(cc.Sprite),"Textures/Common/Icon/flipB");break;case"3":h.default.instance.setSpriteFrame(r.getChildByName("icon").getComponent(cc.Sprite),"Textures/Common/Icon/turnB");break;case"4":h.default.instance.setSpriteFrame(r.getChildByName("icon").getComponent(cc.Sprite),"Textures/Common/Icon/findB");break;case"5":h.default.instance.setSpriteFrame(r.getChildByName("icon").getComponent(cc.Sprite),"Textures/Common/Icon/magicB")}o==a?r.getChildByName("Current").active=!0:o>a&&(r.getChildByName("Finish").active=!0)}},e.prototype.getReward=function(t){void 0===t&&(t=!1),this.close(),f.default.instance.setData("Sign",!0);for(var e=p.default.instance.getSignDatas(),n=f.default.instance.getData("SignCount")||0,i=e[n],o={callback:null},a=1;a<=3;a++)switch(i["reward"+a]){case"1":var r=t?2*parseInt(i["reward_number"+a]):parseInt(i["reward_number"+a]);o.Coin=r,f.default.instance.Coin+=r;break;case"2":var s=t?2*parseInt(i["reward_number"+a]):parseInt(i["reward_number"+a]);o.Filp=s,f.default.instance.Filp+=s;break;case"3":var l=t?2*parseInt(i["reward_number"+a]):parseInt(i["reward_number"+a]);o.Turn=l,f.default.instance.Turn+=l;break;case"4":var u=t?2*parseInt(i["reward_number"+a]):parseInt(i["reward_number"+a]);o.Find=u,f.default.instance.Find+=u}c.default.addPop(d.default.UIGameItemGet,o),n=n>=6?0:n+1,f.default.instance.setData("SignCount",n)},e.prototype.onGetADReward=function(){var t=this;l.default.instance.btnClick(),s.default.showReward(function(){t.getReward(!0)},this)},e.prototype.onGetReward=function(){l.default.instance.btnClick(),this.getReward(!1)},a([y(cc.Node)],e.prototype,"Days",void 0),a([g],e)}(r.default);n.default=v,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/I18N":"I18N","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../SpriteUtils":"SpriteUtils","../UserData":"UserData"}],UIGameFail:[function(t,e,n){"use strict";cc._RF.push(e,"f8c6571vk5AEK5/ZOMRgdWW","UIGameFail");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../GameCore"),u=t("../UserData"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),c.default.instance.gameFail()},e.prototype.onGameRetry=function(){c.default.instance.btnClick(),this.close(),l.default.instance.gameStart(l.default.instance.curLevelIndex)},e.prototype.onGameADPass=function(){var t=this;c.default.instance.btnClick(),s.default.showReward(function(){t.close(),l.default.instance.levelStar=1,u.default.instance.setStarByLevel(l.default.instance.curLevelIndex,l.default.instance.levelStar),u.default.instance.Level=Math.max(u.default.instance.Level,l.default.instance.curLevelIndex+1),l.default.instance.gameOver(!0)},this)},a([d],e)}(r.default));n.default=h,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/SoundManager":"SoundManager","../GameCore":"GameCore","../UserData":"UserData"}],UIGameFreeCoin:[function(t,e,n){"use strict";cc._RF.push(e,"0c8e2V9QxhGA63G+eQyS0wn","UIGameFreeCoin");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/ADManager"),l=t("../../../Framework/core/manager/PopUpManager"),u=t("../../../Framework/core/manager/SoundManager"),p=t("../../../Framework/core/util/I18N"),d=t("../../Datas/EventName"),h=t("../../Datas/PopupKey"),f=t("../../GameConfig"),m=t("../UserData"),g=cc._decorator,y=g.ccclass,v=g.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Coin=null,e.LabCoinCount=null,e.LabCoinTime=null,e.ButtonADGet=null,e.ADGray=null,e.inAnimation=!1,e.outlineColor=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.outlineColor=this.LabCoinTime.getComponent(cc.LabelOutline).color},e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.inAnimation=!1,this.LabCoinCount.string="x"+f.default.ADFreeCoinCoinCount,this.updateInfo()},e.prototype.updateInfo=function(){var t=m.default.instance.getData("FreeCoinCount")||0;this.LabCoinTime.string=p.default.get("free_coins_watch ads")+" ("+(f.default.ADFreeCoinCoinMaxTime-t)+"/"+f.default.ADFreeCoinCoinMaxTime+")",this.ButtonADGet.interactable=t<f.default.ADFreeCoinCoinMaxTime,this.ADGray.active=t>=f.default.ADFreeCoinCoinMaxTime,this.LabCoinTime.getComponent(cc.LabelOutline).color=t<f.default.ADFreeCoinCoinMaxTime?this.outlineColor:cc.Color.GRAY},e.prototype.onADGet=function(){var t=this;u.default.instance.btnClick(),this.inAnimation||(m.default.instance.getData("FreeCoinCount")||0)<f.default.ADFreeCoinCoinMaxTime&&c.default.showReward(function(){var e=m.default.instance.getData("FreeCoinCount")||0;m.default.instance.setData("FreeCoinCount",e+1),t.inAnimation=!0;var n={Coin:{}};n.Coin.start=m.default.instance.Coin,n.Coin.end=m.default.instance.Coin+f.default.ADFreeCoinCoinCount,n.Coin.position=t.Coin.parent.convertToWorldSpaceAR(t.Coin.position),n.callback=function(){t.close()},m.default.instance.Coin+=f.default.ADFreeCoinCoinCount,l.default.addPop(h.default.UIGameOverGoldGet,n),t.updateInfo(),s.default.instance.emit(d.default.UpdateCoin)},this)},a([v(cc.Node)],e.prototype,"Coin",void 0),a([v(cc.Label)],e.prototype,"LabCoinCount",void 0),a([v(cc.Label)],e.prototype,"LabCoinTime",void 0),a([v(cc.Button)],e.prototype,"ButtonADGet",void 0),a([v(cc.Node)],e.prototype,"ADGray",void 0),a([y],e)}(r.default);n.default=_,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../UserData":"UserData"}],UIGameGuideOver:[function(t,e,n){"use strict";cc._RF.push(e,"77e433f701Glbul4VdJF9ye","UIGameGuideOver");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/PopUpManager"),c=t("../../Datas/PopupKey"),l=t("../../GameConfig"),u=t("../GameCore"),p=t("../UserData"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Mask=null,e.LabTip=null,e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.Mask.opacity=0,cc.tween(this.Mask).to(.5,{opacity:150}).delay(1).to(.4,{opacity:0}).start(),this.LabTip.node.opacity=255,this.LabTip.node.scale=0,this.LabTip.node.y=-130,cc.tween(this.LabTip.node).to(.5,{y:50,scale:1.1},{easing:"cubicOut"}).to(.5,{y:0,scale:1},{easing:"cubicOut"}).delay(1).to(.4,{opacity:0}).call(function(){i.close(),u.default.instance.isGaming=!1,u.default.instance.isRuning=!1,u.default.instance.isTiming=!1,p.default.instance.Level=Math.min(l.default.LevelMax,Math.max(p.default.instance.Level,u.default.instance.curLevelIndex+1)),p.default.instance.Level==u.default.instance.curLevelIndex+1?u.default.instance.gameStart(p.default.instance.Level):s.default.addPop(c.default.UIGameMenu)}).start()},a([f(cc.Node)],e.prototype,"Mask",void 0),a([f(cc.Label)],e.prototype,"LabTip",void 0),a([h],e)}(r.default);n.default=m,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../GameCore":"GameCore","../UserData":"UserData"}],UIGameItemGet:[function(t,e,n){"use strict";cc._RF.push(e,"475afFoyBJA176FhE+jqgH2","UIGameItemGet");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../Datas/EventName"),l=t("../UserData"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonGet=null,e.PrefabReward=null,e.Coin=null,e.Filp=null,e.Turn=null,e.Find=null,e.EffectContent=null,e.getConfig=null,e.rewardCount=0,e.widthInterval=140,e.coinItem=null,e.filpItem=null,e.turnItem=null,e.findItem=null,e.startPos=cc.v3(0,140),e.delay=0,e.endScale=1.5,e.endY=20,e.jumpHeight=230,e.callbacks=[],e.callback=null,e.inAnimation=!1,e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.coinItem=null,this.filpItem=null,this.turnItem=null,this.findItem=null,this.Coin.active=!1,this.Filp.active=!1,this.Turn.active=!1,this.Find.active=!1,this.ButtonGet.active=!0,this.inAnimation=!0,this.callbacks=[],this.getConfig=n,this.rewardCount=Object.keys(this.getConfig).length;var o=-(this.rewardCount-2)/2*this.widthInterval;this.EffectContent.removeAllChildren();var a=0;this.callback=n.callback,this.getConfig.Coin&&(this.coinItem=cc.instantiate(this.PrefabReward),this.coinItem.getChildByName("coin").active=!0,this.coinItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Coin,this.coinItem.parent=this.EffectContent,this.coinItem.position=this.startPos,this.coinItem.scale=0,cc.tween(this.coinItem).parallel(cc.tween().to(.5,{scale:this.endScale}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).call(function(){i.inAnimation=!1}).start(),a++,this.Coin.active=!0,this.Coin.opacity=0,this.Coin.getComponentInChildren(cc.Label).string=(l.default.instance.Coin-this.getConfig.Coin).toString(),this.callbacks.push(function(){i.Coin.opacity=255,cc.tween(i.coinItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Coin.convertToWorldSpaceAR(i.Coin.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Coin.getComponentInChildren(cc.Label).string=l.default.instance.Coin.toString(),s.default.instance.emit(c.default.UpdateCoin)}).removeSelf().start()})),this.getConfig.Filp&&(this.filpItem=cc.instantiate(this.PrefabReward),this.filpItem.getChildByName("flip").active=!0,this.filpItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Filp,this.filpItem.parent=this.EffectContent,this.filpItem.position=this.startPos,this.filpItem.scale=0,cc.tween(this.filpItem).parallel(cc.tween().to(.5,{scale:this.endScale}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).call(function(){i.inAnimation=!1}).start(),a++,this.Filp.active=!0,this.Filp.opacity=0,this.Filp.getComponentInChildren(cc.Label).string=(l.default.instance.Filp-this.getConfig.Filp).toString(),this.callbacks.push(function(){i.Filp.opacity=255,cc.tween(i.filpItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Filp.convertToWorldSpaceAR(i.Filp.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Filp.getComponentInChildren(cc.Label).string=l.default.instance.Filp.toString()}).removeSelf().start()})),this.getConfig.Turn&&(this.turnItem=cc.instantiate(this.PrefabReward),this.turnItem.getChildByName("turn").active=!0,this.turnItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Turn,this.turnItem.parent=this.EffectContent,this.turnItem.position=this.startPos,this.turnItem.scale=0,cc.tween(this.turnItem).parallel(cc.tween().to(.5,{scale:this.endScale}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).call(function(){i.inAnimation=!1}).start(),a++,this.Turn.active=!0,this.Turn.opacity=0,this.Turn.getComponentInChildren(cc.Label).string=(l.default.instance.Turn-this.getConfig.Turn).toString(),this.callbacks.push(function(){i.Turn.opacity=255,cc.tween(i.turnItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Turn.convertToWorldSpaceAR(i.Turn.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Turn.getComponentInChildren(cc.Label).string=l.default.instance.Turn.toString()}).removeSelf().start()})),this.getConfig.Find&&(this.findItem=cc.instantiate(this.PrefabReward),this.findItem.getChildByName("find").active=!0,this.findItem.getComponentInChildren(cc.Label).string="x"+this.getConfig.Find,this.findItem.parent=this.EffectContent,this.findItem.position=this.startPos,this.findItem.scale=0,cc.tween(this.findItem).parallel(cc.tween().to(.5,{scale:this.endScale}),cc.jumpTo(.5,cc.v2(o+this.widthInterval*a,this.endY),this.jumpHeight,1)).call(function(){i.inAnimation=!1}).start(),a++,this.Find.active=!0,this.Find.opacity=0,this.Find.getComponentInChildren(cc.Label).string=(l.default.instance.Find-this.getConfig.Find).toString(),this.callbacks.push(function(){i.Find.opacity=255,cc.tween(i.findItem).to(.8,{scale:.3,position:i.EffectContent.convertToNodeSpaceAR(i.Find.convertToWorldSpaceAR(i.Find.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){i.Find.getComponentInChildren(cc.Label).string=l.default.instance.Find.toString()}).removeSelf().start()}))},e.prototype.onGet=function(){var t=this;if(!this.inAnimation){for(var e=0;e<this.callbacks.length;e++)this.callbacks[e].call();this.ButtonGet.active=!1,this.scheduleOnce(function(){var e;t.close(),null===(e=t.callback)||void 0===e||e.call()},1.5)}},a([d(cc.Node)],e.prototype,"ButtonGet",void 0),a([d(cc.Prefab)],e.prototype,"PrefabReward",void 0),a([d(cc.Node)],e.prototype,"Coin",void 0),a([d(cc.Node)],e.prototype,"Filp",void 0),a([d(cc.Node)],e.prototype,"Turn",void 0),a([d(cc.Node)],e.prototype,"Find",void 0),a([d(cc.Node)],e.prototype,"EffectContent",void 0),a([p],e)}(r.default);n.default=h,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../Datas/EventName":"EventName","../UserData":"UserData"}],UIGameLandmarkUnlock:[function(t,e,n){"use strict";cc._RF.push(e,"31730aUGytAcasKUfzzxgwl","UIGameLandmarkUnlock");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../../../Framework/core/manager/UIManager"),u=t("../../Datas/EventName"),p=t("../SpriteUtils"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SprLandmark=null,e.LabLandmark=null,e.chapterData=null,e.idx=null,e}return o(e,t),e.prototype.open=function(e,n){var i=this;if(void 0===n&&(n=null),this.openEffect="LandmarkShow",this.closeEffect="LandmarkHide",t.prototype.open.call(this,e,n),this.chapterData=n.chapterData,this.idx=n.idx,l.default.instance.enableOperation(),this.chapterData.landmark){var o=this.chapterData.landmark.landmark_name;this.LabLandmark.string=o,p.default.instance.getSpriteAltas("Textures/Plist/Landmarks",function(t){i.SprLandmark.spriteFrame=t.getSpriteFrame(o)},this)}this.closeCallBack=function(){l.default.instance.disableOperation(),s.default.instance.emit(u.default.MapLandmarkUnlockFinish,parseInt(i.chapterData.landmark.condition_global)),i.closeCallBack=null},c.default.instance.landmarkUnlock()},e.prototype.onClose=function(){c.default.instance.btnClick(),this.close()},a([f(cc.Sprite)],e.prototype,"SprLandmark",void 0),a([f(cc.Label)],e.prototype,"LabLandmark",void 0),a([h],e)}(r.default);n.default=m,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../Datas/EventName":"EventName","../SpriteUtils":"SpriteUtils"}],UIGameLevelComplete:[function(t,e,n){"use strict";cc._RF.push(e,"55444XkDWBJqYIcglJNu4pa","UIGameLevelComplete");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../../Framework/core/util/Utils"),p=t("../../Datas/PopupKey"),d=t("../../GameConfig"),h=t("../UserData"),f=cc._decorator,m=f.ccclass,g=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelComplete=null,e.box=null,e.ContentProgress=null,e.Fireworks=[],e.LabProgress=null,e.Progress=null,e.rewards=["Filp","Turn","Find"],e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.ContentProgress.scale=0,l.default.instance.BoxUpgrade(),this.levelComplete.setAnimation(0,"0.6_end",!1),this.scheduleOnce(function(){cc.tween(i.ContentProgress).delay(0).to(1,{scale:1},{easing:"backOut"}).start();var t=h.default.instance.getData("boxPro")||0;i.Progress.progress=t/d.default.GetBoxMaxLevel,i.LabProgress.string=t+"/"+d.default.GetBoxMaxLevel;var e=++t>=d.default.GetBoxMaxLevel?0:t;h.default.instance.setData("boxPro",e),0==t&&(h.default.instance.Coin+=100);var o=t/d.default.GetBoxMaxLevel;cc.tween(i.Progress).delay(1).to(.5,{progress:o}).call(function(){i.LabProgress.string=t+"/"+d.default.GetBoxMaxLevel}).call(function(){o>=1?cc.tween(i.box).to(.3,{scale:1}).to(.3,{scale:.7}).to(.3,{scale:1}).to(.3,{scale:.7}).delay(.3).call(function(){var t={Coin:100};h.default.instance.Coin+=100;var e=u.default.randomIntMulti(0,2,2);t[i.rewards[e[0]]]=1,t[i.rewards[e[1]]]=1,i.onAddReward(i.rewards[e[0]]),i.onAddReward(i.rewards[e[1]]),t.callback=function(){s.default.showInterstitial(),c.default.addPop(p.default.UIGameOver,n)},i.close(),c.default.addPop(p.default.UIGameBoxGet,t)}).start():i.scheduleOnce(function(){i.close(),s.default.showInterstitial(),c.default.addPop(p.default.UIGameOver,n)},.5)}).start()},1.8)},e.prototype.onAddReward=function(t){switch(t){case"Filp":h.default.instance.Filp++;break;case"Turn":h.default.instance.Turn++;break;case"Find":h.default.instance.Find++}},a([g(sp.Skeleton)],e.prototype,"levelComplete",void 0),a([g(cc.Node)],e.prototype,"box",void 0),a([g(cc.Node)],e.prototype,"ContentProgress",void 0),a([g(cc.ParticleSystem)],e.prototype,"Fireworks",void 0),a([g(cc.Label)],e.prototype,"LabProgress",void 0),a([g(cc.ProgressBar)],e.prototype,"Progress",void 0),a([m],e)}(r.default);n.default=y,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/Utils":"Utils","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../UserData":"UserData"}],UIGameMap:[function(t,e,n){"use strict";cc._RF.push(e,"53812HVoTxLd4AuEp1bRXWw","UIGameMap");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/components/listview/List"),s=t("../../../Framework/core/display/BaseWindow"),c=t("../../../Framework/core/event/EventManager"),l=t("../../../Framework/core/manager/PopUpManager"),u=t("../../../Framework/core/manager/SoundManager"),p=t("../../../Framework/core/manager/UIManager"),d=t("../../../Framework/core/util/I18N"),h=t("../../Datas/EventName"),f=t("../../Datas/GameDataManager"),m=t("../GameCore"),g=t("../Items/ItemLevelMap"),y=t("../SpriteUtils"),v=t("../UserData"),_=cc._decorator,C=_.ccclass,b=_.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ListView=null,e.LabLevel=null,e.BntLevel=null,e.landMarkAtlas=null,e.locationAtlas=null,e.showLevel=0,e.isUnlockChapter=!1,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),c.default.instance.on(h.default.MapScrollTo,this.MapScrollTo,this),c.default.instance.on(h.default.MapSetShowLevel,this.MapSetShowLevel,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),c.default.instance.off(h.default.MapScrollTo,this.MapScrollTo,this),c.default.instance.off(h.default.MapSetShowLevel,this.MapSetShowLevel,this)},e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n);var o=n;this.showLevel=o||v.default.instance.Level;var a=f.default.instance.getChapterData();this.ListView.numItems=a.length,d.default.setLocalText(this.LabLevel,"main_level",v.default.instance.Level.toString()),this.scrollCurLevel(),p.default.instance.loadedTransition(function(){null!=o&&(p.default.instance.disableOperation(),c.default.instance.emit(h.default.MapAnimation,o),cc.tween(i.BntLevel).by(.5,{y:-260}).start())},this)},e.prototype.scrollCurLevel=function(t){void 0===t&&(t=1);var e=f.default.instance.getChapterLevelIndexsData(),n=f.default.instance.getChapterData(),i=0;e[this.showLevel]&&(i=e[this.showLevel]),n[i].start?this.ListView.scrollTo(i,t,0):this.ListView.scrollTo(i,t,.2)},e.prototype.MapSetShowLevel=function(t){this.showLevel=t},e.prototype.MapScrollTo=function(t,e,n,i){this.ListView.scrollTo(t,e,n),i&&this.scheduleOnce(function(){null==i||i.call()},e)},e.prototype.onListRender=function(t,e){t.x=this.ListView.node.width/2,t.getComponent(g.default).setInfo(e,this)},e.prototype.backLevelButton=function(t){cc.tween(this.BntLevel).by(.5,{y:260}).call(function(){p.default.instance.enableOperation(),null==t||t.call()}).start()},e.prototype.setLandMark=function(t,e){var n=this;this.landMarkAtlas?t.spriteFrame=this.landMarkAtlas.getSpriteFrame(e):y.default.instance.getSpriteAltas("Textures/Plist/Landmarks",function(i){n.landMarkAtlas=i,t.spriteFrame=n.landMarkAtlas.getSpriteFrame(e)},this)},e.prototype.setLocation=function(t,e){var n=this;this.locationAtlas?t.spriteFrame=this.locationAtlas.getSpriteFrame(e):y.default.instance.getSpriteAltas("Textures/Plist/Location",function(i){n.locationAtlas=i,t.spriteFrame=n.locationAtlas.getSpriteFrame(e)},this)},e.prototype.onPlayGame=function(){u.default.instance.btnClick(),p.default.instance.startTransition(function(){l.default.removeAllPop(),m.default.instance.gameStart(v.default.instance.Level)},this)},e.prototype.onPositioningLevel=function(){u.default.instance.btnClick(),this.scrollCurLevel(.2)},a([b(r.default)],e.prototype,"ListView",void 0),a([b(cc.Label)],e.prototype,"LabLevel",void 0),a([b(cc.Node)],e.prototype,"BntLevel",void 0),a([C],e)}(s.default);n.default=T,cc._RF.pop()},{"../../../Framework/components/listview/List":"List","../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../GameCore":"GameCore","../Items/ItemLevelMap":"ItemLevelMap","../SpriteUtils":"SpriteUtils","../UserData":"UserData"}],UIGameMenu:[function(t,e,n){"use strict";cc._RF.push(e,"38410C659RPMqKP2I4Efl0G","UIGameMenu");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/components/listview/List"),s=t("../../../Framework/core/display/BaseWindow"),c=t("../../../Framework/core/event/EventManager"),l=t("../../../Framework/core/manager/PopUpManager"),u=t("../../../Framework/core/manager/SoundManager"),p=t("../../../Framework/core/manager/UIManager"),d=t("../../../Framework/core/util/I18N"),h=t("../../Datas/EventName"),f=t("../../Datas/GameDataManager"),m=t("../../Datas/PopupKey"),g=t("../../GameConfig"),y=t("../GameCore"),v=t("../Items/ItemMilestone"),_=t("../Items/ItemStore"),C=t("../SpriteUtils"),b=t("../UserData"),T=cc._decorator,S=T.ccclass,w=T.property,D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TouchPanel=null,e.Store=null,e.Main=null,e.Milestone=null,e.LabLevel=null,e.LabStoreCoin=null,e.LabUnlockMilestone=null,e.LabMilestoneHelpTip=null,e.ChapterSpr=null,e.LabChapterName=null,e.LabCoin=null,e.BtnPlay=null,e.BtnMap=null,e.BtnAllMap=null,e.BtnUp=null,e.BtnDown=null,e.LabLandmarkProgress=null,e.ProgressLandmark=null,e.Content=null,e.pages=[],e.UnlimitedTime=null,e.MilestoneHelp=null,e.MilestoneMask=null,e.MilestoneListView=null,e.StoreListView=null,e.locationAtlas=null,e.StarsCount=0,e.isShowBtnUp=!1,e.isShowBtnDown=!1,e.moveStartX=0,e.moveOffset=300,e.curIndex=1,e.movePositions=[],e.touchID=-1,e.moveContentTween=null,e.showMilestoneHelpTween=null,e.Select=null,e.ButtonShop=null,e.ButtonHome=null,e.ButtonMilestone=null,e.BottomNavigation=null,e.LineLeft=null,e.LineRight=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),cc.tween(this.BtnPlay).sequence(cc.tween().to(.25,{scale:.9}),cc.tween().to(.25,{scale:1}),cc.tween().to(.25,{scale:.9}),cc.tween().to(.25,{scale:1}),cc.tween().delay(2)).repeatForever().start(),this.TouchPanel.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.TouchPanel.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoving,this),this.TouchPanel.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.TouchPanel._touchListener.setSwallowTouches(!1),c.default.instance.on(h.default.UpdateMilestoneGetCount,this.updateMilestoneGetCount,this),c.default.instance.on(h.default.UpdateCoin,this.updateCoin,this),this.Store.width=cc.view.getCanvasSize().width/cc.view.getScaleX(),this.Store.x=-cc.view.getCanvasSize().width/cc.view.getScaleX(),this.Main.width=cc.view.getCanvasSize().width/cc.view.getScaleX(),this.Milestone.width=cc.view.getCanvasSize().width/cc.view.getScaleX(),this.Milestone.x=cc.view.getCanvasSize().width/cc.view.getScaleX();for(var e=this.node.getComponentsInChildren(cc.Widget),n=0;n<e.length;n++)e[n].updateAlignment()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.TouchPanel.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.TouchPanel.off(cc.Node.EventType.TOUCH_MOVE,this.touchMoving,this),this.TouchPanel.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),c.default.instance.off(h.default.UpdateMilestoneGetCount,this.updateMilestoneGetCount,this),c.default.instance.off(h.default.UpdateCoin,this.updateCoin,this)},e.prototype.touchStart=function(t){this.touchID>=0||(this.touchID=t.getID(),this.moveStartX=t.getLocationX())},e.prototype.touchMoving=function(t){this.touchID==t.getID()&&(this.moveStartX-t.getLocationX()>this.moveOffset?this.moveLeft():this.moveStartX-t.getLocationX()<-this.moveOffset&&this.moveRight())},e.prototype.touchEnd=function(t){this.touchID==t.getID()&&(this.touchID=-1)},e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),u.default.instance.playBgSound(),this.movePositions=[-this.node.width,0,this.node.width],this.LabCoin.string=b.default.instance.Coin.toString(),this.BtnMap.active=!1,this.BtnAllMap.active=!1,this.MilestoneHelp.active=!0,this.MilestoneHelp.opacity=0,this.updateCoin(),d.default.setLocalText(this.LabLevel,"main_level",b.default.instance.Level.toString()),d.default.setLocalText(this.LabUnlockMilestone,"milestone_unlock_lv",g.default.MilestoneUnlockLevel.toString()),d.default.setLocalTextRichText(this.LabMilestoneHelpTip,"milestone_help_tip","<img src='star'/>");var i=f.default.instance.getInChapterDataByLevel(b.default.instance.Level);if(i){this.setLocation(this.ChapterSpr,i.chapter_name);var o=f.default.instance.getCurLandMarkData(b.default.instance.Level);if(o){this.BtnMap.active=!0,this.LabChapterName.string=o.landmark_name;var a=f.default.instance.getLandmarkProgress(),r=a[0],s=a[1];this.LabLandmarkProgress.string=r+"/"+s,this.ProgressLandmark.progress=r/s}}else this.BtnAllMap.active=!0;this.curIndex=1,this.toPage(),this.bottomUpdate(),this.StarsCount=b.default.instance.getAllStar(),this.ButtonMilestone.getChildByName("icon").getChildByName("lock").active=b.default.instance.Level<g.default.MilestoneUnlockLevel,this.ButtonMilestone.getChildByName("icon").getChildByName("unlock").active=!(b.default.instance.Level<g.default.MilestoneUnlockLevel),this.ButtonMilestone.getChildByName("icon").getChildByName("lock").getComponentInChildren(cc.Label).string="Lv."+g.default.MilestoneUnlockLevel,this.MilestoneMask.active=b.default.instance.Level<g.default.MilestoneUnlockLevel,this.ButtonMilestone.getChildByName("icon").getChildByName("unlock").getComponentInChildren(cc.ProgressBar).progress=f.default.instance.getMilestoneCurProgress(this.StarsCount),this.updateMilestoneGetCount(),this.initMilestoneListView(),this.initStoreListView(),this.showDailySign(),b.default.instance.Level>=g.default.CountDownStartLevel?(this.UnlimitedTime.active=!0,this.UnlimitedTime.x=-cc.view.getCanvasSize().width/cc.view.getScaleX()/2-140,cc.tween(this.UnlimitedTime).by(.8,{x:140},{easing:"quartOut"}).start()):this.UnlimitedTime.active=!1},e.prototype.updateMilestoneGetCount=function(){var t=f.default.instance.getCurMilestoneIndex(this.StarsCount),e=b.default.instance.getMilestoneUnGetRewardCount(t);this.ButtonMilestone.getChildByName("icon").getChildByName("unlock").getComponentInChildren(cc.Label).string=e.toString(),this.ButtonMilestone.getChildByName("icon").getChildByName("unlock").getChildByName("RedPoint").active=0!=e},e.prototype.updateCoin=function(){this.LabStoreCoin.string=b.default.instance.Coin.toString()},e.prototype.setLocation=function(t,e){var n=this;this.locationAtlas?t.spriteFrame=this.locationAtlas.getSpriteFrame(e):C.default.instance.getSpriteAltas("Textures/Plist/Location",function(i){n.locationAtlas=i,t.spriteFrame=n.locationAtlas.getSpriteFrame(e)},this)},e.prototype.showDailySign=function(){b.default.instance.getData("Sign")||l.default.addPop(m.default.UIGameDailySign)},e.prototype.onGotoMap=function(){u.default.instance.btnClick(),p.default.instance.startTransition(function(){l.default.addPop(m.default.UIGameMap)},this)},e.prototype.onPlayGame=function(){var t=this;u.default.instance.btnClick(),p.default.instance.startTransition(function(){t.close(),y.default.instance.gameStart(b.default.instance.Level)},this)},e.prototype.onTurnTable=function(){u.default.instance.btnClick(),l.default.addPop(m.default.UIGameTurnTable)},e.prototype.onSetting=function(){u.default.instance.btnClick(),l.default.addPop(m.default.UIGameSetting)},e.prototype.onAddCoin=function(){u.default.instance.btnClick(),l.default.addPop(m.default.UIGameFreeCoin),this.moveRight()},e.prototype.onFreeCoin=function(){u.default.instance.btnClick(),l.default.addPop(m.default.UIGameFreeCoin)},e.prototype.onUnlimitedTime=function(){u.default.instance.btnClick(),l.default.addPop(m.default.UIGameUnlimitedTime,b.default.instance.Level)},e.prototype.initStoreListView=function(){var t=f.default.instance.getStoreData();this.StoreListView.numItems=t.length},e.prototype.onStoreListViewRender=function(t,e){t.x=this.StoreListView.node.width/2,t.getComponent(_.default).setInfo(e,this)},e.prototype.initMilestoneListView=function(){var t=f.default.instance.getMilestoneData();this.MilestoneListView.numItems=t.length+2,this.positionMilestone(this.StarsCount)},e.prototype.onMilestoneListViewRender=function(t,e){t.x=this.MilestoneListView.node.width/2,t.getComponent(v.default).setInfo(e,this);var n=f.default.instance.getCurMilestoneIndex(this.StarsCount);this.BtnDown.active=n+this.MilestoneListView.displayItemNum-2<e,this.BtnUp.active=n-this.MilestoneListView.displayItemNum+2>e},e.prototype.onPositioningMilestone=function(){u.default.instance.btnClick(),this.positionMilestone(this.StarsCount)},e.prototype.positionMilestone=function(t){var e=f.default.instance.getCurMilestoneIndex(t);this.MilestoneListView.scrollTo(e,.5,.3)},e.prototype.moveLeft=function(){!this.moveContentTween&&this.curIndex>0&&(this.curIndex--,this.toPage(),this.bottomUpdate())},e.prototype.moveRight=function(){!this.moveContentTween&&this.curIndex<2&&(this.curIndex++,this.toPage(),this.bottomUpdate())},e.prototype.toPage=function(){var t=this;this.moveContentTween=cc.tween(this.Content).to(.2,{x:this.movePositions[this.curIndex]}).call(function(){t.moveContentTween=null}).start()},e.prototype.onMilestoneHelp=function(){var t=this;this.showMilestoneHelpTween||(this.showMilestoneHelpTween=cc.tween(this.MilestoneHelp).to(.3,{opacity:255}).delay(2).to(.2,{opacity:0}).call(function(){t.showMilestoneHelpTween=null}).start())},e.prototype.onMovePage=function(t,e){this.curIndex=parseInt(e),this.toPage(),this.bottomUpdate()},e.prototype.bottomUpdate=function(){var t=cc.view.getCanvasSize().width/cc.view.getScaleX(),e=7*t/24,n=10*t/24;switch(this.BottomNavigation.width=n,this.curIndex){case 0:this.ButtonShop.width=e,this.ButtonHome.width=e,this.ButtonMilestone.width=n,this.ButtonShop.x=-(e/2+n/2),this.ButtonHome.x=-(t/2-1.5*e),this.ButtonMilestone.x=e,this.LineLeft.x=-n/2,this.LineRight.x=2*e-t/2,this.ButtonShop.getChildByName("icon").y=0,this.ButtonHome.getChildByName("icon").y=0,this.ButtonMilestone.getChildByName("icon").y=35,this.ButtonShop.getChildByName("Label").active=!1,this.ButtonHome.getChildByName("Label").active=!1,this.ButtonMilestone.getChildByName("Label").active=!0,cc.Tween.stopAllByTarget(this.Select),cc.tween(this.Select).to(.1,{x:e}).start();break;case 1:this.ButtonShop.width=e,this.ButtonHome.width=n,this.ButtonMilestone.width=e,this.ButtonShop.x=-(e/2+n/2),this.ButtonHome.x=0,this.ButtonMilestone.x=e/2+n/2,this.LineLeft.x=-n/2,this.LineRight.x=n/2,this.ButtonShop.getChildByName("icon").y=0,this.ButtonHome.getChildByName("icon").y=35,this.ButtonMilestone.getChildByName("icon").y=0,this.ButtonShop.getChildByName("Label").active=!1,this.ButtonHome.getChildByName("Label").active=!0,this.ButtonMilestone.getChildByName("Label").active=!1,cc.Tween.stopAllByTarget(this.Select),cc.tween(this.Select).to(.1,{x:0}).start();break;case 2:this.ButtonShop.width=n,this.ButtonHome.width=e,this.ButtonMilestone.width=e,this.ButtonShop.x=-e,this.ButtonHome.x=t/2-1.5*e,this.ButtonMilestone.x=e/2+n/2,this.LineLeft.x=-(2*e-t/2),this.LineRight.x=n/2,this.ButtonShop.getChildByName("icon").y=35,this.ButtonHome.getChildByName("icon").y=0,this.ButtonMilestone.getChildByName("icon").y=0,this.ButtonShop.getChildByName("Label").active=!0,this.ButtonHome.getChildByName("Label").active=!1,this.ButtonMilestone.getChildByName("Label").active=!1,cc.Tween.stopAllByTarget(this.Select),cc.tween(this.Select).to(.1,{x:-e}).start()}},e.prototype.hideStoreInfo=function(){this.LabStoreCoin.node.parent.active=!1},e.prototype.showStoreInfo=function(){this.LabStoreCoin.node.parent.active=!0},a([w(cc.Node)],e.prototype,"TouchPanel",void 0),a([w(cc.Node)],e.prototype,"Store",void 0),a([w(cc.Node)],e.prototype,"Main",void 0),a([w(cc.Node)],e.prototype,"Milestone",void 0),a([w(cc.Label)],e.prototype,"LabLevel",void 0),a([w(cc.Label)],e.prototype,"LabStoreCoin",void 0),a([w(cc.Label)],e.prototype,"LabUnlockMilestone",void 0),a([w(cc.RichText)],e.prototype,"LabMilestoneHelpTip",void 0),a([w(cc.Sprite)],e.prototype,"ChapterSpr",void 0),a([w(cc.Label)],e.prototype,"LabChapterName",void 0),a([w(cc.Label)],e.prototype,"LabCoin",void 0),a([w(cc.Node)],e.prototype,"BtnPlay",void 0),a([w(cc.Node)],e.prototype,"BtnMap",void 0),a([w(cc.Node)],e.prototype,"BtnAllMap",void 0),a([w(cc.Node)],e.prototype,"BtnUp",void 0),a([w(cc.Node)],e.prototype,"BtnDown",void 0),a([w(cc.Label)],e.prototype,"LabLandmarkProgress",void 0),a([w(cc.ProgressBar)],e.prototype,"ProgressLandmark",void 0),a([w(cc.Node)],e.prototype,"Content",void 0),a([w(cc.Node)],e.prototype,"pages",void 0),a([w(cc.Node)],e.prototype,"UnlimitedTime",void 0),a([w(cc.Node)],e.prototype,"MilestoneHelp",void 0),a([w(cc.Node)],e.prototype,"MilestoneMask",void 0),a([w(r.default)],e.prototype,"MilestoneListView",void 0),a([w(r.default)],e.prototype,"StoreListView",void 0),a([w(cc.Node)],e.prototype,"Select",void 0),a([w(cc.Node)],e.prototype,"ButtonShop",void 0),a([w(cc.Node)],e.prototype,"ButtonHome",void 0),a([w(cc.Node)],e.prototype,"ButtonMilestone",void 0),a([w(cc.Node)],e.prototype,"BottomNavigation",void 0),a([w(cc.Node)],e.prototype,"LineLeft",void 0),a([w(cc.Node)],e.prototype,"LineRight",void 0),a([S],e)}(s.default);n.default=D,cc._RF.pop()},{"../../../Framework/components/listview/List":"List","../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../GameCore":"GameCore","../Items/ItemMilestone":"ItemMilestone","../Items/ItemStore":"ItemStore","../SpriteUtils":"SpriteUtils","../UserData":"UserData"}],UIGameMineOver:[function(t,e,n){"use strict";cc._RF.push(e,"6b7c0t8sNFFvLNNPD8lRvWo","UIGameMineOver");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../Datas/PopupKey"),p=t("../../GameConfig"),d=t("../GameCore"),h=cc._decorator,f=h.ccclass,m=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabMineTime=null,e.TimeProgress=null,e.mineTime=0,e.startTime=!1,e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.TimeProgress.progress=1,this.mineTime=p.default.MineOverRetryTime,this.startTime=!0},e.prototype.update=function(t){this.startTime&&(this.LabMineTime.string!=Math.ceil(this.mineTime).toString()&&(this.LabMineTime.string=Math.ceil(this.mineTime).toString()),this.mineTime-=t,this.TimeProgress.progress=this.mineTime/p.default.MineOverRetryTime,this.mineTime<=0&&(this.mineTime=0,this.gameOver()))},e.prototype.gameOver=function(){this.startTime=!1,this.close(),c.default.addPop(u.default.UIGameFail)},e.prototype.onClose=function(){l.default.instance.btnClick(),this.gameOver()},e.prototype.onRetryGame=function(){var t=this;l.default.instance.btnClick(),s.default.showReward(function(){t.startTime=!1,t.close(),d.default.instance.updateMine(),d.default.instance.isRuning=!0,d.default.instance.isTiming=!0},this)},a([m(cc.Label)],e.prototype,"LabMineTime",void 0),a([m(cc.ProgressBar)],e.prototype,"TimeProgress",void 0),a([f],e)}(r.default);n.default=g,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../GameCore":"GameCore"}],UIGameOverGoldGet:[function(t,e,n){"use strict";cc._RF.push(e,"8ec15VYHu9EepTJh9TAzsdC","UIGameOverGoldGet");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/SoundManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PrefabCoin=null,e.Coin=null,e.Filp=null,e.Turn=null,e.Find=null,e.EffectContent=null,e.getConfig=null,e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.Coin.active=!1,this.Filp.active=!1,this.Turn.active=!1,this.Find.active=!1,this.getConfig=n,this.getConfig.Coin&&(this.Coin.active=!0,this.Coin.getComponentInChildren(cc.Label).string=this.getConfig.Coin.start,this.scheduleOnce(function(){i.flyCoin(i.getConfig.Coin)})),this.scheduleOnce(function(){var t;i.close(),null===(t=n.callback)||void 0===t||t.call()},2)},e.prototype.flyCoin=function(t){for(var e=this,n=t.start,i=t.end,o=(t.end-t.start)/10,a=this.EffectContent.convertToNodeSpaceAR(t.position),r=this.EffectContent.convertToNodeSpaceAR(this.Coin.convertToWorldSpaceAR(this.Coin.getChildByName("icon").position)),c=cc.v2(a.x+3*Math.abs(a.x-r.x),a.y+Math.abs(a.y-r.y)/3),l=0;l<10;l++){var u=cc.instantiate(this.PrefabCoin);u.parent=this.EffectContent,u.position=a,u.scale=0,cc.tween(u).delay(.1*l).set({active:!0}).to(.2,{scale:1}).then(cc.bezierTo(.7,[a,c,r]).easing(cc.easeQuinticActionOut())).removeSelf().call(function(){(n+=o)>i&&(n=i),e.Coin.getComponentInChildren(cc.Label).string=n.toFixed(0),s.default.instance.coinFly()}).start()}},a([u(cc.Prefab)],e.prototype,"PrefabCoin",void 0),a([u(cc.Node)],e.prototype,"Coin",void 0),a([u(cc.Node)],e.prototype,"Filp",void 0),a([u(cc.Node)],e.prototype,"Turn",void 0),a([u(cc.Node)],e.prototype,"Find",void 0),a([u(cc.Node)],e.prototype,"EffectContent",void 0),a([l],e)}(r.default);n.default=p,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/SoundManager":"SoundManager"}],UIGameOver:[function(t,e,n){"use strict";cc._RF.push(e,"54a3fmmTcRM/I6vJcm0HxKR","UIGameOver");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../../Framework/core/manager/UIManager"),p=t("../../../Framework/core/util/DateUtils"),d=t("../../../Framework/core/util/I18N"),h=t("../../Datas/GameDataManager"),f=t("../../Datas/PopupKey"),m=t("../GameCore"),g=t("../UserData"),y=cc._decorator,v=y.ccclass,_=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Shengli=null,e.Coin=null,e.CoinLight=null,e.Infos=null,e.Stars=[],e.LabLevel=null,e.LabTime=null,e.LabCombo=null,e.LabCoin=null,e.ButtonADDouble=null,e.landmark=null,e.startCoin=0,e.endCoin=0,e.result=null,e.addCoin=null,e.isGettingReward=!1,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),cc.tween(this.CoinLight).by(4,{angle:360}).repeatForever().start()},e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.landmark=null,this.ButtonADDouble.active=!1,this.isGettingReward=!1,this.result=n,d.default.setLocalText(this.LabLevel,"main_level",m.default.instance.curLevelIndex.toString()),this.LabTime.string=p.default.CountDown(m.default.instance.GameTime),this.LabCombo.string=m.default.instance.ComboMaxCount.toString(),m.default.instance.levelStar>=1&&m.default.instance.levelStar<=3&&l.default.instance.overStar(m.default.instance.levelStar),this.Shengli.setAnimation(0,"danru",!1),this.Shengli.setCompleteListener(function(){i.Shengli.setAnimation(0,"xunhuan",!0),i.Shengli.setCompleteListener(null)});for(var o=this.Shengli.findAnimation("danru").duration,a=0;a<this.Stars.length;a++)this.Stars[a].active=a<m.default.instance.levelStar,this.Stars[a].opacity=0,cc.tween(this.Stars[a]).to(o,{opacity:255}).start();this.Coin.opacity=0,this.CoinLight.opacity=0,this.LabCoin.node.opacity=0,this.Infos.opacity=0,cc.tween(this.Infos).to(o,{opacity:255}).start(),this.result.isWin&&(l.default.instance.gameVectory(),this.result.isNew&&(this.ButtonADDouble.active=!0,this.landmark=h.default.instance.getLandmark(m.default.instance.curLevelIndex),cc.tween(this.Coin).to(o/3,{opacity:255}).start(),cc.tween(this.CoinLight).to(o,{opacity:255}).start(),cc.tween(this.LabCoin.node).to(o,{opacity:255}).start(),this.startCoin=g.default.instance.Coin,this.addCoin=Math.min(50,Math.floor((10+m.default.instance.curLevelIndex/10)*(1+10*(m.default.instance.levelStar-1)/100))),this.endCoin=g.default.instance.Coin+this.addCoin,g.default.instance.Coin+=this.addCoin,this.LabCoin.string="+"+this.addCoin))},e.prototype.getResult=function(){var t=this;if(this.isGettingReward=!0,this.result.isNew){var e={Coin:{}};e.Coin.start=this.startCoin,e.Coin.end=this.endCoin,e.Coin.position=this.Coin.parent.convertToWorldSpaceAR(this.Coin.position),e.callback=function(){t.closeOver()},c.default.addPop(f.default.UIGameOverGoldGet,e)}else this.closeOver()},e.prototype.closeOver=function(){for(var t=this,e=0;e<this.Stars.length;e++)cc.tween(this.Stars[e]).to(.1,{opacity:0}).start();cc.tween(this.Coin).to(.1,{opacity:0}).start(),cc.tween(this.Infos).to(.1,{opacity:0}).start(),this.Shengli.setAnimation(0,"danchu",!1),this.Shengli.setCompleteListener(function(){t.close(),t.landmark?(m.default.instance.isGaming=!1,m.default.instance.isTiming=!1,c.default.addPop(f.default.UIGameMenu),u.default.instance.startTransition(function(){c.default.addPop(f.default.UIGameMap,m.default.instance.curLevelIndex)},t)):m.default.instance.gameStart(m.default.instance.curLevelIndex+1),t.Shengli.setCompleteListener(null)})},e.prototype.onGameContinue=function(){l.default.instance.btnClick(),this.isGettingReward||this.getResult()},e.prototype.onADDouble=function(){var t=this;l.default.instance.btnClick(),this.isGettingReward||s.default.showReward(function(){t.LabCoin.string="+"+2*t.addCoin,g.default.instance.Coin+=t.addCoin,t.endCoin+=t.addCoin,t.addCoin+=t.addCoin,t.getResult()},this)},a([_(sp.Skeleton)],e.prototype,"Shengli",void 0),a([_(cc.Node)],e.prototype,"Coin",void 0),a([_(cc.Node)],e.prototype,"CoinLight",void 0),a([_(cc.Node)],e.prototype,"Infos",void 0),a([_(cc.Node)],e.prototype,"Stars",void 0),a([_(cc.Label)],e.prototype,"LabLevel",void 0),a([_(cc.Label)],e.prototype,"LabTime",void 0),a([_(cc.Label)],e.prototype,"LabCombo",void 0),a([_(cc.Label)],e.prototype,"LabCoin",void 0),a([_(cc.Node)],e.prototype,"ButtonADDouble",void 0),a([v],e)}(r.default);n.default=C,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../../Framework/core/util/DateUtils":"DateUtils","../../../Framework/core/util/I18N":"I18N","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../GameCore":"GameCore","../UserData":"UserData"}],UIGamePause:[function(t,e,n){"use strict";cc._RF.push(e,"d95c0PBwhBNqZYRBRvk6oKl","UIGamePause");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../Datas/PopupKey"),p=t("../GameCore"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Content=null,e.LabLevel=null,e.ToggleMusic=null,e.ToggleEffect=null,e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.ToggleMusic.isChecked=l.default.instance.musicLock,this.ToggleEffect.isChecked=l.default.instance.effectLock},e.prototype.close=function(){t.prototype.close.call(this),p.default.instance.isRuning=!0,p.default.instance.isTiming=!0},e.prototype.onGameRetry=function(){l.default.instance.btnClick(),s.default.showInterstitial(),this.close(),p.default.instance.gameStart(p.default.instance.curLevelIndex)},e.prototype.onGameMenu=function(){l.default.instance.btnClick(),p.default.instance.isGaming=!1,p.default.instance.isRuning=!1,p.default.instance.isTiming=!1,s.default.showInterstitial(),t.prototype.close.call(this),c.default.addPop(u.default.UIGameMenu)},e.prototype.onMusic=function(t){l.default.instance.btnClick(),l.default.instance.musicLock=t.isChecked,l.default.instance.saveUserSetting(),t.isChecked?l.default.instance.playBgSound():l.default.instance.stopBgSound()},e.prototype.onSound=function(t){l.default.instance.btnClick(),l.default.instance.effectLock=t.isChecked,l.default.instance.saveUserSetting()},e.prototype.onVib=function(){l.default.instance.btnClick()},a([f(cc.Node)],e.prototype,"Content",void 0),a([f(cc.Label)],e.prototype,"LabLevel",void 0),a([f(cc.Toggle)],e.prototype,"ToggleMusic",void 0),a([f(cc.Toggle)],e.prototype,"ToggleEffect",void 0),a([h],e)}(r.default);n.default=m,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../Datas/PopupKey":"PopupKey","../GameCore":"GameCore"}],UIGameSetting:[function(t,e,n){"use strict";cc._RF.push(e,"96d88ryPqlKbIiN+E/VVpfd","UIGameSetting");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/GameApp"),s=t("../../../Framework/core/display/BaseWindow"),c=t("../../../Framework/core/event/EventManager"),l=t("../../../Framework/core/manager/PopUpManager"),u=t("../../../Framework/core/manager/SoundManager"),p=t("../../../Framework/core/util/I18N"),d=t("../../Datas/EventName"),h=t("../../Datas/GameDataManager"),f=t("../GameCore"),m=t("../UserData"),g=cc._decorator,y=g.ccclass,v=g.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ToggleMusic=null,e.ToggleEffect=null,e.debug=null,e.editLevel=null,e}return o(e,t),e.prototype.onLoad=function(){this.debug.active=r.default.DEBUG},e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.ToggleMusic.isChecked=u.default.instance.musicLock,this.ToggleEffect.isChecked=u.default.instance.effectLock},e.prototype.close=function(){t.prototype.close.call(this)},e.prototype.onHowToPlay=function(){u.default.instance.btnClick(),l.default.removeAllPop(),f.default.instance.gameStart(0)},e.prototype.onMusic=function(t){u.default.instance.btnClick(),u.default.instance.musicLock=t.isChecked,u.default.instance.saveUserSetting(),t.isChecked?u.default.instance.playBgSound():u.default.instance.stopBgSound()},e.prototype.onSound=function(t){u.default.instance.btnClick(),u.default.instance.effectLock=t.isChecked,u.default.instance.saveUserSetting()},e.prototype.onVib=function(){u.default.instance.btnClick()},e.prototype.onChangeLanguage=function(){h.default.instance.loadI18NRes(p.default.getLocalKey(m.default.instance.language),function(){c.default.instance.emit(d.default.i18n)},this)},e.prototype.onDebugChangeLevel=function(){var t=parseInt(this.editLevel.string);"number"==typeof t&&(m.default.instance.Level=t)},a([v(cc.Toggle)],e.prototype,"ToggleMusic",void 0),a([v(cc.Toggle)],e.prototype,"ToggleEffect",void 0),a([v(cc.Node)],e.prototype,"debug",void 0),a([v(cc.EditBox)],e.prototype,"editLevel",void 0),a([y],e)}(s.default);n.default=_,cc._RF.pop()},{"../../../Framework/core/GameApp":"GameApp","../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../GameCore":"GameCore","../UserData":"UserData"}],UIGameSkillBuy:[function(t,e,n){"use strict";cc._RF.push(e,"71a671+CoVPqZLwEI2FlVJZ","UIGameSkillBuy");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/ADManager"),l=t("../../../Framework/core/manager/PopUpManager"),u=t("../../../Framework/core/manager/SoundManager"),p=t("../../../Framework/core/util/I18N"),d=t("../../Datas/EventName"),h=t("../../Datas/PopupKey"),f=t("../../GameConfig"),m=t("../UserData"),g=cc._decorator,y=g.ccclass,v=g.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Filp=null,e.Turn=null,e.Find=null,e.LabCoin=null,e.LabCount=null,e.LabADBuyCount=null,e.LabItemTip=null,e.ADTip=null,e.ADGreyTip=null,e.LabBuyCount=null,e.ButtonAD=null,e.type="",e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.LabCoin.string=m.default.instance.Coin.toString(),this.type=n,this.Filp.active=!1,this.Turn.active=!1,this.Find.active=!1,this.LabCount.string="x1",this.LabBuyCount.string=p.default.get("item_buy")+" "+f.default.SkillBuyPay[this.type];var i=m.default.instance.getData(this.type+"Buy")||0;switch(this.LabADBuyCount.string=p.default.get("item_free")+" ( "+(f.default.SkillADBuyMax-i)+"/"+f.default.SkillADBuyMax+" )",this.ADTip.active=i<f.default.SkillADBuyMax,this.ADGreyTip.active=i>=f.default.SkillADBuyMax,this.ButtonAD.interactable=i<f.default.SkillADBuyMax,this.type){case"Filp":this.Filp.active=!0,this.LabItemTip.string=p.default.get("description_image");break;case"Turn":this.Turn.active=!0,this.LabItemTip.string=p.default.get("description_rearrang");break;case"Find":this.Find.active=!0,this.LabItemTip.string=p.default.get("description_show")}},e.prototype.onADBuy=function(){var t=this;u.default.instance.btnClick(),c.default.showReward(function(){var e=0;switch(t.type){case"Filp":e=m.default.instance.getData("FilpBuy")||0,m.default.instance.setData("FilpBuy",e+1),m.default.instance.Filp++;break;case"Turn":e=m.default.instance.getData("TurnBuy")||0,m.default.instance.setData("TurnBuy",e+1),m.default.instance.Turn++;break;case"Find":e=m.default.instance.getData("FindBuy")||0,m.default.instance.setData("FindBuy",e+1),m.default.instance.Find++}t.close()},this)},e.prototype.onBuy=function(){if(u.default.instance.btnClick(),m.default.instance.Coin>=f.default.SkillBuyPay[this.type]){switch(m.default.instance.Coin-=f.default.SkillBuyPay[this.type],this.type){case"Filp":m.default.instance.Filp++;break;case"Turn":m.default.instance.Turn++;break;case"Find":m.default.instance.Find++}this.close()}else l.default.addPop(h.default.UIGameTip,p.default.get("tip_not_coin_enough"))},e.prototype.close=function(){t.prototype.close.call(this),s.default.instance.emit(d.default.UpdateUIGame)},a([v(cc.Node)],e.prototype,"Filp",void 0),a([v(cc.Node)],e.prototype,"Turn",void 0),a([v(cc.Node)],e.prototype,"Find",void 0),a([v(cc.Label)],e.prototype,"LabCoin",void 0),a([v(cc.Label)],e.prototype,"LabCount",void 0),a([v(cc.Label)],e.prototype,"LabADBuyCount",void 0),a([v(cc.Label)],e.prototype,"LabItemTip",void 0),a([v(cc.Node)],e.prototype,"ADTip",void 0),a([v(cc.Node)],e.prototype,"ADGreyTip",void 0),a([v(cc.Label)],e.prototype,"LabBuyCount",void 0),a([v(cc.Button)],e.prototype,"ButtonAD",void 0),a([y],e)}(r.default);n.default=_,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../UserData":"UserData"}],UIGameStartLevel:[function(t,e,n){"use strict";cc._RF.push(e,"394e0gsSeJExrpTGsgks2Uz","UIGameStartLevel");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/PopUpManager"),c=t("../../../Framework/core/manager/SoundManager"),l=t("../../../Framework/core/manager/UIManager"),u=t("../../../Framework/core/util/I18N"),p=t("../GameCore"),d=t("../UserData"),h=cc._decorator,f=h.ccclass,m=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIAnimation=null,e.LabLevel=null,e.Stars=[],e.level=0,e.starCount=0,e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),this.openEffect="LevelStartShow",this.closeEffect="LevelStartHide",t.prototype.open.call(this,e,n),this.level=n,this.starCount=d.default.instance.getStarByLevel(this.level),u.default.setLocalText(this.LabLevel,"list_pop_level",this.level.toString());for(var i=0;i<this.Stars.length;i++)this.Stars[i].active=i<this.starCount},e.prototype.onPlay=function(){var t=this;c.default.instance.btnClick(),l.default.instance.startTransition(function(){s.default.removeAllPop(),p.default.instance.gameStart(t.level)},this)},a([m(cc.Animation)],e.prototype,"UIAnimation",void 0),a([m(cc.Label)],e.prototype,"LabLevel",void 0),a([m(cc.Node)],e.prototype,"Stars",void 0),a([f],e)}(r.default);n.default=g,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/manager/UIManager":"UIManager","../../../Framework/core/util/I18N":"I18N","../GameCore":"GameCore","../UserData":"UserData"}],UIGameTimeOver:[function(t,e,n){"use strict";cc._RF.push(e,"ae675D0XntK/rRfr/m5DPB8","UIGameTimeOver");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/manager/ADManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../Datas/PopupKey"),p=t("../../GameConfig"),d=t("../GameCore"),h=cc._decorator,f=h.ccclass,m=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabTime=null,e.LabAddTime=null,e.TimeProgress=null,e.Time=0,e.startTime=!1,e.addTime=0,e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.TimeProgress.progress=1,this.Time=p.default.TimeOverRetryTime,this.startTime=!0,this.addTime=n,this.LabAddTime.string="+"+this.addTime.toString()+"s"},e.prototype.update=function(t){this.startTime&&(this.LabTime.string!=Math.ceil(this.Time).toString()&&(this.LabTime.string=Math.ceil(this.Time).toString()),this.Time-=t,this.TimeProgress.progress=this.Time/p.default.TimeOverRetryTime,this.Time<=0&&(this.Time=0,this.gameOver()))},e.prototype.gameOver=function(){this.startTime=!1,this.close(),c.default.addPop(u.default.UIGameFail)},e.prototype.onClose=function(){l.default.instance.btnClick(),this.gameOver()},e.prototype.onGameContinue=function(){var t=this;l.default.instance.btnClick(),s.default.showReward(function(){t.startTime=!1,t.close(),d.default.instance.isRuning=!0,d.default.instance.isTiming=!0,d.default.instance.GameCountDownTime+=t.addTime},this)},a([m(cc.Label)],e.prototype,"LabTime",void 0),a([m(cc.Label)],e.prototype,"LabAddTime",void 0),a([m(cc.ProgressBar)],e.prototype,"TimeProgress",void 0),a([f],e)}(r.default);n.default=g,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../GameCore":"GameCore"}],UIGameTip:[function(t,e,n){"use strict";cc._RF.push(e,"037ffgQ+lRKwZb23LMRdpkI","UIGameTip");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Content=null,e.LabTip=null,e}return o(e,t),e.prototype.open=function(e,n){var i=this;void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.LabTip.string=n,this.Content.y=0,this.Content.opacity=255,cc.tween(this.Content).delay(.6).to(.5,{y:50,opacity:0}).call(function(){i.close()}).start()},a([l(cc.Node)],e.prototype,"Content",void 0),a([l(cc.Label)],e.prototype,"LabTip",void 0),a([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow"}],UIGameTurnTable:[function(t,e,n){"use strict";cc._RF.push(e,"065ebrAxndA04iwDjntz7Vg","UIGameTurnTable");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/ADManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../../Framework/core/util/RandomUtils"),p=t("../../Datas/EventName"),d=t("../../Datas/GameDataManager"),h=t("../UserData"),f=cc._decorator,m=f.ccclass,g=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Coin=null,e.Filp=null,e.Turn=null,e.Find=null,e.TurnTableReward=null,e.TurnTableContent=null,e.TurnTable=null,e.TurnTableMask=null,e.TurnTablePoint=null,e.TurnTableLight=null,e.TurnTableItem=[],e.TurnTableIcon=[],e.ButtonTurn=null,e.ButtonTurnAD=null,e.ButtonGet=null,e.turnTableTween=null,e.inTurning=!1,e.callback=null,e.curReward=null,e.itemReward=null,e}return o(e,t),e.prototype.onLoad=function(){for(var t=d.default.instance.getTurnTableDatas(),e=0;e<t.length;e++){var n=t[e];switch(this.TurnTableItem[e].getComponentInChildren(cc.Label).string=n.reward_number,this.TurnTableItem[e].getComponentInChildren(cc.Sprite).node.scale=.3,n.reward){case"1":this.TurnTableItem[e].getComponentInChildren(cc.Sprite).spriteFrame=this.TurnTableIcon[0],this.TurnTableItem[e].getComponentInChildren(cc.Sprite).node.scale=1;break;case"2":this.TurnTableItem[e].getComponentInChildren(cc.Sprite).spriteFrame=this.TurnTableIcon[1];break;case"3":this.TurnTableItem[e].getComponentInChildren(cc.Sprite).spriteFrame=this.TurnTableIcon[2];break;case"4":this.TurnTableItem[e].getComponentInChildren(cc.Sprite).spriteFrame=this.TurnTableIcon[3]}}cc.tween(this.TurnTableMask).by(1,{angle:20}).repeatForever().start()},e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.callback=null,this.curReward=null,this.Coin.active=!1,this.Filp.active=!1,this.Turn.active=!1,this.Find.active=!1,this.TurnTableMask.active=!1,this.TurnTableLight.active=!1,this.ButtonTurn.active=!0,this.ButtonGet.active=!1,this.ButtonTurnAD.active=h.default.instance.TurnTableCount<=0,this.TurnTable.angle=0,this.turnTableTween&&this.turnTableTween.stop(),this.turnTableTween=cc.tween(this.TurnTable).by(1,{angle:-20}).repeatForever().start(),this.inTurning=!1},e.prototype.onTurnTable=function(){var t=this;h.default.instance.TurnTableCount>0?(h.default.instance.TurnTableCount--,this.startTurnTable()):c.default.showReward(function(){t.startTurnTable()},this)},e.prototype.startTurnTable=function(){var t=this;if(!this.inTurning){this.inTurning=!0,this.ButtonTurn.active=!1,l.default.instance.turnTable(),this.turnTableTween&&this.turnTableTween.stop();for(var e=d.default.instance.getTurnTableDatas(),n=[],i=0;i<e.length;i++)n[i]=parseInt(e[i].weight);var o=u.default.getRandomWeightedIndex(n);switch(e[o].reward){case"1":h.default.instance.Coin+=parseInt(e[o].reward_number);break;case"2":h.default.instance.Filp+=parseInt(e[o].reward_number);break;case"3":h.default.instance.Turn+=parseInt(e[o].reward_number);break;case"4":h.default.instance.Find+=parseInt(e[o].reward_number)}var a=-45*o-22.5-3600-this.TurnTable.angle%360;this.turnTableTween=cc.tween(this.TurnTable).by(6,{angle:a},{easing:"quintInOut"}).call(function(){t.giveReward(o)}).start()}},e.prototype.giveReward=function(t){var e=this;this.TurnTableMask.active=!0,this.TurnTableMask.opacity=0,this.TurnTableLight.active=!0,this.TurnTableLight.opacity=0,l.default.instance.turnTableEnd();var n=d.default.instance.getTurnTableDatas();this.curReward=n[t];var i=cc.instantiate(this.TurnTableReward);i.parent=this.TurnTableContent,i.scale=0,this.itemReward=i,i.getComponentInChildren(cc.Label).string="x"+this.curReward.reward_number,i.getChildByName("coin").active="1"==this.curReward.reward,i.getChildByName("flip").active="2"==this.curReward.reward,i.getChildByName("turn").active="3"==this.curReward.reward,i.getChildByName("find").active="4"==this.curReward.reward,cc.tween(i).delay(.2).to(.2,{scale:1.3},{easing:"backOut"}).to(.2,{scale:1}).call(function(){e.ButtonGet.active=!0}).start(),cc.tween(this.TurnTablePoint).to(.2,{scale:.6}).to(.2,{scale:.45}).start(),cc.tween(this.TurnTableMask).delay(.3).to(.2,{opacity:180}).start()},e.prototype.onGetReward=function(){var t,e=this;"1"==this.curReward.reward&&(this.Coin.active=!0,this.Coin.opacity=0,this.Coin.parent.getComponent(cc.Layout).updateLayout(),this.Coin.getComponentInChildren(cc.Label).string=(h.default.instance.Coin-parseInt(this.curReward.reward_number)).toString(),this.callback=function(){e.Coin.opacity=255,cc.tween(e.itemReward).to(.8,{scale:.3,position:e.TurnTableContent.convertToNodeSpaceAR(e.Coin.convertToWorldSpaceAR(e.Coin.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){e.Coin.getComponentInChildren(cc.Label).string=h.default.instance.Coin.toString(),s.default.instance.emit(p.default.UpdateCoin)}).delay(.5).call(function(){e.Coin.active=!1}).removeSelf().start()}),"2"==this.curReward.reward&&(this.Filp.active=!0,this.Filp.opacity=0,this.Filp.parent.getComponent(cc.Layout).updateLayout(),this.Filp.getComponentInChildren(cc.Label).string=(h.default.instance.Filp-parseInt(this.curReward.reward_number)).toString(),this.callback=function(){e.Filp.opacity=255,cc.tween(e.itemReward).to(.8,{scale:.3,position:e.TurnTableContent.convertToNodeSpaceAR(e.Filp.convertToWorldSpaceAR(e.Filp.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){e.Filp.getComponentInChildren(cc.Label).string=h.default.instance.Filp.toString()}).delay(.5).call(function(){e.Filp.active=!1}).removeSelf().start()}),"3"==this.curReward.reward&&(this.Turn.active=!0,this.Turn.opacity=0,this.Turn.parent.getComponent(cc.Layout).updateLayout(),this.Turn.getComponentInChildren(cc.Label).string=(h.default.instance.Turn-parseInt(this.curReward.reward_number)).toString(),this.callback=function(){e.Turn.opacity=255,cc.tween(e.itemReward).to(.8,{scale:.3,position:e.TurnTableContent.convertToNodeSpaceAR(e.Turn.convertToWorldSpaceAR(e.Turn.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){e.Turn.getComponentInChildren(cc.Label).string=h.default.instance.Turn.toString()}).delay(.5).call(function(){e.Turn.active=!1}).removeSelf().start()}),"4"==this.curReward.reward&&(this.Find.active=!0,this.Find.opacity=0,this.Find.parent.getComponent(cc.Layout).updateLayout(),this.Find.getComponentInChildren(cc.Label).string=(h.default.instance.Find-parseInt(this.curReward.reward_number)).toString(),this.callback=function(){e.Find.opacity=255,cc.tween(e.itemReward).to(.8,{scale:.3,position:e.TurnTableContent.convertToNodeSpaceAR(e.Find.convertToWorldSpaceAR(e.Find.getChildByName("icon").position))}).to(.2,{opacity:0}).call(function(){e.Find.getComponentInChildren(cc.Label).string=h.default.instance.Find.toString()}).delay(.5).call(function(){e.Find.active=!1}).removeSelf().start()}),null===(t=this.callback)||void 0===t||t.call(),this.ButtonGet.active=!1,this.scheduleOnce(function(){e.ButtonTurn.active=!0,e.ButtonTurnAD.active=h.default.instance.TurnTableCount<=0,cc.tween(e.TurnTableMask).to(.2,{opacity:0}).start(),e.turnTableTween=cc.tween(e.TurnTable).by(1,{angle:-20}).repeatForever().start(),e.inTurning=!1},1.5)},e.prototype.close=function(){this.inTurning||t.prototype.close.call(this)},a([g(cc.Node)],e.prototype,"Coin",void 0),a([g(cc.Node)],e.prototype,"Filp",void 0),a([g(cc.Node)],e.prototype,"Turn",void 0),a([g(cc.Node)],e.prototype,"Find",void 0),a([g(cc.Prefab)],e.prototype,"TurnTableReward",void 0),a([g(cc.Node)],e.prototype,"TurnTableContent",void 0),a([g(cc.Node)],e.prototype,"TurnTable",void 0),a([g(cc.Node)],e.prototype,"TurnTableMask",void 0),a([g(cc.Node)],e.prototype,"TurnTablePoint",void 0),a([g(cc.Node)],e.prototype,"TurnTableLight",void 0),a([g(cc.Node)],e.prototype,"TurnTableItem",void 0),a([g(cc.SpriteFrame)],e.prototype,"TurnTableIcon",void 0),a([g(cc.Node)],e.prototype,"ButtonTurn",void 0),a([g(cc.Node)],e.prototype,"ButtonTurnAD",void 0),a([g(cc.Node)],e.prototype,"ButtonGet",void 0),a([m],e)}(r.default);n.default=y,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/RandomUtils":"RandomUtils","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../UserData":"UserData"}],UIGameUnlimitedTime:[function(t,e,n){"use strict";cc._RF.push(e,"3c3cbHUG55BX7qlpYiLYBKw","UIGameUnlimitedTime");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/display/BaseWindow"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/ADManager"),l=t("../../../Framework/core/manager/PopUpManager"),u=t("../../../Framework/core/manager/SoundManager"),p=t("../../../Framework/core/util/I18N"),d=t("../../Datas/EventName"),h=t("../GameCore"),f=cc._decorator,m=f.ccclass,g=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabLevel=null,e.level=0,e}return o(e,t),e.prototype.open=function(e,n){void 0===n&&(n=null),t.prototype.open.call(this,e,n),this.level=n,this.LabLevel.string=p.default.get("main_level",this.level)},e.prototype.onADUnlimitedTimeGame=function(){var t=this;u.default.instance.btnClick(),c.default.showReward(function(){l.default.removeAllPop(),h.default.instance.isGaming?h.default.instance.GameUI.hideUnlimitedTime():h.default.instance.gameStart(t.level),h.default.instance.isGameUnlimitedTime=!0,h.default.instance.GameCountDownTime=0,s.default.instance.emit(d.default.UpdateUIGame)},this)},a([g(cc.Label)],e.prototype,"LabLevel",void 0),a([m],e)}(r.default);n.default=y,cc._RF.pop()},{"../../../Framework/core/display/BaseWindow":"BaseWindow","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/ADManager":"ADManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../GameCore":"GameCore"}],UIGame:[function(t,e,n){"use strict";cc._RF.push(e,"836f8lkpmFE+6L/yoGlHiKU","UIGame");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/GameApp"),s=t("../../../Framework/core/event/EventManager"),c=t("../../../Framework/core/manager/PopUpManager"),l=t("../../../Framework/core/manager/SoundManager"),u=t("../../../Framework/core/util/DateUtils"),p=t("../../../Framework/core/util/I18N"),d=t("../../Datas/EventName"),h=t("../../Datas/GameDataManager"),f=t("../../Datas/PopupKey"),m=t("../../GameConfig"),g=t("../Effects/EffectUtils"),y=t("../GameCore"),v=t("../GameGuide"),_=t("../UserData"),C=cc._decorator,b=C.ccclass,T=C.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UITop=null,e.UIBottom=null,e.LabLevel=null,e.ComboProgress=null,e.LabCombo=null,e.Combo=null,e.StarProgress=null,e.Star=[],e.Time=null,e.TimeClock=null,e.LabTime=null,e.TimeInfinite=null,e.ButtonTestPass=null,e.ButtonGuidePass=null,e.ButtonFilp=null,e.ButtonTurn=null,e.ButtonFind=null,e.UnlimitedTime=null,e.ProgressUnlimitedTime=null,e.startUnlimitedTimeCountDown=!1,e.unlimitedTime=0,e.comboTime=0,e.comboTween=null,e}return o(e,t),e.prototype.onLoad=function(){s.default.instance.on(d.default.ResetUIGame,this.resetUIGame,this),s.default.instance.on(d.default.UpdateUIGame,this.updateUIGame,this),s.default.instance.on(d.default.Combo,this.startComboCount,this),s.default.instance.on(d.default.StarAdd,this.starAdd,this),this.ButtonTestPass.active=r.default.DEBUG},e.prototype.onDestroy=function(){s.default.instance.off(d.default.ResetUIGame,this.resetUIGame,this),s.default.instance.off(d.default.UpdateUIGame,this.updateUIGame,this),s.default.instance.off(d.default.Combo,this.startComboCount,this),s.default.instance.off(d.default.StarAdd,this.starAdd,this)},e.prototype.start=function(){this.resetUIGame()},e.prototype.update=function(t){if(y.default.instance.isTiming){var e=u.default.CountDown(y.default.instance.GameCountDownTime);this.LabTime.string!=e&&(this.LabTime.string=e)}this.UnlimitedTime.active&&this.startUnlimitedTimeCountDown&&(this.unlimitedTime-=t,this.ProgressUnlimitedTime.progress=this.unlimitedTime/m.default.UnlimitedTimeCountDown)},e.prototype.resetUIGame=function(){this.StarProgress.progress=0;for(var t=0;t<this.Star.length;t++)this.Star[t].active=!1;this.ComboProgress.node.active=!1,this.UITop.active=0!=y.default.instance.curLevelIndex,this.UIBottom.active=0!=y.default.instance.curLevelIndex,this.ButtonGuidePass.active=0==y.default.instance.curLevelIndex,this.ButtonFilp.parent.getComponent(cc.Layout).enabled=!1,this.UnlimitedTime.active=!1,this.UnlimitedTime.x=-cc.view.getCanvasSize().width/cc.view.getScaleX()-280,this.startUnlimitedTimeCountDown=!1},e.prototype.updateUIGame=function(){p.default.setLocalText(this.LabLevel,"main_level",y.default.instance.curLevelIndex.toString()),y.default.instance.curLevelIndex>=m.default.CountDownStartLevel?(this.Time.active=!0,this.TimeInfinite.active=y.default.instance.isGameUnlimitedTime,this.LabTime.node.active=!y.default.instance.isGameUnlimitedTime,y.default.instance.GameCountDownTime>0&&(this.LabTime.string=u.default.CountDown(y.default.instance.GameCountDownTime))):this.Time.active=!1,this.setButtonState(this.ButtonFilp,h.OpenFunctionId.Filp,_.default.instance.Filp),this.setButtonState(this.ButtonTurn,h.OpenFunctionId.Turn,_.default.instance.Turn),this.setButtonState(this.ButtonFind,h.OpenFunctionId.Find,_.default.instance.Find)},e.prototype.setButtonState=function(t,e,n){var i=h.default.instance.getOpenFunctionLevel(e);t.getComponent(cc.Button).interactable=_.default.instance.Level>=i,t.getChildByName("LabUnlockLv").active=_.default.instance.Level<i,t.getChildByName("LabUnlockLv").getComponent(cc.Label).string="Lv "+i,t.getChildByName("locked").active=_.default.instance.Level<i,t.getChildByName("Background").getChildByName("grey").active=_.default.instance.Level<i,t.getChildByName("Count").active=_.default.instance.Level==i||_.default.instance.Level>i&&n>0,t.getChildByName("Count").getChildByName("Label").getComponent(cc.Label).string=n.toString(),t.getChildByName("Count").getChildByName("Label").active=_.default.instance.Level!=i,t.getChildByName("Count").getChildByName("infinite").active=_.default.instance.Level==i,t.getChildByName("Add").active=_.default.instance.Level>i&&n<=0,t.getChildByName("guide").active=y.default.instance.curLevelIndex==i},e.prototype.getStarWorldPosition=function(t){return this.Star[t]||(t=2),this.Star[t].parent.convertToWorldSpaceAR(this.Star[t].position)},e.prototype.getClockWorldPosition=function(){return this.TimeClock.parent.convertToWorldSpaceAR(this.TimeClock.position)},e.prototype.startComboCount=function(t){var e=this;t>=2&&(this.ComboProgress.node.active||(this.ComboProgress.node.active=!0,this.ComboProgress.node.opacity=0,cc.tween(this.ComboProgress.node).to(.2,{opacity:255}).start()),this.comboTween&&(this.comboTween.stop(),this.comboTween=null),this.ComboProgress.progress=1,this.comboTween=cc.tween(this.ComboProgress).to(m.default.ComboTime,{progress:0}).call(function(){e.comboTween=null,y.default.instance.ComboCount=0,cc.tween(e.ComboProgress.node).to(.2,{opacity:0}).call(function(){e.ComboProgress.node.active=!1}).start()}).start(),this.LabCombo.string=t,cc.tween(this.Combo).set({scale:1.8}).call(function(){}).to(.1,{scale:1}).start(),g.default.instance.getEffectCombo(cc.v3(0,m.default.ComboTipY),t))},e.prototype.starAdd=function(){var t=y.default.instance.getStarProgress(),e=t[0],n=t[1];this.StarProgress.progress=e;for(var i=0;i<this.Star.length;i++)this.Star[i].active=i<n},e.prototype.onFilpTile=function(){l.default.instance.btnClick(),y.default.instance.isRuning&&(v.default.instance.stepGuide(),h.default.instance.getOpenFunctionLevel(h.OpenFunctionId.Filp)==_.default.instance.Level?y.default.instance.filpTiles():_.default.instance.Filp>0?(_.default.instance.Filp--,y.default.instance.filpTiles()):c.default.addPop(f.default.UIGameSkillBuy,"Filp"),this.updateUIGame())},e.prototype.onTurnTile=function(){l.default.instance.btnClick(),y.default.instance.isRuning&&(v.default.instance.stepGuide(),h.default.instance.getOpenFunctionLevel(h.OpenFunctionId.Turn)==_.default.instance.Level?y.default.instance.turnTile():_.default.instance.Turn>0?(_.default.instance.Turn--,y.default.instance.turnTile()):c.default.addPop(f.default.UIGameSkillBuy,"Turn"),this.updateUIGame())},e.prototype.onFindTile=function(){l.default.instance.btnClick(),y.default.instance.isRuning&&(y.default.instance.isTiping||(v.default.instance.stepGuide(),h.default.instance.getOpenFunctionLevel(h.OpenFunctionId.Find)==_.default.instance.Level?y.default.instance.findClearTile():_.default.instance.Find>0?(_.default.instance.Find--,y.default.instance.findClearTile()):c.default.addPop(f.default.UIGameSkillBuy,"Find"),this.updateUIGame()))},e.prototype.onGamePause=function(){l.default.instance.btnClick(),y.default.instance.isRuning=!1,y.default.instance.isTiming=!1,c.default.addPop(f.default.UIGamePause)},e.prototype.onGuidePass=function(){y.default.instance.isGaming=!1,y.default.instance.isRuning=!1,y.default.instance.isTiming=!1,_.default.instance.Level=Math.min(m.default.LevelMax,Math.max(_.default.instance.Level,y.default.instance.curLevelIndex+1)),_.default.instance.Level==y.default.instance.curLevelIndex+1?y.default.instance.gameStart(_.default.instance.Level):c.default.addPop(f.default.UIGameMenu)},e.prototype.onUnlimitedTime=function(){l.default.instance.btnClick(),c.default.addPop(f.default.UIGameUnlimitedTime,y.default.instance.curLevelIndex)},e.prototype.onTestPass=function(){y.default.instance.isGaming=!1,y.default.instance.isRuning=!1,y.default.instance.isTiming=!1,y.default.instance.levelStar=3,_.default.instance.setStarByLevel(y.default.instance.curLevelIndex,y.default.instance.levelStar);var t=_.default.instance.Level==y.default.instance.curLevelIndex;_.default.instance.Level=Math.min(m.default.LevelMax,Math.max(_.default.instance.Level,y.default.instance.curLevelIndex+1)),y.default.instance.gameOver(!0,t)},e.prototype.showUnlimitedTime=function(){var t=this;this.ProgressUnlimitedTime.progress=1,this.UnlimitedTime.active=!0;var e=-cc.view.getCanvasSize().width/cc.view.getScaleX()-280;this.UnlimitedTime.x=e,cc.Tween.stopAllByTarget(this.UnlimitedTime),cc.tween(this.UnlimitedTime).to(.8,{x:e+280},{easing:"quartOut"}).call(function(){t.unlimitedTime=m.default.UnlimitedTimeCountDown,t.startUnlimitedTimeCountDown=!0}).delay(m.default.UnlimitedTimeCountDown).to(.8,{x:e-280},{easing:"quartOut"}).call(function(){t.UnlimitedTime.active=!1}).start()},e.prototype.hideUnlimitedTime=function(){var t=this;this.UnlimitedTime.active=!0;var e=-cc.view.getCanvasSize().width/cc.view.getScaleX()-280;cc.Tween.stopAllByTarget(this.UnlimitedTime),cc.tween(this.UnlimitedTime).to(.8,{x:e-280},{easing:"quartOut"}).call(function(){t.UnlimitedTime.active=!1}).start()},a([T(cc.Node)],e.prototype,"UITop",void 0),a([T(cc.Node)],e.prototype,"UIBottom",void 0),a([T(cc.Label)],e.prototype,"LabLevel",void 0),a([T(cc.ProgressBar)],e.prototype,"ComboProgress",void 0),a([T(cc.Label)],e.prototype,"LabCombo",void 0),a([T(cc.Node)],e.prototype,"Combo",void 0),a([T(cc.ProgressBar)],e.prototype,"StarProgress",void 0),a([T(cc.Node)],e.prototype,"Star",void 0),a([T(cc.Node)],e.prototype,"Time",void 0),a([T(cc.Node)],e.prototype,"TimeClock",void 0),a([T(cc.Label)],e.prototype,"LabTime",void 0),a([T(cc.Node)],e.prototype,"TimeInfinite",void 0),a([T(cc.Node)],e.prototype,"ButtonTestPass",void 0),a([T(cc.Node)],e.prototype,"ButtonGuidePass",void 0),a([T(cc.Node)],e.prototype,"ButtonFilp",void 0),a([T(cc.Node)],e.prototype,"ButtonTurn",void 0),a([T(cc.Node)],e.prototype,"ButtonFind",void 0),a([T(cc.Node)],e.prototype,"UnlimitedTime",void 0),a([T(cc.ProgressBar)],e.prototype,"ProgressUnlimitedTime",void 0),a([b],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../../../Framework/core/GameApp":"GameApp","../../../Framework/core/event/EventManager":"EventManager","../../../Framework/core/manager/PopUpManager":"PopUpManager","../../../Framework/core/manager/SoundManager":"SoundManager","../../../Framework/core/util/DateUtils":"DateUtils","../../../Framework/core/util/I18N":"I18N","../../Datas/EventName":"EventName","../../Datas/GameDataManager":"GameDataManager","../../Datas/PopupKey":"PopupKey","../../GameConfig":"GameConfig","../Effects/EffectUtils":"EffectUtils","../GameCore":"GameCore","../GameGuide":"GameGuide","../UserData":"UserData"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"a9e62rQWgFCu4eT+6SORFBb","UIManager");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../event/EventManager"),s=t("./PopUpManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInForeGround=!0,e.enterForeGround="enterForeGround",e.enterBackGround="enterBackGround",e.preloadStage=null,e.stage=null,e.Transition=null,e.Camera=null,e.SafeMask=null,e.BlackMask=null,e.transitionShowing=!1,e.transitionLoaded=!1,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,cc.game.on(cc.game.EVENT_HIDE,this.inBackGround,this),cc.game.on(cc.game.EVENT_SHOW,this.inForeGround,this),cc.sys.isNative?window.__errorHandler=function(){}:cc.sys.isBrowser&&(window.onerror=function(){})},e.prototype.start=function(){s.default.stage=n.instance.stage,this.enableOperation(),this.Transition.node.active=!1},e.prototype.viewSizeUpdate=function(){n.applyViewSize(this.stage)},e.applyViewSize=function(t){var e=cc.view.getCanvasSize();if(t.width=e.width/cc.view.getScaleX(),t.height=e.height/cc.view.getScaleY(),t.height/t.width>2){var n=(cc.sys.platform==cc.sys.ANDROID?50:100)/cc.view.getScaleY();t.height-=n,t.y-=n/2}else t.y=0},e.prototype.setUIScale=function(t){var e=cc.view.getCanvasSize(),n=cc.view.getDesignResolutionSize();t.scaleX=e.width/cc.view.getScaleX()/n.width,t.scaleY=e.height/cc.view.getScaleY()/n.height},e.prototype.inForeGround=function(){this.isInForeGround=!0,r.default.instance.emit(this.enterForeGround)},e.prototype.inBackGround=function(){this.isInForeGround=!1,r.default.instance.emit(this.enterBackGround)},e.prototype.getIsInForeBackGround=function(){return this.isInForeGround},e.prototype.BtnClickSound=function(){},e.prototype.enableOperation=function(){this.SafeMask&&(this.SafeMask.active=!1)},e.prototype.disableOperation=function(){this.SafeMask&&(this.SafeMask.active=!0)},e.prototype.startTransition=function(t,e){var n=this;if(!this.transitionShowing){this.transitionLoaded=!1,this.transitionShowing=!0,this.disableOperation(),this.Transition.node.active=!0,this.Transition.clearTracks(),this.Transition.setToSetupPose(),this.Transition.setAnimation(0,"show",!1);var i=this.Transition.findAnimation("show").duration;this.Transition.addAnimation(1,"idle",!0,i),this.scheduleOnce(function(){n.transitionShowing=!1,n.endTransition(),null==t||t.call(e)},i)}},e.prototype.loadedTransition=function(t,e){this.transitionLoaded=!0,this.endTransition(t,e)},e.prototype.endTransition=function(t,e){var n=this;if(this.transitionLoaded&&!this.transitionShowing&&this.Transition.node.active){this.Transition.clearTracks(),this.Transition.setToSetupPose(),this.Transition.setAnimation(0,"hide3",!1);var i=this.Transition.findAnimation("hide3").duration;this.scheduleOnce(function(){n.enableOperation(),n.Transition.node.active=!1,null==t||t.call(e)},i)}},e.maxTaskNum=1,e.isPause=!1,e.zeroDot=new cc.Vec3,a([u(cc.Node)],e.prototype,"preloadStage",void 0),a([u(cc.Node)],e.prototype,"stage",void 0),a([u(sp.Skeleton)],e.prototype,"Transition",void 0),a([u(cc.Camera)],e.prototype,"Camera",void 0),a([u({type:cc.Node,tooltip:"\u5c4f\u853d\u5c42"})],e.prototype,"SafeMask",void 0),a([u({type:cc.Animation,tooltip:"\u8f6c\u573a\u5c42"})],e.prototype,"BlackMask",void 0),n=a([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../event/EventManager":"EventManager","./PopUpManager":"PopUpManager"}],URLLoaderDataFormat:[function(t,e,n){"use strict";cc._RF.push(e,"60eechfVz5Ej4xP/lgbCcVX","URLLoaderDataFormat"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();n.default=i,cc._RF.pop()},{}],URLLoader:[function(t,e,n){"use strict";cc._RF.push(e,"41f7ahxHLhPU54z4kDBlp8N","URLLoader");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("./URLLoaderDataFormat"),r=t("./URLRequestMethod"),s=t("./URLVariables"),c=t("./HttpRequest"),l=t("./HttpResponseType"),u=t("../event/EventDispatcher"),p=t("../event/EventConst"),d=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.dataFormat=a.default.TEXT,n.data=null,n._request=null,n._status=-1,e&&n.load(e),n}return o(e,t),e.prototype.$getUrl=function(t){var e=t.url;return-1==e.indexOf("?")&&t.method==r.default.GET&&t.data&&t.data instanceof s.default&&(e=e+"?"+t.data.toString()),e},e.prototype.load=function(t){this._request=t,this.data=null;var e=this;if(e.dataFormat!=a.default.TEXTURE)if(e.dataFormat!=a.default.SOUND){var n,i=this.$getUrl(t),o=new c.default;o.open(i,t.method),t.method!=r.default.GET&&t.data&&(t.data instanceof s.default?(o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n=t.data.toString()):(o.setRequestHeader("Content-Type","multipart/form-data"),n=t.data));for(var u=t.requestHeaders.length,d=0;d<u;d++){var h=t.requestHeaders[d];o.setRequestHeader(h.name,h.value)}o.addEventListener(p.default.COMPLETE,function(){e.data=o.response,e.dispatch(p.default.COMPLETE)},this),o.addEventListener(p.default.IO_ERROR,function(){e.dispatch(p.default.IO_ERROR)},this),o.responseType=e.dataFormat==a.default.BINARY?l.default.ARRAY_BUFFER:l.default.TEXT,o.send(n)}else this.loadSound(e);else this.loadTexture(e)},e.prototype.getResponseType=function(t){switch(t){case a.default.TEXT:case a.default.VARIABLES:return a.default.TEXT;case a.default.BINARY:return"arraybuffer";default:return t}},e.prototype.loadSound=function(){},e.prototype.loadTexture=function(){},e.prototype.__recycle=function(){this._request=null,this.data=null},e}(u.default);n.default=d,cc._RF.pop()},{"../event/EventConst":"EventConst","../event/EventDispatcher":"EventDispatcher","./HttpRequest":"HttpRequest","./HttpResponseType":"HttpResponseType","./URLLoaderDataFormat":"URLLoaderDataFormat","./URLRequestMethod":"URLRequestMethod","./URLVariables":"URLVariables"}],URLRequestMethod:[function(t,e,n){"use strict";cc._RF.push(e,"2068bsxiJxLWquHLCZvDk2m","URLRequestMethod"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.GET="GET",t.POST="POST",t}();n.default=i,cc._RF.pop()},{}],URLRequest:[function(t,e,n){"use strict";cc._RF.push(e,"8a818P/2W1Ju6FDjg1es0Om","URLRequest"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("./URLRequestMethod");n.default=function(t){this.data=null,this.method=i.default.GET,this.url="",this.requestHeaders=[],this.url=t},cc._RF.pop()},{"./URLRequestMethod":"URLRequestMethod"}],URLVariables:[function(t,e,n){"use strict";cc._RF.push(e,"d0206KQ7mxDeJpY7m+UMw+N","URLVariables"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.variables=null,null!==t&&this.decode(t)}return t.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,n=/[?&]?([^=]+)=([^&]*)/g;e=n.exec(t);){var i=decodeURIComponent(e[1]),o=decodeURIComponent(e[2]);if(i in this.variables!=0){var a=this.variables[i];a instanceof Array?a.push(o):this.variables[i]=[a,o]}else this.variables[i]=o}},t.prototype.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var n in t)e.push(this.encodeValue(n,t[n]));return e.join("&")},t.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},t.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},t}();n.default=i,cc._RF.pop()},{}],UpdateCoin:[function(t,e,n){"use strict";cc._RF.push(e,"a458a2S2LlD85JIe0Nj3oBZ","UpdateCoin");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/core/event/EventManager"),s=t("../../Datas/EventName"),c=t("../UserData"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabCoin=null,e}return o(e,t),e.prototype.onLoad=function(){r.default.instance.on(s.default.UpdateCoin,this.updateCoin,this)},e.prototype.onDestroy=function(){r.default.instance.off(s.default.UpdateCoin,this.updateCoin,this)},e.prototype.onEnable=function(){this.updateCoin()},e.prototype.updateCoin=function(){this.LabCoin.string=c.default.instance.Coin.toString()},a([p(cc.Label)],e.prototype,"LabCoin",void 0),a([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Framework/core/event/EventManager":"EventManager","../../Datas/EventName":"EventName","../UserData":"UserData"}],UserDataTemplate:[function(t,e,n){"use strict";cc._RF.push(e,"b8e1fzJrWhHAKrkkOZ6Q4Ux","UserDataTemplate"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.defaultDataFormat={createtime:0,lasttime:0,loginDayFirstTime:0,online:0,loginSeries:0,loginTotal:0},this.initCallBack=null,this.initObj=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initData=function(t,e){this.initCallBack=t,this.initObj=e,GameApp.SDK.init(),GameApp.SDK.initAD();var n=Object.keys(this.defaultDataFormat);GameApp.SDK.getData(n,UserData.instance.initlocalStorageData,UserData.instance)},t.prototype.initlocalStorageData=function(t){this.setData("language",GameApp.SDK.getLocal());var e=cc.sys.now();if(t.createtime){var n=new Date(e-864e5).getTime();DateUtils.timeFormat(t.loginDayFirstTime)==DateUtils.timeFormat(n)&&(t.loginSeries+=1),t.loginTotal++,t.lasttime=e,GameApp.SDK.setData(t)}else(t=JSON.parse(JSON.stringify(this.defaultDataFormat))).createtime=e,t.loginDayFirstTime=e,t.lasttime=e,t.online=e,t.loginSeries=1,t.loginTotal=1,this.localStorageData=t,GameApp.SDK.setData(t);this.initCallBack.apply(this.initObj),this.initCallBack=null,this.initObj=null},t.prototype.setData=function(t,e){this.localStorageData[t]=e;var n={};n[t]=e,GameApp.SDK.setData(n)},t.prototype.setObjData=function(t){for(var e in t)this.localStorageData[e]=t[e];GameApp.SDK.setData(t)},t.prototype.getData=function(t){return this.localStorageData[t]},t.prototype.clearUserData=function(){GameApp.SDK.clearData(),GameApp.SDK.setData(this.defaultDataFormat)},t.prototype.GameDataLoaded=function(){GameApp.SDK.Command("gameResLoaded"),I18N.loadProperty(RESManager.getResByType("defaultLocal",ResourceType.TEXT),RESManager.getResByType("userLocal",ResourceType.TEXT))},t._instance=null,t}();n.default=i,cc._RF.pop()},{}],UserData:[function(t,e,n){"use strict";cc._RF.push(e,"abc0fDJdHBJsIVtHjUtZ5b/","UserData"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Framework/core/GameApp"),o=t("../../Framework/core/util/I18N"),a=t("../../Framework/core/util/DateUtils"),r=t("../../Framework/core/manager/RESManager"),s=t("../Datas/GameDataManager"),c=t("../../Framework/core/manager/SoundManager"),l=t("../../Framework/core/util/Utils"),u=t("../GameConfig"),p=function(){function t(){this.defaultDataFormat={uid:"",Sound:[!0,!0],Volume:10,createtime:0,lasttime:0,loginDayFirstTime:0,online:0,loginSeries:0,loginTotal:0,language:"",languageKey:"en",Level:0,Coin:0,boxPro:0,Milestone:{},StoreTime:{},Filp:1,FilpBuy:0,Turn:1,TurnBuy:0,Find:1,FindBuy:0,TurnTableCount:0,FreeCoinCount:0,Sign:!1,SignCount:0},this.initCallBack=null,this.initObj=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initData=function(t,e){this.initCallBack=t,this.initObj=e,i.default.SDK.init(),i.default.SDK.initAD();var n=Object.keys(this.defaultDataFormat);i.default.SDK.getData(n,this.initlocalStorageData,this)},t.prototype.initlocalStorageData=function(t){var e=cc.sys.now();if(t.createtime){var n=new Date(e-864e5).getTime();a.default.timeFormat(t.loginDayFirstTime)==a.default.timeFormat(n)&&(t.loginSeries+=1,t.DailyLevelIndex+=1,t.WeekLevelIndex+=1),a.default.getTodayDate(new Date(t.lasttime))!=a.default.getTodayDate()&&(t.TurnTableCount=1,t.FilpBuy=0,t.TurnBuy=0,t.FindBuy=0,t.Sign=!1),l.default.beginOfWeek(new Date(t.lasttime))!=l.default.beginOfWeek(new Date)&&(t.WeekFinishTime=""),t.loginTotal++,t.lasttime=e}else(t=JSON.parse(JSON.stringify(this.defaultDataFormat))).createtime=e,t.loginDayFirstTime=e,t.lasttime=e,t.online=e,t.loginSeries=1,t.loginTotal=1,t.TurnTableCount=1;c.default.instance.musicLock=t.Sound[0],c.default.instance.effectLock=t.Sound[1],this.localStorageData=t,i.default.SDK.setData(t),this.initStarData(),"string"==typeof t.language&&""!=t.language||this.setData("language",i.default.SDK.getLocal()),this.initCallBack.apply(this.initObj),this.initCallBack=null,this.initObj=null},t.prototype.setData=function(t,e){this.localStorageData[t]=e;var n={};n[t]=e,i.default.SDK.setData(n)},t.prototype.setObjData=function(t){for(var e in t)this.localStorageData[e]=t[e];i.default.SDK.setData(t)},t.prototype.getData=function(t){return this.localStorageData[t]},t.prototype.clearUserData=function(){i.default.SDK.clearData(),i.default.SDK.setData(this.defaultDataFormat)},t.prototype.GameDataLoaded=function(){i.default.SDK.Command("gameResLoaded"),o.default.loadProperty(r.default.getResource(s.default.instance.DefaultLocation),r.default.getResource(s.default.instance.UserLocation))},Object.defineProperty(t.prototype,"Uid",{get:function(){return this.localStorageData.uid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this.localStorageData.language||o.default.defaultLocation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Level",{get:function(){return this.localStorageData.Level||0},set:function(t){this.localStorageData.Level=t,this.setData("Level",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Coin",{get:function(){return this.localStorageData.Coin||0},set:function(t){this.localStorageData.Coin=t,this.setData("Coin",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Filp",{get:function(){return this.localStorageData.Filp||0},set:function(t){this.localStorageData.Filp=t,this.setData("Filp",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Turn",{get:function(){return this.localStorageData.Turn||0},set:function(t){this.localStorageData.Turn=t,this.setData("Turn",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Find",{get:function(){return this.localStorageData.Find||0},set:function(t){this.localStorageData.Find=t,this.setData("Find",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TurnTableCount",{get:function(){return this.localStorageData.TurnTableCount||0},set:function(t){this.localStorageData.TurnTableCount=t,this.setData("TurnTableCount",t)},enumerable:!1,configurable:!0}),t.prototype.initStarData=function(){for(var e=[],n=Math.floor(this.Level/100),o=0;o<=n;o++)e.push("LevelStar"+o);i.default.SDK.getData(e,t.instance.initlocalStorageStarData,t.instance)},t.prototype.initlocalStorageStarData=function(t){if(null!=t&&""!=t)for(var e in t)this.localStorageData[e]=t[e]},t.prototype.getStarByLevel=function(t){var e=Math.floor(t/100);return null!=this.localStorageData["LevelStar"+e]&&this.localStorageData["LevelStar"+e][t]||0},t.prototype.setStarByLevel=function(t,e){var n=Math.floor(t/100);this.localStorageData["LevelStar"+n]||(this.localStorageData["LevelStar"+n]={}),null!=this.localStorageData["LevelStar"+n][t]?e>Number(this.localStorageData["LevelStar"+n][t])&&(this.localStorageData["LevelStar"+n][t]=e):this.localStorageData["LevelStar"+n][t]=e,this.setData("LevelStar"+n,this.localStorageData["LevelStar"+n])},t.prototype.getAllStar=function(){for(var t=0,e=Math.floor(u.default.LevelMax/100),n=0;n<e;n++)if(null!=this.localStorageData["LevelStar"+n])for(var i in this.localStorageData["LevelStar"+n])t+=this.localStorageData["LevelStar"+n][i];return t},t.prototype.getChapterStarCount=function(t,e){for(var n=0,i=t;i<=e;i++)n+=this.getStarByLevel(i);return n},t.prototype.isMilestoneRewardGet=function(t){return this.localStorageData.Milestone||(this.localStorageData.Milestone={}),!!this.localStorageData.Milestone[t]},t.prototype.setMilestoneReward=function(t){this.localStorageData.Milestone||(this.localStorageData.Milestone={}),this.localStorageData.Milestone[t]||(this.localStorageData.Milestone[t]=1),this.setData("Milestone",this.localStorageData.Milestone)},t.prototype.getMilestoneUnGetRewardCount=function(t){this.localStorageData.Milestone||(this.localStorageData.Milestone={});for(var e=0,n=1;n<=t;n++)1!=this.localStorageData.Milestone[t]&&e++;return e},t.prototype.setStoreTime=function(t){this.localStorageData.StoreTime||(this.localStorageData.StoreTime={}),this.localStorageData.StoreTime[t]||(this.localStorageData.StoreTime[t]=0),this.localStorageData.StoreTime[t]++,this.setData("StoreTime",this.localStorageData.StoreTime)},t.prototype.getStoreTime=function(t){return this.localStorageData.StoreTime||(this.localStorageData.StoreTime={}),this.localStorageData.StoreTime[t]||0},t._instance=null,t}();n.default=p,cc._RF.pop()},{"../../Framework/core/GameApp":"GameApp","../../Framework/core/manager/RESManager":"RESManager","../../Framework/core/manager/SoundManager":"SoundManager","../../Framework/core/util/DateUtils":"DateUtils","../../Framework/core/util/I18N":"I18N","../../Framework/core/util/Utils":"Utils","../Datas/GameDataManager":"GameDataManager","../GameConfig":"GameConfig"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"3c77evA5ONJw4etf/Iu6SDf","Utils");var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,r=(o.property,function(){function t(){}var e;return e=t,t.getAngle=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.reflect=function(t,e){return t.sub(e.mul(2*cc.Vec3.dot(t,e)))},t.reflect_v2=function(t,e){return t.sub(e.mul(2*cc.Vec2.dot(t,e)))},t.getDistance=function(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))},t.getDistanceVec=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.get2DNormalVec=function(t){return cc.v2(-t.y,t.x)},t.lineDistance=function(t,e,n,i,o,a){var r=i-e,s=t-n,c=n*e-t*i;return Math.abs(r*o+s*a+c)/Math.sqrt(r*r+s*s)},t.footPointOfPointToSegment=function(t,e,n,i,o,a){if(n==o&&i==a)return[cc.v2(n,i),!0];var r=-((n-t)*(o-n)+(i-e)*(a-i))/((n-o)*(n-o)+(i-a)*(i-a)),s=r*(o-n)+n,c=r*(a-i)+i,l=!0;return(r<0||r>1)&&(l=!1),[cc.v2(s,c),l]},t.nearestDistanceOfPointToSegment=function(t,e,n,i,o,a){if(n==o&&i==a)return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e));var r=-((n-t)*(o-n)+(i-e)*(a-i))/((n-o)*(n-o)+(i-a)*(i-a));if(r<=0)return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e));if(r>=1)return Math.sqrt((o-t)*(o-t)+(a-e)*(a-e));var s=r*(o-n)+n,c=r*(a-i)+i;return Math.sqrt((s-t)*(s-t)+(c-e)*(c-e))},t.nearestPointOfPointToSegment=function(t,e,n,i,o,a){if(n==o&&i==a)return cc.v2(n,i);var r=-((n-t)*(o-n)+(i-e)*(a-i))/((n-o)*(n-o)+(i-a)*(i-a));if(r<=0)return cc.v2(n,i);if(r>=1)return cc.v2(o,a);var s=r*(o-n)+n,c=r*(a-i)+i;return cc.v2(s,c)},t.calculateLineIntersectionPoint=function(t,e,n,i,o,a,r,s){var c=(t-n)*(a-s)-(e-i)*(o-r);if(0===c)return null;var l=((t*i-e*n)*(o-r)-(t-n)*(o*s-a*r))/c,u=((t*i-e*n)*(a-s)-(e-i)*(o*s-a*r))/c;return cc.v2(l,u)},t.calculateLineToLineIntersectionPoint=function(t,e,n,i){var o=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x),a=(t.x-i.x)*(e.y-i.y)-(t.y-i.y)*(e.x-i.x);if(o*a>=0)return null;var r=(n.x-t.x)*(i.y-t.y)-(n.y-t.y)*(i.x-t.x);if(r*(r+o-a)>=0)return null;var s=r/(a-o),c=s*(e.x-t.x),l=s*(e.y-t.y);return cc.v2(t.x+c,t.y+l)},t.isPointOnLineSegment=function(t,e,n){return 0===e.sub(t).cross(n.sub(t))&&Math.min(t.x,e.x)<=n.x&&n.x<=Math.max(t.x,e.x)&&Math.min(t.y,e.y)<=n.y&&n.y<=Math.max(t.y,e.y)},t.getLineCircleIntersectionPoint=function(t,e,n,i){var o=this.footPointOfPointToSegment(n.x,n.y,t.x,t.y,e.x,e.y),a=o[0],r=(o[1],cc.v2(a).sub(n));if(r.mag()>i)return null;if(r.mag()<=0)return n;var s=r.mag(),c=Math.sqrt(i*i-s*s);return t.sub(cc.v2(a)).normalize().mul(c).add(cc.v2(a))},t.getLineAngle=function(t,e,n,i){var o=n-t,a=i-e,r=a/o,s=Math.atan(r);return o<0?s+=Math.PI:a<0&&(s+=Math.PI+Math.PI),s<0&&(s=Math.PI+Math.PI-s),180*s/Math.PI},t.lpad=function(t,e,n){for(n=n.charAt(0),t||(t=n);t.length<e;)t=n+t;return t},t.rpad=function(t,e,n){for(n=n.charAt(0),t||(t=n);t.length<e;)t+=n;return t},t.startWith=function(t,e){return!(!t||!e||t.length<e.length)&&t.substring(0,e.length)==e},t.endWith=function(t,e){return!(!t||!e||t.length<e.length)&&t.substring(t.length-e.length)==e},t.formatNumber=function(t,e){e=e>=0&&e<=20?e:2;for(var n=parseFloat((t+"").replace(/[^\d\.-]/g,"")).toFixed(e)+"",i=n.split(".")[0].split("").reverse(),o=n.split(".")[1],a="",r=0;r<i.length;r++)a+=i[r]+((r+1)%3==0&&r+1!=i.length?",":"");return e>0?a.split("").reverse().join("")+"."+o:a.split("").reverse().join("")},t.randSeed=function(){return e._seed^=e._seed<<21,e._seed^=e._seed>>>35,e._seed^=e._seed<<4,e._seed=e._seed>>>0,e._seed},t.nextRand=function(t){return e.randSeed()%t},t.randomInt=function(t,e){return Math.floor((e-t+1)*Math.random())+t},t.randomIntMulti=function(t,e,n){void 0===n&&(n=1);var i={};if(e-t<n)for(var o=t;o<e;o++)i[o]=o;else for(;;){var a=this.randomInt(t,e);if(i[a]=a,Object.keys(i).length>=n)break}return Object.values(i)},t.randomFloat=function(t,e){return(e-t)*Math.random()+t},t.randomPercent=function(t,e){for(var n=0;n<10;n++)Math.random();return~~(Math.random()*e+1)<=t},t.saveJSON=function(t,e){if(t){e||(e="json.json"),"object"==typeof t&&(t=JSON.stringify(t));var n=new Blob([t],{type:"text/json"}),i=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=e,o.href=window.URL.createObjectURL(n),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}else alert("data is null")},t.prototype.booleanStringToBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t&&"false"!==t.toLowerCase()},t.prototype.formatValue=function(t,e){return"object"==typeof e&&null!==e?e:null==e||isNaN(e)?t:e},t.shuffleArray=function(t){for(var e,n=t.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1));e=[t[i],t[n]],t[n]=e[0],t[i]=e[1]}},t.beginOfWeek=function(t){var e,n=t.getDay();e=0==n?6:n-1;var i=t.getTime()-864e5*e,o=new Date(i).getDate(),a=new Date(i).getMonth()+1;return new Date(i).getFullYear()+"/"+(a<10?"0"+a:a)+"/"+(o<10?"0"+o:o)},t.endOfWeek=function(t){var e=t.getDay();if(0==e){var n=t.getDate(),i=t.getMonth()+1;return t.getFullYear()+"/"+(i<10?"0"+i:i)+"/"+(n<10?"0"+n:n)}var o=7-e,a=t.getTime()+864e5*o;return n=new Date(a).getDate(),i=new Date(a).getMonth()+1,new Date(a).getFullYear()+"/"+(i<10?"0"+i:i)+"/"+(n<10?"0"+n:n)},t.MAXRATIO=1/4294967296,t._seed=4294967295,e=i([a],t)}());n.default=r,cc._RF.pop()},{}],WebSocketManager:[function(t,e,n){"use strict";cc._RF.push(e,"017d48sGK5NmKkQ5+2LAvc9","WebSocketManager"),Object.defineProperty(n,"__esModule",{value:!0});var i=t("../net/EgretWebSocket"),o=t("../event/EventConst"),a=t("../BaseConfig"),r=function(){function t(){this.msgList=[]}return t.prototype.initHandler=function(t,e){this.callBack=t,this.backObj=e},t.prototype.connect=function(t){this.socket||(this.socket=new i.default,this.socket.type=i.default.TYPE_STRING,this.socket.addEventListener(o.default.PROGRESS,this.onReceiveMessage,this),this.socket.addEventListener(o.default.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(o.default.CLOSE,this.onSocketClose,this),this.socket.addEventListener(o.default.IO_ERROR,this.onSocketError,this)),this.socket.connectByUrl(t)},t.prototype.sendData=function(t){var e={type:2,uid:UserData.instance.uid,nick:a.default.SDK.getNickName(),icon:a.default.SDK.getPhoto(),msg:t},n="1002:"+UserData.instance.tid+":"+UserData.instance.uid+JSON.stringify(e);this.msgList.push(n),this.doSend()},t.prototype.close=function(){this.socket&&this.socket.connected&&this.socket.close()},t.prototype.ticket=function(){this.connected?(this.socket.writeUTF("1"),this.socket.flush()):this.connect(UserData.instance.getIMURL())},Object.defineProperty(t.prototype,"connected",{get:function(){return!(!this.socket||!this.socket.connected)},enumerable:!1,configurable:!0}),t.prototype.doSend=function(){if(this.connected){for(var t=0,e=this.msgList;t<e.length;t++){var n=e[t];this.socket.writeUTF(n),this.socket.flush()}this.msgList=[]}else this.connect(UserData.instance.getIMURL())},t.prototype.jionTeam=function(){var t={type:1,uid:UserData.instance.uid},e="1001:"+UserData.instance.tid+":"+UserData.instance.uid+":1"+JSON.stringify(t);this.socket.writeUTF(e)},t.prototype.onSocketOpen=function(){console.log("WebSocketOpen"),this.jionTeam()},t.prototype.onSocketClose=function(){console.log("WebSocketClose")},t.prototype.onSocketError=function(t){console.log("WebSocketError",t)},t.prototype.onReceiveMessage=function(){var t=this.socket.readUTF();if("1"!=t){var e=JSON.parse(t);1==e.type&&e.uid==UserData.instance.uid&&this.doSend(),this.callBack&&this.callBack.call(this.backObj,e)}},t.instance=new t,t}();n.default=r,cc._RF.pop()},{"../BaseConfig":"BaseConfig","../event/EventConst":"EventConst","../net/EgretWebSocket":"EgretWebSocket"}]},{},["BlackBlockComponent","DesignView","EnhancedComponent","LaunchComponent","LongTouchComponent","NestPageView","SafeAreaAdapterComponent","SafeAreaWidgetAdapterComponent","SpriteScaleAdapterComponent","Collider","NodeX","List","ListItem","ScrollViewPlusComponent","ScrollViewPlusItemComponent","AssetsLoader","AssetsSkin","BaseConfig","GameApp","HotUpdate","QuadTreeCollider","UserDataTemplate","TalkingdataSDK","ByteArray","Endian","PNGDataDecoder","DecodeStream","FlateStream","AnimatorControlParticle","BaseWindow","ButtonEffect","ColorAssembler2D","GrayRenderState","Image","LabelAdapter","LocalImage","LocalText","SafeArea","ScreenAdapter","DataEvent","EventConst","EventDispatcher","EventInterface","EventManager","Logger","LoggerInterface","ADManager","DataManager","ErrorManager","ObjectPoolManager","PopUpManager","RESManager","RemotConfigManager","SoundManager","TaskManager","TickManager","UIManager","WebSocketManager","EgretWebSocket","HTML5WebSocket","HttpRequest","HttpResponseType","NetManager","URLLoader","URLLoaderDataFormat","URLRequest","URLRequestMethod","URLVariables","ChuanYinH5","ISDK","SDKAndroid","SDKBase","SDKConfig","SDKConst","SDKDefault","SDKKwai","SDKiOS","ColorUtil","DateUtils","I18N","PlatformUtils","RandomUtils","StorageUtil","Utils","QuadTree","Queue","Stack","EventName","GameDataManager","PopupKey","PopuprRegeit","GameConfig","GameLaunch","EffectClearGuideLine","EffectClearLine","EffectUtils","UpdateCoin","GameCore","GameGuide","GameLinkAlgorithm","ItemsUtils","ItemLevelMap","ItemMilestone","ItemStore","SpriteUtils","TileUtils","Tile","UIGame","UIGameBoxGet","UIGameChapterUnlock","UIGameDailySign","UIGameFail","UIGameFreeCoin","UIGameGuideOver","UIGameItemGet","UIGameLandmarkUnlock","UIGameLevelComplete","UIGameMap","UIGameMenu","UIGameMineOver","UIGameOver","UIGameOverGoldGet","UIGamePause","UIGameSetting","UIGameSkillBuy","UIGameStartLevel","UIGameTimeOver","UIGameTip","UIGameTurnTable","UIGameUnlimitedTime","UserData"]);