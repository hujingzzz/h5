(self.webpackChunkdream_home_merge_design=self.webpackChunkdream_home_merge_design||[]).push([[376],{777:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){let adBannerId="",adInterstitialId="",adAppBoxId="",adBoxPortalId="",nativeAdIdMap={"state-main-banner":"","state-list-banner":"","state-shop-banner":"","state-pause-banner":"","state-complete-banner":""},rewardedAdIdMap={revive:"","double-coin":"","add-coin":""};const USE_NATIVE_AD=xyx.isSupportNativeAd&&!xyx.isVIVO,getInterstitialAdDelay=()=>window.IsGameApproved?500:0,isAbleShowMainInterstitial=()=>{const prevState=QGUtils.gameState.getPrevState(),isValid=-1===[QGUtils.GameStates.LOADING].indexOf(prevState);return!!(window.IsGameApproved&&isValid&&QGUtils.probability(80))};function initSystemAdLogic(){const adBanner=window.adBanner=xyx.createBannerAd(adBannerId,{style:{vertical:"bottom",horizontal:"center",autoShowInterval:0}}),showBannerOnState=(window.adInterstitial=xyx.createInterstitialAd(adInterstitialId),state=>(actionParam={})=>{(actionParam=>{adBanner.asyncShow(null,actionParam)})({...actionParam,isNeedProcess:()=>QGUtils.gameState.getCurrState()===state})});showBannerOnState(QGUtils.GameStates.MAIN),showBannerOnState(QGUtils.GameStates.LIST),showBannerOnState(QGUtils.GameStates.READY),showBannerOnState(QGUtils.GameStates.SHOP),showBannerOnState(QGUtils.GameStates.COMPLETE),showBannerOnState(QGUtils.GameStates.GAME);window.xyxNeedOriginInterstitialAdLogic=!0}function initCustomAdLogic(){const adBanner=window.adBanner=xyx.createCustomAd(nativeAdIdMap["state-game-banner"]),showBanner=(id,opt={})=>adBanner.show({id,...opt}),hideBanner=()=>adBanner.hide(),registerBanner=state=>{QGUtils.onState(state,(()=>{showBanner(nativeAdIdMap[`state-${state}-banner`])}),hideBanner)},showInterstitial=(id,onComplete)=>{let bg;const customAdCenterY=(window.innerHeight-xyx.calcCustomAdHeight(xyx.VIVOAdLayout.UP_IMG_DOWN_TEXT))/2,scaleY=window.innerHeight/2532,customAdVertical=customAdCenterY+(window.IsGameApproved?130*scaleY:0);showBanner(id,{willReloadOnNoAd:!1,vivoAdLayout:xyx.VIVOAdLayout.UP_IMG_DOWN_TEXT,adStyle:{vertical:customAdVertical},onShow(){bg=NativeUI.Popup({alpha:.3}),Laya.stage.addChild(bg.node)},onComplete(){bg&&bg.destroy(),onComplete&&onComplete()}})};QGUtils.onState(QGUtils.GameStates.MAIN,(()=>{isAbleShowMainInterstitial()&&showInterstitial(nativeAdIdMap["state-main-interstitial"])})),registerBanner(QGUtils.GameStates.LIST),registerBanner(QGUtils.GameStates.SHOP),registerBanner(QGUtils.GameStates.READY),registerBanner(QGUtils.GameStates.GAME),QGUtils.onState(QGUtils.GameStates.COMPLETE,(()=>{const prevState=QGUtils.gameState.getPrevState(),isValid=-1!==[QGUtils.GameStates.GAME].indexOf(prevState);var delay,id,onComplete;window.IsGameApproved||isValid?(delay=getInterstitialAdDelay(),id=nativeAdIdMap["state-complete-interstitial"],onComplete=()=>showBanner(nativeAdIdMap["state-complete-banner"]),setTimeout((()=>{showInterstitial(id,onComplete)}),delay)):showBanner(nativeAdIdMap["state-complete-banner"])}),hideBanner)}function initAdLogic(){window.adRewardedVideo=xyx.createRewardedVideoAd(""),window.rewardedAdIdMap=rewardedAdIdMap,function(){if(xyx.isSupportAppBox()&&adAppBoxId){const adAppBox=window.adAppBox=xyx.createAppBox(adAppBoxId);let moreGameBtn;const initMoreGameBtn=()=>{NativeUI.Bitmap.loadFromUrl("btn-more-game.png").then((btn=>{NativeUI.getRootNode().addChild(btn.node),btn.x=0,btn.y=0,btn.addEventListener("click",(()=>{QGUtils.showAdAppBox(adAppBox)}))}))},destroyMoreGameBtn=()=>{moreGameBtn&&(moreGameBtn.destroy(),moreGameBtn=null)};QGUtils.onState(QGUtils.GameStates.MAIN,initMoreGameBtn,destroyMoreGameBtn)}}(),xyx.isSupportBoxPortalAd()&&adBoxPortalId&&QGUtils.registerAdBoxPortal({adBoxId:adBoxPortalId,showOnState:[QGUtils.GameStates.MAIN,QGUtils.GameStates.COMPLETE],marginTop:435}),USE_NATIVE_AD?function(){const adBanner=window.adBanner=xyx.createBannerAd(adBannerId,{style:{vertical:"bottom",horizontal:"center",autoShowInterval:0}}),adInterstitial=window.adInterstitial=xyx.createInterstitialAd(adInterstitialId),closeImg=new Image;closeImg.src="btn-close-ad.png";const layoutInterstitial=(data,{tag})=>{let nativeAd=NativeUI.InterstitialAd1({data,closeImg,withPopup:!0,boundRect:{width:0,height:0},handleClick:()=>NativeAd.reportClickAdWithTag(tag),handleClose:()=>NativeAd.requestHideAdWithTag(tag)});return nativeAd.ad.x=(Laya.stage.width-nativeAd.ad.width)/2,nativeAd.ad.y=(Laya.stage.height-nativeAd.ad.height)/2,Promise.resolve({handleHide(){nativeAd&&nativeAd.popup&&(nativeAd.popup.destroy(),nativeAd=null)}})},layoutBanner=(data,{tag})=>{const nativeBanner=NativeUI.BannerAd1({data,closeImg,boundRect:{width:0,height:0},direction:Math.random()>.3?NativeUI.BannerAd1.DIRECTION_IMAGE_TEXT:NativeUI.BannerAd1.DIRECTION_TEXT_IMAGE,titleFontSize:32,descFontSize:24,closeBtnSize:38,handleClick:()=>NativeAd.reportClickAdWithTag(tag),handleClose:()=>NativeAd.requestHideAdWithTag(tag)});return window.nativeBanner=nativeBanner,Promise.resolve({handleHide:()=>{nativeBanner.ad&&nativeBanner.ad.destroy()}})},isInStateAsyncGenerator=state=>()=>Promise.resolve(QGUtils.gameState.isInState(state)),isInStateDelayCheckGenerator=(state,getDelay)=>()=>QGUtils.delay(getDelay())(isInStateAsyncGenerator(state)),TaggedBannerAd=(state,preload=[],showOnEnterState=!0)=>{window.NativeAd.registeTagedAd({tag:`state-${state}-banner`,systemAd:adBanner,nativeAdId:nativeAdIdMap[`state-${state}-banner`],preferImgAsIcon:!0,isAbleShow:isInStateAsyncGenerator(state),layoutFunction:layoutBanner,showOnEnterState:showOnEnterState?[state]:[],hideOnLeaveState:[state],preloadOnEnterState:[].concat(preload)})};TaggedBannerAd(QGUtils.GameStates.MAIN,QGUtils.GameStates.LOADING,!1),TaggedBannerAd(QGUtils.GameStates.COMPLETE,QGUtils.GameStates.GAME,!1),TaggedBannerAd(QGUtils.GameStates.GAME,QGUtils.GameStates.MAIN),((state,preload=[],showOnEnterState=!0)=>{window.NativeAd.registeTagedAd({tag:`state-${state}-interstitial`,systemAd:xyx.isOPPO?null:adInterstitial,nativeAdId:nativeAdIdMap[`state-${state}-interstitial`],weight:NativeAd.AdWeight.High,isNeedIcon:!1,isAbleShow:isInStateDelayCheckGenerator(state,getInterstitialAdDelay),layoutFunction:layoutInterstitial,showOnEnterState:showOnEnterState?[state]:[],hideOnLeaveState:[state],preloadOnEnterState:[].concat(preload)})})(QGUtils.GameStates.COMPLETE,QGUtils.GameStates.GAME,!1),QGUtils.onState(QGUtils.GameStates.MAIN,(()=>{isAbleShowMainInterstitial()&&NativeAd.requestShowAdWithTag("state-main-interstitial")})),QGUtils.onGameEvent(QGUtils.GameEvent.LevelComplete,(()=>{window.IsGameApproved?setTimeout((()=>{NativeAd.requestShowAdWithTag("state-complete-interstitial"),NativeAd.requestShowAdWithTag("state-complete-banner")}),getInterstitialAdDelay()):NativeAd.requestShowAdWithTag("state-complete-banner")}))}():xyx.isSupportCustomAd()?initCustomAdLogic():initSystemAdLogic()}if(window.NeedPrivacyConfirm){const handleShow=privacyConfirm=>{window.privacyConfirm=privacyConfirm};window.autoShowPrivacyConfirm=()=>new Promise(((resolve,reject)=>{QGUtils.privacyConfirm.autoShowPrivacyConfirm({showOnEvent:null,parentNodeGetter:()=>null,onShow:handleShow,onComplete:()=>{window.NeedInitAdAfterPrivacyConfirm&&initAdLogic(),QGUtils.gameLogin({hwAppId:""}).then(resolve)}})}));const showPrivacyConfirm=()=>{QGUtils.privacyConfirm.showPrivacyConfirm({parentNodeGetter:()=>null}).then(handleShow)};let btn;const initBtn=()=>QGUtils.assetManager.load(["btn-show-privacy-confirm.png"],{isCache:!1}).then((([img])=>{const btn=NativeUI.Bitmap.loadFromImage(img),rootNode=NativeUI.getRootNode();return btn.addEventListener("click",showPrivacyConfirm),rootNode.addChild(btn.node),btn.scaleX=btn.scaleY=.3,btn.y=112,btn.x=22,window.btnShowPrivacyConfirm=btnShowPrivacyConfirm=btn,btn})),destroyBtn=()=>{btn&&(btn.destroy(),btn=null)};QGUtils.onState(QGUtils.GameStates.MAIN,initBtn,destroyBtn)}else window.autoShowPrivacyConfirm=()=>Promise.resolve(),initAdLogic()}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},842:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){window.Adapter=function(exports){class Matrix{constructor(a=1,b=0,c=0,d=1,tx=0,ty=0,nums=0){this._bTransform=!1,this.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty,this._checkTransform()}identity(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this._bTransform=!1,this}_checkTransform(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d}setTranslate(x,y){return this.tx=x,this.ty=y,this}translate(x,y){return this.tx+=x,this.ty+=y,this}scale(x,y){return this.a*=x,this.d*=y,this.c*=x,this.b*=y,this.tx*=x,this.ty*=y,this._bTransform=!0,this}rotate(angle){var cos=Math.cos(angle),sin=Math.sin(angle),a1=this.a,c1=this.c,tx1=this.tx;return this.a=a1*cos-this.b*sin,this.b=a1*sin+this.b*cos,this.c=c1*cos-this.d*sin,this.d=c1*sin+this.d*cos,this.tx=tx1*cos-this.ty*sin,this.ty=tx1*sin+this.ty*cos,this._bTransform=!0,this}skew(x,y){var tanX=Math.tan(x),tanY=Math.tan(y),a1=this.a,b1=this.b;return this.a+=tanY*this.c,this.b+=tanY*this.d,this.c+=tanX*a1,this.d+=tanX*b1,this}invertTransformPoint(out){var a1=this.a,b1=this.b,c1=this.c,d1=this.d,tx1=this.tx,n=a1*d1-b1*c1,a2=d1/n,b2=-b1/n,c2=-c1/n,d2=a1/n,tx2=(c1*this.ty-d1*tx1)/n,ty2=-(a1*this.ty-b1*tx1)/n;return out.setTo(a2*out.x+c2*out.y+tx2,b2*out.x+d2*out.y+ty2)}transformPoint(out){return out.setTo(this.a*out.x+this.c*out.y+this.tx,this.b*out.x+this.d*out.y+this.ty)}transformPointN(out){return out.setTo(this.a*out.x+this.c*out.y,this.b*out.x+this.d*out.y)}getScaleX(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)}getScaleY(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)}invert(){var a1=this.a,b1=this.b,c1=this.c,d1=this.d,tx1=this.tx,n=a1*d1-b1*c1;return this.a=d1/n,this.b=-b1/n,this.c=-c1/n,this.d=a1/n,this.tx=(c1*this.ty-d1*tx1)/n,this.ty=-(a1*this.ty-b1*tx1)/n,this}setTo(a,b,c,d,tx,ty){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty,this}concat(matrix){var a=this.a,c=this.c,tx=this.tx;return this.a=a*matrix.a+this.b*matrix.c,this.b=a*matrix.b+this.b*matrix.d,this.c=c*matrix.a+this.d*matrix.c,this.d=c*matrix.b+this.d*matrix.d,this.tx=tx*matrix.a+this.ty*matrix.c+matrix.tx,this.ty=tx*matrix.b+this.ty*matrix.d+matrix.ty,this}static mul(m1,m2,out){var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty,ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;return 0!==bb||0!==bc?(out.a=aa*ba+ab*bc,out.b=aa*bb+ab*bd,out.c=ac*ba+ad*bc,out.d=ac*bb+ad*bd,out.tx=ba*atx+bc*aty+btx,out.ty=bb*atx+bd*aty+bty):(out.a=aa*ba,out.b=ab*bd,out.c=ac*ba,out.d=ad*bd,out.tx=ba*atx+btx,out.ty=bd*aty+bty),out}static mul16(m1,m2,out){var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty,ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;return 0!==bb||0!==bc?(out[0]=aa*ba+ab*bc,out[1]=aa*bb+ab*bd,out[4]=ac*ba+ad*bc,out[5]=ac*bb+ad*bd,out[12]=ba*atx+bc*aty+btx,out[13]=bb*atx+bd*aty+bty):(out[0]=aa*ba,out[1]=ab*bd,out[4]=ac*ba,out[5]=ad*bd,out[12]=ba*atx+btx,out[13]=bd*aty+bty),out}scaleEx(x,y){var ba=this.a,bb=this.b,bc=this.c,bd=this.d;0!==bb||0!==bc?(this.a=x*ba,this.b=x*bb,this.c=y*bc,this.d=y*bd):(this.a=x*ba,this.b=0*bd,this.c=0*ba,this.d=y*bd),this._bTransform=!0}rotateEx(angle){var cos=Math.cos(angle),sin=Math.sin(angle),ba=this.a,bb=this.b,bc=this.c,bd=this.d;0!==bb||0!==bc?(this.a=cos*ba+sin*bc,this.b=cos*bb+sin*bd,this.c=-sin*ba+cos*bc,this.d=-sin*bb+cos*bd):(this.a=cos*ba,this.b=sin*bd,this.c=-sin*ba,this.d=cos*bd),this._bTransform=!0}clone(){var dec=Matrix.create();return dec.a=this.a,dec.b=this.b,dec.c=this.c,dec.d=this.d,dec.tx=this.tx,dec.ty=this.ty,dec._bTransform=this._bTransform,dec}copyTo(dec){return dec.a=this.a,dec.b=this.b,dec.c=this.c,dec.d=this.d,dec.tx=this.tx,dec.ty=this.ty,dec._bTransform=this._bTransform,dec}toString(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty}destroy(){this.recover()}recover(){Pool.recover("Matrix",this.identity())}static create(){return Pool.getItemByClass("Matrix",Matrix)}}return new class{constructor(){this.matrix=new Matrix,this.offset={x:0,y:0},this.safariOffsetY=0,this.previousOrientation=0,this.scaleX=1,this.scaleY=1}init(designWidth,designHeight){const logo=document.getElementById("logo"),thumbnail=document.getElementById("thumbnail");this.container=document.getElementById("unity-container"),logo.designWidth=533*.7,logo.designHeight=200.2,thumbnail.designWidth=499,thumbnail.designHeight=375,this.designWidth=designWidth+5,this.designHeight=designHeight,this.onSafari=window.navigator.userAgent.indexOf("Safari")>-1,this.onMobile=window.navigator.userAgent.indexOf("Mobile")>-1,window.addEventListener("resize",(()=>{var orientation=window.orientation;this.previousOrientation=orientation,this.onSafari&&(this.safariOffsetY=(window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight)-window.innerHeight),this.resetCanvas()})),window.addEventListener("orientationchange",(e=>{this.resetCanvas()})),setTimeout((()=>{this.resetCanvas()}),50)}formatData(value){return Math.abs(value)<1e-6?0:Math.abs(1-value)<.001?value>0?1:-1:value}get clientWidth(){return window.innerWidth||document.body.clientWidth}get clientHeight(){return window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight}resetCanvas(){var screenWidth=1*this.clientWidth,screenHeight=1*this.clientHeight;this.canvasRotation=!1;var realWidth,realHeight,mat=this.matrix.identity(),scaleX=screenWidth/this.designWidth,scaleY=screenHeight/this.designHeight,canvasWidth=this.designWidth,canvasHeight=this.designHeight,canvasStyle=this.container.style;scaleX=scaleY=Math.min(scaleX,scaleY),canvasWidth=realWidth=Math.ceil(this.designWidth*scaleX),canvasHeight=realHeight=Math.ceil(this.designHeight*scaleY),this.offset.x=.5*(screenWidth-realWidth)/1,this.offset.y=.5*(screenHeight-realHeight)/1,this.offset.x=Math.ceil(this.offset.x-1),this.offset.y=Math.ceil(this.offset.y),mat.translate(this.offset.x,this.offset.y),this.safariOffsetY&&mat.translate(0,this.safariOffsetY),mat.a=this.formatData(mat.a),mat.d=this.formatData(mat.d),mat.tx=this.formatData(mat.tx),mat.ty=this.formatData(mat.ty),canvasStyle.transformOrigin=canvasStyle.msTransformOrigin=canvasStyle.mozTransformOrigin=canvasStyle.oTransformOrigin="0px 0px 0px",canvasStyle.transform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform="matrix("+mat.toString()+")",canvasStyle.width=canvasWidth+"px",canvasStyle.height=canvasHeight+"px",this.safariOffsetY&&mat.translate(0,-this.safariOffsetY),mat.translate(parseInt(canvasStyle.left)||0,parseInt(canvasStyle.top)||0);const logo=document.getElementById("logo"),thumbnail=document.getElementById("thumbnail"),progress=document.getElementById("progress"),loadingView=document.getElementById("LoadingView");loadingView.style.width=canvasWidth/1+"px",loadingView.style.height=canvasHeight/1+"px",logo.width=logo.designWidth*scaleX/1,logo.height=logo.designHeight*scaleY/1,thumbnail.width=thumbnail.designWidth*scaleX/1,thumbnail.height=thumbnail.designHeight*scaleY/1,progress.style.fontSize=40*scaleX/1+"px"}percent(value){document.getElementById("progress").innerHTML="Loading: "+Math.round(value)+"%"}hideLoading(){document.getElementById("unity-container").style.display="none"}}}()}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},417:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{window.XYX_IS_BROWSER=!0;const XYX_GAME_VERSION=window.XYX_GAME_VERSION="1.0.2";window.XYX_GAME_ID="dream-home-merge-design",window.XYX_GAME_NAME="Dream Home Merge Design",window.XYX_USE_VM=!0,window.XYX_IS_DEVELOPMENT=!1;window.self||(window.self=window),window.XYX_IS_BROWSER&&(window.XYX_LOCAL_STORAGE_KEY_PREFIX=window.XYX_GAME_ID);const extendedWindow={location:()=>window.xyxVM.location,navigator:()=>window.xyxVM.navigator,document:()=>window.xyxVM.document,localStorage:()=>window.xyxVM.localStorage,sessionStorage:()=>window.xyxVM.sessionStorage,requestAnimationFrame:()=>window.xyxVM.requestAnimationFrame,cancelAnimationFrame:()=>window.xyxVM.cancelAnimationFrame,XMLHttpRequest:()=>window.xyxVM.XMLHttpRequest,fetch:()=>window.xyxVM.fetch,FontFace:()=>window.xyxVM.FontFace,open:()=>window.xyxVM.open,Image:()=>window.xyxVM.Image,Audio:()=>window.xyxVM.Audio},extendedKeys=new Set(Object.keys(extendedWindow)),globalNames=new Set(["global","window","self","top","parent"]),optionalPropsProxiesByVM=(Object.getOwnPropertyNames(window),new Set(["webkitAudioContext","webkitOfflineAudioContext","matchMedia","PointerEvent","indexedDB","AudioContext"]),new Set([]),new Set(["onfocus","onblur","onload","ontouchstart","ontouchmove","ontouchend","ontouchcancel"]));optionalPropsProxiesByVM.forEach((prop=>{prop in window||(window[prop]=void 0)}));const proxyObject=Object.create(window),updatedGlobalProps=new Set,isUnWriteableGlobalFunction=prop=>"function"==typeof window[prop]&&/^[a-z]/.test(prop)&&!updatedGlobalProps.has(prop),proxiesWindow=new Proxy(proxyObject,{get:(target,prop)=>extendedKeys.has(prop)?extendedWindow[prop]():globalNames.has(prop)?proxiesWindow:isUnWriteableGlobalFunction(prop)?(...args)=>window[prop](...args):window[prop],set:(target,prop,value)=>(optionalPropsProxiesByVM.has(prop),extendedKeys.has(prop)||window.xyxVM&&window.xyxVM.hasOwnProperty(prop)||isUnWriteableGlobalFunction(prop)||globalNames.has(prop)?(console.warn("can not set window."+prop),!0):(window[prop]=value,updatedGlobalProps.add(prop),!0)),defineProperty:(target,prop,descriptor)=>(console.warn("window: defineProperty",prop,descriptor),extendedKeys.has(prop)||window.xyxVM&&window.xyxVM.hasOwnProperty(prop)||isUnWriteableGlobalFunction(prop)||globalNames.has(prop)?(console.warn("can not set window."+prop),!0):(Object.defineProperty(window,prop,descriptor),updatedGlobalProps.add(prop),!0))});window.extendedWindow=extendedWindow,window.proxiesWindow=proxiesWindow,window.XYX_GAME_INDEX_ORIGIN=location.origin,document.addEventListener("DOMContentLoaded",(function(){window.XYX_GAME_INDEX_ORIGIN=location.origin,xyx.triggerReady();const domVersion=document.getElementById("version");domVersion&&XYX_GAME_VERSION&&(domVersion.textContent=XYX_GAME_VERSION+"")}),!1);try{const inProduction=!0,inPreview="preview"===new URLSearchParams(window.top.location.search).get("ad_env");inProduction&&!inPreview&&(console.log=console.warn=console.error=console.info=console.debug=()=>{})}catch(e){console.warn("overwrite console failed: ",e)}window.xyxLogMuteControl={storage:!0,request:{prefetchContent:!0,getMappedRoute:!0},img:!0,audio:!0,xhr:!0},window.xyxNeedOriginInterstitialAdLogic=!0,__webpack_require__(240),__webpack_require__(158),__webpack_require__(712),__webpack_require__(591),__webpack_require__(209),QGUtils.Locale.setLocale("en"),__webpack_require__(842),Adapter.init(750,1334),window.screenOrientation="sensor_portrait",__webpack_require__(197),__webpack_require__(843),__webpack_require__(567),__webpack_require__(635),__webpack_require__(617),__webpack_require__(218),__webpack_require__(777)},635:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){!function(t){"use strict";var r,e=t.Base64;if(void 0!==module&&module.exports)try{r=Buffer}catch(t){}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(t){for(var r={},e=0,n=t.length;e<n;e++)r[t.charAt(e)]=e;return r}(n),c=String.fromCharCode,u=function(t){if(t.length<2)return(r=t.charCodeAt(0))<128?t:r<2048?c(192|r>>>6)+c(128|63&r):c(224|r>>>12&15)+c(128|r>>>6&63)+c(128|63&r);var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|r>>>18&7)+c(128|r>>>12&63)+c(128|r>>>6&63)+c(128|63&r)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,i=function(t){return t.replace(a,u)},f=function(t){var r=[0,2,1][t.length%3],e=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[n.charAt(e>>>18),n.charAt(e>>>12&63),r>=2?"=":n.charAt(e>>>6&63),r>=1?"=":n.charAt(63&e)].join("")},d=t.btoa?function(r){return t.btoa(r)}:function(t){return t.replace(/[\s\S]{1,3}/g,f)},s=r?r.from&&r.from!==Uint8Array.from?function(t){return(t.constructor===r.constructor?t:r.from(t)).toString("base64")}:function(t){return(t.constructor===r.constructor?t:new r(t)).toString("base64")}:function(t){return d(i(t))},h=function(t,r){return r?s(String(t)).replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,""):s(String(t))},l=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(t){switch(t.length){case 4:var r=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return c(55296+(r>>>10))+c(56320+(1023&r));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},p=function(t){return t.replace(l,g)},A=function(t){var r=t.length,e=r%4,n=(r>0?o[t.charAt(0)]<<18:0)|(r>1?o[t.charAt(1)]<<12:0)|(r>2?o[t.charAt(2)]<<6:0)|(r>3?o[t.charAt(3)]:0),u=[c(n>>>16),c(n>>>8&255),c(255&n)];return u.length-=[0,0,2,1][e],u.join("")},b=t.atob?function(r){return t.atob(r)}:function(t){return t.replace(/[\s\S]{1,4}/g,A)},C=r?r.from&&r.from!==Uint8Array.from?function(t){return(t.constructor===r.constructor?t:r.from(t,"base64")).toString()}:function(t){return(t.constructor===r.constructor?t:new r(t,"base64")).toString()}:function(t){return p(b(t))},m=function(t){return C(String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};if(t.Base64={VERSION:"2.3.2",atob:b,btoa:d,fromBase64:m,toBase64:h,utob:i,encode:h,encodeURI:function(t){return h(t,!0)},btou:p,decode:m,noConflict:function(){var r=t.Base64;return t.Base64=e,r}},"function"==typeof Object.defineProperty){var y=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",y((function(){return m(this)}))),Object.defineProperty(String.prototype,"toBase64",y((function(t){return h(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",y((function(){return h(this,!0)})))}}t.Meteor&&(Base64=t.Base64),void 0!==module&&module.exports&&(module.exports.Base64=t.Base64)}(void 0!==self?self:void 0!==window?window:void 0!==global?global:this)}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},567:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){Laya.Scene.prototype.getAnimationByIndex=function(t){let e=this._aniList;if(e&&t<e.length)return e[t]},Laya.Scene.prototype.getAnimationByName=function(t){let e=this[t];if(e instanceof Laya.FrameAnimation)return e},Laya.Panel.prototype.__defineGetter__("contentWidth",(function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var n=this._content.getChildAt(e);n.visible&&(t=Math.max(n._x+n.width*n.scaleX-n.pivotX,t))}return t})),Laya.Panel.prototype.__defineGetter__("contentHeight",(function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var n=this._content.getChildAt(e);n.visible&&(t=Math.max(n._y+n.height*n.scaleY-n.pivotY,t))}return t})),String.format=function(...t){for(var e=t[0],n=0;n<t.length-1;n++){var i=new RegExp("\\{"+n+"\\}","gm");e=e.replace(i,t[n+1])}return e},Array.remove=function(t,e){let n=t.indexOf(e);return n>=0&&(t.splice(n,1),!0)}}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},617:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){window.dataSDK=function(t){"use strict";class e{static md5(t){return(new r).hex_md5(t)}}class r{constructor(){this.hexcase=0,this.b64pad=""}hex_md5(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))}b64_md5(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))}any_md5(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)}hex_hmac_md5(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))}b64_hmac_md5(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))}any_hmac_md5(t,e,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),r)}md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()}rstr_md5(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))}rstr_hmac_md5(t,e){var r=this.rstr2binl(t);r.length>16&&(r=this.binl_md5(r,8*t.length));for(var i=Array(16),a=Array(16),s=0;s<16;s++)i[s]=909522486^r[s],a[s]=1549556828^r[s];var n=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(a.concat(n),640))}rstr2hex(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",a=0;a<t.length;a++)e=t.charCodeAt(a),i+=r.charAt(e>>>4&15)+r.charAt(15&e);return i}rstr2b64(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="",r=t.length,i=0;i<r;i+=3)for(var a=t.charCodeAt(i)<<16|(i+1<r?t.charCodeAt(i+1)<<8:0)|(i+2<r?t.charCodeAt(i+2):0),s=0;s<4;s++)8*i+6*s>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-s)&63);return e}rstr2any(t,e){var r,i,a,s,n,d=e.length,h=Array(Math.ceil(t.length/2));for(r=0;r<h.length;r++)h[r]=t.charCodeAt(2*r)<<8|t.charCodeAt(2*r+1);var o=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),l=Array(o);for(i=0;i<o;i++){for(n=Array(),s=0,r=0;r<h.length;r++)s=(s<<16)+h[r],s-=(a=Math.floor(s/d))*d,(n.length>0||a>0)&&(n[n.length]=a);l[i]=s,h=n}var c="";for(r=l.length-1;r>=0;r--)c+=e.charAt(l[r]);return c}str2rstr_utf8(t){for(var e,r,i="",a=-1;++a<t.length;)e=t.charCodeAt(a),r=a+1<t.length?t.charCodeAt(a+1):0,55296<=e&&e<=56319&&56320<=r&&r<=57343&&(e=65536+((1023&e)<<10)+(1023&r),a++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i}str2rstr_utf16le(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r),t.charCodeAt(r)>>>8&255);return e}str2rstr_utf16be(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t.charCodeAt(r)>>>8&255,255&t.charCodeAt(r));return e}rstr2binl(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}binl2rstr(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}binl_md5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var r=1732584193,i=-271733879,a=-1732584194,s=271733878,n=0;n<t.length;n+=16){var d=r,h=i,o=a,l=s;r=this.md5_ff(r,i,a,s,t[n+0],7,-680876936),s=this.md5_ff(s,r,i,a,t[n+1],12,-389564586),a=this.md5_ff(a,s,r,i,t[n+2],17,606105819),i=this.md5_ff(i,a,s,r,t[n+3],22,-1044525330),r=this.md5_ff(r,i,a,s,t[n+4],7,-176418897),s=this.md5_ff(s,r,i,a,t[n+5],12,1200080426),a=this.md5_ff(a,s,r,i,t[n+6],17,-1473231341),i=this.md5_ff(i,a,s,r,t[n+7],22,-45705983),r=this.md5_ff(r,i,a,s,t[n+8],7,1770035416),s=this.md5_ff(s,r,i,a,t[n+9],12,-1958414417),a=this.md5_ff(a,s,r,i,t[n+10],17,-42063),i=this.md5_ff(i,a,s,r,t[n+11],22,-1990404162),r=this.md5_ff(r,i,a,s,t[n+12],7,1804603682),s=this.md5_ff(s,r,i,a,t[n+13],12,-40341101),a=this.md5_ff(a,s,r,i,t[n+14],17,-1502002290),i=this.md5_ff(i,a,s,r,t[n+15],22,1236535329),r=this.md5_gg(r,i,a,s,t[n+1],5,-165796510),s=this.md5_gg(s,r,i,a,t[n+6],9,-1069501632),a=this.md5_gg(a,s,r,i,t[n+11],14,643717713),i=this.md5_gg(i,a,s,r,t[n+0],20,-373897302),r=this.md5_gg(r,i,a,s,t[n+5],5,-701558691),s=this.md5_gg(s,r,i,a,t[n+10],9,38016083),a=this.md5_gg(a,s,r,i,t[n+15],14,-660478335),i=this.md5_gg(i,a,s,r,t[n+4],20,-405537848),r=this.md5_gg(r,i,a,s,t[n+9],5,568446438),s=this.md5_gg(s,r,i,a,t[n+14],9,-1019803690),a=this.md5_gg(a,s,r,i,t[n+3],14,-187363961),i=this.md5_gg(i,a,s,r,t[n+8],20,1163531501),r=this.md5_gg(r,i,a,s,t[n+13],5,-1444681467),s=this.md5_gg(s,r,i,a,t[n+2],9,-51403784),a=this.md5_gg(a,s,r,i,t[n+7],14,1735328473),i=this.md5_gg(i,a,s,r,t[n+12],20,-1926607734),r=this.md5_hh(r,i,a,s,t[n+5],4,-378558),s=this.md5_hh(s,r,i,a,t[n+8],11,-2022574463),a=this.md5_hh(a,s,r,i,t[n+11],16,1839030562),i=this.md5_hh(i,a,s,r,t[n+14],23,-35309556),r=this.md5_hh(r,i,a,s,t[n+1],4,-1530992060),s=this.md5_hh(s,r,i,a,t[n+4],11,1272893353),a=this.md5_hh(a,s,r,i,t[n+7],16,-155497632),i=this.md5_hh(i,a,s,r,t[n+10],23,-1094730640),r=this.md5_hh(r,i,a,s,t[n+13],4,681279174),s=this.md5_hh(s,r,i,a,t[n+0],11,-358537222),a=this.md5_hh(a,s,r,i,t[n+3],16,-722521979),i=this.md5_hh(i,a,s,r,t[n+6],23,76029189),r=this.md5_hh(r,i,a,s,t[n+9],4,-640364487),s=this.md5_hh(s,r,i,a,t[n+12],11,-421815835),a=this.md5_hh(a,s,r,i,t[n+15],16,530742520),i=this.md5_hh(i,a,s,r,t[n+2],23,-995338651),r=this.md5_ii(r,i,a,s,t[n+0],6,-198630844),s=this.md5_ii(s,r,i,a,t[n+7],10,1126891415),a=this.md5_ii(a,s,r,i,t[n+14],15,-1416354905),i=this.md5_ii(i,a,s,r,t[n+5],21,-57434055),r=this.md5_ii(r,i,a,s,t[n+12],6,1700485571),s=this.md5_ii(s,r,i,a,t[n+3],10,-1894986606),a=this.md5_ii(a,s,r,i,t[n+10],15,-1051523),i=this.md5_ii(i,a,s,r,t[n+1],21,-2054922799),r=this.md5_ii(r,i,a,s,t[n+8],6,1873313359),s=this.md5_ii(s,r,i,a,t[n+15],10,-30611744),a=this.md5_ii(a,s,r,i,t[n+6],15,-1560198380),i=this.md5_ii(i,a,s,r,t[n+13],21,1309151649),r=this.md5_ii(r,i,a,s,t[n+4],6,-145523070),s=this.md5_ii(s,r,i,a,t[n+11],10,-1120210379),a=this.md5_ii(a,s,r,i,t[n+2],15,718787259),i=this.md5_ii(i,a,s,r,t[n+9],21,-343485551),r=this.safe_add(r,d),i=this.safe_add(i,h),a=this.safe_add(a,o),s=this.safe_add(s,l)}return[r,i,a,s]}md5_cmn(t,e,r,i,a,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,s)),a),r)}md5_ff(t,e,r,i,a,s,n){return this.md5_cmn(e&r|~e&i,t,e,a,s,n)}md5_gg(t,e,r,i,a,s,n){return this.md5_cmn(e&i|r&~i,t,e,a,s,n)}md5_hh(t,e,r,i,a,s,n){return this.md5_cmn(e^r^i,t,e,a,s,n)}md5_ii(t,e,r,i,a,s,n){return this.md5_cmn(r^(e|~i),t,e,a,s,n)}safe_add(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}bit_rol(t,e){return t<<e|t>>>32-e}}class i{constructor(){}static _cb_btou(t){switch(t.length){case 4:let e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return String.fromCharCode(55296+(e>>>10))+String.fromCharCode(56320+(1023&e));case 3:return String.fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return String.fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}}static _cb_decode(t){i._b64tab=i.b64tab();let e=t.length,r=e%4,a=(e>0?i._b64tab[t.charAt(0)]<<18:0)|(e>1?i._b64tab[t.charAt(1)]<<12:0)|(e>2?i._b64tab[t.charAt(2)]<<6:0)|(e>3?i._b64tab[t.charAt(3)]:0),s=[String.fromCharCode(a>>>16),String.fromCharCode(a>>>8&255),String.fromCharCode(255&a)];return s.length-=[0,0,2,1][r],s.join("")}static _cb_encode(t){let e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[i._b64chars.charAt(r>>>18),i._b64chars.charAt(r>>>12&63),e>=2?"=":i._b64chars.charAt(r>>>6&63),e>=1?"=":i._b64chars.charAt(63&r)].join("")}static _cb_utob(t){if(t.length<2){let e=t.charCodeAt(0);return e<128?t:e<2048?String.fromCharCode(192|e>>>6)+String.fromCharCode(128|63&e):String.fromCharCode(224|e>>>12&15)+String.fromCharCode(128|e>>>6&63)+String.fromCharCode(128|63&e)}{let e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return String.fromCharCode(240|e>>>18&7)+String.fromCharCode(128|e>>>12&63)+String.fromCharCode(128|e>>>6&63)+String.fromCharCode(128|63&e)}}static _re_btou(){return new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g")}static _atob(t){return t.replace(/[\s\S]{1,4}/g,this._cb_decode)}static _btoa(t){return t.replace(/[\s\S]{1,3}/g,this._cb_encode)}static _btou(t){return t.replace(this._re_btou,this._cb_btou)}static _decode(t){let e=String(t).replace(/[-_]/g,(t=>"-"==t?"+":"/"));return(t=>this._btou(this._atob(t)))(e=e.replace(/[^A-Za-z0-9\+\/]/g,""))}static _encode(t,e=!1){let r=t=>this._btoa(this._utob(t));return e?r(String(t)).replace(/[+\/]/g,(t=>"+"==t?"-":"_")).replace(/=/g,""):r(String(t))}static EncodeURI(t){return this._encode(t,!0)}static FromBase64(t){return this._decode(t)}static ToBase64(t){return this._encode(t)}static stringToBytes(t){var e,r,i=new Array;e=t.length;for(var a=0;a<e;a++)(r=t.charCodeAt(a))>=65536&&r<=1114111?(i.push(r>>18&7|240),i.push(r>>12&63|128),i.push(r>>6&63|128),i.push(63&r|128)):r>=2048&&r<=65535?(i.push(r>>12&15|224),i.push(r>>6&63|128),i.push(63&r|128)):r>=128&&r<=2047?(i.push(r>>6&31|192),i.push(63&r|128)):i.push(255&r);return i}static byteToString(t){if("string"==typeof t)return t;for(var e="",r=t,i=0;i<r.length;i++){var a=r[i].toString(2),s=a.match(/^1+?(?=0)/);if(s&&8==a.length){for(var n=s[0].length,d=r[i].toString(2).slice(7-n),h=1;h<n;h++)d+=r[h+i].toString(2).slice(2);e+=String.fromCharCode(parseInt(d,2)),i+=n-1}else e+=String.fromCharCode(r[i])}return e}static _utob(t){return t.replace(this._re_utob,this._cb_utob)}static b64tab(){let t={};for(let e=0,r=i._b64chars.length;e<r;e++)t[i._b64chars.charAt(e)]=e;return t}}i._b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i._fromCharCode=String.fromCharCode,i._re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;class a{static initData(t,e,r,i,s,n,d,h=1e3){a.token=t,a.appid=e,a.gameid=i,a.urlConfig={GetConfig:{url:"1.0.2/"+a.appid+"/Config?",tips:"获取配置接口"},SetGameInfo:{url:"1.0.2/"+a.appid+"/SetGameInfo?",tips:"埋点接口"},Data:{url:"1.0.2/"+a.appid+"/signData?",tips:"存储接口"},Data2:{url:"1.0.2/"+a.appid+"/SignData2?",tips:"存储接口2"},GetGamesBox:{url:"1.0.2/"+a.appid+"/like?",tips:"分发游戏数据"},ClickGame:{url:"1.0.2/"+a.appid+"/ClickGame?",tips:"提交点击游戏信息"},GetGamesBoxLabel:{url:"1.0.2/"+a.appid+"/LabelGames?",tips:"游戏集合页"},Rank:{url:"1.0.2/"+a.appid+"/Rank?",tips:"游戏排行榜"},PayList:{url:"1.0.2/pay/CheckPayOk?",tips:"获取支付订单"},PrePayQQ:{url:"1.0.2/pay_qq/PrePay?",tips:"qq预支付"},CheckPayOkQQ:{url:"1.0.2/pay_qq/CheckPayOk?",tips:"qq确认订单状态"},CreateShare:{url:"1.0.2/"+a.appid+"/CreateShare?",tips:"创建分享"},GetShareInfo:{url:"1.0.2/"+a.appid+"/GetShareInfo?",tips:"获取分享信息"},GetShareGift:{url:"1.0.2/"+a.appid+"/GetShareGift?",tips:"领取分享奖励"},getNews:{url:"1.0.2/"+a.appid+"/GetUnreadMail?",tips:"获取未读邮件"},ReadNew:{url:"1.0.2/"+a.appid+"/ReadMail?",tips:"阅读邮件"},exchangeCode:{url:"1.0.2/"+a.appid+"/UseRedeemCode?",tips:"兑换礼包"}},a.version="1.0.10",a.ver_info="WQ(2022/4/2) - 所有接口都使用1.0.2接口 \r\n",a.GetConfig({uid:r.uid,openid:r.openid,code:r.code,ver:s},n,d,h),console.log("version:",a.version),console.log("ver_info:",a.ver_info)}static getNews(t){let e=[];e.uid=a.uid;let r=a.getcallurl(e,"getNews");a.onXHR(r,(e=>{t&&t(JSON.parse(e))}))}static ReadNew(t,e){let r=[];r.uid=a.uid,r.mail_key=t;let i=a.getcallurl(r,"ReadNew");a.onXHR(i,(t=>{e&&e(JSON.parse(t))}))}static exchangeCode(t,e){let r=[];r.uid=a.uid,r.redeem_code=t;let i=a.getcallurl(r,"exchangeCode");a.onXHR(i,(t=>{e&&e(JSON.parse(t))}))}static PrePayQQ(t,e,r,i){let s=[];s.uid=a.uid,s.game_id=t,s.code=e,s.itemid=r;let n=a.getcallurl(s,"PrePayQQ");a.onXHR(n,(t=>{i&&i(JSON.parse(t))}))}static CheckPayOkQQ(t,e,r){let i=[];i.uid=a.uid,i.game_id=t,i.prepayid=e;let s=a.getcallurl(i,"CheckPayOkQQ");a.onXHR(s,(t=>{r&&r(JSON.parse(t))}))}static getcallurl(t,e){return a.sBaseURL+a.urlConfig[e].url+a.getUrlParamsTk(t)}static GetConfig(t,e,r,i){a.GetLogData();let s={};if(t.uid)s.uid=t.uid;else if(t.openid)s.openid=t.openid;else{if(!t.code)return void console.log("参数不足,uid，openid，code，三必有其一");s.code=t.code}s.first_channel_id=a.mdObj.channel_id,s.first_adid=a.mdObj.adid;let n=a.getcallurl(s,"GetConfig");console.log("call GetConfig:"+n),a.onXHR(n,(t=>{let r=JSON.parse(t);if(0==Number(r.code)){if(a.newbie=r.user.newbie,a.mdObj.first_channel_id=r.user.first_channel_id,a.mdObj.first_adid=r.user.first_adid,a.uid=r.user.uid,a.pay_game_id=r.pay_game_id,""!=r.user.sign_data){let e=JSON.parse(t).user.sign_data,i=a.FromBase64(e),s=JSON.parse(i);null!=s.rank_data?(delete s.rank_data,r.user.sign_data=JSON.stringify(s)):r.user.sign_data=i}console.log("callback GetConfig:ok uid = "+a.uid)}e(r)}),r,i)}static createShare(t,e,r,i,s){let n=[];n.uid=a.uid,n.gift_items=t,n.name=e,n.avatar=r,n.type=i;let d=a.getcallurl(n,"CreateShare");a.onXHR(d,(t=>{s&&s(JSON.parse(t))}))}static getShareInfo(t,e){let r=[];r.uid=a.uid,r.share_id=t;let i=a.getcallurl(r,"GetShareInfo");a.onXHR(i,(t=>{e&&e(JSON.parse(t))}))}static getShareGift(t,e,r,i,s){let n=[];n.uid=a.uid,n.share_id=t,n.get_uid=e,n.avatar=r,n.gift_item_id=i;let d=a.getcallurl(n,"GetShareGift");a.onXHR(d,(t=>{s&&s(JSON.parse(t))}))}static GetGamesBox(t="moderate_banner",e,r=0,i="result_page"){let s=[];s.position_type=i,s.type=t,s.mode=r,s.uid=a.uid;let n=a.getcallurl(s,"GetGamesBox");a.onXHR(n,(t=>{!function(t){let r=null;0==(r=JSON.parse(t)).code?e&&e(r):e&&e(null)}(t)}))}static ClickGame(t,e=0){let r=[];r.uid=a.uid,r.appid=t,r.mode=e;let i=a.getcallurl(r,"ClickGame");a.onXHR(i,(t=>{!function(t){let e=null;0==(e=JSON.parse(t)).code?console.log("点击游戏上传成功"):console.log("点击游戏上传失败")}(t)}))}static GetLogData(){let t;if(window.wx){let e=wx.getLaunchOptionsSync();t={query:e.query,scene:e.scene}}else t={query:{wxgamecid:1,ald_link_key:2},scene:1022};if(t.query.wxgamecid?a.mdObj.channel_id=t.query.wxgamecid:t.query.ald_link_key&&(a.mdObj.channel_id=t.query.ald_link_key),t.scene){let e=Number(t.scene);-1!=a.scene.indexOf(e)&&(a.mdObj.adid=t.scene)}t.query.adid&&(a.mdObj.adid=t.query.adid)}static SetUserValue(t,e){return a.SetUserValue2(t,e)}static SetUserValue2(t,e){let r={};r.uid=a.uid,r.data=a.ToBase64(t);let i=a.getUrlParamsTk(r),s=a.sBaseURL+a.urlConfig.Data2.url;a.onPost(i,s,(t=>{e&&e(t)}))}static GetPayList(t){let e=[];e.uid=a.uid,e.game_id=a.pay_game_id;let r=a.getcallurl(e,"PayList");a.onXHR(r,(e=>{!function(e){let r=null;0==(r=JSON.parse(e)).code?t&&t(r):console.log("支付信息")}(e)}))}static getUserRankData(t=1,e=0,r){let i=[];i.uid=a.uid,i.page=t,i.type=e;let s=a.getcallurl(i,"Rank");a.onXHR(s,(t=>{!function(t){let e=null;0==(e=JSON.parse(t)).code?r&&r(e):console.log("排行榜获取失败")}(t)}))}static commitTotle(t,e){let r=[];r.create_time=e.create_time=(new Date).getTime(),r.is_new=e.is_new=a.newbie,r.uid=e.uid=a.uid,r.gameid=e.gameid=a.gameid,r.keyname=t.trim(),r.clos=JSON.stringify(Object.assign(e,this.params,a.mdObj));let i=a.dtUrl+a.getUrlParamsTk(r);a.onXHR(i)}static ToBase64(t){return i.ToBase64(t)}static FromBase64(t){return i.FromBase64(t)}static checkBase64(t){for(var e=t,r=0;r<e.length;r++)if(!(e[r]>="A"&&e[r]<="Z"||e[r]>="a"&&e[r]<="z"||e[r]>="0"&&e[r]<="9"||"+"==e[r]||"\\"==e[r]||"="==e[r]))return!1;return!0}static onXHR(t,e=null,r=null,i=1e3){let a=new XMLHttpRequest;a.open("get",t);var s=!1;a.onreadystatechange=t=>{4==a.readyState&&0==s&&(304==a.status||a.status>=200&&a.status<300?(s=!0,r=null,null!=e&&e(a.responseText),a=null):(console.log("type: error, errCode:",a.status),a=null,0==s&&null!=r&&(s=!0,e=null,null!=r&&r(a.status),r=null)))},null!=r&&setTimeout((function(){0==s&&(s=!0,e=null,null!=r&&r("1秒内，后台没有传输数据"),r=null)}),i),a.send()}static onPost(t,e,r=null){let i=new XMLHttpRequest;i.open("POST",e),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(t),i.onreadystatechange=t=>{4==i.readyState&&(304==i.status||i.status>=200&&i.status<300?(null!=r&&r(i.responseText),i=null):(console.log("type: error, errCode:",i.status),i=null))}}static getUrlParamsTk(t){let r=!1,i=new Array;for(let e in t){if("string"!=typeof t[e]&&"number"!=typeof t[e])continue;"tick"==e&&(r=!0);let a=e.toLocaleLowerCase();t[a]=t[e],i.push(a)}if(0==r){var s=new Date;t.tick=Math.floor(s.getTime()/1e3),i.push("tick")}i.sort((function(t,e){return t>e?1:-1}));let n="";for(var d=0;d<i.length;d++)n=n+i[d]+"="+t[i[d]]+"&";return n+"key="+e.md5(n+"key="+a.token)}static getUrlParamsToken(t){let r=new Array;for(let e in t){if("string"!=typeof t[e]&&"number"!=typeof t[e])continue;let i=e.toLocaleLowerCase();t[i]=t[e],r.push(i)}r.sort((function(t,e){return t>e?1:-1}));let i="";for(var s=0;s<r.length;s++)i=i+r[s]+"="+t[r[s]]+"&";return e.md5(i+"key="+a.token)}}return a.sBaseURL="https://distrib-api.wanzhushipin.cn/OpenProxy/",a.dtUrl="https://data.shenshouyouxi.com/mai_dian/2.0.0/event_tracking?",a.mdObj={channel_id:"0",adid:"0",first_channel_id:"0",first_adid:"0"},a.scene=[1045,1046,1047,1048,1067,1084,1095],a.version="1.0.1",a.ver_info="",t.DataSDK=a,t.md5_hex=e,t}({})}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())},843:()=>{(function(require,define,exports,module,window,self,global,globalThis,location,navigator,document,localStorage,sessionStorage,requestAnimationFrame,cancelAnimationFrame,XMLHttpRequest,fetch,FontFace,open,Image,Audio){!function(t,e){"use strict";class s{}s.touchScrollEnable=!0,s.mouseWheelEnable=!0,s.showButtons=!0,s.popupBgColor="#000000",s.popupBgAlpha=.5,s.closeDialogOnSide=!0,window.UIConfig=s;class i{}i.defaultSizeGrid=[4,4,4,4,0],i.labelColor="#000000",i.labelPadding=[2,2,2,2],i.inputLabelPadding=[1,1,1,3],i.buttonStateNum=3,i.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"],i.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"],i.scrollBarMinNum=15,i.scrollBarDelayTime=500;class h extends e.Graphics{constructor(){super(...arguments),this.autoCacheCmd=!0,this._width=0,this._height=0,this.uv=null}destroy(){super.destroy(),this._source=null,this._sizeGrid=null,this._offset=null}get sizeGrid(){return this._sizeGrid}set sizeGrid(t){this._sizeGrid=t.map((t=>+t)),this._setChanged()}get width(){return this._width?this._width:this._source?this._source.sourceWidth:0}set width(t){this._width!=t&&(this._width=t,this._setChanged())}get height(){return this._height?this._height:this._source?this._source.sourceHeight:0}set height(t){this._height!=t&&(this._height=t,this._setChanged())}get source(){return this._source}set source(t){if(t)this._source=t,this._setChanged();else if(this._source=null,this._drawGridCmd){this._one&&this._one==this._drawGridCmd&&this.clear();let t=this.cmds;t&&t.length>0&&t[0]==this._drawGridCmd&&t.splice(0,1)}}_setChanged(){this._isChanged||(this._isChanged=!0,e.ILaya.timer.callLater(this,this.changeSource))}_createDrawTexture(t,s=0,i=0,h=0,r=0,a=null,l=1,n=null,o=null,_){if(!t||l<.01)return null;if(!t.getIsReady())return null;if(h||(h=t.sourceWidth),r||(r=t.sourceHeight),t.getIsReady()){var c=h/t.sourceWidth,d=r/t.sourceHeight;if(h=t.width*c,r=t.height*d,h<=0||r<=0)return null;s+=t.offsetX*c,i+=t.offsetY*d}return this._sp&&(this._sp._renderType|=e.SpriteConst.GRAPHICS,this._sp._setRenderType(this._sp._renderType)),e.DrawTextureCmd.create.call(this,t,s,i,h,r,a,l,n,o,_)}changeSource(){this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var s=this.width,i=this.height,h=this._sizeGrid,r=t.sourceWidth,a=t.sourceHeight;if(!h||r===s&&a===i){let e=this._createDrawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,s,i,null,1,null,null,this.uv);e&&this._setDrawGridCmd(e)}else{let r=e.Draw9GridTexture.create(t,0,0,s,i,h);this._setDrawGridCmd(r)}this._repaint()}}drawBitmap(t,e,s,i,h=0,r=0){h<.1||r<.1||(!t||e.width==h&&e.height==r?this.drawImage(e,s,i,h,r):this.fillTexture(e,s,i,h,r))}static getTexture(t,s,i,h,r){var a;return h<=0&&(h=1),r<=0&&(r=1),t.$_GID||(t.$_GID=e.Utils.getGID()),a&&a._getSource()||(a=e.Texture.createFromTexture(t,s,i,h,r)),a}_setDrawGridCmd(t){var e=this._source;if(!e||!e.bitmap)return;let s=this.cmds;if(this._one||s&&!(s.length<=0)){let e=this._one;e?e==this._drawGridCmd?this._one=t:(this.clear(),this._saveToCmd(null,t),this._saveToCmd(null,e)):s.splice(0,0,t)}else this._saveToCmd(null,t);this._drawGridCmd=t}}e.ClassUtils.regClass("laya.ui.AutoBitmap",h),e.ClassUtils.regClass("Laya.AutoBitmap",h);class r extends e.Component{constructor(){super(...arguments),this._top=NaN,this._bottom=NaN,this._left=NaN,this._right=NaN,this._centerX=NaN,this._centerY=NaN}onReset(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=NaN}_onEnable(){this.owner.parent?this._onAdded():this.owner.once(e.Event.ADDED,this,this._onAdded)}_onDisable(){this.owner.off(e.Event.ADDED,this,this._onAdded),this.owner.parent&&this.owner.parent.off(e.Event.RESIZE,this,this._onParentResize)}_onAdded(){this.owner.parent&&this.owner.parent.on(e.Event.RESIZE,this,this._onParentResize),this.resetLayoutX(),this.resetLayoutY()}_onParentResize(){var t=this.resetLayoutX(),s=this.resetLayoutY();(t||s)&&this.owner.event(e.Event.RESIZE)}resetLayoutX(){var t=this.owner;if(!t)return!1;var e=t.parent;if(e)if(isNaN(this.centerX)){if(isNaN(this.left))isNaN(this.right)||(t.x=Math.round(e.width-t.displayWidth-this.right+t.pivotX*t.scaleX));else if(t.x=Math.round(this.left+t.pivotX*t.scaleX),!isNaN(this.right)){var s=(e._width-this.left-this.right)/(t.scaleX||.01);if(s!=t.width)return t.width=s,!0}}else t.x=Math.round(.5*(e.width-t.displayWidth)+this.centerX+t.pivotX*t.scaleX);return!1}resetLayoutY(){var t=this.owner;if(!t)return!1;var e=t.parent;if(e)if(isNaN(this.centerY)){if(isNaN(this.top))isNaN(this.bottom)||(t.y=Math.round(e.height-t.displayHeight-this.bottom+t.pivotY*t.scaleY));else if(t.y=Math.round(this.top+t.pivotY*t.scaleY),!isNaN(this.bottom)){var s=(e._height-this.top-this.bottom)/(t.scaleY||.01);if(s!=t.height)return t.height=s,!0}}else t.y=Math.round(.5*(e.height-t.displayHeight)+this.centerY+t.pivotY*t.scaleY);return!1}resetLayout(){this.owner&&(this.resetLayoutX(),this.resetLayoutY())}get top(){return this._top}set top(t){this._top!=t&&(this._top=t,this.resetLayoutY())}get bottom(){return this._bottom}set bottom(t){this._bottom!=t&&(this._bottom=t,this.resetLayoutY())}get left(){return this._left}set left(t){this._left!=t&&(this._left=t,this.resetLayoutX())}get right(){return this._right}set right(t){this._right!=t&&(this._right=t,this.resetLayoutX())}get centerX(){return this._centerX}set centerX(t){this._centerX!=t&&(this._centerX=t,this.resetLayoutX())}get centerY(){return this._centerY}set centerY(t){this._centerY!=t&&(this._centerY=t,this.resetLayoutY())}}r.EMPTY=null,e.ILaya.regClass(r),r.EMPTY=new r,e.ClassUtils.regClass("laya.ui.Widget",r),e.ClassUtils.regClass("Laya.Widget",r);class a extends e.Event{}a.SHOW_TIP="showtip",a.HIDE_TIP="hidetip",e.ILaya.regClass(a),e.ClassUtils.regClass("laya.ui.UIEvent",a),e.ClassUtils.regClass("Laya.UIEvent",a);class l{static fillArray(t,e,s=null){var i=t.concat();if(e)for(var h=e.split(","),r=0,a=Math.min(i.length,h.length);r<a;r++){var l=h[r];i[r]="true"==l||"false"!=l&&l,null!=s&&(i[r]=s(l))}return i}static toColor(t){return e.Utils.toHexColor(t)}static gray(t,s=!0){s?l.addFilter(t,l.grayFilter):l.clearFilter(t,e.ColorFilter)}static addFilter(t,e){var s=t.filters||[];s.push(e),t.filters=s}static clearFilter(t,e){var s=t.filters;if(null!=s&&s.length>0){for(var i=s.length-1;i>-1;i--)s[i]instanceof e&&s.splice(i,1);t.filters=s}}static _getReplaceStr(t){return l.escapeSequence[t]}static adptString(t){return t.replace(/\\(\w)/g,l._getReplaceStr)}static getBindFun(t){l._funMap||(l._funMap=new e.WeakObject);var s=l._funMap.get(t);if(null==s){var i='"'+t+'"',h="(function(data){if(data==null)return;with(data){try{\nreturn "+(i=i.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";s=window.Laya._runScript(h),l._funMap.set(t,s)}return s}}l.grayFilter=new e.ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]),l.escapeSequence={"\\n":"\n","\\t":"\t"},l._funMap=null,e.ClassUtils.regClass("laya.ui.UIUtils",l),e.ClassUtils.regClass("Laya.UIUtils",l);class n extends e.Sprite{constructor(t=!0){super(),this._anchorX=NaN,this._anchorY=NaN,this._widget=r.EMPTY,t&&(this.preinitialize(),this.createChildren(),this.initialize())}destroy(t=!0){super.destroy(t),this._dataSource=null,this._tag=null,this._toolTip=null}preinitialize(){}createChildren(){}initialize(){}get width(){return this.get_width()}get_width(){return this._width?this._width:this.measureWidth()}measureWidth(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var s=this.getChildAt(e);s._visible&&(t=Math.max(s._x+s.width*s.scaleX,t))}return t}commitMeasure(){}get height(){return this.get_height()}get_height(){return this._height?this._height:this.measureHeight()}measureHeight(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var s=this.getChildAt(e);s._visible&&(t=Math.max(s._y+s.height*s.scaleY,t))}return t}get dataSource(){return this.get_dataSource()}get_dataSource(){return this._dataSource}set dataSource(t){this.set_dataSource(t)}set_dataSource(t){for(var e in this._dataSource=t,this._dataSource)e in this&&"function"!=typeof this[e]&&(this[e]=this._dataSource[e])}get top(){return this.get_top()}get_top(){return this._widget.top}set top(t){this.set_top(t)}set_top(t){t!=this._widget.top&&(this._getWidget().top=t)}get bottom(){return this.get_bottom()}get_bottom(){return this._widget.bottom}set bottom(t){this.set_bottom(t)}set_bottom(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}get left(){return this._widget.left}set left(t){t!=this._widget.left&&(this._getWidget().left=t)}get right(){return this._widget.right}set right(t){t!=this._widget.right&&(this._getWidget().right=t)}get centerX(){return this._widget.centerX}set centerX(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}get centerY(){return this._widget.centerY}set centerY(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}_sizeChanged(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event(e.Event.RESIZE),this._widget!==r.EMPTY&&this._widget.resetLayout()}get tag(){return this._tag}set tag(t){this._tag=t}get toolTip(){return this._toolTip}set toolTip(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on(e.Event.MOUSE_OVER,this,this.onMouseOver),this.on(e.Event.MOUSE_OUT,this,this.onMouseOut)):(this.off(e.Event.MOUSE_OVER,this,this.onMouseOver),this.off(e.Event.MOUSE_OUT,this,this.onMouseOut)))}onMouseOver(t){e.ILaya.stage.event(a.SHOW_TIP,this._toolTip)}onMouseOut(t){e.ILaya.stage.event(a.HIDE_TIP,this._toolTip)}get gray(){return this._gray}set gray(t){t!==this._gray&&(this._gray=t,l.gray(this,t))}get disabled(){return this._disabled}set disabled(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}_getWidget(){return this._widget===r.EMPTY&&(this._widget=this.addComponent(r)),this._widget}set scaleX(t){this.set_scaleX(t)}set_scaleX(t){super.get_scaleX()!=t&&(super.set_scaleX(t),this.callLater(this._sizeChanged))}get scaleX(){return super.scaleX}set scaleY(t){this.set_scaleY(t)}set_scaleY(t){super.get_scaleY()!=t&&(super.set_scaleY(t),this.callLater(this._sizeChanged))}get scaleY(){return super.scaleY}onCompResize(){this._sizeChanged()}set width(t){this.set_width(t)}set_width(t){super.get_width()!=t&&(super.set_width(t),this.callLater(this._sizeChanged))}set height(t){this.set_height(t)}set_height(t){super.get_height()!=t&&(super.set_height(t),this.callLater(this._sizeChanged))}get anchorX(){return this.get_anchorX()}get_anchorX(){return this._anchorX}set anchorX(t){this.set_anchorX(t)}set_anchorX(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}get anchorY(){return this.get_anchorY()}get_anchorY(){return this._anchorY}set anchorY(t){this.set_anchorY(t)}set_anchorY(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}_childChanged(t=null){this.callLater(this._sizeChanged),super._childChanged(t)}}e.ILaya.regClass(n),e.ClassUtils.regClass("laya.ui.UIComponent",n),e.ClassUtils.regClass("Laya.UIComponent",n);class o extends n{constructor(t=null){super(),this.skin=t}destroy(t=!0){super.destroy(t),this._bitmap&&this._bitmap.destroy(),this._bitmap=null}dispose(){this.destroy(!0),e.ILaya.loader.clearRes(this._skin)}createChildren(){this.graphics=this._bitmap=new h,this._bitmap.autoCacheCmd=!1}get skin(){return this._skin}set skin(t){if(this._skin!=t)if(this._skin=t,t){var s=e.Loader.getRes(t);s?(this.source=s,this.onCompResize()):e.ILaya.loader.load(this._skin,e.Handler.create(this,this.setSource,[this._skin]),null,e.Loader.IMAGE,1,!0,this._group)}else this.source=null}get source(){return this._bitmap.source}set source(t){this._bitmap&&(this._bitmap.source=t,this.event(e.Event.LOADED),this.repaint())}get group(){return this._group}set group(t){t&&this._skin&&e.Loader.setGroup(this._skin,t),this._group=t}setSource(t,e=null){t===this._skin&&e&&(this.source=e,this.onCompResize())}measureWidth(){return this._bitmap.width}measureHeight(){return this._bitmap.height}set width(t){super.width=t,this._bitmap.width=0==t?1e-7:t}get width(){return super.width}set height(t){super.height=t,this._bitmap.height=0==t?1e-7:t}get height(){return super.height}get sizeGrid(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null}set sizeGrid(t){this._bitmap.sizeGrid=l.fillArray(i.defaultSizeGrid,t,Number)}set dataSource(t){this._dataSource=t,"string"==typeof t?this.skin=t:super.dataSource=t}get dataSource(){return super.dataSource}}e.ILaya.regClass(o),e.ClassUtils.regClass("laya.ui.Image",o),e.ClassUtils.regClass("Laya.Image",o);class _ extends o{constructor(t=null){super(),this.advsListArr=[],this.resUrl="https://unioncdn.layabox.com/config/iconlist.json",this._http=new e.Browser.window.XMLHttpRequest,this._data=[],this._resquestTime=36e4,this._playIndex=0,this._lunboTime=5e3,this.skin=t,this.setLoadUrl(),this.init(),this.size(120,120)}setLoadUrl(){}init(){this.isSupportJump()?((e.Browser.onMiniGame||e.Browser.onBDMiniGame)&&e.ILaya.timer.loop(this._resquestTime,this,this.onGetAdvsListData),this.onGetAdvsListData(),this.initEvent()):this.visible=!1}initEvent(){this.on(e.Event.CLICK,this,this.onAdvsImgClick)}onAdvsImgClick(){this.getCurrentAppidObj()&&this.jumptoGame()}revertAdvsData(){this.advsListArr[this._playIndex]&&(this.visible=!0,this.skin=this.advsListArr[this._playIndex])}isSupportJump(){return e.Browser.onMiniGame?window.wx.navigateToMiniProgram instanceof Function:!!e.Browser.onBDMiniGame}jumptoGame(){var t=this.advsListArr[this._playIndex];parseInt(t.gameid),t.extendInfo,t.path,e.Browser.onMiniGame?this.isSupportJump()&&window.wx.navigateToMiniProgram({appId:this._appid,path:"",extraData:"",envVersion:"release",success:function(){console.log("-------------跳转成功--------------")},fail:function(){console.log("-------------跳转失败--------------")},complete:function(){console.log("-------------跳转接口调用成功--------------"),this.updateAdvsInfo()}.bind(this)}):e.Browser.onBDMiniGame||(this.visible=!1)}updateAdvsInfo(){this.visible=!1,this.onLunbo(),e.ILaya.timer.loop(this._lunboTime,this,this.onLunbo)}onLunbo(){this._playIndex>=this.advsListArr.length-1?this._playIndex=0:this._playIndex+=1,this.visible=!0,this.revertAdvsData()}getCurrentAppidObj(){return this.advsListArr[this._playIndex]}onGetAdvsListData(){var t=this,e=_.randRange(1e4,1e6),s=this.resUrl+"?"+e;this._http.open("get",s,!0),this._http.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._http.responseType="text",this._http.onerror=function(e){t._onError(e)},this._http.onload=function(e){t._onLoad(e)},this._http.send(null)}static randRange(t,e){return Math.floor(Math.random()*(e-t+1))+t}_onError(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)}_onLoad(t){var e=this._http,s=void 0!==e.status?e.status:200;200===s||204===s||0===s?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)}error(t){this.event(e.Event.ERROR,t)}complete(){try{this._data=this._http.response||this._http.responseText,this._data=JSON.parse(this._data),this.advsListArr=this._data.list,this._appid=this._data.appid,this.updateAdvsInfo(),this.revertAdvsData()}catch(t){this.error(t.message)}}getAdvsQArr(t){var s=[],i=e.LocalStorage.getJSON("gameObj");for(var h in t){var r=t[h];i&&i[r.gameid]&&!r.isQiangZhi||s.push(r)}return s}clear(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null}destroy(t=!0){e.ILaya.timer.clear(this,this.onLunbo),super.destroy(!0),this.clear(),e.ILaya.timer.clear(this,this.onGetAdvsListData)}}e.ClassUtils.regClass("laya.ui.AdvImage",_),e.ClassUtils.regClass("Laya.AdvImage",_);class c extends n{set dataSource(t){for(var e in this._dataSource=t,t){var s=this.getChildByName(e);s?s.dataSource=t[e]:e in this&&!(this[e]instanceof Function)&&(this[e]=t[e])}}get dataSource(){return super.dataSource}get bgColor(){return this._bgColor}set bgColor(t){this._bgColor=t,t?(this._onResize(null),this.on(e.Event.RESIZE,this,this._onResize)):(this.graphics.clear(),this.off(e.Event.RESIZE,this,this._onResize))}_onResize(t){this.graphics.clear(),this.graphics.drawRect(0,0,this.width,this.height,this._bgColor)}}e.ILaya.regClass(c),e.ClassUtils.regClass("laya.ui.Box",c),e.ClassUtils.regClass("Laya.Box",c);class d extends n{constructor(t=null,e=""){super(),this._labelColors=i.buttonLabelColors,this._state=0,this._autoSize=!0,this._stateNum=i.buttonStateNum,this._stateChanged=!1,this.skin=t,this.label=e}destroy(t=!0){super.destroy(t),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(t),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null}createChildren(){this.graphics=this._bitmap=new h}createText(){this._text||(this._text=new e.Text,this._text.overflow=e.Text.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)}initialize(){1!==this._mouseState&&(this.mouseEnabled=!0,this._setBit(e.Const.HAS_MOUSE,!0)),this._createListener(e.Event.MOUSE_OVER,this,this.onMouse,null,!1,!1),this._createListener(e.Event.MOUSE_OUT,this,this.onMouse,null,!1,!1),this._createListener(e.Event.MOUSE_DOWN,this,this.onMouse,null,!1,!1),this._createListener(e.Event.MOUSE_UP,this,this.onMouse,null,!1,!1),this._createListener(e.Event.CLICK,this,this.onMouse,null,!1,!1)}onMouse(t){if(!1!==this.toggle||!this._selected)return t.type===e.Event.CLICK?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=d.stateMap[t.type]))}get skin(){return this._skin}set skin(t){this._skin!=t&&(this._skin=t,t?e.Loader.getRes(t)?this._skinLoaded():e.ILaya.loader.load(this._skin,e.Handler.create(this,this._skinLoaded),null,e.Loader.IMAGE,1):this._skinLoaded())}_skinLoaded(){this.callLater(this.changeClips),this._setStateChanged(),this._sizeChanged(),this.event(e.Event.LOADED)}get stateNum(){return this._stateNum}set stateNum(t){"string"==typeof t&&(t=parseInt(t)),this._stateNum!=t&&(this._stateNum=t<1?1:t>3?3:t,this.callLater(this.changeClips))}changeClips(){var t=e.Loader.getRes(this._skin);if(t){var s=t.sourceWidth,i=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=e.Utils.getGID());var h=t.$_GID+"-"+this._stateNum,r=e.WeakObject.I.get(h);if(e.Utils.isOkTextureList(r)||(r=null),r)this._sources=r;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var a=0;a<this._stateNum;a++)this._sources.push(e.Texture.createFromTexture(t,0,i*a,s,i));e.WeakObject.I.set(h,this._sources)}this._autoSize?(this._bitmap.width=this._width||s,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=s)}else console.log("lose skin",this._skin)}measureWidth(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}measureHeight(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}get label(){return this._text?this._text.text:null}set label(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}get selected(){return this._selected}set selected(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event(e.Event.CHANGE))}get state(){return this._state}set state(t){this._state!=t&&(this._state=t,this._setStateChanged())}changeState(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))}get labelColors(){return this._labelColors.join(",")}set labelColors(t){this._labelColors=l.fillArray(i.buttonLabelColors,t,String),this._setStateChanged()}get strokeColors(){return this._strokeColors?this._strokeColors.join(","):""}set strokeColors(t){this._strokeColors=l.fillArray(i.buttonLabelColors,t,String),this._setStateChanged()}get labelPadding(){return this.createText(),this._text.padding.join(",")}set labelPadding(t){this.createText(),this._text.padding=l.fillArray(i.labelPadding,t,Number)}get labelSize(){return this.createText(),this._text.fontSize}set labelSize(t){this.createText(),this._text.fontSize=t}get labelStroke(){return this.createText(),this._text.stroke}set labelStroke(t){this.createText(),this._text.stroke=t}get labelStrokeColor(){return this.createText(),this._text.strokeColor}set labelStrokeColor(t){this.createText(),this._text.strokeColor=t}get labelBold(){return this.createText(),this._text.bold}set labelBold(t){this.createText(),this._text.bold=t}get labelFont(){return this.createText(),this._text.font}set labelFont(t){this.createText(),this._text.font=t}get labelAlign(){return this.createText(),this._text.align}set labelAlign(t){this.createText(),this._text.align=t}get clickHandler(){return this._clickHandler}set clickHandler(t){this._clickHandler=t}get text(){return this.createText(),this._text}get sizeGrid(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null}set sizeGrid(t){this._bitmap.sizeGrid=l.fillArray(i.defaultSizeGrid,t,Number)}set width(t){super.set_width(t),this._autoSize&&(this._bitmap.width=t,this._text&&(this._text.width=t))}get width(){return super.get_width()}set height(t){super.set_height(t),this._autoSize&&(this._bitmap.height=t,this._text&&(this._text.height=t))}get height(){return super.get_height()}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.label=t+"":super.set_dataSource(t)}get dataSource(){return super.get_dataSource()}get iconOffset(){return this._bitmap._offset?this._bitmap._offset.join(","):null}set iconOffset(t){this._bitmap._offset=t?l.fillArray([1,1],t,Number):[]}_setStateChanged(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))}}d.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0},e.ILaya.regClass(d),e.ClassUtils.regClass("laya.ui.Button",d),e.ClassUtils.regClass("Laya.Button",d);class u extends d{constructor(t=null,e=""){super(t,e),this.toggle=!0,this._autoSize=!1}preinitialize(){super.preinitialize(),this.toggle=!0,this._autoSize=!1}initialize(){super.initialize(),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0}set dataSource(t){this._dataSource=t,t instanceof Boolean?this.selected=t:"string"==typeof t?this.selected="true"===t:super.dataSource=t}get dataSource(){return super.dataSource}}e.ILaya.regClass(u),e.ClassUtils.regClass("laya.ui.CheckBox",u),e.ClassUtils.regClass("Laya.CheckBox",u);class g extends n{constructor(t=null,e=1,s=1){super(),this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._interval=50,this._index=0,this._toIndex=-1,this._clipX=e,this._clipY=s,this.skin=t}destroy(t=!0){super.destroy(!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null}dispose(){this.destroy(!0),e.ILaya.loader.clearRes(this._skin)}createChildren(){this.graphics=this._bitmap=new h}_onDisplay(t){this._isPlaying?this._getBit(e.Const.DISPLAYED_INSTAGE)?this.play():this.stop():this._autoPlay&&this.play()}get skin(){return this._skin}set skin(t){this._skin!=t&&(this._skin=t,t?e.Loader.getRes(t)?this._skinLoaded():e.ILaya.loader.load(this._skin,e.Handler.create(this,this._skinLoaded),null,e.Loader.IMAGE,1):this._bitmap.source=null)}_skinLoaded(){this._setClipChanged(),this._sizeChanged(),this.event(e.Event.LOADED)}get clipX(){return this._clipX}set clipX(t){this._clipX=t||1,this._setClipChanged()}get clipY(){return this._clipY}set clipY(t){this._clipY=t||1,this._setClipChanged()}get clipWidth(){return this._clipWidth}set clipWidth(t){this._clipWidth=t,this._setClipChanged()}get clipHeight(){return this._clipHeight}set clipHeight(t){this._clipHeight=t,this._setClipChanged()}changeClip(){if(this._clipChanged=!1,this._skin){var t=e.Loader.getRes(this._skin);t?this.loadComplete(this._skin,t):e.ILaya.loader.load(this._skin,e.Handler.create(this,this.loadComplete,[this._skin]))}}loadComplete(t,s){if(t===this._skin&&s){var i=this._clipWidth||Math.ceil(s.sourceWidth/this._clipX),h=this._clipHeight||Math.ceil(s.sourceHeight/this._clipY),r=this._skin+i+h,a=e.WeakObject.I.get(r);if(e.Utils.isOkTextureList(a)||(a=null),a)this._sources=a;else{this._sources=[];for(var l=0;l<this._clipY;l++)for(var n=0;n<this._clipX;n++)this._sources.push(e.Texture.createFromTexture(s,i*n,h*l,i,h));e.WeakObject.I.set(r,this._sources)}this.index=this._index,this.event(e.Event.LOADED),this.onCompResize()}}get sources(){return this._sources}set sources(t){this._sources=t,this.index=this._index,this.event(e.Event.LOADED)}get group(){return this._group}set group(t){t&&this._skin&&e.Loader.setGroup(this._skin,t),this._group=t}set width(t){super.width=t,this._bitmap.width=t}get width(){return super.width}set height(t){super.height=t,this._bitmap.height=t}get height(){return super.height}measureWidth(){return this.runCallLater(this.changeClip),this._bitmap.width}measureHeight(){return this.runCallLater(this.changeClip),this._bitmap.height}get sizeGrid(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null}set sizeGrid(t){this._bitmap.sizeGrid=l.fillArray(i.defaultSizeGrid,t,Number)}get index(){return this._index}set index(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event(e.Event.CHANGE)}get total(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}get autoPlay(){return this._autoPlay}set autoPlay(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}get interval(){return this._interval}set interval(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}get isPlaying(){return this._isPlaying}set isPlaying(t){this._isPlaying=t}play(t=0,s=-1){this._isPlaying=!0,this.index=t,this._toIndex=s,this._index++,e.ILaya.timer.loop(this.interval,this,this._loop),this.on(e.Event.DISPLAY,this,this._onDisplay),this.on(e.Event.UNDISPLAY,this,this._onDisplay)}_loop(){this._visible&&this._sources&&(this._index++,this._toIndex>-1&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)}stop(){this._isPlaying=!1,e.ILaya.timer.clear(this,this._loop),this.event(e.Event.COMPLETE)}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.index=parseInt(t):super.dataSource=t}get dataSource(){return super.dataSource}get bitmap(){return this._bitmap}_setClipChanged(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))}}e.ILaya.regClass(g),e.ClassUtils.regClass("laya.ui.Clip",g),e.ClassUtils.regClass("Laya.Clip",g);class p extends n{constructor(t=!0){super(!1),this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colors=[],this._selectedColor="#000000",t&&(this.preinitialize(),this.createChildren(),this.initialize())}destroy(t=!0){e.ILaya.stage.off(e.Event.MOUSE_DOWN,this,this.removeColorBox),super.destroy(t),this._colorPanel&&this._colorPanel.destroy(t),this._colorButton&&this._colorButton.destroy(t),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null}createChildren(){this.addChild(this._colorButton=new d),this._colorPanel=new c,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new e.Sprite),this._colorPanel.addChild(this._colorBlock=new e.Sprite),this._colorPanel.addChild(this._colorInput=new e.Input)}initialize(){this._colorButton.on(e.Event.CLICK,this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on(e.Event.CHANGE,this,this.onColorInputChange),this._colorInput.on(e.Event.KEY_DOWN,this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on(e.Event.MOUSE_MOVE,this,this.onColorTilesMouseMove),this._colorTiles.on(e.Event.CLICK,this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on(e.Event.MOUSE_DOWN,this,this.onPanelMouseDown),this.bgColor=this._bgColor}onPanelMouseDown(t){t.stopPropagation()}changePanel(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(!0),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(t=this._colorTiles.graphics).clear(!0);for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],s=0;s<12;s++)for(var i=0;i<20;i++){var h;h=0===i?e[s]:1===i?0:51*(((3*s+i/6)%3<<0)+3*(s/6<<0))<<16|i%6*51<<8|(s<<0)%6*51;var r=l.toColor(h);this._colors.push(r);var a=i*this._gridSize,n=s*this._gridSize;t.drawRect(a,n,this._gridSize,this._gridSize,r,"#000000")}}onColorButtonClick(t){this._colorPanel.parent?this.close():this.open()}open(){let t=e.ILaya.stage;var s=this.localToGlobal(new e.Point),i=s.x+this._colorPanel.width<=t.width?s.x:t.width-this._colorPanel.width,h=s.y+this._colorButton.height;h=h+this._colorPanel.height<=t.height?h:s.y-this._colorPanel.height,this._colorPanel.pos(i,h),this._colorPanel.zOrder=1001,t.addChild(this._colorPanel),t.on(e.Event.MOUSE_DOWN,this,this.removeColorBox)}close(){e.ILaya.stage.off(e.Event.MOUSE_DOWN,this,this.removeColorBox),this._colorPanel.removeSelf()}removeColorBox(t=null){this.close()}onColorFieldKeyDown(t){13==t.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t.stopPropagation())}onColorInputChange(t=null){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")}onColorTilesClick(t){this.selectedColor=this.getColorByMouse(),this.close()}onColorTilesMouseMove(t){this._colorInput.focus=!1;var e=this.getColorByMouse();this._colorInput.text=e,this.drawBlock(e)}getColorByMouse(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),s=Math.floor(t.y/this._gridSize);return this._colors[20*s+e]}drawBlock(t){var e=this._colorBlock.graphics;e.clear(!0);var s=t||"#ffffff";e.drawRect(0,0,50,20,s,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")}get selectedColor(){return this._selectedColor}set selectedColor(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event(e.Event.CHANGE,e.Event.EMPTY.setTo(e.Event.CHANGE,this,this)))}get skin(){return this._colorButton.skin}set skin(t){this._colorButton.once(e.Event.LOADED,this,this.changeColor),this._colorButton.skin=t}changeColor(){var t=this.graphics;t.clear(!0);var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)}get bgColor(){return this._bgColor}set bgColor(t){this._bgColor=t,this._setPanelChanged()}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor=t,this._setPanelChanged()}get inputColor(){return this._inputColor}set inputColor(t){this._inputColor=t,this._setPanelChanged()}get inputBgColor(){return this._inputBgColor}set inputBgColor(t){this._inputBgColor=t,this._setPanelChanged()}_setPanelChanged(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))}}e.ILaya.regClass(p),e.ClassUtils.regClass("laya.ui.ColorPicker",p),e.ClassUtils.regClass("Laya.ColorPicker",p);class C extends n{constructor(t=""){super(),this.text=t}destroy(t=!0){super.destroy(t),this._tf=null}createChildren(){this.addChild(this._tf=new e.Text)}get text(){return this._tf.text}set text(t){this._tf.text!=t&&(t&&(t=l.adptString(t+"")),this._tf.text=t,this.event(e.Event.CHANGE),this._width&&this._height||this.onCompResize())}changeText(t){this._tf.changeText(t)}get wordWrap(){return this._tf.wordWrap}set wordWrap(t){this._tf.wordWrap=t}get color(){return this._tf.color}set color(t){this._tf.color=t}get font(){return this._tf.font}set font(t){this._tf.font=t}get align(){return this._tf.align}set align(t){this._tf.align=t}get valign(){return this._tf.valign}set valign(t){this._tf.valign=t}get bold(){return this._tf.bold}set bold(t){this._tf.bold=t}get italic(){return this._tf.italic}set italic(t){this._tf.italic=t}get leading(){return this._tf.leading}set leading(t){this._tf.leading=t}get fontSize(){return this._tf.fontSize}set fontSize(t){this._tf.fontSize=t}get padding(){return this._tf.padding.join(",")}set padding(t){this._tf.padding=l.fillArray(i.labelPadding,t,Number)}get bgColor(){return this._tf.bgColor}set bgColor(t){this._tf.bgColor=t}get borderColor(){return this._tf.borderColor}set borderColor(t){this._tf.borderColor=t}get stroke(){return this._tf.stroke}set stroke(t){this._tf.stroke=t}get strokeColor(){return this._tf.strokeColor}set strokeColor(t){this._tf.strokeColor=t}get textField(){return this._tf}measureWidth(){return this._tf.width}measureHeight(){return this._tf.height}get width(){return this._width||this._tf.text?super.width:0}set width(t){super.width=t,this._tf.width=t}get height(){return this._height||this._tf.text?super.height:0}set height(t){super.height=t,this._tf.height=t}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.text=t+"":super.dataSource=t}get dataSource(){return super.dataSource}get overflow(){return this._tf.overflow}set overflow(t){this._tf.overflow=t}get underline(){return this._tf.underline}set underline(t){this._tf.underline=t}get underlineColor(){return this._tf.underlineColor}set underlineColor(t){this._tf.underlineColor=t}}e.ILaya.regClass(C),e.ClassUtils.regClass("laya.ui.Label",C),e.ClassUtils.regClass("Laya.Label",C);class m extends n{constructor(t=null){super(),this.isVertical=!0,this.showLabel=!0,this._max=100,this._min=0,this._tick=1,this._value=0,m.label||(m.label=new C),this.skin=t}destroy(t=!0){super.destroy(t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._progress&&this._progress.destroy(t),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null}createChildren(){this.addChild(this._bg=new o),this.addChild(this._bar=new d)}initialize(){this._bar.on(e.Event.MOUSE_DOWN,this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0}onBarMouseDown(t){var s=e.ILaya;this._globalSacle||(this._globalSacle=new e.Point),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=s.stage.mouseX,this._ty=s.stage.mouseY,s.stage.on(e.Event.MOUSE_MOVE,this,this.mouseMove),s.stage.once(e.Event.MOUSE_UP,this,this.mouseUp),s.stage.once(e.Event.MOUSE_OUT,this,this.mouseUp),this.showValueText()}showValueText(){if(this.showLabel){var t=m.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar._x+20,t.y=.5*(this._bar.height-t.height)+this._bar._y):(t.y=this._bar._y-20,t.x=.5*(this._bar.width-t.width)+this._bar._x)}}hideValueText(){m.label&&m.label.removeSelf()}mouseUp(t){let s=e.ILaya.stage;s.off(e.Event.MOUSE_MOVE,this,this.mouseMove),s.off(e.Event.MOUSE_UP,this,this.mouseUp),s.off(e.Event.MOUSE_OUT,this,this.mouseUp),this.sendChangeEvent(e.Event.CHANGED),this.hideValueText()}mouseMove(t){let s=e.ILaya.stage;var i=this._value;if(this.isVertical?(this._bar.y+=(s.mouseY-this._ty)/this._globalSacle.y,this._bar._y>this._maxMove?this._bar.y=this._maxMove:this._bar._y<0&&(this._bar.y=0),this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x+=(s.mouseX-this._tx)/this._globalSacle.x,this._bar._x>this._maxMove?this._bar.x=this._maxMove:this._bar._x<0&&(this._bar.x=0),this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width)),this._tx=s.mouseX,this._ty=s.mouseY,0!=this._tick){var h=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*h)/h}this._value!=i&&this.sendChangeEvent(),this.showValueText()}sendChangeEvent(t=e.Event.CHANGE){this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)}get skin(){return this._skin}set skin(t){this._skin!=t&&(this._skin=t,this._skin&&!e.Loader.getRes(this._skin)?e.ILaya.loader.load([this._skin,this._skin.replace(".png","$bar.png")],e.Handler.create(this,this._skinLoaded)):this._skinLoaded())}_skinLoaded(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var t=this._skin.replace(".png","$progress.png");e.Loader.getRes(t)&&(this._progress||(this.addChild(this._progress=new o),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=t),this.setBarPoint(),this.callLater(this.changeValue),this._sizeChanged(),this.event(e.Event.LOADED)}setBarPoint(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))}measureWidth(){return Math.max(this._bg.width,this._bar.width)}measureHeight(){return Math.max(this._bg.height,this._bar.height)}_sizeChanged(){super._sizeChanged(),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()}get sizeGrid(){return this._bg.sizeGrid}set sizeGrid(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}setSlider(t,e,s){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=s<t?t:s>e?e:s}get tick(){return this._tick}set tick(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}changeValue(){if(0!=this.tick){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t}this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e=this._max-this._min;0===e&&(e=1),this.isVertical?(this._bar.y=(this._value-this._min)/e*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width))}get max(){return this._max}set max(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}get min(){return this._min}set min(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}get value(){return this._value}set value(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}get allowClickBack(){return this._allowClickBack}set allowClickBack(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on(e.Event.MOUSE_DOWN,this,this.onBgMouseDown):this._bg.off(e.Event.MOUSE_DOWN,this,this.onBgMouseDown))}onBgMouseDown(t){var e=this._bg.getMousePoint();this.isVertical?this.value=e.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e.x/(this.width-this._bar.width)*(this._max-this._min)+this._min}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):super.dataSource=t}get dataSource(){return super.dataSource}get bar(){return this._bar}}m.label=null,e.ILaya.regClass(m),e.ClassUtils.regClass("laya.ui.Slider",m),e.ClassUtils.regClass("Laya.Slider",m);class v extends n{constructor(t=null){super(),this.rollRatio=.97,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this._showButtons=s.showButtons,this._scrollSize=1,this._thumbPercent=1,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._hide=!1,this._clickOnly=!0,this._touchScrollEnable=s.touchScrollEnable,this._mouseWheelEnable=s.mouseWheelEnable,this.skin=t,this.max=1}destroy(t=!0){this.stopScroll(),this.target=null,super.destroy(t),this.upButton&&this.upButton.destroy(t),this.downButton&&this.downButton.destroy(t),this.slider&&this.slider.destroy(t),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null}createChildren(){this.addChild(this.slider=new m),this.addChild(this.upButton=new d),this.addChild(this.downButton=new d)}initialize(){this.slider.showLabel=!1,this.slider.tick=0,this.slider.on(e.Event.CHANGE,this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on(e.Event.MOUSE_DOWN,this,this.onButtonMouseDown),this.downButton.on(e.Event.MOUSE_DOWN,this,this.onButtonMouseDown)}onSliderChange(){this._value!=this.slider.value&&(this.value=this.slider.value)}onButtonMouseDown(t){var s=t.currentTarget===this.upButton;this.slide(s),e.ILaya.timer.once(i.scrollBarDelayTime,this,this.startLoop,[s]),e.ILaya.stage.once(e.Event.MOUSE_UP,this,this.onStageMouseUp)}startLoop(t){e.ILaya.timer.frameLoop(1,this,this.slide,[t])}slide(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize}onStageMouseUp(t){e.ILaya.timer.clear(this,this.startLoop),e.ILaya.timer.clear(this,this.slide)}get skin(){return this._skin}set skin(t){" "!=t&&this._skin!=t&&(this._skin=t,this._skin&&!e.Loader.getRes(this._skin)?e.ILaya.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],e.Handler.create(this,this._skinLoaded)):this._skinLoaded())}_skinLoaded(){this.slider.skin=this._skin,this.callLater(this.changeScrollBar),this._sizeChanged(),this.event(e.Event.LOADED)}changeScrollBar(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()}_sizeChanged(){super._sizeChanged(),this.repaint(),this.resetPositions(),this.event(e.Event.CHANGE),this.changeHandler&&this.changeHandler.runWith(this.value)}resetPositions(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()}resetButtonPosition(){this.slider.isVertical?this.downButton.y=this.slider._y+this.slider.height:this.downButton.x=this.slider._x+this.slider.width}measureWidth(){return this.slider.isVertical?this.slider.width:100}measureHeight(){return this.slider.isVertical?100:this.slider.height}setScroll(t,e,s){this.runCallLater(this._sizeChanged),this.slider.setSlider(t,e,s),this.slider.bar.visible=e>0,!this._hide&&this.autoHide&&(this.visible=!1)}get max(){return this.slider.max}set max(t){this.slider.max=t}get min(){return this.slider.min}set min(t){this.slider.min=t}get value(){return this._value}set value(t){t!==this._value&&(this._value=t,this._isElastic||(this.slider._value!=t&&(this.slider._value=t,this.slider.changeValue()),this._value=this.slider._value),this.event(e.Event.CHANGE),this.changeHandler&&this.changeHandler.runWith(this._value))}get isVertical(){return this.slider.isVertical}set isVertical(t){this.slider.isVertical=t}get sizeGrid(){return this.slider.sizeGrid}set sizeGrid(t){this.slider.sizeGrid=t}get scrollSize(){return this._scrollSize}set scrollSize(t){this._scrollSize=t}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):super.dataSource=t}get dataSource(){return super.dataSource}get thumbPercent(){return this._thumbPercent}set thumbPercent(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this._sizeChanged),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,i.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,i.scrollBarMinNum))}get target(){return this._target}set target(t){this._target&&(this._target.off(e.Event.MOUSE_WHEEL,this,this.onTargetMouseWheel),this._target.off(e.Event.MOUSE_DOWN,this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on(e.Event.MOUSE_WHEEL,this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on(e.Event.MOUSE_DOWN,this,this.onTargetMouseDown))}get hide(){return this._hide}set hide(t){this._hide=t,this.visible=!t}get showButtons(){return this._showButtons}set showButtons(t){this._showButtons=t,this.callLater(this.changeScrollBar)}get touchScrollEnable(){return this._touchScrollEnable}set touchScrollEnable(t){this._touchScrollEnable=t,this.target=this._target}get mouseWheelEnable(){return this._mouseWheelEnable}set mouseWheelEnable(t){this._mouseWheelEnable=t,this.target=this._target}onTargetMouseWheel(t){this.value-=t.delta*this._scrollSize,this.target=this._target}onTargetMouseDown(t){this.isLockedFun&&!this.isLockedFun(t)||(this.event(e.Event.END),this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new e.Point),this._lastPoint.setTo(e.ILaya.stage.mouseX,e.ILaya.stage.mouseY),e.ILaya.timer.clear(this,this.tweenMove),e.Tween.clearTween(this),e.ILaya.stage.once(e.Event.MOUSE_UP,this,this.onStageMouseUp2),e.ILaya.stage.once(e.Event.MOUSE_OUT,this,this.onStageMouseUp2),e.ILaya.timer.frameLoop(1,this,this.loop))}startDragForce(){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new e.Point),this._lastPoint.setTo(e.ILaya.stage.mouseX,e.ILaya.stage.mouseY),e.ILaya.timer.clear(this,this.tweenMove),e.Tween.clearTween(this),e.ILaya.stage.once(e.Event.MOUSE_UP,this,this.onStageMouseUp2),e.ILaya.stage.once(e.Event.MOUSE_OUT,this,this.onStageMouseUp2),e.ILaya.timer.frameLoop(1,this,this.loop)}cancelDragOp(){e.ILaya.stage.off(e.Event.MOUSE_UP,this,this.onStageMouseUp2),e.ILaya.stage.off(e.Event.MOUSE_OUT,this,this.onStageMouseUp2),e.ILaya.timer.clear(this,this.tweenMove),e.ILaya.timer.clear(this,this.loop),this._target.mouseEnabled=!0}checkTriggers(t=!1){return this.value>=0&&this.value-this._lastOffset<=0&&this.triggerDownDragLimit&&this.triggerDownDragLimit(t)?(this.cancelDragOp(),this.value=0,!0):!!(this.value<=this.max&&this.value-this._lastOffset>=this.max&&this.triggerUpDragLimit&&this.triggerUpDragLimit(t))&&(this.cancelDragOp(),this.value=this.max,!0)}get lastOffset(){return this._lastOffset}startTweenMoveForce(t){this._lastOffset=t,e.ILaya.timer.frameLoop(1,this,this.tweenMove,[200])}loop(){var t=e.ILaya.stage.mouseY,s=e.ILaya.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:s-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?e.ILaya.stage._canvasTransform.getScaleY():e.ILaya.stage._canvasTransform.getScaleX()))>1))return;if(this._clickOnly=!1,this.checkTriggers())return;this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event(e.Event.START)}else if(this.checkTriggers())return;this._offsets.push(this._lastOffset),this._lastPoint.x=s,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this._lastOffset>0?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value>=this.min&&(this._checkElastic=!1)):this._value>=this.max&&(this._lastOffset<0?this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance):(this.value-=.5*this._lastOffset,this._value<=this.max&&(this._checkElastic=!1))):this.value-=this._lastOffset)}onStageMouseUp2(t){if(e.ILaya.stage.off(e.Event.MOUSE_UP,this,this.onStageMouseUp2),e.ILaya.stage.off(e.Event.MOUSE_OUT,this,this.onStageMouseUp2),e.ILaya.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?e.Tween.to(this,{value:this.min},this.elasticBackTime,e.Ease.sineOut,e.Handler.create(this,this.elasticOver)):this._value>this.max&&e.Tween.to(this,{value:this.max},this.elasticBackTime,e.Ease.sineOut,e.Handler.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?e.ILaya.stage.mouseY-this._lastPoint.y:e.ILaya.stage.mouseX-this._lastPoint.x);for(var s=0,i=Math.min(this._offsets.length,3),h=0;h<i;h++)s+=this._offsets[this._offsets.length-1-h];if(this._lastOffset=s/i,(s=Math.abs(this._lastOffset))<2)return void this.event(e.Event.END);s>250&&(this._lastOffset=this._lastOffset>0?250:-250);var r=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/150)));e.ILaya.timer.frameLoop(1,this,this.tweenMove,[r])}}elasticOver(){this._isElastic=!1,!this.hide&&this.autoHide&&e.Tween.to(this,{alpha:0},500),this.event(e.Event.END)}tweenMove(t){var s;if(this._lastOffset*=this.rollRatio,!this.checkTriggers(!0)&&(t>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,s=.5*-(this.min-t-this.value),this._lastOffset>s&&(this._lastOffset=s)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,s=.5*-(this.max+t-this.value),this._lastOffset<s&&(this._lastOffset=s))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<.1)){if(e.ILaya.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?e.Tween.to(this,{value:this.min},this.elasticBackTime,e.Ease.sineOut,e.Handler.create(this,this.elasticOver)):this._value>this.max?e.Tween.to(this,{value:this.max},this.elasticBackTime,e.Ease.sineOut,e.Handler.create(this,this.elasticOver)):this.elasticOver());this.event(e.Event.END),!this.hide&&this.autoHide&&e.Tween.to(this,{alpha:0},500)}}stopScroll(){this.onStageMouseUp2(null),e.ILaya.timer.clear(this,this.tweenMove),e.Tween.clearTween(this)}get tick(){return this.slider.tick}set tick(t){this.slider.tick=t}}e.ILaya.regClass(v),e.ClassUtils.regClass("laya.ui.ScrollBar",v),e.ClassUtils.regClass("Laya.ScrollBar",v);class f extends v{}e.ILaya.regClass(f),e.ClassUtils.regClass("laya.ui.VScrollBar",f),e.ClassUtils.regClass("Laya.VScrollBar",f);class S extends v{initialize(){super.initialize(),this.slider.isVertical=!1}}e.ILaya.regClass(S),e.ClassUtils.regClass("laya.ui.HScrollBar",S),e.ClassUtils.regClass("Laya.HScrollBar",S);class y extends c{constructor(){super(...arguments),this.selectEnable=!1,this.totalPage=0,this._$componentType="List",this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._cells=[],this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._createdLine=0,this._offset=new e.Point,this._usedCache=null,this._elasticEnabled=!1,this._preLen=0}destroy(t=!0){this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),super.destroy(t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null}createChildren(){this.addChild(this._content=new c)}set cacheAs(t){super.cacheAs=t,this._scrollBar&&(this._usedCache=null,"none"!==t?this._scrollBar.on(e.Event.START,this,this.onScrollStart):this._scrollBar.off(e.Event.START,this,this.onScrollStart))}get cacheAs(){return super.cacheAs}onScrollStart(){this._usedCache||(this._usedCache=super.cacheAs),super.cacheAs="none",this._scrollBar.once(e.Event.END,this,this.onScrollEnd)}onScrollEnd(){super.cacheAs=this._usedCache||"none"}get content(){return this._content}get vScrollBarSkin(){return this._scrollBar?this._scrollBar.skin:null}set vScrollBarSkin(t){this._removePreScrollBar();var e=new f;e.name="scrollBar",e.right=0,e.skin=t,e.elasticDistance=this._elasticEnabled?200:0,this.scrollBar=e,this.addChild(e),this._setCellChanged()}_removePreScrollBar(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)}get hScrollBarSkin(){return this._scrollBar?this._scrollBar.skin:null}set hScrollBarSkin(t){this._removePreScrollBar();var e=new S;e.name="scrollBar",e.bottom=0,e.skin=t,e.elasticDistance=this._elasticEnabled?200:0,this.scrollBar=e,this.addChild(e),this._setCellChanged()}get scrollBar(){return this._scrollBar}set scrollBar(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on(e.Event.CHANGE,this,this.onScrollBarChange)))}get itemRender(){return this._itemRender}set itemRender(t){if(this._itemRender!=t){this._itemRender=t;for(var e=this._cells.length-1;e>-1;e--)this._cells[e].destroy();this._cells.length=0,this._setCellChanged()}}set width(t){t!=this._width&&(super.width=t,this._setCellChanged())}get width(){return super.width}set height(t){t!=this._height&&(super.height=t,this._setCellChanged())}get height(){return super.height}get repeatX(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1}set repeatX(t){this._repeatX=t,this._setCellChanged()}get repeatY(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1}set repeatY(t){this._repeatY=t,this._setCellChanged()}get spaceX(){return this._spaceX}set spaceX(t){this._spaceX=t,this._setCellChanged()}get spaceY(){return this._spaceY}set spaceY(t){this._spaceY=t,this._setCellChanged()}changeCells(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),e=t.width+this._spaceX||1,s=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/s):Math.round(this._height/s));var i=this._width?this._width:e*this.repeatX-this._spaceX,h=this._height?this._height:s*this.repeatY-this._spaceY;this._cellSize=this._isVertical?s:e,this._cellOffset=this._isVertical?s*Math.max(this._repeatY2,this._repeatY)-h-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-i-this._spaceX,this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=h:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=i),this.setContentSize(i,h);var r=this._isVertical?this.repeatX:this.repeatY,a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,r,a),this._createdLine=a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}}_getOneCell(){if(0===this._cells.length){var t=this.createItem();if(this._offset.setTo(t._x,t._y),this.cacheContent)return t;this._cells.push(t)}return this._cells[0]}_createItems(t,e,s){var i=this._content,h=this._getOneCell(),r=h.width+this._spaceX,a=h.height+this._spaceY;if(this.cacheContent){var l=new c;l.cacheAs="normal",l.pos((this._isVertical?0:t)*r,(this._isVertical?t:0)*a),this._content.addChild(l),i=l}else{for(var n=[],o=this._cells.length-1;o>-1;o--){var _=this._cells[o];_.removeSelf(),n.push(_)}this._cells.length=0}for(var d=t;d<s;d++)for(var u=0;u<e;u++)(h=n&&n.length?n.pop():this.createItem()).x=(this._isVertical?u:d)*r-i._x,h.y=(this._isVertical?d:u)*a-i._y,h.name="item"+(d*e+u),i.addChild(h),this.addCell(h)}createItem(){var t=[];if("function"==typeof this._itemRender)var s=new this._itemRender;else s=e.SceneUtils.createComp(this._itemRender,null,null,t);if(0==t.length&&s._watchMap){var i=s._watchMap;for(var h in i)for(var r=i[h],a=0;a<r.length;a++){var l=r[a];t.push(l.comp,l.prop,l.value)}}return t.length&&(s._$bindData=t),s}addCell(t){t.on(e.Event.CLICK,this,this.onCellMouse),t.on(e.Event.RIGHT_CLICK,this,this.onCellMouse),t.on(e.Event.MOUSE_OVER,this,this.onCellMouse),t.on(e.Event.MOUSE_OUT,this,this.onCellMouse),t.on(e.Event.MOUSE_DOWN,this,this.onCellMouse),t.on(e.Event.MOUSE_UP,this,this.onCellMouse),this._cells.push(t)}_afterInited(){this.initItems()}initItems(){if(!this._itemRender&&null!=this.getChildByName("item0")){var t;this.repeatX=1,t=0;for(var e=0;e<1e4;e++){var s=this.getChildByName("item"+e);if(!s)break;this.addCell(s),t++}this.repeatY=t}}setContentSize(t,s){this._content.width=t,this._content.height=s,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content._style.scrollRect||(this._content.scrollRect=e.Rectangle.create()),this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,t,s),this._content.scrollRect=this._content.scrollRect),this.event(e.Event.RESIZE)}onCellMouse(t){t.type===e.Event.MOUSE_DOWN&&(this._isMoved=!1);var s=t.currentTarget,i=this._startIndex+this._cells.indexOf(s);i<0||(t.type===e.Event.CLICK||t.type===e.Event.RIGHT_CLICK?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(s,!0,0):t.type!==e.Event.MOUSE_OVER&&t.type!==e.Event.MOUSE_OUT||this._selectedIndex===i||this.changeCellState(s,t.type===e.Event.MOUSE_OVER,0),this.mouseHandler&&this.mouseHandler.runWith([t,i]))}changeCellState(t,e,s){var i=t.getChildByName("selectBox");i&&(this.selectEnable=!0,i.visible=e,i.index=s)}_sizeChanged(){super._sizeChanged(),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)}onScrollBarChange(t=null){this.runCallLater(this.changeCells);var e=this._scrollBar.value,s=this._isVertical?this.repeatX:this.repeatY,i=this._isVertical?this.repeatY:this.repeatX,h=Math.floor(e/this._cellSize);if(this.cacheContent)a=i+1,this._createdLine-h<a&&(this._createItems(this._createdLine,s,this._createdLine+a),this.renderItems(this._createdLine*s,0),this._createdLine+=a);else{var r=h*s,a=0;let t=!0;var l=0;r>this._startIndex?(a=r-this._startIndex,l=this._startIndex+s*(i+1),this._isMoved=!0):r<this._startIndex&&(a=this._startIndex-r,t=!1,l=this._startIndex-1,this._isMoved=!0);for(var n=0;n<a;n++){if(t){var o=this._cells.shift();this._cells[this._cells.length]=o;var _=l+n}else o=this._cells.pop(),this._cells.unshift(o),_=l-n;var c=Math.floor(_/s)*this._cellSize;this._isVertical?o.y=c:o.x=c,this.renderItem(o,_)}this._startIndex=r,this.changeSelectStatus()}var d=this._content._style.scrollRect;this._isVertical?(d.y=e-this._offset.y,d.x=-this._offset.x):(d.y=-this._offset.y,d.x=e-this._offset.x),this._content.scrollRect=d}posCell(t,e){if(this._scrollBar){var s=this._isVertical?this.repeatX:this.repeatY,i=Math.floor(e/s)*this._cellSize;this._isVertical?t._y=i:t.x=i}}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event(e.Event.CHANGE),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}changeSelectStatus(){for(var t=0,e=this._cells.length;t<e;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)}get selectedItem(){return this._array&&-1!=this._selectedIndex?this._array[this._selectedIndex]:null}set selectedItem(t){this._array&&(this.selectedIndex=this._array.indexOf(t))}get selection(){return this.getCell(this._selectedIndex)}set selection(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}get startIndex(){return this._startIndex}set startIndex(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}renderItems(t=0,e=0){for(var s=t,i=e||this._cells.length;s<i;s++)this.renderItem(this._cells[s],this._startIndex+s);this.changeSelectStatus()}renderItem(t,s){this._array&&s>=0&&s<this._array.length?(t.visible=!0,t._$bindData?(t._dataSource=this._array[s],this._bindData(t,this._array[s])):t.dataSource=this._array[s],this.cacheContent||this.posCell(t,s),this.hasListener(e.Event.RENDER)&&this.event(e.Event.RENDER,[t,s]),this.renderHandler&&this.renderHandler.runWith([t,s])):(t.visible=!1,t.dataSource=null)}_bindData(t,e){for(var s=t._$bindData,i=0,h=s.length;i<h;i++){var r=s[i++],a=s[i++],n=s[i],o=l.getBindFun(n);r[a]=o.call(this,e)}}get array(){return this._array}set array(t){this.runCallLater(this.changeCells),this._array=t||[],this._preLen=this._array.length;var e=this._array.length;if(this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var s=this._isVertical?this.repeatX:this.repeatY,i=this._isVertical?this.repeatY:this.repeatX,h=Math.ceil(e/s);(this._cellOffset>0?this.totalPage+1:this.totalPage)>1&&h>=i?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=i/h,this._scrollBar.setScroll(0,(h-i)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}updateArray(t){if(this._array=t,this._array){let t=this._preLen-this._startIndex;t>=0&&this.renderItems(t),this._preLen=this._array.length}if(this._scrollBar){var e=t.length,s=this._isVertical?this.repeatX:this.repeatY,i=this._isVertical?this.repeatY:this.repeatX,h=Math.ceil(e/s);h>=i&&(this._scrollBar.thumbPercent=i/h,this._scrollBar.slider._max=(h-i)*this._cellSize+this._cellOffset)}}get page(){return this._page}set page(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}get length(){return this._array?this._array.length:0}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.array=t:super.dataSource=t}get dataSource(){return super.dataSource}get cells(){return this.runCallLater(this.changeCells),this._cells}get elasticEnabled(){return this._elasticEnabled}set elasticEnabled(t){this._elasticEnabled=t,this._scrollBar&&(this._scrollBar.elasticDistance=t?200:0)}refresh(){this.array=this._array}getItem(t){return this._array&&t>-1&&t<this._array.length?this._array[t]:null}changeItem(t,e){t>-1&&this._array&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))}setItem(t,e){this.changeItem(t,e)}addItem(t){this.array?this._array.push(t):this.array=[t],this.array=this._array}addItemAt(t,e){this._array.splice(e,0,t),this.array=this._array}deleteItem(t){this._array&&(this._array.splice(t,1),this.array=this._array)}getCell(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null}scrollTo(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t}tweenTo(t,s=200,i=null){if(this._scrollBar){this._scrollBar.stopScroll();var h=this._isVertical?this.repeatX:this.repeatY;e.Tween.to(this._scrollBar,{value:Math.floor(t/h)*this._cellSize},s,null,i,0,!0)}else this.startIndex=t,i&&i.run()}_setCellChanged(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))}commitMeasure(){this.runCallLater(this.changeCells)}}e.ILaya.regClass(y),e.ClassUtils.regClass("laya.ui.List",y),e.ClassUtils.regClass("Laya.List",y);class b extends n{constructor(t=null,e=null){super(),this._visibleNum=6,this._itemColors=i.comboBoxItemColors,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this.itemRender=null,this.skin=t,this.labels=e}destroy(t=!0){super.destroy(t),this._button&&this._button.destroy(t),this._list&&this._list.destroy(t),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null}createChildren(){this.addChild(this._button=new d),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on(e.Event.MOUSE_DOWN,this,this.onButtonMouseDown)}_createList(){this._list=new y,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)}_setListEvent(t){this._list.selectEnable=!0,this._list.on(e.Event.MOUSE_DOWN,this,this.onListDown),this._list.mouseHandler=e.Handler.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on(e.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onButtonMouseDown(t){this.callLater(this.switchTo,[!this._isOpen])}get skin(){return this._button.skin}set skin(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}measureWidth(){return this._button.width}measureHeight(){return this._button.height}changeList(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._list.refresh()}onlistItemMouse(t,s){var i=t.type;if(i===e.Event.MOUSE_OVER||i===e.Event.MOUSE_OUT){if(this._isCustomList)return;var h=this._list.getCell(s);if(!h)return;var r=h.getChildByName("label");r&&(i===e.Event.ROLL_OVER?(r.bgColor=this._itemColors[0],r.color=this._itemColors[1]):(r.bgColor=null,r.color=this._itemColors[2]))}else i===e.Event.CLICK&&(this.selectedIndex=s,this.isOpen=!1)}switchTo(t){this.isOpen=t}changeOpen(){this.isOpen=!this._isOpen}set width(t){super.width=t,this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}get width(){return super.width}set height(t){super.height=t,this._button.height=this._height}get height(){return super.height}get labels(){return this._labels.join(",")}set labels(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}changeItem(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(!0),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var e=this._list.array||[];e.length=0;for(var s=0,i=this._labels.length;s<i;s++)e.push({label:this._labels[s]});this._list.height=this._listHeight,this._list.array=e}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event(e.Event.CHANGE,[e.Event.EMPTY.setTo(e.Event.CHANGE,this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}changeSelected(){this._button.label=this.selectedLabel}get selectHandler(){return this._selectHandler}set selectHandler(t){this._selectHandler=t}get selectedLabel(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null}set selectedLabel(t){this.selectedIndex=this._labels.indexOf(t)}get visibleNum(){return this._visibleNum}set visibleNum(t){this._visibleNum=t,this._listChanged=!0}get itemColors(){return String(this._itemColors)}set itemColors(t){this._itemColors=l.fillArray(this._itemColors,t,String),this._listChanged=!0}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,this._listChanged=!0}get isOpen(){return this._isOpen}set isOpen(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var s=this.localToGlobal(e.Point.TEMP.setTo(0,0)),i=s.y+this._button.height;i=i+this._listHeight<=e.ILaya.stage.height?i:s.y-this._listHeight,this._list.pos(s.x,i),this._list.zOrder=1001,e.ILaya.stage.addChild(this._list),e.ILaya.stage.once(e.Event.MOUSE_DOWN,this,this.removeList),e.ILaya.stage.on(e.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}_onStageMouseWheel(t){this._list&&!this._list.contains(t.target)&&this.removeList(null)}removeList(t){e.ILaya.stage.off(e.Event.MOUSE_DOWN,this,this.removeList),e.ILaya.stage.off(e.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this.isOpen=!1}get scrollBarSkin(){return this._scrollBarSkin}set scrollBarSkin(t){this._scrollBarSkin=t}get sizeGrid(){return this._button.sizeGrid}set sizeGrid(t){this._button.sizeGrid=t}get scrollBar(){return this.list.scrollBar}get button(){return this._button}get list(){return this._list||this._createList(),this._list}set list(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):super.dataSource=t}get dataSource(){return super.dataSource}get labelColors(){return this._button.labelColors}set labelColors(t){this._button.labelColors!=t&&(this._button.labelColors=t)}get labelPadding(){return this._button.text.padding.join(",")}set labelPadding(t){this._button.text.padding=l.fillArray(i.labelPadding,t,Number)}get labelSize(){return this._button.text.fontSize}set labelSize(t){this._button.text.fontSize=t}get labelBold(){return this._button.text.bold}set labelBold(t){this._button.text.bold=t}get labelFont(){return this._button.text.font}set labelFont(t){this._button.text.font=t}get stateNum(){return this._button.stateNum}set stateNum(t){this._button.stateNum=t}}e.ILaya.regClass(b),e.ClassUtils.regClass("laya.ui.ComboBox",b),e.ClassUtils.regClass("Laya.ComboBox",b);class w extends n{constructor(t=null){super(),this._value=.5,this.skin=t}destroy(t=!0){super.destroy(t),this._bg&&this._bg.destroy(t),this._bar&&this._bar.destroy(t),this._bg=this._bar=null,this.changeHandler=null}createChildren(){this.addChild(this._bg=new o),this.addChild(this._bar=new o),this._bar._bitmap.autoCacheCmd=!1}get skin(){return this._skin}set skin(t){this._skin!=t&&(this._skin=t,this._skin&&!e.Loader.getRes(this._skin)?e.ILaya.loader.load(this._skin,e.Handler.create(this,this._skinLoaded),null,e.Loader.IMAGE,1):this._skinLoaded())}_skinLoaded(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue),this._sizeChanged(),this.event(e.Event.LOADED)}measureWidth(){return this._bg.width}measureHeight(){return this._bg.height}get value(){return this._value}set value(t){this._value!=t&&(t=t>1?1:t<0?0:t,this._value=t,this.callLater(this.changeValue),this.event(e.Event.CHANGE),this.changeHandler&&this.changeHandler.runWith(t))}changeValue(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[3]),s=Number(t[1]),i=(this.width-e-s)*this._value;this._bar.width=e+s+i,this._bar.visible=this._bar.width>e+s}else this._bar.width=this.width*this._value}get bar(){return this._bar}get bg(){return this._bg}get sizeGrid(){return this._bg.sizeGrid}set sizeGrid(t){this._bg.sizeGrid=this._bar.sizeGrid=t}set width(t){super.width=t,this._bg.width=this._width,this.callLater(this.changeValue)}get width(){return super.width}set height(t){super.height=t,this._bg.height=this._height,this._bar.height=this._height}get height(){return super.height}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):super.dataSource=t}get dataSource(){return super.dataSource}}e.ILaya.regClass(w),e.ClassUtils.regClass("laya.ui.ProgressBar",w),e.ClassUtils.regClass("Laya.ProgressBar",w);class x extends d{constructor(t=null,e=""){super(t,e),this.toggle=!1,this._autoSize=!1}destroy(t=!0){super.destroy(t),this._value=null}preinitialize(){super.preinitialize(),this.toggle=!1,this._autoSize=!1}initialize(){super.initialize(),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on(e.Event.CLICK,this,this.onClick)}onClick(t){this.selected=!0}get value(){return null!=this._value?this._value:this.label}set value(t){this._value=t}}e.ILaya.regClass(x),e.ClassUtils.regClass("laya.ui.Radio",x),e.ClassUtils.regClass("Laya.Radio",x);class L extends c{constructor(t=null,e=null){super(),this._selectedIndex=-1,this._direction="horizontal",this._space=0,this.skin=e,this.labels=t}preinitialize(){this.mouseEnabled=!0}destroy(t=!0){super.destroy(t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null}addItem(t,e=!0){var s=t,i=this._items.length;if(s.name="item"+i,this.addChild(s),this.initItems(),e&&i>0){var h=this._items[i-1];"horizontal"==this._direction?s.x=h._x+h.width+this._space:s.y=h._y+h.height+this._space}else e&&(s.x=0,s.y=0);return i}delItem(t,e=!0){var s=this._items.indexOf(t);if(-1!=s){var i,h=t;this.removeChild(h);for(var r=s+1,a=this._items.length;r<a;r++){var l=this._items[r];l.name="item"+(r-1),e&&("horizontal"==this._direction?l.x-=h.width+this._space:l.y-=h.height+this._space)}this.initItems(),this._selectedIndex>-1&&(i=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=i)}}_afterInited(){this.initItems()}initItems(){this._items||(this._items=[]),this._items.length=0;for(var t=0;t<1e4;t++){var s=this.getChildByName("item"+t);if(null==s)break;this._items.push(s),s.selected=t===this._selectedIndex,s.clickHandler=e.Handler.create(this,this.itemClick,[t],!1)}}itemClick(t){this.selectedIndex=t}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event(e.Event.CHANGE),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}setSelect(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=e)}get skin(){return this._skin}set skin(t){this._skin!=t&&(this._skin=t,this._skin&&!e.Loader.getRes(this._skin)?e.ILaya.loader.load(this._skin,e.Handler.create(this,this._skinLoaded),null,e.Loader.IMAGE,1):this._skinLoaded())}_skinLoaded(){this._setLabelChanged(),this.event(e.Event.LOADED)}get labels(){return this._labels}set labels(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e=this._labels.split(","),s=0,i=e.length;s<i;s++){var h=this.createItem(this._skin,e[s]);h.name="item"+s,this.addChild(h)}this.initItems()}}createItem(t,e){return null}get labelColors(){return this._labelColors}set labelColors(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}get labelStroke(){return this._labelStroke}set labelStroke(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}get labelStrokeColor(){return this._labelStrokeColor}set labelStrokeColor(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}get strokeColors(){return this._strokeColors}set strokeColors(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}get labelSize(){return this._labelSize}set labelSize(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}get stateNum(){return this._stateNum}set stateNum(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}get labelBold(){return this._labelBold}set labelBold(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}get labelFont(){return this._labelFont}set labelFont(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}get labelPadding(){return this._labelPadding}set labelPadding(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}get direction(){return this._direction}set direction(t){this._direction=t,this._setLabelChanged()}get space(){return this._space}set space(t){this._space=t,this._setLabelChanged()}changeLabels(){if(this._labelChanged=!1,this._items)for(var t=0,e=0,s=this._items.length;e<s;e++){var i=this._items[e];this._skin&&(i.skin=this._skin),this._labelColors&&(i.labelColors=this._labelColors),this._labelSize&&(i.labelSize=this._labelSize),this._labelStroke&&(i.labelStroke=this._labelStroke),this._labelStrokeColor&&(i.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(i.strokeColors=this._strokeColors),this._labelBold&&(i.labelBold=this._labelBold),this._labelPadding&&(i.labelPadding=this._labelPadding),this._labelAlign&&(i.labelAlign=this._labelAlign),this._stateNum&&(i.stateNum=this._stateNum),this._labelFont&&(i.labelFont=this._labelFont),"horizontal"===this._direction?(i.y=0,i.x=t,t+=i.width+this._space):(i.x=0,i.y=t,t+=i.height+this._space)}this._sizeChanged()}commitMeasure(){this.runCallLater(this.changeLabels)}get items(){return this._items}get selection(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null}set selection(t){this.selectedIndex=this._items.indexOf(t)}set dataSource(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):super.dataSource=t}get dataSource(){return super.dataSource}_setLabelChanged(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))}}e.ILaya.regClass(L),e.ClassUtils.regClass("laya.ui.UIGroup",L),e.ClassUtils.regClass("Laya.UIGroup",L);class E extends L{createItem(t,e){return new x(t,e)}}e.ILaya.regClass(E),e.ClassUtils.regClass("laya.ui.RadioGroup",E),e.ClassUtils.regClass("Laya.RadioGroup",E);class I extends L{createItem(t,e){return new d(t,e)}}e.ILaya.regClass(I),e.ClassUtils.regClass("laya.ui.Tab",I),e.ClassUtils.regClass("Laya.Tab",I);class B extends c{constructor(){super(...arguments),this._setIndexHandler=e.Handler.create(this,this.setIndex,null,!1)}setItems(t){this.removeChildren();for(var e=0,s=0,i=t.length;s<i;s++){var h=t[s];h&&(h.name="item"+e,this.addChild(h),e++)}this.initItems()}addItem(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()}_afterInited(){this.initItems()}initItems(){this._items=[];for(var t=0;t<1e4;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}setSelect(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=e)}get selection(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null}set selection(t){this.selectedIndex=this._items.indexOf(t)}get setIndexHandler(){return this._setIndexHandler}set setIndexHandler(t){this._setIndexHandler=t}setIndex(t){this.selectedIndex=t}get items(){return this._items}set dataSource(t){if(this._dataSource=t,"number"==typeof t||"string"==typeof t)this.selectedIndex=parseInt(t);else for(var e in this._dataSource)e in this&&(this[e]=this._dataSource[e])}get dataSource(){return super.dataSource}}e.ILaya.regClass(B),e.ClassUtils.regClass("laya.ui.ViewStack",B),e.ClassUtils.regClass("Laya.ViewStack",B);class k extends C{constructor(t=""){super(),this.text=t,this.skin=this.skin}preinitialize(){this.mouseEnabled=!0}destroy(t=!0){super.destroy(t),this._bg&&this._bg.destroy(),this._bg=null}createChildren(){this.addChild(this._tf=new e.Input),this._tf.padding=i.inputLabelPadding,this._tf.on(e.Event.INPUT,this,this._onInput),this._tf.on(e.Event.ENTER,this,this._onEnter),this._tf.on(e.Event.BLUR,this,this._onBlur),this._tf.on(e.Event.FOCUS,this,this._onFocus)}_onFocus(){this.event(e.Event.FOCUS,this)}_onBlur(){this.event(e.Event.BLUR,this)}_onInput(){this.event(e.Event.INPUT,this)}_onEnter(){this.event(e.Event.ENTER,this)}initialize(){this.width=128,this.height=22}get bg(){return this._bg}set bg(t){this.graphics=this._bg=t}get skin(){return this._skin}set skin(t){this._skin!=t&&(this._skin=t,this._skin&&!e.Loader.getRes(this._skin)?e.ILaya.loader.load(this._skin,e.Handler.create(this,this._skinLoaded),null,e.Loader.IMAGE,1):this._skinLoaded())}_skinLoaded(){this._bg||(this.graphics=this._bg=new h),this._bg.source=e.Loader.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height),this._sizeChanged(),this.event(e.Event.LOADED)}get sizeGrid(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null}set sizeGrid(t){this._bg||(this.graphics=this._bg=new h),this._bg.sizeGrid=l.fillArray(i.defaultSizeGrid,t,Number)}set text(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event(e.Event.CHANGE))}get text(){return super.text}set width(t){super.width=t,this._bg&&(this._bg.width=t)}get width(){return super.width}set height(t){super.height=t,this._bg&&(this._bg.height=t)}get height(){return super.height}get multiline(){return this._tf.multiline}set multiline(t){this._tf.multiline=t}set editable(t){this._tf.editable=t}get editable(){return this._tf.editable}select(){this._tf.select()}get restrict(){return this._tf.restrict}set restrict(t){this._tf.restrict=t}get prompt(){return this._tf.prompt}set prompt(t){this._tf.prompt=t}get promptColor(){return this._tf.promptColor}set promptColor(t){this._tf.promptColor=t}get maxChars(){return this._tf.maxChars}set maxChars(t){this._tf.maxChars=t}get focus(){return this._tf.focus}set focus(t){this._tf.focus=t}get type(){return this._tf.type}set type(t){this._tf.type=t}setSelection(t,e){this._tf.setSelection(t,e)}}e.ILaya.regClass(k),e.ClassUtils.regClass("laya.ui.TextInput",k),e.ClassUtils.regClass("Laya.TextInput",k);class M extends k{constructor(t=""){super(t),this.on(e.Event.CHANGE,this,this._onTextChange)}_onTextChange(){this.callLater(this.changeScroll)}destroy(t=!0){this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null,super.destroy(t)}initialize(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0}set width(t){super.width=t,this.callLater(this.changeScroll)}get width(){return super.width}set height(t){super.height=t,this.callLater(this.changeScroll)}get height(){return super.height}get vScrollBarSkin(){return this._vScrollBar?this._vScrollBar.skin:null}set vScrollBarSkin(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new f),this._vScrollBar.on(e.Event.CHANGE,this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}get hScrollBarSkin(){return this._hScrollBar?this._hScrollBar.skin:null}set hScrollBarSkin(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new S),this._hScrollBar.on(e.Event.CHANGE,this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}onVBarChanged(t){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)}onHBarChanged(t){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)}get vScrollBar(){return this._vScrollBar}get hScrollBar(){return this._hScrollBar}get maxScrollY(){return this._tf.maxScrollY}get scrollY(){return this._tf.scrollY}get maxScrollX(){return this._tf.maxScrollX}get scrollX(){return this._tf.scrollX}changeScroll(){var t=this._vScrollBar&&this._tf.maxScrollY>0,e=this._hScrollBar&&this._tf.maxScrollX>0,s=t?this._width-this._vScrollBar.width:this._width,h=e?this._height-this._hScrollBar.height:this._height,r=this._tf.padding||i.labelPadding;this._tf.width=s,this._tf.height=h,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-r[2],this._vScrollBar.y=r[1],this._vScrollBar.height=this._height-(e?this._hScrollBar.height:0)-r[1]-r[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=h/Math.max(this._tf.textHeight,h),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=r[0],this._hScrollBar.y=this._height-this._hScrollBar.height-r[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-r[0]-r[2],this._hScrollBar.scrollSize=Math.max(.033*s,1),this._hScrollBar.thumbPercent=s/Math.max(this._tf.textWidth,s),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e)}scrollTo(t){this.commitMeasure(),this._tf.scrollY=t}}e.ILaya.regClass(M),e.ClassUtils.regClass("laya.ui.TextArea",M),e.ClassUtils.regClass("Laya.TextArea",M);class O extends c{constructor(){super(...arguments),this._oldW=0,this._oldH=0}onEnable(){e.ILaya.stage.on("resize",this,this.onResize),this.onResize()}onDisable(){e.ILaya.stage.off("resize",this,this.onResize)}onResize(){let t=e.ILaya.stage;if(this.width>0&&this.height>0){var s=Math.min(t.width/this._oldW,t.height/this._oldH);super.width=t.width,super.height=t.height,this.scale(s,s)}}set width(t){super.width=t,this._oldW=t}get width(){return super.width}set height(t){super.height=t,this._oldH=t}get height(){return super.height}}e.ILaya.regClass(O),e.ClassUtils.regClass("laya.ui.ScaleBox",O),e.ClassUtils.regClass("Laya.ScaleBox",O);class T extends m{constructor(t=null){super(t),this.isVertical=!1}}e.ILaya.regClass(T),e.ClassUtils.regClass("laya.ui.HSlider",T),e.ClassUtils.regClass("Laya.HSlider",T);class z extends c{constructor(){super(),this._usedCache=null,this._elasticEnabled=!1,this.width=this.height=100}destroy(t=!0){super.destroy(t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null}destroyChildren(){this._content.destroyChildren()}createChildren(){super.addChild(this._content=new c)}addChild(t){return t.on(e.Event.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.addChild(t)}onResize(){this._setScrollChanged()}addChildAt(t,s){return t.on(e.Event.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,s)}removeChild(t){return t.off(e.Event.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)}removeChildAt(t){return this.getChildAt(t).off(e.Event.RESIZE,this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)}removeChildren(t=0,e=2147483647){return this._content.removeChildren(t,e),this._setScrollChanged(),this}getChildAt(t){return this._content.getChildAt(t)}getChildByName(t){return this._content.getChildByName(t)}getChildIndex(t){return this._content.getChildIndex(t)}get numChildren(){return this._content.numChildren}changeScroll(){this._scrollChanged=!1;var t=this.contentWidth||1,e=this.contentHeight||1,s=this._vScrollBar,i=this._hScrollBar,h=s&&e>this._height,r=i&&t>this._width,a=h?this._width-s.width:this._width,l=r?this._height-i.height:this._height;s&&(s.x=this._width-s.width,s.y=0,s.height=this._height-(r?i.height:0),s.scrollSize=Math.max(.033*this._height,1),s.thumbPercent=l/e,s.setScroll(0,e-l,s.value)),i&&(i.x=0,i.y=this._height-i.height,i.width=this._width-(h?s.width:0),i.scrollSize=Math.max(.033*this._width,1),i.thumbPercent=a/t,i.setScroll(0,t-a,i.value))}_sizeChanged(){super._sizeChanged(),this.setContentSize(this._width,this._height)}get contentWidth(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var s=this._content.getChildAt(e);t=Math.max(s._x+s.width*s.scaleX-s.pivotX,t)}return t}get contentHeight(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var s=this._content.getChildAt(e);t=Math.max(s._y+s.height*s.scaleY-s.pivotY,t)}return t}setContentSize(t,s){var i=this._content;i.width=t,i.height=s,i._style.scrollRect||(i.scrollRect=e.Rectangle.create()),i._style.scrollRect.setTo(0,0,t,s),i.scrollRect=i.scrollRect}set width(t){super.width=t,this._setScrollChanged()}get width(){return super.width}set height(t){super.height=t,this._setScrollChanged()}get height(){return super.height}get vScrollBarSkin(){return this._vScrollBar?this._vScrollBar.skin:null}set vScrollBarSkin(t){null==this._vScrollBar&&(super.addChild(this._vScrollBar=new f),this._vScrollBar.on(e.Event.CHANGE,this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._vScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged()),this._vScrollBar.skin=t}get hScrollBarSkin(){return this._hScrollBar?this._hScrollBar.skin:null}set hScrollBarSkin(t){null==this._hScrollBar&&(super.addChild(this._hScrollBar=new S),this._hScrollBar.on(e.Event.CHANGE,this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._hScrollBar.elasticDistance=this._elasticEnabled?200:0,this._setScrollChanged()),this._hScrollBar.skin=t}get vScrollBar(){return this._vScrollBar}get hScrollBar(){return this._hScrollBar}get content(){return this._content}onScrollBarChange(t){var e=this._content._style.scrollRect;if(e){var s=Math.round(t.value);t.isVertical?e.y=s:e.x=s,this._content.scrollRect=e}}scrollTo(t=0,e=0){this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)}refresh(){this.changeScroll()}set cacheAs(t){super.cacheAs=t,this._usedCache=null,"none"!==t?(this._hScrollBar&&this._hScrollBar.on(e.Event.START,this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on(e.Event.START,this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off(e.Event.START,this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off(e.Event.START,this,this.onScrollStart))}get cacheAs(){return super.cacheAs}get elasticEnabled(){return this._elasticEnabled}set elasticEnabled(t){this._elasticEnabled=t,this._vScrollBar&&(this._vScrollBar.elasticDistance=t?200:0),this._hScrollBar&&(this._hScrollBar.elasticDistance=t?200:0)}onScrollStart(){this._usedCache||(this._usedCache=super.cacheAs),super.cacheAs="none",this._hScrollBar&&this._hScrollBar.once(e.Event.END,this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once(e.Event.END,this,this.onScrollEnd)}onScrollEnd(){super.cacheAs=this._usedCache}_setScrollChanged(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))}}e.ILaya.regClass(z),e.ClassUtils.regClass("laya.ui.Panel",z),e.ClassUtils.regClass("Laya.Panel",z);class U extends m{}e.ILaya.regClass(U),e.ClassUtils.regClass("laya.ui.VSlider",U),e.ClassUtils.regClass("Laya.VSlider",U);class D extends c{constructor(){super(),this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,this.width=this.height=200}destroy(t=!0){super.destroy(t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null}createChildren(){this.addChild(this._list=new y),this._list.renderHandler=e.Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on(e.Event.CHANGE,this,this.onListChange)}onListChange(t=null){this.event(e.Event.CHANGE)}get keepStatus(){return this._keepStatus}set keepStatus(t){this._keepStatus=t}get array(){return this._list.array}set array(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}get source(){return this._source}get list(){return this._list}get itemRender(){return this._list.itemRender}set itemRender(t){this._list.itemRender=t}get scrollBarSkin(){return this._list.vScrollBarSkin}set scrollBarSkin(t){this._list.vScrollBarSkin=t}get scrollBar(){return this._list.scrollBar}get mouseHandler(){return this._list.mouseHandler}set mouseHandler(t){this._list.mouseHandler=t}get renderHandler(){return this._renderHandler}set renderHandler(t){this._renderHandler=t}get spaceLeft(){return this._spaceLeft}set spaceLeft(t){this._spaceLeft=t}get spaceBottom(){return this._list.spaceY}set spaceBottom(t){this._list.spaceY=t}get selectedIndex(){return this._list.selectedIndex}set selectedIndex(t){this._list.selectedIndex=t}get selectedItem(){return this._list.selectedItem}set selectedItem(t){this._list.selectedItem=t}set width(t){super.width=t,this._list.width=t}get width(){return super.width}set height(t){super.height=t,this._list.height=t}get height(){return super.height}getArray(){var t=[];for(let e in this._source){let s=this._source[e];this.getParentOpenStatus(s)&&(s.x=this._spaceLeft*this.getDepth(s),t.push(s))}return t}getDepth(t,e=0){return null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)}getParentOpenStatus(t){var e=t.nodeParent;return null==e||!!e.isOpen&&(null==e.nodeParent||this.getParentOpenStatus(e))}renderItem(t,s){var i=t.dataSource;if(i){t.left=i.x;var h=t.getChildByName("arrow");h&&(i.hasChild?(h.visible=!0,h.index=i.isOpen?1:0,h.tag=s,h.off(e.Event.CLICK,this,this.onArrowClick),h.on(e.Event.CLICK,this,this.onArrowClick)):h.visible=!1);var r=t.getChildByName("folder");r&&(2==r.clipY?r.index=i.isDirectory?0:1:r.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,s])}}onArrowClick(t){var s=t.currentTarget.tag;this._list.array[s].isOpen=!this._list.array[s].isOpen,this.event(e.Event.OPEN),this._list.array=this.getArray()}setItemState(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())}fresh(){this._list.array=this.getArray(),this.repaint()}set dataSource(t){this._dataSource=t,super.dataSource=t}get dataSource(){return super.dataSource}set xml(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}parseXml(t,e,s,i){var h,r=t.childNodes,a=r.length;if(!i){h={};var l=t.attributes;for(let t in l){var n=l[t],o=n.nodeName,_=n.nodeValue;h[o]="true"==_||"false"!=_&&_}h.nodeParent=s,a>0&&(h.isDirectory=!0),h.hasChild=a>0,e.push(h)}for(var c=0;c<a;c++){var d=r[c];this.parseXml(d,e,h,!1)}}parseOpenStatus(t,e){for(var s=0,i=e.length;s<i;s++){var h=e[s];if(h.isDirectory)for(var r=0,a=t.length;r<a;r++){var l=t[r];if(l.isDirectory&&this.isSameParent(l,h)&&h.label==l.label){h.isOpen=l.isOpen;break}}}}isSameParent(t,e){return null==t.nodeParent&&null==e.nodeParent||null!=t.nodeParent&&null!=e.nodeParent&&t.nodeParent.label==e.nodeParent.label&&this.isSameParent(t.nodeParent,e.nodeParent)}get selectedPath(){return this._list.selectedItem?this._list.selectedItem.path:null}filter(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()}getFilterSource(t,e,s){s=s.toLocaleLowerCase();for(let i of t)!i.isDirectory&&String(i.label).toLowerCase().indexOf(s)>-1&&(i.x=0,e.push(i)),i.child&&i.child.length>0&&this.getFilterSource(i.child,e,s)}}e.ILaya.regClass(D),e.ClassUtils.regClass("laya.ui.Tree",D),e.ClassUtils.regClass("Laya.Tree",D);class H extends c{constructor(){super(...arguments),this._space=0,this._align="none",this._itemChanged=!1}addChild(t){return t.on(e.Event.RESIZE,this,this.onResize),this._setItemChanged(),super.addChild(t)}onResize(t){this._setItemChanged()}addChildAt(t,s){return t.on(e.Event.RESIZE,this,this.onResize),this._setItemChanged(),super.addChildAt(t,s)}removeChildAt(t){return this.getChildAt(t).off(e.Event.RESIZE,this,this.onResize),this._setItemChanged(),super.removeChildAt(t)}refresh(){this._setItemChanged()}changeItems(){this._itemChanged=!1}get space(){return this._space}set space(t){this._space=t,this._setItemChanged()}get align(){return this._align}set align(t){this._align=t,this._setItemChanged()}sortItem(t){t&&t.sort((function(t,e){return t.y-e.y}))}_setItemChanged(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))}}e.ILaya.regClass(H),e.ClassUtils.regClass("laya.ui.LayoutBox",H),e.ClassUtils.regClass("Laya.LayoutBox",H);class A extends H{sortItem(t){t&&t.sort((function(t,e){return t.x-e.x}))}set height(t){this._height!=t&&(super.height=t,this.callLater(this.changeItems))}get height(){return super.height}changeItems(){this._itemChanged=!1;for(var t=[],e=0,s=0,i=this.numChildren;s<i;s++){var h=this.getChildAt(s);h&&(t.push(h),e=this._height?this._height:Math.max(e,h.height*h.scaleY))}this.sortItem(t);var r=0;for(s=0,i=t.length;s<i;s++)(h=t[s]).x=r,r+=h.width*h.scaleX+this._space,this._align==A.TOP?h.y=0:this._align==A.MIDDLE?h.y=.5*(e-h.height*h.scaleY):this._align==A.BOTTOM&&(h.y=e-h.height*h.scaleY);this._sizeChanged()}}A.NONE="none",A.TOP="top",A.MIDDLE="middle",A.BOTTOM="bottom",e.ILaya.regClass(A),e.ClassUtils.regClass("laya.ui.HBox",A),e.ClassUtils.regClass("Laya.HBox",A);class N extends H{set width(t){this._width!=t&&(super.width=t,this.callLater(this.changeItems))}get width(){return super.width}changeItems(){this._itemChanged=!1;for(var t=[],e=0,s=0,i=this.numChildren;s<i;s++){var h=this.getChildAt(s);h&&(t.push(h),e=this._width?this._width:Math.max(e,h.width*h.scaleX))}this.sortItem(t);var r=0;for(s=0,i=t.length;s<i;s++)(h=t[s]).y=r,r+=h.height*h.scaleY+this._space,this._align==N.LEFT?h.x=0:this._align==N.CENTER?h.x=.5*(e-h.width*h.scaleX):this._align==N.RIGHT&&(h.x=e-h.width*h.scaleX);this._sizeChanged()}}N.NONE="none",N.LEFT="left",N.CENTER="center",N.RIGHT="right",e.ILaya.regClass(N),e.ClassUtils.regClass("laya.ui.VBox",N),e.ClassUtils.regClass("Laya.VBox",N);class P extends g{constructor(t=null,e=null){super(),this._valueArr="",this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,t&&(this.skin=t),e&&(this.sheet=e)}createChildren(){this._bitmap=new h,this.on(e.Event.LOADED,this,this._onClipLoaded)}_onClipLoaded(){this.callLater(this.changeValue)}get sheet(){return this._sheet}set sheet(t){t+="",this._sheet=t;var e=t.split(" ");this._clipX=String(e[0]).length,this.clipY=e.length,this._indexMap={};for(var s=0;s<this._clipY;s++)for(var i=e[s].split(""),h=0,r=i.length;h<r;h++)this._indexMap[i[h]]=s*this._clipX+h}get value(){return this._valueArr?this._valueArr:""}set value(t){t+="",this._valueArr=t,this.callLater(this.changeValue)}get direction(){return this._direction}set direction(t){this._direction=t,this.callLater(this.changeValue)}get spaceX(){return this._spaceX}set spaceX(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}get spaceY(){return this._spaceY}set spaceY(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}set align(t){this._align=t,this.callLater(this.changeValue)}get align(){return this._align}changeValue(){var t;if(this._sources&&this._valueArr&&(this.graphics.clear(!0),t=this._sources[0])){var e="horizontal"===this._direction;e?(this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX),this._wordsH=t.sourceHeight):(this._wordsW=t.sourceWidth,this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length);var s=0;if(this._width)switch(this._align){case"center":s=.5*(this._width-this._wordsW);break;case"right":s=this._width-this._wordsW;break;default:s=0}for(var i=0,h=this._valueArr.length;i<h;i++){var r=this._indexMap[this._valueArr.charAt(i)];this.sources[r]&&(t=this.sources[r],e?this.graphics.drawImage(t,s+i*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight):this.graphics.drawImage(t,0+s,i*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight))}this._width||(this._widget.resetLayoutX(),this.callLater(this._sizeChanged)),this._height||(this._widget.resetLayoutY(),this.callLater(this._sizeChanged))}}set width(t){super.width=t,this.callLater(this.changeValue)}get width(){return super.width}set height(t){super.height=t,this.callLater(this.changeValue)}get height(){return super.height}measureWidth(){return this._wordsW}measureHeight(){return this._wordsH}destroy(t=!0){this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off(e.Event.LOADED,this,this._onClipLoaded),super.destroy(t)}}e.ILaya.regClass(P),e.ClassUtils.regClass("laya.ui.FontClip",P),e.ClassUtils.regClass("Laya.FontClip",P);class Y extends e.Scene{constructor(){super(!1),this._watchMap={},this._anchorX=NaN,this._anchorY=NaN,this._widget=r.EMPTY,this.createChildren()}static __init__(){e.ILaya.ClassUtils.regShortClassName([B,d,M,p,c,O,u,g,b,n,S,T,o,C,y,z,w,x,E,v,m,I,k,Y,f,U,D,A,N,e.Animation,e.Text,P])}static regComponent(t,s){e.ILaya.ClassUtils.regClass(t,s)}static regViewRuntime(t,s){e.ILaya.ClassUtils.regClass(t,s)}static regUI(t,s){e.ILaya.loader.cacheRes(t,s)}destroy(t=!0){this._watchMap=null,super.destroy(t)}changeData(t){var e=this._watchMap[t];if(e)for(var s=0,i=e.length;s<i;s++)e[s].exe(this)}get top(){return this._widget.top}set top(t){t!=this._widget.top&&(this._getWidget().top=t)}get bottom(){return this._widget.bottom}set bottom(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}get left(){return this._widget.left}set left(t){t!=this._widget.left&&(this._getWidget().left=t)}get right(){return this._widget.right}set right(t){t!=this._widget.right&&(this._getWidget().right=t)}get centerX(){return this._widget.centerX}set centerX(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}get centerY(){return this._widget.centerY}set centerY(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}get anchorX(){return this._anchorX}set anchorX(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}get anchorY(){return this._anchorY}set anchorY(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}_sizeChanged(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event(e.Event.RESIZE)}_getWidget(){return this._widget===r.EMPTY&&(this._widget=this.addComponent(r)),this._widget}loadUI(t){var e=Y.uiMap[t];Y.uiMap&&this.createView(e)}get dataSource(){return this._dataSource}set dataSource(t){for(var e in this._dataSource=t,t){var s=this.getChildByName(e);s instanceof n?s.dataSource=t[e]:e in this&&!(this[e]instanceof Function)&&(this[e]=t[e])}}}Y.uiMap={},e.ILaya.regClass(Y),e.ClassUtils.regClass("laya.ui.View",Y),e.ClassUtils.regClass("Laya.View",Y);class R{}class X extends e.Sprite{constructor(){super(),this.maskLayer=new e.Sprite,this.popupEffect=t=>{t.scale(1,1),t._effectTween=e.Tween.from(t,{x:e.ILaya.stage.width/2,y:e.ILaya.stage.height/2,scaleX:0,scaleY:0},300,e.Ease.backOut,e.Handler.create(this,this.doOpen,[t]),0,!1,!1)},this.closeEffect=t=>{t._effectTween=e.Tween.to(t,{x:e.ILaya.stage.width/2,y:e.ILaya.stage.height/2,scaleX:0,scaleY:0},300,e.Ease.strongOut,e.Handler.create(this,this.doClose,[t]),0,!1,!1)},this.popupEffectHandler=new e.Handler(this,this.popupEffect),this.closeEffectHandler=new e.Handler(this,this.closeEffect),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,e.ILaya.stage.addChild(this),e.ILaya.stage.on(e.Event.RESIZE,this,this._onResize),s.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}_closeOnSide(){var t=this.getChildAt(this.numChildren-1);t instanceof R.Dialog&&t.close()}setLockView(t){this.lockLayer||(this.lockLayer=new c,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(e.ILaya.stage.width,e.ILaya.stage.height)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))}_onResize(t=null){var i=this.maskLayer.width=e.ILaya.stage.width,h=this.maskLayer.height=e.ILaya.stage.height;this.lockLayer&&this.lockLayer.size(i,h),this.maskLayer.graphics.clear(!0),this.maskLayer.graphics.drawRect(0,0,i,h,s.popupBgColor),this.maskLayer.alpha=s.popupBgAlpha;for(var r=this.numChildren-1;r>-1;r--){var a=this.getChildAt(r);a.isPopupCenter&&this._centerDialog(a)}}_centerDialog(t){t.x=Math.round((e.ILaya.stage.width-t.width>>1)+t.pivotX),t.y=Math.round((e.ILaya.stage.height-t.height>>1)+t.pivotY)}open(t,s=!1,i=!1){s&&this._closeAll(),this._clearDialogEffect(t),t.isPopupCenter&&this._centerDialog(t),this.addChild(t),(t.isModal||this._getBit(e.Const.HAS_ZORDER))&&e.ILaya.timer.callLater(this,this._checkMask),i&&null!=t.popupEffect?t.popupEffect.runWith(t):this.doOpen(t),this.event(e.Event.OPEN)}_clearDialogEffect(t){t._effectTween&&(e.Tween.clear(t._effectTween),t._effectTween=null)}doOpen(t){t.onOpened(t._param)}lock(t){this.lockLayer&&(t?this.addChild(this.lockLayer):this.lockLayer.removeSelf())}close(t){this._clearDialogEffect(t),t.isShowEffect&&null!=t.closeEffect?t.closeEffect.runWith([t]):this.doClose(t),this.event(e.Event.CLOSE)}doClose(t){t.removeSelf(),t.isModal&&this._checkMask(),t.closeHandler&&t.closeHandler.runWith(t.closeType),t.onClosed(t.closeType),t.autoDestroyAtClosed&&t.destroy()}closeAll(){this._closeAll(),this.event(e.Event.CLOSE)}_closeAll(){for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);e&&null!=e.close&&this.doClose(e)}}getDialogsByGroup(t){for(var e=[],s=this.numChildren-1;s>-1;s--){var i=this.getChildAt(s);i&&i.group===t&&e.push(i)}return e}closeByGroup(t){for(var e=[],s=this.numChildren-1;s>-1;s--){var i=this.getChildAt(s);i&&i.group===t&&(i.close(),e.push(i))}return e}_checkMask(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);if(e&&e.isModal)return void this.addChildAt(this.maskLayer,t)}}}e.ClassUtils.regClass("laya.ui.DialogManager",X),e.ClassUtils.regClass("Laya.DialogManager",X);class G extends Y{constructor(){super(),this.isShowEffect=!0,this.isPopupCenter=!0,this.popupEffect=G.manager.popupEffectHandler,this.closeEffect=G.manager.closeEffectHandler,this._dealDragArea(),this.on(e.Event.CLICK,this,this._onClick)}static get manager(){return G._manager=G._manager||new X}static set manager(t){G._manager=t}_dealDragArea(){var t=this.getChildByName("drag");t&&(this.dragArea=t._x+","+t._y+","+t.width+","+t.height,t.removeSelf())}get dragArea(){return this._dragArea?this._dragArea.toString():null}set dragArea(t){if(t){var s=l.fillArray([0,0,0,0],t,Number);this._dragArea=new e.Rectangle(s[0],s[1],s[2],s[3]),this.on(e.Event.MOUSE_DOWN,this,this._onMouseDown)}else this._dragArea=null,this.off(e.Event.MOUSE_DOWN,this,this._onMouseDown)}_onMouseDown(t){var e=this.getMousePoint();this._dragArea.contains(e.x,e.y)?this.startDrag():this.stopDrag()}_onClick(t){var e=t.target;if(e)switch(e.name){case G.CLOSE:case G.CANCEL:case G.SURE:case G.NO:case G.OK:case G.YES:return void this.close(e.name)}}open(t=!0,e=null){this._dealDragArea(),this._param=e,G.manager.open(this,t,this.isShowEffect),G.manager.lock(!1)}close(t=null){this.closeType=t,G.manager.close(this)}destroy(t=!0){this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this._dragArea=null,super.destroy(t)}show(t=!1,e=!0){this._open(!1,t,e)}popup(t=!1,e=!0){this._open(!0,t,e)}_open(t,e,s){this.isModal=t,this.isShowEffect=s,G.manager.lock(!0),this.open(e)}get isPopup(){return null!=this.parent}set zOrder(t){super.zOrder=t,G.manager._checkMask()}get zOrder(){return super.zOrder}static setLockView(t){G.manager.setLockView(t)}static lock(t){G.manager.lock(t)}static closeAll(){G.manager.closeAll()}static getDialogsByGroup(t){return G.manager.getDialogsByGroup(t)}static closeByGroup(t){return G.manager.closeByGroup(t)}}G.CLOSE="close",G.CANCEL="cancel",G.SURE="sure",G.NO="no",G.YES="yes",G.OK="ok",R.Dialog=G,e.ILaya.regClass(G),e.ClassUtils.regClass("laya.ui.Dialog",G),e.ClassUtils.regClass("Laya.Dialog",G);class W extends n{constructor(){super(),this._tipBox=new n,this._tipBox.addChild(this._tipText=new e.Text),this._tipText.x=this._tipText.y=5,this._tipText.color=W.tipTextColor,this._defaultTipHandler=this._showDefaultTip,e.ILaya.stage.on(a.SHOW_TIP,this,this._onStageShowTip),e.ILaya.stage.on(a.HIDE_TIP,this,this._onStageHideTip),this.zOrder=1100}_onStageHideTip(t){e.ILaya.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()}_onStageShowTip(t){e.ILaya.timer.once(W.tipDelay,this,this._showTip,[t],!0)}_showTip(t){if("string"==typeof t){var s=String(t);Boolean(s)&&this._defaultTipHandler(s)}else t instanceof e.Handler?t.run():t instanceof Function&&t.apply();e.ILaya.stage.on(e.Event.MOUSE_MOVE,this,this._onStageMouseMove),e.ILaya.stage.on(e.Event.MOUSE_DOWN,this,this._onStageMouseDown),this._onStageMouseMove(null)}_onStageMouseDown(t){this.closeAll()}_onStageMouseMove(t){this._showToStage(this,W.offsetX,W.offsetY)}_showToStage(t,s=0,i=0){var h=t.getBounds();t.x=e.ILaya.stage.mouseX+s,t.y=e.ILaya.stage.mouseY+i,t._x+h.width>e.ILaya.stage.width&&(t.x-=h.width+s),t._y+h.height>e.ILaya.stage.height&&(t.y-=h.height+i)}closeAll(){e.ILaya.timer.clear(this,this._showTip),e.ILaya.stage.off(e.Event.MOUSE_MOVE,this,this._onStageMouseMove),e.ILaya.stage.off(e.Event.MOUSE_DOWN,this,this._onStageMouseDown),this.removeChildren()}showDislayTip(t){this.addChild(t),this._showToStage(this),e.ILaya.stage.addChild(this)}_showDefaultTip(t){this._tipText.text=t;var s=this._tipBox.graphics;s.clear(!0),s.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,W.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),e.ILaya.stage.addChild(this)}get defaultTipHandler(){return this._defaultTipHandler}set defaultTipHandler(t){this._defaultTipHandler=t}}W.offsetX=10,W.offsetY=15,W.tipTextColor="#ffffff",W.tipBackColor="#111111",W.tipDelay=200,e.ILaya.regClass(W),e.ClassUtils.regClass("laya.ui.TipManager",W),e.ClassUtils.regClass("Laya.TipManager",W);class V extends n{constructor(){super(),this._width=this._height=200;var t=new e.Texture;t.bitmap=new e.Texture2D,this.texture=t}onEnable(){this.postMsg({type:"display",rate:e.Laya.stage.frameRate}),window.wx&&window.sharedCanvas&&e.Laya.timer.frameLoop(1,this,this._onLoop)}onDisable(){this.postMsg({type:"undisplay"}),e.Laya.timer.clear(this,this._onLoop)}_onLoop(){let t=window.sharedCanvas;this.texture.sourceWidth=t.width,this.texture.sourceHeight=t.height,this.texture.bitmap.loadImageSource(t)}set width(t){super.width=t,window.sharedCanvas&&(window.sharedCanvas.width=t),this.callLater(this._postMsg)}get width(){return super.width}set height(t){super.height=t,window.sharedCanvas&&(window.sharedCanvas.height=t),this.callLater(this._postMsg)}get height(){return super.height}set x(t){super.x=t,this.callLater(this._postMsg)}get x(){return super.x}set y(t){super.y=t,this.callLater(this._postMsg)}get y(){return super.y}_postMsg(){var t=new e.Matrix;t.translate(this.x,this.y);var s=e.Laya.stage;t.scale(s._canvasTransform.getScaleX()*this.globalScaleX*s.transform.getScaleX(),s._canvasTransform.getScaleY()*this.globalScaleY*s.transform.getScaleY()),this.postMsg({type:"changeMatrix",a:t.a,b:t.b,c:t.c,d:t.d,tx:t.tx,ty:t.ty,w:this.width,h:this.height})}postMsg(t){window.wx&&window.wx.getOpenDataContext&&window.wx.getOpenDataContext().postMessage(t)}}e.ILaya.regClass(V),e.ClassUtils.regClass("laya.ui.WXOpenDataViewer",V),e.ClassUtils.regClass("Laya.WXOpenDataViewer",V),t.AdvImage=_,t.AutoBitmap=h,t.Box=c,t.Button=d,t.CheckBox=u,t.Clip=g,t.ColorPicker=p,t.ComboBox=b,t.Dialog=G,t.DialogManager=X,t.FontClip=P,t.HBox=A,t.HScrollBar=S,t.HSlider=T,t.IUI=R,t.Image=o,t.Label=C,t.LayoutBox=H,t.List=y,t.Panel=z,t.ProgressBar=w,t.Radio=x,t.RadioGroup=E,t.ScaleBox=O,t.ScrollBar=v,t.Slider=m,t.Styles=i,t.Tab=I,t.TextArea=M,t.TextInput=k,t.TipManager=W,t.Tree=D,t.UIComponent=n,t.UIConfig=s,t.UIEvent=a,t.UIGroup=L,t.UILib=class{static __init__(){}},t.UIUtils=l,t.VBox=N,t.VScrollBar=f,t.VSlider=U,t.View=Y,t.ViewStack=B,t.WXOpenDataViewer=V,t.Widget=r}(window.Laya=window.Laya||{},Laya)}).call(window.proxiesWindow,void 0,void 0,void 0,void 0,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.proxiesWindow,window.extendedWindow.location(),window.extendedWindow.navigator(),window.extendedWindow.document(),window.extendedWindow.localStorage(),window.extendedWindow.sessionStorage(),window.extendedWindow.requestAnimationFrame(),window.extendedWindow.cancelAnimationFrame(),window.extendedWindow.XMLHttpRequest(),window.extendedWindow.fetch(),window.extendedWindow.FontFace(),window.extendedWindow.open(),window.extendedWindow.Image(),window.extendedWindow.Audio())}}]);