(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[757],[,function(e,t,n){"use strict";n.r(t);var a=(0,n(46).getImageScale)(),i={DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x/default-resources.png",JSON:"./assets/textures/"+a+"x/default-resources.json",FRAME:{BLANK:"blank",HAND:"hand",LINE_TAB_RANK:"line_tab_rank",FX_HAND:"fx_hand",PRELOADER:"preloader/dual-ring",BG_AVA:"backgrounds/bg_ava",BG_AVA_0:"backgrounds/bg_ava_0",BG_AVA_1:"backgrounds/bg_ava_1",BG_LIFE:"backgrounds/bg_life",BG_RANK:"backgrounds/bg_rank",BG_RANK_0:"backgrounds/bg_rank_0",BG_RANK_1:"backgrounds/bg_rank_1",BG_RANK_2:"backgrounds/bg_rank_2",BG_TILE_RANK:"backgrounds/bg_tile_rank",BG_OFF:"backgrounds/bg_off",BG_ON:"backgrounds/bg_on",BACKGROUND:"backgrounds/bg",ICON_DEFAULT_AVATAR:"icons/icon-default-avatar",ICON_GLOBAL:"icons/icon-global",ICON_LOADING:"preloader/dual-ring",ICON_CROWN:"icons/icon_crown",ICON_HELP:"icons/icon_help",ICON_LIFE:"icons/icon_life",ICON_RANK_1:"icons/icon_rank_1",ICON_RANK_2:"icons/icon_rank_2",ICON_RANK_3:"icons/icon_rank_3",ICON_TIME:"icons/icon_time",ICON_UNMOVE:"icons/icon_unmove",BUTTON_BACK:"buttons/button_back",BUTTON_BATTLE:"buttons/button_bettle",BUTTON_PLUS:"buttons/button_plus",BUTTON_RED:"buttons/button_red",BUTTON_SETTING:"buttons/button_setting",NOTE_OFF:"notes/note_off",NOTE_ON:"notes/note_on",SQUARE:"game-play/square",TUBE:"game-play/tube",TUBE_MASK:"game-play/tube-mask",PREFIX_WAVE:"game-play/wave/wave_",ART_SKIP:"game-play/art_skip",BUTTON_INVITE:"game-play/buttons/button_invite",BUTTON_MINI_BLUE:"game-play/buttons/button_mini_blue",BUTTON_MINI_GREEN:"game-play/buttons/button_mini_green",BUTTON_BLUE:"game-play/buttons/button_blue",BUTTON_CLOSE:"game-play/buttons/button_close",BUTTON_GREEN:"game-play/buttons/button_green",BUTTON_LONG_GREEN:"game-play/buttons/button_long_green",POPUP_RESULT:"game-play/popup/popup_result",POPUP_BOTTOM_LEFT:"game-play/popups/bottom-left",POPUP_BOTTOM_MIDDLE:"game-play/popups/bottom-middle",POPUP_BOTTOM_RIGHT:"game-play/popups/bottom-right",POPUP_MIDDLE_LEFT:"game-play/popups/middle-left",POPUP_MIDDLE_MIDDLE:"game-play/popups/middle",POPUP_MIDDLE_RIGHT:"game-play/popups/middle-right",POPUP_TOP_LEFT:"game-play/popups/top-left",POPUP_TOP_MIDDLE:"game-play/popups/top-middle",POPUP_TOP_RIGHT:"game-play/popups/top-right",ICON_HINT:"game-play/icons/icon_hint",ICON_MAGNIFYING_GLASS:"game-play/icons/magnifying-glass",ICON_RESET:"game-play/icons/icon_reset",ICON_SETTING:"game-play/icons/icon_setting",ICON_SHARE:"game-play/icons/icon_share",ICON_TUBE:"game-play/icons/icon_tube",ICON_ADS:"game-play/icons/icon_ads",ICON_BATTLE:"game-play/icons/icon_battle",ICON_ADS_2:"game-play/icons/icon_ads_2",ICON_RANK:"game-play/icons/icon_rank",ICON_REMOVE:"game-play/icons/icon_remove",HEART_BIG:"game-play/hearts/big-heart",HEART_N:"game-play/hearts/heart-nghieng",HEART_SMALL:"game-play/hearts/small-heart",CONFETTI_PARTICLE_1:"game-play/confetti/confetti-1",CONFETTI_PARTICLE_2:"game-play/confetti/confetti-2",CONFETTI_PARTICLE_3:"game-play/confetti/confetti-3",CONFETTI_PARTICLE_4:"game-play/confetti/confetti-4",CONFETTI_PARTICLE_5:"game-play/confetti/confetti-5",CONFETTI_PARTICLE_6:"game-play/confetti/confetti-6",CONFETTI_PARTICLE_7:"game-play/confetti/confetti-7",RIBBON_PARTICLE_1:"game-play/confetti/ribbon-1",RIBBON_PARTICLE_2:"game-play/confetti/ribbon-2",RIBBON_PARTICLE_3:"game-play/confetti/ribbon-3",RIBBON_PARTICLE_4:"game-play/confetti/ribbon-4",RIBBON_PARTICLE_5:"game-play/confetti/ribbon-5",RIBBON_PARTICLE_6:"game-play/confetti/ribbon-6",NOTE_ITEM:"game-play/notes/note_item"}},BIRD_SPINE:{KEY:"bird-spine",jsonPATH:"./assets/spines/birds/chim.json",atlasPATH:"./assets/spines/birds/chim.atlas"},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};t.default=i},,,,function(e,t,n){"use strict";n.r(t);t.default={ENGLISH:{KEY:"english",TEXTURE:"./assets/fonts/en.png",DATA:"./assets/fonts/en.xml"},PRIMARY:{KEY:"gilroy-extrabold",TEXTURE:"./assets/fonts/en.png",DATA:"./assets/fonts/en.xml",AR_TEXTURE:"./assets/fonts/ar.png",AR_DATA:"./assets/fonts/ar.xml",DE_TEXTURE:"./assets/fonts/de.png",DE_DATA:"./assets/fonts/de.xml",ES_TEXTURE:"./assets/fonts/es.png",ES_DATA:"./assets/fonts/es.xml",FR_TEXTURE:"./assets/fonts/fr.png",FR_DATA:"./assets/fonts/fr.xml",HI_TEXTURE:"./assets/fonts/hi.png",HI_DATA:"./assets/fonts/hi.xml",ID_TEXTURE:"./assets/fonts/id.png",ID_DATA:"./assets/fonts/id.xml",IT_TEXTURE:"./assets/fonts/it.png",IT_DATA:"./assets/fonts/it.xml",JA_TEXTURE:"./assets/fonts/ja.png",JA_DATA:"./assets/fonts/ja.xml",PT_TEXTURE:"./assets/fonts/pt.png",PT_DATA:"./assets/fonts/pt.xml",RU_TEXTURE:"./assets/fonts/ru.png",RU_DATA:"./assets/fonts/ru.xml",ZH_TEXTURE:"./assets/fonts/zh.png",ZH_DATA:"./assets/fonts/zh.xml",TR_TEXTURE:"./assets/fonts/tr.png",TR_DATA:"./assets/fonts/tr.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},,function(e,t,n){"use strict";n.r(t);var a=n(19),i=n(2),r=n(0),s=n(13),o=n(51),c=n(11),u=n(18),l=n(12),h=function(e){function t(t,n,a,r,s,l){var h;return void 0===l&&(l=!1),(h=e.call(this,t)||this).useSound=!0,h.isClicked=!1,h.scaleUp=-1,h.scaleDown=-1,h.button=void 0,h.upAnimation=void 0,h.downAnimation=void 0,h.isUsePixelPerfect=!1,h.hitArea=void 0,h.hitZone=void 0,h.scaleDownPress=void 0,h.parentName=void 0,h.handelObjectDestroy=function(){h.scene&&h.scene.events.off(Phaser.Scenes.Events.SLEEP,h.handleSceneSleep)},h.handleSceneSleep=function(){h.scene&&h.scene.tweens.killTweensOf((0,i.default)(h))},h.handlePointerDown=function(){var e,t;h.isClicked||null!=(e=h.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(h.isClicked=!0,h.runDownAnimation())},h.handleOnClick=function(e){return function(){var t,n,a,i;h.isClicked&&(null!=(t=h.upAnimation)&&null!=(n=t.tween)&&n.isPlaying()||(h.isClicked=!1,h.runUpAnimation(),null==(a=h.upAnimation)||null==(i=a.tween)||i.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){h.logButtonEvent(),h.addDebugData(),h.processCallback(e)}))))}},h.handlePointerOut=function(){var e,t;h.isClicked&&(null!=(e=h.upAnimation)&&null!=(t=e.tween)&&t.isPlaying()||(h.isClicked=!1,h.runUpAnimation()))},h.runDownAnimation=function(){var e;-1===h.scaleDown&&(h.scaleUp=h.scale,h.scaleDown=h.scaleDownPress),h.useSound&&h.scene.audio.playSound(u.default.BUTTON_CLICK),null==(e=h.downAnimation)||e.remove(),h.downAnimation=new o.default({targets:[(0,i.default)(h)],duration:150,props:{scale:h.scaleDown},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.downAnimation.play()},h.runUpAnimation=function(){var e;-1!==h.scaleUp&&(null==(e=h.upAnimation)||e.remove(),h.upAnimation=new o.default({targets:[(0,i.default)(h)],duration:150,props:{scale:h.scaleUp},onUpdate:function(){h.hitZone.scale=1/h.scale}}),h.upAnimation.play())},h.isUsePixelPerfect=l,h.setDepth(c.default.BUTTON),h.createButton(n,a,r,s),h.updateSize(),h.listenEvents(),h.scene.add.existing((0,i.default)(h)),h}(0,r.default)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,a;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(a=this.scene)||a.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},n.createButton=function(e,t,n,a){this.button=this.scene.add.image(0,0,e,t),n&&a&&this.button.setWorldSize(n,a),this.scaleDownPress=this.scale-.1;var i=this.button,r=i.displayWidth,s=i.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,a=t/100*10,i=n/100*10,r=a<10?a:10,s=i<10?i:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,l.addBreadcrumbSentry)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s.AnalyticsEvents.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,a.default)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.default=h},function(e,t,n){"use strict";n.r(t),n.d(t,{ScreenKeys:function(){return i},ScreenDepth:function(){return r},ScreenEvents:function(){return s}});var a=n(48),i={CONFIRM_SCREEN:"CONFIRM_SCREEN",LIVES_SCREEN:"OUT_OF_LIVES_SCREEN",PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",LEVEL_COMPLETE_SCREEN:"LEVEL_COMPLETE_SCREEN",LEVEL_FAILED_SCREEN:"LEVEL_FAILED_SCREEN",COMPLETE_ALL_LEVELS_SCREEN:"COMPLETE_ALL_LEVELS_SCREEN"},r={SCREEN:200,POPUP:300,PRIORITY:999},s=a.default},function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(5),r=function(){function e(){}return e.addText=function(e,t){if("ar"===e.lang.getCurrentLanguage())return e.make.text((0,a.default)({},t,{style:{fontFamily:i.default.FONT_FAMILY,fontSize:1*(t.size||1)+"px",fontStyle:"bold"}})).setAlign("right").setHighQuality();var n=e.make.bitmapText(t),r=t.maxWidth,s=void 0===r?Phaser.Math.MAX_SAFE_INTEGER:r,o=t.maxHeight,c=void 0===o?Phaser.Math.MAX_SAFE_INTEGER:o,u=t.align,l=void 0===u?"center":u;for("center"===l?n.setCenterAlign():"left"===l?n.setLeftAlign():"right"===l&&n.setRightAlign(),(t.text||"").indexOf(" ")>=0&&n.setMaxWidth(s);n.width>s||n.height>=c;)n.setFontSize(.95*n.fontSize);return n},e}();t.default=r},,function(e,t,n){"use strict";n.r(t);t.default={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,WATER_WAVE:20.5,WATER:21,TUBE:22,TILE:25,TEXT:30,ENCOURAGING:31,TUBE_MOVE:40,BALL_MOVE:47,EFFECT:48,MESSAGE:49,TUTORIAL:49,POPUP:50,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},function(e,t,n){"use strict";n.r(t),n.d(t,{initSentry:function(){return f},addBreadcrumbSentry:function(){return g},setSentryUser:function(){return v},sendExceptionWithScope:function(){return y},sendException:function(){return E}});var a=n(31),i=["player","match"],r="",s=function(e,t){try{if(l(e,t))return null;if(o(),u(t)){var n=c(e,t);if(n)return n}return e}catch(a){return null}},o=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,n=e.match,r=(0,a.default)(e,i);window.Sentry.setExtra("player",t),window.Sentry.setExtra("match",n),window.Sentry.setExtra("other",r)}catch(s){}},c=function(e,t){var n;if(!t)return null;var a=Phaser.Utils.Objects.DeepCopy(e),i=((null==(n=a.exception)?void 0:n.values)||[])[0];if(!i)return null;var r=t.originalException.code;return r?(i.type=r,a):null},u=function(e){if(!e)return!1;if(!e.originalException)return!1;return"Non-Error promise rejection captured with keys: code, message"===e.originalException.message},l=function(e,t){if(!t)return!1;var n=!1,a=t.originalException;return a instanceof Object&&(n=h(a)||d(a)),n},h=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=GameCore.Configs.Sentry.errorCodes,a=n.accepted,i=n.ignored;if("string"===typeof t){if(a.indexOf(t)>=0)return!1;if(i.indexOf(t)>=0)return!0}}return!1},d=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=GameCore.Configs.Sentry.errorMessages,a=n.accepted,i=n.ignored;if("string"===typeof t){if(a.indexOf(t)>=0)return!1;if(i.indexOf(t)>=0)return!0}}return!1},f=function(){var e=setInterval((function(){if(window.Sentry){clearInterval(e);var t={debug:!0,dsn:r,environment:"production",release:"124",sampleRate:1,beforeSend:s,ignoreErrors:p(),beforeBreadcrumb:function(e){return"ui.click"===e.category?null:e}};window.Sentry.init(t)}}),100)},p=function(){return[]},g=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},v=function(e){window.Sentry&&window.Sentry.setUser(e)},m=function(e){window.Sentry&&window.Sentry.captureException(e)},y=function(e,t){e&&window.Sentry.withScope((function(n){n.setExtras(t),m(e)}))},E=function(e){e&&m(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,{AnalyticsEvents:function(){return a}});var a={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",GET_SOLUTION:"get_solution",GET_SOLUTION_TIME_OUT:"get_solution_time_out"}},function(e,t,n){"use strict";n.r(t),n.d(t,{SceneKeys:function(){return i},SceneEvents:function(){return r},SceneDepth:function(){return a}});var a,i={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",PAUSE_SCENE:"PAUSE_SCENE",LEVEL_SCENE:"LEVEL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:Symbol("SWITCH")};!function(e){e[e.SCENE=0]="SCENE",e[e.POPUP=1]="POPUP"}(a||(a={}))},function(e,t,n){"use strict";n.r(t);var a=n(21),i=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,a.merge)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.default=i},,,function(e,t,n){"use strict";n.r(t);t.default={HIGHLIGHT:"highlight",UN_HIGHLIGHT:"un_highlight",BUTTON_CLICK:"button_click",CONFETTI:"confetti",YOU_LOSE:"lose",YOU_WIN:"win",BOARD_START:"board_start",SCORE_HIGHTEST:"score_highest",POURING:"pouring"}},,function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(0),i=n(13),r=function(e){function t(t,n,a){var i;return(i=e.call(this,t,0,0,n,a)||this).setOrigin(0,0),i}return(0,a.default)(t,e),t}(Phaser.GameObjects.Zone),s=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,a.default)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),a=n.width,i=n.height;e.setZoom(t),e.centerOn(a/2,i/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/1},n.createBackground=function(e,t,n,a){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var i=this.gameZone,r=i.displayWidth,s=i.displayHeight;this.background.setDisplaySize(r,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(a)&&this.background.setTint(a),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,a=e.callback,i=t.storage.watch(n,a);t.unsubscribeList.push(i)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(i.AnalyticsEvents.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},,function(e,t,n){"use strict";n.r(t);var a={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+(0,n(46).getImageScale)()+"x/bg.jpg",CONFIG:{}}};t.default=a},function(e,t,n){"use strict";n.r(t),n.d(t,{sleepAsync:function(){return a},checkIsToday:function(){return i},formatDateHMS:function(){return r},getDateDMY:function(){return s}});var a=function(e){return new Promise((function(t){return setTimeout(t,e)}))},i=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},r=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?n.slice(11,-5):n.slice(14,-5)},s=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=""+t,i=""+n;return t<10&&(a="0"+t),n<10&&(i="0"+n),a+"/"+i+"/"+e.getFullYear()}},,function(e,t,n){"use strict";n.r(t),n.d(t,{CONTEXT_RECEIVED:function(){return a},CONTEXT_PROCESSED:function(){return i},CONTEXT_GAME_MODE_DETECTED:function(){return r},MESSAGES_SENT_UPDATE:function(){return s},MESSAGES_SENT_REMOVE:function(){return o},SCENE_KEY_UPDATE:function(){return c}});var a="CONTEXT_RECEIVED",i="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},,function(e,t,n){"use strict";n.r(t);var a=n(22),i=function(){function e(e,t,n,i){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||a.default.AVATAR.FILE,this.locale=i||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.default=i},function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(2),i=n(0),r=n(1),s=n(15),o={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},c=function(e){function t(t){return e.call(this,o,t)||this}return(0,i.default)(t,e),t}(s.default),u=r.default.DEFAULT,l=u.KEY,h=u.FRAME,d=function(e){function t(t){var n;return(n=e.call(this,t,0,0,l,h.ICON_LOADING)||this).anim=void 0,n.setWorldSize(42.5,42.5),n.runAnimation(),n.scene.add.existing((0,a.default)(n)),n}(0,i.default)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new c({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image)},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(15),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.default)(t,e),t}(i.default);t.default=s},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(39),i=n.n(a)()(.48,1.57,.6,.83);t.default=i},,function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(0),r=n(1).default.DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,a.default)(n)),n}(0,i.default)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.BLANK,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(e,t,n,a,i){this.stop(),this.reset(),this.emitZone.setSize(a,i),this.emitZone.setPosition(t-a/2,n-i/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.default=c},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(15),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.default)(t,e),t}(i.default);t.default=s},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(5),r=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n.key,n.button,a,i)||this).payload=void 0,r.payload=n,r.createIcon(),r.createText(),r}(0,a.default)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.add.image(0,0,this.payload.key,this.payload.icon);e.setWorldSize(43,43),this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-25)},n.createText=function(){var e=this.payload.text,t=this.scene.make.bitmapText({font:i.default.PRIMARY.KEY,size:this.scene.fontSize(24),text:e,origin:{x:.2,y:.5}});this.add(t)},t}(n(7).default);t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(19),i=n(0),r=n(41),s=n(29),o=n(1),c=n(14),u=n(8),l=n(54),h=(0,n(17).createSelector)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),d=n(12),f=n(20),p=n(2),g=n(5),v=n(11),m=o.default.DEFAULT,y=m.KEY,E=m.FRAME,S=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t),n.lastUpdate=e},n.createFps(),n.setDepth(v.default.DEBUG),n.scene.add.existing((0,p.default)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,i.default)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:y,frame:E.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:g.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),A=S,b=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,a=1048576*n.maxMemoryLimit,i=Math.round(t/1048576);n.setMemory(i),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*a&&n.memoryText.setTint(n.warningColor),t>a&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(v.default.DEBUG),n.scene.add.existing((0,p.default)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,p.default)(n);var a=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(a/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,i.default)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:g.default.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),T=b,w=n(52),C=n(9),I=n(28),x=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(u.ScreenDepth.PRIORITY),r.background.setAlpha(.8),r}(0,i.default)(t,e);var n=t.prototype;return n.open=function(t){var n,a=this;e.prototype.open.call(this,t);var i=this.getData(["message","duration","loading"]),r=i[0],s=void 0===r?"":r,o=i[1],c=void 0===o?0:o,u=i[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){a.visible&&a.scene.screen.close(a.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new I.default(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=C.default.addText(this.scene,{size:this.scene.fontSize(30),font:g.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e);var t=this.scene.game.world.getWorldSize();this.messageText.width>.75*t.width&&this.messageText.setScale(.75*t.width/this.messageText.width)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.loadingIcon.setWorldSize(113,113);var n=this.scene.game.world.getWorldSize();this.messageText.setScale(1),this.messageText.width>.75*n.width&&this.messageText.setScale(.75*n.width/this.messageText.width);var a=[this.messageText,this.loadingIcon],i=a.map((function(e){return.3*e.scale})),r=a.map((function(e){return e.scale}));this.openAnimation=new w.default({targets:a,props:{scale:{getStart:function(e,t,n,a){return i[a]},getEnd:function(e,t,n,a){return r[a]}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},n.close=function(){e.prototype.close.call(this),this.showLoading(!1)},t}(GameCore.Screen),_=x,P=o.default.DEFAULT,k=P.KEY,L=P.FRAME,R=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).mask=void 0,t.fadeInAnim=void 0,t.fadeOutAnim=void 0,t.fpsMeter=void 0,t.memoryMeter=void 0,t.switchScene=function(e){t.currentScene.switch(e)},t.emitGameEventStartScene=function(e){var n=e.scene.key;t.updateSceneState(),t.runMaskFadeOutAnimation(),t.updateActiveSceneKey(n),t.game.events.emit(Phaser.Scenes.Events.START,n),(0,d.addBreadcrumbSentry)("scene","Start scene: "+n)},t.emitGameEventSleepScene=function(e){var n=e.scene.scene.key;n!==c.SceneKeys.LOAD_SCENE&&(t.runMaskFadeInAnimation(),t.game.events.emit(Phaser.Scenes.Events.SLEEP,n))},t.emitGameEventWakeScene=function(e){var n=e.scene.scene.key;n!==c.SceneKeys.LOAD_SCENE&&(t.updateSceneState(),t.runMaskFadeOutAnimation(),t.updateActiveSceneKey(n),t.game.events.emit(Phaser.Scenes.Events.WAKE,n))},t.emitGameEventPauseScene=function(e){var n=e.scene.scene.key;t.game.events.emit(Phaser.Scenes.Events.PAUSE,n)},t.emitGameEventResumeScene=function(e){var n=e.scene.key;t.game.events.emit(Phaser.Scenes.Events.RESUME,n)},t.emitGameEventShutdownScene=function(e){var n=e.scene.scene.key;t.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,n)},t}(0,i.default)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(u.ScreenKeys.NOTIFY_SCREEN,_);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:k,frame:L.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new A(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new T(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new r.default({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new s.default({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(c.SceneEvents.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==c.SceneKeys.GLOBAL_SCENE&&this.storage.dispatch((0,l.updateActiveSceneKey)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,a.default)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=h(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(f.default),O=R},,function(e,t,n){"use strict";n.r(t),n.d(t,{FacebookTournament:function(){return l}});var a=n(4),i=n(3),r=n.n(i),s=n(13),o=n(27),c=n(23),u=GameCore.Configs.AppId,l=function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,a.default)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),h=function(){function e(e){var t=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.requestTournamentAsync=function(){var e=(0,a.default)(r().mark((function e(n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),a=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:a+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.facebook=e}var t=e.prototype;return t.switchAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,a.default)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,a.default)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,a.default)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,a=[],n.forEach((function(e){var n=e.getID();if(n!==t){var i=e.getName();if(i){var r=e.getPhoto();a.push(new o.default(n,i,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(a));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,a.default)(r().mark((function e(t){var n,a,i,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a=t.image,i=t.template,s=t.cta,o=t.text,c={data:n,image:a,action:"CUSTOM",template:i,cta:s,text:o,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,a.default)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.attemptToAddShortcut=function(){var e=(0,a.default)(r().mark((function e(){var t,n,a,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,"ANDROID"!==FBInstant.getPlatform()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,FBInstant.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(t=e.t0,!(n=t.lastCallCreateShortcut||Date.now())||!(0,c.checkIsToday)(+n)){e.next=15;break}return e.abrupt("return",!1);case 15:if(a=Date.now(),FBInstant.player.setDataAsync({lastCallCreateShortcut:a}),FBInstant.getSupportedAPIs().includes("canCreateShortcutAsync")){e.next=20;break}return e.abrupt("return",!1);case 20:return e.next=22,GameSDK.canCreateShortcutAsync();case 22:if(!e.sent){e.next=40;break}return i=s.AnalyticsEvents.SHORTCUT_CREATE,o=s.AnalyticsEvents.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=27,e.next=30,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 30:return e.next=32,GameSDK.createShortcutAsync();case 32:return window.game.analytics.event(i,{success:!0}),e.abrupt("return",!0);case 36:return e.prev=36,e.t1=e.catch(27),window.game.analytics.event(i,{success:!1}),e.abrupt("return",!1);case 40:return e.abrupt("return",!1);case 43:return e.prev=43,e.t2=e.catch(2),e.abrupt("return",!1);case 46:case"end":return e.stop()}}),e,this,[[2,43],[27,36]])})));return function(){return e.apply(this,arguments)}}(),t.attemptToSubscribeBot=function(){var e=(0,a.default)(r().mark((function e(){var t,n,a,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,GameSDK.getSupportedAPIs().includes("player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=34;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(t=e.sent,!(n=t.lastCallSubscribeBot)||!(0,c.checkIsToday)(+n)){e.next=16;break}return e.abrupt("return",!1);case 16:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),i=s.AnalyticsEvents.BOT_SUBSCRIBE,o=s.AnalyticsEvents.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(o),e.prev=21,e.next=24,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 24:return e.next=26,GameSDK.player.subscribeBotAsync();case 26:return window.game.analytics.event(i,{success:!0}),e.abrupt("return",!0);case 30:return e.prev=30,e.t0=e.catch(21),window.game.analytics.event(i,{success:!1}),e.abrupt("return",!1);case 34:return e.abrupt("return",!1);case 37:return e.prev=37,e.t1=e.catch(2),e.abrupt("return",!1);case 40:case"end":return e.stop()}}),e,this,[[2,37],[21,30]])})));return function(){return e.apply(this,arguments)}}(),t.matchPlayerAsync=function(){var e=(0,a.default)(r().mark((function e(t,n,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,GameSDK.getSupportedAPIs().includes("checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,n,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,a){return e.apply(this,arguments)}}(),t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,a.default)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=8;break}return e.next=4,n.e(357).then(n.bind(n,77));case 4:t=e.sent.default,this.facebook.tournament=new t,e.next=9;break;case 8:this.facebook.tournament=new l;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,a.default)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,a.default)(r().mark((function e(t){var n,a,i,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.href,a=t.ref,i=t.message,s=t.delayTime,e.next=5,GameSDK.graphApi.requestAsync("/me/notifications","POST",{ref:a,href:n||"https://fb.gg/play/"+u,template:i,scheduleInterval:s});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}();t.default=h},function(e,t,n){"use strict";n.r(t),n.d(t,{getImageScale:function(){return a}});var a=function(){return GameCore.Configs.Game.ForcePixelRatio?GameCore.Configs.Game.ForcePixelRatio:GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}},function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(31),i=n(0),r=n(36),s=n.n(r),o=["player","match"],c="null",u=GameCore.Configs.Rollbar,l=u.UseMockup,h=u.FilterError,d=u.ListPlayerDevIds,f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).enable=void 0,t.rollbar=void 0,t.events=[],t.beforeSend=function(e,n,a){l&&t.showPopupError(a)},t.checkIgnore=function(e,n,a){try{return!!t.isErrorIgnore(n)}catch(i){return!1}},t.showPopupError=function(e){var n,a,i,r,s,o=null==e||null==(n=e.body)||null==(a=n.trace)?void 0:a.exception;o&&t.events.push(o);var c=(null==e||null==(i=e.body)||null==(r=i.trace)?void 0:r.frames)||[];(s=t.events).push.apply(s,c);var u=document.getElementById("popup-error");u||((u=document.createElement("div")).id="popup-error",document.body.appendChild(u)),u.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+JSON.stringify(t.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',u.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var l=document.getElementById("close");l&&(l.onclick=t.closePopup)},t.closePopup=function(){t.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},t.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},t.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var n=!1,a=e[0];return a instanceof Object&&(n=t.isIgnoreByCode(a)||t.isIgnoreByMessage(a)),n},t.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=h.Codes,a=n.accepted,i=n.ignored;if("string"===typeof t){if(a.indexOf(t)>=0)return!1;if(i.indexOf(t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var r=e.name,s=h.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(o.indexOf(r)>=0)return!1;if(c.indexOf(r)>=0)return!0}}return!1},t.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=h.Messages,a=n.accepted,i=n.ignored;if("string"===typeof t){if(a.indexOf(t)>=0)return!1;if(i.indexOf(t)>=0)return!0}}return!1},t.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},n=e.player,i=e.match,r=(0,a.default)(e,o);t.rollbar.configure({payload:{player:n,match:i,other:r}})}catch(s){}},t}(0,i.default)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(s())({accessToken:c,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"124"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){var e=this.game.facebook.getPlayerID();d.includes(e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),p=f},function(e,t,n){"use strict";n.r(t);t.default={OPEN:"open",CLOSE:"close",CREATED:"created",RUN_CLOSE_ANIMATION:"runCloseAnimation"}},,,function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(15),r={targets:[],duration:400,ease:n(38).default,props:{scale:"-=0.1"}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.default)(t,e),t}(i.default);t.default=s},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(15),r={targets:[],duration:300,ease:n(38).default,props:{scale:{from:1.2,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,a.default)(t,e),t}(i.default);t.default=s},function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(0),r=n(1).default.DEFAULT,s=r.KEY,o=r.FRAME,c=function(e){function t(t){var n;return(n=e.call(this,t,s,o.BLANK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,a.default)(n)),n}(0,i.default)(t,e);var n=t.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.BLANK,speed:{min:10,max:1200},scale:{start:1.33*e,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(e,t,n,a){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=a,this.deathZone.setPosition(t,n),this.emitter.explode(e,t,n)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.default=c},function(e,t,n){"use strict";n.r(t),n.d(t,{updateActiveSceneKey:function(){return i}});var a=n(25),i=function(e){return{type:a.SCENE_KEY_UPDATE,payload:{sceneKey:e}}}},function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(19),r=n(2),s=n(0),o=n(11),c=n(35);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=function(e){function t(t,n){var i;(i=e.call(this,t)||this).config=void 0,i.isEnable=void 0,i.maxHeight=void 0,i.isScrolling=void 0,i.boundTop=void 0,i.boundBottom=void 0,i.maskGraphics=void 0,i.objects=void 0,i._value=0,i.velocity=0,i.isScrollingSmooth=void 0,i.lastScrollY=void 0,i.isScrollingBack=void 0,i.scrollingBackTo=void 0,i.lastScrollYCount=0,i.hitArea=void 0,i.onScrollEvents=[],i.update=function(e,t){i.isScrollingSmooth&&i.velocity&&i.scrollingSmooth(t),i.isScrollingBack&&i.scrollingBack(t)},i.checkReachBound=function(){return i.isReachTop()||i.isReachBottom()},i.onMouseScroll=(0,c.debounce)((function(e,t,n){if(i.isEnable){if(i.isScrolling=!0,i.checkReachBound())return i.lastScrollY=i.lastScrollY.map((function(){return 0})),void(i.isScrolling=!1);i.stopScrollingBack(),i.startScrollSmooth(-n*i.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),i.onTouchScroll=function(e){if(i.isEnable){i.velocity&&i.stopScrollSmooth(),i.stopScrollingBack(),i.isScrolling=!0;var t=i.scene.game.world.getZoomRatio(),n=e.position,a=e.prevPosition,r=(n.y-a.y)/t,s=i.height*i.maxScrollOver,o=1;if(i.lastScrollY[++i.lastScrollYCount%i.lastScrollY.length]=r,i.isReachTop()&&r>=0){var c=(s-(i.value-i.marginTop))/s;o=Math.min(o,c)}if(i.isReachBottom()&&r<=0){var u=(s-(-i.maxHeight-i.value))/s;o=Math.min(o,u)}var l=r*o,h=i.maxScrollOver*i.height;i.value+l>i.marginTop+h?i.value=i.marginTop+h:i.value+l<-i.maxHeight-h?i.value=-i.maxHeight-h:i.value+=l,i.callOnScrollEvents(i.value,l)}},i.onTouchDown=function(){i.isEnable&&(i.velocity&&i.stopScrollSmooth(),i.stopScrollingBack())},i.onTouchEnd=function(){if(i.isReachTop()&&(i.startScrollingBack(i.marginTop),i.stopScrollSmooth()),i.isReachBottom()&&(i.startScrollingBack(-i.maxHeight),i.stopScrollSmooth()),i.isScrolling){var e=i.lastScrollY.reduce((function(e,t){return e+t}))/i.lastScrollY.length;i.startScrollSmooth(e*i.scrollSmooth),i.lastScrollY=i.lastScrollY.map((function(){return 0}))}},i.config=(0,a.default)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var s=n.width,o=n.height;return i.isEnable=!1,i.maxHeight=0,i.lastScrollY=new Array(3).fill(0),i.setSize(s,o),i.createGroup(),i.createInput(),i.createEvents(),i.scene.add.existing((0,r.default)(i)),i}(0,s.default)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=e.map((function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){return this.objects.getChildren().filter((function(e){return e.active}))},n.createBound=function(e,t,n,a){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(a),this.boundBottom.setTint(a),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(o.default.PRIORITY),this.boundBottom.setDepth(o.default.PRIORITY);var i=this.width,r=n,s=this.getWorldPosition(),c=s.x,u=s.y;this.boundTop.setDisplaySize(i,r),this.boundBottom.setDisplaySize(i,r),this.boundTop.setY(-this.displayHeight/2+r/2+u-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+u-this.y+1),this.boundTop.setX(c-this.x),this.boundBottom.setX(c-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,a=u(this.onScrollEvents);!(n=a()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,i.default)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.default=h},function(e,t,n){"use strict";n.r(t);var a=n(4),i=n(0),r=n(3),s=n.n(r),o=n(43),c=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).instance=void 0,a.placementId=void 0,a.instance=null,a.placementId=n,a}(0,i.default)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,a.default)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,a.default)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.INTERSTITIAL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=21;break;case 15:throw e.prev=15,e.t0=e.catch(0),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),n=this.getSceneName(),self.game.analytics.showAdFail(this.type,n,e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,a.default)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.REWARDED?4:e.t0===GameCore.Ads.Types.INTERSTITIAL?7:10;break;case 4:return e.next=6,n.getRewardedVideoAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.getInterstitialAdAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.default?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.default=c},,,,,,,,,function(e,t,n){"use strict";n.r(t);n(33);var a=function(e,t){return void 0===t&&(t=1),Array.from({length:Math.ceil(e.length/t)},(function(n,a){return e.slice(a*t,a*t+t)}))},i=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}},r=function(e,t,n){return n.indexOf(e)===t&&null!==e&&void 0!==e},s=function(e){return e.filter(r)},o={chunk:a,difference:function(e,t){return e.filter((function(e){return!t.includes(e)}))},shuffle:i,unique:s},c=n(30),u=n.n(c),l=u()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),h=u()((function(e){for(var t=null,n=[],a=/:([A-Z0-9?]+)/gm;null!==(t=a.exec(e));)n.push(t[1]);return n})),d=u()((function(e){for(var t=null,n=[],a=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=a.exec(e));){var i=t[0];if(i.length>=2){var r=i.length,s=i.slice(0,r-1),o=i[r-1],c=new Array(+s).fill(o);n.push.apply(n,c)}else n.push(i)}return n})),f=function(e,t){var n=e,a=GameCore.Utils.Object.invert(t),i={},r=0,s=0;return h(n).forEach((function(e){r=0,s++,i[s]||(i[s]={}),d(e).forEach((function(e){r++,i[s][r]=l(e,a)}))})),i},p=u()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),g=function e(t,n,a){void 0===a&&(a=!1);var i="";if(!GameCore.Utils.Valid.isObject(t))return i;var r="",s=1;for(var o in t)if(GameCore.Utils.Object.hasOwn(t,o)){var c=t[o];if(GameCore.Utils.Valid.isObject(c))i+=":"+e(c,n,!0);else if(GameCore.Utils.Valid.isString(c)){var u=p(c,n);u===r?(s++,i=i.slice(0,-2)):s=1,i+=""+s+u,r=u}}return i=i.replace(/1([A-Z])/g,"$1")},v=function(e){try{return atob(e)}catch(t){return""}},m=function(e){try{return JSON.parse(e)}catch(t){return null}},y=function(e){try{return JSON.stringify(e,null,0)}catch(t){return""}},E=function(e){return m(y(e))},S=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},A=function(e){return void 0===e||null===e},b=function e(t){if(!S(t))return t;for(var n in t){A(t[n])&&delete t[n];var a=t[n];S(a)&&(t[n]=e(a))}return t},T=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},w=function(e){var t={};return Object.keys(e).forEach((function(n){if(T(e,n)){var a=e[n];"string"===typeof a&&(t[a]=n)}})),t},C=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(T(e,t)){var a=e[t];"string"===typeof a&&(n[a]=e)}})),n},I=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},x=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",a="",i=e;void 0!=t&&(i-=t.length,a+=t);for(var r=0;r<i;r++){var s=Math.floor(Math.random()*n.length);a+=n.charAt(s)}return a},_=function(e){var t=e.scene,n=e.key,a=e.newKey,i=t.textures.get(n).getSourceImage();if(!i)return!1;var r=Math.min(i.width,i.height);a||t.textures.removeKey(n);var s=t.textures.createCanvas(a||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((i.width-r)/2,(i.height-r)/2,i),!0},P=function(e){var t=e.scene,n=e.key,a=e.newKey,i=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),a||t.textures.removeKey(n);var c=t.textures.createCanvas(a||n,r,s),u=c.context,l=Math.min(r,s)/100*i/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+r-l,0),u.quadraticCurveTo(0+r,0,0+r,0+l),u.lineTo(0+r,0+s-l),u.quadraticCurveTo(0+r,0+s,0+r-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},k=function(e){if(e.indexOf(".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},L=function(e,t){var n=t||{},a=n.fractionalDigits,i=void 0===a?0:a,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,f=n.suffixes,p=void 0===f?["","k","m","b","t","q"]:f,g=-1===l?99999999:l;if(e>=s){var v=Math.floor(e/Math.pow(10,c)),m=Math.floor((v.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),m)).toFixed(i),E=g-p[m].length,S=y.substring(0,E);return(d?k(S):S)+p[m]}var A=e.toFixed(i),b=g-p[0].length,T=A.substring(0,b);return d?k(T):T+p[0]},R={Array:o,Hash:{decodeMap:f,encodeMap:g,hashToString:v,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},Json:{clone:E,decode:m,encode:y},Object:{clear:b,hasOwn:T,invert:w,keyBy:C},String:{capitalize:function(e){return e?e[0].toUpperCase()+e.slice(1):e},hashCode:I,params:function(e){return Object.keys(e).reduce((function(t,n){var a=e[n];return void 0!==a&&t.push(n+"="+a),t}),[]).join("&")},toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},random:x,removeDiacritics:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},getShortName:function(e,t){var n=e.split(" "),a=(n.length<=1?[].concat(n):[n[0],n.pop()]).join(" "),i=a.lastIndexOf(" ")||0,r=i>=0?i:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+" ".repeat(e).replace(/./g,(function(){return t(Math.random()*e)}))}},Valid:{isBoolean:function(e){return"boolean"===typeof e},isDebugger:function(){return false},isFunction:function(e){return"function"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:S,isPropertyKey:function(e){return["string","number","symbol"].indexOf(typeof e)>-1},isString:function(e){return"string"===typeof e},isValueChangeAsync:function(e,t,n){var a=n||{},i=a.timeout,r=void 0===i?1e3:i,s=a.checkInterval,o=void 0===s?100:s;return new Promise((function(n){var a=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(a),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(a),n(!1)}),r)}))}},Image:{drawCircle:_,drawBorder:P},Number:{toAbbreviatedString:L,padStart:function(e,t,n){void 0===n&&(n="0");for(var a=e.toString(),i=a.length,r=0;r<t-i;r++)a=n+a;return a},padEnd:function(e,t,n){void 0===n&&(n="0");for(var a=e.toString(),i=a.length,r=0;r<t-i;r++)a+=n;return a}},Device:{isDesktop:function(){var e=navigator.userAgent;return/Windows|Mac OS/i.test(e)&&!/like Mac OS/.test(e)},isMobile:function(){var e=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(e)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}}},O=n(6),D=n(21),M={AppId:"3832811343493527",PlayerDataStoreUsingApi:!1,Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{ShowFPSInGame:!1},DailyRewards:{},LeadersBoard:{Name:"GlobalLeaderboard",Prefix:"leaderboards",LeaderboardId:null,Limit:100,UseMock:!1},Ads:{Enabled:!0,Mockup:{Enable:!1},InterstitialAdOptions:{secondsFirstTime:5,secondsBetweenAds:5,showWhenStartGame:!0},BannerAdOptions:[]},Lives:{enable:!1}},B={ENV:"production",LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},N={ENV:"development",AppId:"565800918582750",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",ApiNotificationHost:"https://notifications.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",Level:{url:"./assets/levels-compress/",maxLevel:4e4,alwaysLoadNew:!1,retryCount:3,retryDelay:2e3},Lives:{enable:!0,bonusDurationMins:15,bonusLife:1,livesCapacity:5},PlayerDataStoreUsingApi:!0,PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{UndoCount:5,UndoClaim:5,HintCount:2,HintClaim:2,FastPourTimeScale:3,EnableVibrate:!0,ForceLevel:0,SkipCompleteScreen:!1},Tutorial:{LevelTutorial:[1]},PlayerDataStore:"playerData",Game:{ForcePixelRatio:0},Debugger:{ShowInspector:!0,ShowMonitoring:!0,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyCountItems:{ForceNewDay:!1},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"63491b6b6d65b96f81da9d52",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!0,secondsFirstTime:120,secondsBetweenAds:120},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"",bannerHeight:50,platform:"MOBILE",secondsReload:50},{placementId:"",bannerHeight:50,platform:"DESKTOP",secondsReload:70}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};N=(0,D.merge)((0,O.default)({},N),B);var U=N=(0,D.merge)((0,O.default)({},N),M),G=function(e){return function(t){try{var n=window.game,a=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var i=a.default;n.scene.remove(e),n.scene.add(e,i,!0),n.scene.bringToTop(n.globalScene)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},F=n(35),K=!1,Y=function e(t,n,a){n.forEach((function(n){if(n.name){var i=null;if(i=a?a.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var r=i,s=n.getAll();if(e(t,s,r),!r.hotContainer)return}var o=Reflect.ownKeys(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],u=o.filter((function(e){if("string"!==typeof e)return!1;if(c.indexOf(e)>=0)return!1;if(!i)return!1;var t=Reflect.get(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Reflect.get(i,e))))}));u.length<1||u.forEach((function(e){if(i){var t=Reflect.get(n,e);Reflect.get(i,e),Reflect.set(i,e,t)}}))}}}))},V=function(e,t){return void 0===t&&(t=K),function(n){try{var a=window.game,i=n.module,r=a.scene.getScenes(!0)[0];if(r.scene.key!==e)return;K=t;var s=i.default,o=e+"-draft";a.scene.remove(o);var c=a.scene.add(o,s);r=a.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,F.debounce)((function(){var e=c.children.getAll();Y(r,e),a.scene.remove(o)})),50),a.scene.run(o),a.scene.bringToTop(r),a.scene.bringToTop(a.globalScene)}catch(u){}}},z={Configs:U,Utils:R,LiveUpdate:{Scene:G,SceneObjects:V}};window.GameCore=z;var H,W=z,j=n(12),X=n(31),q=n(4),Z=n(0),Q=n(3),J=n.n(Q),$=n(45),ee=0,te=0,ne=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;te=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(te)),te+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!te||te<30)&&(te=60),ee=te;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(te)),te+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-te,n=Math.round(e*t+te);n>ee&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),ae=ne,ie=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,a=this.y,i=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,a,i,r,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),re=ie,se=GameCore.Configs.Ads.Mockup.GiphyApiKey,oe=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(t=e.sent,!(n=document.getElementById("mock-banner-ads"))){e.next=11;break}if((a=n.getElementsByTagName("img"))&&!(a.length<=0)){e.next=8;break}return e.abrupt("return");case 8:a[0].src=t,e.next=27;break;case 11:(i=document.createElement("div")).id="mock-banner-ads",i.style.width="100%",i.style.height="50px",i.style.bottom="var(--sab)",i.style.position="fixed",i.style.background="#fff url("+t+") center center/auto no-repeat",i.style.outline="2px solid #ffffff40",i.style.outlineOffset="-2px",r=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(r),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",r.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),i.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(i);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+se+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,GameCore.Utils.Valid.isObject(a)){e.next=9;break}return e.abrupt("return","");case 9:return i=a.data,r=Math.floor(Math.random()*i.length),e.abrupt("return",i[r].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),ce={LOADED:"loaded",DISPLAYED:"displayed"};!function(e){e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing"}(H||(H={}));var ue,le=H;!function(e){e.REWARDED="rewarded",e.INTERSTITIAL="interstitial"}(ue||(ue={}));var he=ue,de=n(10),fe=function(e){function t(t,n){var a;return(a=e.call(this,n)||this).code=void 0,a.code=t,a.message=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),pe=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=le.IDLE};GameCore.Ads={Types:he,Status:le,Events:ce,AdError:fe,AdInstance:pe};var ge=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).events=void 0,t.enabled=void 0,t.config=void 0,t.lastInterAdShownTime=void 0,t.lastRewardAdShownTime=void 0,t.interstitial=void 0,t.rewardedVideo=void 0,t.safeAreaBottom=void 0,t.showingBannerAd=void 0,t.reloadBannerAdIntervals=void 0,t.bannerAdConfig=void 0,t.isHaveBannerAdOptions=void 0,t}(0,Z.default)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,a=t.interstitialAdOptions;this.interstitial=new e(he.INTERSTITIAL,n.pID),this.rewardedVideo=new e(he.REWARDED,a.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(he.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new fe("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(he.INTERSTITIAL);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(he.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new fe("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(he.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new fe("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new fe("AD_INSTANCE_NOT_INITIALLED","The instance ads not yet initiated");case 5:return e.next=7,n.loadAsync();case 7:this.events.emit(ce.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new fe("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new fe("AD_INSTANCE_NOT_INITIALLED","The instance ads not yet initiated");case 5:return t===he.INTERSTITIAL&&(this.lastInterAdShownTime=window.performance.now()/1e3),t===he.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(ce.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case he.INTERSTITIAL:return this.interstitial;case he.REWARDED:return this.rewardedVideo;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,a=t.secondsBetweenAds,i=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?i>=a:i>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,a=t.secondsBetweenAds,i=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?i>=a:i>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var a=e[n],i=a.platform;if("ALL"==i||"DESKTOP"==i&&t||"MOBILE"==i&&!t)return this.bannerAdConfig=a,!0}return!1},n.showBannerAdAsync=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,a=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(a>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n),this.reloadBannerAdIntervals[n]=setInterval((function(){i.loadBannerAdAsync(n)}),1e3*a),e.abrupt("return");case 14:return this.loadBannerAdAsync(n),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,q.default)(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,oe.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,q.default)(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,this.enabled){e.next=7;break}return e.abrupt("return");case 7:if(!GameCore.Configs.Ads.Mockup.Enable){e.next=13;break}return e.next=11,oe.hideBannerAdAsync();case 11:e.next=17;break;case 13:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,a=t.reloadBannerAdIntervals[n];a&&(clearInterval(a),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=17,GameSDK.hideBannerAdAsync();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4);case 22:case"end":return e.stop()}}),e,this,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;var e=(this.bannerAdConfig||{}).bannerHeight,t=(void 0===e?0:e)+this.safeAreaBottom;if(this.game.world){var n=this.game.world,a=n.getPixelRatio(),i=n.getZoomRatio();return this.game.world.getPhysicPixels(t,a/i)}return t},t}(Phaser.Plugins.BasePlugin),ve=ge,me=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.setTrafficSource=function(e){this.processTrafficSource(e),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n,a){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n,a){this.processLevelComplete(e,t,n),this.selfLog},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processShowInterstitialAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,n){},e}(),ye=me;GameCore.Analytics={BaseAnalytics:ye};var Ee=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).analytics=void 0,t.pageview=function(e){t.isActive()&&t.analytics.forEach((function(t){t.pageview(e)}))},t}(0,Z.default)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.setTrafficSource=function(e){this.isActive()&&this.analytics.forEach((function(t){t.setTrafficSource(e)}))},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n,a){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n,a)}))},n.levelComplete=function(e,t,n,a){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n,a)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(a){a.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),Se=Ee,Ae=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.audio=this.game.sound.add(this.name)}var t=e.prototype;return t.play=function(e,t){var n,a,i=(0,O.default)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume),(null==(n=this.audio)?void 0:n.seek)>0?this.audio.resume():null==(a=this.audio)||a.play(e,i)},t.pause=function(e){var t;null==(t=this.audio)||t.pause()},t.stop=function(e){var t;null==(t=this.audio)||t.stop()},t.setVolume=function(e){this.volume=e},e}(),be=Ae,Te=function(){function e(e,t){var n=this;this.keys=void 0,this.game=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.mute=function(){for(var e=0,t=Object.keys(n.markers);e<t.length;e++){var a=t[e];n.markers[a].setMute(!0)}},this.unmute=function(){for(var e=0,t=Object.keys(n.markers);e<t.length;e++){var a=t[e];n.markers[a].setMute(!1)}},this.stopAllSound=function(){for(var e in n.markers){var t;null==(t=n.markers[e])||t.stop()}},this.keys=t,this.game=e,this.markers={}}var t=e.prototype;return t.play=function(e,t){var n,a=(0,O.default)({volume:this.volume},t||{});a.volume!==this.volume&&(a.volume*=this.volume),this.createMaker(e),null==(n=this.markers[e])||n.play(a)},t.pause=function(e){var t;null==(t=this.markers[e])||t.pause()},t.stop=function(e){var t;null==(t=this.markers[e])||t.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.add(e)}catch(t){}},e}(),we=Te,Ce=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).soundManager=void 0,t.musicManager=void 0,t.isMuteAll=void 0,t.initMusic=function(e){t.musicManager=new be(t.game,e),t.setMusicVolume(1)},t.initSound=function(e){t.soundManager=new we(t.game,e),t.setSoundVolume(1)},t}(0,Z.default)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.initSound([])},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll)return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll)return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,O.default)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.setMusicVolume(0),this.setSoundVolume(0),this.soundManager.mute(),this.game.sound.mute=!0},n.unmuteAll=function(e){void 0===e&&(e=1),this.isMuteAll=!1,this.setMusicVolume(e),this.setSoundVolume(e),this.soundManager.unmute(),this.game.sound.mute=!1},n.stopAllSound=function(){this.soundManager.stopAllSound()},t}(Phaser.Plugins.BasePlugin),Ie=Ce,xe=n(19),_e="AUTH_TOKEN_REQUEST",Pe="AUTH_TOKEN_RECEIVED",ke=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.name="RequestTokenFail",a.message=t||"Request token fail",a.payload=n||{},a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Le=n(17),Re=(0,Le.createSelector)([function(e){return e.auth.token}],(function(e){return e})),Oe=(0,Le.createSelector)([function(e){return e.auth.isRequesting}],(function(e){return e})),De=function(e){return{type:Pe,payload:{token:e}}},Me=function(e){function t(){return e.apply(this,arguments)||this}(0,Z.default)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,i=n(),r=Re(i),!Oe(i)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:_e,payload:{}}),e.next=10,a.getPlayerToken();case 10:s=e.sent,t(De(s)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(De("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,j.sendException)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,j.sendException)(new ke);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return Re(this.state)},(0,xe.default)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),Be=Me,Ne=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},Ue=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).width=void 0,t.height=void 0,t.renderOptions=void 0,t.canvas=void 0,t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=Object.keys(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,a=t.height,i=t.renderOptions,this.width=n,this.height=a,this.renderOptions=i,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new Promise((function(t,n){for(var a in e.renderOptions){var i=e.renderOptions[a],r=i.name,s=i.image;if(s)e.scene.textures.get(r).key!==r&&e.scene.load.image(r,s)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,a=e.y,i=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=i+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,a)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,a=e.y,i=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(i),l=u.getSourceImage(r);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,a,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ne(e),e},t}(Phaser.Plugins.ScenePlugin),Ge=Ue,Fe=function(e){function t(t,n,a){var i;return(i=e.call(this)||this).game=void 0,i.options=void 0,i.performance=void 0,i.isRunning=!1,i.checkTimer=void 0,i.fpsHistory=void 0,i.start=function(){if(!i.isRunning){i.isRunning=!0;var e=i.options.checkInterval;i.checkTimer=e,i.fpsHistory=[],i.game.events.on(Phaser.Core.Events.POST_STEP,i.onPostStep)}},i.stop=function(){i.isRunning&&(i.isRunning=!1,i.game.events.off(Phaser.Core.Events.POST_STEP,i.onPostStep),i.options.onlyUpdateWhenSwitchScene&&i.checkFps())},i.onPostStep=function(e,t){if(i.checkTimer-=t,!(i.checkTimer>0)){var n=i.options,a=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;i.checkTimer+=a,i.fpsHistory.push(i.game.loop.actualFps),!1===r&&i.fpsHistory.length>=5&&i.checkFps()}},i.game=t,i.options=a,i.performance=n,i}(0,Z.default)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Ke=Fe,Ye=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Ve=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).fpsTracker=void 0,t.pixelRatio=void 0,t.minQuality=void 0,t.maxQuality=void 0,t.qualityAdjustStep=void 0,t.trackingSceneKeys=[],t.trackingScene=function(e){if(t.trackingSceneKeys.includes(e)){var n=t.game.scene.getScene(e);n.events.once(Phaser.Scenes.Events.UPDATE,t.fpsTracker.start),n.events.once(Phaser.Scenes.Events.SLEEP,t.fpsTracker.stop)}},t}(0,Z.default)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,a=e.maxQuality,i=e.qualityAdjustStep,r=e.trackingSceneKeys,s=(0,X.default)(e,Ye);this.pixelRatio=t,this.minQuality=n,this.maxQuality=a,this.qualityAdjustStep=i,this.trackingSceneKeys=r,this.fpsTracker=new Ke(this.game,this,s)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),ze=Ve,He={sound:!0,music:!0,vibrate:!0,fastPour:!1,language:"en",theme:GameCore.Configs.DefaultTheme},We=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},je=function(e,t){try{var n=We(e),a={};GameCore.Utils.Valid.isObject(n)&&(a=n);var i=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(i))return!1;var r=GameCore.Utils.Object.clear(i),s=(0,D.merge)(a,r),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(e,o),!0}catch(c){return!1}},Xe=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="BadRequest",a.message=t||"This request is bad",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),qe=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="RequestTimeout",a.message=t||"This request is timeout",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Ze=n(23),Qe=GameCore.Configs,Je=Qe.AppId,$e=Qe.Network,et=function(e){if(!e.ok)throw new Xe(null,{response:e})},tt=function(){var e=window.game.auth.getToken();return{token:e,timeout:$e.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},nt=function(e,t,n,a){return(0,q.default)(J().mark((function i(){var r,s,o,c,u;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,r=e+"/apps/"+Je+"/"+t,s=new AbortController,n.signal=s.signal,o=setTimeout((function(){s.abort()}),n.timeout),GameCore.Utils.Valid.isObject(a)&&(n.body=JSON.stringify(a)),i.next=8,fetch(r,n);case 8:return c=i.sent,clearTimeout(o),et(c),i.next=13,c.json();case 13:if(i.t0=i.sent,i.t0){i.next=16;break}i.t0={};case 16:return u=i.t0,i.abrupt("return",u);case 20:if(i.prev=20,i.t1=i.catch(0),!(i.t1 instanceof Xe)){i.next=24;break}return i.abrupt("return",null);case 24:if(!(i.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(i.t1,"name"))){i.next=27;break}if("AbortError"!==i.t1.name){i.next=27;break}throw new qe(null);case 27:throw i.t1;case 28:case"end":return i.stop()}}),i,null,[[0,20]])})))},at=function(){var e=(0,q.default)(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof qe&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,Ze.sleepAsync)(600);case 10:return e.next=12,at(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof qe)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),it=function(){var e=(0,q.default)(J().mark((function e(t,n,a,i){var r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===i&&(i=$e.Retries),e.prev=2,r=(0,O.default)({},tt(),n,{method:"GET"}),s=nt(a,t,r),e.next=7,at(s,i);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),rt=function(){var e=(0,q.default)(J().mark((function e(t,n,a,i,r){var s,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===r&&(r=$e.Retries),e.prev=2,s=(0,O.default)({},tt(),a,{method:"POST"}),o=nt(i,t,s,n),e.next=7,at(o,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a,i,r){return e.apply(this,arguments)}}(),st={score:0,level:1,settings:(0,O.default)({},He),userGuideDisplays:0,customFields:{diamond:300,lastReceiveGift:0,lives:{lives:GameCore.Configs.Lives.livesCapacity,lastBonusLifeTime:Date.now()}}},ot=GameCore.Configs,ct=ot.ApiHost,ut=ot.PlayerDataStoreUsingApi,lt=function(){var e=(0,q.default)(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ut){e.next=2;break}return e.abrupt("return",ht(t));case 2:return e.abrupt("return",dt(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,it("players?"+n,{},ct);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.setDataAsync(t);case 2:return n=Object.keys(st).concat(Object.keys(t)),a=n.filter((function(e,t){return n.indexOf(e)===t})),e.next=6,GameSDK.player.getDataAsync(a);case 6:return i=e.sent,e.next=9,GameSDK.player.getStatsAsync();case 9:return r=e.sent,e.abrupt("return",(0,O.default)({},i,r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=(0,q.default)(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ut){e.next=2;break}return e.abrupt("return",pt(t));case 2:return e.abrupt("return",gt());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt("players/"+t+"/user-guide-displays/inc",{},{},ct);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.incrementStatsAsync({userGuideDisplays:1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vt="PLAYER_RECEIVED",mt="PLAYER_DATA_UPDATE",yt="PLAYER_SCORE_UPDATE",Et="PLAYER_PROFILE_UPDATE",St="PLAYER_SETTING_UPDATE",At="PLAYER_CONNECTED_PLAYERS_UPDATE",bt=n(27),Tt=He.sound,wt=He.music,Ct=He.vibrate,It=He.fastPour,xt=He.language,_t=He.theme,Pt=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.fastPour=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,a=t.music,i=t.vibrate,r=t.fastPour,s=t.language,o=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:Tt,this.music=GameCore.Utils.Valid.isBoolean(a)?a:wt,this.vibrate=GameCore.Utils.Valid.isBoolean(i)?i:Ct,this.fastPour=GameCore.Utils.Valid.isBoolean(r)?r:It,this.language=GameCore.Utils.Valid.isString(s)?s:xt,this.theme=GameCore.Utils.Valid.isString(o)?o:_t}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,fastPour:this.fastPour,language:this.language,theme:this.theme}},e}(),kt=Pt,Lt=st.userGuideDisplays,Rt=st.customFields,Ot=st.settings,Dt=function(){function e(e){this.data=void 0;var t=e.settings,n=e.score,a=e.level,i=e.customFields,r=e.userGuideDisplays,s=GameCore.Utils.Valid.isNumber(n)&&n>0?n:0,o=GameCore.Utils.Valid.isNumber(a)&&a>0?a:0,c=GameCore.Utils.Valid.isNumber(r)?r:Lt,u=GameCore.Utils.Valid.isObject(i)?i:Rt,l=Ot;GameCore.Utils.Valid.isObject(t)&&(l=new kt(t).toObject()),this.data={score:s,level:o,userGuideDisplays:c,settings:l,customFields:u}}return e.prototype.toObject=function(){return this.data},e}(),Mt=Dt,Bt=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.name="PlayerDataNameNotSupport",a.message=t||"The name of player data is not supported",a.payload=n||{},a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Nt=(0,Le.createSelector)([function(e){return e.player}],(function(e){return e})),Ut=(0,Le.createSelector)([Nt],(function(e){return e.playerId})),Gt=(0,Le.createSelector)([Nt],(function(e){return e.ASID})),Ft=(0,Le.createSelector)([function(e){return e.player.data}],(function(e){return e})),Kt=(0,Le.createSelector)([Ft],(function(e){return e.settings})),Yt=(0,Le.createSelector)([function(e){return e.player.connectedPlayers}],(function(e){return e})),Vt=(0,Le.createSelector)([Yt,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){return"number"!==typeof t||"number"!==typeof n?[]:Object.keys(e).slice(n,t+n)||[]})),zt=(0,Le.createSelector)([Ft],(function(e){return e.score})),Ht=(0,Le.createSelector)([Ft],(function(e){return e.customFields})),Wt=(0,Le.createSelector)([Ft],(function(e){return(null==e?void 0:e.level)||1})),jt=(0,Le.createSelector)([Ht],(function(e){return(null==e?void 0:e.lives)||{lives:GameCore.Configs.Lives.livesCapacity,lastBonusLifeTime:0}})),Xt=((0,Le.createSelector)([Ht],(function(e){return null==e?void 0:e.diamond})),GameCore.Configs),qt=Xt.AppId,Zt=(Xt.Tutorial,Xt.LanguageSupport),Qt=Xt.ThemeSupport,Jt=Xt.PlayerDataStore,$t=function(e){return{type:At,payload:{connectedPlayers:e}}},en=function(e,t){return function(n,a){try{var i,r=a(),s=Kt(r);n({type:St,payload:{name:e,value:t}});var o={settings:(0,O.default)({},s,(i={},i[e]=t,i))};je(Jt,o),un(a)}catch(c){(0,j.sendException)(c)}}},tn=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s={customFields:(r={},r[e]=t,r)},n.next=4,a(rn(s));case 4:un(i),n.next=12;break;case 7:if(n.prev=7,n.t0=n.catch(0),!(n.t0 instanceof Bt)){n.next=11;break}return n.abrupt("return");case 11:(0,j.sendException)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()},nn=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){var i;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={customFields:e},t.next=4,n(rn(i));case 4:un(a),t.next=12;break;case 7:if(t.prev=7,t.t0=t.catch(0),!(t.t0 instanceof Bt)){t.next=11;break}return t.abrupt("return");case 11:(0,j.sendException)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},an=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(rn({level:e}));case 3:un(a),t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(0),!(t.t0 instanceof Bt)){t.next=10;break}return t.abrupt("return");case 10:(0,j.sendException)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},rn=function(e){return function(t){try{t({type:mt,payload:{data:e}}),je(Jt,e)}catch(n){(0,j.sendException)(n)}}},sn=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){var i,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:yt,payload:{score:e}});case 3:i=a(),r=Ft(i),un(a),je(Jt,r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,j.sendException)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},on=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){var i;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={customFields:e},t.next=4,n(rn(i));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(0),!(t.t0 instanceof Bt)){t.next=10;break}return t.abrupt("return");case 10:(0,j.sendException)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},cn=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(rn({level:e}));case 3:t.next=10;break;case 5:if(t.prev=5,t.t0=t.catch(0),!(t.t0 instanceof Bt)){t.next=9;break}return t.abrupt("return");case 9:(0,j.sendException)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}()},un=(0,F.debounce)(function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t(),a=Ft(n),void 0!==(i=a.level)&&GameCore.Utils.Valid.isNumber(i)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,GameSDK.player.getDataAsync(["level"]);case 8:if(r=e.sent,s=r.level,!(i<(void 0===s?1:s))){e.next=14;break}return e.abrupt("return");case 14:lt(a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),3e3),ln=function(e){function t(){return e.apply(this,arguments)||this}(0,Z.default)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game.facebook,t(rn({userGuideDisplays:1})),i=n(),r=Ut(i),e.next=7,ft(r);case 7:a.data.set("userGuideDisplays",1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(e,t){this.game.storage.dispatch(function(e,t){return function(n){var a=e.playerId,i=e.name,r=e.photo,s=e.locale;n({type:vt,payload:{playerId:a,name:i,photo:r,locale:s,data:t||{}}})}}(e,t))},n.updateData=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d,f,p,g,v,m,y,E,S,A,b,T,w,C;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),i=Nt(a),r=i.playerId,s=i.name,o=i.photo,c=i.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,t({type:Et,payload:{profile:{appId:qt,playerId:r,name:s,photo:o,locale:c,ASID:u}}}),e.next=11,lt({appId:qt,playerId:r,name:s,photo:o,locale:c});case 11:if(l=e.sent,GameCore.Utils.Valid.isObject(l)){e.next=14;break}return e.abrupt("return");case 14:if(l.playerId===r){e.next=16;break}return e.abrupt("return");case 16:h=Kt(a),d=h.theme,f=h.sound,p=h.music,g=h.vibrate,v=h.language,m=new Mt(l).toObject(),y=m.settings,E=y.theme,S=y.music,A=y.sound,b=y.vibrate,T=y.language,w=v in Zt,C=d in Qt,v===T&&w||(m.settings.language=T),!0===S&&p!==S&&(m.settings.music=S),!0===A&&f!==A&&(m.settings.sound=A),!0===b&&g!==b&&(m.settings.vibrate=b),d===E&&C||(m.settings.theme=E),t(rn(m)),!0===m.settings.music&&window.game.audio.playMusic(),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setScore=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(sn(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,q.default)(J().mark((function e(t,n){var a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.game.storage,e.next=3,a.dispatch(en(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,q.default)(J().mark((function e(t,n){var a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.game.storage,e.next=3,a.dispatch(tn(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateCustomFields=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(nn(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.updatePlayerLevel=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(an(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.game.facebook,e.next=4,new Promise((function(e,t){n.once("players",(function(t){e(t)})),n.once("playersfail",(function(){return t([])})),n.getPlayers()}));case 4:if(a=e.sent,i=function(e){return!!e},r=a.map((function(e){var t=e.getID(),n=e.getName(),a=e.getPhoto();return t&&n&&a?new bt.default(t,n,a).toObject():null})).filter(i),!(r.length<1)){e.next=9;break}return e.abrupt("return");case 9:t($t(r)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch($t(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Nt(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Gt(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(He,e)?He[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getCoins=function(){var e=this.getCustomData("coin");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return zt(this.state)},n.getCustomData=function(e){var t=Ht(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Yt(this.state)},n.getConnectedPlayerIds=function(e,t){return Vt(this.state,{limit:e,offset:t})},n.getLevel=function(){return Wt(this.state)},n.getLivesData=function(){return jt(this.state)},n.getCountItems=function(){return this.getCustomData("countItems")},n.updatePlayerLives=function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.game.storage,void 0===(i={lives:{lives:t,lastBonusLifeTime:n}}).lives.lives&&delete i.lives.lives,void 0===i.lives.lastBonusLifeTime&&delete i.lives.lastBonusLifeTime,e.next=6,FBInstant.player.setDataAsync(i);case 6:return e.next=8,a.dispatch(nn(i));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),(0,xe.default)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),hn=ln,dn=GameCore.Configs.ApiHost,fn=function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,it("players?"+n,{},dn);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pn="PROFILES_DATA_UPDATE",gn=(0,Le.createSelector)([function(e){return e.profile.data}],(function(e){return e})),vn=(0,Le.createSelector)([function(e){return e.profile.profileIds}],(function(e){return e})),mn=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){var i,r,s,o;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=a(),r=vn(i),!((s=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,fn({playerIds:s});case 8:o=t.sent,n({type:pn,payload:{data:o}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,j.sendException)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},yn=function(e){function t(){return e.apply(this,arguments)||this}(0,Z.default)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(mn(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return gn(this.state)},(0,xe.default)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),En=yn,Sn=n(47),An=function(e){function t(){return e.apply(this,arguments)||this}return(0,Z.default)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),bn=An,Tn=n(13),wn=function(e){function t(t,n,a,i){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.gameZone,o=s.width,c=s.height;return r.setSize(a||o,i||c),r.addZone(),r.addBackground(),r}(0,Z.default)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,a=this.scene.add.graphics();a.fillStyle(0,1),a.fillRect(0,0,t,n),a.generateTexture(e,t,n),a.destroy()}this.background=this.scene.add.image(0,0,e),this.background.setWorldSize(this.width+2,this.height+2),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Tn.AnalyticsEvents.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Cn=wn,In=n(48);GameCore.Screen=Cn,GameCore.Screens={Events:In.default};var xn=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).events=void 0,t.screens=[],t}(0,Z.default)(t,e);var n=t.prototype;return n.boot=function(){this.events=new bn,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,a){var i=this.get(e);return i||(i=this.scene.add.screen(e,t,n,a),this.screens.push(i),this.events.emit(GameCore.Screens.Events.CREATED,i),i)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.closeAllScreens=function(){var e=this;this.screens.forEach((function(t){t.visible&&e.close(t.name)}))},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,a){var i=new t(this.scene,e,n,a);return Phaser.Display.Align.In.Center(i,this.scene.gameZone),this.existing(i),i},t}(Phaser.Plugins.ScenePlugin),_n=xn,Pn=n(49),kn=n.n(Pn),Ln=n(37),Rn=n(66),On=n(25),Dn=n(16),Mn={currentSceneKey:"",prevSceneKey:""};(0,Dn.enableES5)();var Bn,Nn,Un,Gn,Fn,Kn,Yn,Vn,zn,Hn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Wn=Hn,jn={data:{}},Xn={token:"",isRequesting:!1},qn=(Bn={},Bn.auth=function(e,t){return void 0===e&&(e=Xn),(0,Dn.default)(e,(function(e){var n=t.payload;if(n){var a=n.token;switch(t.type){case _e:e.isRequesting=!0;break;case Pe:e.token=a,e.isRequesting=!1}}}))},Bn),Zn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,level:1,settings:He,userGuideDisplays:0,customFields:{lives:{lives:GameCore.Configs.Lives.livesCapacity,lastBonusLifeTime:Date.now()}}},isUserNew:!0},Qn=(Nn={},Nn.player=function(e,t){return void 0===e&&(e=Zn),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.name,r=a.value,s=a.data,o=void 0===s?{}:s,c=a.score,u=a.connectedPlayers,l=void 0===u?[]:u,h=a.profile;switch(t.type){case vt:var d=a.playerId,f=a.name,p=a.photo,g=a.locale,v=a.data;if(n.playerId=d,n.name=f,n.photo=p,n.locale=g,GameCore.Utils.Valid.isObject(v)){var m=v;n.data=(0,D.merge)(e.data,m)}v.userGuideDisplays>0&&(n.isUserNew=!1);break;case Et:var y=h.playerId,E=h.name,S=h.photo,A=h.locale,b=h.ASID;n.ASID=b,n.playerId=y,n.name=E,n.photo=S,n.locale=A;break;case yt:n.data.score=c;break;case St:if(!GameCore.Utils.Object.hasOwn(n.data.settings,i))break;n.data.settings[i]=r;break;case mt:n.data=(0,D.merge)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case At:if(l.length<=0)break;var T=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,D.merge)(e.connectedPlayers,T)}}}))},Nn),Jn={data:{},profileIds:[]},$n=((Un={}).profile=function(e,t){return void 0===e&&(e=Jn),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.data,r=void 0===i?[]:i;if(t.type===pn){var s=GameCore.Utils.Object.keyBy(r,"playerId"),o=Object.keys(s);n.data=(0,D.merge)((0,O.default)({},e.data),s),n.profileIds=[].concat(new Set([].concat(e.profileIds,o)))}}}))},Un),ea="MATCH_GAMEPLAY_INITIALIZE",ta="MATCH_GAMEPLAY_START",na="MATCH_GAMEPLAY_FINISH",aa="MATCH_GAMEPLAY_UPDATE",ia="MATCH_GAMEPLAY_RESCUE",ra="MATCH_STATS_DATA_CLEAR",sa="MATCH_STATS_DATA_UPDATE",oa="MATCH_STATS_CURRENT_UPDATE",ca="MATCH_SINGLE_CREATE_REQUEST",ua="MATCH_SINGLE_DETAIL_REQUEST",la="MATCH_SINGLE_MOVE_UPDATED",ha="MATCH_SINGLE_DATA_RECEIVED",da="MATCH_SINGLE_DATA_CLEAR",fa="MATCH_CHALLENGE_JOIN_REQUEST",pa="MATCH_CHALLENGE_CREATE_REQUEST",ga="MATCH_CHALLENGE_FINISH_REQUEST",va="MATCH_CHALLENGE_CONTINUE_REQUEST",ma="MATCH_CHALLENGE_DATA_RECEIVED",ya="MATCH_CHALLENGE_DATA_CLEAR",Ea="MATCH_GROUP_CREATE_REQUEST",Sa="MATCH_GROUP_FINISH_REQUEST",Aa="MATCH_ONLINE_CREATE_REQUEST",ba="MATCH_ONLINE_DATA_RECEIVED",Ta="MATCH_ONLINE_STATS_UPDATE",wa="MATCH_ONLINE_FINISH_REQUEST",Ca="MATCH_ONLINE_DATA_CLEAR",Ia="open",xa="active",_a="finished",Pa={mode:"",status:Ia,rescued:0,startAt:0,finishAt:0},ka={single:{_id:"",data:{fen:""},playerId:"",status:Ia},group:{status:Ia,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Ia,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Ia,players:{}},updateAt:0,isRequesting:!1},La={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Ra=((Gn={}).match=(0,Ln.combineReducers)({gameplay:function(e,t){return void 0===e&&(e=Pa),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.mode,r=a.status;switch(t.type){case ea:n.status=Ia,n.mode=Pa.mode,n.rescued=Pa.rescued,n.startAt=Pa.startAt,n.finishAt=Pa.finishAt,n.opponentInfo=Pa.opponentInfo;break;case ta:n.mode=i,n.status=xa,n.rescued=Pa.rescued,n.startAt=Date.now();break;case aa:n.mode="string"===typeof i?i:e.mode,n.status=r||e.status;break;case na:n.status=_a,n.finishAt=Date.now();break;case ia:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=ka),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.match,r=a.opponentInfo,s=a.players;switch(t.type){case ca:case ua:case fa:case ga:case Aa:n.isRequesting=!0;break;case la:n.single=(0,O.default)({},e.single,i),n.updateAt=Date.now();break;case ha:n.isRequesting=!1,n.single=i||ka.single;break;case da:n.isRequesting=!1,n.single=ka.single;break;case pa:case va:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case ma:n.isRequesting=!1,n.challenge=(0,O.default)({},i||ka.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case ya:n.isRequesting=!1,n.challenge=ka.challenge;break;case Ea:n.group.status=xa,r&&(n.group.opponentInfo=r);break;case Sa:n.group.status=_a;break;case Ca:n.online.status=ka.online.status,n.online.players=ka.online.players;break;case ba:n.online.status=xa,n.online.players=s;break;case wa:n.online.status=_a}}}))},stats:function(e,t){return void 0===e&&(e=La),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.playerId,r=a.stats,s=a.match,o=a.current,c=a.players,u=a.leaders;switch(t.type){case ra:delete n.data[i],n.current=La.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=La.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case sa:n.data[i]=r;break;case oa:n.current=(0,D.merge)((0,O.default)({},e.current),r);break;case ba:Object.keys(c).forEach((function(e){n.data[e]={score:0}}));break;case Ta:u.forEach((function(e){var t=e.playerId,a=e.score,i=e.rank;n.data[t]={score:a,rank:i}}));break;case ma:var l=s||{},h=l.blackPlayerId,d=l.blackPlayerScore,f=l.whitePlayerId,p=l.whitePlayerScore,g=l.whitePlayerLevel,v=l.blackPlayerLevel;if(!h||!f)break;o&&(n.current=o),n.data[h]={score:d,level:v},n.data[f]={score:p,level:g}}}}))}}),Gn),Oa="TOURNAMENT_ACTIVE",Da="TOURNAMENT_REQUEST",Ma="TOURNAMENT_RECEIVED",Ba={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},Na=((Fn={}).tournament=function(e,t){return void 0===e&&(e=Ba),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.score,r=void 0===i?0:i,s=a.tournamentId;switch(t.type){case Oa:n.active=!0,n.tournamentId=s;break;case Da:n.isRequesting=!0;break;case Ma:n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},Fn),Ua="LEADERBOARD_DATA_REQUEST",Ga="LEADERBOARD_DATA_UPDATE",Fa="LEADERBOARD_DATA_CLEAR",Ka={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Ya=((Kn={}).leaderboards=function(e,t){return void 0===e&&(e=Ka),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.leaderboardId,r=a.type,s=a.limit,o=a.offset,c=a.leaders;switch(t.type){case Ua:e.type!==r&&0===o&&(n.leaders=Ka.leaders),n.isRequesting=!0,n.leaderboardId=i,n.type=r,n.limit=s,n.offset=o;break;case Ga:if(n.isRequesting=!1,e.type!==r)break;var u=GameCore.Utils.Json.clone((0,O.default)({},e.leaders,c)),l=Object.values(u).filter((function(e){return!!e.name&&!!e.photo}));l.sort((function(e,t){return+t.score-+e.score})),l.forEach((function(t,a){e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Fa:n.isRequesting=!1,n.type=Ka.type,n.limit=Ka.limit,n.offset=Ka.offset,n.leaders=Ka.leaders,n.leaderboardId=Ka.leaderboardId}}}))},Kn),Va="MISSIONS_DATA_REQUEST",za="MISSIONS_DATA_RECEIVE",Ha="MISSION_START",Wa="MISSION_UPDATE",ja="MISSION_COMPLETED",Xa={mission:null,missions:null,isRequesting:!1},qa=((Yn={}).missions=function(e,t){return void 0===e&&(e=Xa),(0,Dn.default)(e,(function(n){var a,i,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,u=r.missions;switch(t.type){case Va:n.isRequesting=!0;break;case za:if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case Ha:if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},Object.keys(l.require).forEach((function(e){n.mission.process[e]=0}));break;case Wa:if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission.process[o]+=c;break;case ja:if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission=null}}}))},Yn),Za="DAILY_TASKS_DATA_REQUEST",Qa="DAILY_TASKS_DATA_RECEIVE",Ja="DAILY_TASKS_PROCESS_UPDATE",$a="DAILY_TASK_VALUE_ADD",ei="DAILY_TASK_REWARDED",ti="DAILY_TASKS_SEEN",ni="DAILY_TASK_FINISHED",ai={tasks:[],process:[],isRequesting:!1,isNotice:!1},ii=((Vn={}).dailyTasks=function(e,t){return void 0===e&&(e=ai),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.id,r=a.type,s=a.value,o=a.tasks,c=a.process;switch(t.type){case Za:n.isRequesting=!0;break;case Qa:n.isRequesting=!1,n.tasks=o;break;case Ja:n.process=c;break;case $a:if(!e.process[i])break;n.process[i][r]+=s;break;case ei:if(!e.process[i])break;n.process[i].rewarded=!0;break;case ti:n.isNotice=!1;break;case ni:n.isNotice=!0}}}))},Vn),ri={rewards:[],isRequesting:!1},si=((zn={}).dailyRewards=function(e,t){return void 0===e&&(e=ri),(0,Dn.default)(e,(function(e){var n=t.payload;if(n){var a=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=a}}}))},zn),oi=(0,Ln.combineReducers)((0,O.default)({scene:function(e,t){return void 0===e&&(e=Mn),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.sceneKey;if(t.type===On.SCENE_KEY_UPDATE)n.currentSceneKey=i,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Hn),(0,Dn.default)(e,(function(e){var n=t.payload;if(n){var a=n.gameMode,i=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case On.CONTEXT_RECEIVED:e.contextId=i,e.contextType=r,e.entryPointData=s;break;case On.CONTEXT_PROCESSED:e.contextId=i,e.contextType=r,e.processed=!0;break;case On.CONTEXT_GAME_MODE_DETECTED:e.currentGameMode=a}}}))},messages:function(e,t){return void 0===e&&(e=jn),(0,Dn.default)(e,(function(n){var a=t.payload;if(a){var i=a.opponentId;if("string"===typeof i)switch(t.type){case On.MESSAGES_SENT_UPDATE:e.data[i]?n.data[i].sent=!0:n.data[i]={sent:!0};break;case On.MESSAGES_SENT_REMOVE:e.data[i]?n.data[i].sent=!1:n.data[i]={sent:!1}}}}))}},qn,Qn,$n,Ra,Na,Ya,qa,ii,si)),ci=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Ln.compose),ui=function(e){var t=ci((0,Ln.applyMiddleware)(Rn.default));return(0,Ln.createStore)(oi,e,t)},li=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).store=void 0,t.initiator=void 0,t.dispatch=function(e){return t.store.dispatch(e)},t.getState=function(){return t.store.getState()},t.subscribe=function(e){return t.store.subscribe(e)},t.watch=function(e,n){var a=kn()((function(){var n=t.getState();return e(n)}));return t.subscribe(a((function(e){n(e)})))},t}(0,Z.default)(t,e);var n=t.prototype;return n.init=function(){this.store=ui({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){this.initiator.initContext(),this.initiator.initPlayer()},t}(Phaser.Plugins.BasePlugin),hi=li,di=n(67),fi=n.n(di),pi=function(e){function t(t,n){var a;return(a=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,a.payload=n,a}(0,Z.default)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}fi().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,a=e.fontName,i=e.fontWeight;return{google:{families:[a+":"+(void 0===i?400:i)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,a=e.fontType,i=document.createElement("style");document.head.appendChild(i);var r=i.sheet;if(r){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===a?".otf":".ttf")+'") format("'+a+'"); }';r.insertRule(s,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),gi=pi,vi=function(e){function t(){return e.apply(this,arguments)||this}return(0,Z.default)(t,e),t.prototype.addFont=function(e){var t=new gi(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),mi=vi,yi=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).ratio=void 0,t.width=void 0,t.height=void 0,t.worldWidth=void 0,t.worldHeight=void 0,t.worldRatio=void 0,t.forcePixelRatio=void 0,t}(0,Z.default)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.width,n=e.height,a=e.ratio;this.ratio=a,this.width=t,this.height=n,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),a=n.width,i=n.height;this.resizeCanvas(a,i),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var a=t.getZoomRatio(),i=t.getWorldSize(),r=i.width,s=i.height;n.setZoom(a),n.centerOn(r/2,s/2)}}))},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){this.worldWidth=this.width,this.worldHeight=this.height,this.isScreenSmallerRatio(this.ratio)&&(this.worldHeight=this.width/this.getScreenRatio()),this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,a=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?a=n/e:n=a*e,{width:n,height:a}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,a=t.clientHeight,i=n.clientHeight;return Math.max(i,a)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,a=t.clientWidth,i=n.clientWidth;return Math.max(i,a)||0},n.isScreenSmallerRatio=function(e){return this.getScreenWidth()/this.getScreenHeight()<=e},n.addEventResize=function(){var e=this;window.addEventListener("resize",(function(){e.resize()}))},t}(Phaser.Plugins.BasePlugin),Ei=yi,Si=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||Wn.contextId,this.contextType=t||Wn.contextType,this.entryPointData=n||Wn.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),Ai=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidPlayerId",a.message=t||"The playerId is not valid",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),bi="share_invite",Ti="tournament",wi="challenge_friend_match",Ci="matching_group_match",Ii=n(22),xi=new bt.default("10","Your Friend",Ii.default.AVATAR.FILE).toObject(),_i="single",Pi="challenge-friends",ki="matching-group",Li="tournaments",Ri="online",Oi=(0,Le.createSelector)([function(e){return e.context}],(function(e){return e})),Di=((0,Le.createSelector)([function(e){return e.context.contextId}],(function(e){return e})),(0,Le.createSelector)([function(e){return e.context.contextType}],(function(e){return e})),(0,Le.createSelector)([function(e){return e.context.processed}],(function(e){return e})),(0,Le.createSelector)([function(e){return e.context.currentGameMode}],(function(e){return e}))),Mi=function(e,t){return{type:On.CONTEXT_PROCESSED,payload:{contextId:e,contextType:t}}},Bi=function(e){return function(t){t({type:On.CONTEXT_GAME_MODE_DETECTED,payload:{gameMode:e}}),(0,j.addBreadcrumbSentry)("game-mode",e)}},Ni=GameCore.Configs.PlayerDataStore,Ui=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),a=window.GameSDK.getEntryPointData(),i=new Si(e,n,a).toObject(),r=i.contextId,s=i.contextType,o=i.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:On.CONTEXT_RECEIVED,payload:{contextId:e,contextType:t,entryPointData:n}}}(r,s,o))},this.initPlayer=function(){var e=t.getPlayerInfo(),n=t.getPlayerDataLocal();t.game.player.receiveData(e,n)},this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),a=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new Ai(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new bt.default(e,t,n,a).toObject()}catch(i){return new bt.default("123","You").toObject()}},this.getPlayerDataLocal=function(){try{var e=We(Ni);return GameCore.Utils.Valid.isObject(e)?new Mt(e).toObject():null}catch(t){return null}},this.game=e},Gi=n(14),Fi=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).Text=void 0,t.Texture=void 0,t.currentLocale=void 0,t.supportedLanguages=void 0,t.data=void 0,t.options=void 0,t}(0,Z.default)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,a=void 0===n?[]:n,i=e.locale,r=void 0===i?this.currentLocale:i,s=this.getCorrectLocale(r),o=this.data[s].Text[t],c=this.replaceVariables(o,a);return this.options.reverseText&&(c=this.reverseString(c)),c}var u=this.Text[e];return this.options.reverseText&&(u=this.reverseString(u)),u},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,a=void 0===n?[]:n,i=e.locale,r=void 0===i?this.currentLocale:i,s=this.getCorrectLocale(r),o=this.data[s].Texture[t];return this.replaceVariables(o,a)}return this.Texture[e]},n.isSupportLanguage=function(e){return this.supportedLanguages.indexOf(e)>=0},n.applyOptions=function(e){this.options=(0,O.default)({},e);var t=e.data,n=e.locale,a=void 0===n?"en_US":n,i=e.upperCaseText,r=void 0!==i&&i;this.data=t,this.supportedLanguages=Object.keys(t);var s=this.getCorrectLocale(a);if(this.currentLocale=s,this.Text=t[s].Text,this.Texture=t[s].Texture,r)for(var o in this.Text)this.Text[o]=this.Text[o].toUpperCase()},n.reverseString=function(e){return e.split("").reverse().join("")},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var a=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(a++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return e.includes("_")&&(t=e.split("_")[0]),this.isSupportLanguage(t)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),Ki={en:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzzle","level":"Level","score":"Score","settings":"Settings","sound":"Sound","vibrate":"Vibrate","on":"On","off":"Off","leaderboards":"LEADERBOARDS","play":"PLAY","completed":"Completed","next":"Next","out_of_moves":"OUT OF MOVES","watch_video_to_skip_this_level":"WATCH VIDEO TO SKIP THIS LEVEL","watch_video_to_undo_{X}_moves":"WATCH VIDEO TO UNDO {X} MOVES","restart":"RESTART","undo_{X}_moves":"UNDO {X} MOVES","tap_to_see_the_tubes":"TAP TO SEE THE TUBES","loading_ads":"Loading ads\u2026","loading":"Loading\u2026","no_ads_to_display":"No ads to display","sorry_no_rewards_you_have_cancelled_the_ad":"Sorry, No Rewards!\\nYou have cancelled the ad!","keep_playing":"KEEP PLAYING","out_of_lives":"OUT OF LIVES","next_life":"NEXT LIFE","full":"FULL","fast_pour":"FAST POUR","refill_lives":"REFILL\\nLIVES","start_over":"START OVER","can_not_load_new_level":"Can not load new level!","can_not_load_new_level_please_restart_game":"Can not load new level!\\nPlease restart game.","leaderboard_is_empty":"Leaderboard is empty!","congratulation":"CONGRATULATION","you_have_pass_all_levels":"You have passed all levels.","please_come_back_later":"Please come back later, we will update soon!","ranks":"RANKS","confirmation":"CONFIRMATION","are_you_sure_to_start_over":"ARE YOU SURE TO START OVER?","you_will_play_the_game_again":"You will play the game again from the beginning, at level 1.","no":"NO","yes":"YES"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),fr:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Triez-le \u2013 Puzzle de tri d\u2019eau","water_sort_puzzle":"Puzzle de tri d\u2019eau","level":"Niveau","score":"Score","settings":"Param\xe8tres","sound":"Son","vibrate":"Vibration","on":"On","off":"Off","leaderboards":"CLASSEMENTS G\xc9N\xc9RAUX","play":"JOUER","completed":"Termin\xe9","next":"Suivant","out_of_moves":"EN MANQUE DE D\xc9PLACEMENTS","watch_video_to_skip_this_level":"REGARDEZ LA VID\xc9O POUR PASSER CE NIVEAU","watch_video_to_undo_{X}_moves":"REGARDER LA VID\xc9O POUR D\xc9FAIRE {X} D\xc9PLACEMENTS","restart":"RED\xc9MARRER","undo_{X}_moves":"ANNULER {X} D\xc9PLACEMENTS","tap_to_see_the_tubes":"APPUYEZ POUR VOIR LES TUBES","loading_ads":"Chargement des publicit\xe9s...","loading":"Chargement en cours...","no_ads_to_display":"Aucune publicit\xe9 \xe0 afficher","sorry_no_rewards_you_have_cancelled_the_ad":"D\xe9sol\xe9, aucune r\xe9compense !\\nVous avez annul\xe9 la publicit\xe9 !","keep_playing":"CONTINUER \xc0 JOUER","out_of_lives":"PLUS AUCUNE VIE","next_life":"PROCHAINE VIE","full":"PLEIN","fast_pour":"VERSEMENT RAPIDE","refill_lives":"REMPLIR\\nLES VIES","start_over":"RECOMMENCER","can_not_load_new_level":"Impossible de charger un nouveau niveau\xa0!","can_not_load_new_level_please_restart_game":"Impossible de charger le nouveau niveau\xa0!\\nVeuillez red\xe9marrer le jeu.","leaderboard_is_empty":"Le classement est vide\xa0!","congratulation":"F\xc9LICITATION","you_have_pass_all_levels":"Vous avez pass\xe9 tous les niveaux.","please_come_back_later":"Veuillez revenir plus tard, nous mettrons \xe0 jour bient\xf4t!","ranks":"RANGS","confirmation":"CONFIRMATION","are_you_sure_to_start_over":"\xcaTES-VOUS S\xdbR DE COMMENCER ?","you_will_play_the_game_again":"Vous rejouerez le jeu depuis le d\xe9but, au niveau 1.","no":"NON","yes":"OUI"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),de:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzzle","level":"Level","score":"Punkte","settings":"Einstellungen","sound":"Ton","vibrate":"Vibration","on":"Ein","off":"Aus","leaderboards":"BESTENLISTE","play":"SPIELEN","completed":"Abgeschlossen","next":"Weiter","out_of_moves":"KEINE Z\xdcGE MEHR","watch_video_to_skip_this_level":"VIDEO ANSEHEN, UM LEVEL ZU \xdcBERSPRINGEN","watch_video_to_undo_{X}_moves":"VIDEO ANSEHEN, UM {X} Z\xdcGE R\xdcCKG\xc4NGIG ZU MACHEN","restart":"NEUSTARTEN","undo_{X}_moves":"{X} Z\xdcGE R\xdcCKG\xc4NGIG MACHEN","tap_to_see_the_tubes":"ANTIPPEN, UM R\xd6HREN ZU SEHEN","loading_ads":"Anzeigen werden geladen \u2026","loading":"Wird geladen \u2026","no_ads_to_display":"Keine Anzeigen vorhanden","sorry_no_rewards_you_have_cancelled_the_ad":"Leider erh\xe4ltst du keine Belohnungen!\\nDu hast die Anzeige abgebrochen!","keep_playing":"WEITERSPIELEN","out_of_lives":"KEINE LEBEN MEHR","next_life":"N\xc4CHSTES LEBEN","full":"VOLL","fast_pour":"SCHNELLES GIESSEN","refill_lives":"LEBEN\\nAUFF\xdcLLEN","start_over":"VON VORN ANFANGEN","can_not_load_new_level":"Neues Level kann nicht geladen werden!","can_not_load_new_level_please_restart_game":"Neues Level kann nicht geladen werden!\\nBitte Spiel neu starten.","leaderboard_is_empty":"Rangliste ist leer!","congratulation":"GL\xdcCKWUNSCH","you_have_pass_all_levels":"Sie haben alle Ebenen bestanden.","please_come_back_later":"Bitte kommen Sie sp\xe4ter wieder, wir werden bald aktualisieren!","ranks":"R\xc4NGE","confirmation":"BEST\xc4TIGUNG","are_you_sure_to_start_over":"BIST DU SICHER, NEU ZU BEGINNEN?","you_will_play_the_game_again":"Sie spielen das Spiel erneut von Anfang an auf Stufe 1.","no":"NEIN","yes":"JA"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),es:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzzle","level":"Nivel","score":"Puntuaci\xf3n","settings":"Configuraci\xf3n","sound":"Sonido","vibrate":"Vibraci\xf3n","on":"Activado","off":"Desactivado","leaderboards":"TABLAS DE CLASIFICACI\xd3N","play":"JUGAR","completed":"Completado","next":"Siguiente","out_of_moves":"NO QUEDAN MOVIMIENTOS","watch_video_to_skip_this_level":"MIRA EL V\xcdDEO PARA SALTARTE ESTE NIVEL","watch_video_to_undo_{X}_moves":"MIRA EL VIDEO PARA DESHACER\\n{X} MOVIMIENTOS","restart":"REINICIAR","undo_{X}_moves":"DESHACER {X} MOVIMIENTOS","tap_to_see_the_tubes":"TOCA PARA VER LOS TUBOS","loading_ads":"Cargando anuncios\u2026","loading":"Cargando\u2026","no_ads_to_display":"No hay anuncios para mostrar","sorry_no_rewards_you_have_cancelled_the_ad":"\xa1Lo sentimos, no hay recompensas!\\n\xa1Has cancelado el anuncio!","keep_playing":"SEGUIR JUGANDO","out_of_lives":"NO QUEDAN VIDAS","next_life":"PR\xd3XIMA VIDA","full":"COMPLETO","fast_pour":"VERTIDO R\xc1PIDO","refill_lives":"RECARGAR\\nVIDAS","start_over":"COMENZAR DE NUEVO","can_not_load_new_level":"\xa1No se puede cargar el nuevo nivel!","can_not_load_new_level_please_restart_game":"\xa1No se puede cargar el nuevo nivel!\\nReinicia el juego.","leaderboard_is_empty":"\xa1La clasificaci\xf3n est\xe1 vac\xeda!","congratulation":"FELICIDADES","you_have_pass_all_levels":"Has superado todos los niveles.","please_come_back_later":"Por favor regrese m\xe1s tarde, lo actualizaremos pronto!","ranks":"RANGOS","confirmation":"CONFIRMACI\xd3N","are_you_sure_to_start_over":"\xbfEst\xe1s seguro de empezar de nuevo?","you_will_play_the_game_again":"Volver\xe1s a jugar el juego desde el principio, en el nivel 1.","no":"NO","yes":"S\xcd"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),id:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzzle","level":"Level","score":"Skor","settings":"Pengaturan","sound":"Suara","vibrate":"Getaran","on":"Hidup","off":"Mati","leaderboards":"PAPAN PERINGKAT","play":"MAIN","completed":"Selesai","next":"Selanjutnya","out_of_moves":"KEHABISAN LANGKAH","watch_video_to_skip_this_level":"TONTON VIDEO UNTUK MELEWATI LEVEL INI","watch_video_to_undo_{X}_moves":"TONTON VIDEO UNTUK UNDO {X} LANGKAH","restart":"MULAI ULANG","undo_{X}_moves":"UNDO {X} LANGKAH","tap_to_see_the_tubes":"KETUK UNTUK LIHAT TABUNGNYA","loading_ads":"Memuat iklan...","loading":"Memuat...","no_ads_to_display":"Tidak ada iklan untuk ditampilkan","sorry_no_rewards_you_have_cancelled_the_ad":"Maaf, Tidak Ada Hadiah!\\nKamu telah membatalkan iklannya!","keep_playing":"TERUS BERMAIN","out_of_lives":"KEHABISAN NYAWA","next_life":"KEHIDUPAN SELANJUTNYA","full":"PENUH","fast_pour":"Tuangkan CEPAT","refill_lives":"ISI ULANG\\nNYAWA","start_over":"MULAI DARI","can_not_load_new_level":"Tidak dapat memuat level baru!","can_not_load_new_level_please_restart_game":"Tidak dapat memuat level baru!\\nSilakan mulai ulang game.","leaderboard_is_empty":"Papan peringkat kosong!","congratulation":"SELAMAT","you_have_pass_all_levels":"Anda telah melewati semua level.","please_come_back_later":"Silakan kembali lagi nanti, kami akan segera memperbarui!","ranks":"PERINGKAT","confirmation":"KONFIRMASI","are_you_sure_to_start_over":"APAKAH ANDA YAKIN UNTUK MEMULAI DARI AWAL?","you_will_play_the_game_again":"Anda akan memainkan permainan lagi dari awal, di level 1.","no":"TIDAK","yes":"YA"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),it:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Ordine - Puzzle di ordinamento dell\'acqua","water_sort_puzzle":"Puzzle di ordinamento dell\'acqua","level":"Livello","score":"Punteggio","settings":"Impostazioni","sound":"Suono","vibrate":"Vibrazione","on":"Attivo","off":"Disabilitato","leaderboards":"CLASSIFICA","play":"GIOCA","completed":"Completato","next":"Avanti","out_of_moves":"MOSSE ESAURITE","watch_video_to_skip_this_level":"GUARDA IL VIDEO PER SALTARE QUESTO LIVELLO","watch_video_to_undo_{X}_moves":"GUARDA IL VIDEO PER ANNULLARE {X} MOSSE","restart":"RIAVVIA","undo_{X}_moves":"ANNULLA {X} MOSSE","tap_to_see_the_tubes":"TOCCA PER VEDERE I TUBI","loading_ads":"Caricamento annunci\u2026","loading":"Caricamento\u2026","no_ads_to_display":"Nessun annuncio da visualizzare","sorry_no_rewards_you_have_cancelled_the_ad":"Spiacente, nessuna ricompensa!\\nHai cancellato l\'annuncio!","keep_playing":"CONTINUA A GIOCARE","out_of_lives":"VITE ESAURITE","next_life":"PROSSIMA VITA","full":"COMPLETO","fast_pour":"VERSO VELOCE","refill_lives":"RICARICA\\nVITE","start_over":"RICOMINCIARE","can_not_load_new_level":"Impossibile caricare un nuovo livello!","can_not_load_new_level_please_restart_game":"Impossibile caricare il nuovo livello!\\nRiavvia il gioco.","leaderboard_is_empty":"La classifica \xe8 vuota!","congratulation":"CONGRATULAZIONI","you_have_pass_all_levels":"Hai superato tutti i livelli.","please_come_back_later":"Torna pi\xf9 tardi, ti aggiorneremo presto!","ranks":"RANGHI","confirmation":"CONFERMA","are_you_sure_to_start_over":"SEI SICURO DI RICOMINCIARE?","you_will_play_the_game_again":"Giocherai di nuovo dall\'inizio, al livello 1.","no":"NO","yes":"S\xcc"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),pt:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzzle","level":"N\xedvel","score":"Pontua\xe7\xe3o","settings":"Defini\xe7\xe3o","sound":"Som","vibrate":"Vibrar","on":"Ligado","off":"Desligado","leaderboards":"CLASSIFICA\xc7\xd5ES","play":"JOGAR","completed":"Conclu\xeddo","next":"Pr\xf3ximo","out_of_moves":"SEM MAIS MOVIMENTOS","watch_video_to_skip_this_level":"VER V\xcdDEO PARA SALTAR ESTE N\xcdVEL","watch_video_to_undo_{X}_moves":"VER V\xcdDEO PARA DESFAZER {X} MOVIMENTOS","restart":"REINICIAR","undo_{X}_moves":"DESFAZER {X} MOVIMENTOS","tap_to_see_the_tubes":"TOCA PARA VER OS TUBOS","loading_ads":"A carregar an\xfancios\u2026","loading":"A carregar\u2026","no_ads_to_display":"Sem an\xfancios a exibir","sorry_no_rewards_you_have_cancelled_the_ad":"Desculpa, n\xe3o h\xe1 recompensas!\\nCancelaste o an\xfancio!","keep_playing":"CONTINUA A JOGAR","out_of_lives":"SEM VIDAS RESTANTES","next_life":"PR\xd3XIMA VIDA","full":"CHEIO","fast_pour":"DERRAMAMENTO R\xc1PIDO","refill_lives":"RECARREGAR\\nVIDAS","start_over":"RECOME\xc7AR","can_not_load_new_level":"N\xe3o \xe9 poss\xedvel carregar novo n\xedvel!","can_not_load_new_level_please_restart_game":"N\xe3o \xe9 poss\xedvel carregar o novo n\xedvel!\\nPor favor, reinicie o jogo.","leaderboard_is_empty":"A tabela de classifica\xe7\xe3o est\xe1 vazia!","congratulation":"PARAB\xc9NS","you_have_pass_all_levels":"Voc\xea passou todos os n\xedveis.","please_come_back_later":"Por favor, volte mais tarde, iremos atualizar em breve!","ranks":"CLASSIFICA\xc7\xd5ES","confirmation":"CONFIRMA\xc7\xc3O","are_you_sure_to_start_over":"TEM CERTEZA DE COME\xc7AR DE NOVO?","you_will_play_the_game_again":"Voc\xea jogar\xe1 o jogo novamente desde o in\xedcio, no n\xedvel 1.","no":"N\xc3O","yes":"SIM"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),ja:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - \u6db2\u4f53\u6df7\u305c\u30d1\u30ba\u30eb","water_sort_puzzle":"\u6db2\u4f53\u6df7\u305c\u30d1\u30ba\u30eb","level":"\u30ec\u30d9\u30eb","score":"\u30b9\u30b3\u30a2","settings":"\u8a2d\u5b9a","sound":"\u30b5\u30a6\u30f3\u30c9","vibrate":"\u632f\u52d5","on":"\u30aa\u30f3","off":"\u30aa\u30d5","leaderboards":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9","play":"\u30d7\u30ec\u30a4","completed":"\u5b8c\u4e86","next":"\u6b21\u3078","out_of_moves":"\u624b\u8a70\u307e\u308a","watch_video_to_skip_this_level":"\u52d5\u753b\u3092\u8996\u8074\u3057\u3066\u3053\u306e\u30ec\u30d9\u30eb\u3092\u30b9\u30ad\u30c3\u30d7","watch_video_to_undo_{X}_moves":"\u52d5\u753b\u3092\u8996\u8074\u3057\u3066 {X} \u30e0\u30fc\u30d6\u623b\u3059","restart":"\u30ea\u30b9\u30bf\u30fc\u30c8","undo_{X}_moves":"{X} \u30e0\u30fc\u30d6\u623b\u3059","tap_to_see_the_tubes":"\u30bf\u30c3\u30d7\u3057\u3066\u8a66\u9a13\u7ba1\u3092\u898b\u308b","loading_ads":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","loading":"\u8aad\u307f\u8fbc\u307f\u4e2d...","no_ads_to_display":"\u8868\u793a\u3067\u304d\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093","sorry_no_rewards_you_have_cancelled_the_ad":"\u5e83\u544a\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u306e\u3067\\n\u6b8b\u5ff5\u3067\u3059\u304c\u30ea\u30ef\u30fc\u30c9\u306a\u3057\u3067\u3059\uff01","keep_playing":"\u30d7\u30ec\u30a4\u3057\u7d9a\u3051\u308b","out_of_lives":"\u30e9\u30a4\u30d5\u5207\u308c","next_life":"\u6b21\u306e\u4eba\u751f","full":"\u6e80\u676f","fast_pour":"\u9ad8\u901f\u6ce8\u5165","refill_lives":"\u30ea\u30d5\u30a3\u30eb\\n\u30e9\u30a4\u30d6","start_over":"\u3084\u308a\u76f4\u3059","can_not_load_new_level":"\u65b0\u3057\u3044\u30ec\u30d9\u30eb\u3092\u8aad\u307f\u8fbc\u3081\u307e\u305b\u3093!","can_not_load_new_level_please_restart_game":"\u65b0\u3057\u3044\u30ec\u30d9\u30eb\u3092\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093!\\n\u30b2\u30fc\u30e0\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002","leaderboard_is_empty":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u306f\u7a7a\u3067\u3059!","congratulation":"\u304a\u3081\u3067\u3068\u3046","you_have_pass_all_levels":"\u3042\u306a\u305f\u306f\u3059\u3079\u3066\u306e\u30ec\u30d9\u30eb\u306b\u5408\u683c\u3057\u307e\u3057\u305f\u3002","please_come_back_later":"\u5f8c\u3067\u623b\u3063\u3066\u304d\u3066\u304f\u3060\u3055\u3044\u3001\u3059\u3050\u306b\u66f4\u65b0\u3057\u307e\u3059\uff01","ranks":"\u30e9\u30f3\u30af","confirmation":"\u78ba\u8a8d","are_you_sure_to_start_over":"\u3084\u308a\u76f4\u3057\u307e\u3059\u304b?","you_will_play_the_game_again":"\u30ec\u30d9\u30eb 1 \u3067\u3001\u30b2\u30fc\u30e0\u3092\u6700\u521d\u304b\u3089\u3082\u3046\u4e00\u5ea6\u30d7\u30ec\u30a4\u3057\u307e\u3059\u3002","no":"\u3044\u3044\u3048","yes":"\u306f\u3044"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),ru:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - \u0433\u043e\u043b\u043e\u0432\u043e\u043b\u043e\u043c\u043a\u0430 \u0441 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u043e\u0439 \u0432\u043e\u0434\u044b","water_sort_puzzle":"\u0413\u043e\u043b\u043e\u0432\u043e\u043b\u043e\u043c\u043a\u0430 \u0442\u0438\u043f\u0430 \u0432\u043e\u0434\u044b","level":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","score":"\u0421\u0447\u0435\u0442","settings":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","sound":"\u0417\u0432\u0443\u043a","vibrate":"\u0432\u0438\u0431\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c","on":"\u0432\u043a\u043b","off":"\u0432\u044b\u043a\u043b","leaderboards":"\u041b\u0418\u0414\u0415\u0420\u042b","play":"\u0418\u0413\u0420\u0410\u0422\u042c \u0412","completed":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0439","next":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439","out_of_moves":"\u0412\u041d\u0415 \u0414\u0412\u0418\u0416\u0415\u041d\u0418\u0419","watch_video_to_skip_this_level":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418\u0422\u0415 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u0420\u041e\u041f\u0423\u0421\u0422\u0418\u0422\u042c \u042d\u0422\u041e\u0422 \u0423\u0420\u041e\u0412\u0415\u041d\u042c","watch_video_to_undo_{X}_moves":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418\u0422\u0415 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041e\u0422\u041c\u0415\u041d\u0418\u0422\u042c {X} \u0414\u0412\u0418\u0416\u0415\u041d\u0418\u0419","restart":"\u0417\u0410\u041f\u0423\u0421\u0422\u0418\u0422\u042c \u0421\u041d\u041e\u0412\u0410","undo_{X}_moves":"\u041e\u0422\u041c\u0415\u041d\u0418\u0422\u042c {X} \u0414\u0412\u0418\u0416\u0415\u041d\u0418\u0419","tap_to_see_the_tubes":"\u041d\u0410\u0416\u041c\u0418\u0422\u0415, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c \u0422\u0420\u0423\u0411\u042b","loading_ads":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f ...","loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ...","no_ads_to_display":"\u041d\u0435\u0442 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f!","sorry_no_rewards_you_have_cancelled_the_ad":"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043d\u0435\u0442 \u043d\u0430\u0433\u0440\u0430\u0434!\\n\u0412\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u043b\u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435!","keep_playing":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c \u0418\u0413\u0420\u0410\u0422\u042c","out_of_lives":"\u0416\u0418\u0417\u041d\u0418 \u041a\u041e\u041d\u0427\u0418\u041b\u0418\u0421\u042c","next_life":"\u0421\u041b\u0415\u0414\u0423\u042e\u0429\u0410\u042f \u0416\u0418\u0417\u041d\u042c","full":"\u041f\u041e\u041b\u041d\u042b\u0419","fast_pour":"\u0411\u042b\u0421\u0422\u0420\u0410\u042f \u0417\u0410\u041b\u0418\u0412\u041a\u0410","refill_lives":"\u041f\u041e\u041f\u041e\u041b\u041d\u0418\u0422\u042c\\n\u0416\u0418\u0417\u041d\u0415\u0419","start_over":"\u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410","can_not_load_new_level":"\u041d\u0435 \u043c\u043e\u0433\u0443 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c!","can_not_load_new_level_please_restart_game":"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c!\\n\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0438\u0433\u0440\u0443.","leaderboard_is_empty":"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043b\u0438\u0434\u0435\u0440\u043e\u0432 \u043f\u0443\u0441\u0442\u0430!","congratulation":"\u041f\u041e\u0417\u0414\u0420\u0410\u0412\u041b\u0415\u041d\u0418\u0415","you_have_pass_all_levels":"\u0412\u044b \u043f\u0440\u043e\u0448\u043b\u0438 \u0432\u0441\u0435 \u0443\u0440\u043e\u0432\u043d\u0438.","please_come_back_later":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u0439\u0434\u0438\u0442\u0435 \u043f\u043e\u0437\u0436\u0435, \u043c\u044b \u0441\u043a\u043e\u0440\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u043c!","ranks":"\u0417\u041d\u0410\u041a\u0418","confirmation":"\u041f\u041e\u0414\u0422\u0412\u0415\u0420\u0416\u0414\u0415\u041d\u0418\u0415","are_you_sure_to_start_over":"\u0412\u042b \u0423\u0412\u0415\u0420\u0415\u041d\u042b, \u0427\u0422\u041e \u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410?","you_will_play_the_game_again":"\u0412\u044b \u0441\u043d\u043e\u0432\u0430 \u0431\u0443\u0434\u0435\u0442\u0435 \u0438\u0433\u0440\u0430\u0442\u044c \u0432 \u0438\u0433\u0440\u0443 \u0441 \u0441\u0430\u043c\u043e\u0433\u043e \u043d\u0430\u0447\u0430\u043b\u0430, \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 1.","no":"\u041d\u0415\u0422","yes":"\u0414\u0410"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),zh:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"\u6b63\u786e\u5206\u7c7b \u2013 \u5f69\u6db2\u5206\u7c7b\u6e38\u620f","water_sort_puzzle":"\u5f69\u6db2\u5206\u7c7b\u6e38\u620f","level":"\u5173\u5361","score":"\u5206\u6570","settings":"\u8bbe\u7f6e","sound":"\u58f0\u97f3","vibrate":"\u632f\u52a8","on":"\u5f00","off":"\u5173","leaderboards":"\u6392\u884c\u699c","play":"\u5f00\u59cb\u6e38\u620f","completed":"\u5df2\u5b8c\u6210","next":"\u4e0b\u4e00\u5173","out_of_moves":"\u6b65\u6570\u8017\u5c3d","watch_video_to_skip_this_level":"\u89c2\u770b\u89c6\u9891\u8df3\u8fc7\u6b64\u5173\u5361","watch_video_to_undo_{X}_moves":"\u89c2\u770b\u89c6\u9891\u64a4\u9500 {X} \u6b65","restart":"\u91cd\u65b0\u5f00\u59cb","undo_{X}_moves":"\u64a4\u9500 {X} \u6b65","tap_to_see_the_tubes":"\u70b9\u51fb\u67e5\u770b\u73bb\u7483\u7ba1","loading_ads":"\u6b63\u5728\u52a0\u8f7d\u5e7f\u544a...","loading":"\u6b63\u5728\u52a0\u8f7d...","no_ads_to_display":"\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u5e7f\u544a","sorry_no_rewards_you_have_cancelled_the_ad":"\u62b1\u6b49\uff0c\u6ca1\u6709\u5956\u52b1\uff01\\n\u60a8\u5df2\u53d6\u6d88\u4e86\u5e7f\u544a\uff01","keep_playing":"\u7ee7\u7eed\u6e38\u620f","out_of_lives":"\u751f\u547d\u8017\u5c3d","next_life":"\u4e0b\u8f88\u5b50","full":"\u6ee1\u7684","fast_pour":"\u5feb\u901f\u503e\u5012","refill_lives":"\u8865\u5145\u751f\u547d","start_over":"\u91cd\u6765","can_not_load_new_level":"\u65e0\u6cd5\u52a0\u8f7d\u65b0\u5173\u5361\uff01","can_not_load_new_level_please_restart_game":"\u65e0\u6cd5\u52a0\u8f7d\u65b0\u5173\u5361\uff01\\n\u8bf7\u91cd\u65b0\u542f\u52a8\u6e38\u620f\u3002","leaderboard_is_empty":"\u6392\u884c\u699c\u662f\u7a7a\u7684\uff01","congratulation":"\u795d\u8d3a","you_have_pass_all_levels":"\u4f60\u5df2\u7ecf\u901a\u8fc7\u4e86\u6240\u6709\u5173\u5361\u3002","please_come_back_later":"\u8bf7\u7a0d\u540e\u56de\u6765\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u66f4\u65b0\uff01","ranks":"\u6392\u540d","confirmation":"\u786e\u8ba4","are_you_sure_to_start_over":"\u60a8\u786e\u5b9a\u8981\u91cd\u65b0\u5f00\u59cb\u5417\uff1f","you_will_play_the_game_again":"\u60a8\u5c06\u4ece\u7b2c 1 \u7ea7\u5f00\u59cb\u91cd\u65b0\u73a9\u6e38\u620f\u3002","no":"\u4e0d","yes":"\u662f\u7684"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),hi:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It - \u0935\u093e\u091f\u0930 \u0938\u0949\u0930\u094d\u091f \u092a\u091c\u093c\u0932","water_sort_puzzle":"\u0935\u093e\u091f\u0930 \u0938\u0949\u0930\u094d\u091f \u092a\u091c\u093c\u0932","level":"\u0932\u0947\u0935\u0932","score":"\u0938\u094d\u0915\u094b\u0930","settings":"\u0938\u0947\u091f\u093f\u0902\u0917","sound":"\u0938\u093e\u0909\u0902\u0921","vibrate":"\u0935\u093e\u0907\u092c\u094d\u0930\u0947\u091f","on":"\u091a\u093e\u0932\u0942 \u0915\u0930\u0947\u0902","off":"\u092c\u0902\u0926 \u0915\u0930\u0947\u0902","leaderboards":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921","play":"\u0916\u0947\u0932\u0947\u0902","completed":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","next":"\u0905\u0917\u0932\u093e","out_of_moves":"\u0915\u094b\u0908 \u091a\u093e\u0932 \u0928\u0939\u0940\u0902 \u092c\u091a\u0940 \u0939\u0948","watch_video_to_skip_this_level":"\u0907\u0938 \u0932\u0947\u0935\u0932 \u0915\u094b \u091b\u094b\u095c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0935\u093f\u0921\u093f\u092f\u094b \u0926\u0947\u0916\u0947\u0902","watch_video_to_undo_{X}_moves":"{X} \u091a\u093e\u0932\u094b\u0902 \u0915\u094b \u092b\u093f\u0930 \u0938\u0947 \u091a\u0932\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0935\u0940\u0921\u093f\u092f\u094b \u0926\u0947\u0916\u0947\u0902","restart":"\u0930\u0940\u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0915\u0930\u0947\u0902","undo_{X}_moves":"\u092a\u0942\u0930\u094d\u0935\u0935\u0924 \u0915\u0930\u0947\u0902 {X} \u091a\u093e\u0932\u0947\u0902","tap_to_see_the_tubes":"\u091f\u094d\u092f\u0942\u092c \u0926\u0947\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u091f\u0948\u092a \u0915\u0930\u0947\u0902","loading_ads":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","loading":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948\u0902...","no_ads_to_display":"\u0926\u093f\u0916\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u094b\u0908 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902","sorry_no_rewards_you_have_cancelled_the_ad":"\u0915\u094d\u0937\u092e\u093e \u0915\u0930\u0947\u0902, \u0915\u094b\u0908 \u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!\\n\u0906\u092a\u0928\u0947 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0915\u0948\u0902\u0938\u0932 \u0915\u0930 \u0926\u093f\u092f\u093e \u0939\u0948!","keep_playing":"\u0916\u0947\u0932\u0924 \u0930\u0939\u094b","out_of_lives":"\u091c\u0940\u0935\u0928 \u0938\u0947 \u092c\u093e\u0939\u0930","next_life":"\u0905\u0917\u0932\u093e \u091c\u0940\u0935\u0928","full":"\u092d\u0930\u093e \u0939\u0941\u0906","fast_pour":"\u0924\u0947\u091c\u0940 \u0938\u0947 \u0921\u093e\u0932\u0928\u093e","refill_lives":"\u092b\u093f\u0930 \u0938\u0947 \u092d\u0930\u0928\u093e\\n\u0932\u093e\u0907\u0935\u094d\u0938","start_over":"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930\u0947\u0902","can_not_load_new_level":"\u0928\u092f\u093e \u0938\u094d\u0924\u0930 \u0932\u094b\u0921 \u0928\u0939\u0940\u0902 \u0915\u0930 \u0938\u0915\u0924\u093e!","can_not_load_new_level_please_restart_game":"\u0928\u092f\u093e \u0938\u094d\u0924\u0930 \u0932\u094b\u0921 \u0928\u0939\u0940\u0902 \u0915\u0930 \u0938\u0915\u0924\u093e!\\n\u0915\u0943\u092a\u092f\u093e \u0916\u0947\u0932 \u092a\u0941\u0928\u0903 \u0906\u0930\u0902\u092d \u0915\u0930\u0947\u0902\u0964","leaderboard_is_empty":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921 \u0916\u093e\u0932\u0940 \u0939\u0948!","congratulation":"\u092c\u0927\u093e\u0908","you_have_pass_all_levels":"\u0906\u092a\u0928\u0947 \u0938\u092d\u0940 \u0938\u094d\u0924\u0930\u094b\u0902 \u0915\u094b \u092a\u093e\u0930 \u0915\u0930 \u0932\u093f\u092f\u093e \u0939\u0948\u0964","please_come_back_later":"\u0915\u0943\u092a\u092f\u093e \u092c\u093e\u0926 \u092e\u0947\u0902 \u0935\u093e\u092a\u0938 \u0906\u090f\u0902, \u0939\u092e \u091c\u0932\u094d\u0926 \u0939\u0940 \u0905\u092a\u0921\u0947\u091f \u0915\u0930\u0947\u0902\u0917\u0947!","ranks":"\u0930\u0948\u0902\u0915\u094b\u0902","confirmation":"\u0907\u0938\u0915\u0940 \u0938\u0942\u091a\u0928\u093e \u0926\u0947\u0928\u0947 \u0935\u093e\u0932\u093e","are_you_sure_to_start_over":"\u0915\u094d\u092f\u093e \u0906\u092a \u092b\u093f\u0930 \u0938\u0947 \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0939\u0948\u0902?","you_will_play_the_game_again":"\u0906\u092a \u0916\u0947\u0932 \u0915\u094b \u092b\u093f\u0930 \u0938\u0947 \u0936\u0941\u0930\u0941\u0906\u0924 \u0938\u0947, \u0938\u094d\u0924\u0930 1 \u092a\u0930 \u0916\u0947\u0932\u0947\u0902\u0917\u0947\u0964","no":"\u0928\u0939\u0940\u0902","yes":"\u0939\u093e\u0901"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),ar:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It \u2013 Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzze","level":"\u0645\u0633\u062a\u0648\u0649","score":"\u062f\u0631\u062c\u0629","settings":"\u0625\u0639\u062f\u0627\u062f\u0627\u062a","sound":"\u0635\u0648\u062a","vibrate":"\u0627\u0647\u062a\u0632","on":"\u062a\u0634\u063a\u064a\u0644","off":"\u0625\u064a\u0642\u0627\u0641","leaderboards":"\u0644\u0648\u062d\u0627\u062a \u0627\u0644\u0645\u062a\u0633\u0627\u0628\u0642\u064a\u0646","play":"\u0627\u0644\u0639\u0628","completed":"\u0627\u0643\u062a\u0645\u0644","next":"\u0627\u0644\u062a\u0627\u0644\u064a","out_of_moves":"\u0644\u0627 \u064a\u0648\u062c\u062f \u062d\u0631\u0643\u0627\u062a","watch_video_to_skip_this_level":"\u0634\u0627\u0647\u062f \u0627\u0644\u0641\u064a\u062f\u064a\u0648 \u0644\u062a\u062e\u0637\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u0648\u0649","watch_video_to_undo_{X}_moves":"\u0634\u0627\u0647\u062f \u0627\u0644\u0641\u064a\u062f\u064a\u0648\\n\u061c\u0644\u0644\u062a\u0631\u0627\u062c\u0639 {X} \u062d\u0631\u0643\u0627\u062a","restart":"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621","undo_{X}_moves":"\u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \\n \u061c {X} \u062d\u0631\u0643\u0627\u062a","tap_to_see_the_tubes":"\u0627\u0636\u063a\u0637 \u0644\u0631\u0624\u064a\u0629 \u0627\u0644\u0623\u0646\u0627\u0628\u064a\u0628","loading_ads":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646\u0627\u062a...","loading":"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...","no_ads_to_display":"\u0644\u0627 \u064a\u0648\u062c\u062f \u0625\u0639\u0644\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627","sorry_no_rewards_you_have_cancelled_the_ad":"\u0646\u0623\u0633\u0641\u060c \u0644\u0627 \u064a\u064f\u0648\u062c\u062f \u0645\u0643\u0627\u0641\u0622\u062a!\\n\u061c\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u0639\u0644\u0627\u0646!","keep_playing":"\u0627\u0633\u062a\u0645\u0631 \u0641\u064a \u0627\u0644\u0644\u0639\u0628","out_of_lives":"\u0646\u0641\u0627\u062f \u0627\u0644\u0623\u0631\u0648\u0627\u062d","next_life":"\u0627\u0644\u062d\u064a\u0627\u0629 \u0627\u0644\u0642\u0627\u062f\u0645\u0629","full":"\u0645\u0645\u062a\u0644\u0626","fast_pour":"\u0641\u0633\u0627\u062f \u0633\u0631\u064a\u0639","refill_lives":"\u0625\u0639\u0627\u062f\u0629 \u0645\u0644\u0621 \\n\u061c \u0627\u0644\u0623\u0631\u0648\u0627\u062d","start_over":"\u0627\u0628\u062f\u0623 \u0645\u0646 \u062c\u062f\u064a\u062f","can_not_load_new_level":"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0645\u0633\u062a\u0648\u0649 \u062c\u062f\u064a\u062f!","can_not_load_new_level_please_restart_game":"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0645\u0633\u062a\u0648\u0649 \u062c\u062f\u064a\u062f! \\n\u061c \u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0644\u0639\u0628\u0629.","leaderboard_is_empty":"\u0644\u0648\u062d\u0629 \u0627\u0644\u0635\u062f\u0627\u0631\u0629 \u0641\u0627\u0631\u063a\u0629!","congratulation":"\u062a\u0647\u0646\u0626\u0629","you_have_pass_all_levels":"\u0644\u0642\u062f \u0627\u062c\u062a\u0632\u062a \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0633\u062a\u0648\u064a\u0627\u062a.","please_come_back_later":"\u064a\u0631\u062c\u0649 \u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0627\u062d\u0642\u064b\u0627 \u060c \u0648\u0633\u0646\u0642\u0648\u0645 \u0628\u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0642\u0631\u064a\u0628\u064b\u0627!","ranks":"\u0645\u0631\u0627\u062a\u0628","confirmation":"\u062a\u0623\u0643\u064a\u062f","are_you_sure_to_start_over":"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u0628\u062f\u0621 \u0623\u0643\u062b\u0631 \u0645\u0646 \u0630\u0644\u0643\u061f","you_will_play_the_game_again":"\u0633\u062a\u0644\u0639\u0628 \u0627\u0644\u0644\u0639\u0628\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649 \u0645\u0646 \u0627\u0644\u0628\u062f\u0627\u064a\u0629 \u060c \u0641\u064a \u0627\u0644\u0645\u0633\u062a\u0648\u0649 1.","no":"\u0644\u0627","yes":"\u0646\u0639\u0645"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),tr:JSON.parse('{"Text":{"sort_it_water_sort_puzzle":"Sort It \u2013 Water Sort Puzzle","water_sort_puzzle":"Water Sort Puzze","level":"Seviye","score":"Skor","settings":"Ayarlar","sound":"Ses","vibrate":"Titret","on":"A\xe7\u0131k","off":"Kapal\u0131","leaderboards":"SKORBORDLAR","play":"OYNA","completed":"Tamamland\u0131","next":"Sonraki","out_of_moves":"HAMLE DI\u015eI","watch_video_to_skip_this_level":"BU SEV\u0130YEY\u0130 ATLAMAK \u0130\xc7\u0130N V\u0130DEOYU \u0130ZLE","watch_video_to_undo_{X}_moves":"{X} HAREKET\u0130 GER\u0130 ALMAK \u0130\xc7\u0130N V\u0130DEOYU \u0130ZLE","restart":"TEKRAR BA\u015eLAT","undo_{X}_moves":"GER\u0130 AL {X} HAREKET","tap_to_see_the_tubes":"T\xdcPLER\u0130 G\xd6RMEK \u0130\xc7\u0130N DOKUN","loading_ads":"Reklamlar y\xfckleniyor\u2026","loading":"Y\xfckleniyor\u2026","no_ads_to_display":"G\xf6r\xfcnt\xfclenecek reklam yok","sorry_no_rewards_you_have_cancelled_the_ad":"\xdczg\xfcn\xfcz, \xd6d\xfcl Yok!\\nReklam\u0131 iptal ettin!","keep_playing":"OYNAMAYA DEVAM ET","out_of_lives":"HAYAT DI\u015eINDA","next_life":"SONRAK\u0130 HAYAT","full":"TAM DOLU","fast_pour":"HIZLI D\xd6K\xdcM","refill_lives":"YEN\u0130LEY\u0130N\\nHAYATLAR","start_over":"BA\u015eTAN BA\u015eLAMAK","can_not_load_new_level":"Yeni seviye y\xfcklenemiyor!","can_not_load_new_level_please_restart_game":"Yeni seviye y\xfcklenemiyor!\\nL\xfctfen oyunu yeniden ba\u015flat\u0131n.","leaderboard_is_empty":"Lider tablosu bo\u015f!","congratulation":"TEBR\u0130K","you_have_pass_all_levels":"T\xfcm seviyeleri ge\xe7tiniz.","please_come_back_later":"L\xfctfen daha sonra tekrar gelin, yak\u0131nda g\xfcncelleyece\u011fiz!","ranks":"R\xfctbeler","confirmation":"ONAYLA","are_you_sure_to_start_over":"BA\u015eTAN BA\u015eLAYACA\u011eINIZDAN EM\u0130N M\u0130S\u0130N\u0130Z?","you_will_play_the_game_again":"Oyunu en ba\u015ftan, 1. seviyede tekrar oynayacaks\u0131n\u0131z.","no":"HAYIR","yes":"EVET"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}')},Yi=function(e){function t(){return e.apply(this,arguments)||this}return(0,Z.default)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,O.default)({data:Ki,locale:"en",upperCaseText:!1},t))},t}(Fi),Vi=Yi,zi=[Tn.AnalyticsEvents.SCREEN_OPEN],Hi=function(e){function t(t,n){var a;(a=e.call(this,"GoogleAnalytics",(0,O.default)({},n),"#E35335")||this).game=void 0,a.trackingId=void 0,a.currentPath="/";var i=n.trackingId;a.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return a.selfLog=!!r,a.trackingId=i,a}(0,Z.default)(t,e);var n=t.prototype;return n.processTrafficSource=function(e){},n.processEvent=function(e,t,n){if(!(zi.indexOf(e)>=0)){var a=this.formatEventName(e),i=t?(0,O.default)({},t):{};i=n?(0,O.default)({},i,{value:n}):i,i=(0,O.default)({},i,{page_path:this.currentPath,send_to:"GA"}),gtag("event",a,i)}},n.processLevelStart=function(e,t,n){this.processEvent(Tn.AnalyticsEvents.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Tn.AnalyticsEvents.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n,a){this.processEvent(Tn.AnalyticsEvents.LEVEL_END,(0,O.default)({level:e,score:t,level_name:n,success:!1},a))},n.processLevelComplete=function(e,t,n,a){this.processEvent(Tn.AnalyticsEvents.LEVEL_END,(0,O.default)({level:e,score:t,level_name:n,success:!0},a))},n.processShowInterstitialAd=function(e){this.processEvent(Tn.AnalyticsEvents.AD_SHOW,{ad_type:"interstitial",screen_name:""+e,level:this.game.level.getLevel()}),this.processEvent(Tn.AnalyticsEvents.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(e){this.processEvent(Tn.AnalyticsEvents.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e,level:this.game.level.getLevel()}),this.processEvent(Tn.AnalyticsEvents.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Tn.AnalyticsEvents.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t,level:this.game.level.getLevel()})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Di(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},t}(GameCore.Analytics.BaseAnalytics),Wi=Hi,ji="G-B9HEEX7W5S",Xi="UA-214409348-4",qi=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).startGame=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.auth.requestToken();case 3:t.storage.syncStore(),t.configureSentry(),t.configureRollbar(),t.detectGameMode(),t.initAnalytics(),t.analytics.event(Tn.AnalyticsEvents.LOAD_START),t.setTrafficSourceAnalytics(),t.scene.launch(Gi.SceneKeys.GLOBAL_SCENE),t.scene.start(Gi.SceneKeys.LOAD_SCENE),t.analytics.pageview(Gi.SceneKeys.LOAD_SCENE),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 18:return e.prev=18,t.facebook.progressLoading.finishLoadingProgressFbBootScene(),t.scene.sleep(Gi.SceneKeys.BOOT_SCENE),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[0,15,18,22]])}))),t}(0,Z.default)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,j.setSentryUser)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){this.storage.dispatch((function(e,t){var n=t(),a=Oi(n),i=window.game.player.getPlayerId(),r=a.contextId,s=a.entryPointData||{},o=s.type,c=s.matchId,u=s.playerId,l=s.opponentId,h=void 0===l?xi.playerId:l,d=s.tournamentContextId,f=i===u,p=h===xi.playerId||[h,u].indexOf(i)>=0,g=_i;!r||void 0!==o&&o!==Ti||(g=Li),o===Ti&&d&&(g=Li),r&&o===bi&&!f&&(g=Pi),c&&r&&p&&o===wi&&(g=Pi),r&&o===Ci&&(g=ki),e(Bi(g))}))},n.initAnalytics=function(){var e=this.player.getPlayerId();this.analytics.add(new Wi(this.game,{userId:e,trackingId:Xi,measuringId:ji,version:"124"}))},n.setTrafficSourceAnalytics=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPlayerFirstVisitEntryPoint();case 3:t=e.sent,this.analytics.setTrafficSource(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.getPlayerFirstVisitEntryPoint=function(){var e=(0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getDataAsync(["entry_point"]);case 2:if(t=e.sent,n=t.entry_point?t.entry_point:null){e.next=9;break}return e.next=7,GameSDK.getEntryPointAsync();case 7:n=e.sent,GameSDK.player.setDataAsync({entry_point:n}).catch();case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Scene),Zi=qi,Qi=n(28),Ji=n(11),$i=n(8),er=n(2),tr=n(1),nr=tr.default.DEFAULT,ar=nr.KEY,ir=nr.FRAME,rr=function(e){function t(t,n){var a;return(a=e.call(this,t,ar,ir.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=ir.BLANK,t=ir.BLANK,n=ir.BLANK,a=ir.BLANK,i=1/this.scene.world.getPixelRatio(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,a],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*i,max:2*i},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},s=(0,D.merge)(r,this.config);this.emitter=this.createEmitter(s)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),sr=rr,or="global",cr="friend",ur=GameCore.Configs,lr=ur.ApiHost,hr=ur.OtherHost,dr=ur.LeadersBoard,fr=dr.Prefix,pr=dr.LeaderboardId,gr=dr.Name,vr=fr+"/"+pr+"/leaders",mr=fr+"/"+pr+"/players",yr=function(e){var t="";return pr?(e===or?t=vr:e===cr&&(t=mr),t):t},Er=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),i=GameCore.Utils.String.params({playerIds:n}),e.next=5,it("players?"+i,{},lr);case 5:return r=e.sent,s=r.data.map((function(e){var t=a[e.playerId];return(0,O.default)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sr=function(){var e=(0,q.default)(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==pr){e.next=3;break}return e.abrupt("return",Ar(t));case 3:return e.abrupt("return",br(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ar=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],a=yr(or)){e.next=5;break}return e.abrupt("return",n);case 5:return i=GameCore.Utils.String.params(t),e.next=8,it(a+"?"+i,{},hr);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Er(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),a=(n=t).limit,i=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(gr);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(a,i);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tr=function(){var e=(0,q.default)(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==pr){e.next=3;break}return e.abrupt("return",wr(t));case 3:return e.abrupt("return",Cr(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wr=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],a=yr(cr)){e.next=5;break}return e.abrupt("return",n);case 5:return i=GameCore.Utils.String.params(t),e.next=8,it(a+"?"+i,{},hr);case 8:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=s,e.abrupt("return",Er(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cr=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),a=(n=t).limit,i=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(gr);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(a,i);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ir=function(){var e=(0,q.default)(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==pr){e.next=2;break}return e.abrupt("return",xr(t));case 2:return e.abrupt("return",_r());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(a=yr(cr)){e.next=6;break}return e.abrupt("return",n);case 6:return i=GameCore.Utils.String.params({playerIds:t}),e.next=9,it(a+"?"+i,{},hr);case 9:if(r=e.sent,!((s=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return n=Er(s)[0],e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_r=function(){var e=(0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(gr);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pr=function(){var e=(0,q.default)(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==pr){e.next=2;break}return e.abrupt("return",kr(t,n));case 2:return e.abrupt("return",Lr(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),kr=function(){var e=(0,q.default)(J().mark((function e(t,n){var a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt("leaderboards/"+pr+"/players/"+t,{score:n},{},hr);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Lr=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(gr);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Rr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Or(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Dr=W.Configs.LeadersBoard,Mr=function(e,t,n,a){return void 0===n&&(n=Dr.LeaderBoardLimit),void 0===a&&(a=0),function(){var i=(0,q.default)(J().mark((function i(r,s){var o,c,u,l,h,d,f,p,g,v,m,y,E,S;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,o=window.game,c=o.player,o.profile,s(),c.getPlayerId(),r({type:Ua,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!Dr.UseMock){i.next=11;break}return i.next=8,(0,Ze.sleepAsync)(1e3);case 8:return u=new Array(n).fill(null).map((function(e,t){var n=(t+1)*(a+1);return{playerId:"0"+n,name:"MPlayer asd asd asdas dasd asdasd asd asd as "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e4*Math.random())}})),r(Br(u,t)),i.abrupt("return");case 11:if(l=[],t!==or){i.next=18;break}return i.next=15,Sr({limit:n,offset:a});case 15:l=i.sent,i.next=22;break;case 18:if(t!==cr){i.next=22;break}return i.next=21,Tr({limit:n});case 21:l=i.sent;case 22:for(h={},d=Rr(l);!(f=d()).done;)p=f.value,g=p.playerId,v=p.score,m=p.rank,y=p.getPlayer(),E=y.getPhoto(),S=y.getName(),h[g]={playerId:g,name:S,photo:E,score:v,rank:m};r(Br(h,t)),i.next=31;break;case 27:i.prev=27,i.t0=i.catch(0),r(Br([],t)),(0,j.sendException)(i.t0);case 31:case"end":return i.stop()}}),i,null,[[0,27]])})));return function(e,t){return i.apply(this,arguments)}}()},Br=function(e,t){return{type:Ga,payload:{leaders:e,type:t}}},Nr=function(e){return e.leaderboards},Ur=((0,Le.createSelector)([function(e){return Nr(e).leaderboardId}],(function(e){return e})),(0,Le.createSelector)([function(e){return Nr(e).limit}],(function(e){return e})),(0,Le.createSelector)([function(e){return Nr(e).offset}],(function(e){return e})),(0,Le.createSelector)([function(e){return Nr(e).leaders}],(function(e){return e}))),Gr=((0,Le.createSelector)([function(e){return Nr(e).type}],(function(e){return e})),(0,Le.createSelector)([function(e){return Nr(e).isRequesting}],(function(e){return e}))),Fr=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidContextId",a.message=t||"This contextId is not valid",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Kr=Fr,Yr=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="NewScoreIsBad",a.message=t||"The new score is bad",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Vr=Yr,zr=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidOpponentId",a.message=t||"This opponentId is not valid",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Hr=zr,Wr=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="WideFrameRenderFail",a.message=t||"Wide frame render fail",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),jr=Wr,Xr={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},qr=function(e){return e.match},Zr=function(e,t){return t.playerId},Qr=((0,Le.createSelector)([function(e){return qr(e).match.isRequesting}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).match.single}],(function(e){return e}))),Jr=(0,Le.createSelector)([function(e){return qr(e).match.single._id}],(function(e){return e})),$r=(0,Le.createSelector)([function(e){return qr(e).match.single.score}],(function(e){return e||0})),es=((0,Le.createSelector)([function(e){return qr(e).match.single.level}],(function(e){return e||0})),(0,Le.createSelector)([function(e){var t;return null==(t=qr(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,Le.createSelector)([function(e){var t;return null==(t=qr(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,Le.createSelector)([function(e){return qr(e).match.single.status}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).match.single.playerId}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).match.challenge}],(function(e){return e}))),ts=(0,Le.createSelector)([function(e){return qr(e).match.challenge._id}],(function(e){return e})),ns=(0,Le.createSelector)([function(e){return qr(e).match.challenge.status}],(function(e){return e})),as=(0,Le.createSelector)([function(e){return qr(e).match.challenge.opponentInfo}],(function(e){return e})),is=((0,Le.createSelector)([function(e){return qr(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,Le.createSelector)([es,Zr],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId;return n!==t&&a===t?n:a!==t&&n===t?a:""})),(0,Le.createSelector)([es,Zr],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId;return n===t?n:a===t?a:xi.playerId}))),rs=(0,Le.createSelector)([es,Zr],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId,i=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?i:!(!t||a!==t)&&r})),ss=(0,Le.createSelector)([es,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId,i=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?i:!(!t||a!==t)&&r})),os=(0,Le.createSelector)([function(e){return qr(e).match.group.opponentInfo}],(function(e){return e})),cs=((0,Le.createSelector)([function(e){return qr(e).match.online.players}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).stats.data}],(function(e){return e}))),us=(0,Le.createSelector)([function(e){return qr(e).stats.current}],(function(e){return e})),ls=((0,Le.createSelector)([function(e){return qr(e).stats.isRequesting}],(function(e){return e})),(0,Le.createSelector)([function(e){return e.messages.data}],(function(e){return e}))),hs=(0,Le.createSelector)([ls,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),ds=n(50),fs=n.n(ds),ps=new(fs()),gs=ps,vs=function(e){if("string"!==typeof e||!e)throw new jr(null,{imageShare:e})},ms=function(){return(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,r=t.globalScene,e.prev=1,r.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,ys();case 5:return s=e.sent,vs(s),o=n.getPlayer(),c=o.playerId,u=o.name,l=o.photo,e.next=10,i.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:s||"",data:{playerId:c,playerName:u,playerPhoto:l,type:bi}});case 10:a.event(Tn.AnalyticsEvents.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Tn.AnalyticsEvents.SHARE,{share_content_type:"BestScore",success:!1}),(0,j.sendException)(e.t0);case 17:return e.prev=17,r.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},ys=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,a=t.globalScene,i=n.getPlayer(),r=i.playerId,s=i.photo,i.data,o=n.getBestScore(),c=Ss({playerId:r,playerPhoto:s,playerScore:o})){e.next=7;break}return e.abrupt("return");case 7:return u={name:"share-best-score",width:952,height:492,renderOptions:c},e.next=10,a.frameCapture.capture(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Es=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,a=n.player,i=n.globalScene,r=a.getPlayer(),s=r.playerId,o=r.photo,c=a.getLevel(),u=Ss({playerId:s,playerPhoto:o,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return l={name:"share-current-score",width:952,height:492,renderOptions:u},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ss=function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof i||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:80,y:104,image:i,width:228,height:228,fallbackWithImage:Ii.default.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},bestText:{type:"text",x:194,y:400,font:"600 70px",fillStyle:"#ffffff",text:"BEST",textAlign:"center"},playerScore:{type:"text",x:194,y:470,font:"600 70px",fillStyle:"#ffffff",text:""+s,textAlign:"center"}}},As=function(){return(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,r=t.globalScene,e.prev=1,r.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,bs();case 5:return s=e.sent,vs(s),o=n.getPlayer(),c=o.playerId,u=o.name,l=o.photo,e.next=10,i.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:s||"",data:{playerId:c,playerName:u,playerPhoto:l,type:bi}});case 10:a.event(Tn.AnalyticsEvents.SHARE,{share_content_type:"Leaderboard",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Tn.AnalyticsEvents.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,j.sendException)(e.t0);case 17:return e.prev=17,r.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},bs=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c,u,l,h,d,f,p,g,v,m,y,E,S;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.profile,i=t.globalScene,r=n.getPlayer(),s=r.playerId,o=r.name,c=r.photo,(u=n.getConnectedPlayerIds(99,0)).push(s),l=[],e.next=7,Tr({playerIds:GameCore.Utils.Array.unique(u),limit:u.length});case 7:h=e.sent,d=GameCore.Utils.Object.keyBy(h,"playerId"),f={playerId:s,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(d,s)&&(f=d[s]),l.push(f),e.t0=J().keys(d);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(p=e.t1.value,!GameCore.Utils.Object.hasOwn(d,p)){e.next=25;break}if(g=d[p],3!==l.length){e.next=20;break}return e.abrupt("break",27);case 20:if(g.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(g.score)>Number(f.score))){e.next=24;break}return e.abrupt("continue",14);case 24:l.push(g);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(u),e.next=30,a.requestProfiles(v);case 30:if(m=a.getProfiles(),l.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(m,n)){var a=m[n],i=a.name,r=a.photo;l[t].name=i,l[t].photo=r}})),l.length<3)for(y=0;y<=3-l.length;)l.push({playerId:"bot"+y,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),y++;if(E=Ts({playerId:s,playerName:o,playerPhoto:c,listLeaders:l})){e.next=37;break}return e.abrupt("return");case 37:return S={name:"share-leaderboard",width:1500,height:2e3,renderOptions:E},e.next=40,i.frameCapture.capture(S);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ts=function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof i)return null;var o={avatar:{name:""+n,type:"image",x:458,y:310,image:i,width:590,height:600,fallbackWithImage:Ii.default.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,a=e.photo;o["photo_"+n]={name:""+n,type:"image",x:442,y:1256+154*t,image:a,width:110,height:110,fallbackWithImage:Ii.default.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,a=e.name,i=e.score;o["name_"+n]={type:"text",x:650,y:1330+154*t,font:"600 48px",text:a,fillStyle:"#ffffff"},o["score_"+n]={type:"text",x:1e3,y:1330+154*t,font:"600 48px",text:i,fillStyle:"#ffffff"}})),o},ws=function(){return function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,i=a.player,r=a.analytics,s=a.facebook,o=a.globalScene,e.prev=1,o.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),c=n(),e.next=6,Cs(c);case 6:return u=e.sent,vs(u),l=i.getPlayer(),h=l.playerId,d=l.name,f=l.photo,e.next=11,s.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:u||"",data:{playerId:h,playerName:d,playerPhoto:f,type:bi}});case 11:r.event(Tn.AnalyticsEvents.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),r.event(Tn.AnalyticsEvents.SHARE,{share_content_type:"MatchResult",success:!1}),(0,j.sendException)(e.t0);case 18:return e.prev=18,o.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},Cs=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o,c,u,l,h,d,f,p,g,v,m,y,E;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,a=n.player,i=n.globalScene,cs(t),r=a.getPlayer(),s=r.photo,o=r.playerId,c=as(t),u=c.playerId,l=c.photo,h=rs(t,{playerId:o}),d=ss(t,{opponentId:u}),f=a.getPlayer().data.score,p=window.game.profile,e.next=10,p.requestProfiles([u]);case 10:if(g=p.getProfiles(),v=g[u],m=v.score,y=xs({playerId:o,playerPhoto:s,playerScore:f,opponentId:u,opponentPhoto:l,opponentScore:m,isPlayerFinished:h,isOpponentFinished:d})){e.next=17;break}return e.abrupt("return");case 17:return E={name:"share-game-result",width:952,height:492,renderOptions:y},e.next=20,i.frameCapture.capture(E);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Is=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o,c,u,l,h,d,f,p,g,v;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,a=n.player,i=n.globalScene,r=cs(t),s=a.getPlayer(),o=s.photo,c=s.playerId,u=os(t),l=u.playerId,h=u.photo,d=u.score,f=r[c]||{},p=f.score,g=xs({playerId:c,playerPhoto:o,playerScore:p,opponentId:l,opponentPhoto:h,opponentScore:d})){e.next=9;break}return e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:g},e.next=12,i.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xs=function(e){var t=e.playerId,n=void 0===t?"10":t,a=e.playerPhoto,i=void 0===a?"":a,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,f=e.isPlayerFinished,p=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof i)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof f)return null;if("boolean"!==typeof p)return null;var g=!f,v={leftPhoto:{name:""+n,type:"image",x:60,y:102,image:i,width:200,height:200,fallbackWithImage:Ii.default.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:706,y:102,image:l,width:200,height:200,fallbackWithImage:Ii.default.AVATAR.KEY},wideFrame:{name:"wide-frame",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-finished.png",width:952,height:492}};return g&&(v.wideFrame={name:"wide-frame",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-invite.png",width:952,height:492}),v.leftScore={type:"text",x:156,y:400,font:"600 70px",fillStyle:"#ffffff",text:f?""+s:"???",textAlign:"center"},v.rightScore={type:"text",x:820,y:400,font:"600 70px",fillStyle:"#ffffff",text:"???",textAlign:"center"},v},_s=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Kr(null,{contextId:t})},Ps=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Hr(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new Kr(null,{contextId:n})},ks=function(e){if(null===e.imageShare)throw new jr},Ls=function(e,t){return void 0===t&&(t=!0),function(n,a){var i,r=a(),s=ls(r);if(t){var o;if(null!=(o=s[e])&&o.sent)return;n(Rs(e))}null!=(i=s[e])&&i.sent&&n(Os(e))}},Rs=function(e){return{type:On.MESSAGES_SENT_UPDATE,payload:{opponentId:e}}},Os=function(e){return{type:On.MESSAGES_SENT_REMOVE,payload:{opponentId:e}}},Ds=function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,Ps({opponentId:t,contextId:n}),(i=FBInstant.context.getID())!==n||""===n){e.next=6;break}return e.abrupt("return",i);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",FBInstant.context.getID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Ms=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s,o,c,u,l,h,d,f,p,g,v;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,s=r.player,o=r.analytics,c=r.facebook,n.prev=1,u=t.matchId,l=t.contextId,n.next=5,Ds(e,l);case 5:return h=n.sent,_s({contextId:h}),d=i(),n.next=10,Cs(d);case 10:return f=n.sent,ks({imageShare:f}),p=s.getPlayer(),g=p.name,v=p.playerId,n.next=15,c.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:g+" challenges you",localizations:{en_US:g+" challenges you",vi_VN:g+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:f||"",template:"challenge",data:{type:wi,matchId:u,playerId:v,opponentId:e,status:xa}});case 15:a(Ls(e)),o.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"Invite",success:!0}),gs.emit(Xr.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),o.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"Invite",success:!1}),(0,j.sendException)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Bs=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s,o,c,u,l,h,d,f,p,g,v,m,y,E,S;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,s=r.player,o=r.analytics,c=r.facebook,n.prev=1,u=t.matchId,l=t.contextId,n.next=5,Ds(e,l);case 5:return h=n.sent,_s({contextId:h}),d=i(),n.next=10,Cs(d);case 10:return f=n.sent,ks({imageShare:f}),p=s.getPlayer(),g=p.name,v=p.playerId,m=cs(d),y=m[v]||{},E=y.score,S=void 0===E?0:E,n.next=17,c.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:g+" beat your high score. Their score: "+S,localizations:{en_US:g+" beat your high score. Their score: "+S,vi_VN:g+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+S+" \u0111i\u1ec3m!"}},image:f||"",template:"pass_score",data:{type:wi,matchId:u,playerId:v,opponentId:e,status:_a}});case 17:a(Ls(e)),o.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),o.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,j.sendException)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},Ns=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s,o,c,u,l,h,d,f,p,g,v,m;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,s=r.player,o=r.analytics,c=r.facebook,n.prev=1,u=t.matchId,l=t.contextId,h=t.score,n.next=5,Ds(e,l);case 5:return d=n.sent,_s({contextId:d}),f=i(),n.next=10,Cs(f);case 10:return p=n.sent,ks({imageShare:p}),g=s.getPlayer(),v=g.name,m=g.playerId,n.next=15,c.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:v+" got "+h+" scores. So easy! Can you?",localizations:{en_US:v+" got "+h+" scores. So easy! Can you?",vi_VN:v+" \u0111\xe3 \u0111\u1ea1t "+h+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:p||"",template:"play_turn",data:{type:wi,matchId:u,playerId:m,opponentId:e,status:xa}});case 15:a(Ls(e)),o.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(1),o.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof Kr)){n.next=24;break}return n.abrupt("return");case 24:(0,j.sendException)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e,t){return n.apply(this,arguments)}}()},Us=function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,i=a.player,r=a.facebook,s=i.getPlayer(),o=s.playerId,c=s.name,u=s.photo,l=us(n),h=l.score,d={type:Ci,playerId:o,playerName:c,playerPhoto:u,playerScore:h},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:c+" beats your high score. Their score: "+h+".",localizations:{en_US:c+" beats your high score. Their score: "+h+".",vi_VN:c+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:d});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Gs=function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,i=a.player,r=a.facebook,e.prev=1,s=i.getPlayer(),o=s.playerId,c=s.name,u=s.photo,l=us(n),h=l.score,d={type:Ci,playerId:o,playerName:c,playerPhoto:u,playerScore:h},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:c+" got "+h+" scores. So easy! Can you?",localizations:{en_US:c+" got "+h+" scores. So easy! Can you?",vi_VN:c+" \u0111\xe3 \u0111\u1ea1t "+h+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:d});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,j.sendException)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Fs=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidMatchId",a.message=t||"Invalid match id",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Ks=(0,Le.createSelector)([function(e){return qr(e).gameplay.mode}],(function(e){return e})),Ys=((0,Le.createSelector)([function(e){return qr(e).gameplay.status}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).gameplay.rescued}],(function(e){return e})),(0,Le.createSelector)([function(e){return qr(e).gameplay.startAt}],(function(e){return e}))),Vs=(0,Le.createSelector)([function(e){return qr(e).gameplay.finishAt}],(function(e){return e})),zs=GameCore.Configs.ApiHost,Hs=(function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,rt("single-matches",t,{},zs);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,it("single-matches/active",{},zs);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="single-matches/"+t+"/move",e.next=3,rt(a,n,{},zs);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,rt(n,{},{},zs);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,rt("matches",{opponentPlayerId:t},{},zs);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ws=function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,rt(n,{},{},zs);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),js=function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,it(n,{},zs);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xs=function(){var e=(0,q.default)(J().mark((function e(t,n,a,i){var r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="matches/"+t+"/finish",e.next=3,rt(r,{matchId:t,score:n,level:a,extraData:i},{},zs);case 3:return s=e.sent,e.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),qs=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidMatchStatus",a.message=t||"The match status is not valid",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Zs=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidOpponentId",a.message=t||"Invalid opponent id",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Qs=Zs,Js=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidBlackPlayerId",a.message=t||"Invalid black player id",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),$s=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidRequestedMatchId",a.message=t||"The matchId in match data not matched with requested matchId",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),eo=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidScore",a.message=t||"The score is not valid",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),to=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="InvalidWhitePlayerId",a.message=t||"Invalid white player id",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),no=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Fs(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Fs(null,{currentMatchId:n});if(t!==n)throw new $s(null,{matchId:t,currentMatchId:n})},ao=function(e){var t=e.playerId,n=e.match,a=n._id,i=n.playerId,r=n.status;if(""===a||"string"!==typeof a)throw new Fs(null,{matchId:a});if("finished"===r||"string"!==typeof r)throw new qs("This match is finished",{status:r});if(i!==t)throw new Ai(null,{playerId:i,currentPlayerId:t})},io=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new Qs(null,{opponentId:t})},ro=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Fs(null,{matchId:t})},so=function(e){var t=e.match,n=t._id,a=t.whitePlayerId,i=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Fs(null,{matchId:n});if(""===a||"string"!==typeof a)throw new to(null,{whitePlayerId:a});if(""===i||"string"!==typeof i)throw new Js(null,{blackPlayerId:i})},oo=GameCore.Configs.Match,co=function(e){try{return GameCore.Utils.Hash.stringToHash(JSON.stringify(e))}catch(t){return""}},uo=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},lo=function(){return function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,n.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),t({type:ca,payload:{}}),i=a.getPlayerId(),r=(0,O.default)({},oo.LocalSingleMatchDefault,{status:"active",playerId:i,startedAt:Date.now()}),ao({playerId:i,match:r}),t(po(r)),je(oo.SingleMatchStore,r),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(po(null)),!(e.t0 instanceof Fs)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof qs)){e.next=18;break}return e.abrupt("return");case 18:(0,j.sendException)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ho=function(e,t){return function(n,a){try{!function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new Fs(null,{matchId:t});if("number"!==typeof n)throw new eo(null,{score:n})}((0,O.default)({matchId:e},t));var i=a(),r=Jr(i);!function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Fs(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Fs(null,{currentMatchId:n});if(t!==n)throw new $s(null,{matchId:t,currentMatchId:n})}({matchId:e,currentMatchId:r}),n({type:la,payload:{match:t}});var s=t.data;t.data=co(s),je(oo.SingleMatchStore,t)}catch(o){if(o instanceof Fs)return;(0,j.sendException)(o)}}},fo=function(e){return function(){var t=(0,q.default)(J().mark((function t(n,a){var i,r,s,o,c,u,l,h;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=window.game.player,ro({matchId:e}),r=a(),s=Jr(r),o=i.getPlayerId(),no({matchId:e,currentMatchId:s}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),c=Qr(r),ao({playerId:o,match:c}),u=(0,O.default)({},oo.LocalSingleMatchDefault,c,{_id:e,status:"finished",playerId:o,finishAt:Date.now()}),n(po(u)),l=u.data,(h=(0,O.default)({},u)).data=co(l),je(oo.SingleMatchStore,h),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(po(null)),!(t.t0 instanceof Fs)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof qs)){t.next=25;break}return t.abrupt("return");case 25:(0,j.sendException)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},po=function(e){return{type:ha,payload:{match:e}}},go=function(){return{type:da,payload:{}}},vo=function(e){return function(){var t=(0,q.default)(J().mark((function t(n){var a,i,r,s;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,i=a.profile,a.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),r=e.playerId,io({opponentId:r}),n({type:pa,payload:{opponentInfo:e}}),t.next=8,Hs(r);case 8:return s=t.sent,so({match:s}),t.next=12,i.requestProfiles([r]);case 12:n(So(s)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(So(null)),!(t.t0 instanceof Fs)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof Qs)){t.next=22;break}return t.abrupt("return");case 22:(0,j.sendException)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},mo=function(e){return function(){var t=(0,q.default)(J().mark((function t(n){var a,i,r,s,o,c,u,l,h;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,i=a.player,r=a.profile,a.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),ro({matchId:e}),n({type:fa,payload:{matchId:e}}),t.next=7,Ws(e);case 7:if(s=t.sent,so({match:s}),o=s.status,c=s.whitePlayerId,u=s.blackPlayerId,o!==xa){t.next=16;break}return l=i.getPlayerId(),h=l===c?u:c,t.next=16,r.requestProfiles([h]);case 16:n(So(s)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(So(null)),!(t.t0 instanceof Fs)){t.next=24;break}return t.abrupt("return");case 24:(0,j.sendException)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},yo=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a){var i,r,s,o,c,u,l,h,d;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=window.game,r=i.player,i.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),ro({matchId:e}),a({type:va,payload:{matchId:e,opponentInfo:t}}),n.next=7,js(e);case 7:s=n.sent,so({match:s}),o=s.whitePlayerId,c=s.whitePlayerScore,u=s.blackPlayerScore,l=r.getPlayerId(),h=r.getPlayerData(),d=h.score,a(So(s,{score:l===o?c:u,bestScore:d})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(So(null)),!(n.t0 instanceof Fs)){n.next=22;break}return n.abrupt("return");case 22:(0,j.sendException)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},Eo=function(e,t,n){return function(){var a=(0,q.default)(J().mark((function a(i){var r,s;return J().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,window.game.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),ro({matchId:e}),i({type:ga,payload:{matchId:e,score:t,extraData:n}}),r=n.level,a.next=8,Xs(e,t,r,n);case 8:return s=a.sent,so({match:s}),a.next=12,i(So(s));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),i(So(null)),!(a.t0 instanceof Fs)){a.next=19;break}return a.abrupt("return");case 19:(0,j.sendException)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},So=function(e,t,n){return void 0===n&&(n=null),{type:ma,payload:{match:e,opponentInfo:t,current:n}}},Ao=function(e){return{type:Ea,payload:{opponentInfo:e}}},bo=function(e,t){return{type:ba,payload:{matchId:e,players:t}}},To=function(e){return{type:ra,payload:{playerId:e}}},wo=function(e,t){return{type:sa,payload:{playerId:e,stats:t}}},Co=function(e){return{type:oa,payload:{stats:e}}},Io=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Kr(null,{contextId:t})},xo=null,_o=function(e){clearTimeout(xo),xo=setTimeout((function(){window.game.globalScene.screen.close($i.ScreenKeys.NOTIFY_SCREEN)}),e)},Po=function(){return function(e){try{e(go()),e(Uo(Li))}catch(t){(0,j.sendException)(t)}}},ko=function(){return function(e){try{e(go()),e(Uo(_i))}catch(t){(0,j.sendException)(t)}}},Lo=function(){return function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.game.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),a=n(),i=Ks(a),[_i,Li].indexOf(i)>=0&&(t(go()),t(lo())),r=null,i===Pi&&(r=as(a),t({type:ya,payload:{}})),t(To()),e.next=11,t(Uo(i,r));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 16:return e.prev=16,_o(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()},Ro=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(){var n=(0,q.default)(J().mark((function n(a){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{a(Oo("reset",e,t))}catch(i){(0,j.sendException)(i)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Oo=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,q.default)(J().mark((function a(i){var r,s,o,c,u,l,h,d,f,p,g,v,m,y,E,S,A;return J().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=window.game,s=r.player,o=r.facebook,(c=r.globalScene).screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),u=e,l=o.contextType,t||(h=GameCore.Configs.PlayerIdMock,d=GameCore.Configs.PlayerIdMock2,t=s.getPlayerId()===h?d:h),e){a.next=15;break}return a.next=9,o.chooseAsync();case 9:if(!1!==(u=a.sent)){a.next=13;break}return n&&c.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE),a.abrupt("return");case 13:a.next=25;break;case 15:if(!t||t===xi.playerId){a.next=23;break}return a.next=18,o.createAsync(t);case 18:if(!1!==(u=a.sent)){a.next=22;break}return n&&c.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE),a.abrupt("return");case 22:u||"reset"===e||(u=e);case 23:l=o.contextType,i(Mi(u,l));case 25:return Io({contextId:u}),f=s.getPlayerId(),p=s.getConnectedPlayers(),a.next=30,o.getContextPlayers(f);case 30:return g=a.sent,t!==(v=xi).playerId&&p[t]?v=p[t]:1===g.length&&(v=g[0]),i(To()),y=(m=v).playerId,E=m.name,S=m.photo,A={playerId:y,name:E,photo:S},a.next=38,i(Uo(Pi,A));case 38:i(Mi(u,l)),a.next=50;break;case 41:if(a.prev=41,a.t0=a.catch(0),!(a.t0 instanceof Kr)){a.next=45;break}return a.abrupt("return");case 45:if("USER_INPUT"!==(null==a.t0?void 0:a.t0.code)){a.next=47;break}return a.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==a.t0?void 0:a.t0.code)){a.next=49;break}return a.abrupt("return");case 49:(0,j.sendException)(a.t0);case 50:return a.prev=50,_o(1e3),a.finish(50);case 53:case"end":return a.stop()}}),a,null,[[0,41,50,53]])})));return function(e){return a.apply(this,arguments)}}()},Do=function(e){return function(){var t=(0,q.default)(J().mark((function t(n){var a,i,r,s,o;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,i=a.facebook,r=a.globalScene,s=a.analytics,r.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),o=i.getContextID(),Io({contextId:o}),s.event(Tn.AnalyticsEvents.JOIN_GROUP,{group_id:o}),t.next=8,n(Uo(ki,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Kr)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,j.sendException)(t.t0);case 17:return t.prev=17,_o(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},Mo=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s,o,c,u,l,h,d,f,p,g,v,m,y;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,s=r.player,o=r.profile,c=r.facebook,(u=r.globalScene).screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),l=i(),h=s.getPlayerId(l),!((d=s.getConnectedPlayers(l)).length>0)||d[t]){n.next=9;break}return u.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE),n.abrupt("return");case 9:return f=xi,n.next=12,c.getContextPlayers(h);case 12:if(p=n.sent,t===h||t===f.playerId||!d[t]){n.next=17;break}f=d[t],n.next=25;break;case 17:if(1!==p.length){n.next=21;break}f=p[0],n.next=25;break;case 21:return n.next=23,o.requestProfiles([t]);case 23:(g=o.getProfiles())[t]&&(f=g[t]);case 25:return n.next=27,a(yo(e,f));case 27:if(l=i(),is(l,{playerId:h})!==xi.playerId){n.next=32;break}return n.next=32,a(mo(e));case 32:if(l=i(),is(l,{playerId:h})===h||!d[t]){n.next=37;break}return a(Ro(t,!0)),n.abrupt("return");case 37:if(ts(l)===e){n.next=41;break}return u.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE),n.abrupt("return");case 41:v=ns(l),rs(l,{playerId:h}),a(Fo({mode:Pi,status:v})),m=c.getContextID(),y=c.contextType,a(Mi(m,y)),u.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE),n.next=53;break;case 50:n.prev=50,n.t0=n.catch(0),(0,j.sendException)(n.t0);case 53:return n.prev=53,_o(1e3),n.finish(53);case 56:case"end":return n.stop()}}),n,null,[[0,50,53,56]])})));return function(e,t){return n.apply(this,arguments)}}()},Bo=function(){return function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d,f,p,g,v,m,y,E,S,A,b,T,w,C,I,x,_;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,i=a.analytics,r=a.facebook,a.globalScene,s=n(),o=Ks(s),c=us(s),u=c.score,l=void 0===u?0:u,h=c.level,d=void 0===h?0:h,f=t(No(l)),p=t(Go(o,{score:l})),e.next=9,Promise.all([f,p]);case 9:if(s=n(),g=Ys(s),v=Vs(s),m=Math.floor((v-g)/1e3),i.event(Tn.AnalyticsEvents.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),level:d,level_name:"level_"+d,time_played:m}),y=r.getContextID(),o===ki&&y&&t(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game.analytics,e.prev=1,i=FBInstant.context.getID(),_s({contextId:i}),r=n(),s=os(r),o=s.playerId,c=s.score,u=us(r),l=u.score,!o||o===xi.playerId){e.next=25;break}if(!(l>c)){e.next=18;break}return e.next=13,Is(r);case 13:return h=e.sent,e.next=16,Us(h,r);case 16:e.next=23;break;case 18:return e.next=20,Es(r);case 20:return h=e.sent,e.next=23,Gs(h,r);case 23:e.next=30;break;case 25:return e.next=27,Es(r);case 27:return h=e.sent,e.next=30,Gs(h,r);case 30:ks({imageShare:h}),a.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),a.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,j.sendException)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!y||o!==Pi){e.next=25;break}if(E=as(s),(S=E.playerId)&&S!==xi.playerId){e.next=20;break}return e.abrupt("return");case 20:A=cs(s),b=A[S]||{},T=b.score,w=void 0===T?0:T,C=es(s),I=C._id,x=C.whitePlayerFinish,_=C.blackPlayerFinish,x&&_?l>w&&t(Bs(S,{matchId:I,contextId:y})):t(Ns(S,{matchId:I,contextId:y,score:l}));case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),(0,j.sendException)(e.t0);case 30:return e.prev=30,_o(300),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[0,27,30,33]])})));return function(t,n){return e.apply(this,arguments)}}()},No=function(e){return function(){var t=(0,q.default)(J().mark((function t(n){var a,i,r,s,o,c,u;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.player,i=a.getPlayerId(),t.next=5,Pr(i,e).catch((function(e){(0,j.sendException)(new Error(e))}));case 5:r=a.getPlayerData(),s=r.score,o=void 0===s?0:s,c=r.level,o<e&&a.setScore(e),n(wo(i,u={score:e,level:c})),n(Co(u)),t.next=18;break;case 13:if(t.prev=13,t.t0=t.catch(0),!(t.t0 instanceof Vr)){t.next=17;break}return t.abrupt("return");case 17:(0,j.sendException)(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},Uo=function(e,t){return void 0===t&&(t=null),function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s,o,c,u,l,h,d,f,p,g,v,m,y,E,S;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,s=r.player,o=r.analytics,c=r.facebook,u=r.globalScene,l=c.getContextID(),h=0,d=i(),f=s.getLevel(),o.event(Tn.AnalyticsEvents.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:f,level_name:"level_"+f}),a({type:ea,payload:{}}),![_i,Li].indexOf(e)){n.next=17;break}return n.next=11,a((function(e){try{var t=window.game.player;e({type:ua,payload:{}});var n=t.getPlayerId(),a=We(oo.SingleMatchStore)||{},i=a.data;a.data=uo(i),ao({playerId:n,match:a}),e(po(a))}catch(r){if(e(po(null)),r instanceof Fs)return;if(r instanceof Ai)return;if(r instanceof qs)return;(0,j.sendException)(r)}}));case 11:if(d=i(),Jr(d)){n.next=16;break}return n.next=16,a(lo());case 16:h=$r(d);case 17:if(e===ki&&a(Ao(t)),e!==Pi){n.next=27;break}return n.next=21,a(vo(t));case 21:d=i(),p=ts(d),g=as(d),v=g.playerId,l||(l=window.FBInstant.context.getID()),m=hs(d,{opponentId:v}),l&&v&&!m&&a(Ms(v,{contextId:l,matchId:p}));case 27:e===Ri&&a(function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=window.game.player,a=n.getPlayer(),i=a.playerId,r=a.name,s=a.photo,t({type:Aa,payload:{playerId:i}}),o={},new Array(20).fill(null).map((function(e,t){var n="0"+(t+1);o[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),o[i]={playerId:i,name:r,photo:s},t(bo("mock",o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=s.getPlayerData(d),E=y.score,a(Co({score:h,bestScore:void 0===E?0:E})),a({type:ta,payload:{mode:e,contextId:l}}),a(Bi(e)),(S=u.scene.get(Gi.SceneKeys.GAME_SCENE)).scene.isActive(Gi.SceneKeys.GAME_SCENE)?S.run():u.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE),n.next=43;break;case 36:if(n.prev=36,n.t0=n.catch(0),!(n.t0 instanceof Fs)){n.next=42;break}return window.game.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 42:(0,j.sendException)(n.t0);case 43:return n.prev=43,_o(0),n.finish(43);case 46:case"end":return n.stop()}}),n,null,[[0,36,43,46]])})));return function(e,t){return n.apply(this,arguments)}}()},Go=function(e,t){return function(){var n=(0,q.default)(J().mark((function n(a,i){var r,s,o,c,u,l,h,d,f,p;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game,s=r.player,r.globalScene,o=t.score,c=void 0===o?0:o,u=t.level,l=void 0===u?0:u,h=i(),!([_i,Li].indexOf(e)>=0)){n.next=7;break}return d=Jr(h),n.next=7,a(fo(d));case 7:if(e===ki&&(a({type:Sa,payload:{}}),f=s.getPlayerId(),a(wo(f,t))),e!==Pi){n.next=12;break}return p=ts(h),n.next=12,a(Eo(p,c,{level:l}));case 12:a({type:na,payload:{mode:e}});case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Fo=function(e){return function(t){var n=e.mode,a=e.status;t({type:aa,payload:{mode:n,status:a}}),(0,j.addBreadcrumbSentry)("game-mode",n)}},Ko=n(20),Yo=n(15),Vo={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},zo=function(e){function t(t){return e.call(this,Vo,t)||this}return(0,Z.default)(t,e),t}(Yo.default),Ho=zo,Wo=function(e){var t=e?e.split("_"):[],n=t.length>0?t[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},jo=n(5),Xo=tr.default.DEFAULT,qo=Xo.KEY,Zo=Xo.FRAME,Qo=function(e){function t(t,n){var a;(a=e.call(this,t)||this).payload=void 0,a.loading=void 0,a.photo=void 0,a.avtFrame=void 0,a.background=void 0,a.loadPhotoTimer=void 0,a.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=a.scene.textures.get(e);n&&n.key===e?a.handleLoadComplete(e):(a.scene.load.once("filecomplete-image-"+e,a.handleLoadComplete),a.scene.load.image(e,t),a.scene.load.start())}},a.handleLoadComplete=function(e){if(a.scene){var t=a.payload.id;if(t&&t===e){var n=t,i=a.scene.textures.get(n);i&&i.key===n?a.setPhoto(i.key):a.setPhoto(t)}}},a.handleLoadPhotoFailed=function(e){e.key===a.payload.id&&a.setDefaultAvatar(e.key)},a.scene.add.existing((0,er.default)(a)),a.payload=n,a.setSize(n.width,n.height),a.createBackground(),a.createLoading(),a.createPhoto();var i=a.payload,r=i.id,s=i.url;return r&&s&&a.loadPhoto(r,s),a.addDefaultListeners(),a}(0,Z.default)(t,e);var n=t.prototype;return n.setFrame=function(e){},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var a;if(this.payload.id=e,this.payload.url=t,null==(a=this.loadPhotoTimer)||a.remove(),e&&t){var i=this.scene.textures.get(e);if(i&&i.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(Ii.default.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,Ii.default.AVATAR.FILE)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Qi.default(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,a=e.width,i=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(a,i)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,a=t.height,i=Math.min(n,a)-4;this.photo.setWorldSize(i,i),Phaser.Display.Align.In.Center(this.photo,this.background)},n.setGlobalIcon=function(){this.showLoading(!1),this.photo.setTexture(qo),this.photo.setFrame(Zo.ICON_GLOBAL),this.photo.setWorldSize(22.5,22.5),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),Jo=Qo,$o=tr.default.DEFAULT,ec=$o.KEY,tc=$o.FRAME,nc=function(e){function t(t){var n;return(n=e.call(this,t,{key:ec,frame:tc.BLANK,background:tc.BLANK,width:60,height:60})||this).scene=void 0,n.scene=t,n}return(0,Z.default)(t,e),t.prototype.setHighlight=function(e){this.background.setFrame(tc.BLANK),this.avtFrame.setFrame(tc.BLANK)},t}(Jo),ac=nc,ic=tr.default.DEFAULT,rc=ic.KEY,sc=ic.FRAME,oc=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.avatar=void 0,a.block=void 0,a.rankIcon=void 0,a.rankText=void 0,a.playerScore=void 0,a.label=void 0,a.scene=t,a.createBlock(),a.createAvatar(),a.createRankIcon(),a.createRankText(),a.createLabel(),a.createPlayerScore(),n&&a.updateInfo(n),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=e,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(e){this.label.setText(e)},n.setRank=function(e){this.rankText.setText(e)},n.setScore=function(e){this.playerScore.setText(e)},n.setHighlight=function(e){e?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(sc.BLANK)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(sc.BLANK)),this.avatar.setHighlight(e)},n.createBlock=function(){this.block=this.scene.make.image({key:rc,frame:sc.BLANK}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new ac(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n,50)},n.getRankFrame=function(){var e=sc.BLANK;switch(this.payload.rank){case 1:case 2:case 3:e=sc.BLANK}return e},n.createRankIcon=function(){var e=sc.BLANK;this.rankIcon=this.scene.make.image({key:rc,frame:e}),e!=sc.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var e=this.getRankFrame();this.rankIcon.setFrame(e),e!=sc.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,xe.default)(t,[{key:"onClick",set:function(e){var t=this.block,n=t.width,a=t.height;this.setSize(n,a+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),cc=oc,uc=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.payload=void 0,a.leaderBlocks=void 0,a.entrancesAnimation=void 0,a.listLeaderBlocks=void 0,a.handleChallengeFriend=function(e){return function(){a.scene.storage.dispatch(Ro(e))}},a.handleShareLeaderboard=function(){a.scene.storage.dispatch(As())},a.handleMatchingGroup=(0,q.default)(J().mark((function e(){var t,n,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,i=t.storage,r=t.game,s=t.facebook,e.prev=1,r.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),o=n.getPlayer(),c="global","en"===(u=Wo(o.locale))&&(c="en"),"in"===u&&(c="in"),e.next=10,s.matchPlayerAsync(c,!0,!0);case 10:if(l=e.sent,r.globalScene.screen.close($i.ScreenKeys.NOTIFY_SCREEN),l){e.next=14;break}return e.abrupt("return");case 14:i.dispatch(Do()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),r.globalScene.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,j.sendException)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.scene=t,a.setName("LeadersBar"),a.listLeaderBlocks=[],a.createLeaderBlocks(),a.createEntrancesAnimation(),n&&a.updateInfo(n),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.updateInfo=function(e){var t=this;this.payload=e;var n=!1,a=this.payload,i=a.playerId;a.leaders.forEach((function(e){var a=t.leaderBlocks.getFirstDead(!0);a.updateInfo(e),-1===e.score?(a.setRank(""),a.setLabel("Join"),a.setScore("Global"),a.onClick=t.handleMatchingGroup):e.playerId===i?(a.setLabel("Share"),a.setHighlight(!0),a.onClick=t.handleShareLeaderboard):a.onClick=t.handleChallengeFriend(e.playerId),t.add(a),a.setVisible(!0),a.setActive(!0),t.listLeaderBlocks.indexOf(a)<0&&(n=!0)})),this.alignBlocks(),n&&(this.listLeaderBlocks=this.leaderBlocks.getChildren().filter((function(e){return e.active})),this.createEntrancesAnimation()),this.runAnimation()},n.killAndHideAll=function(){var e=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(t){return e.leaderBlocks.killAndHide(t)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ho({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var e=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(e,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:cc})},t}(Phaser.GameObjects.Container),lc=uc,hc=n(7),dc=tr.default.DEFAULT,fc=dc.KEY,pc=dc.FRAME,gc=function(e){function t(t){var n;return(n=e.call(this,t,fc,pc.BLANK,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=t,n.createIcon(),n}return(0,Z.default)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:fc,frame:pc.BLANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(hc.default),vc=gc,mc=tr.default.DEFAULT,yc=mc.KEY,Ec=mc.FRAME,Sc=function(e){function t(t){var n;return(n=e.call(this,t,yc,Ec.BLANK,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=t,n.createLabel(),n}return(0,Z.default)(t,e),t.prototype.createLabel=function(){var e=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-12);var t=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(t,this.button,0,11),this.add([e,t])},t}(hc.default),Ac=Sc,bc=tr.default.DEFAULT,Tc=bc.KEY,wc=bc.FRAME,Cc=function(e){function t(t){var n;return(n=e.call(this,t,Tc,wc.BLANK,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=t,n.createIcon(),n}return(0,Z.default)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Tc,frame:wc.BLANK});e.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(e,this.button),this.add(e)},t}(hc.default),Ic=Cc,xc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=t,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ho({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new vc(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new Ic(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new Ac(this.scene),this.add(this.pwfButton)},t}(Phaser.GameObjects.Container),_c=xc,Pc=n(39),kc={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(Pc)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},Lc=function(e){function t(t){return e.call(this,kc,t)||this}return(0,Z.default)(t,e),t}(Yo.default),Rc=Lc,Oc={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},Dc=function(e){function t(t){return e.call(this,Oc,t)||this}return(0,Z.default)(t,e),t}(Yo.default),Mc=Dc,Bc=tr.default.DEFAULT,Nc=Bc.KEY,Uc=Bc.FRAME,Gc=function(e){function t(t,n,a,i,r){var s;return(s=e.call(this,t,n,a)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(i,r),s.setDepth(Ji.default.POPUP),s.createPopup(),s.scene.add.existing((0,er.default)(s)),s}(0,Z.default)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Nc,Uc.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Nc,Uc.POPUP_TOP_MIDDLE),this.barTopRight=this.scene.add.image(0,0,Nc,Uc.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Nc,Uc.POPUP_MIDDLE_LEFT),this.barMidBg=this.scene.add.image(0,0,Nc,Uc.POPUP_MIDDLE_MIDDLE),this.barMidRight=this.scene.add.image(0,0,Nc,Uc.POPUP_MIDDLE_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Nc,Uc.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Nc,Uc.POPUP_BOTTOM_MIDDLE),this.barBottomRight=this.scene.add.image(0,0,Nc,Uc.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(53,53),this.barTopMid.setWorldSize(53,53),this.barTopRight.setWorldSize(53,53),this.barMidLeft.setWorldSize(53,53),this.barMidBg.setWorldSize(53,53),this.barMidRight.setWorldSize(53,53),this.barBottomLeft.setWorldSize(53,53),this.barBottomMid.setWorldSize(53,53),this.barBottomRight.setWorldSize(53,53),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-106,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-106),this.barMidBg.setWorldSize(this.width-106,this.height-106),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-106),this.barBottomMid.setWorldSize(this.width-106,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,xe.default)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container),Fc=Gc,Kc=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.mainText=void 0,a.shadowText=void 0,a.payload=n,a.createMainText(),a.createShadowText(),a.updateSize(),a.moveDown(a.shadowText),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.updateSize()},n.setTintText=function(e,t,n,a){this.mainText.setTint(e,t,n,a)},n.setDropShadow=function(e,t,n,a){void 0===a&&(a=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(a),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container),Yc=Kc,Vc=n(40),zc=tr.default.DEFAULT,Hc=zc.KEY,Wc=zc.FRAME,jc=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var e=n.cat,t=e.x,a=e.y,i=e.displayWidth,r=e.displayHeight,s=a-20;n.effect.run(1,t,s,i,r)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:Hc,frame:Wc.BLANK,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new Vc.default(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new Rc({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},t}(Phaser.GameObjects.Container),Xc=jc,qc=tr.default.DEFAULT,Zc=qc.KEY,Qc=qc.FRAME,Jc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=t,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(n<=t)return this.setBestScore(t),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var e=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){e.entrancesAnimation.play()}))},n.runScoreCounter=function(){var e,t=this,n=this.payload,a=n.bestScore,i=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:i,delay:500,duration:2e3,completeDelay:300,onUpdate:function(e){var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.bestScore=a,t.setBestScore(a),t.setCurrentScore(i),t.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(e){this.bestScoreText.setText("Best score: "+e)},n.setCurrentScore=function(e){this.currentScoreText.setText(""+e)},n.createPopup=function(){this.popup=new Fc(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Xc(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Zc,frame:Qc.BLANK}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new Yc(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Rc({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new Mc({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},t}(Phaser.GameObjects.Container),$c=Jc,eu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=t,n.createBestScoreBlock(),n.scene.add.existing((0,er.default)(n)),n}return(0,Z.default)(t,e),t.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new $c(this.scene),this.add(this.bestScoreBlock)},t}(Phaser.GameObjects.Container),tu=eu,nu={targets:[],duration:400,ease:n(38).default,props:{scale:"+=0.1"}},au=function(e){function t(t){return e.call(this,nu,t)||this}return(0,Z.default)(t,e),t}(Yo.default),iu=au,ru=n(41),su={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},ou=function(e){function t(t){return e.call(this,su,t)||this}return(0,Z.default)(t,e),t}(Yo.default),cu=ou,uu=n(42),lu=tr.default.DEFAULT,hu=lu.KEY,du=lu.FRAME,fu=function(e){function t(t){var n;return(n=e.call(this,t)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:hu,frame:du.BLANK,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:hu,frame:du.BLANK,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var t=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*t,to:0},scaleY:{start:10*t,to:0}},onComplete:function(){e.star.setVisible(!1)}})},n.runHaloAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){e.halo.setVisible(!1)}})},t}(Phaser.GameObjects.Container),pu=fu,gu=tr.default.DEFAULT,vu=gu.KEY,mu=gu.FRAME,yu=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).avatar=void 0,r.scoreText=void 0,r.shareButton=void 0,r.bigStarExplosive=void 0,r.open=function(t){e.prototype.open.call((0,er.default)(r),t);var n=r.getData("bestScore");r.setBestScore(n);var a=r.scene.player.getPlayer();r.avatar.loadPhoto(a.playerId,a.photo),r.scene.time.delayedCall(2e3,(function(){r.scene.storage.dispatch(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d,f,p,g;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game,i=a.player,r=a.analytics,s=a.facebook,e.prev=1,!FBInstant.context.getID()){e.next=5;break}return e.abrupt("return");case 5:return o=n(),e.next=8,ys();case 8:return c=e.sent,ks({imageShare:c}),u=i.getPlayer(),l=u.playerId,h=u.name,d=u.photo,f=us(o),p=f.score,g={type:bi,playerId:l,playerName:h,playerPhoto:d,playerScore:p},e.next=15,s.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:h+" got "+p+" scores. So easy! Can you?",localizations:{en_US:h+" got "+p+" scores. So easy! Can you?",vi_VN:h+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng. B\u1ea1n th\xec sao?"}},image:c||"",template:"play_turn",data:g});case 15:r.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"BestScoreContextSolo",success:!0}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),r.event(Tn.AnalyticsEvents.MESSAGE,{message_content_type:"BestScoreContextSolo",success:!1}),(0,j.sendException)(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,n){return e.apply(this,arguments)}}())})),r.runOpenAnimation()},r.handleClose=function(){r.scene.screen.close(r.name)},r.handleShareBestScore=function(){r.scene.storage.dispatch(ms())},r.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(r.bigStarExplosive,r.scoreText),r.bigStarExplosive.run()},r.setDepth($i.ScreenDepth.POPUP),r.background.setAlpha(.8),r.createObjects(),r}(0,Z.default)(t,e);var n=t.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(e){this.scoreText.setText(""+e)},n.createTitle=function(){var e=this.scene.make.image({key:vu,frame:mu.BLANK});e.setSize(162,36).setDisplaySize(162,36);var t=-90;Phaser.Display.Align.In.TopCenter(e,this.zone,0,t);var n=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:10,text:"Today Record"});t=-5,Phaser.Display.Align.In.Center(n,e,0,t),this.add([e,n])},n.createClose=function(){var e=new hc.default(this.scene,vu,mu.BLANK,38,38);e.setName("Close"),this.add(e),Phaser.Display.Align.In.TopRight(e,this.zone,-60,-50),e.onClick=this.handleClose},n.createBestScoreTitle=function(){var e=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:22,text:"Best Score"});this.add(e),e.setTint(13256697),Phaser.Display.Align.In.TopCenter(e,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new Yc(this.scene,{font:jo.default.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new Jo(this.scene,{key:vu,frame:mu.BLANK,background:mu.BLANK,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var e=tr.default.DEFAULT,t=e.KEY,n=e.FRAME,a=this.scene.make.image({key:t,frame:n.BLANK});a.setWorldSize(246,246),this.add(a),this.moveDown(a),Phaser.Display.Align.In.Center(a,this.avatar),this.scene.tweens.add({targets:[a],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new uu.default(this.scene,{key:vu,button:mu.BLANK,icon:mu.BLANK,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var e=new Vc.default(this.scene),t=this.scoreText,n=t.x,a=t.y;e.run(2,n,a,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new pu(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new cu({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var e=this.avatar.scale;new iu({targets:[this.avatar],duration:400,props:{scale:{from:0,to:e}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new ru.default({targets:[this.shareButton],delay:300}).play()},t}(GameCore.Screen),Eu=yu,Su=GameCore.Configs.LeadersBoard,Au=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).bestScore=void 0,t.currentScore=void 0,t.loading=void 0,t.leadersBar=void 0,t.footerBar=void 0,t.main=void 0,t.confettiLeftEffect=void 0,t.confettiRightEffect=void 0,t.run=function(){t.updateLeaders(),t.updateScore(),t.explodeConfettiEffect(),t.main.bestScoreBlock.counterAnimation&&t.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?t.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){t.handleShowBestScorePopup(),t.handleShowResultChallengePopup()})):t.time.delayedCall(800,(function(){t.handleShowBestScorePopup(),t.handleShowResultChallengePopup()})),t.footerBar.setAlpha(0),t.footerBar.runAnimation(),t.audio.pauseMusic()},t.runConfettiEffect=function(){var e=t.gameZone.displayWidth;t.confettiLeftEffect.stop(),t.confettiRightEffect.stop(),t.children.bringToTop(t.confettiLeftEffect),t.children.bringToTop(t.confettiRightEffect),t.confettiLeftEffect.run(1,0,-100),t.confettiRightEffect.run(1,0+e,-100),t.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var n,a,i=e.getValue()/100;null==(n=t.confettiLeftEffect.emitter)||n.setAlpha(i),null==(a=t.confettiRightEffect.emitter)||a.setAlpha(i)},onComplete:function(){var e,n;null==(e=t.confettiLeftEffect.emitter)||e.setAlpha(1),null==(n=t.confettiRightEffect.emitter)||n.setAlpha(1),t.confettiLeftEffect.stop(),t.confettiRightEffect.stop()}})},t.explodeConfettiEffect=function(){var e=t.gameZone.displayWidth,n=-100,a=e;t.tweens.addCounter({repeat:3,duration:500,onStart:function(){t.confettiLeftEffect.explode(6,0,n),t.confettiRightEffect.explode(6,0+a,n)},onRepeat:function(){t.confettiLeftEffect.explode(6,0,n),t.confettiRightEffect.explode(6,0+a,n)},completeDelay:7e3,onComplete:function(){t.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(e){var n,a,i=e.getValue()/100;null==(n=t.confettiLeftEffect.emitter)||n.setAlpha(i),null==(a=t.confettiRightEffect.emitter)||a.setAlpha(i)},onComplete:function(){var e,n;null==(e=t.confettiLeftEffect.emitter)||e.setAlpha(1),null==(n=t.confettiRightEffect.emitter)||n.setAlpha(1),t.confettiLeftEffect.stop(),t.confettiRightEffect.stop()}})}})},t.handlePlayWithFriend=function(){t.storage.dispatch(Oo())},t.handleHomeClick=function(){t.scene.switch(Gi.SceneKeys.GAME_SCENE)},t.handleLeaderboardClick=function(){t.scene.switch(Gi.SceneKeys.LEADERBOARD_SCENE)},t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.events.on("resume",(function(){e.updateScore()})),this.events.on("sleep",(function(){e.storage.dispatch(go())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ii.default.BACKGROUND.KEY);var t=this.player.getBestScore();this.bestScore=t,this.currentScore=0,this.createLoading(),this.createMain(),this.createLeadersBar(),this.createFooterBar()},n.updateLeaders=function(){var e=this;this.leadersBar.killAndHideAll();var t=[{selector:Gr,callback:function(t){if(!1===t){var n=window.game.player.getPlayerId(),a=e.getLeadersExcludeIds([n]);e.updateLeaderBar(a)}e.loading.setVisible(t)}}];this.handleStateChange(t),this.storage.dispatch(Mr(Su.LeaderboardId,cr,20))},n.getLeadersExcludeIds=function(e){var t=this.storage.getState(),n=Ur(t),a={};if(!e||0===e.length)return n;for(var i in n)if(e.indexOf(i)<0){var r=n[i],s=r.playerId,o=r.photo,c=r.score,u=r.rank;a[i]={playerId:s,photo:o,score:c,rank:u}}return a},n.updateScore=function(){var e=this.storage.getState(),t=us(e),n=t.score,a=void 0===n?0:n,i=t.bestScore,r=void 0===i?0:i;this.bestScore=r<this.bestScore?this.bestScore:r,this.currentScore=a,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new Qi.default(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.createMain=function(){this.bestScore=0,this.main=new tu(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createLeadersBar=function(){this.leadersBar=new lc(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,120)},n.updateLeaderBar=function(e){var t={playerId:this.player.getPlayerId(),leaders:[]};for(var n in e){if(t.leaders.length>=3)break;var a=e[n],i=a.playerId,r=a.photo,s=a.score,o=a.rank;t.leaders.push({playerId:i,photo:r,score:s,rank:o})}t.leaders.push({playerId:Ii.default.ICON_EARTH.KEY,photo:Ii.default.ICON_EARTH.FILE,rank:4,score:-1}),this.leadersBar.updateInfo(t)},n.createFooterBar=function(){this.footerBar=new _c(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-70),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.pwfButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add($i.ScreenKeys.BEST_SCORE_SCREEN,Eu)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new sr(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new sr(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Ji.default.EFFECT),this.confettiRightEffect.setDepth(Ji.default.EFFECT)},n.handleShowBestScorePopup=function(){this.currentScore>this.bestScore&&this.storage.dispatch(Co({bestScore:this.currentScore}));var e=this.storage.getState(),t=Ks(e),n=[_i,Li].indexOf(t)>=0;this.currentScore>this.bestScore&&n&&(this.screen.open($i.ScreenKeys.BEST_SCORE_SCREEN,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var e=this.storage.getState(),t=Ks(e);if(-1!==[Pi,ki].indexOf(t)&&ts(e)){var n=as(e).playerId;t===ki&&n===xi.playerId||(this.scene.pause(Gi.SceneKeys.GAME_OVER_SCENE),this.scene.launch(Gi.SceneKeys.RESULT_MATCH_SCENE))}},t}(Ko.default);var bu=Au,Tu=n(18),wu={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins"},Cu=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t||e.isIOS()},Iu=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),a=0,i=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(a<n)){e.next=11;break}return r=i(),s=(0,Ze.sleepAsync)(80),a+=1,e.next=9,Promise.all([r,s]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xu=function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)},_u=function(e){try{if(!Cu())return!1;var t=GameCore.Utils.Device;t.isAndroid()||t.isMobileWeb()?xu(e):t.isIOS()&&Iu(e).catch((function(e){}))}catch(n){}},Pu={WIDTH:45,HEIGHT:139,WATER_MAX_HEIGHT:130,STATES:{IDLE:"idle",EMPTY:"empty",CHOSEN:"chosen",MOVING:"moving",POURING:"pouring",WAIT_FOR_RECEIVE:"waitingReceive",RECEIVING:"receving",COMPLETE:"complete"},ANIMATION:{CHOOSE_UP:15,SHAKE:5,MOVE_UP:30}},ku={WATER_LAYER_STATES:{NORMAL:"normal",POURING:"pouring",RECEIVING:"receiving",EMPTY:"empty"}},Lu={MAX_DEFAULT_BONUS_SCORE:100,MIN_DEFAULT_BONUS_SCORE:20,MORE_MAX_BONUS_SCORE_EACH_LEVEL:50,MORE_MIN_BONUS_SCORE_EACH_LEVEL:20},Ru={black:0,white:16777215,red:13174821,orange:16544052,pink:16752040,yellow:16765799,lime:255391,blue:2652159,brown:16595817,purple:9984511,teal:54520,green:7401786,blueGrey:16753150,mahogany:5705788},Ou=function(e){function t(t){var n;return(n=e.call(this,t)||this).windX=1,n.airFrictionX=.05,n.airFrictionY=.01,n._lastRotation=0,n.airFrictionX=.01*Math.random()+.01,n.airFrictionY=.004*Math.random()+.006,(0,er.default)(n)||(0,er.default)(n)}return(0,Z.default)(t,e),t.prototype.update=function(t,n,a){for(var i=e.prototype.update.call(this,t,n,a),r=t;r>16.67;)this.velocityX-=Du(this.velocityX,.2,this.airFrictionX)/60,this.velocityY-=Du(this.velocityY,.2,this.airFrictionY)/60,r-=16.67;return this.velocityX-=Du(this.velocityX,.2,this.airFrictionX)*r/1e3,this.velocityY-=Du(this.velocityY,.2,this.airFrictionY)*r/1e3,this.rotation=this._lastRotation+Math.random()*Math.PI/180*4,this._lastRotation=this.rotation,i},t}(Phaser.GameObjects.Particles.Particle),Du=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+Math.sign(e)*n*e*e},Mu=Ou,Bu=function(e){function t(t){var n;return n=e.call(this,t)||this,(0,er.default)(n)||(0,er.default)(n)}return(0,Z.default)(t,e),t.prototype.update=function(t,n,a){for(var i=e.prototype.update.call(this,t,n,a),r=Math.atan(this.velocityY/this.velocityX),s=t;s>16.67;){var o=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));o-=Nu(o,.2,.01)/60,this.velocityX=Math.sign(this.velocityX)*o*Math.abs(Math.cos(r)),this.velocityY=Math.sign(this.velocityY)*o*Math.abs(Math.sin(r)),s-=16.67}var c=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));return c-=Nu(c,.2,.01)*s/1e3,this.velocityX=Math.sign(this.velocityX)*c*Math.abs(Math.cos(r)),this.velocityY=Math.sign(this.velocityY)*c*Math.abs(Math.sin(r)),this.rotation=r,i},t}(Phaser.GameObjects.Particles.Particle),Nu=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+Math.sign(e)*n*e*e},Uu=Bu,Gu=tr.default.DEFAULT,Fu=Gu.KEY,Ku=Gu.FRAME,Yu=function(e){function t(t){var n;return(n=e.call(this,t,Fu)||this).confettiEmitter=void 0,n.ribbonEmitter=void 0,n.setDepth(Ji.default.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t=[Ku.CONFETTI_PARTICLE_1,Ku.CONFETTI_PARTICLE_2,Ku.CONFETTI_PARTICLE_3,Ku.CONFETTI_PARTICLE_4,Ku.CONFETTI_PARTICLE_5,Ku.CONFETTI_PARTICLE_6,Ku.CONFETTI_PARTICLE_7],n=[13650134,13650134,3786091,16739143,15318614],a=[Ku.RIBBON_PARTICLE_1,Ku.RIBBON_PARTICLE_2,Ku.RIBBON_PARTICLE_3,Ku.RIBBON_PARTICLE_4,Ku.RIBBON_PARTICLE_5,Ku.RIBBON_PARTICLE_6],i={frame:t,tint:n,x:200,y:600,speed:{min:400,max:1e3},gravityY:70,scale:{start:.1*e,end:.6*e,ease:Phaser.Math.Easing.Expo.Out},angle:{min:267,max:273},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:90},lifespan:{min:3e3,max:4e3},quantity:15,maxParticles:0,on:!1,timeScale:2,particleClass:Mu},r={frame:a,tint:n,x:0,y:0,speed:{min:1e3,max:2e3},angle:{start:262,end:284,steps:4},gravityX:0,gravityY:0,lifespan:400,scale:{start:.1*e,end:.5*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},quantity:10,maxParticles:0,on:!1,rotate:90,particleClass:Uu};this.confettiEmitter=this.createEmitter(i),this.ribbonEmitter=this.createEmitter(r)},n.explode=function(e,t){this.confettiEmitter.setPosition(e,t),this.ribbonEmitter.setPosition(e,t),this.confettiEmitter.flow(1e5,30),this.confettiEmitter.setVisible(!0),this.ribbonEmitter.flow(1e5,4),this.scene.time.delayedCall(200,this.stop.bind(this))},n.stop=function(){this.confettiEmitter.stop(),this.ribbonEmitter.stop()},n.killAll=function(){},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Vu=Yu,zu=tr.default.DEFAULT,Hu=tr.default.DEFAULT,Wu={COLORFUL:{KEY:"colorful-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:30,END:17,ZERO_PAD:1},COLOR_CHANGE:{KEY:"color-change-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:18,END:18,ZERO_PAD:1},PAINT_EXPLOSIVE:{KEY:"paint-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:18,END:12,ZERO_PAD:1},FREEZE_EXPLOSIVE:{KEY:"freeze-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:30,END:9,ZERO_PAD:1},COLORFUL_EXPLOSIVE:{KEY:"colorful-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:30,END:9,ZERO_PAD:1},RED_EXPLOSIVE:{KEY:"red-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:28,END:9,ZERO_PAD:1},BLUE_EXPLOSIVE:{KEY:"blue-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:28,END:9,ZERO_PAD:1},PINK_EXPLOSIVE:{KEY:"pink-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:28,END:9,ZERO_PAD:1},GREEN_EXPLOSIVE:{KEY:"green-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:28,END:9,ZERO_PAD:1},YELLOW_EXPLOSIVE:{KEY:"yellow-explosive-animation",TEXTURE:zu.KEY,PREFIX:zu.FRAME.BLANK,FRAME_RATE:28,END:9,ZERO_PAD:1},WAVE_WATER:{KEY:"wave-water-animation",TEXTURE:Hu.KEY,PREFIX:Hu.FRAME.PREFIX_WAVE,FRAME_RATE:8,END:5,START:1,ZERO_PAD:1}},ju=function(){function e(e,t){this.scene=void 0,this.tube=void 0,this.waterLayers=[],this.receiveFrom=[],this.pouringLayer=void 0,this.receivingLayer=void 0,this.numberLayerSameColor=void 0,this.direction=1,this.startAnglePouring=void 0,this.tweenTimeScale=1,this.increasingValuePercent=0,this.colorPouring=void 0,this.shakeTween=void 0,this.chooseTween=void 0,this.moveTween=void 0,this.__pourCallBack=void 0,this.__confettiCallBack=void 0,this.pourTween=void 0,this.moveDefaultTween=void 0,this.scene=e,this.tube=t}var t=e.prototype;return t.setWaterLayer=function(e){this.waterLayers=e},t.initDefault=function(e){this.tube=e},t.updateWaterLayerHeight=function(e){var t=this;if(this.tube){var n=this.tube,a=n.target,i=n.rotation,r=n.gameManager.getRatioScale(),s=Pu.HEIGHT*r*Math.abs(Math.cos(i))-(Pu.WIDTH-6)/2*r*Math.abs(Math.sin(i)),o=0,c=this.waterLayers.filter((function(e){return e.status===ku.WATER_LAYER_STATES.NORMAL})),u=this.waterLayers.filter((function(e){return e.status===ku.WATER_LAYER_STATES.POURING})),l=this.waterLayers.filter((function(e){return e.status===ku.WATER_LAYER_STATES.RECEIVING})),h=this.waterLayers.filter((function(e){return e.status===ku.WATER_LAYER_STATES.EMPTY}));c.forEach((function(t){t.setHeight(e),o+=e})),u.forEach((function(t){var n=Math.min(s-o,e);o+=n;var i=t.percent;t.setHeight(n);var r=t.percent;a&&(a.water.increasingValuePercent+=i-r)})),l.forEach((function(e){if(0!=t.increasingValuePercent&&1!=e.percent){var n=Math.min(1,e.percent+t.increasingValuePercent),a=0;a=n<1?t.increasingValuePercent:1-e.percent,t.increasingValuePercent-=a,e.setPercent(n)}})),this.increasingValuePercent=0,h.forEach((function(e){e.setEmpty()}))}},t.isReceiving=function(){for(var e=0;e<this.tube.config.length;e++)if(this.waterLayers[e].status===ku.WATER_LAYER_STATES.RECEIVING)return!0;return!1},t.increase=function(e,t){for(var n=this.getCurrentNumberLayer(),a=0;a<e&&this.waterLayers[n+a];a++)this.waterLayers[n+a].setStatus(ku.WATER_LAYER_STATES.RECEIVING),this.waterLayers[n+a].setColor(t),this.waterLayers[n+a].setColorLogic(t);this.increasingValuePercent=0},t.decrease=function(e){var t=this.getCurrentNumberLayer();if(!this.waterLayers[t-1])return"0";for(var n=this.waterLayers[t-1].getColor(),a=0;a<e;a++)this.waterLayers[t-1-a].setStatus(ku.WATER_LAYER_STATES.POURING);return n},t.setWidth=function(e){return this.waterLayers.forEach((function(t){t.setWidth(e)})),e},t.shakeAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this),this.shakeTween&&this.shakeTween.remove(),this.shakeTween=this.scene.add.tween({targets:this.tube,x:function(e){return e.defaultPosX+Pu.ANIMATION.SHAKE},ease:Phaser.Math.Easing.Sine,duration:80,repeat:1,yoyo:!0,onComplete:function(){e.tube.x=e.tube.defaultPosX,e.tube.updateTube()},onUpdate:function(){e.tube.updateTube()}})},t.removeChooseTween=function(){this.chooseTween&&this.chooseTween.remove()},t.unchooseAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this),this.tube.setStatus(Pu.STATES.IDLE),this.removeChooseTween(),this.chooseTween=this.scene.add.tween({targets:this.tube,y:this.tube.defaultPosY,ease:"Sine.easeOut",duration:200,repeat:0,onComplete:function(){e.tube.updateTube()},onUpdate:function(){e.tube.updateTube()}})},t.chooseAnimation=function(){var e=this;this.scene.tweens.killTweensOf(this),this.tube.setStatus(Pu.STATES.CHOSEN),this.removeChooseTween(),this.chooseTween=this.scene.add.tween({targets:this.tube,y:this.tube.defaultPosY-Pu.ANIMATION.CHOOSE_UP,ease:"Sine.easeOut",duration:200,repeat:0,onComplete:function(){e.tube.updateTube()},onUpdate:function(){e.tube.updateTube()}})},t.moveAnimation=function(e,t,n){var a=this;this.__pourCallBack=t,this.__confettiCallBack=n;var i=this.tube,r=i.target;i.disableInteractive(),r.setStatus(Pu.STATES.WAIT_FOR_RECEIVE),r.water.receiveFrom.push(i),i.setStatus(Pu.STATES.MOVING);var s=1,o=this.scene.world.getWorldSize().width/2;r.x<o?(s=-1,i.setOrigin(0,0),i.x-=i.displayWidth/2):(i.setOrigin(1,0),i.x+=i.displayWidth/2),i.updateTube(),this.scene.tweens.killTweensOf(this);var c=e,u=this.waterLayers.slice(this.getCurrentNumberLayer()-c,this.getCurrentNumberLayer()),l=r.water.waterLayers.slice(r.water.getCurrentNumberLayer(),r.water.getCurrentNumberLayer()+c),h=this.tube.getTopColor()||"";r.water.increase(c,h),this.updatePourParams(s,c,u,l,h),this.setWidth(Pu.HEIGHT);for(var d=0;d<this.numberLayerSameColor;d++)this.pouringLayer[d].setColorLogic("");this.moveTween?(this.moveTween.setTimeScale(this.tweenTimeScale),this.moveTween.data[0].start=i.x,this.moveTween.data[1].start=i.y,this.moveTween.data[2].start=i.rotation,this.moveTween.restart()):this.moveTween=this.scene.add.tween({targets:i,x:function(e){return e.target.x},y:function(e){return e.target.y-Pu.ANIMATION.MOVE_UP},rotation:{getEnd:function(){return a.startAnglePouring=a.getRadianToStartPouring()*a.direction,a.startAnglePouring}},ease:"Power2",duration:500,onComplete:function(){i.waterPouring.pour(a.numberLayerSameColor,i.x,i.y,a.colorPouring,a.direction),a.pourAnimation(),i.updateTube(),i.setStatus(Pu.STATES.POURING)},onUpdate:function(){a.moveTween.setTimeScale(a.tweenTimeScale),i.updateTube()}})},t.updatePourParams=function(e,t,n,a,i){this.direction=e,this.numberLayerSameColor=t,this.pouringLayer=n,this.receivingLayer=a,this.colorPouring=Ru[i]},t.pourAnimation=function(){var e=this;this.scene.audio.playSound(Tu.default.POURING,{seek:1.5*Math.random()});var t=this.tube,n=t.target;this.scene.tweens.killTweensOf(this),n.water.receiveFrom[n.water.receiveFrom.length-1]==t&&n.setStatus(Pu.STATES.RECEIVING),t.setStatus(Pu.STATES.POURING),n.waveWaterSprite.setVisible(!0),n.waveWaterSprite.play(Wu.WAVE_WATER.KEY),n.waveWaterSprite.setTint(this.colorPouring),this.pourTween?(this.pourTween.setTimeScale(this.tweenTimeScale),this.pourTween.data[0].start=t.rotation,this.pourTween.restart()):this.pourTween=t.scene.add.tween({targets:this.tube,rotation:{getStart:function(){return e.startAnglePouring},getEnd:function(){var t=e.getRadianToEndPouring(e.numberLayerSameColor)*e.direction;return e.decrease(e.numberLayerSameColor),t}},ease:"Linear",duration:function(){return 500*e.numberLayerSameColor},onComplete:function(){t.target.water.receiveFrom.splice(t.target.water.receiveFrom.indexOf(t),1);for(var n=0;n<e.numberLayerSameColor;n++)e.pouringLayer[n].setStatus(ku.WATER_LAYER_STATES.EMPTY),e.pouringLayer[n].setColor(""),e.receivingLayer[n].setStatus(ku.WATER_LAYER_STATES.NORMAL);e.__confettiCallBack&&e.__confettiCallBack(),t.target.disableMask(),e.moveDefaultAnimation(),t.target.water.isReceiving()||t.target.status==Pu.STATES.WAIT_FOR_RECEIVE||(t.target.isComplete()?t.target.setStatus(Pu.STATES.COMPLETE):t.target.setStatus(Pu.STATES.IDLE)),-1==e.direction?(t.setOrigin(.5,0),t.x+=t.displayWidth/2*Math.cos(t.rotation),t.y+=t.displayWidth/2*Math.sin(t.rotation)):(t.setOrigin(.5,0),t.x-=t.displayWidth/2*Math.cos(t.rotation),t.y-=t.displayWidth/2*Math.sin(t.rotation)),t.setStatus(Pu.STATES.MOVING),t.updateTube(),t.target.updateTube(),t.target.updatePositionWaveWater(),t.waterPouring.setActive(!1).setVisible(!1)},onUpdate:function(){e.pourTween.setTimeScale(e.tweenTimeScale),t.target.updateTube(),t.updateTube(),t.target.updatePositionWaveWater()}})},t.moveDefaultAnimation=function(){var e=this,t=this.tube;this.scene.tweens.killTweensOf(t),this.moveDefaultTween?(this.moveDefaultTween.setTimeScale(this.tweenTimeScale),this.moveDefaultTween.data[0].start=t.x,this.moveDefaultTween.data[1].start=t.y,this.moveDefaultTween.data[2].start=t.rotation,this.moveDefaultTween.restart()):this.moveDefaultTween=this.scene.add.tween({targets:t,x:function(e){return e.defaultPosX},y:function(e){return e.defaultPosY},rotation:0,ease:"Power2",duration:500,onComplete:function(){t.disableMask();var n=t.gameManager.getRatioScale();t.setInteractive(),0==e.getCurrentNumberLayer()?t.setStatus(Pu.STATES.EMPTY):t.setStatus(Pu.STATES.IDLE),t.setDepth(Ji.default.TUBE),e.setWidth((Pu.WIDTH-2)*n),t.updateTube(),e.__pourCallBack&&e.__pourCallBack(),t.resetTweenTimeScale()},onUpdate:function(){e.moveDefaultTween.setTimeScale(e.tweenTimeScale),t.updateTube()}})},t.getRadianToStartPouring=function(){var e=this.tube,t=e.gameManager.getRatioScale(),n=this.getCurrentNumberLayer()*e.waterLayerHeight;return Math.atan((Pu.HEIGHT*t-n)/((Pu.WIDTH-6)*t)*2)},t.getRadianToEndPouring=function(e){var t=this.tube;if(e===this.getCurrentNumberLayer())return Math.PI/2;var n=t.gameManager.getRatioScale(),a=(this.getCurrentNumberLayer()-e)*t.waterLayerHeight;return Math.atan((Pu.HEIGHT*n-a)/((Pu.WIDTH-6)*n)*2)},t.updatePosition=function(e,t){for(var n=0,a=0;a<this.waterLayers.length;a++)this.waterLayers[a].x=e,this.waterLayers[a].y=t-n,n+=this.waterLayers[a].getHeight()||0},t.getCurrentNumberLayer=function(){for(var e=0;e<this.waterLayers.length;e++)if(""===this.waterLayers[e].color)return e;return this.waterLayers.length},e}(),Xu=function(e){function t(t,n,a){var i;return(i=e.call(this,t,n,a,tr.default.DEFAULT.KEY,tr.default.DEFAULT.FRAME.BLANK)||this).cropHeight=void 0,i.cropY=0,i.scene.add.existing((0,er.default)(i)),i.setVisible(!1),i.cropHeight=i.displayWidth,i.setOrigin(.5,.006),i.setDepth(1),i}return(0,Z.default)(t,e),t.prototype.pour=function(e,t,n,a,i){var r=this.scene.gameManager.getRatioScale();this.setDisplaySize(4*r,Pu.HEIGHT*r+Pu.ANIMATION.MOVE_UP),this.setTint(a),this.setPosition(t,n),this.setActive(!0).setVisible(!0),1===i?this.setOrigin(1.1,.006):this.setOrigin(-.1,.006)},t}(Phaser.GameObjects.Sprite);function qu(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Qu,Ju=tr.default.DEFAULT,$u=Ju.KEY,el=Ju.FRAME,tl=function(e){function t(t,n){var a;return(a=e.call(this,t,0,0,tr.default.DEFAULT.KEY,tr.default.DEFAULT.FRAME.TUBE)||this).gameManager=void 0,a.config=void 0,a.layers=[],a.hitArea=void 0,a.jiggleTween=void 0,a.slideTween=void 0,a.originWidth=Pu.WIDTH,a.originHeight=Pu.HEIGHT,a.defaultPosX=void 0,a.defaultPosY=void 0,a.waterLayerHeight=void 0,a.target=void 0,a.water=void 0,a.tubeMask=void 0,a.tubeMaskImage=void 0,a.waterPouring=void 0,a.waveWaterSprite=void 0,a.smallConfetti=void 0,a.status=void 0,a.gameManager=n,a.scene.add.existing((0,er.default)(a)),a.createWater(),a.createHitArea(),a.createEffect(),a.createTubeMask(),a.createWaterPouring(),a.createWaveWater(),a.addListenEvent(),a}(0,Z.default)(t,e);var n=t.prototype;return n.createWater=function(){this.water=new ju(this.scene,this)},n.createHitArea=function(){this.hitArea=this.scene.add.zone(0,0,this.displayWidth,this.displayHeight)},n.createEffect=function(){this.smallConfetti=new Vu(this.scene)},n.createWaterPouring=function(){this.waterPouring=new Xu(this.scene,this.x,this.y)},n.createTubeMask=function(){this.tubeMaskImage=this.scene.make.image({x:150,y:200,key:tr.default.DEFAULT.KEY,frame:tr.default.DEFAULT.FRAME.TUBE_MASK,add:!1}),this.tubeMask=new Phaser.Display.Masks.BitmapMask(this.scene,this.tubeMaskImage)},n.createWaveWater=function(){this.waveWaterSprite=this.scene.make.sprite({key:$u,frame:el.BLANK}),this.waveWaterSprite.setWorldSize(50,2025/41),this.waveWaterSprite.setOrigin(.5,1),this.waveWaterSprite.setVisible(!1).setDepth(Ji.default.WATER_WAVE)},n.addListenEvent=function(){var e=this;this.hitArea.setInteractive({hitArea:this.hitArea,useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.gameManager.selectContainer(e)}))},n.setWorldSize=function(t,n){e.prototype.setWorldSize.call(this,t,n);var a=this.scene.world.getPixelRatio();this.tubeMaskImage.setDisplaySize(t,n),this.setSize(this.originWidth*a,this.originHeight*a);var i=this.getHitAreaWidthRange();this.hitArea&&this.hitArea.setDisplaySize(Math.min(t,187.5)+i,1.25*n),this.waterLayerHeight=Pu.WATER_MAX_HEIGHT*(t/this.originWidth)/this.gameManager.levelConfig.bottleVolume},n.setPosition=function(t,n,a,i){return e.prototype.setPosition.call(this,t,n,a,i),this.setDefaultPosition(t,n),this.config?(this.updateTube(),this):this},n.setDepth=function(t){return e.prototype.setDepth.call(this,t),this.layers.forEach((function(e){e.setDepth(t-.01)})),this.hitArea.setDepth(t),this},n.setOrigin=function(t,n){var a;return e.prototype.setOrigin.call(this,t,n),null==(a=this.tubeMaskImage)||a.setOrigin(t,n),this},n.setActive=function(t){return e.prototype.setActive.call(this,t),this.hitArea.setActive(t),this},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.hitArea.setVisible(t),this},n.getHitAreaWidthRange=function(){switch(this.gameManager.layerContainers.length){case 2:case 3:case 4:return 25;case 5:case 6:return 22;case 7:case 8:return 18;case 9:case 10:return 14;case 11:case 12:return 12;case 13:case 14:return 5;default:return 0}},n.initDefault=function(e){this.setDepth(Ji.default.TUBE),this.status="",this.config=JSON.parse(JSON.stringify(e)),this.layers=e.layers,this.water.setWaterLayer(this.layers),this.water.initDefault(this),this.updateTube()},n.isCanAddLayer=function(e){if(0===e.length)return!1;if(0===this.getEmptyLayerCount())return!1;if(this.isComplete())return!1;if(0===this.layers.length)return!0;var t=this.getTopColor();return!t||!e.some((function(e){return e.config.color!=t}))},n.addLayers=function(e){},n.removeLayer=function(e){},n.isEmpty=function(){return""===this.layers[0].config.color},n.isComplete=function(){var e=this.getTopColor();if(!e)return!1;for(var t,n=qu(this.layers);!(t=n()).done;){if(e!=t.value.config.color)return!1}return!0},n.getGiveableLayers=function(e){if(this.status===Pu.STATES.RECEIVING||this.status===Pu.STATES.WAIT_FOR_RECEIVE)return[];if(void 0===e&&(e=this.config.length),this.isComplete())return[];for(var t=[],n=this.getTopColor(),a=this.layers.length-1;a>=0;a--){var i=this.layers[a];if(""!==i.config.color){if(n!=i.config.color)break;t.push(i)}}return t.slice(0,e)},n.getTopColor=function(){for(var e=this.layers.length-1;e>=0;e--){var t=this.layers[e].config.color;if(""!==t)return t}},n.getEmptyLayerCount=function(){return this.layers.filter((function(e){return""===e.config.color})).length},n.showHighlight=function(){this.status&&this.status!==Pu.STATES.IDLE||(this.scene.audio.playSound(Tu.default.HIGHLIGHT),this.water.chooseAnimation())},n.hideHighlight=function(){this.status===Pu.STATES.CHOSEN&&(this.scene.audio.playSound(Tu.default.UN_HIGHLIGHT),this.water.unchooseAnimation())},n.shakeAnimation=function(){this.water.shakeAnimation()},n.isCanGiveTo=function(e){var t=e.getEmptyLayerCount();if(0===t)return 0;var n=this.getGiveableLayers(t);return e.isCanAddLayer(n)?n.length:0},n.giveLayers=function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.water.removeChooseTween(),this.target=t,this.target.enableMask(),this.enableMask(),a=t.getEmptyLayerCount(),i=this.getTopLayers(Math.min(n,a)).reverse(),(r=this.getGiveableLayers()).length>i.length)for(s=i.length;s<r.length;s++)r[s].hideHighlight();return i.forEach((function(e){e.setIsHighlighting(!1)})),this.setDepth(this.gameManager.getTopDepth()+1),e.next=12,new Promise((function(e){o.water.moveAnimation(i.length,e,(function(){var e=t.isComplete();0===o.target.water.receiveFrom.length&&(o.target.waveWaterSprite.stop(),o.target.waveWaterSprite.setVisible(!1),o.target.waveWaterSprite.x=-100,o.scene.audio.stopSound(Tu.default.POURING)),e&&0===o.target.water.receiveFrom.length&&(o.smallConfetti.explode(t.x,t.y+t.height/2),o.scene.audio.playSound(Tu.default.CONFETTI),o.scene.player.getPlayerSettings().vibrate&&_u(200))}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getPositionLayer=function(e){var t=this.waterLayerHeight;return{x:this.defaultPosX,y:this.defaultPosY+this.displayHeight-t*(e-1)-2}},n.playHideAnimation=function(){return Promise.resolve()},n.playStartAnimation=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.getTopLayers=function(e){return this.layers.slice(this.layers.length-e,this.layers.length)},n.jiggle=function(e){},n.playWinAnimation=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.layers.forEach((function(e){t.push(e.playWinAnimation())})),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.isGiveableLayersReadyRunAnimation=function(){if(!this.isReadyRunAnimation())return!1;for(var e=this.getGiveableLayers(),t=0;t<e.length;t++)if(!e[t].isReadyRunAnimation())return!1;return!0},n.updateTube=function(){this.updateWater(),this.updateMask(),this.updateHitArea()},n.updateMask=function(){this.tubeMaskImage.setPosition(this.x,this.y),this.tubeMaskImage.setRotation(this.rotation)},n.updateWater=function(){var e=this.scene.world.getPixelRatio(),t=this.getBottomCenter(),n=this.getBounds(),a=this.rotation,i=this.gameManager.getRatioScale();this.water.updateWaterLayerHeight(this.waterLayerHeight*Math.cos(this.rotation)),this.water.updatePosition(n.x+n.width/2,t.y+Math.abs(this.frame.width*Math.sin(a)/(2*e))*i)},n.updatePositionWaveWater=function(){var e=this;this.layers.filter((function(e){return e.status===ku.WATER_LAYER_STATES.RECEIVING})).forEach((function(t){if(t.percent>0&&t.percent<1){var n=t.getWorldPosition();e.waveWaterSprite.setPosition(n.x,n.y-t.getHeight())}}))},n.updateHitArea=function(){var e=this.gameManager.getRatioScale(),t=this.getTopCenter();this.hitArea.setRotation(this.rotation),this.hitArea.setPosition(t.x-Pu.HEIGHT*e/2*Math.sin(this.rotation),t.y+Pu.HEIGHT*e/2*Math.cos(this.rotation))},n.getCurrentNumberLayer=function(){for(var e=0;e<this.layers.length;e++)if(""===this.layers[e].config.color)return e;return this.layers.length},n.setInteractive=function(){return this.hitArea.setInteractive(),this},n.disableInteractive=function(){return this.hitArea.disableInteractive(),this},n.setDefaultPosition=function(e,t){e&&(this.defaultPosX=e),t&&(this.defaultPosY=t)},n.enableMask=function(){var e=this;this.waveWaterSprite.setMask(this.tubeMask),this.layers.forEach((function(t){t.setMask(e.tubeMask)}))},n.disableMask=function(){this.waveWaterSprite.clearMask(),this.layers.forEach((function(e){e.clearMask()}))},n.isReadyRunAnimation=function(){return!this.status||(this.status===Pu.STATES.IDLE||this.status===Pu.STATES.EMPTY||this.status===Pu.STATES.COMPLETE||this.status===Pu.STATES.CHOSEN)},n.isContainLayersSameColor=function(){for(var e=this.getTopColor(),t=0;t<this.layers.length;t++){if(""===this.layers[t].config.color)return!0;if(this.layers[t].config.color!==e)return!1}return!0},n.giveLayersAutoComplete=function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],i=[],r=0;r<this.layers.length;r++)""!==this.layers[r].config.color&&i.push(this.layers[r]);return this.flipX!==t.flipX&&(i=i.reverse()),a.push(this.giveLayers(t,i.length)),e.next=7,Promise.all([].concat(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setStatus=function(e){this.status=e},n.speedUp=function(){for(var e,t=qu(this.water.receiveFrom);!(e=t()).done;){e.value.water.tweenTimeScale=GameCore.Configs.Gameplay.FastPourTimeScale}},n.resetTweenTimeScale=function(){this.water.tweenTimeScale=this.scene.gameManager.getNormalTweenTimeScale()},n.getDepth=function(){return this.depth},t}(Phaser.GameObjects.Image),nl=Wu.WAVE_WATER,al=nl.KEY,il=nl.TEXTURE,rl=nl.FRAME_RATE,sl=nl.START,ol=nl.END,cl=nl.PREFIX,ul=nl.ZERO_PAD,ll=function(e){function t(t){var n={repeat:-1,frameRate:rl,frames:t.generateFrameNames(il,{prefix:cl,start:sl,end:ol,zeroPad:ul})};return e.call(this,t,al,n)||this}return(0,Z.default)(t,e),t}(Phaser.Animations.Animation),hl=function(){function e(e){this.scene=e,this.createAnimations()}var t=e.prototype;return t.createAnimations=function(){var e=Wu.WAVE_WATER,t=new ll(this.scene.anims);this.scene.anims.add(e.KEY,t)},t.getParticleEmitters=function(e){var t=this,n=[];return e.forEach((function(e){e instanceof Phaser.GameObjects.Container&&n.push.apply(n,t.getParticleEmitters(e.getAll())),e instanceof Phaser.GameObjects.Particles.ParticleEmitterManager&&n.push(e)})),n},t.checkExistAnimation=function(){var e=this.scene.game.globalScene;if(this.scene.tweens.getAllTweens().length>0||e.tweens.getAllTweens().length>0)return!0;for(var t=this.getParticleEmitters(this.scene.children.getChildren()),n=0;n<t.length;n++){var a=t[n].emitters.list;if(a.length>0)for(var i=0;i<a.length;i++)if(a[i].getAliveParticleCount()>0)return!0}return!1},e}(),dl=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.limitFps=function(e){void 0===e&&(e=60),this.scene.game.loop.raf.target=1e3/e},t.getActualFps=function(){return 1e3/this.scene.game.loop.raf.target},e}(),fl=function(){function e(e){this.currentMaxBonusScore=void 0,this.currentMinBonusScore=void 0,this.currentMinMove=void 0,this.currentScore=void 0,this.scene=void 0,this.currentLevel=void 0,this.currentMove=void 0,this.scene=e}var t=e.prototype;return t.initScoreManager=function(t,n){this.currentMaxBonusScore=Lu.MAX_DEFAULT_BONUS_SCORE+(t-1)*Lu.MORE_MAX_BONUS_SCORE_EACH_LEVEL,this.currentMinBonusScore=Lu.MIN_DEFAULT_BONUS_SCORE+(t-1)*Lu.MORE_MIN_BONUS_SCORE_EACH_LEVEL,this.currentLevel=t,this.currentMinMove=n,this.currentMove=0;var a=e.getBonusScoreFromLevel(this.currentLevel);this.currentScore=0+a,this.scene.header.setScoreText(this.currentScore),this.scene.storage.dispatch(Co({score:this.currentScore}))},t.moreMove=function(e){void 0===e&&(e=1),this.currentMove+=e,this.currentScore-=1,this.scene.header.setScoreText(this.currentScore),this.scene.myInfoContainer.setPlayerScore(this.currentScore),this.scene.storage.dispatch(Co({score:this.currentScore}))},e.getBonusScoreFromLevel=function(e){var t=0;switch(!0){case e<=50:t=50*e;break;case 51<=e&&e<=100:t=2500+100*(e-50);break;case 101<=e&&e<=500:t=7500+200*(e-100);break;case 501<=e:t=87500+250*(e-500)}return t},e}(),pl=tr.default.DEFAULT,gl=pl.KEY,vl=pl.FRAME;!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(Qu||(Qu={}));var ml=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.timeline=void 0,n.name="SuggestionHand",n.addHand(),n.kill(),n.setDepth(Ji.default.TUTORIAL),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:gl,frame:vl.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(86,110),this.add(this.hand)},n.createTimeline=function(e,t,n,a,i){var r=this;void 0===a&&(a=0),void 0===i&&(i=800);var s=1/this.scene.world.getPixelRatio()*.5,o=e===Qu.Left?-20:20;this.hand.angle=o,this.hand.setPosition(t.x,t.y),this.hand.setScale(1.2*s);var c=this.scene.tweens.createTimeline({loop:2,loopDelay:i,onStart:function(){return r.revive()},onComplete:function(){r.stopTimeline(),r.scene.gameManager.hideHint()}});return c.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Sine.In,props:{alpha:{from:0,to:1,duration:300}}}),c.add({delay:a,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:400,from:1.2*s,to:s}}}),c.add({targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:s,to:1.2*s}}}),c.add({targets:[this.hand],delay:200,duration:350,ease:Phaser.Math.Easing.Quintic.Out,props:{x:n.x,y:n.y}}),c.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:300,from:1.2*s,to:s}}}),c.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:300,from:s,to:1.2*s}},onComplete:function(){r.hand.scale=1.2*s}}),c.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:1,to:0,duration:300}},onComplete:function(){r.hand.x=t.x,r.hand.y=t.y,r.hand.scale=1.2*s}}),c.play(),c},n.playAnimation=function(e,t,n,a,i){var r=this;void 0===a&&(a=0),void 0===i&&(i=800),this.hand.flipX=e===Qu.Left,this.timeline?this.timeline.once("loop",(function(){var s;null==(s=r.timeline)||s.stop(),r.timeline=r.createTimeline(e,t,n,a,i)})):this.timeline=this.createTimeline(e,t,n,a,i)},n.stopAnimation=function(){var e=this;this.timeline&&this.timeline.once("loop",(function(){e.stopTimeline()}))},n.stopTimeline=function(){var e;null==(e=this.timeline)||e.stop(),this.timeline=void 0,this.hand.setAlpha(0),this.kill()},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),yl=ml,El=function(){function e(e){this.scene=void 0,this.tapHand=void 0,this.suggestions=[],this.scene=e,this.createTapHand(e),this.tapHand.setDepth(Ji.default.ON_TOP)}var t=e.prototype;return t.createTapHand=function(e){void 0==this.tapHand&&(this.tapHand=new yl(e))},t.clearSuggestion=function(){this.suggestions=[]},t.stop=function(){var e;null==(e=this.tapHand)||e.stopAnimation()},t.start=function(){this.tapHand.kill()},t.move=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene.gameManager,n=this.scene.gameZone,a=n.width,n.height,!t.isWin()&&!t.isLose()){e.next=4;break}return e.abrupt("return",this.stop());case 4:return i=this.scene.footer,e.next=7,this.getBestSuggestion();case 7:if(r=e.sent,this.tapHand.revive(),0!==r.length){e.next=16;break}(s=i.addTubeButton.getIsDisabled()?i.undoButton.getWorldPosition():i.addTubeButton.getWorldPosition()).x+=5,s.y+=18,this.tapHand.playAnimation(Qu.Right,s,s),e.next=27;break;case 16:if(o=t.layerContainers[r[0]],c=t.layerContainers[r[1]],u=o.getPositionLayer(o.layers.length-o.getEmptyLayerCount()),l=c.getPositionLayer(c.layers.length-c.getEmptyLayerCount()+1),!(u.x<l.x)){e.next=23;break}return this.tapHand.playAnimation(Qu.Right,u,l),e.abrupt("return");case 23:if(!(u.x>l.x)){e.next=26;break}return this.tapHand.playAnimation(Qu.Left,u,l),e.abrupt("return");case 26:u.x<a/2?this.tapHand.playAnimation(Qu.Right,u,l):this.tapHand.playAnimation(Qu.Left,u,l);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getBestSuggestion=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findSuggestions();case 2:if(0!==this.suggestions.length){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",this.suggestions[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.findSuggestions=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearSuggestion(),e.next=3,this.scene.gameManager.getSolution();case 3:this.suggestions=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),Sl=El,Al=function(e){function t(t){return e.call(this,t)||this}(0,Z.default)(t,e);var n=t.prototype;return n.spawn=function(){var e=this.getChildren().find((function(e){return!e.visible&&!e.active}));if(e)return e.setActive(!0),e.setVisible(!0),e;var t=this.createNewTreeBranch();return this.add(t),t},n.clearAll=function(){this.getChildren().forEach((function(e){e.setVisible(!1),e.setActive(!1)}))},n.createNewTreeBranch=function(){return new tl(this.scene,this.scene.gameManager)},t}(Phaser.GameObjects.Group),bl=tr.default.DEFAULT,Tl=bl.KEY,wl=bl.FRAME,Cl=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.timeline=void 0,n.name="TapTutorialHand",n.addHand(),n.setDepth(Ji.default.TUTORIAL),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Tl,frame:wl.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.createTimeline=function(e,t,n,a){var i=this;void 0===n&&(n=0),void 0===a&&(a=800);var r=1/this.scene.world.getPixelRatio();this.hand.setPosition(e.x,e.y),this.hand.setRotation(0),this.hand.setAngle(20),this.hand.setScale(.7*r);var s=this.scene.tweens.createTimeline({loop:-1,loopDelay:a,onStart:function(){return i.revive()}});return s.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Sine.In,props:{alpha:{from:0,to:1,duration:300}}}),s.add({delay:n,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:400,from:.7*r,to:.5*r}}}),s.add({targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.5*r,to:.7*r}}}),s.add({targets:[this.hand],delay:200,duration:350,ease:Phaser.Math.Easing.Quintic.Out,props:{x:t.x,y:t.y}}),s.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:300,from:.7*r,to:.5*r}}}),s.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:300,from:.5*r,to:.7*r}},onComplete:function(){i.hand.scale=.7*r}}),s.add({targets:[this.hand],duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:1,to:0,duration:300}},onComplete:function(){i.hand.x=e.x,i.hand.y=e.y,i.hand.scale=.7*r}}),s.play(),s},n.playAnimation=function(e,t,n,a){var i=this;void 0===n&&(n=0),void 0===a&&(a=800),this.timeline?this.timeline.once("loop",(function(){var r;null==(r=i.timeline)||r.stop(),i.timeline=i.createTimeline(e,t,n,a)})):this.timeline=this.createTimeline(e,t,n,a)},n.stopAnimation=function(){var e=this;this.timeline&&this.timeline.once("loop",(function(){var t;null==(t=e.timeline)||t.stop(),e.timeline=void 0,e.hand.setAlpha(0),e.kill()}))},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},t}(Phaser.GameObjects.Container),Il=Cl,xl=function(){function e(e){this.scene=void 0,this.tapHand=void 0,this.isRunning=void 0,this.step=0,this.scene=e,this.step=0}var t=e.prototype;return t.createTapHand=function(){void 0==this.tapHand&&(this.tapHand=new Il(this.scene))},t.start=function(){this.isRunning||(this.isRunning=!0,this.createTapHand(),this.tapHand.kill(),this.step=0,this.scene.analytics.event(Tn.AnalyticsEvents.TUTORIAL_BEGIN))},t.stop=function(){var e;this.isRunning&&(this.isRunning=!1,null==(e=this.tapHand)||e.stopAnimation(),this.scene.analytics.event(Tn.AnalyticsEvents.TUTORIAL_COMPLETE))},t.move=function(){if(!this.isRunning)return this.stop();var e=this.scene.gameManager;if(e.isWin()||e.isLose())return this.stop();this.tapHand.revive();var t=e.getAllValidMoves();if(0!==t.length){this.step+=1,this.scene.analytics.event(Tn.AnalyticsEvents.TUTORIAL_STEP,{tutorial_step:this.step});var n=t[0],a=e.layerContainers[n[0]],i=e.layerContainers[n[1]],r=a.getPositionLayer(a.layers.length-a.getEmptyLayerCount()),s=i.getPositionLayer(i.layers.length-i.getEmptyLayerCount()+1);this.tapHand.playAnimation(r,s)}},e}(),_l=tr.default.DEFAULT,Pl=_l.KEY,kl=_l.FRAME,Ll=function(e){function t(t){var n;return(n=e.call(this,t,0,0,Pl,kl.SQUARE)||this).status=void 0,n.percent=void 0,n.realWidth=0,n.realHeight=0,n.tween=void 0,n.gameManager=void 0,n.config=void 0,n.index=void 0,n.layerContainer=void 0,n.originScale=void 0,n.color=void 0,n.setActive(!1).setVisible(!1),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.initDefault=function(e){this.status=ku.WATER_LAYER_STATES.NORMAL,this.config=JSON.parse(JSON.stringify(e)),this.index=e.index,this.layerContainer=e.layerContainer,this.setOrigin(.5,1),this.scene.add.existing(this),this.setActive(!0).setVisible(!0),this.setColor(e.color),this.setColorLogic(e.color)},n.setEmpty=function(){this.status=ku.WATER_LAYER_STATES.EMPTY,this.setHeight(0)},n.getBonusHeight=function(){return 0},n.setWidth=function(e){this.realWidth=e,this.displayWidth=e},n.getWidth=function(){return this.realWidth},n.setHeight=function(e){this.realHeight=e,this.displayHeight=e;var t=this.layerContainer.waterLayerHeight;this.percent=this.realHeight/(t*Math.cos(this.layerContainer.rotation)+this.getBonusHeight())},n.setPercent=function(e){var t=this.layerContainer.waterLayerHeight;this.setHeight(t*Math.cos(this.layerContainer.rotation)*e)},n.getHeight=function(){return this.realHeight},n.setColor=function(e){this.color=e,""===e?this.setEmpty():(this.tint=Ru[e],this.setTint(Ru[e]))},n.getColor=function(){return this.color},n.moveTo=function(){var e=(0,q.default)(J().mark((function e(t,n,a){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===a&&(a=0);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),n.showHighlight=function(){},n.hideHighlight=function(){},n.playStartAnimation=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playWinAnimation=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.setIsHighlighting=function(e){},n.isReadyRunAnimation=function(){return!0},n.isMoving=function(){return!1},n.completeMoving=function(){},n.setStatus=function(e){this.status=e},n.getColorLogic=function(){return this.config.color},n.setColorLogic=function(e){this.config.color=e},t}(Phaser.GameObjects.Image),Rl=tr.default.DEFAULT,Ol=(Rl.KEY,Rl.FRAME),Dl=function(e){function t(t){var n;return(n=e.call(this,t)||this).setFrame(Ol.TUBE_MASK),n}(0,Z.default)(t,e);var n=t.prototype;return n.setHeight=function(t){var n=this.scene.gameManager.getRatioScale();if(this.layerContainer.status===Pu.STATES.MOVING||this.layerContainer.status===Pu.STATES.POURING){this.setFrame(Ol.SQUARE);var a=t+this.getBonusHeight();this.setCrop(0,0,this.frame.width,this.frame.height),e.prototype.setHeight.call(this,a)}else{this.setFrame(Ol.TUBE_MASK),e.prototype.setHeight.call(this,t);var i=this.scene.world.getPixelRatio(),r=1/i;this.setScale(r*n),this.setCrop(0,this.frame.height-t/n*i,Pu.WIDTH*i,t*i/n)}},n.setEmpty=function(){this.status=ku.WATER_LAYER_STATES.EMPTY,e.prototype.setHeight.call(this,0)},n.getBonusHeight=function(){var e=this.scene.gameManager.getRatioScale(),t=this.layerContainer.rotation;return Math.abs(Pu.WIDTH/2*Math.sin(t))*e},t}(Ll),Ml=function(){function e(e){this.scene=void 0,this.waterLayers=[],this.firstWaterLayers=[],this.scene=e}var t=e.prototype;return t.spawn=function(e){var t;if(void 0===e&&(e=!1),t=e?this.firstWaterLayers.find((function(e){return!e.visible&&!e.active})):this.waterLayers.find((function(e){return!e.visible&&!e.active})))return t.setActive(!0),t.setVisible(!0),t;if(e){var n=this.createNewFirstWaterLayer();return this.firstWaterLayers.push(n),n}var a=this.createNewWaterLayer();return this.waterLayers.push(a),a},t.clearAll=function(){this.waterLayers.forEach((function(e){e.setVisible(!1),e.setActive(!1)})),this.firstWaterLayers.forEach((function(e){e.setVisible(!1),e.setActive(!1)}))},t.createNewWaterLayer=function(){return new Ll(this.scene)},t.createNewFirstWaterLayer=function(){return new Dl(this.scene)},e}(),Bl=function(){function e(e){this.state=void 0,this.gameSuccessors=void 0,this.lastColors=void 0,this.score=void 0,this.state=e,this.calculateLastColors(),this.processState()}var t=e.prototype;return t.getScore=function(){return this.score},t.processState=function(){this.gameSuccessors=this.calculateAllSuccessors(),this.score=this.calculateStateScore()},t.getState=function(){return this.state},t.isWin=function(){for(var e=0;e<this.state.bottleList.length;e++){var t=this.getLastColor(e);if(0!==t.count&&t.count!==this.state.bottleVolume)return!1}return!0},t.isLose=function(){return 0===this.gameSuccessors.length},t.getAllSuccessors=function(){return this.gameSuccessors},t.calculateAllSuccessors=function(){var e=[],t=[];this.state.bottleList.forEach((function(e){0!==e.length&&t.push(e[0])}));for(var n=0;n<this.state.bottleList.length;n++)for(var a=0;a<this.state.bottleList.length;a++){if(n!==a)if(this.isCanGiveTo(n,a)){var i=this.give(n,a);e.push({from:n,to:a,state:i})}}return e},t.give=function(e,t){for(var n=JSON.parse(JSON.stringify(this.state)),a=n.bottleList,i=a[e],r=a[t],s=this.getLastColor(e),o=0;o<s.count;o++)i.pop(),r.push(s.color);return n},t.isCanGiveTo=function(e,t){var n=this.state.bottleList,a=n[e],i=n[t],r=this.getEmptyCount(t),s=this.getLastColor(t),o=this.getLastColor(e);if(o.count===a.length){if(0==s.count)return!1;if(s.count!=i.length)return!1}return 0!==o.count&&(0===s.count||!(o.count>r)&&o.color==s.color)},t.getLastColor=function(e){return this.lastColors[e]},t.calculateLastColors=function(){this.lastColors=[];for(var e=0;e<this.state.bottleList.length;e++)this.lastColors.push(this.calculateLastColor(e))},t.calculateLastColor=function(e){var t=this.state,n=t.bottleList,a=(t.bottleVolume,n[e]);if(0===a.length)return{count:0,color:""};for(var i=0,r=a[a.length-1],s=a.length-1;s>=0;s--){if(a[s]!=r)break;i+=1}return{color:r,count:i}},t.getEmptyCount=function(e){var t=this.state,n=t.bottleList;return t.bottleVolume-n[e].length},t.calculateStateScore=function(){if(this.isWin())return 999999999999999;if(this.isLose())return-99999999999999;var e=0;e+=this.getAllSuccessors().length;for(var t=0;t<this.state.bottleList.length;t++){var n=this.state.bottleList[t];if(0!==n.length)for(var a=n[0],i=1;i<n.length;i++)a===n[i]?e+=2*(this.state.bottleVolume-i):(a=n[i],e-=2*(i+1));else e+=2}return e},e}(),Nl=function(e,t){this.data=void 0,this.value=void 0,this.data=e,this.value=t};Nl.prototype.valueOf=function(){return this.value};var Ul=function(){function e(){this.values=void 0,this.values=[]}var t=e.prototype;return t.isEmpty=function(){return 0===this.values.length},t.parent=function(e){return Math.floor((e-1)/2)},t.leftChild=function(e){return 2*e+1},t.rightChild=function(e){return 2*e+2},t.isLeaf=function(e){return e>=Math.floor(this.values.length/2)&&e<=this.values.length-1},t.swap=function(e,t){var n=[this.values[t],this.values[e]];this.values[e]=n[0],this.values[t]=n[1]},t.heapifyDown=function(e){if(!this.isLeaf(e)){var t=this.leftChild(e),n=this.rightChild(e),a=e;this.values[t]>this.values[a]&&(a=t),this.values[n]>=this.values[a]&&(a=n),a!==e&&(this.swap(e,a),this.heapifyDown(a))}},t.heapifyUp=function(e){for(var t=e,n=this.parent(t);t>0&&this.values[t]>this.values[n];)this.swap(t,n),t=n,n=this.parent(n)},t.add=function(e,t){var n=new Nl(e,t);this.values.push(n),this.heapifyUp(this.values.length-1)},t.peek=function(){return this.values[0]},t.extractMax=function(){var e=this.values[0],t=this.values.pop();return 0===this.values.length||(this.values[0]=t,this.heapifyDown(0)),e},t.buildHeap=function(e){this.values=e;for(var t=Math.floor(this.values.length/2);t>=0;t--)this.heapifyDown(t)},t.print=function(){for(var e=0;!this.isLeaf(e);)e++},e}(),Gl=Ul,Fl=function(){function e(){this.count=0}var t=e.prototype;return t.solve=function(e){this.count=0;var t=new Bl(e),n=new Gl,a=[];for(a=this.DFSSolve({state:t,move:[]},n);0==a.length&&!n.isEmpty()&&this.count<2e3;){var i=n.extractMax().data;a=this.DFSSolve(i,n)}return{moves:a,searchCount:this.count}},t.DFSSolve=function(e,t){if(this.count+=1,e.state.isWin()){for(var n=e,a=[];void 0!=(null==(i=n)?void 0:i.parentState);){var i;a.unshift(n.move),n=n.parentState}return a}if(!e.state.isLose())for(var r=e.state.getAllSuccessors(),s=0;s<r.length;s++){var o=r[s],c=o.state,u=[o.from,o.to],l=new Bl(c);t.add({state:l,move:u,parentState:e},l.getScore())}return t.isEmpty(),[]},e}();function Kl(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Vl={1:0,2:84,3:78,4:72,5:66,6:60,7:54,8:48},zl=function(){function e(e){var t=this;if(this.scene=void 0,this.layerManager=void 0,this.fpsManager=void 0,this.animationManager=void 0,this.scoreManager=void 0,this.layerContainerManager=void 0,this.levelConfig=void 0,this.currentSelected=void 0,this.layerContainers=[],this.lastMoves=[],this.ratioScale=1,this.lastPromiseGive=void 0,this.tutorialManager=void 0,this.solveWorker=void 0,this.gameLogicSolver=void 0,this.loopHighlightHintButtonTimer=void 0,this.suggestionManager=void 0,this.startLevelTime=0,this.numberOfMoves=0,this.isFastPour=!1,this.isLayerContainersContainLayersSameColor=function(){for(var e,n=Kl(t.layerContainers);!(e=n()).done;){if(!e.value.isContainLayersSameColor())return!1}return!0},this.isUnLimitFPS=!0,this.delayLimitFPS=void 0,this.scene=e,this.layerContainerManager=new Al(e),this.layerManager=new Ml(e),this.tutorialManager=new xl(e),this.suggestionManager=new Sl(e),this.scoreManager=new fl(e),"undefined"!==typeof Worker)try{this.solveWorker=new Worker(new URL(n.p+n.u(26),n.b),{name:"solving-worker",type:void 0})}catch(a){this.solveWorker=void 0}this.gameLogicSolver=new Fl,this.fpsManager=new dl(e),this.animationManager=new hl(e)}var t=e.prototype;return t.updateTweenTimeScale=function(){var e=this.scene.player.getPlayerSettings().fastPour;this.isFastPour=e;for(var t,n=this.getNormalTweenTimeScale(),a=Kl(this.layerContainers);!(t=a()).done;){var i=t.value;i&&(i.water.tweenTimeScale=n)}},t.getNormalTweenTimeScale=function(){return this.isFastPour?GameCore.Configs.Gameplay.FastPourTimeScale:1},t.buildLevel=function(e){var t=this.scene.level.getLevel();return this.scoreManager.initScoreManager(t,10),this.scene.audio.playSound(Tu.default.BOARD_START),this.showHint(),this.tutorialManager.stop(),this.levelConfig=JSON.parse(JSON.stringify(e)),this.lastMoves=[],this.currentSelected=void 0,this.numberOfMoves=0,GameCore.Configs.Tutorial.LevelTutorial.includes(this.levelConfig.level)&&this.tutorialManager.start(),this.initLayerContainer(e)},t.initLayerContainer=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o,c,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.layerContainerManager.clearAll(),this.layerManager.clearAll(),n=t.coloredBottleCount+t.emptyBottleCount,this.layerContainers=[],a=0;a<n;a++){for(i=t.bottleList[a],r=this.layerContainerManager.spawn(),s=[],o=0;o<t.bottleVolume;o++)c="",i[o]&&(c=i[o]),(u=0===o?this.layerManager.spawn(!0):this.layerManager.spawn()).initDefault({layerContainer:r,index:o,color:c}),s.push(u);r.initDefault({index:a,length:t.bottleVolume,layers:s}),r.setInteractive(),this.layerContainers.push(r)}return this.alignLayerContainers(),e.next=8,this.playStartAnimation();case 8:this.tutorialManager.move(),this.updateTweenTimeScale();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getSolution=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=performance.now(),n={coloredBottleCount:this.levelConfig.coloredBottleCount,emptyBottleCount:this.levelConfig.emptyBottleCount,bottleVolume:this.levelConfig.bottleVolume,bottleList:[]},a=function(e){var t=[];c.layerContainers[e].layers.forEach((function(e){""!==e.config.color&&t.push(e.config.color)})),n.bottleList.push(t)},i=0;i<this.layerContainers.length;i++)a(i);if(!this.solveWorker){e.next=12;break}return e.next=9,this.getSolutionWithWorker(n);case 9:r=e.sent,e.next=13;break;case 12:r=this.getSolutionWithGameLogicSolver(n);case 13:return s=performance.now(),o=s-t,this.scene.analytics.event(Tn.AnalyticsEvents.GET_SOLUTION,{hint_duration:Math.round(o),hint_move:JSON.stringify(r.moves[0]||-1)}),e.abrupt("return",r.moves);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getSolutionWithWorker=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o,c=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.game.globalScene,a=new Promise((function(e){c.solveWorker?(c.solveWorker.postMessage({state:t}),c.solveWorker.onmessage=function(){var t=(0,q.default)(J().mark((function t(n){var a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.data,e(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):e({moves:[],searchCount:-1})})),i=new Promise((function(e,t){c.scene.time.delayedCall(200,(function(){return t()}))})),r={moves:[],searchCount:-1},e.prev=4,e.next=7,Promise.race([a,i]);case 7:r=e.sent,e.next=27;break;case 10:return e.prev=10,e.t0=e.catch(4),n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:this.scene.lang.getText("loading"),duration:0,loading:!0}),s=new Promise((function(e,t){c.scene.time.delayedCall(2e3,(function(){return t()}))})),e.prev=14,e.next=17,Promise.race([a,s]);case 17:r=e.sent,e.next=24;break;case 20:e.prev=20,e.t1=e.catch(14),null==(o=this.solveWorker)||o.terminate(),this.scene.analytics.event(Tn.AnalyticsEvents.GET_SOLUTION_TIME_OUT);case 24:return e.prev=24,n.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.finish(24);case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,this,[[4,10],[14,20,24,27]])})));return function(t){return e.apply(this,arguments)}}(),t.getSolutionWithGameLogicSolver=function(e){return this.gameLogicSolver?this.gameLogicSolver.solve(e):{moves:[],searchCount:-1}},t.playStartAnimation=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.playWinAnimation=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.alignLayerContainers=function(e){void 0===e&&(e=!1),e?this.alignLayerContainersAfterWatchAd():this.normalAlignLayerContainers()},t.normalAlignLayerContainers=function(){var e=this;this.ratioScale=this.calculateRatioScale();var t=this.layerContainers.length,n=Math.ceil(t/2),a=Math.floor(t/2),i=Vl[Math.max(n,a)]*this.ratioScale,r=this.scene.world.getWorldSize(),s=r.width,o=r.height;this.layerContainers.forEach((function(t){t.setWorldSize(e.ratioScale*t.originWidth,e.ratioScale*t.originHeight),t.setOrigin(.5,0),t instanceof tl&&t.water.setWidth((Pu.WIDTH-2)*e.ratioScale)}));for(var c=0;c<n;c++){this.layerContainers[2*c].setPosition(s/2+i*(-n/2+c)+i/2,o/2-180)}for(var u=0;u<a;u++){this.layerContainers[2*u+1].setPosition(s/2+i*(-a/2+u)+i/2,o/2+30)}},t.alignLayerContainersAfterWatchAd=function(){var e=this;this.ratioScale=this.calculateRatioScale();var t=this.layerContainers.length,n=Math.floor(t/2),a=Math.ceil(t/2),i=Vl[Math.max(n,a)]*this.ratioScale,r=this.scene.world.getWorldSize(),s=r.width,o=r.height;this.layerContainers.forEach((function(t){t.setWorldSize(e.ratioScale*t.originWidth,e.ratioScale*t.originHeight),t.setOrigin(.5,0),t.layers.forEach((function(t){t.setWidth((Pu.WIDTH-2)*e.ratioScale)}))}));for(var c=0;c<n;c++){this.layerContainers[2*c].setPosition(s/2+i*(-n/2+c)+i/2,o/2-180)}this.layerContainers[this.layerContainers.length-1].setPosition(s/2+i*(-a/2+a-1)+i/2,o/2+30);for(var u=0;u<a-1;u++){this.layerContainers[2*u+1].setPosition(s/2+i*(-a/2+u)+i/2,o/2+30)}},t.isCanUndo=function(){if(0===this.lastMoves.length)return!1;var e=this.lastMoves[this.lastMoves.length-1],t=e.from,n=e.to,a=this.layerContainers[t],i=this.layerContainers[n];return!(!a.isGiveableLayersReadyRunAnimation()||!i.isGiveableLayersReadyRunAnimation())},t.undo=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isCanUndo()){e.next=2;break}return e.abrupt("return");case 2:return this.unSelectHighlight(),this.numberOfMoves-=1,t=this.lastMoves.pop(),n=t.from,a=t.to,i=t.layerCount,r=this.layerContainers[n],s=this.layerContainers[a],r.water.tweenTimeScale=9,s.water.tweenTimeScale=9,o=s.giveLayers(r,i),this.lastPromiseGive=o,e.next=14,this.lastPromiseGive.then((function(){r.water.tweenTimeScale=c.scene.gameManager.getNormalTweenTimeScale(),s.water.tweenTimeScale=c.scene.gameManager.getNormalTweenTimeScale(),c.lastPromiseGive===o&&c.checkGameState()}));case 14:return this.tutorialManager.move(),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.skipLevel=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.showRewardVideo();case 2:e.sent&&(t=this.scene.level.getLevel(),this.scene.updatePlayerLevel(t+1),this.scene.level.nextLevel(),this.scene.levelUp());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.restartLevel=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.buildLevel(this.levelConfig));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.selectContainer=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showHint(),this.currentSelected){e.next=6;break}t.getGiveableLayers().length>0?this.selectHighLight(t):t.speedUp(),e.next=12;break;case 6:if(this.currentSelected!==t){e.next=9;break}return this.unSelectHighlight(),e.abrupt("return");case 9:n=this.currentSelected,0!=(a=n.isCanGiveTo(t))?(this.scoreManager.moreMove(),this.hideHint(),this.showHint(),this.currentSelected=void 0,this.numberOfMoves+=1,this.lastMoves.push({from:n.config.index,to:t.config.index,layerCount:a}),i=n.giveLayers(t,a),this.lastPromiseGive=i,this.lastPromiseGive.then((function(){r.lastPromiseGive===i&&(r.checkGameState(),r.isLayerContainersContainLayersSameColor()&&r.handleLayerContainersContainLayersSameColor(t))})),this.tutorialManager.move()):(t.shakeAnimation(),this.unSelectHighlight(),this.scene.player.getPlayerSettings().vibrate&&_u(200));case 12:return e.abrupt("return",Promise.resolve());case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.selectHighLight=function(e){e.isGiveableLayersReadyRunAnimation()&&(e.showHighlight(),this.currentSelected=e)},t.unSelectHighlight=function(){var e;null==(e=this.currentSelected)||e.hideHighlight(),this.currentSelected=void 0},t.checkGameState=function(){return this.isWin()?(this.hideHint(),void this.win()):this.isLose()?(this.hideHint(),void this.lose()):void 0},t.isWin=function(){for(var e,t=Kl(this.layerContainers);!(e=t()).done;){var n=e.value;if(!n.isEmpty()&&!n.isComplete())return!1}return!0},t.isLose=function(){return 0===this.getAllValidMoves().length},t.win=function(){var e=this;this.unSelectHighlight(),this.scene.audio.playSound(Tu.default.YOU_WIN),this.scene.time.delayedCall(500,(function(){e.scene.win(),e.tutorialManager.stop()}))},t.lose=function(){this.unSelectHighlight(),this.scene.lose(this.levelConfig.level),this.tutorialManager.stop()},t.addMoreLayerContainer=function(){this.unSelectHighlight();for(var e=[],t=this.layerContainerManager.spawn(),n=0;n<this.levelConfig.bottleVolume;n++){var a=0===n?this.layerManager.spawn(!0):this.layerManager.spawn();a.initDefault({layerContainer:t,index:n,color:""}),e.push(a)}t.initDefault({index:this.layerContainers.length,length:this.levelConfig.bottleVolume,layers:e}),this.layerContainers.push(t),this.alignLayerContainers(!0),this.unSelectHighlight()},t.getAllValidMoves=function(){for(var e=[],t=0;t<this.layerContainers.length;t++)for(var n=this.layerContainers[t],a=0;a<this.layerContainers.length;a++)if(t!=a){var i=this.layerContainers[a],r=i.getEmptyLayerCount(),s=n.getGiveableLayers();i.isCanAddLayer(s)&&r>=s.length&&e.push([t,a])}return e},t.calculateRatioScale=function(){var e=this.layerContainers.length,t=this.scene.ads.getBannerHeight()+75,n=this.scene.world.getWorldSize().height,a=70*Math.ceil(e/2),i=n-70-t;return i<a?i/a:1},t.getRatioScale=function(){return this.ratioScale},t.handleLayerContainersContainLayersSameColor=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tutorial.LevelTutorial.includes(this.levelConfig.level)){e.next=3;break}return e.abrupt("return");case 3:this.unSelectHighlight(),n=[],this.layerContainers.forEach((function(e){if(e instanceof tl&&(e.isGiveableLayersReadyRunAnimation()&&e.getTopColor()))for(var t,a=Kl(e.layers);!(t=a()).done;){if(""===t.value.config.color)return void n.push(e)}})),a=100,i=function(){var e=n[0].getTopColor(),i=n.filter((function(t){if(t.getTopColor()===e)return t}));if(i.forEach((function(e){var t=n.indexOf(e);n.splice(t,1)})),i.length<=1)return"continue";a+=100*i.length;var s=i[Phaser.Math.RND.between(0,i.length-1)];i.forEach((function(e){t===e&&(s=e)})),i.forEach((function(e){if(s!==e){var t=e.giveLayersAutoComplete(s,a);r.lastPromiseGive=t,r.lastPromiseGive.then((function(){r.lastPromiseGive===t&&r.checkGameState()}))}}))};case 8:if(!(n.length>1)){e.next=14;break}if("continue"!==i()){e.next=12;break}return e.abrupt("continue",8);case 12:e.next=8;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showHint=function(){var e=this;this.hideHighLightHintButton(),this.loopHighlightHintButtonTimer=this.scene.time.addEvent({delay:2e4,callback:function(){e.scene.footer.showHighlightHintButton()}})},t.hideHighLightHintButton=function(){var e;null==(e=this.loopHighlightHintButtonTimer)||e.remove(),this.scene.footer.hideHighlightHintButton()},t.hideHint=function(){this.hideHighLightHintButton(),this.suggestionManager.stop(),this.scene.footer.hintButton.setDisabled(!1)},t.updateGameManager=function(){this.animationManager.checkExistAnimation()?this.unLimitedFPS():this.limitFPS()},t.unLimitedFPS=function(){var e;this.isUnLimitFPS=!0,this.fpsManager.limitFps(60),null==(e=this.delayLimitFPS)||e.remove(),this.delayLimitFPS=void 0},t.limitFPS=function(){var e=this;this.isUnLimitFPS&&!this.delayLimitFPS&&(this.isUnLimitFPS=!1,this.delayLimitFPS=this.scene.time.delayedCall(500,(function(){e.fpsManager.limitFps(20),e.delayLimitFPS=void 0})))},t.isReadyToRunAnimation=function(){return this.layerContainers.every((function(e){return e.isGiveableLayersReadyRunAnimation()}))},t.getCurrentLevelPlayTime=function(){return Math.floor((this.scene.time.now-this.startLevelTime)/1e3)},t.getCurrentLevelPlayMoves=function(){return this.numberOfMoves},t.getTopDepth=function(){for(var e,t=0,n=Kl(this.layerContainers);!(e=n()).done;){var a=e.value.getDepth();a>t&&(t=a)}return t},e}(),Hl={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},Wl=function(e){function t(t){return e.call(this,Hl,t)||this}return(0,Z.default)(t,e),t}(Yo.default),jl=Wl,Xl=tr.default.DEFAULT,ql=Xl.KEY,Zl=Xl.FRAME,Ql=function(e){function t(t){var n;return(n=e.call(this,t)||this).cat=void 0,n.createEffect(),n.createCat(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:ql,frame:Zl.BLANK,origin:{x:.5,y:1}}),this.cat.setWorldSize(100,117),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){},n.runCatAnimation=function(){new Rc({targets:[this.cat],duration:1e3,props:{scale:"-=0.02"}}).play()},t}(Phaser.GameObjects.Container),Jl=Ql,$l=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.sadCat=void 0,n.board=void 0,n.titleText=void 0,n.descriptionText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new jl({targets:e,duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+150}},alpha:{value:0,delay:250,duration:150}},onComplete:function(){Phaser.Actions.IncY(e,-150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.setVisible(!1),n.createBoard(),n.createTitleText(),n.createDescriptionText(),n.createTheCat(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Fc(this.scene,0,0,600,102),this.board.setDepth(Ji.default.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.sadCat=new Jl(this.scene),this.sadCat.setDepth(Ji.default.LOGO),this.add(this.sadCat),Phaser.Display.Align.In.Center(this.sadCat,this.board,-140,-19)},n.createTitleText=function(){this.titleText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),depth:Ji.default.TEXT,origin:{x:.5,y:.5},text:"Level Failed"}),this.add(this.titleText),this.titleText.setTint(12010469),Phaser.Display.Align.In.Center(this.titleText,this.board,35,-20)},n.createDescriptionText=function(){this.descriptionText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(20),depth:Ji.default.TEXT,origin:{x:.5,y:.5},text:"You did not reach the target score"}),this.add(this.descriptionText),this.descriptionText.setTint(11632977),Phaser.Display.Align.In.Center(this.descriptionText,this.board,35,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new jl({targets:[this.board],duration:300,props:{y:{start:e+80,to:e},alpha:{start:0,from:0,to:1}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var e=this.sadCat.x;this.theCatAnimation=new jl({targets:[this.sadCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.6,1],delay:150,duration:800,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:e-80,to:e}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.titleText.setAlpha(0),this.descriptionText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new jl({targets:[this.titleText,this.descriptionText],duration:500,delay:this.scene.tweens.stagger(200,{start:200}),props:{y:{getEnd:function(e){return e.y}},alpha:{start:0,from:0,to:1}},completeDelay:1e3,onComplete:this.runExistAnimation})),this.textsAnimation.play()},t}(Phaser.GameObjects.Container),eh=$l,th=tr.default.DEFAULT,nh=th.KEY,ah=th.FRAME,ih=function(e){function t(t,n){var a;return void 0===n&&(n=!1),(a=e.call(this,t)||this).scene=void 0,a.avatar=void 0,a.playerScore=void 0,a.isRightAlign=!1,a.rawX=0,a.scene=t,a.createAvatar(),a.createPlayerScore(),a.isRightAlign=n,n&&a.alignTextToLeft(),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.alignTextToLeft=function(){Phaser.Display.Align.To.LeftCenter(this.playerScore,this.avatar,6,0),this.rawX=this.playerScore.x},n.updateInfo=function(e,t){this.avatar.loadPhoto(e,t)},n.setPlayerScore=function(e){if(void 0===e&&(e=0),e?this.playerScore.setText(""+e):this.playerScore.setText("???"),this.isRightAlign){var t=e?this.getNumberOfScore(e):3;this.playerScore.x=this.rawX-13*t}},n.getNumberOfScore=function(e){return e<10?1:1+this.getNumberOfScore(Math.floor(e/10))},n.createAvatar=function(){this.avatar=new Jo(this.scene,{key:nh,background:ah.BG_AVA,width:42.5,height:42}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this,0,0)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:0,y:.5}}),this.add(this.playerScore),Phaser.Display.Align.To.RightCenter(this.playerScore,this.avatar,6,0),this.rawX=this.playerScore.x},t}(Phaser.GameObjects.Container),rh=ih,sh={targets:[],duration:200,repeat:5,props:{alpha:{start:1,to:.1}}},oh=function(e){function t(t){return e.call(this,sh,t)||this}return(0,Z.default)(t,e),t}(Yo.default),ch=oh,uh=function(e){function t(t){var n;(n=e.call(this,t,0,0,jo.default.PRIMARY.KEY)||this).scene=void 0,n.flickerAnimation=void 0,n.scene=t;var a=n.scene.fontSize(14);return n.setFontSize(a),n.setOrigin(.5,.5),n.setNotifyText("Loading interstitial ad..."),n.setVisible(!1),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.show=function(){this.setVisible(!0),this.runTextAnimation()},n.setNotifyText=function(e){this.setText(e)},n.runTextAnimation=function(){var e,t=this;this.flickerAnimation||(this.flickerAnimation=new ch({targets:[this],yoyo:!0,duration:300,repeat:3,ease:"Sine.easeInOut",onStart:function(){t.setVisible(!0)},onComplete:function(){t.setVisible(!1)}})),null==(e=this.flickerAnimation)||e.play()},t}(Phaser.GameObjects.BitmapText),lh=uh,hh=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.theCat=void 0,n.board=void 0,n.levelText=void 0,n.scoreTargetText=void 0,n.boardAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0)},n.runExistAnimation=function(){if(!n.existAnimation){var e=n.getAll();n.existAnimation=new jl({targets:e,duration:300,ease:Phaser.Math.Easing.Back.In,props:{y:{getStart:function(e){return e.y},getEnd:function(e){return e.y+-150}}},onComplete:function(){Phaser.Actions.IncY(e,150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=t,n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.setLevel=function(e){},n.setScoreTarget=function(e){},n.createBoard=function(){this.board=new Fc(this.scene,0,0,600,102),this.board.setDepth(Ji.default.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.theCat=new Xc(this.scene),this.theCat.setDepth(Ji.default.LOGO),this.add(this.theCat),Phaser.Display.Align.In.Center(this.theCat,this.board,-140,-17)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),depth:Ji.default.TEXT,origin:{x:.5,y:.5}}),this.add(this.levelText),this.levelText.setTint(12010469),Phaser.Display.Align.In.Center(this.levelText,this.board,25,-20)},n.createTargetText=function(){this.scoreTargetText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(26),depth:Ji.default.TEXT,origin:{x:.5,y:.5}}),this.add(this.scoreTargetText),this.scoreTargetText.setTint(11632977),Phaser.Display.Align.In.Center(this.scoreTargetText,this.board,25,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var e=this.board.y;this.boardAnimation=new jl({targets:[this.board],duration:300,props:{y:{start:e+80,to:e}}})}this.boardAnimation.play()},t}(Phaser.GameObjects.Container),dh=hh,fh={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},ph=function(e){function t(t){var n,a,i;return(i=e.call(this,fh,t)||this).posX=void 0,i.handleSwitchPosition=function(){var e;i.posX=-i.posX,null==(e=i.tween)||e.updateTo("x",-i.posX)},null!=(n=i.config)&&n.props?(i.posX=i.config.props.x,null==(a=i.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,i.handleSwitchPosition),i):(0,er.default)(i)}return(0,Z.default)(t,e),t}(Yo.default),gh=ph,vh=n(51),mh=n(29),yh=n(52),Eh={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},Sh=function(e){function t(t){var n,a;(a=e.call(this,Eh,t)||this).spline=void 0,a.createCounter=function(e,t){var n=a.config.onCurveUpdate,i="function"===typeof n?n:null;t.forEach((function(t,n){if(a.scene){var r=e.data[n],s=r.duration,o=r.delay,c=new Phaser.Math.Vector2;a.scene.tweens.addCounter({delay:o,duration:s,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(e){a.spline.getPoint(e.getValue(),c),t.x=c.x,t.y=c.y,i&&i(t)}})}}))};var i=a.config.curve;return i?(a.spline=new Phaser.Curves.Spline(i),null==(n=a.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,a.createCounter),a):(0,er.default)(a)}return(0,Z.default)(t,e),t}(Yo.default),Ah=Sh,bh=tr.default.DEFAULT,Th=bh.KEY,wh=bh.FRAME,Ch=function(e){function t(t){var n;return(n=e.call(this,t,Th,wh.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:wh.BLANK,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*e,end:.1*e,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(e,t,n,a,i){this.stop(),this.reset(),this.emitZone.setSize(a,i),this.emitZone.setPosition(t-a/2,n-i/2),this.emitter.setQuantity(e),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.reset(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},n.reset=function(){this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Ih=Ch,xh=n(53),_h=tr.default.DEFAULT,Ph=_h.KEY,kh=_h.FRAME,Lh=function(e){function t(t){var n;return(n=e.call(this,t,Ph,kh.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:kh.BLANK,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*e,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(e,t,n,a,i){this.stop(),this.emitZone.setSize(a,i),this.emitZone.setPosition(t-a/2,n-i/2),this.emitter.setQuantity(e),this.emitter.start()},n.stop=function(){var e,t;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Rh=Lh,Oh=GameCore.Configs.Network,Dh=tr.default.DEFAULT,Mh=Dh.KEY,Bh=Dh.FRAME,Nh=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).rewardValue=void 0,r.onReward=void 0,r.hand=void 0,r.viewAdButton=void 0,r.skipButton=void 0,r.giftIcon=void 0,r.giftIconWhite=void 0,r.currencyIcon=void 0,r.currencyText=void 0,r.popupContents=void 0,r.cometTwinkle=void 0,r.starTwinkleUp=void 0,r.sparksExplosive=void 0,r.popupFadeOutAnimation=void 0,r.backgroundFadeInAnimation=void 0,r.contentShowUpAnimation=void 0,r.giftEntrancesAnimation=void 0,r.giftAttentionAnimation=void 0,r.iconAttentionAnimation=void 0,r.giftShakeAnimation=void 0,r.giftOpenAnimation=void 0,r.adsTimer=void 0,r.open=function(t){e.prototype.open.call((0,er.default)(r),t);var n=r.getData("awardDiamonds");r.setRewardValue(n),r.runOpenAnimation()},r.handleClosePopup=function(){r.runCloseAnimation()},r.handleShowRewardedVideoAd=(0,q.default)(J().mark((function e(){var t,n,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=r.scene,n=t.audio,a=t.game,r.viewAdButton.setDisabled(!0),a.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),e.next=8,new Promise((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Oh.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 8:return e.next=10,r.scene.ads.showRewardedVideoAsync();case 10:a.globalScene.screen.close($i.ScreenKeys.NOTIFY_SCREEN),r.starTwinkleUp.stop(),r.popupContents.killGroup(),r.runTheGiftEntrancesAnimation(0,1500),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=22;break}if("USER_INPUT"!==e.t0.code){e.next=22;break}return r.showNotifySkipAds(),e.abrupt("return");case 22:r.showNotifyNoAds();case 23:return e.prev=23,null==(i=r.adsTimer)||i.destroy(),r.scene.audio.unmuteAll(),r.scene.audio.playMusic(),r.viewAdButton.setDisabled(!1),e.finish(23);case 29:case"end":return e.stop()}}),e,null,[[0,16,23,29]])}))),r.handleTheGiftClick=function(){r.setTheGiftClickable(!1),r.logButtonEvent("OpenGift"),r.hand.kill(),r.giftIconWhite.revive(),r.scene.tweens.killTweensOf(r.giftIcon),Phaser.Display.Align.In.Center(r.giftIconWhite,r.giftIcon),r.runShakeTheGift(),r.runOpenTheGift()},r.showNotifyNoAds=function(e){e&&e.name!==$i.ScreenKeys.NOTIFY_SCREEN||r.scene.game.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"No ads to display!",duration:1200,loading:!1})},r.showNotifySkipAds=function(){r.scene.game.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},r.runCloseAnimation=function(){r.runExitsAnimation(0,200)},r.setDepth($i.ScreenDepth.POPUP),r.background.setAlpha(.8),r.createViewAdsButton(),r.createSkipButton(),r.createCurrencyIcon(),r.createCurrencyText(),r.createEffects(),r.createGiftIcon(),r.createHand(),r.createContentsGroup(),r}(0,Z.default)(t,e);var n=t.prototype;return n.setTheGiftClickable=function(e){e?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(e){var t=this.getScreenName();this.scene.analytics.event(Tn.AnalyticsEvents.BUTTON_CLICK,{button_name:e,screen_name:t})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.reviveGroup(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(e,t){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new ru.default({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new yh.default({targets:this.popupContents.getChildren(),duration:t,delay:this.scene.tweens.stagger(100,{start:e}),props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(e){var t=this.currencyIcon,n=t.x,a=t.y,i=t.width,r=t.height;this.starTwinkleUp.run(1,n,a,i,r),this.iconAttentionAnimation||(this.iconAttentionAnimation=new Rc({targets:[this.currencyIcon],delay:e,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(e,t){var n,a=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var i=this.giftIcon,r=i.x,s=i.y,o=this.currencyText,c={x:r,y:s},u={x:o.x,y:o.y},l=1/this.scene.world.getPixelRatio();this.giftEntrancesAnimation=new Ah({targets:[this.giftIcon],delay:e,duration:t,curve:[[c.x,c.y],[c.x-80,c.y+80],[u.x,u.y]],props:{scale:{start:.5*l,to:l},angle:{start:20,to:0}},onCurveUpdate:function(e){var t=e.x+Phaser.Math.RND.between(-40,40),n=e.y+Phaser.Math.RND.between(-40,40);a.cometTwinkle.explode(1,t,n)},onComplete:function(){a.starTwinkleUp.setScale(1.5);var e=a.giftIcon,t=e.x,n=e.y,i=e.width,r=e.height;a.starTwinkleUp.run(1,t,n,i/1.5,r/1.5),a.moveTo(a.starTwinkleUp,a.length-1),a.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new Rc({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new gh({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var e=this;if(!this.giftOpenAnimation){var t=1/this.scene.world.getPixelRatio();this.giftOpenAnimation=new vh.default({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:t},onUpdate:function(){e.giftIconWhite.setAlpha(1)},onComplete:function(){e.giftShakeAnimation.stop(),e.giftIcon.kill(),e.giftIconWhite.kill(),e.sparksExplosive.explode(100,e.giftIcon.x,e.giftIcon.y,230),e.onReward(e.rewardValue),e.scene.time.delayedCall(500,e.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new mh.default({targets:this.getAll(),delay:e,duration:t,props:{alpha:{start:.8,to:0}},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new Il(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.currencyIcon,this.currencyText,this.viewAdButton,this.skipButton])},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.add.image(0,0,Mh,Bh.BLANK),this.currencyIcon.setWorldSize(150,150),Phaser.Display.Align.In.Center(this.currencyIcon,this.zone,0,-80),this.add(this.currencyIcon)},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(22),font:jo.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(e){this.rewardValue=e,this.currencyText.setText("Watch a video to get\n"+e+" diamonds!"),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.currencyIcon,0,60)},n.createViewAdsButton=function(){this.viewAdButton=new hc.default(this.scene,Mh,Bh.BLANK,232,69),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,Mh,Bh.BLANK);e.setWorldSize(37,34),Phaser.Display.Align.In.Center(e,this.viewAdButton),e.setX(this.viewAdButton.x-70),this.viewAdButton.add(e);var t=this.scene.make.bitmapText({size:this.scene.fontSize(30),text:"GET NOW!",font:jo.default.PRIMARY.KEY});Phaser.Display.Align.In.Center(t,this.viewAdButton,15,0),this.viewAdButton.add(t),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,100),this.add(this.viewAdButton)},n.createSkipButton=function(){this.skipButton=new hc.default(this.scene,Mh,Bh.BLANK,129,25),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:Mh,frame:Bh.BLANK,visible:!1}),this.giftIconWhite.setWorldSize(150,150),this.giftIconWhite.setDepth(Ji.default.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:Mh,frame:Bh.BLANK,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(150,150),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new Ih(this.scene),this.starTwinkleUp=new Rh(this.scene),this.sparksExplosive=new xh.default(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},t}(GameCore.Screen),Uh=Nh,Gh=function(e){if("string"!==typeof e||!e)throw new jr(null,{imageShare:e})},Fh=function(){return(0,q.default)(J().mark((function e(){var t,n,a,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,i=t.facebook,r=t.globalScene,e.prev=1,r.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),e.next=5,ys();case 5:return s=e.sent,Gh(s),o=n.getPlayer(),c=o.playerId,u=o.name,l=o.photo,e.next=10,i.inviteAsync({template:bi,text:{default:u+" invites you to play Sort it!",localizations:{en_US:u+" invites you to play Sort it!",vi_VN:u+" m\u1eddi b\u1ea1n ch\u01a1i Sort it!"}},image:s||"",data:{playerId:c,playerName:u,playerPhoto:l,type:bi}});case 10:a.event(Tn.AnalyticsEvents.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Tn.AnalyticsEvents.INVITE,{invite_content_type:"BestScore",success:!1}),(0,j.sendException)(e.t0);case 17:return e.prev=17,r.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Kh=tr.default.DEFAULT,Yh=Kh.KEY,Vh=Kh.FRAME,zh=function(e){function t(t){var n;(n=e.call(this,t,Yh,Vh.BUTTON_GREEN,43,41.5)||this).isDisabled=void 0,n.isDisabled=!1,n.setName("AddBottleButton");var a=n.scene.make.image({key:Yh,frame:Vh.ICON_TUBE});a.setWorldSize(21.5,28);var i=n.scene.make.image({key:Yh,frame:Vh.NOTE_ITEM});i.setWorldSize(18,19);var r=n.scene.make.image({key:Yh,frame:Vh.ICON_ADS});return r.setWorldSize(14,12),n.add([a,i,r]),Phaser.Display.Align.In.Center(a,(0,er.default)(n)),Phaser.Display.Align.In.TopCenter(i,(0,er.default)(n),18,6),Phaser.Display.Align.In.Center(r,i),n}(0,Z.default)(t,e);var n=t.prototype;return n.setDisabled=function(t){e.prototype.setDisabled.call(this,t),this.isDisabled=t},n.getIsDisabled=function(){return this.isDisabled},t}(hc.default),Hh=zh,Wh=n(9),jh=tr.default.DEFAULT,Xh=jh.KEY,qh=jh.FRAME,Zh=function(e){function t(t,n,a,i,r){var s;(s=e.call(this,t,Xh,qh.BUTTON_GREEN,43,41.5)||this).adIcon=void 0,s.noteIcon=void 0,s.countItemText=void 0,s.countItem=0;var o=s.scene.make.image({key:n,frame:a});return o.setDisplaySize(i,r),s.noteIcon=s.scene.make.image({key:Xh,frame:qh.NOTE_ITEM}),s.noteIcon.setWorldSize(18,19),s.adIcon=s.scene.make.image({key:Xh,frame:qh.ICON_ADS}),s.adIcon.setWorldSize(14,12),s.adIcon.setVisible(!1),s.countItemText=Wh.default.addText(s.scene,{font:jo.default.PRIMARY.KEY,size:s.scene.fontSize(14),text:"0"}),s.add([o,s.noteIcon,s.adIcon,s.countItemText]),Phaser.Display.Align.In.Center(o,(0,er.default)(s)),Phaser.Display.Align.In.TopCenter(s.noteIcon,(0,er.default)(s),18,6),Phaser.Display.Align.In.Center(s.countItemText,s.noteIcon,1.25,0),Phaser.Display.Align.In.Center(s.adIcon,s.noteIcon),s}(0,Z.default)(t,e);var n=t.prototype;return n.updateCountItem=function(e){0==e?(this.adIcon.setVisible(!0),this.countItemText.setVisible(!1)):(this.adIcon.setVisible(!1),this.countItemText.setVisible(!0),this.countItemText.setText(""+e))},n.resetCountItem=function(e){this.countItem=e,this.updateCountItem(e)},n.decreaseCountItem=function(){0!==this.countItem&&(this.countItem-=1,this.updateCountItem(this.countItem))},n.getCountItem=function(){return this.countItem},t}(hc.default),Qh=Zh,Jh=tr.default.DEFAULT,$h=Jh.KEY,ed=Jh.FRAME,td=function(e){function t(t){var n;return(n=e.call(this,t,$h,ed.ICON_HINT,19.825,31.85)||this).pulsateBubbleAnimation=void 0,n.defaultScale=void 0,n.setName("HintButton"),n}(0,Z.default)(t,e);var n=t.prototype;return n.runPulsateBubbleAnimation=function(){var e;this.pulsateBubbleAnimation||(this.defaultScale=this.scale,this.pulsateBubbleAnimation=new Rc({targets:[this],duration:500,props:{scale:"*=1.1"}})),null!=(e=this.pulsateBubbleAnimation.tween)&&e.isPlaying()||this.pulsateBubbleAnimation.play()},n.stopPulsateBubbleAnimation=function(){var e;null==(e=this.pulsateBubbleAnimation)||e.stop(),this.defaultScale&&(this.scale=this.defaultScale)},t}(Qh),nd=td,ad=tr.default.DEFAULT,id=ad.KEY,rd=ad.FRAME,sd=function(e){function t(t){var n;return(n=e.call(this,t,id,rd.ICON_REMOVE,25,32)||this).setName("UndoButton"),n}return(0,Z.default)(t,e),t}(Qh),od=sd,cd=tr.default.DEFAULT,ud=cd.KEY,ld=cd.FRAME,hd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.addTubeButton=void 0,n.undoButton=void 0,n.hintButton=void 0,n.leaderBoardButton=void 0,n.leftContainer=void 0,n.rightContainer=void 0,n.handleInviteFriend=function(){n.scene.storage.dispatch(Fh())},n.handleShare=function(){n.scene.storage.dispatch(ms())},n.handleGoToLeaderboard=function(){n.scene.scene.switch(Gi.SceneKeys.LEADERBOARD_SCENE)},n.handleAddTube=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.scene.gameManager.hideHint(),!n.isWinOrLose()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.scene.showRewardVideo();case 5:e.sent&&(n.scene.gameManager.addMoreLayerContainer(),n.addTubeButton.setDisabled(!0),n.addTubeButton.setAlpha(.5)),n.scene.gameManager.showHint();case 8:case"end":return e.stop()}}),e)}))),n.handleNext=function(){n.isWinOrLose()||n.scene.gameManager.skipLevel()},n.handleUndo=function(){if(!n.isWinOrLose()){var e=n.scene.gameManager.isCanUndo();if(0!==n.undoButton.getCountItem()){if(e){n.scene.gameManager.hideHint(),n.scene.gameManager.showHint(),n.undoButton.decreaseCountItem();var t=n.undoButton.getCountItem(),a=n.scene.player.getCountItems();n.updatePlayerCountItems(t,a.hintCount,a.lastTimeUpdate),n.scene.gameManager.undo()}}else n.claimUndo()}},n.handleHint=(0,q.default)(J().mark((function e(){var t,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isWinOrLose()){e.next=2;break}return e.abrupt("return");case 2:if(n.scene.gameManager.hideHint(),0!==n.hintButton.getCountItem()){e.next=7;break}return n.claimHint(),e.abrupt("return");case 7:n.hintButton.setDisabled(!0),n.scene.gameManager.suggestionManager.move(),n.hintButton.decreaseCountItem(),t=n.hintButton.getCountItem(),a=n.scene.player.getCountItems(),n.updatePlayerCountItems(a.undoCount,t,a.lastTimeUpdate);case 13:case"end":return e.stop()}}),e)}))),n.updateCountItems=(0,q.default)(J().mark((function e(){var t,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.scene.player.getCountItems())&&(!t||(0,Ze.checkIsToday)(t.lastTimeUpdate))&&!GameCore.Configs.DailyCountItems.ForceNewDay){e.next=5;break}return e.next=4,n.resetCountItems();case 4:return e.abrupt("return");case 5:a=t.undoCount,i=t.hintCount,n.setUndoCountOnStartLevel(a),n.setHintCountOnStartLevel(i);case 9:case"end":return e.stop()}}),e)}))),n.resetCountItems=(0,q.default)(J().mark((function e(){var t,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=GameCore.Configs.Gameplay.UndoCount,a=GameCore.Configs.Gameplay.HintCount,n.setUndoCountOnStartLevel(t),n.setHintCountOnStartLevel(a),e.next=6,n.updatePlayerCountItems(t,a,(new Date).getTime());case 6:case"end":return e.stop()}}),e)}))),n.scene=t,n.scene.add.existing((0,er.default)(n)),n.createContainer(),n.createEvents(),n}(0,Z.default)(t,e);var n=t.prototype;return n.initDefault=function(){this.addTubeButton.setAlpha(1),this.hintButton.setAlpha(1),this.updateCountItems()},n.createContainer=function(){this.createLeaderBoardButton(),this.createHintButton(),this.createUndoButton(),this.createAddBottleButton(),Phaser.Display.Align.In.Center(this.leaderBoardButton,this,-135),Phaser.Display.Align.In.Center(this.hintButton,this,-45,0),Phaser.Display.Align.In.Center(this.undoButton,this,45,0),Phaser.Display.Align.In.Center(this.addTubeButton,this,135,0)},n.createButtons=function(){},n.createEvents=function(){this.leaderBoardButton.onClick=this.handleGoToLeaderboard,this.addTubeButton.onClick=this.handleAddTube,this.undoButton.onClick=this.handleUndo,this.hintButton.onClick=this.handleHint},n.createLeaderBoardButton=function(){this.leaderBoardButton=new hc.default(this.scene,ud,ld.BUTTON_BLUE,43,41.5),this.leaderBoardButton.setName("LeaderBoardButton");var e=this.scene.make.image({key:ud,frame:ld.ICON_RANK});e.setWorldSize(34,29),this.leaderBoardButton.add(e),Phaser.Display.Align.In.Center(e,this.leaderBoardButton),this.add(this.leaderBoardButton)},n.createAddBottleButton=function(){this.addTubeButton=new Hh(this.scene),this.addTubeButton.setName("AddBottleButton"),this.add(this.addTubeButton)},n.createHintButton=function(){this.hintButton=new nd(this.scene),this.add(this.hintButton)},n.createUndoButton=function(){this.undoButton=new od(this.scene),this.add(this.undoButton)},n.createNextButton=function(){},n.setHintCountOnStartLevel=function(e){this.hintButton.resetCountItem(e)},n.setUndoCountOnStartLevel=function(e){this.undoButton.resetCountItem(e)},n.setDisable=function(e){this.leaderBoardButton.setDisabled(e),this.addTubeButton.setDisabled(e),this.undoButton.setDisabled(e),this.hintButton.setDisabled(e);var t=GameCore.Configs.Tutorial.LevelTutorial,n=this.scene.level.getLevel();t.includes(n)&&(this.addTubeButton.setDisabled(!0),this.addTubeButton.setAlpha(.5),this.hintButton.setDisabled(!0),this.hintButton.setAlpha(.5))},n.isWinOrLose=function(){var e=this.scene.gameManager.isWin(),t=this.scene.gameManager.isLose();return!(!e&&!t)},n.claimUndo=function(){var e=(0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.gameManager.hideHint(),e.next=3,this.scene.showRewardVideo();case 3:e.sent&&(t=GameCore.Configs.Gameplay.UndoClaim,n=this.scene.player.getCountItems(),this.updatePlayerCountItems(t,n.hintCount,n.lastTimeUpdate),this.undoButton.resetCountItem(t)),this.scene.gameManager.showHint();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.claimHint=function(){var e=(0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.showRewardVideo();case 2:e.sent?(t=GameCore.Configs.Gameplay.HintClaim,n=this.scene.player.getCountItems(),this.updatePlayerCountItems(n.undoCount,t,n.lastTimeUpdate),this.hintButton.resetCountItem(t),this.hintButton.setDisabled(!0),this.scene.gameManager.suggestionManager.move()):this.scene.gameManager.showHint();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showHighlightHintButton=function(){this.hintButton.runPulsateBubbleAnimation()},n.hideHighlightHintButton=function(){this.hintButton.stopPulsateBubbleAnimation()},n.updatePlayerCountItems=function(){var e=(0,q.default)(J().mark((function e(t,n,a){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={undoCount:t,hintCount:n,lastTimeUpdate:a},e.next=3,FBInstant.player.setDataAsync({countItems:i});case 3:return e.next=5,this.scene.player.updateCustomFields({countItems:i});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),dd=hd,fd=tr.default.DEFAULT,pd=fd.KEY,gd=fd.FRAME,vd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pauseButton=void 0,n.restartButton=void 0,n.levelText=void 0,n.scoreText=void 0,n.handlePause=function(){n.scene.screen.open($i.ScreenKeys.PAUSE_SCREEN)},n.handleRestart=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.isWinOrLose(),!n.scene.gameManager.isCanUndo()||t){e.next=8;break}return e.next=5,n.scene.showInterstitialAd();case 5:n.scene.restartLevel(),n.scene.gameManager.hideHint(),n.scene.gameManager.showHint();case 8:case"end":return e.stop()}}),e)}))),n.scene=t,n.scene.add.existing((0,er.default)(n)),n.createButtons(),n.createLevelText(),n.createScoreText(),n.createEvents(),n}(0,Z.default)(t,e);var n=t.prototype;return n.createButtons=function(){this.createPauseButton(),this.createRestartButton()},n.createEvents=function(){this.pauseButton.onClick=this.handlePause,this.restartButton.onClick=this.handleRestart},n.createPauseButton=function(){this.pauseButton=new hc.default(this.scene,pd,gd.BUTTON_MINI_BLUE,42.5,42),this.pauseButton.setName("PauseButton"),this.pauseButton.setName("PauseButton");var e=this.scene.make.image({key:pd,frame:gd.ICON_SETTING});e.setDisplaySize(28,28),this.pauseButton.add(e),Phaser.Display.Align.In.Center(e,this.pauseButton),this.add(this.pauseButton),Phaser.Display.Align.In.Center(this.pauseButton,this,-140.625,0)},n.createScoreText=function(){this.scoreText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(13),text:this.scene.lang.getText("score")+": 0"}),this.scoreText.setTint(6145791).setOrigin(.5),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.levelText,0,24)},n.createRestartButton=function(){this.restartButton=new hc.default(this.scene,pd,gd.BUTTON_MINI_BLUE,42.5,42),this.restartButton.setName("RestartButton"),this.restartButton.setName("RestartButton");var e=this.scene.make.image({key:pd,frame:gd.ICON_RESET});e.setDisplaySize(35.5,30),this.restartButton.add(e),Phaser.Display.Align.In.Center(e,this.restartButton),this.add(this.restartButton),Phaser.Display.Align.In.Center(this.restartButton,this,140.625,0)},n.createLevelText=function(){this.levelText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(25),text:this.scene.lang.getText("level")+": 1"}),this.add(this.levelText),this.levelText.setOrigin(.5,.5),this.levelText.y-=13},n.updateLevelText=function(e){this.levelText.setText(this.scene.lang.getText("level")+": "+e)},n.setDisable=function(e){this.pauseButton.setDisabled(e),this.restartButton.setDisabled(e)},n.isWinOrLose=function(){var e=this.scene.gameManager.isWin(),t=this.scene.gameManager.isLose();return!(!e&&!t)},n.setScoreText=function(e){this.scoreText.setText(this.scene.lang.getText("score")+": "+e),Phaser.Display.Align.In.Center(this.scoreText,this.levelText,0,24)},n.updateScoreTextAndHeartOnChallengeMode=function(){this.scoreText.setVisible(!1)},n.updateScoreTextAndHeartOnNormalMode=function(){this.scoreText.setVisible(!0)},t}(Phaser.GameObjects.Container),md=vd,yd=tr.default.DEFAULT,Ed=yd.KEY,Sd=yd.FRAME,Ad=function(e){function t(t){var n;(n=e.call(this,t,Ed,Sd.BUTTON_BLUE,107.5,47.5)||this).setName("NoButton");var a=Wh.default.addText(n.scene,{font:jo.default.PRIMARY.KEY,size:n.scene.fontSize(18),text:n.scene.lang.getText("no"),origin:{y:.5}});return n.add([a]),Phaser.Display.Align.In.Center(a,(0,er.default)(n),0,-3),n}return(0,Z.default)(t,e),t.prototype.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(hc.default),bd=Ad,Td=tr.default.DEFAULT,wd=Td.KEY,Cd=Td.FRAME,Id=function(e){function t(t){var n;(n=e.call(this,t,wd,Cd.BUTTON_GREEN,107.5,47.5)||this).setName("YesButton");var a=Wh.default.addText(n.scene,{font:jo.default.PRIMARY.KEY,size:n.scene.fontSize(18),text:n.scene.lang.getText("yes"),origin:{y:.5}});return n.add([a]),Phaser.Display.Align.In.Center(a,(0,er.default)(n),0,-3),n}return(0,Z.default)(t,e),t.prototype.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(hc.default),xd=Id,_d=tr.default.DEFAULT,Pd=(_d.KEY,_d.FRAME,function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.popup=void 0,r.title=void 0,r.yesButton=void 0,r.noButton=void 0,r.textContainer=void 0,r.contents=void 0,r.popupFadeOutAnimation=void 0,r.popupShowUpAnimation=void 0,r.screenExitAnimation=void 0,r.open=function(){e.prototype.open.call((0,er.default)(r)),r.runPopupShowUpAnimation()},r.handleClosePopup=function(){r.runPopupExitsAnimation(0,200),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name)}))},r.handleStartOver=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.scene.handleStartOverPlayerLevel();case 2:r.scene.level.setLevel(1),r.runScreenExitAnimation((0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.scene.level.getLevelData()){e.next=16;break}return t=r.scene.game,n=t.globalScene,t.audio,n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",duration:0,loading:!0}),e.prev=4,e.next=7,r.scene.level.preloadLevelDataAsync();case 7:if(void 0!==e.sent){e.next=10;break}throw new Error("Can not load new level!");case 10:n.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Can not load new level!\nPlease restart game.",duration:0,loading:!1});case 16:r.scene.screen.closeAllScreens(),r.scene.levelUp();case 18:case"end":return e.stop()}}),e,null,[[4,13]])}))));case 4:case"end":return e.stop()}}),e)}))),r.scene=t,r.createPopup(),r.createTitle(),r.createTextContainer(),r.createButtons(),r.createPopupContent(),r.createInput(),r.setDepth($i.ScreenDepth.POPUP),r.background.setAlpha(.8),r}(0,Z.default)(t,e);var n=t.prototype;return n.createInput=function(){this.yesButton.onClick=this.handleStartOver,this.noButton.onClick=this.handleClosePopup},n.createPopup=function(){this.popup=new Fc(this.scene,0,0,265,250)},n.createButtons=function(){this.yesButton=new xd(this.scene),this.noButton=new bd(this.scene),Phaser.Display.Align.In.BottomCenter(this.yesButton,this.popup,65,-15),Phaser.Display.Align.In.BottomCenter(this.noButton,this.popup,-65,-15)},n.createTextContainer=function(){this.textContainer=this.scene.add.container();var e=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.scene.lang.getText("are_you_sure_to_start_over"),origin:{x:.5,y:.5},maxWidth:240});e.setTint(7034229);var t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.scene.lang.getText("you_will_play_the_game_again"),origin:{x:.5,y:.5},maxWidth:240});t.setTint(7034229),this.textContainer.add([e,t]),Phaser.Display.Align.In.Center(e,this.textContainer,0,-45),Phaser.Display.Align.In.Center(t,this.textContainer,0,10),Phaser.Display.Align.In.Center(this.textContainer,this.popup,0,0)},n.createPopupContent=function(){this.contents=this.scene.add.container(),this.contents.add([this.popup,this.title,this.textContainer,this.yesButton,this.noButton]),this.add(this.contents)},n.createTitle=function(){this.title=this.scene.add.container();var e=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),text:this.scene.lang.getText("confirmation"),origin:{x:.5,y:.5}});this.title.add([e]),Phaser.Display.Align.In.Center(e,this.title,0,0),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},n.runPopupShowUpAnimation=function(){var e;null==(e=this.popupShowUpAnimation)||e.remove();var t=this.contents,n=t.x,a=t.y;this.contents.setAlpha(0).setPosition(n,a+70),this.popupShowUpAnimation=this.scene.tweens.add({targets:this.contents,duration:300,props:{y:{from:a+70,to:a,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}}})},n.runPopupExitsAnimation=function(e,t){var n,a=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new mh.default({targets:[this.contents],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.contents.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runScreenExitAnimation=function(e){var t,n=this;null==(t=this.screenExitAnimation)||t.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:this.popup,duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){n.popup.setAlpha(0),n.background.setAlpha(0),e&&e()}})},t}(GameCore.Screen)),kd=Pd,Ld=tr.default.DEFAULT,Rd=Ld.KEY,Od=Ld.FRAME,Dd=function(e){function t(t){var n;return(n=e.call(this,t,Rd)||this).leftConfettiEmitter=void 0,n.leftRibbonEmitter=void 0,n.rightConfettiEmitter=void 0,n.rightRibbonEmitter=void 0,n.listEmitter=[],n.setDepth(Ji.default.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createExplodeAnimation=function(){var e=1/this.scene.world.getPixelRatio(),t=this.scene.world.getWorldSize(),n=t.width,a=(t.height,[Od.CONFETTI_PARTICLE_1,Od.CONFETTI_PARTICLE_2,Od.CONFETTI_PARTICLE_3,Od.CONFETTI_PARTICLE_4,Od.CONFETTI_PARTICLE_5,Od.CONFETTI_PARTICLE_6,Od.CONFETTI_PARTICLE_7]),i=[13650134,13650134,3786091,16739143,15318614],r=[Od.RIBBON_PARTICLE_1,Od.RIBBON_PARTICLE_2,Od.RIBBON_PARTICLE_3,Od.RIBBON_PARTICLE_4,Od.RIBBON_PARTICLE_5,Od.RIBBON_PARTICLE_6],s={frame:a,tint:i,x:-n/2-20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*e,end:.8*e,ease:Phaser.Math.Easing.Expo.Out},angle:{start:270,end:360,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:Mu},o={frame:r,tint:i,x:-n/2-20,y:0,speed:{min:1500,max:1800},angle:{start:272,end:360,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*e,end:.55*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:Uu},c={frame:a,tint:i,x:n/2+20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*e,end:.8*e,ease:Phaser.Math.Easing.Expo.Out},angle:{start:180,end:270,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:Mu},u={frame:r,tint:i,x:n/2+20,y:0,speed:{min:1500,max:1800},angle:{start:180,end:268,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*e,end:.55*e,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:Uu};this.leftConfettiEmitter=this.createEmitter(s),this.leftRibbonEmitter=this.createEmitter(o),this.rightConfettiEmitter=this.createEmitter(c),this.rightRibbonEmitter=this.createEmitter(u),this.listEmitter=[this.leftConfettiEmitter,this.leftRibbonEmitter,this.rightConfettiEmitter,this.rightRibbonEmitter]},n.explode=function(e,t){this.leftConfettiEmitter.flow(1e5,30),this.leftRibbonEmitter.flow(1e5,7),this.rightConfettiEmitter.flow(1e5,30),this.rightRibbonEmitter.flow(1e5,7),this.scene.time.delayedCall(500,this.stop.bind(this))},n.stop=function(){this.listEmitter.forEach((function(e){e.stop()}))},n.killAll=function(){var e=this;this.listEmitter.forEach((function(t){t.killAll(),t.forEachDead((function(e){e.resetPosition()}),e)}))},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Md=Dd,Bd=tr.default.DEFAULT,Nd=Bd.KEY,Ud=Bd.FRAME,Gd=function(e){function t(t){var n;(n=e.call(this,t,Nd,Ud.BUTTON_BLUE,107.5,47.5)||this).setName("RankButton");var a=n.scene.make.image({key:tr.default.DEFAULT.KEY,frame:tr.default.DEFAULT.FRAME.ICON_RANK});a.setWorldSize(34,29);var i=Wh.default.addText(n.scene,{font:jo.default.PRIMARY.KEY,size:n.scene.fontSize(18),text:n.scene.lang.getText("ranks"),origin:{y:.5},maxWidth:73});return n.add([a,i]),Phaser.Display.Align.In.Center(a,(0,er.default)(n),-32,0),Phaser.Display.Align.In.Center(i,(0,er.default)(n),16,-2),n}return(0,Z.default)(t,e),t.prototype.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(hc.default),Fd=Gd,Kd=tr.default.DEFAULT,Yd=Kd.KEY,Vd=Kd.FRAME,zd=function(e){function t(t){var n;(n=e.call(this,t,Yd,Vd.BUTTON_GREEN,107.5,47.5)||this).pulsateBubbleAnimation=void 0,n.setName("StartOverButton");var a=n.scene.make.image({key:Yd,frame:Vd.ICON_REMOVE});a.setWorldSize(25,32);var i=Wh.default.addText(n.scene,{font:jo.default.PRIMARY.KEY,size:n.scene.fontSize(15),text:n.scene.lang.getText("start_over"),origin:{x:.5,y:.5},maxWidth:75});return n.add([a,i]),Phaser.Display.Align.In.Center(i,(0,er.default)(n),-16,-3),Phaser.Display.Align.In.Center(a,(0,er.default)(n),32,0),n}(0,Z.default)(t,e);var n=t.prototype;return n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new Rc({targets:this.getAll(),duration:1e3,props:{scale:"*=1.1"}})),this.pulsateBubbleAnimation.play()},n.stopPulsateBubbleAnimation=function(){var e;null==(e=this.pulsateBubbleAnimation)||e.stop()},n.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(hc.default),Hd=zd,Wd=tr.default.DEFAULT,jd=Wd.KEY,Xd=Wd.FRAME,qd=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.buttonsContainer=void 0,r.rankButton=void 0,r.startOverButton=void 0,r.backgroundShowUpAnimation=void 0,r.popupShowUpAnimation=void 0,r.screenExitAnimation=void 0,r.levelCompleteParticle=void 0,r.popup=void 0,r.popupBackground=void 0,r.title=void 0,r.text1=void 0,r.text2=void 0,r.text3=void 0,r.open=(0,q.default)(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call((0,er.default)(r)),r.setDisableButton(!0),r.runScreenShowUpAnimation();case 3:case"end":return t.stop()}}),t)}))),r.handleConfirm=function(){r.scene.screen.open($i.ScreenKeys.CONFIRM_SCREEN)},r.handleShare=function(){r.scene.storage.dispatch(ms())},r.handleCloseScreen=function(){r.scene.screen.close(r.name)},r.scene=t,r.createPopup(),r.createTitle(),r.createCongratulationText(),r.createButtonsContainer(),r.createLevelCompleteParticle(),r.alignObjects(),r.createInputs(),r.setDepth($i.ScreenDepth.POPUP),r}(0,Z.default)(t,e);var n=t.prototype;return n.createPopup=function(){this.popupBackground=this.scene.make.image({key:jd,frame:Xd.POPUP_RESULT}),this.popupBackground.setWorldSize(306.6,356)},n.createTitle=function(){this.title=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),text:this.scene.lang.getText("congratulation"),origin:{x:.5,y:.5}})},n.createCongratulationText=function(){this.text1=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(17),text:this.scene.lang.getText("congratulation"),origin:{x:.5,y:.5}}),this.text2=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.scene.lang.getText("you_have_pass_all_levels"),origin:{x:.5,y:.5}}),this.text3=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.scene.lang.getText("please_come_back_later"),origin:{x:.5,y:.5},maxWidth:240}),this.text1.setTint(7034229),this.text2.setTint(7034229),this.text3.setTint(7034229)},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container(),this.rankButton=new Fd(this.scene),this.startOverButton=new Hd(this.scene),this.buttonsContainer.add([this.rankButton,this.startOverButton]),Phaser.Display.Align.In.Center(this.rankButton,this.buttonsContainer,-60,0),Phaser.Display.Align.In.Center(this.startOverButton,this.buttonsContainer,60,0)},n.createLevelCompleteParticle=function(){this.levelCompleteParticle=new Md(this.scene)},n.alignObjects=function(){this.popup=this.scene.add.container(),this.popup.add([this.popupBackground,this.title,this.text1,this.text2,this.text3,this.buttonsContainer,this.levelCompleteParticle]),Phaser.Display.Align.In.Center(this.popupBackground,this.zone),Phaser.Display.Align.In.TopCenter(this.title,this.popupBackground,0,-10),Phaser.Display.Align.In.TopCenter(this.text1,this.popupBackground,0,-100),Phaser.Display.Align.In.TopCenter(this.text2,this.popupBackground,0,-150),Phaser.Display.Align.In.TopCenter(this.text3,this.popupBackground,0,-200),Phaser.Display.Align.In.BottomCenter(this.buttonsContainer,this.popupBackground,0,-43.75),this.add(this.popup)},n.createInputs=function(){var e=this;this.rankButton.onClick=function(){return e.scene.scene.switch(Gi.SceneKeys.LEADERBOARD_SCENE)},this.startOverButton.onClick=this.handleConfirm},n.setDisableButton=function(e){this.rankButton.setDisabled(e),this.startOverButton.setDisabled(e)},n.runScreenShowUpAnimation=function(){var e,t,n=this;null==(e=this.backgroundShowUpAnimation)||e.remove(),null==(t=this.popupShowUpAnimation)||t.remove(),this.popup.setAlpha(0),this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){return n.background.setAlpha(0)},onComplete:function(){return n.background.setAlpha(.8)}});var a=this.popup,i=a.x,r=a.y;this.popup.setAlpha(0).setPosition(i,r+70),this.popupShowUpAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onStart:function(){var e=n.scene.world.getWorldSize().width;n.scene.audio.playSound(Tu.default.CONFETTI),n.levelCompleteParticle.explode(e/2+50,0)},onComplete:function(){n.setDisableButton(!1)}})},n.runScreenExitAnimation=function(e){var t,n=this;null==(t=this.screenExitAnimation)||t.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:this.popup,duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){n.popup.setAlpha(0),n.background.setAlpha(0),e&&e()}})},t}(GameCore.Screen),Zd=qd,Qd=tr.default.DEFAULT,Jd=Qd.KEY,$d=Qd.FRAME,ef=function(e){function t(t){var n;(n=e.call(this,t,Jd,$d.BUTTON_GREEN,107.5,48)||this).container=void 0,n.pulsateBubbleAnimation=void 0,n.container=n.scene.add.container(0,0),n.container.setSize(107.5,48),n.add(n.container),n.setName("NextLevelButton");var a=n.scene.make.image({key:Jd,frame:$d.ICON_BATTLE});a.setWorldSize(34.5,29);var i=Wh.default.addText(n.scene,{font:jo.default.PRIMARY.KEY,size:n.scene.fontSize(22),text:n.scene.lang.getText("next"),origin:{x:.5,y:.5}});return i.width>.6*n.displayWidth&&i.setScale(.6*n.displayWidth/i.width),n.container.add([a,i]),Phaser.Display.Align.In.Center(i,(0,er.default)(n),-16,-2),Phaser.Display.Align.In.Center(a,(0,er.default)(n),35,0),n}(0,Z.default)(t,e);var n=t.prototype;return n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new Rc({targets:this.getAll(),duration:1e3,props:{scale:"*=1.1"}})),this.pulsateBubbleAnimation.play()},n.stopPulsateBubbleAnimation=function(){var e;null==(e=this.pulsateBubbleAnimation)||e.stop()},n.setDisabled=function(e){var t,n;e?null==(t=this.hitArea)||t.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},t}(hc.default),tf=ef,nf={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},af=function(e){function t(t){return e.call(this,nf,t)||this}return(0,Z.default)(t,e),t}(Yo.default),rf=af,sf={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},of=function(e){function t(t){return e.call(this,sf,t)||this}return(0,Z.default)(t,e),t}(Yo.default),cf=of,uf=tr.default.DEFAULT,lf=uf.KEY,hf=uf.FRAME,df=function(e){function t(t,n){var a;return void 0===n&&(n=!1),(a=e.call(this,t)||this).avatar=void 0,a.rankText=void 0,a.playerInfo=void 0,a.username=void 0,a.scoreText=void 0,a.background=void 0,a.crown=void 0,a.showPopUp=void 0,a.showItems=void 0,a.payload=void 0,a.isWorld=void 0,a.scene=void 0,a.handleChallengeFriend=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),a.handleMatchingGroup=(0,q.default)(J().mark((function e(){var t,n,i,r,s,o,c,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.scene,n=t.player,i=t.storage,r=t.game,s=t.facebook,e.prev=1,r.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading...",loading:!0}),o=n.getPlayer(),c="global","en"===(u=Wo(o.locale))&&(c="en"),"in"===u&&(c="in"),e.next=10,s.matchPlayerAsync(c,!0,!0);case 10:if(l=e.sent,r.globalScene.screen.close($i.ScreenKeys.NOTIFY_SCREEN),l){e.next=14;break}return e.abrupt("return");case 14:i.dispatch(Do()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),r.globalScene.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.t0 instanceof Error&&(0,j.sendException)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),a.scene=t,a.createBackground(),a.updateSize(),a.createAvatar(),a.createCrown(),a.createRank(),a.createPlayerInfo(),a.isWorld=n,a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,O.default)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateAvatar(),this.updateCrown(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton()},n.updatePosition=function(){},n.createBackground=function(){this.background=this.scene.make.image({key:lf,frame:hf.BG_RANK}),this.background.setWorldSize(240,42),this.add(this.background)},n.updateBackground=function(){this.payload.isHighlight;var e="";e=hf.BLANK,this.background.setFrame(e),this.background.setWorldSize(264,56)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Jo(this.scene,{key:lf,background:hf.BG_AVA,width:31.857,height:32.25}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this,-35)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createCrown=function(){this.crown=this.scene.make.image({key:lf,frame:hf.ICON_CROWN}),this.crown.setWorldSize(17.625,14.25),this.add(this.crown),Phaser.Display.Align.To.TopCenter(this.crown,this.avatar,0,-4.5),this.crown.setVisible(!1)},n.updateCrown=function(){1==this.payload.rank?this.crown.setVisible(!0):this.crown.setVisible(!1)},n.createRank=function(){this.createRankText("?")},n.updateRank=function(){var e=this.payload.rank;this.updateRankText(e)},n.createRankText=function(e){this.rankText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:""+e,origin:{x:.5,y:.5}}),this.rankText.setTint(7034229),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.avatar,-50)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){return e.length<18?e:e.substring(0,15)+"..."},n.createPlayerInfo=function(){this.playerInfo=this.scene.add.container(),this.createUsername(),this.createScore(),this.add(this.playerInfo),Phaser.Display.Align.To.RightCenter(this.playerInfo,this.avatar,12,0)},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:jo.default.FONT_FAMILY,fontSize:"13.5px",fontStyle:"bold"}}),this.username.setTint(7034229),this.username.setHighQuality(),this.playerInfo.add(this.username),Phaser.Display.Align.In.LeftCenter(this.username,this.playerInfo,0,-7.5)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.scoreText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(13.5),text:"132500",origin:{x:0,y:.5}}),this.scoreText.setTint(7034229),this.playerInfo.add(this.scoreText),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.playerInfo,0,7.5)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createChallengeButton=function(){},n.updateButton=function(){},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new cf({targets:[this],delay:e,duration:t,props:{y:{start:this.y+20,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new rf({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),ff=df;function pf(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gf(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var vf=tr.default.DEFAULT,mf=vf.KEY,yf=vf.FRAME,Ef=GameCore.Configs.LeadersBoard,Sf=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).scene=void 0,r.levelText=void 0,r.scoreText=void 0,r.buttonsContainer=void 0,r.nextLevelButton=void 0,r.backgroundShowUpAnimation=void 0,r.popupShowUpAnimation=void 0,r.screenExitAnimation=void 0,r.levelCompleteParticle=void 0,r.popup=void 0,r.popupBackground=void 0,r.title=void 0,r.loading=void 0,r.leadersContainer=void 0,r.leaders=[],r.currentPlayerId=void 0,r.leaderboardEmptyText=void 0,r.textAnimation=void 0,r.showAdAfterDelay=void 0,r.scoreTween=void 0,r.open=(0,q.default)(J().mark((function t(){var n,a,i,s,o;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call((0,er.default)(r)),r.showLoading(!0),r.leaderboardEmptyText.kill(),r.leaders&&r.leaders.length>0&&r.leaders.forEach((function(e){return e.setVisible(!1)})),r.nextLevelButton.runPulsateBubbleAnimation(),n=r.scene.gameManager.levelConfig.level,r.setLevelText(n),a=r.scene.storage.getState(),i=us(a),s=i.score,r.updateScoreText(s),o=r.scene.player,r.currentPlayerId=o.getPlayerId(),r.setDisableButton(!0),r.runScreenShowUpAnimation(),t.next=16,r.scene.storage.dispatch(Bo());case 16:return t.next=18,r.scene.storage.dispatch({type:Fa,payload:{}});case 18:return t.next=20,r.showLeaderBoard();case 20:GameCore.Configs.Gameplay.SkipCompleteScreen&&r.handleNextLevel();case 21:case"end":return t.stop()}}),t)}))),r.listenStateChange=function(){r.handleStateChange([{selector:Gr,callback:function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.showLoading(t),!1===t&&r.scene&&(n=r.scene.storage.getState(),a=Ur(n),r.updateLeadersData(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}])},r.handleShare=function(){r.scene.storage.dispatch(ms())},r.handleNextLevel=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setDisableButton(!0),r.runScreenExitAnimation((0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.scene.level.getLevelData()){e.next=16;break}return t=r.scene.game,n=t.globalScene,t.audio,n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:r.scene.lang.getText("loading"),duration:0,loading:!0}),e.prev=4,e.next=7,r.scene.level.preloadLevelDataAsync();case 7:if(void 0!==e.sent){e.next=10;break}throw new Error(r.scene.lang.getText("can_not_load_new_level"));case 10:n.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:r.scene.lang.getText("can_not_load_new_level_please_restart_game"),duration:0,loading:!1});case 16:r.nextLevelButton.stopPulsateBubbleAnimation(),r.scene.screen.close(r.name),r.scene.levelUp();case 19:case"end":return e.stop()}}),e,null,[[4,13]])}))));case 2:case"end":return e.stop()}}),e)}))),r.handleCloseScreen=function(){r.scene.screen.close(r.name)},r.scene=t,r.createPopup(),r.createTitle(),r.createLevelText(),r.createScoreText(),r.createButtonsContainer(),r.createLoading(),r.createLeadersContainer(),r.createLeaders(),r.createLeaderboardEmptyText(),r.createLevelCompleteParticle(),r.alignObjects(),r.createInputs(),r.listenStateChange(),r.setDepth($i.ScreenDepth.POPUP),r}(0,Z.default)(t,e);var n=t.prototype;return n.showLeaderBoard=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=FBInstant.player.isGuest()?or:cr,e.next=3,this.scene.storage.dispatch(Mr(Ef.LeaderboardId,t,4,0));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleStateChange=function(e){var t=this;e.forEach((function(e){var n=e.selector,a=e.callback;t.scene.storage.watch(n,a)}))},n.showLoading=function(e){this.loading.setVisible(e)},n.updateLeadersData=function(e){for(var t,n=[],a=pf((Object.values(e).splice(0,4)||[]).sort((function(e,t){return+t.score-+e.score})));!(t=a()).done;){var i=t.value,r=i.playerId,s=i.photo,o=i.score,c=i.name,u=i.rank;if(r){var l=this.currentPlayerId===r,h={playerId:r,photo:s,name:c,rank:u,score:o,useChallenge:!l,isHighlight:l};n.push(h)}}this.updateLeaders(n),this.showLeaders(n.length)},n.updateLeaders=function(e){var t=this;if(0===e.length)return this.leaderboardEmptyText.revive(),void this.textAnimation.play();e.forEach((function(e,n){t.leaders[n].updateInfo(e),t.leaders[n].setVisible(!0).setActive(!0)})),this.leaders[this.leaders.length-1].setVisible(!0).setActive(!0),Phaser.Actions.GridAlign(this.leaders,{width:1,height:this.leaders.length,cellWidth:240,cellHeight:42})},n.createPopup=function(){this.popupBackground=this.scene.make.image({key:mf,frame:yf.POPUP_RESULT}),this.popupBackground.setWorldSize(306.6,356)},n.createTitle=function(){this.title=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),text:this.scene.lang.getText("completed"),origin:{x:.5,y:.5}})},n.createLevelText=function(){this.levelText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.getText("level")+": 1",origin:{x:.5,y:.5}}),this.levelText.setTint(7034229)},n.createScoreText=function(){this.scoreText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(35),text:"0",origin:{x:.5,y:.5}}),this.scoreText.setTint(16678214)},n.setLevelText=function(e){this.levelText.setText(this.scene.lang.getText("level")+" "+e)},n.updateScoreText=function(e){var t=this;this.scoreTween=this.scene.tweens.add({targets:this.scoreText,x:this.scoreText.x,duration:Math.max(500,Math.min(1e3,e)),onUpdate:function(){t.scoreText.setText(""+Math.floor(e*t.scoreTween.progress))},onComplete:function(){t.scoreText.setText(""+Math.floor(e*t.scoreTween.progress))}})},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container(),this.nextLevelButton=new tf(this.scene),this.buttonsContainer.add([this.nextLevelButton]),Phaser.Display.Align.In.Center(this.nextLevelButton,this.buttonsContainer,0,5)},n.createLoading=function(){this.loading=new Qi.default(this.scene),this.loading.setTint(0),this.loading.setVisible(!1),this.loading.setWorldSize(42.5,42.5)},n.createLeadersContainer=function(){this.leadersContainer=this.scene.add.container()},n.createLeaders=function(){for(var e=0;e<3;e++){var t=new ff(this.scene);t.setVisible(!1).setActive(!1),this.leaders.push(t)}var n=new ff(this.scene,!0);n.setVisible(!1).setActive(!1),this.leaders.push(n),this.leadersContainer.add(this.leaders)},n.createLeaderboardEmptyText=function(){this.leaderboardEmptyText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:this.scene.lang.getText("leaderboard_is_empty"),maxWidth:250}),this.leaderboardEmptyText.setTint(7034229),this.leaderboardEmptyText.setVisible(!1),this.textAnimation=new gh({targets:[this.leaderboardEmptyText],duration:60,repeat:2})},n.createLevelCompleteParticle=function(){this.levelCompleteParticle=new Md(this.scene)},n.alignObjects=function(){this.popup=this.scene.add.container(),this.popup.add([this.popupBackground,this.title,this.levelText,this.scoreText,this.buttonsContainer,this.loading,this.leadersContainer,this.levelCompleteParticle,this.leaderboardEmptyText]),Phaser.Display.Align.In.Center(this.popupBackground,this.zone),Phaser.Display.Align.In.TopCenter(this.title,this.popupBackground,0,-8),Phaser.Display.Align.In.TopCenter(this.levelText,this.popupBackground,0,-50),Phaser.Display.Align.In.TopCenter(this.scoreText,this.popupBackground,0,-70),Phaser.Display.Align.In.BottomCenter(this.buttonsContainer,this.popupBackground,0,-43.75),Phaser.Display.Align.In.Center(this.loading,this.popupBackground),Phaser.Display.Align.In.Center(this.leadersContainer,this.popupBackground,0,-45),Phaser.Display.Align.In.Center(this.leaderboardEmptyText,this.popupBackground),this.add(this.popup)},n.createInputs=function(){this.nextLevelButton.onClick=this.handleNextLevel},n.setDisableButton=function(e){this.nextLevelButton.setDisabled(e)},n.runScreenShowUpAnimation=function(){var e,t,n=this;null==(e=this.backgroundShowUpAnimation)||e.remove(),null==(t=this.popupShowUpAnimation)||t.remove(),this.popup.setAlpha(0),this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){return n.background.setAlpha(0)},onComplete:function(){return n.background.setAlpha(.8)}});var a=this.popup,i=a.x,r=a.y;this.popup.setAlpha(0).setPosition(i,r+70),this.popupShowUpAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onStart:function(){var e=n.scene.world.getWorldSize().width;n.scene.audio.playSound(Tu.default.CONFETTI),n.levelCompleteParticle.explode(e/2+50,0)},onComplete:function(){n.setDisableButton(!1)}}),this.showAdAfterDelay=this.scene.time.delayedCall(1700,(function(){n.scene.showInterstitialAd()}))},n.runScreenExitAnimation=function(e){var t,n=this;null==(t=this.screenExitAnimation)||t.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:this.popup,duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){n.popup.setAlpha(0),n.background.setAlpha(0),e&&e()}})},n.showLeaders=function(e){var t=this.leaders.filter((function(e){return 1==e.active}));if(0!==t.length)for(var n=Math.min(e,4),a=0;a<this.leaders.length;a++)if(a<n){var i=t[a];if(!i)continue;i.setVisible(!0),i.runShowUpAnimation(a,300)}else this.leaders[a].setVisible(!1)},t}(GameCore.Screen),Af=Sf,bf=tr.default.DEFAULT,Tf=bf.KEY,wf=bf.FRAME,Cf=GameCore.Configs.Lives,If=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).popup=void 0,r.restartButton=void 0,r.watchAdButton=void 0,r.title=void 0,r.content=void 0,r.buttonsContainer=void 0,r.retryButton=void 0,r.backgroundShowUpAnimation=void 0,r.popupShowUpAnimation=void 0,r.screenExitAnimation=void 0,r.outOfMovesTextAnimation=void 0,r.showAdAfterDelay=void 0,r.holdDownShowBallsButton=!1,r.pulsateBubbleAnimation=void 0,r.seeTubeText=void 0,r.isShowingGameScene=void 0,r.outOfMoveText=void 0,r.topMask=void 0,r.centerMask=void 0,r.bottomMask=void 0,r.outOfMoveTextTimeline=void 0,r.timer=void 0,r.timeLabelContainer=void 0,r.timeLabel=void 0,r.heartCountLabel=void 0,r.liveCountdownTimer=void 0,r.open=function(){e.prototype.open.call((0,er.default)(r)),r.scene.lives.decreaseLife(),r.isShowingGameScene=!1,r.setDisableButton(!0),r.runBackgroundShowUpAnimation([r.topMask,r.centerMask,r.bottomMask]),r.runOutOfMoveAnimation(),r.createTimer(),Cf.enable&&r.handleLiveCountdownTimer(),r.holdDownShowBallsButton=!1,r.scene.audio.playSound(Tu.default.YOU_LOSE)},r.handleRestart=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setDisableButton(!0),r.runScreenExitAnimation([r.centerMask,r.topMask,r.bottomMask],(function(){return r.scene.screen.close(r.name)})),e.next=4,r.scene.showInterstitialAd();case 4:GameCore.Configs.Lives.enable&&r.scene.lives.getLives()<=0?r.scene.time.delayedCall(300,(function(){r.scene.screen.open($i.ScreenKeys.LIVES_SCREEN)})):r.scene.restartLevel();case 5:case"end":return e.stop()}}),e)}))),r.handleWatchAd=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.scene.showRewardVideo();case 2:if(!e.sent){e.next=12;break}r.runScreenExitAnimation([r.centerMask,r.topMask,r.bottomMask],(function(){return r.scene.screen.close(r.name)})),t=0;case 6:if(!(t<10)){e.next=12;break}return e.next=9,r.scene.gameManager.undo();case 9:t++,e.next=6;break;case 12:case"end":return e.stop()}}),e)}))),r.createPopup(),r.createTitle(),r.createContent(),r.createButtonsContainer(),r.createSeeTubeText(),r.createMask(),r.createOutOfMoveText(),r.alignObjects(),r.createInputs(),r.background.setAlpha(1e-6),r.background.setInteractive(),r.setDepth($i.ScreenDepth.POPUP),r}(0,Z.default)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new Fc(this.scene,0,0,265,235)},n.createTitle=function(){this.title=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:22,text:this.scene.lang.getText("out_of_moves"),origin:{x:.5,y:.5}}),this.title.width>.95*this.popup.displayWidth&&this.title.setScale(.95*this.popup.displayWidth/this.title.width)},n.createRestartButton=function(){this.restartButton=new hc.default(this.scene,Tf,wf.BUTTON_BLUE,107.5,47.5),this.restartButton.setName("RestartButton");var e=this.scene.make.image({key:Tf,frame:wf.ICON_RESET});e.setWorldSize(35.5,30);var t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.scene.lang.getText("restart"),origin:{x:.5,y:.5}});t instanceof Phaser.GameObjects.BitmapText&&t.setMaxWidth(60),t.width>60&&t.setScale(60/t.width),GameCore.Configs.Lives.enable,this.restartButton.add([e,t]),Phaser.Display.Align.In.Center(e,this.restartButton,-32,0),Phaser.Display.Align.In.Center(t,this.restartButton,18,-4)},n.createTimeLabelContainer=function(){this.timeLabelContainer=this.scene.add.container();var e=this.scene.add.rectangle(0,0,100,28,0,.3);this.timeLabel=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(20),text:"00:00",origin:{x:.5,y:.5}});var t=this.scene.make.image({key:Tf,frame:wf.HEART_BIG});t.setWorldSize(44.75,41),this.heartCountLabel=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(20),text:"5",origin:{x:.5,y:.5}}),this.timeLabelContainer.add([e,this.timeLabel,t,this.heartCountLabel]),Phaser.Display.Align.In.Center(e,this.timeLabelContainer,0,0),Phaser.Display.Align.In.Center(this.timeLabel,this.timeLabelContainer,8,-2),Phaser.Display.Align.In.Center(t,this.timeLabelContainer,-48,0),Phaser.Display.Align.In.Center(this.heartCountLabel,t,0,-4)},n.handleLiveCountdownTimer=function(){var e,t=this;null==(e=this.liveCountdownTimer)||e.remove(),this.updateLiveCountdownTimer();var n=this.scene.game.loop.raf.target;this.liveCountdownTimer=this.scene.time.addEvent({delay:n,callback:function(){t.updateLiveCountdownTimer()},loop:!0})},n.updateLiveCountdownTimer=function(){var e,t=this.scene.lives.getLives();if(this.heartCountLabel.text=""+t,t>=Cf.livesCapacity)return null==(e=this.liveCountdownTimer)||e.remove(),void this.timeLabel.setText("FULL");var n=(new Date).getTime(),a=this.scene.lives.getLastBonusLifeTime()-n+60*Cf.bonusDurationMins*1e3,i=Math.floor(a/36e5)<1?0:Math.floor(a/36e5);i>0&&(a-=36e5*i);var r=Math.floor(a/6e4)<1?0:Math.floor(a/6e4);r>0&&(a-=60*r*1e3);var s=Math.floor(a/1e3)<1?0:Math.floor(a/1e3);this.timeLabel.setText(this.formatUnitTime(r)+":"+this.formatUnitTime(s))},n.formatUnitTime=function(e){return e<10?"0"+e:e.toString()},n.createWatchAdButton=function(){this.watchAdButton=new hc.default(this.scene,Tf,wf.BUTTON_GREEN,107.5,47.5),this.watchAdButton.setName("WatchAdButton");var e=this.scene.make.image({key:Tf,frame:wf.ICON_ADS_2});e.setWorldSize(32,26.5);var t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(12),text:this.scene.lang.getText({key:"undo_{X}_moves",variables:[10]}),origin:{x:.5,y:.5}}),n=.45*this.watchAdButton.displayWidth;t instanceof Phaser.GameObjects.BitmapText&&t.setMaxWidth(.56*this.watchAdButton.displayWidth),t.width>n&&t.setScale(n/t.width),this.watchAdButton.add([e,t]),Phaser.Display.Align.In.Center(t,this.watchAdButton,-16,-2),Phaser.Display.Align.In.Center(e,this.watchAdButton,34,0)},n.createContent=function(){this.content=this.scene.add.container();var e=this.scene.make.image({key:Tf,frame:wf.ART_SKIP});e.setWorldSize(117.5,96);var t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(14),text:this.scene.lang.getText({key:"watch_video_to_undo_{X}_moves",variables:[10]}),origin:{x:.5,y:.5}});t instanceof Phaser.GameObjects.BitmapText&&(t.setMaxWidth(.5*this.popup.displayWidth),t.setLeftAlign()),t.setTint(7034229),this.content.add([e,t]),Phaser.Display.Align.In.Center(e,this.content,-75,0),Cf.enable?(Phaser.Display.Align.In.Center(t,this.content,55,10),this.createTimeLabelContainer(),this.content.add(this.timeLabelContainer),Phaser.Display.Align.To.TopCenter(this.timeLabelContainer,t,0,24)):Phaser.Display.Align.In.Center(t,this.content,55,-7)},n.createSeeTubeText=function(){this.seeTubeText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.getText("tap_to_see_the_tubes"),origin:{x:.5,y:.5}}),this.seeTubeText.setTint(6145791),this.seeTubeText.setAlpha(0)},n.createOutOfMoveText=function(){this.outOfMoveText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.getText("out_of_moves"),origin:{x:.5,y:.5}}),this.outOfMoveText.setTint(6145791),this.outOfMoveText.setAlpha(0)},n.alignObjects=function(){this.popup.add([this.popup,this.title,this.content,this.buttonsContainer]),this.popup.setInteractive(),Phaser.Display.Align.In.Center(this.popup,this.zone),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-9),Phaser.Display.Align.In.Center(this.content,this.popup),Phaser.Display.Align.In.BottomCenter(this.buttonsContainer,this.popup,0,-5),this.popup.setAlpha(0),this.add([this.popup,this.seeTubeText,this.outOfMoveText]),Phaser.Display.Align.To.BottomCenter(this.seeTubeText,this.popup,0,60),Phaser.Display.Align.To.TopCenter(this.outOfMoveText,this.popup,0,100)},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container(),this.createRestartButton(),this.createWatchAdButton(),this.buttonsContainer.add([this.restartButton,this.watchAdButton]),Phaser.Display.Align.In.BottomCenter(this.restartButton,this.buttonsContainer,-60,-10),Phaser.Display.Align.In.BottomCenter(this.watchAdButton,this.buttonsContainer,60,-10)},n.createMask=function(){var e=this.scene.game.world.getWorldSize(),t=e.width,n=e.height;this.topMask=this.scene.make.image({key:Tf,frame:wf.SQUARE}),this.topMask.setPosition(0,-n/2+70).setTint(0).setAlpha(0).setWorldSize(t,140),this.bottomMask=this.scene.make.image({key:Tf,frame:wf.SQUARE}),this.bottomMask.setPosition(0,n/2-70).setTint(0).setAlpha(0).setWorldSize(t,140),this.centerMask=this.scene.make.image({key:Tf,frame:wf.SQUARE}),this.centerMask.setPosition(0,0).setTint(0).setAlpha(0).setWorldSize(t,n-this.topMask.height-this.bottomMask.height),this.add([this.topMask,this.bottomMask,this.centerMask])},n.createTimer=function(){var e,t=this;null==(e=this.timer)||e.remove(),this.timer=this.scene.time.addEvent({delay:1200,callback:function(){return t.runScreenShowUpAnimation()}})},n.createInputs=function(){var e=this;this.watchAdButton.onClick=this.handleWatchAd,this.restartButton.onClick=this.handleRestart;var t=this.scene.add.rectangle(this.popup.x,this.popup.y,this.popup.width,this.popup.height);t.setInteractive(),this.popup.add(t),this.popup.moveBelow(t,this.buttonsContainer),this.background.on(Phaser.Input.Events.POINTER_DOWN,(function(){var t,n,a,i;if(e.outOfMoveTextTimeline.isPlaying())return e.scene.tweens.add({targets:[e.outOfMoveText],duration:200,ease:Phaser.Math.Easing.Cubic.Out,alpha:0}),void(null==(i=e.timer)||i.remove(!0));null!=(t=e.popupShowUpAnimation)&&t.isPlaying()||null!=(n=e.backgroundShowUpAnimation)&&n.isPlaying()||null!=(a=e.screenExitAnimation)&&a.isPlaying()||(e.isShowingGameScene?(e.runBackgroundShowUpAnimation([e.centerMask]),e.runScreenShowUpAnimation((function(){e.isShowingGameScene=!1}))):e.runScreenExitAnimation([e.centerMask],(function(){e.isShowingGameScene=!0})))})),t.on(Phaser.Input.Events.POINTER_DOWN,(function(){var t,n,a,i;if(e.outOfMoveTextTimeline.isPlaying())return e.scene.tweens.add({targets:[e.outOfMoveText],duration:200,ease:Phaser.Math.Easing.Cubic.Out,alpha:0}),void(null==(i=e.timer)||i.remove(!0));null!=(t=e.popupShowUpAnimation)&&t.isPlaying()||null!=(n=e.backgroundShowUpAnimation)&&n.isPlaying()||null!=(a=e.screenExitAnimation)&&a.isPlaying()||e.isShowingGameScene&&(e.runBackgroundShowUpAnimation([e.centerMask]),e.runScreenShowUpAnimation((function(){e.isShowingGameScene=!1})))}))},n.setDisableButton=function(e){this.restartButton.setDisabled(e),this.watchAdButton.setDisabled(e)},n.runScreenShowUpAnimation=function(e){var t,n=this;null==(t=this.popupShowUpAnimation)||t.remove();var a=this.popup,i=a.x,r=a.y;this.popup.setAlpha(0).setPosition(i,r+70),this.seeTubeText.setAlpha(0),this.popupShowUpAnimation=this.scene.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onStart:function(){n.setDisableButton(!0)},onComplete:function(){n.setDisableButton(!1),e&&e()}}),this.scene.tweens.add({targets:[this.seeTubeText],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:1},onStart:function(){return n.seeTubeText.setAlpha(0)},onComplete:function(){return n.seeTubeText.setAlpha(1)}})},n.runBackgroundShowUpAnimation=function(e){var t;null==(t=this.backgroundShowUpAnimation)||t.remove(),this.backgroundShowUpAnimation=this.scene.tweens.add({targets:e,duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){e.forEach((function(e){return e.setAlpha(0)}))},onComplete:function(){e.forEach((function(e){return e.setAlpha(.8)}))}})},n.runScreenExitAnimation=function(e,t){var n,a=this;null==(n=this.screenExitAnimation)||n.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:[this.popup,this.seeTubeText].concat(e),duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){a.popup.setAlpha(0),a.seeTubeText.setAlpha(0),e.forEach((function(e){return e.setAlpha(0)})),t&&t()}})},n.runOutOfMoveAnimation=function(e){this.outOfMoveTextTimeline=this.scene.tweens.timeline({});var t=this.outOfMoveText,n=t.x,a=t.y;this.outOfMoveText.setAlpha(0).setPosition(n,a-50),this.outOfMoveTextTimeline.add({targets:[this.outOfMoveText],duration:200,ease:Phaser.Math.Easing.Cubic.In,alpha:1}),this.outOfMoveTextTimeline.add({targets:[this.outOfMoveText],duration:800,ease:Phaser.Math.Easing.Bounce.Out,y:{from:a-50,to:a}}),this.outOfMoveTextTimeline.add({targets:[this.outOfMoveText],duration:200,ease:Phaser.Math.Easing.Cubic.Out,alpha:0,onComplete:function(){e&&e()}}),this.outOfMoveTextTimeline.play()},t}(GameCore.Screen),xf=If,_f=tr.default.DEFAULT,Pf=_f.KEY,kf=_f.FRAME,Lf=function(e){function t(t){var n;return(n=e.call(this,t,Pf,kf.BUTTON_GREEN,107.5,48)||this).pulsateBubbleAnimation=void 0,n.setName("RefillLivesButton"),n.createButtonContent(),n}(0,Z.default)(t,e);var n=t.prototype;return n.createButtonContent=function(){var e=this.scene.make.image({key:tr.default.DEFAULT.KEY,frame:tr.default.DEFAULT.FRAME.ICON_ADS_2});e.setWorldSize(32,26.5);var t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(15),text:this.scene.lang.getText("refill_lives"),origin:{x:.5,y:.5}});t.width>.52*this.displayWidth&&t.setScale(.52*this.displayWidth/t.width);var n=this.scene.add.image(0,0,Pf,kf.HEART_N);n.setWorldSize(29.5,30.5);var a=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(17),origin:{x:.5,y:.5},text:"5"});a.rotation=-35*Math.PI/180,Phaser.Display.Align.In.Center(e,this,30,0),Phaser.Display.Align.In.Center(t,this,-18,0),Phaser.Display.Align.In.TopLeft(n,this,15,13),Phaser.Display.Align.In.TopLeft(a,this,3,6),this.add([e,t,n,a])},n.runPulsateBubbleAnimation=function(){this.pulsateBubbleAnimation||(this.pulsateBubbleAnimation=new Rc({targets:this.getAll(),duration:1e3,props:{scale:"*=1.05"}})),this.pulsateBubbleAnimation.play()},n.stopPulsateBubbleAnimation=function(){var e;null==(e=this.pulsateBubbleAnimation)||e.stop()},n.setDisabled=function(e){var t,n;e?(null==(t=this.hitArea)||t.disableInteractive(),this.alpha=.8):(null==(n=this.hitArea)||n.setInteractive(),this.alpha=1)},t}(hc.default),Rf=Lf,Of=tr.default.DEFAULT,Df=Of.KEY,Mf=Of.FRAME,Bf=GameCore.Configs,Nf=(Bf.Network,Bf.Lives),Uf=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).popup=void 0,r.titleContainer=void 0,r.heartCountLabel=void 0,r.heartContainer=void 0,r.timeLabel=void 0,r.timeLabelContainer=void 0,r.refillButton=void 0,r.contents=void 0,r.closeButton=void 0,r.popupFadeOutAnimation=void 0,r.popupShowUpAnimation=void 0,r.countDownTimer=void 0,r.open=function(){e.prototype.open.call((0,er.default)(r)),r.handleCountDownTimer(),r.runPopupShowUpAnimation()},r.handleRefill=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.scene.showRewardVideo();case 2:e.sent&&r.scene.lives.refillLives();case 4:case"end":return e.stop()}}),e)}))),r.handleClosePopup=function(){r.runPopupExitsAnimation(0,200),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name),r.scene.restartLevel()}))},r.createPopup(),r.createTitle(),r.createHeartContainer(),r.createTimeLabelContainer(),r.createRefillButton(),r.createPopupContent(),r.alignContainers(),r.setDepth($i.ScreenDepth.POPUP),r.background.setAlpha(.8),r}(0,Z.default)(t,e);var n=t.prototype;return n.handleCountDownTimer=function(){var e,t=this;null==(e=this.countDownTimer)||e.remove(),this.updateCountdownTimer();var n=this.scene.game.loop.raf.target;this.countDownTimer=this.scene.time.addEvent({delay:n,callback:function(){t.updateCountdownTimer()},loop:!0})},n.updateTitleTextAndCloseButton=function(e,t){var n=this.titleContainer.getByName("titleText");n&&n.setText(e);var a=this.titleContainer.getByName("Close");a&&a.setVisible(t)},n.updateCountdownTimer=function(){var e,t=this.scene.lives.getLives();if(this.heartCountLabel.text=""+t,t>=Nf.livesCapacity)return null==(e=this.countDownTimer)||e.remove(),this.timeLabel.text=this.scene.lang.getText("full"),this.refillButton.setDisabled(!0),void this.updateTitleTextAndCloseButton(this.scene.lang.getText("keep_playing"),!0);this.refillButton.setDisabled(!1),t<=0?this.updateTitleTextAndCloseButton(this.scene.lang.getText("out_of_lives"),!1):this.updateTitleTextAndCloseButton(this.scene.lang.getText("keep_playing"),!0);var n=(new Date).getTime(),a=this.scene.lives.getLastBonusLifeTime()-n+60*Nf.bonusDurationMins*1e3,i=Math.floor(a/36e5)<1?0:Math.floor(a/36e5);i>0&&(a-=36e5*i);var r=Math.floor(a/6e4)<1?0:Math.floor(a/6e4);r>0&&(a-=60*r*1e3);var s=Math.floor(a/1e3)<1?0:Math.floor(a/1e3);this.timeLabel.setText(this.scene.lang.getText("next_life")+": "+this.formatUnitTime(r)+":"+this.formatUnitTime(s))},n.formatUnitTime=function(e){return e<10?"0"+e:e.toString()},n.createPopup=function(){this.popup=new Fc(this.scene,0,0,270,380)},n.createPopupContent=function(){this.contents=this.scene.add.container(),this.contents.add([this.popup,this.titleContainer,this.heartContainer,this.timeLabelContainer,this.refillButton]),this.add(this.contents)},n.createTitle=function(){this.titleContainer=this.scene.add.container();var e=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(20),text:this.scene.lang.getText("keep_playing"),origin:{x:.5,y:.5}});e.name="titleText";var t=this.scene.lang.getCurrentLanguage();"ru"!==t&&"it"!==t&&"tr"!==t||e.setFontSize(18);var n=new hc.default(this.scene,Df,Mf.BUTTON_CLOSE,29.5,29);n.setName("Close"),n.onClick=this.handleClosePopup,this.titleContainer.add([e,n]),Phaser.Display.Align.In.Center(e,this.titleContainer,0,0),Phaser.Display.Align.In.Center(n,this.titleContainer,115,0),Phaser.Display.Align.In.TopCenter(this.titleContainer,this.popup,0,-20)},n.createHeartContainer=function(){this.heartContainer=this.scene.add.container();var e=this.scene.add.image(0,0,Df,Mf.HEART_BIG);e.setWorldSize(89.5,82),this.heartCountLabel=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(37),text:"5",origin:{x:.5,y:.5}}),this.heartContainer.add([e,this.heartCountLabel]),Phaser.Display.Align.In.Center(e,this.heartContainer,0,3),Phaser.Display.Align.In.Center(this.heartCountLabel,this.heartContainer,0,0)},n.createTimeLabelContainer=function(){this.timeLabelContainer=this.scene.add.container();var e=this.scene.add.rectangle(0,0,200,45,0,.3);this.timeLabel=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(17),text:"NEXT LIFE: 00:00",origin:{x:.5,y:.5}}),"ru"===this.scene.lang.getCurrentLanguage()?this.timeLabel.setFontSize(14):"id"===this.scene.lang.getCurrentLanguage()&&this.timeLabel.setFontSize(12),this.timeLabelContainer.add([e,this.timeLabel]),Phaser.Display.Align.In.Center(e,this.timeLabelContainer,0,0),Phaser.Display.Align.In.Center(this.timeLabel,this.timeLabelContainer,0,0)},n.createRefillButton=function(){this.refillButton=new Rf(this.scene),this.refillButton.onClick=this.handleRefill},n.alignContainers=function(){Phaser.Display.Align.In.Center(this.popup,this.zone),Phaser.Display.Align.In.Center(this.heartContainer,this.popup,0,-70),Phaser.Display.Align.In.Center(this.timeLabelContainer,this.popup,0,35),Phaser.Display.Align.In.Center(this.refillButton,this.popup,0,120)},n.runPopupShowUpAnimation=function(){var e;null==(e=this.popupShowUpAnimation)||e.remove();var t=this.contents,n=t.x,a=t.y;this.contents.setAlpha(0).setPosition(n,a+70),this.popupShowUpAnimation=this.scene.tweens.add({targets:this.contents,duration:300,props:{y:{from:a+70,to:a,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}}})},n.runPopupExitsAnimation=function(e,t){var n,a=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new mh.default({targets:[this.contents],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.contents.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),Gf=Uf,Ff=tr.default.DEFAULT.KEY,Kf=function(e){function t(t,n){var a;return(a=e.call(this,t,Ff,n.backgroundOn)||this).options=void 0,a.icon=void 0,a.textLabel=void 0,a.getFrameByStatus=function(){var e=a.options,t=e.enable,n=e.frameOn,i=e.frameOff;return t?n:i},a.getBackgroundByStatus=function(){var e=a.options,t=e.enable,n=e.backgroundOn,i=e.backgroundOff;return t?n:i},a.createButton=function(e){var t=a.getBackgroundByStatus();a.button=a.scene.add.image(0,0,e,t),a.add(a.button)},a.options=n,a.createIcon(),a.createText(),a}(0,Z.default)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getFrameByStatus();this.icon.setFrame(t);var n=this.getBackgroundByStatus();this.button.setFrame(n),this.updateText()},n.createText=function(){this.textLabel=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(15),text:"NULL",origin:{x:.5,y:.5}}),this.add(this.textLabel),this.updateText()},n.updateText=function(){this.options.enable?this.textLabel.text=this.scene.lang.getText("on"):this.textLabel.text=this.scene.lang.getText("off"),this.textLabel.setScale(1),this.textLabel.width>50&&this.textLabel.setScale(50/this.textLabel.width),this.alignText()},n.alignText=function(){this.options.enable?Phaser.Display.Align.In.Center(this.textLabel,this,-53,0):Phaser.Display.Align.In.Center(this.textLabel,this,-77,0)},n.createIcon=function(){var e=this.getFrameByStatus();this.icon=this.scene.make.image({key:Ff,frame:e}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(Tn.AnalyticsEvents.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(hc.default),Yf=Kf,Vf=tr.default.DEFAULT,zf=Vf.KEY,Hf=Vf.FRAME,Wf=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).popup=void 0,r.title=void 0,r.contents=void 0,r.popupFadeOutAnimation=void 0,r.soundContainer=void 0,r.settingSound=void 0,r.vibrateContainer=void 0,r.settingVibrate=void 0,r.fastPourContainer=void 0,r.settingFastPour=void 0,r.popupShowUpAnimation=void 0,r.open=function(){e.prototype.open.call((0,er.default)(r));var t=r.scene.player.getPlayerSettings(),n=t.sound,a=t.vibrate,i=t.fastPour;r.settingSound.updateStatus(n),(Cu()||GameCore.Utils.Valid.isDebugger())&&r.settingVibrate.updateStatus(a),r.settingFastPour.updateStatus(i),r.runPopupShowUpAnimation()},r.handleClosePopup=function(){r.runPopupExitsAnimation(0,200),r.popupFadeOutAnimation.next((function(){r.scene.screen.close(r.name);var e=r.scene;e&&e.gameManager.updateTweenTimeScale()}))},r.handleShare=function(){r.scene.storage.dispatch(ms())},r.handlePlayWithFriend=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.scene.screen.close(r.name),r.scene.storage.dispatch(Fh());case 2:case"end":return e.stop()}}),e)}))),r.handleMusicSetting=function(e){r.scene.player.setSetting("music",e),e?r.scene.audio.playMusic():r.scene.audio.pauseMusic()},r.handleSoundSetting=function(e){r.scene.player.setSetting("sound",e)},r.handleVibrateSetting=function(e){r.scene.player.setSetting("vibrate",e)},r.handleFastPourSetting=function(e){r.scene.player.setSetting("fastPour",e)},r.createPopup(),r.createTitle(),r.createSettingContainer(),r.createPopupContent(),r.createInput(),r.setDepth($i.ScreenDepth.POPUP),r.background.setAlpha(.8),r}(0,Z.default)(t,e);var n=t.prototype;return n.createInput=function(){this.settingSound.onClick=this.handleSoundSetting,this.settingFastPour.onClick=this.handleFastPourSetting,(Cu()||GameCore.Utils.Valid.isDebugger())&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new Fc(this.scene,0,0,265,250)},n.createSettingContainer=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate,a=e.fastPour;this.soundContainer=this.scene.add.container();var i=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.getText("sound"),origin:{x:.5,y:.5}});i.setTint(7034229),this.settingSound=this.createToggleButton(t,"Sound"),this.settingSound.setName("SettingSoundButton"),this.soundContainer.add([i,this.settingSound]),"ar"==this.scene.lang.getCurrentLanguage()?Phaser.Display.Align.In.RightCenter(i,this.soundContainer,-10,0):Phaser.Display.Align.In.LeftCenter(i,this.soundContainer,110,0),Phaser.Display.Align.In.Center(this.settingSound,this.soundContainer,65,0),this.fastPourContainer=this.scene.add.container();var r=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.getText("fast_pour"),origin:{x:.5,y:.5}});if(r.setTint(7034229),r instanceof Phaser.GameObjects.BitmapText&&(r.setMaxWidth(100),r.setLeftAlign()),r.width>120&&r.setScale(120/r.width),this.settingFastPour=this.createToggleButton(a,"FastPour"),this.settingFastPour.setName("SettingFastPourButton"),this.fastPourContainer.add([r,this.settingFastPour]),"ar"==this.scene.lang.getCurrentLanguage()?Phaser.Display.Align.In.RightCenter(r,this.fastPourContainer,-10,0):Phaser.Display.Align.In.LeftCenter(r,this.fastPourContainer,110,0),Phaser.Display.Align.In.Center(this.settingFastPour,this.fastPourContainer,65,0),Cu()||GameCore.Utils.Valid.isDebugger()){this.vibrateContainer=this.scene.add.container();var s=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.getText("vibrate"),origin:{x:.5,y:.5}});s.setTint(7034229),this.settingVibrate=this.createToggleButton(n,"Vibrate"),this.settingVibrate.setName("SettingVibrateButton"),this.vibrateContainer.add([s,this.settingVibrate]),"ar"==this.scene.lang.getCurrentLanguage()?Phaser.Display.Align.In.RightCenter(s,this.vibrateContainer,-10,0):Phaser.Display.Align.In.LeftCenter(s,this.vibrateContainer,110,0),Phaser.Display.Align.In.Center(this.settingVibrate,this.vibrateContainer,65,0),Phaser.Display.Align.In.Center(this.soundContainer,this.popup,0,-50),Phaser.Display.Align.In.Center(this.vibrateContainer,this.popup,0,10),Phaser.Display.Align.In.Center(this.fastPourContainer,this.popup,0,70)}else Phaser.Display.Align.In.Center(this.soundContainer,this.popup,0,-25),Phaser.Display.Align.In.Center(this.fastPourContainer,this.popup,0,50)},n.createToggleButton=function(e,t){var n=new Yf(this.scene,{enable:e,frameOn:tr.default.DEFAULT.FRAME.NOTE_ON,frameOff:tr.default.DEFAULT.FRAME.NOTE_OFF,backgroundOn:tr.default.DEFAULT.FRAME.BG_ON,backgroundOff:tr.default.DEFAULT.FRAME.BG_OFF});return n.button.setTexture(tr.default.DEFAULT.KEY),n.setName(t),n.icon.setWorldSize(80,26),n.button.setWorldSize(80,26),n},n.createPopupContent=function(){this.contents=this.scene.add.container(),this.contents.add([this.popup,this.title,this.soundContainer,this.fastPourContainer]),(Cu()||GameCore.Utils.Valid.isDebugger())&&this.contents.add(this.vibrateContainer),this.add(this.contents)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.lang.getText("settings"),t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),text:e,origin:{x:.5,y:.5}}),n=new hc.default(this.scene,zf,Hf.BUTTON_CLOSE,29.5,29);n.setName("Close"),n.onClick=this.handleClosePopup,this.title.add([t,n]),Phaser.Display.Align.In.Center(t,this.title,0,0),Phaser.Display.Align.In.Center(n,this.title,115,-2),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-20)},n.runPopupShowUpAnimation=function(){var e;null==(e=this.popupShowUpAnimation)||e.remove();var t=this.contents,n=t.x,a=t.y;this.contents.setAlpha(0).setPosition(n,a+70),this.popupShowUpAnimation=this.scene.tweens.add({targets:this.contents,duration:300,props:{y:{from:a+70,to:a,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}}})},n.runPopupExitsAnimation=function(e,t){var n,a=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new mh.default({targets:[this.contents],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){a.contents.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},t}(GameCore.Screen),jf=Wf,Xf=tr.default.DEFAULT,qf=Xf.KEY,Zf=Xf.FRAME,Qf=GameCore.Configs,Jf=Qf.Network,$f=Qf.Match,ep=function(e){function t(t,n,a,i){var r;return(r=e.call(this,t,n,a,i)||this).isUseRescue=void 0,r.countdownText=void 0,r.countdownTimer=void 0,r.countdownCount=void 0,r.progressColor=0,r.progressTween=void 0,r.progressCircle=void 0,r.progressAngle=void 0,r.progressSize=void 0,r.progressRadius=void 0,r.skipText=void 0,r.continueButton=void 0,r.continueButtonAnimation=void 0,r.adsTimer=void 0,r.open=function(){e.prototype.open.call((0,er.default)(r)),r.isUseRescue=!1,r.progressColor=4249855,r.countdownCount=$f.RescueGamePopupTimeout,r.setTime(r.countdownCount),r.runCountdown(),r.runContinueButtonAnimation()},r.handleShowRewardedVideoAd=(0,q.default)(J().mark((function e(){var t,n,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.scene.game,n=t.globalScene,a=t.audio,e.prev=1,!r.isUseRescue){e.next=4;break}return e.abrupt("return");case 4:return r.scene.storage.dispatch((function(e,t){var n=t(),a=us(n).level,i=void 0===a?0:a,r=Ks(n);window.game.analytics.event(Tn.AnalyticsEvents.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(r),level:i,level_name:"level_"+i}),e({type:ia,payload:{}})})),r.isUseRescue=!0,r.progressTween.pause(),r.countdownTimer.remove(),n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Loading ads...",duration:0,loading:!0}),a.muteAll(),a.pauseMusic(),e.next=13,new Promise((function(e,t){var n;null==(n=r.adsTimer)||n.remove(),r.adsTimer=r.scene.time.delayedCall(Jf.Timeout,t),r.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):r.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 13:return e.next=15,r.scene.ads.showRewardedVideoAsync();case 15:r.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),gs.emit(wu.RESCUE),n.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=27;break}if("USER_INPUT"!==e.t0.code){e.next=27;break}return r.showNotifySkipAds(),e.abrupt("return");case 27:r.showNotifyNoAds();case 28:return e.prev=28,null==(i=r.adsTimer)||i.destroy(),a.unmuteAll(),r.scene.audio.playMusic(),r.scene.screen.close(r.name),e.finish(28);case 34:case"end":return e.stop()}}),e,null,[[1,21,28,34]])}))),r.showNotifyNoAds=function(e){if(!e||e.name===$i.ScreenKeys.NOTIFY_SCREEN){var t=r.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,r.showGameOver),t.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"No ads to display!",duration:2e3,loading:!1})}},r.showNotifySkipAds=function(){var e=r.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,r.showGameOver),e.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},r.showGameOver=function(e){e&&e.name!==$i.ScreenKeys.NOTIFY_SCREEN||(r.countdownTimer.remove(),r.progressTween.pause(),r.scene.screen.close(r.name),r.scene.storage.dispatch(Bo()))},r.handleSkip=function(){r.countdownTimer.remove(),r.progressTween.pause(),r.scene.screen.close(r.name),r.scene.storage.dispatch(Bo())},r.handleRunCountdown=function(){if(r.countdownCount-=1,5===r.countdownCount&&(r.progressColor=15812177),r.countdownCount<=0)return r.countdownTimer.remove(),r.progressTween.complete(),void r.rescueTimeout();r.setTime(r.countdownCount)},r.progressColor=0,r.progressAngle=-90,r.progressSize=15,r.progressRadius=70,r.countdownCount=$f.MaxRescueCount,r.setDepth($i.ScreenDepth.POPUP),r.background.setAlpha(.8),r.createContent(),r}(0,Z.default)(t,e);var n=t.prototype;return n.createContent=function(){this.createProgressCircle(),this.createCountdown(),this.createContinueButton(),this.createSkipText()},n.createCountdown=function(){this.countdownText=this.scene.make.bitmapText({size:this.scene.fontSize(75),font:jo.default.PRIMARY.KEY,origin:{x:.6,y:.5}}),this.add(this.countdownText),this.setTime(this.countdownCount)},n.runCountdown=function(){var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e),this.startProgressCircle()},n.setProgressCircle=function(e){var t=this.countdownText,n=t.x,a=t.y,i=Phaser.Math.DegToRad(e-360+this.progressAngle),r=Phaser.Math.DegToRad(this.progressAngle);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(this.progressSize,this.progressColor),this.progressCircle.arc(n,a,this.progressRadius,i,r,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.setTime=function(e){this.countdownText.setText(""+e),Phaser.Display.Align.In.Center(this.countdownText,this.zone,0,-120)},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.startProgressCircle=function(){var e=this;this.progressTween=this.scene.tweens.addCounter({from:360,to:0,duration:1e3*$f.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)}})},n.createContinueButton=function(){this.continueButton=new hc.default(this.scene,qf,Zf.BLANK,232,68),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var e=this.scene.add.image(0,0,qf,Zf.BLANK);Phaser.Display.Align.In.Center(e,this.continueButton),e.setWorldSize(36.5,33.5),e.setX(this.continueButton.x-70),this.continueButton.add(e);var t=this.scene.make.bitmapText({size:this.scene.fontSize(28),text:"CONTINUE",font:jo.default.PRIMARY.KEY,origin:{x:.35,y:.55}});this.continueButton.add(t),Phaser.Display.Align.In.Center(this.continueButton,this.zone,0,30)},n.createSkipText=function(){this.skipText=new hc.default(this.scene,qf,Zf.BLANK,128,24),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,60)},n.rescueTimeout=function(){this.scene.screen.close(this.name),this.scene.storage.dispatch(Bo())},n.runContinueButtonAnimation=function(){var e;this.continueButtonAnimation||(this.continueButtonAnimation=new Rc({targets:[this.continueButton],props:{scale:"-=0.02"}})),null==(e=this.continueButtonAnimation)||e.play()},t}(GameCore.Screen),tp=ep,np=["red","orange","pink","yellow","lime","blue","brown","purple","teal","green","blueGrey","mahogany"],ap=function(){function e(){}return e.shuffleByLevel=function(e,t){var n=JSON.parse(JSON.stringify(t));if(e<=GameCore.Configs.Level.maxLevel)return n;var a=this.getColors(n).map((function(e){return e+"2"}));return this.shuffle(a,e),n.bottleList.forEach((function(e){e.map((function(t,n){e[n]=a[np.indexOf(t)]||e[n]}))})),n.bottleList.forEach((function(e){e.map((function(t,n){return e[n]=t.replace("2","")}))})),this.shuffle(n.bottleList,e),n},e.getColors=function(e){var t=[];return e.bottleList.forEach((function(e){e.map((function(e){t.includes(e)||t.push(e)}))})),np.forEach((function(e){t.includes(e)||t.push(e)})),t},e.shuffle=function(e,t){for(var n=t,a=0;a<e.length;++a){var i=e.length-a;n=(214013*n+2531011)%Math.pow(2,32);var r=Math.floor(n/Math.pow(2,16))%Math.pow(2,15),s=void 0;s=t<Math.pow(2,31)?r%i:(r+Math.pow(2,15))%i;var o=[e[i-1],e[s]];e[s]=o[0],e[i-1]=o[1]}},e}(),ip=ap,rp=tr.default.DEFAULT,sp=rp.KEY,op=rp.FRAME,cp=GameCore.Configs,up=cp.Match,lp=(cp.Gameplay,cp.Ads,cp.LeadersBoard,function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).gameState=void 0,t.gameManager=void 0,t.prevScore=0,t.gameplayMode=void 0,t.currentScore=0,t.currentDiamond=0,t.prevTargetScore=0,t.isReachTargetScore=!1,t.rewardScreen=void 0,t.levelCompleteScreen=void 0,t.completeAllLevelScreen=void 0,t.myInfoContainer=void 0,t.opponentInfoContainer=void 0,t.showAdNotify=void 0,t.gameOverBoard=void 0,t.startLevelBoard=void 0,t.saveTimer=void 0,t.hideableObjects=void 0,t.header=void 0,t.footer=void 0,t.backgroundImages=[],t.create=function(){e.prototype.create.call((0,er.default)(t)),t.createBackgroundImages(),t.createHandler(),t.createHeader(),t.createFooter(),t.createManager(),t.createUI(),t.listenEvents(),t.startGame(),t.startLevel()},t.run=function(){t.screen.closeAllScreens(),t.gameManager.showHint(),t.checkAndAddShortcut(),t.ads.showBannerAdAsync().catch((function(e){}))},t.lose=function(e){var n=t.gameManager.getCurrentLevelPlayTime(),a=t.gameManager.getCurrentLevelPlayMoves();t.analytics.levelFail(e,t.currentScore,void 0,{level_play_time:n,level_moves:a}),t.screen.open($i.ScreenKeys.LEVEL_FAILED_SCREEN)},t.rescued=function(){t.startLevel(),t.initManager(),t.time.addEvent({delay:0,callback:function(){t.startManager(),t.updateMove()}})},t.replay=function(){t.startGame()},t.levelUp=function(){t.stopManager(),t.disableButtons(!1);var e=t.storage.getState();t.gameplayMode=Ks(e),t.showChallengeModeUI(),t.handleNextLevel(),gs.emit(Xr.PASS_LEVELS.EVENTS.PASS_LEVEL,{type:"level",value:1});var n=t.level.getLevel()-1;t.analytics.levelComplete(n,t.currentScore),t.startLevel()},t.handleNextLevel=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initManager(),t.startManager();case 2:case"end":return e.stop()}}),e)}))),t.showInterstitialAd=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.level.getLevel()){e.next=2;break}return e.abrupt("return");case 2:if(t.audio.pauseMusic(),!t.ads.canbeShowInterstitialAd()){e.next=16;break}return e.prev=4,t.audio.muteAll(),e.next=8,t.ads.showInterstitialAdAsync();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4);case 13:return e.prev=13,t.audio.unmuteAll(),e.finish(13);case 16:t.audio.playMusic(),t.ads.preloadInterstitialAdAsync().catch((function(){}));case 18:case"end":return e.stop()}}),e,null,[[4,10,13,16]])}))),t.handleCloseBannerAds=function(){t.ads.hideBannerAdAsync().catch((function(e){}))},t.updateMove=function(){var e;up.ContinueSingleMatchEnabled&&t.gameplayMode===_i&&(null==(e=t.saveTimer)||e.remove(),t.saveTimer=t.time.addEvent({delay:1500,callback:function(){var e=t.storage.getState(),n=Jr(e);t.storage.dispatch(ho(n,{score:t.currentScore,data:{diamond:t.currentDiamond},updateAt:Date.now()}))}}))},t.clearMove=function(){var e=t.storage.getState(),n=Jr(e);t.storage.dispatch(ho(n,{score:t.currentScore,data:{fen:"",diamond:t.currentDiamond},updateAt:Date.now()}))},t.showNotifyNoAds=function(e){if(!e||e.name===$i.ScreenKeys.NOTIFY_SCREEN){var n=t.game.globalScene;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:t.lang.getText("no_ads_to_display"),duration:2e3,loading:!1})}},t.showNotifySkipAds=function(){var e=t.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:t.lang.getText("sorry_no_rewards_you_have_cancelled_the_ad"),duration:3e3,loading:!1})},t.loadEnglishFont=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.createBackgroundImages=function(){for(var e=324,t=this.world.getWorldSize(),n=t.width,a=t.height,i=Math.ceil(a/e),r=Math.ceil(n/e),s=0;s<i;s++)for(var o=0;o<r;o++){var c=this.add.image(o*e,s*e,tr.default.DEFAULT.KEY,tr.default.DEFAULT.FRAME.BACKGROUND).setOrigin(0).setDepth(-1);c.setWorldSize(e,e),this.backgroundImages.push(c)}},n.createHandler=function(){},n.initHandler=function(){},n.createManager=function(){this.gameManager=new zl(this)},n.initManager=function(){},n.stopManager=function(){},n.startManager=function(){},n.listenEvents=function(){gs.on(wu.RESCUE,this.rescued),gs.on(wu.REPLAY,this.replay)},n.startGame=function(){var e=(0,q.default)(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ads.preloadInterstitialAdAsync().catch((function(){})),this.ads.preloadRewardedVideoAsync().catch((function(){})),e.next=4,this.level.preloadLevelDataAsync(this.level.getLevel());case 4:t=this.storage.getState(),this.gameplayMode=Ks(t),this.showChallengeModeUI(),this.initHandler(),this.initManager(),n=this.level.getLevel(),this.header.updateLevelText(n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startLevel=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.level.getLevelData())){e.next=14;break}return n=this.level.getLevel(),a=ip.shuffleByLevel(n,t),i=fl.getBonusScoreFromLevel(n),this.header.setScoreText(i),this.myInfoContainer.setPlayerScore(i),this.header.updateLevelText(n),this.footer.initDefault(),this.disableButtons(),e.next=12,this.gameManager.buildLevel(a);case 12:this.disableButtons(!1),this.analytics.levelStart(null==a?void 0:a.level);case 14:GameCore.Configs.Lives.enable&&this.lives.getLives()<=0&&this.screen.open($i.ScreenKeys.LIVES_SCREEN);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createUI=function(){this.createPauseScreen(),this.createLivesScreen(),this.createCompleteLevelScreen(),this.createLevelFailedScreen(),this.createChallengeModeUI(),this.createHideableObjects(),this.createDevTools()},n.createPauseScreen=function(){this.screen.add($i.ScreenKeys.PAUSE_SCREEN,jf)},n.createLivesScreen=function(){this.screen.add($i.ScreenKeys.LIVES_SCREEN,Gf)},n.createConfirmScreen=function(){this.screen.add($i.ScreenKeys.CONFIRM_SCREEN,kd)},n.createRewardScreen=function(){this.rewardScreen=this.screen.add($i.ScreenKeys.REWARD_SCREEN,Uh)},n.createRescueScreen=function(){this.screen.add($i.ScreenKeys.RESCUE_SCREEN,tp)},n.createCompleteLevelScreen=function(){this.levelCompleteScreen=this.screen.add($i.ScreenKeys.LEVEL_COMPLETE_SCREEN,Af)},n.createCompleteAllLevelScreen=function(){this.completeAllLevelScreen=this.screen.add($i.ScreenKeys.COMPLETE_ALL_LEVELS_SCREEN,Zd)},n.createLevelFailedScreen=function(){this.screen.add($i.ScreenKeys.LEVEL_FAILED_SCREEN,xf)},n.createDevTools=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new hc.default(this,sp,op.BLANK,30,30);if(t.setAlpha(.5).setPosition(110,90),t.onClick=function(){return e.lose(1)},GameCore.Configs.Lives.enable){var n=new hc.default(this,sp,op.BLANK,30,30);n.setAlpha(.5).setPosition(160,90),n.onClick=function(){e.screen.open($i.ScreenKeys.LIVES_SCREEN)}}var a=new hc.default(this,sp,op.BLANK,30,30),i=this.add.image(0,0,sp,op.ICON_RESET);i.setWorldSize(71/3,20),i.setTintFill(0),a.add(i),a.setAlpha(.5).setPosition(210,90),a.onClick=function(){e.player.updatePlayerLevel(1),e.level.setLevel(1),e.run()};var r=new hc.default(this,sp,op.BLANK,30,30);r.setAlpha(.5).setPosition(260,90),r.onClick=function(){return e.win()}}},n.createHideableObjects=function(){this.hideableObjects=this.make.group({})},n.createHeader=function(){this.header=new md(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone,0,-40)},n.createFooter=function(){var e=this.ads.getBannerHeight();this.footer=new dd(this),Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,-35-e)},n.createAdNotify=function(){this.showAdNotify=new lh(this),Phaser.Display.Align.In.TopCenter(this.showAdNotify,this.gameZone,0,-200)},n.createGameOverBoard=function(){this.gameOverBoard=new eh(this),this.gameOverBoard.setDepth(Ji.default.POPUP),Phaser.Display.Align.In.Center(this.gameOverBoard,this.gameZone,0,25)},n.createStartLevelBoard=function(){this.startLevelBoard=new dh(this),this.startLevelBoard.setDepth(Ji.default.POPUP),Phaser.Display.Align.In.Center(this.startLevelBoard,this.gameZone,0,25)},n.disableButtons=function(e){void 0===e&&(e=!0),this.header.setDisable(e),this.footer.setDisable(e)},n.win=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disableButtons(),t=this.level.getLevel(),this.updatePlayerLevel(t+1),this.level.nextLevel(),n=this.gameManager.getCurrentLevelPlayTime(),a=this.gameManager.getCurrentLevelPlayMoves(),this.analytics.levelComplete(t,this.currentScore,void 0,{level_play_time:n,level_moves:a}),this.audio.playSound(Tu.default.SCORE_HIGHTEST),e.next=10,this.gameManager.playWinAnimation();case 10:this.screen.open($i.ScreenKeys.LEVEL_COMPLETE_SCREEN);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.restartLevel=function(){this.startLevel()},n.endGame=function(){this.clearMove(),this.prevTargetScore=0,this.storage.dispatch(Bo())},n.checkAndAddShortcut=function(){this.facebook.attemptToAddShortcut()},n.showRewardVideo=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game,n=t.globalScene,a=t.audio,e.prev=1,n.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:this.lang.getText("loading_ads"),duration:0,loading:!0}),a.pauseMusic(),this.audio.muteAll(),e.next=7,new Promise((function(e,t){i.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?i.ads.events.once(GameCore.Ads.Events.LOADED,e):i.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return e.next=9,this.ads.showRewardedVideoAsync();case 9:return this.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.close($i.ScreenKeys.NOTIFY_SCREEN),e.abrupt("return",!0);case 15:if(e.prev=15,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=21;break}if("USER_INPUT"!==e.t0.code){e.next=21;break}return this.showNotifySkipAds(),e.abrupt("return",!1);case 21:return this.showNotifyNoAds(),e.abrupt("return",!1);case 23:return e.prev=23,this.audio.unmuteAll(),a.playMusic(),e.finish(23);case 27:case"end":return e.stop()}}),e,this,[[1,15,23,27]])})));return function(){return e.apply(this,arguments)}}(),n.createChallengeModeUI=function(){this.opponentInfoContainer=new rh(this,!0),Phaser.Display.Align.In.TopRight(this.opponentInfoContainer,this.gameZone,-47,-90),this.myInfoContainer=new rh(this),Phaser.Display.Align.In.TopLeft(this.myInfoContainer,this.gameZone,-47,-90),this.opponentInfoContainer.setVisible(!1),this.myInfoContainer.setVisible(!1)},n.showChallengeModeUI=function(){var e=(0,q.default)(J().mark((function e(){var t,n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),this.gameplayMode===Pi||this.gameplayMode===Ci){e.next=6;break}return this.opponentInfoContainer.setVisible(!1),this.myInfoContainer.setVisible(!1),this.header.updateScoreTextAndHeartOnNormalMode(),e.abrupt("return");case 6:return this.header.updateScoreTextAndHeartOnChallengeMode(),n=as(t),a=this.player.getPlayer(),this.opponentInfoContainer.setVisible(!0),this.opponentInfoContainer.updateInfo(n.playerId,n.photo),this.myInfoContainer.setVisible(!0),this.myInfoContainer.updateInfo(a.playerId,a.photo),i=window.game.profile,e.next=16,i.requestProfiles([n.playerId]);case 16:r=i.getProfiles(),(s=r[n.playerId])?this.opponentInfoContainer.setPlayerScore(s.score):this.opponentInfoContainer.setPlayerScore(void 0);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerLevel=function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&GameCore.Utils.Valid.isNumber(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,FBInstant.player.getDataAsync(["level"]);case 5:if(n=e.sent,a=n.level,!(t<(void 0===a?1:a))){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,FBInstant.player.setDataAsync({level:t});case 13:return e.next=15,this.player.updatePlayerLevel(t);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.handleStartOverPlayerLevel=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FBInstant.player.setDataAsync({level:1});case 2:return e.next=4,this.player.updatePlayerLevel(1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.update=function(t,n){e.prototype.update.call(this,t,n),this.gameManager.updateGameManager()},n.openCompleteAllLevelScreen=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createConfirmScreen(),this.createCompleteAllLevelScreen(),this.screen.open($i.ScreenKeys.COMPLETE_ALL_LEVELS_SCREEN);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Ko.default));var hp=lp,dp=n(43),fp=tr.default.DEFAULT,pp=fp.KEY,gp=fp.FRAME,vp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.playButton=void 0,n.scene=t,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.playButton,this)},n.createButtons=function(){this.createPlayButton()},n.createShareButton=function(){},n.createPlayButton=function(){this.playButton=new hc.default(this.scene,pp,gp.BUTTON_GREEN,107.5,47.5),this.playButton.setName("PlayWithFriendButton");var e=this.scene.make.image({key:pp,frame:gp.ICON_BATTLE});e.setWorldSize(34.5,29);var t=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),text:this.scene.lang.getText("play"),origin:{x:.5,y:.5}});t.setScale(1),t.width>62&&t.setScale(62/t.width),this.playButton.add([e,t]),Phaser.Display.Align.In.Center(t,this.playButton,-16,-3),Phaser.Display.Align.In.Center(e,this.playButton,32,0),this.add(this.playButton)},t}(Phaser.GameObjects.Container),mp=vp,yp=tr.default.DEFAULT,Ep=yp.KEY,Sp=yp.FRAME,Ap=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backButton=void 0,n.background=void 0,n.title=void 0,n.scene=t,n.setName("HeaderBar"),n.createBackground(),n.createBackButton(),n.createTitle(),n.alignObjects(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Ep,frame:Sp.BG_TILE_RANK}),this.background.setWorldSize(375,45),this.add(this.background)},n.createTitle=function(){this.title=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(22),text:this.scene.lang.getText("leaderboards"),origin:{x:.5,y:.5}}),this.title.setScale(1),this.title.width>300&&this.title.setScale(300/this.title.width),this.add(this.title)},n.createBackButton=function(){this.backButton=new hc.default(this.scene,Ep,Sp.BUTTON_BACK,30,28.5),this.backButton.setName("CloseLeaderBoardButton"),this.add(this.backButton)},n.alignObjects=function(){Phaser.Display.Align.In.Center(this.background,this),Phaser.Display.Align.In.Center(this.title,this.background),Phaser.Display.Align.In.LeftCenter(this.backButton,this.background,-8,0)},t}(Phaser.GameObjects.Container),bp=Ap,Tp=n(55),wp=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,Z.default)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).classType=void 0,a.listConfigs=void 0,a.padding=void 0,a.startObjectIndex=void 0,a.endObjectIndex=void 0,a.listObjects=void 0,a.classType=n.classType,a.listConfigs=n.listConfigs,a.padding=n.padding?n.padding:0,a.objects.classType=a.classType,a.updateConfig(a.listConfigs),a}(0,Z.default)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){return this.listObjects.filter((function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){this.reset(),this.listConfigs=e,this.listObjects=new Array(e.length).fill(void 0),this.addObjectIndex(0,0);var t=this.getEndObjectIndex();this.addObjectIndex(1,t),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e=this;this.listObjects instanceof Array&&this.listObjects.map((function(t){void 0!==t&&e.objects.killAndHide(t)})),this.objects.getChildren().forEach((function(t){return e.objects.killAndHide(t)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();this.killObjectIndex(this.startObjectIndex,this.endObjectIndex),this.startObjectIndex=t,this.endObjectIndex=n,this.addObjectIndex(this.startObjectIndex,this.endObjectIndex)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var a=this.listObjects[n];a&&(this.objects.killAndHide(a),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var a=this.padding,i=this.listConfigs;if(n>=i.length)return;var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+a)*n+this.value-this.height/2;r.updateInfo(i[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,a=e+t;return Math.min(Math.floor((this.height-this.value)/a),n.length)},(0,xe.default)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(Tp.default)),Cp=tr.default.DEFAULT,Ip=Cp.KEY,xp=Cp.FRAME,_p=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).button=void 0,a.avatar=void 0,a.rankIcon=void 0,a.rankText=void 0,a.playerInfo=void 0,a.username=void 0,a.score=void 0,a.scoreText=void 0,a.background=void 0,a.crown=void 0,a.showPopUp=void 0,a.showItems=void 0,a.payload=void 0,a.handleChallengeFriend=function(){var e=a.payload.playerId;a.scene.storage.dispatch(Ro(e))},a.createBackground(),a.updateSize(),a.createAvatar(),a.createCrown(),a.createRank(),a.createPlayerInfo(),a.createButton(),n&&a.updateInfo(n),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,O.default)({scoreRight:!0,isHighlight:!1,useChallenge:!1},e),this.updateAvatar(),this.updateCrown(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton()},n.createBackground=function(){this.background=this.scene.make.image({key:Ip,frame:xp.BG_RANK}),this.background.setWorldSize(320,56),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Jo(this.scene,{key:Ip,background:xp.BG_AVA,width:42.5,height:43}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-48)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createCrown=function(){this.crown=this.scene.make.image({key:Ip,frame:xp.ICON_CROWN}),this.crown.setWorldSize(23.5,19),this.add(this.crown),Phaser.Display.Align.To.TopCenter(this.crown,this.avatar,0,-6),this.crown.setVisible(!1)},n.updateCrown=function(){1==this.payload.rank?this.crown.setVisible(!0):this.crown.setVisible(!1)},n.createRank=function(){this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;this.updateRankText(e)},n.createRankText=function(e){this.rankText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(24),text:""+e,origin:{x:.5,y:.5}}),this.rankText.setTint(7034229),this.add(this.rankText),Phaser.Display.Align.To.LeftCenter(this.rankText,this.avatar,18)},n.updateRankText=function(e){this.rankText.setText(""+e)},n.getShortName=function(e){return e.length<24?e:e.substring(0,21)+"..."},n.createPlayerInfo=function(){this.playerInfo=this.scene.add.container(),this.createUsername(),this.createScore(),this.add(this.playerInfo),Phaser.Display.Align.To.RightCenter(this.playerInfo,this.avatar,18,0)},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:jo.default.FONT_FAMILY,fontSize:"18px",fontStyle:"bold"}}),this.username.setTint(7034229),this.username.setHighQuality(),this.playerInfo.add(this.username),Phaser.Display.Align.In.LeftCenter(this.username,this.playerInfo,0,-10)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(){this.scoreText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:0,y:.5}}),this.scoreText instanceof Phaser.GameObjects.BitmapText&&this.scoreText.setLeftAlign(),this.scoreText.setTint(7034229),this.playerInfo.add(this.scoreText),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.playerInfo,0,10)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e)},n.createButton=function(){this.button=new hc.default(this.scene,Ip,xp.BUTTON_BATTLE,53.5,37),this.button.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.updateButton=function(){var e=this.payload.useChallenge;this.button.setActive(!!e).setVisible(!!e)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new cf({targets:[this],delay:e,duration:t,props:{y:{start:this.y+20,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new rf({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e,a=1/this.scene.world.getPixelRatio();this.setScale(1),this.rankText.setScale(1),this.scoreText.setScale(1),this.playerInfo.setScale(1),this.background.setScale(a),this.crown.setScale(a),this.avatar.setScale(1),this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),Pp=_p;function kp(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Lp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Rp=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=t;var a=n.scene.player;return n.currentPlayerId=a.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new wp(this.scene,{classType:Pp,listConfigs:[],width:320,height:420,padding:4,marginTop:40,marginBottom:10}),this.scene.renderer,Phaser.Renderer.WebGL.WebGLRenderer,this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(e){var t=Object.values(e)||[];if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,this.scene.lang.getText("leaderboard_is_empty"));for(var n,a=[],i=kp(t.sort((function(e,t){return+t.score-+e.score})));!(n=i()).done;){var r=n.value,s=r.playerId,o=r.photo,c=r.score,u=r.name,l=r.rank;if(s){var h=this.currentPlayerId===s,d={playerId:s,photo:o,name:u,rank:l,score:c,scoreRight:this.scene.tabId===or,useChallenge:!1,isHighlight:h};a.push(d)}}this.scroller.updateConfig(a),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(t.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,this.scene.lang.getText("leaderboard_is_empty"));for(var n=Math.min(t.length,7),a=0;a<n;a++){var i=t[a];i&&(i.setVisible(!0),i.runShowUpAnimation(a,300))}var r=300+100*n+250;this.scene.time.delayedCall(r,(function(){e.scene.isSwitchable=!0,e.scroller.setEnable(!0)}))},t}(Phaser.GameObjects.Container),Op=Rp,Dp=tr.default.DEFAULT,Mp=Dp.KEY,Bp=Dp.FRAME,Np=function(e){function t(t,n){var a;(a=e.call(this,t)||this).button=void 0,a.avatar=void 0,a.rankIcon=void 0,a.rankText=void 0,a.playerInfo=void 0,a.username=void 0,a.score=void 0,a.scoreText=void 0,a.background=void 0,a.crown=void 0,a.showPopUp=void 0,a.showItems=void 0,a.payload=void 0,a.handleChallengeFriend=function(){var e=a.payload.playerId;a.scene.storage.dispatch(Ro(e))},a.createBackground(),a.updateSize();var i=a.scene.player;return a.createAvatar(i.getPlayerId(),i.getPlayer().photo),a.createCrown(),a.createPlayerInfo(i.getPlayer().name,i.getPlayerData().score),a.createRank(),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.updateInfo=function(e,t){this.updateRank(e),this.updateScore(t),this.updateBackground(),this.updateAvatar(),this.updatePosition()},n.updatePosition=function(){if(this.payload){var e=this.payload.scoreRight,t=this.payload.useChallenge;this.button.setVisible(!!t),e?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)}},n.createBackground=function(){this.background=this.scene.make.image({key:Mp,frame:Bp.BG_RANK}),this.background.setWorldSize(320,56),this.add(this.background)},n.updateBackground=function(){if(this.payload){this.payload.isHighlight;var e="";e=Bp.BLANK,this.background.setFrame(e),this.background.setWorldSize(264,56)}},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(e,t){this.avatar=new Jo(this.scene,{key:Mp,background:Bp.BG_AVA,width:42.5,height:43}),this.avatar.loadPhoto(e,t),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-48)},n.updateAvatar=function(){if(this.payload){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)}},n.createCrown=function(){this.crown=this.scene.make.image({key:Mp,frame:Bp.ICON_CROWN}),this.crown.setWorldSize(23.5,19),this.add(this.crown),Phaser.Display.Align.To.TopCenter(this.crown,this.avatar,0,-6),this.crown.setVisible(!1)},n.updateCrown=function(e){1==e&&this.crown.setVisible(!0)},n.createRank=function(){this.createRankText(1)},n.updateRank=function(e){this.updateRankText(e),this.updateCrown(e)},n.createRankText=function(e){this.rankText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(24),text:""+e,origin:{x:.5,y:.5}}),this.rankText.setTint(7034229),this.add(this.rankText),Phaser.Display.Align.To.LeftCenter(this.rankText,this.avatar,18)},n.updateRankText=function(e){e>999?this.rankText.setText("???"):this.rankText.setText(""+e)},n.getShortName=function(e){return e.length<18?e:e.substring(0,15)+"..."},n.createPlayerInfo=function(e,t){this.playerInfo=this.scene.add.container(),this.createUsername(e),this.createScore(t),this.add(this.playerInfo),Phaser.Display.Align.To.RightCenter(this.playerInfo,this.avatar,18,0)},n.createUsername=function(e){this.username=this.scene.make.text({text:this.getShortName(e),style:{fontFamily:jo.default.FONT_FAMILY,fontSize:"18px",fontStyle:"bold"}}),this.username.setTint(7034229),this.username.setHighQuality(),this.playerInfo.add(this.username),Phaser.Display.Align.In.LeftCenter(this.username,this.playerInfo,0,-10)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e))},n.createScore=function(e){this.scoreText=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:""+e,origin:{x:0,y:.5}}),this.scoreText.setTint(7034229),this.playerInfo.add(this.scoreText),Phaser.Display.Align.In.LeftCenter(this.scoreText,this.playerInfo,0,10)},n.updateScore=function(e){this.scoreText.setText(""+e)},n.createButton=function(){this.button=new hc.default(this.scene,Mp,Bp.BLANK,54,34.5),this.button.setName("ChallengeFriend");var e=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(e,this.button,0,-2),this.button.add(e),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new cf({targets:[this],delay:e,duration:t,props:{y:{start:this.y+20,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new rf({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},t}(Phaser.GameObjects.Container),Up=Np,Gp=tr.default.DEFAULT,Fp=(Gp.KEY,Gp.FRAME,function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=void 0,n.myLeader=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=t,n.setSize(320,500),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.message.setTint(16777215),this.messageAnimation.play())},n.createLoading=function(){this.loading=new Qi.default(this.scene),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this)},n.createMessage=function(){this.message=Wh.default.addText(this.scene,{font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createContents=function(){this.createLeaders(),this.createMyLeader()},n.createLeaders=function(){this.leaders=new Op(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,-60)},n.createTabs=function(){},n.createMyLeader=function(){this.myLeader=new Up(this.scene),this.add(this.myLeader),Phaser.Display.Align.In.BottomCenter(this.myLeader,this,0,4),this.myLeader.setVisible(!1)},n.createAnimation=function(){this.messageAnimation=new gh({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container)),Kp=Fp,Yp=GameCore.Configs.LeadersBoard,Vp=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).board=void 0,t.footerBar=void 0,t.headerBar=void 0,t.tabId=void 0,t.offset=void 0,t.isRequesting=void 0,t.isSwitchable=void 0,t.backgroundImages=[],t.run=function(){t.isRequesting=!1;var e=[{selector:Gr,callback:function(){var e=(0,q.default)(J().mark((function e(n){var a,i,r,s,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isRequesting=n,t.board.showLoading(n),!1!==n){e.next=18;break}if(a=t.game.storage.getState(),i=Ur(a),t.board.leaders.updateData(i),r=t.scene.scene.player,s=r.getPlayer().playerId,o=Object.values(i).find((function(e){return e.playerId===s}))){e.next=13;break}return e.next=12,Ir(s);case 12:o=e.sent;case 13:if(!(Object.values(i).length<=1)){e.next=15;break}return e.abrupt("return");case 15:t.board.myLeader.setVisible(!0),t.board.myLeader.runShowUpAnimation(),o?t.board.myLeader.updateInfo(o.rank,o.score):t.board.myLeader.updateInfo(1e3,r.getBestScore());case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}];t.handleStateChange(e),t.selectWorldTab()},t.handleSelectFriendTab=function(){t.isRequesting||t.isSwitchable&&(t.isSwitchable=!1,t.selectFriendTab())},t.handleSelectWorldTab=function(){t.isRequesting||t.isSwitchable&&(t.isSwitchable=!1,t.selectWorldTab())},t.handlePlayWithFriend=function(){t.storage.dispatch(Oo())},t.handleShareLeaderboard=function(){t.storage.dispatch(As())},t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackgroundImages(),this.scene.bringToTop(),this.createBoard(),this.createFooterBar(),this.createHeaderBar()},n.createBackgroundImages=function(){for(var e=324,t=this.world.getWorldSize(),n=t.width,a=t.height,i=Math.ceil(a/e),r=Math.ceil(n/e),s=0;s<i;s++)for(var o=0;o<r;o++){var c=this.add.image(o*e,s*e,tr.default.DEFAULT.KEY,tr.default.DEFAULT.FRAME.BACKGROUND).setOrigin(0).setDepth(-1);c.setWorldSize(e,e),this.backgroundImages.push(c)}},n.selectFriendTab=function(){this.tabId=cr,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.myLeader.setVisible(!1),this.storage.dispatch(Mr(Yp.LeaderboardId,cr,Yp.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=or,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.myLeader.setVisible(!1),this.storage.dispatch(Mr(Yp.LeaderboardId,or,Yp.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=Yp.Limit,this.storage.dispatch(Mr(Yp.LeaderboardId,cr,Yp.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=Yp.Limit,this.storage.dispatch(Mr(Yp.LeaderboardId,or,Yp.Limit,this.offset)))},n.createBoard=function(){this.board=new Kp(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-50)},n.createFooterBar=function(){var e=this;this.footerBar=new mp(this);var t=this.scene.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-27-t),this.footerBar.playButton.onClick=function(){return e.scene.switch(Gi.SceneKeys.GAME_SCENE)}},n.createHeaderBar=function(){var e=this;this.headerBar=new bp(this),Phaser.Display.Align.In.TopCenter(this.headerBar,this.gameZone,0,-22.5),this.headerBar.backButton.onClick=function(){return e.scene.switch(Gi.SceneKeys.GAME_SCENE)}},t}(Ko.default);var zp,Hp,Wp=Vp,jp=GameCore.Configs.ApiNotificationHost,Xp=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt("players",t,{},jp,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qp=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="LoadResourceFail",a.message=t||"Load resource fail",a.payload=n,a}return(0,Z.default)(t,e),t}((0,de.default)(Error)),Zp=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],Qp=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zp);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jp=(0,Le.createSelector)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.tasks}],(function(e){return e})),$p=(0,Le.createSelector)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.process}],(function(e){return e})),eg=(0,Le.createSelector)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.isRequesting}],(function(e){return e})),tg=((0,Le.createSelector)([function(e){var t;return null==(t=e.dailyTasks)?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),ng=function(e){return function(t){t({type:Qa,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},a=n.startedTime,i=void 0===a?0:a,r=n.logTasks,s=void 0===r?{}:r;t((Date.now()-i)/1e3>tg.Duration?ag(e):ig(s))}},ag=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,a=e.require;n[t]={},Object.keys(a).forEach((function(e){var a;n[t]=((a={})[e]=0,a.rewarded=!1,a)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(ig(n)),gs.emit(Xr.EVENTS.TASKS_RESET)}},ig=function(e){return{type:Ja,payload:{process:e}}},rg=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},sg=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e){var t=e.type,a=e.value;if(!(a<1)&&(-1!==n.requireTypes.indexOf(t)&&!n.isPassRequiredTarget(t)&&n.processMore(e))){t=e.type,a=e.value;var i=n.getCorrectValue(t,a);n.game.storage.dispatch(function(e,t,n){return function(a){var i=rg();if(GameCore.Utils.Valid.isObject(i)){var r=i;GameCore.Utils.Object.hasOwn(r,e)&&(r[e].rewarded||(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r}),a({type:$a,payload:{id:e,type:t,value:n}})))}}}(n.id,t,i)),n.isTaskFinished(t)&&n.game.storage.dispatch(function(e){return function(t){t({type:ni,payload:{id:e}}),gs.emit(Xr.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=Jp(t)||[];if(!((null==n?void 0:n.length)<1)){var a=null==n?void 0:n.find((function(t){return t.id===e.id}));a&&(this.taskData=a,this.requireTypes=Object.keys(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=$p(t),a={value:0,target:0};if(!n)return a;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return a;var i=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(i)&&GameCore.Utils.Object.hasOwn(i,e)){var r=i[e];"number"===typeof r&&(a.value=r)}return a.target=this.taskData.require[e]||0,a},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),a=n.value,i=n.target,r=t;return a+t>i&&(r=i-a),Math.round(r)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),og=sg,cg=Xr.COLLECT_DIAMONDS,ug=cg.ID,lg=cg.EVENTS,hg=function(e){function t(t){return e.call(this,t,ug)||this}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){gs.off(lg.COLLECT_DIAMONDS,this.process),gs.on(lg.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(og),dg=hg,fg=Xr.INVITE_FRIENDS,pg=fg.ID,gg=fg.EVENTS,vg=function(e){function t(t){var n;return(n=e.call(this,t,pg)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){var e=this;gs.off(gg.INVITED_FRIEND,this.process),gs.on(gg.INVITED_FRIEND,this.process),gs.on(Xr.EVENTS.TASKS_RESET,(function(){e.resetData()}))},n.processMore=function(e){var t=e.opponentId;return!!t&&(-1===this.invitedFriends.indexOf(t)&&(this.invitedFriends.push(t),!0))},t}(og),mg=vg,yg=Xr.PASS_LEVELS,Eg=yg.ID,Sg=yg.EVENTS,Ag=function(e){function t(t){return e.call(this,t,Eg)||this}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){gs.off(Sg.PASS_LEVEL,this.process),gs.on(Sg.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(og),bg=Ag,Tg=Xr.REACH_SCORE,wg=Tg.ID,Cg=Tg.EVENTS,Ig=function(e){function t(t){var n;return(n=e.call(this,t,wg)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){gs.off(Cg.ADD_SCORE,this.process),gs.on(Cg.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(og),xg=Ig,_g=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),!eg(a)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Za,payload:{}}),e.next=7,Qp();case 7:i=e.sent,t(ng(i));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[Xr.PASS_LEVELS.ID]=new bg(this.game),this.eventsListener[Xr.REACH_SCORE.ID]=new xg(this.game),this.eventsListener[Xr.INVITE_FRIENDS.ID]=new mg(this.game),this.eventsListener[Xr.COLLECT_DIAMONDS.ID]=new dg(this.game)},e}(),Pg=_g,kg=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],Lg=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kg);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rg=(0,Le.createSelector)([function(e){var t;return null==(t=e.missions)?void 0:t.missions}],(function(e){return e})),Og=(0,Le.createSelector)([function(e){var t;return null==(t=e.missions)?void 0:t.isRequesting}],(function(e){return e})),Dg=((0,Le.createSelector)([Rg,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:za,payload:{missions:e}}}),Mg=tr.default.DEFAULT.FRAME,Bg=Mg.BLANK,Ng=Mg.BLANK,Ug=Mg.BLANK,Gg=Mg.BLANK,Fg=Mg.BLANK,Kg=Mg.BLANK,Yg=Mg.BLANK,Vg=Mg.BLANK,zg={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},Hg={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},Wg=zg.RED,jg=zg.BLUE,Xg=zg.PINK,qg=zg.GREEN,Zg=zg.YELLOW,Qg=Hg.FREEZE,Jg=Hg.COLORFUL,$g=Hg.COLOR_CHANGE,ev=((zp={})[Wg]="r",zp[jg]="b",zp[Xg]="p",zp[qg]="g",zp[Zg]="y",zp[Qg]="f",zp[Jg]="c",zp[$g]="m",zp),tv={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(Hp={},Hp[Wg]=Bg,Hp[jg]=Ng,Hp[Xg]=Ug,Hp[qg]=Gg,Hp[Zg]=Fg,Hp[Qg]=Kg,Hp[Jg]=Yg,Hp[$g]=Vg,Hp),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:zg,SPECIALS:Hg,HASH:ev},nv={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},av={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,O.default)({},tv.COLORS,tv.SPECIALS,{PAINT:nv.PAINT.ID,HAMMER:nv.HAMMER.ID,SHUFFLE:nv.SHUFFLE.ID})},iv=(0,Le.createSelector)([function(e){var t;return null==(t=e.missions)?void 0:t.mission}],(function(e){return e})),rv=((0,Le.createSelector)([iv],(function(e){return e?e.name:null})),function(){function e(e,t,n){var a=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,i=e.value;i<1||a.id===t&&a.isTypeRequired(n)&&a.processMore(e)&&(a.game.storage.dispatch(function(e,t,n){return{type:Wa,payload:{name:e,type:t,value:n}}}(a.name,n,i)),a.isMissionComplete()&&(gs.emit(av.EVENTS.MISSION_COMPLETED,{name:a.name,reward:a.reward}),a.game.storage.dispatch(function(e){return{type:ja,payload:{name:e}}}(a.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=iv(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=iv(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,a=!0;return Object.keys(t).forEach((function(e){if(a){var i=t[e];n[e]<i&&(a=!1)}})),a},e}()),sv=rv,ov=av.EVENTS,cv=av.TYPES,uv=function(e){function t(t,n){return e.call(this,t,cv.COLLECT_GEMS,n)||this}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){gs.off(ov.MISSION_UPDATE,this.process),gs.on(ov.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(sv),lv=uv,hv=av.EVENTS,dv=av.TYPES,fv=function(e){function t(t,n){return e.call(this,t,dv.COMBO,n)||this}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){gs.off(hv.MISSION_UPDATE,this.process),gs.on(hv.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(sv),pv=fv,gv=av.EVENTS,vv=av.TYPES,mv=function(e){function t(t,n){return e.call(this,t,vv.USE_ITEM,n)||this}(0,Z.default)(t,e);var n=t.prototype;return n.initEvents=function(){gs.off(gv.MISSION_UPDATE,this.process),gs.on(gv.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(sv),yv=mv,Ev=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),!Og(a)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Va,payload:{}}),e.next=7,Lg();case 7:i=e.sent,t(Dg(i));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=Rg(t);n&&Object.keys(n).forEach((function(t){switch(n[t].id){case av.TYPES.COLLECT_GEMS:e.listener[t]=new lv(e.game,t);break;case av.TYPES.COMBO:e.listener[t]=new pv(e.game,t);break;case av.TYPES.USE_ITEM:e.listener[t]=new yv(e.game,t)}}))},t.initEvents=function(){gs.off(av.EVENTS.MISSION_START,this.startListener),gs.on(av.EVENTS.MISSION_START,this.startListener)},e}(),Sv=Ev,Av=GameCore.Configs,bv=Av.AppId,Tv=Av.OtherHost,wv=Av.LeadersBoard,Cv=(function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:bv,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!wv.UseMock){e.next=5;break}return e.next=4,(0,Ze.sleepAsync)(1e3);case 4:return e.abrupt("return",(0,O.default)({},n,t,{_id:wv.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,rt("leaderboards",(0,O.default)({},n,t),{},Tv);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,q.default)(J().mark((function e(t,n){var a,i,r,s,o,c,u,l,h,d;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),a=[],!wv.UseMock){e.next=7;break}return e.next=5,(0,Ze.sleepAsync)(1e3);case 5:return r=(i=n).limit,s=void 0===r?10:r,o=i.offset,c=void 0===o?0:o,e.abrupt("return",new Array(s).fill(null).map((function(e,t){var n=(t+1)*(c+1);return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())}})));case 7:return u=GameCore.Utils.String.params(n),l="leaderboards/"+t+"/leaders",e.next=11,it(l+"?"+u,{},Tv);case 11:if((h=e.sent)&&(null==h||!h.error)){e.next=14;break}throw new Error((null==h?void 0:h.error)||"Leaderboard not found");case 14:if(!((d=(null==h?void 0:h.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",a);case 17:return a=d,e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,q.default)(J().mark((function e(t,n,a){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt("leaderboards/"+t+"/players/"+n,{score:a},{},Tv);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})))}(),function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",a.message=t||"The new score is not best",a.payload=n,a}(0,Z.default)(t,e)}((0,de.default)(Error)),GameCore.Configs.Tournament.UseLeaderboard,function(e){return{type:Oa,payload:{tournamentId:e}}}),Iv=(function(){var e=(0,q.default)(J().mark((function e(){var t,n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,a=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",a.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))}(),function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))}(),function(){return function(e,t){var n=window.game,a=n.player,i=n.analytics,r=n.globalScene;try{var s=t(),o=Oi(s),c=Di(s),u=a.getPlayer(),l=(o.entryPointData||{}).type;if(u.isUserNew&&i.event(Tn.AnalyticsEvents.NEW_USER),c===Li)return void e(_v());if(c===Pi){if(l===bi)return void e(Pv());if(l===wi)return void e(kv())}if(c===ki)return void e(Lv());if(u.isUserNew)return void e(Rv());r.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE)}catch(h){r.events.emit(Gi.SceneEvents.SWITCH,Gi.SceneKeys.GAME_SCENE)}}}),xv=function(e){try{var t=Oi(e),n=window.game.player,a=t.entryPointData||{},i=a.playerId,r=a.playerName,s=a.playerPhoto;return n.getPlayer().playerId===i?xi:new bt.default(i,r,s).toObject()}catch(o){return xi}},_v=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Cv(n))})).catch((function(e){})),e(Po())}catch(t){}}},Pv=function(){return function(e,t){try{var n=t(),a=Oi(n),i=window.game.player,r=i.getPlayer(),s=a.contextId,o=(a.entryPointData||{}).playerId,c=r.playerId===o,u=xv(n);c||i.updateConnectedPlayers([u]);var l=u.playerId;e(Oo(s,l,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},kv=function(){return function(e,t){try{var n=t(),a=Oi(n),i=window.game.player.getPlayer(),r=a.entryPointData||{},s=r.matchId,o=r.opponentId,c=r.playerId,u=i.playerId===c;e(Mo(s,u?o:c))}catch(l){throw new Error("processChallengeFriendMode: "+l)}}},Lv=function(){return function(e,t){try{var n=t(),a=Oi(n).entryPointData||{},i=a.playerId,r=a.playerScore;e(wo(i,{score:r,level:0}));var s=xv(n),o=(0,O.default)({},s,{score:r});e(Do(o))}catch(c){throw new Error("processMatchingGroupMode: "+c)}}},Rv=function(){return function(e){try{e(ko())}catch(t){throw new Error("processNewUserMode: "+t)}}},Ov=n(54),Dv={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},Mv=GameCore.Configs.AppId,Bv=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).loadLevelReadyPromise=void 0,t.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,t.player.requestConnectedPlayers(),setTimeout(t.subscribebot,500)},t.processAfterUpdatePlayerProfile=function(){t.updatePlayerProfileToNotificationService(),t.sendNotificationForNewUser()},t.startGame=function(){t.analytics.event(Tn.AnalyticsEvents.APP_READY),t.storage.dispatch((0,Ov.updateActiveSceneKey)(Gi.SceneKeys.LOAD_SCENE)),t.storage.dispatch(Iv())},t.subscribebot=function(){t.facebook.attemptToSubscribeBot()},t.handleLoadMusicCompleted=function(){t.audio.initMusic(Dv.BACKGROUND.KEY),t.audio.playMusic()},t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Tn.AnalyticsEvents.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new qp("Load resources at LoadScene failed.");(0,j.sendExceptionWithScope)(t,{file:null==e?void 0:e.url})})),this.loadFonts(),this.load.atlas({key:tr.default.DEFAULT.KEY,textureURL:tr.default.DEFAULT.TEXTURE,atlasURL:tr.default.DEFAULT.JSON}),this.loadLevelReadyPromise=this.loadLevelAsync()},n.loadFonts=function(){switch(this.scene.get(Gi.SceneKeys.GAME_SCENE).lang.getCurrentLanguage()){case"ar":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.AR_TEXTURE,jo.default.PRIMARY.AR_DATA);break;case"de":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.DE_TEXTURE,jo.default.PRIMARY.DE_DATA);break;case"es":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.ES_TEXTURE,jo.default.PRIMARY.ES_DATA);break;case"fr":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.FR_TEXTURE,jo.default.PRIMARY.FR_DATA);break;case"hi":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.HI_TEXTURE,jo.default.PRIMARY.HI_DATA);break;case"id":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.ID_TEXTURE,jo.default.PRIMARY.ID_DATA);break;case"it":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.IT_TEXTURE,jo.default.PRIMARY.IT_DATA);break;case"ja":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.JA_TEXTURE,jo.default.PRIMARY.JA_DATA);break;case"pt":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.PT_TEXTURE,jo.default.PRIMARY.PT_DATA);break;case"ru":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.RU_TEXTURE,jo.default.PRIMARY.RU_DATA);break;case"zh":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.ZH_TEXTURE,jo.default.PRIMARY.ZH_DATA);break;case"tr":this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.TR_TEXTURE,jo.default.PRIMARY.TR_DATA);break;default:this.load.bitmapFont(jo.default.PRIMARY.KEY,jo.default.PRIMARY.TEXTURE,jo.default.PRIMARY.DATA)}},n.create=function(){this.createAsync()},n.createAsync=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevelReadyPromise;case 2:this.player.updateData().then().catch(j.sendException),t=this.player.getLevel(),this.level.preloadLevelDataAsync(t+1),this.analytics.event(Tn.AnalyticsEvents.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.startGame();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,a=e.photo,i=e.locale,r=e.ASID;Xp({appId:Mv,playerId:t,name:n,photo:a,locale:i,ASID:r})},n.sendNotificationForNewUser=function(){if(this.player.getPlayerIsNew()){var e=this.player.getPlayerASID();e&&this.facebook.sendNotificationAsync({message:"Hi @["+e+"] your friends are waiting to play with you, play now!",delayTime:0})}},n.setupGlobalScene=function(){var e=this.scene.get(Gi.SceneKeys.GLOBAL_SCENE);e instanceof dp.default&&e.setup()},n.initModules=function(){new Sv(this.game),new Pg(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.loadSounds=function(){Phaser.Loader.Events.FILE_KEY_COMPLETE;for(var e=0,t=Object.keys(Tu.default);e<t.length;e++){var n=t[e],a=Tu.default[n];this.load.audio(a,[Dv.EFFECTS.PATH+a+".ogg",Dv.EFFECTS.PATH+a+".mp3"])}this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png"})},n.loadLevelPromises=function(){var e=(0,q.default)(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,t.push(new Promise((function(e){FBInstant.player.getDataAsync(["level","countItems","lives"]).then((function(t){var a=(null==t?void 0:t.level)||1,i={countItems:(null==t?void 0:t.countItems)||{undoCount:GameCore.Configs.Gameplay.UndoCount,hintCount:GameCore.Configs.Gameplay.HintCount,lastTimeUpdate:(new Date).getTime()},lives:(null==t?void 0:t.lives)||{lives:GameCore.Configs.Lives.livesCapacity,lastBonusLifeTime:Date.now()}};n.storage.dispatch(on(i)),n.storage.dispatch(cn(a)),e({})})).catch(j.sendException)}))),e.next=5,Promise.all(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),(0,j.sendException)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelAsync=function(){var e=(0,q.default)(J().mark((function e(t){var n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=3),e.prev=1,e.next=4,this.loadLevelPromises();case 4:return n=GameCore.Configs.Gameplay.ForceLevel,a=0===n?this.player.getLevel():n,this.level.setLevel(a),GameCore.Configs.Lives.enable&&this.lives.setLivesData(this.player.getLivesData()),e.next=10,this.level.preloadLevelDataAsync(a);case 10:e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(1),0!==t){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,this.loadLevelAsync(t-1);case 18:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),n.loadBitmapFontFromAtlas=function(e,t,n,a,i,r){var s=this,o=e+"_data";return this.load.xml(o,a),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){Phaser.GameObjects.BitmapText.ParseFromAtlas(s,e,t,n,o,i,r)})),this.load},n.handleShowAdWhenStartGame=function(){var e=this,t=this.time.now,n=Math.max(0-t,10);setTimeout((0,q.default)(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.audio.stopMusic(),e.audio.muteAll(),t.next=8,e.ads.preloadInterstitialAdAsync();case 8:return t.next=10,e.ads.showInterstitialAdAsync();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),(0,j.sendException)(t.t0);case 15:return t.prev=15,e.ads.preloadInterstitialAdAsync().catch((function(){})),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(15);case 20:case"end":return t.stop()}}),t,null,[[3,12,15,20]])}))),n)},t}(Phaser.Scene),Nv=Bv,Uv=tr.default.DEFAULT,Gv=Uv.KEY,Fv=Uv.FRAME,Kv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=t,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.showCrown=function(e){this.crown.setVisible(e),this.avatar.setFrame(Fv.BLANK),this.avatar.setBackground(Fv.BLANK)},n.setPlayerName=function(e){this.playerName.setText(e)},n.setPlayerScore=function(e){this.playerScore.setText(""+e)},n.loadPhoto=function(e,t){this.avatar.loadPhoto(e,t,60)},n.updateSize=function(){var e=this.avatar,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Jo(this.scene,{key:Gv,frame:Fv.BLANK,background:Fv.BLANK,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:Gv,frame:Fv.BLANK}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:jo.default.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:jo.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},t}(Phaser.GameObjects.Container),Yv=Kv,Vv=tr.default.DEFAULT,zv=Vv.KEY,Hv=Vv.FRAME,Wv=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=t,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createBoard=function(){this.board=new Fc(this.scene,0,0,600,340),this.board.setDepth(Ji.default.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.make.image({key:zv,frame:Hv.BLANK});t.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,t,0,-10),this.buttonClose=new hc.default(this.scene,zv,Hv.BLANK,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,t,0,-3),e.setDepth(Ji.default.TILE),e.add([t,this.titleText,this.buttonClose]),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-170)},n.createVSText=function(){var e=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});e.setTint(11632207),e.setDepth(Ji.default.TEXT),this.add(e),Phaser.Display.Align.In.Center(e,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new Yv(this.scene),this.playerScore.setDepth(Ji.default.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new Yv(this.scene),this.opponentScore.setDepth(Ji.default.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new uu.default(this.scene,{key:zv,button:Hv.BLANK,icon:Hv.BLANK,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(Ji.default.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new uu.default(this.scene,{key:zv,button:Hv.BLANK,icon:Hv.BLANK,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(Ji.default.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},t}(Phaser.GameObjects.Container),jv=Wv,Xv=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).main=void 0,t.run=function(){t.getResultInfo()},t.handleClose=function(){t.scene.sleep(Gi.SceneKeys.RESULT_MATCH_SCENE),t.scene.run(Gi.SceneKeys.GAME_OVER_SCENE)},t.handleShareScore=function(){t.storage.dispatch(ws())},t.handleRestartMatch=function(){t.storage.dispatch(Lo()),t.scene.sleep(Gi.SceneKeys.RESULT_MATCH_SCENE),t.scene.sleep(Gi.SceneKeys.GAME_OVER_SCENE)},t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var e=this.storage.getState(),t=cs(e),n=Ks(e),a=this.player.getPlayer(),i=a.photo,r=a.name,s=a.playerId,o=as(e),c=o.playerId,u=o.name,l=o.photo,h=(t[s]||{}).score,d=void 0===h?0:h,f=(t[c]||{}).score,p=void 0===f?0:f,g=rs(e,{playerId:s}),v=ss(e,{opponentId:c});n===ki&&(g=!0,v=!0);var m=g&&v;this.main.playerScore.loadPhoto(s,i),this.main.opponentScore.loadPhoto(c,l),this.main.playerScore.setPlayerName(r),this.main.opponentScore.setPlayerName(u),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(p),this.main.playerScore.showCrown(m&&d>p),this.main.opponentScore.showCrown(m&&p>d),g&&v?d===p?this.main.titleText.setText("Draw"):d>p?this.main.titleText.setText("You Win"):d<p&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent")},n.createMain=function(){this.main=new jv(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},t}(Ko.default);var qv,Zv=Xv,Qv=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).level=1,t.maxLevel=1,t.promisePreloadLevel={},t.loadedLevel={},t.stepLevel=100,t}(0,Z.default)(t,e);var n=t.prototype;return n.getLevel=function(){return this.level},n.getMaxLevel=function(){return this.maxLevel},n.setLevel=function(e){this.level=e,this.maxLevel=Math.max(this.level,e)},n.setMaxLevel=function(e){this.maxLevel=e},n.setLevelCustom=function(e){this.loadedLevel[this.getKeyLevel(this.level)]=e},n.nextLevel=function(){this.level+=1,this.preloadCurrentLevel()},n.preloadCurrentLevel=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadLevelDataAsync(this.level);case 2:return e.next=4,this.preloadLevelDataAsync(this.level+1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getKeyLevel=function(e){return"level_"+GameCore.Utils.Number.padStart(e,5)},n.getLevelPath=function(e){var t=Math.floor((e-1)/this.stepLevel);return"level_"+GameCore.Utils.Number.padStart(t*this.stepLevel+1,5)+"-"+this.stepLevel},n.preloadLevelDataAsync=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s,o,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=GameCore.Configs.Level,t=t||this.level,a=this.getKeyLevel(t),i=this.getLevelPath(t),!(r=this.loadedLevel[a])){e.next=7;break}return e.abrupt("return",r);case 7:return(!Object.keys(this.promisePreloadLevel).includes(i)||n.alwaysLoadNew)&&(this.promisePreloadLevel[i]=this.preloadLevelWithRetry(t,n.retryCount,n.retryDelay)),e.next=11,this.promisePreloadLevel[i];case 11:if(s=e.sent){e.next=17;break}return delete this.promisePreloadLevel[i],e.abrupt("return");case 17:for(o=1;o<=s.length;o++)c=Math.floor((t-1)/this.stepLevel)*this.stepLevel+o,s[o-1].level=c,this.loadedLevel[this.getKeyLevel(c)]=s[o-1];return e.abrupt("return",this.loadedLevel[a]);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.preloadLevelWithRetry=function(){var e=(0,q.default)(J().mark((function e(t,n,a){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=3),void 0===a&&(a=2e3),!(n<0)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.preloadLevel(t);case 6:if(i=e.sent){e.next=11;break}return e.next=10,(0,Ze.sleepAsync)(a);case 10:return e.abrupt("return",this.preloadLevelWithRetry(t,n-1));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}(),n.preloadLevel=function(){var e=(0,q.default)(J().mark((function e(t){var n,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.getCorrectLevel(t),a=this.getLevelPath(n),i=GameCore.Configs.Level.url,e.next=6,fetch(""+i+a+".json",{method:"GET"});case 6:return r=e.sent,e.next=9,r.json();case 9:return s=e.sent,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelDataAsync=function(){var e=(0,q.default)(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadLevelDataAsync(t||this.level);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.getLevelData=function(e){var t=this.getKeyLevel(e||this.level);return this.loadedLevel[t]},n.getCorrectLevel=function(e){var t=GameCore.Configs.Level.maxLevel;return e<=t?e:2e4+(e-t)%2e4},t}(Phaser.Plugins.BasePlugin),Jv=Qv,$v=tr.default.DEFAULT,em=$v.KEY,tm=$v.FRAME,nm=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).popup=void 0,t.closeButton=void 0,t.horizontalButtonsContainer=void 0,t.soundButton=void 0,t.soundBtnIcon=void 0,t.soundBtnDisableDash=void 0,t.musicButton=void 0,t.musicBtnIcon=void 0,t.musicBtnDisableDash=void 0,t.vibrateButton=void 0,t.vibrateBtnIcon=void 0,t.vibrateBtnDisableDash=void 0,t.verticalButtonsContainer=void 0,t.shareButton=void 0,t.mapButton=void 0,t.soundStatus=void 0,t.musicStatus=void 0,t.vibrateStatus=void 0,t.popupShowUpAnimation=void 0,t.popupExitAnimation=void 0,t.run=function(){var e=(0,er.default)(t).player.getPlayerSettings(),n=(e.music,e.sound),a=e.vibrate;t.updateSoundStatus(n),Cu()&&t.updateVibrateStatus(a),t.setDisabledButton(!1),t.runPopupShowUpAnimation()},t.handleCloseScene=function(){t.runPopupExitAnimation((function(){return t.scene.switch(Gi.SceneKeys.GAME_SCENE)}))},t.handleSetSound=function(e){t.player.setSetting("sound",e),t.updateSoundStatus(e)},t.handleSetVibrate=function(e){t.player.setSetting("vibrate",e),t.updateVibrateStatus(e)},t.handleShare=function(){t.storage.dispatch(ms())},t.handleOpenMap=function(){t.runPopupExitAnimation((function(){return t.scene.switch(Gi.SceneKeys.LEVEL_SCENE)}))},t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ii.default.BACKGROUND.KEY),this.createPopup(),this.createHorizontalButtons(),this.createVerticalButtons(),this.alignContainers(),this.createInputs()},n.createInputs=function(){var e=this;this.closeButton.onClick=this.handleCloseScene,this.soundButton.onClick=function(){return e.handleSetSound(e.soundStatus)},this.shareButton.onClick=this.handleShare,this.mapButton.onClick=this.handleOpenMap},n.createPopup=function(){this.popup=new Fc(this,0,0,276,300);var e=this.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.fontSize(32),text:"SETTINGS"});this.closeButton=new hc.default(this,em,tm.BUTTON_CLOSE,37.5,37.5),Phaser.Display.Align.To.TopCenter(e,this.popup,0,2),Phaser.Display.Align.To.TopRight(this.closeButton,this.popup,18,-24),this.popup.add([e,this.closeButton]),this.closeButton.setName("CloseButton")},n.createHorizontalButtons=function(){var e=this,t=tr.default.DEFAULT;t.KEY,t.FRAME;this.horizontalButtonsContainer=this.add.container(),this.soundButton=new hc.default(this,em,tm.SQUARE,50,50),this.soundButton.setName("SoundSettingButton"),this.soundBtnIcon=this.make.image({key:em,frame:tm.SQUARE}),this.soundBtnIcon.setWorldSize(37,37),this.soundBtnDisableDash=this.make.image({key:em,frame:tm.SQUARE}),this.soundBtnDisableDash.setWorldSize(29.5,29.5),this.soundBtnDisableDash.setVisible(!1),this.soundButton.add([this.soundBtnIcon,this.soundBtnDisableDash]);var n=this.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.fontSize(18),text:"Sound"});if(this.soundButton.add(n),Phaser.Display.Align.To.BottomCenter(n,this.soundButton),this.horizontalButtonsContainer.add(this.soundButton),this.musicBtnIcon=this.make.image({key:em,frame:tm.SQUARE}),this.musicBtnDisableDash=this.make.image({key:em,frame:tm.SQUARE}),Cu()){this.vibrateButton=new hc.default(this,em,tm.SQUARE,50,50),this.vibrateButton.setName("VibrateSettingButton"),this.vibrateButton.onClick=function(){return e.handleSetVibrate(e.vibrateStatus)},this.vibrateBtnIcon=this.make.image({key:em,frame:tm.SQUARE}),this.vibrateBtnIcon.setWorldSize(37,37),this.vibrateBtnDisableDash=this.make.image({key:em,frame:tm.SQUARE}),this.vibrateBtnDisableDash.setWorldSize(29.5,29.5),this.vibrateBtnDisableDash.setVisible(!1),this.vibrateButton.add([this.vibrateBtnIcon,this.vibrateBtnDisableDash]);var a=this.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.fontSize(18),text:"Vibrate"});this.vibrateButton.add(a),Phaser.Display.Align.To.BottomCenter(a,this.vibrateButton),this.horizontalButtonsContainer.add(this.vibrateButton),Phaser.Display.Align.In.Center(this.soundButton,this.horizontalButtonsContainer,-37.5,0),Phaser.Display.Align.In.Center(this.vibrateButton,this.horizontalButtonsContainer,37.5)}else Phaser.Display.Align.In.Center(this.soundButton,this.horizontalButtonsContainer,0,0);this.popup.add(this.horizontalButtonsContainer)},n.createVerticalButtons=function(){this.verticalButtonsContainer=this.add.container(),this.shareButton=new hc.default(this,em,tm.BUTTON_BLUE,175.5,47.5),this.shareButton.setName("ShareButton");var e=this.make.image({key:em,frame:tm.SQUARE});e.setWorldSize(37,37);var t=this.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.fontSize(18),text:"SHARE"});this.shareButton.add([e,t]),Phaser.Display.Align.In.Center(e,this.shareButton,-40,0),Phaser.Display.Align.In.Center(t,this.shareButton,10,0),this.mapButton=new hc.default(this,em,tm.BUTTON_GREEN,175.5,47.5),this.mapButton.setName("MapButton");var n=this.make.image({key:em,frame:tm.SQUARE});n.setWorldSize(37,37);var a=this.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.fontSize(18),text:"MAP"});this.mapButton.add([n,a]),Phaser.Display.Align.In.Center(n,this.mapButton,-40,0),Phaser.Display.Align.In.Center(a,this.mapButton,10,0),this.verticalButtonsContainer.add([this.shareButton,this.mapButton]),Phaser.Display.Align.In.Center(this.shareButton,this.verticalButtonsContainer,0,-25),Phaser.Display.Align.In.Center(this.mapButton,this.verticalButtonsContainer,0,35),this.popup.add(this.verticalButtonsContainer)},n.alignContainers=function(){Phaser.Display.Align.In.Center(this.horizontalButtonsContainer,this.popup,0,-68),Phaser.Display.Align.In.Center(this.verticalButtonsContainer,this.popup,0,60),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.updateSoundStatus=function(e){this.soundStatus=!e;var t=tr.default.DEFAULT;t.KEY,t.FRAME;e?this.soundBtnDisableDash.setVisible(!1):this.soundBtnDisableDash.setVisible(!0)},n.updateVibrateStatus=function(e){this.vibrateStatus=!e;var t=tr.default.DEFAULT;t.KEY,t.FRAME;e?this.vibrateBtnDisableDash.setVisible(!1):this.vibrateBtnDisableDash.setVisible(!0)},n.runPopupShowUpAnimation=function(){var e,t=this;null==(e=this.popupShowUpAnimation)||e.remove();var n=this.popup,a=n.x,i=n.y;this.popup.setAlpha(0).setPosition(a,i+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:i+70,to:i,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){t.popup.setAlpha(1).setPosition(a,i),t.setDisabledButton(!1)}})},n.runPopupExitAnimation=function(e){var t,n=this;this.setDisabledButton(!0),null==(t=this.popupExitAnimation)||t.remove();var a=this.popup,i=a.x,r=a.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:200,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.popup.setAlpha(0).setPosition(i,r),e&&e()}})},n.setDisabledButton=function(e){void 0===e&&(e=!0),this.closeButton.setDisabled(e),this.soundButton.setDisabled(e),this.shareButton.setDisabled(e),this.mapButton.setDisabled(e)},t}(Ko.default),am=nm;!function(e){e.PASSED="passed",e.READY="ready",e.WAITING="waiting"}(qv||(qv={}));var im=tr.default.DEFAULT,rm=im.KEY,sm=im.FRAME,om=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.levelBackground=void 0,a.tick=void 0,a.lock=void 0,a.overlay=void 0,a.levelNumber=void 0,a.level=void 0,a.tweenClick=void 0,a.payload=void 0,a.scene=t,a.init(),n&&a.updateInfo(n),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createText(),this.createImageCheck(),this.createLock(),this.updateSize(),this.alignLevelItem(),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.disableInteractive(),e.scene.audio.playSound(Tu.default.BUTTON_CLICK),e.tweenClick?e.tweenClick.play():e.scene.handlePlay()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:rm,frame:sm.BLANK}),this.levelBackground.setWorldSize(56,63.5),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageCheck=function(){this.tick=this.scene.make.image({key:rm,frame:sm.BLANK}),this.tick.setWorldSize(38,33),this.tick.setVisible(!1),this.add(this.tick)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.scene.fontSize(25),text:""+this.level,origin:{x:.2,y:.5}}),this.add(this.levelNumber)},n.createLock=function(){this.lock=this.scene.make.image({key:rm,frame:sm.BLANK}),this.lock.setWorldSize(17,24),this.add(this.lock)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case qv.PASSED:this.levelBackground.setFrame(sm.BLANK),this.tick.setVisible(!0),this.levelBackground.setTint(2236962),this.levelNumber.setTint(0),this.lock.setVisible(!1);break;case qv.READY:this.setInteractive({useHandCursor:!0}),this.createTweenClick(),this.levelBackground.setFrame(sm.BLANK),this.tick.setVisible(!1),this.levelBackground.setTint(16777215),this.levelNumber.setTint(16777215),this.lock.setVisible(!1);break;case qv.WAITING:this.levelBackground.setFrame(sm.BLANK),this.tick.setVisible(!1),this.levelBackground.setTint(16777215),this.levelNumber.setTint(16777215),this.lock.setVisible(!0)}},n.updateInfo=function(e){this.payload=(0,O.default)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:.9*t},onComplete:function(){e.scene.handlePlay()}})},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){var e=""+this.payload.level;this.levelNumber.setText(e),e.length>=4?this.levelNumber.setFontSize(this.scene.fontSize(22)):this.levelNumber.setFontSize(this.scene.fontSize(26)),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.lock,this.levelBackground,21,28),Phaser.Display.Align.In.Center(this.tick,this.levelBackground),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e},t}(Phaser.GameObjects.Container),cm=tr.default.DEFAULT,um=cm.KEY,lm=cm.FRAME,hm=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).scene=void 0,a.background=void 0,a.levelItem1=void 0,a.levelItem2=void 0,a.levelItem3=void 0,a.levelItem4=void 0,a.payload=void 0,a.scene=t,a.init(),n&&a.updateInfo(n),a.scene.add.existing((0,er.default)(a)),a}(0,Z.default)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:um,frame:lm.BLANK}),this.background.setWorldSize(325,85),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,O.default)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new om(this.scene,{level:1,status:qv.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-105,0),this.levelItem2=new om(this.scene,{level:2,status:qv.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-35,0),this.levelItem3=new om(this.scene,{level:3,status:qv.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,35,0),this.levelItem4=new om(this.scene,{level:4,status:qv.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,105,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),dm=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scroller=void 0,n.scene=t,n.createReuseScroller(),n.scene.add.existing((0,er.default)(n)),n}(0,Z.default)(t,e);var n=t.prototype;return n.createReuseScroller=function(){this.scroller=new wp(this.scene,{classType:hm,listConfigs:[],width:300,height:340,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5}),this.scroller.setVisible(!1),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(){var e=this.scene.player.getLevel();0===e&&(e=1);for(var t=[],n={levelItem1:{status:"",level:0}},a={levelItem1:{status:"",level:0}},i=1;i<=GameCore.Configs.Level.maxLevel;i++){var r="";r=i>e?qv.WAITING:i<e?qv.PASSED:qv.READY;var s="";switch(i%4){case 1:s="levelItem1";break;case 2:s="levelItem2";break;case 3:s="levelItem3";break;case 0:s="levelItem4"}n[s]={level:i,status:r},a[s]={level:i,status:r},i%4===0&&(t.push((0,O.default)({},n)),a={levelItem1:{status:"",level:0}})}GameCore.Configs.Level.maxLevel%4>0&&t.push((0,O.default)({},a)),this.scroller.updateConfig(t);var o=this.scroller.getChildren()[0].height;(this.scroller.value=-o*this.showDefaultLevel(e),e>GameCore.Configs.Level.maxLevel)&&this.scene.game.globalScene.screen.open($i.ScreenKeys.NOTIFY_SCREEN,{message:"UPDATING NEW LEVELS...",duration:3e3});this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.ceil(e/4),n=Math.ceil(GameCore.Configs.Level.maxLevel/4);return n-t<3?n-4>0?n-4:0:t<3?0:t-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.resetScroller=function(){this.scroller.destroy(),this.createReuseScroller()},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var a=e[n];if(!a)return;a.setVisible(!0)}this.scroller.setEnable(!0)}},t}(Phaser.GameObjects.Container),fm=dm,pm=tr.default.DEFAULT,gm=pm.KEY,vm=pm.FRAME,mm=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).popup=void 0,t.mainScreen=void 0,t.closeButton=void 0,t.popupShowUpAnimation=void 0,t.popupExitAnimation=void 0,t.run=function(){t.mainScreen.updateData(),t.setDisabledButton(!1),t.runOpenAnimation()},t.handleCloseBtnClick=function(){var e=t.player.getLevel();t.level.setLevel(e),t.runCloseAnimation(),t.setDisabledButton(!0)},t.handlePlaySingle=function(){t.storage.dispatch(ko())},t.runCloseAnimation=function(){t.runPopupExitAnimation((function(){t.storage.dispatch(ko())}))},t}(0,Z.default)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this),this.createBackground(Ii.default.BACKGROUND.KEY),this.createPopup(),this.createLevelScroller(),this.createCloseButton(),this.popup.add([this.mainScreen,this.closeButton]),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.createPopup=function(){this.popup=new Fc(this,0,0,328,417);var e=this.make.bitmapText({font:jo.default.PRIMARY.KEY,size:this.fontSize(32),text:"MAP"});Phaser.Display.Align.To.TopCenter(e,this.popup,0,2),this.popup.add(e)},n.createLevelScroller=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.mainScreen=new fm(this),this.mainScreen.setPosition(t/2,n/2),this.mainScreen.updateData(),this.mainScreen.scroller.setVisible(!0),Phaser.Display.Align.In.Center(this.mainScreen,this.popup,0,3)},n.createCloseButton=function(){this.closeButton=new hc.default(this,gm,vm.BUTTON_CLOSE,37.5,37.5),this.closeButton.setName("closeButton"),this.closeButton.onClick=this.handleCloseBtnClick,Phaser.Display.Align.To.TopRight(this.closeButton,this.popup,18,-24)},n.runPopupEntrancesAnimation=function(e,t){var n,a=this;null==(n=this.popupShowUpAnimation)||n.remove();var i=this.popup,r=i.x,s=i.y;this.popup.setAlpha(0).setPosition(r,s+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:s+70,to:s,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){a.popup.setAlpha(1).setPosition(r,s),a.setDisabledButton(!1)}})},n.runPopupExitAnimation=function(e){var t,n=this;null==(t=this.popupExitAnimation)||t.remove();var a=this.popup,i=a.x,r=a.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:200,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.popup.setAlpha(0).setPosition(i,r),e&&e()}})},n.runOpenAnimation=function(){this.runPopupEntrancesAnimation(0,300)},n.handlePlay=function(){var e=(0,q.default)(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.runCloseAnimation();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setDisabledButton=function(e){void 0===e&&(e=!0),this.closeButton.setDisabled(e)},t}(Ko.default);var ym=mm,Em=GameCore.Configs.Lives,Sm=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).lives=0,t.lastBonusLifeTime=0,t.countDownStartAt=0,t.remainingTimeout=void 0,t.countdownTimer=void 0,t}(0,Z.default)(t,e);var n=t.prototype;return n.resetLives=function(){this.lives=Em.livesCapacity,this.lastBonusLifeTime=(new Date).getTime(),this.countDownStartAt=0},n.getLives=function(){return this.lives},n.getLastBonusLifeTime=function(){return this.lastBonusLifeTime},n.getCountDownStartAt=function(){return this.countDownStartAt},n.updateLives=function(e,t){void 0!==e&&(this.lives=e),void 0!==t&&(this.lastBonusLifeTime=t),this.game.player.updatePlayerLives(e,t)},n.increaseLife=function(e){void 0===e&&(e=!1);var t=Em.bonusLife+this.lives;t>Em.livesCapacity&&(this.clear(),t=Em.livesCapacity),e?this.updateLives(t):this.updateLives(t,(new Date).getTime())},n.decreaseLife=function(){var e=this.lives,t=e-Em.bonusLife;t>Em.livesCapacity&&(t=Em.livesCapacity),t<0&&(t=0),e>=Em.livesCapacity?(this.updateLives(t,(new Date).getTime()),this.clear(),this.startCountDownTimerBonusLife()):this.updateLives(t)},n.bonusLife=function(){var e=this.lives||0,t=this.lastBonusLifeTime;if(t){var n=(new Date).getTime(),a=Math.floor((n-t)/1e3/(60*Em.bonusDurationMins)),i=a+e;i>Em.livesCapacity&&(i=Em.livesCapacity),t=i===e?t:(new Date).getTime(),this.updateLives(i,t)}else this.updateLives(e,(new Date).getTime())},n.refillLives=function(){this.updateLives(Em.livesCapacity,(new Date).getTime())},n.setLivesData=function(e){e?(this.lives=e.lives||0,this.lastBonusLifeTime=e.lastBonusLifeTime||0,this.startCountDownTimerBonusLife(),this.bonusLife()):this.resetLives()},n.startCountDownTimerBonusLife=function(){var e=60*Em.bonusDurationMins*1e3,t=(new Date).getTime();t-this.lastBonusLifeTime<e?this.handleRemainingTime(e-(t-this.lastBonusLifeTime)):this.handleCountDownTimerBonusLife()},n.handleRemainingTime=function(e){var t=this;this.remainingTimeout=setTimeout((function(){t.increaseLife(),t.handleCountDownBonusLife(),t.handleCountDownTimerBonusLife()}),e)},n.handleCountDownTimerBonusLife=function(){var e=this,t=60*Em.bonusDurationMins*1e3;this.countdownTimer=setInterval((function(){e.increaseLife(),e.handleCountDownBonusLife()}),t)},n.handleCountDownBonusLife=function(){this.countDownStartAt=(new Date).getTime()},n.clear=function(){this.countdownTimer&&clearInterval(this.countdownTimer),this.remainingTimeout&&clearTimeout(this.remainingTimeout)},t}(Phaser.Plugins.BasePlugin),Am=Sm,bm=n(56),Tm=["Enable"],wm=function(e){function t(t){return e.call(this,t)||this}(0,Z.default)(t,e);var a=t.prototype;return a.boot=function(){var t=(0,q.default)(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addRollbarPlugin();case 6:return t.next=8,this.addDevPlugins();case 8:return t.next=10,this.initAdsAsync();case 10:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.start=function(){e.prototype.start.call(this)},a.addExtraGameObjectMethods=function(){var e=new re(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality()},a.addExtraFBInstantFunctions=function(){var e=new $.default(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new ae(this)},a.addPlugins=function(){this.plugins.install("Storage",hi,!0,"storage"),this.plugins.install("Rollbar",Sn.default,!0,"rollbar"),this.plugins.install("AdsManager",ve,!0,"ads"),this.plugins.install("AuthManager",Be,!0,"auth"),this.plugins.install("AudioManager",Ie,!0,"audio"),this.plugins.install("WorldManager",Ei,!0,"world"),this.plugins.install("PlayerManager",hn,!0,"player"),this.plugins.install("LanguageManager",Vi,!0,"lang"),this.plugins.install("ProfileManager",En,!0,"profile"),this.plugins.install("AnalyticsManager",Se,!0,"analytics"),this.plugins.install("AdaptivePerformance",ze,!0,"performance"),this.plugins.install("LevelManager",Jv,!0,"level"),this.plugins.install("LivesManager",Am,!0,"lives"),this.plugins.installScenePlugin("textStyler",mi,"textStyler"),this.plugins.installScenePlugin("ScreenManager",_n,"screen"),this.plugins.installScenePlugin("FrameCapture",Ge,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.level=this.plugins.get("LevelManager"),this.lives=this.plugins.get("LivesManager")},a.addRollbarPlugin=function(){var e=(0,q.default)(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Configs.Rollbar.Enable){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.resolve().then(n.bind(n,47));case 5:t=e.sent.default,this.plugins.install("Rollbar",t,!0,"rollbar"),this.rollbar=this.plugins.get("Rollbar");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.addDevPlugins=function(){var e=(0,q.default)(J().mark((function e(){var t,a,i,r,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(716)]).then(n.bind(n,69));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(227)]).then(n.bind(n,70));case 7:return a=e.sent.default,e.next=10,n.e(315).then(n.bind(n,71));case 10:return i=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(883)]).then(n.bind(n,72));case 13:return r=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(516)]).then(n.bind(n,73));case 16:s=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",a,!0,"debugger"),this.plugins.install("Statistics",i,!0,"statistics"),this.plugins.install("Profiler",r,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.addScenes=function(){this.scene.add(Gi.SceneKeys.BOOT_SCENE,Zi,!0),this.scene.add(Gi.SceneKeys.LOAD_SCENE,Nv,!1),this.scene.add(Gi.SceneKeys.GAME_SCENE,hp,!1),this.scene.add(Gi.SceneKeys.GAME_OVER_SCENE,bu,!1),this.scene.add(Gi.SceneKeys.LEADERBOARD_SCENE,Wp,!1),this.scene.add(Gi.SceneKeys.RESULT_MATCH_SCENE,Zv,!1),this.scene.add(Gi.SceneKeys.PAUSE_SCENE,am,!1),this.scene.add(Gi.SceneKeys.LEVEL_SCENE,ym,!1),this.scene.add(Gi.SceneKeys.GLOBAL_SCENE,dp.default,!1)},a.addDevScenes=function(){var e=(0,q.default)(J().mark((function e(){var t,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(817).then(n.bind(n,74));case 4:return t=e.sent.default,e.next=7,n.e(826).then(n.bind(n,75));case 7:a=e.sent.default,this.scene.add(Gi.SceneKeys.TEST_SCENE,t,!1),this.scene.add(Gi.SceneKeys.ANIMATIONS_SCENE,a,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.initAdsAsync=function(){var e=(0,q.default)(J().mark((function e(){var t,a,i,r,s,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,bm.default.setGame(this),a=bm.default,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(658).then(n.bind(n,76));case 6:i=e.sent.default,a=i;case 8:r=(0,O.default)({},t.InterstitialAdOptions),s=GameSDK.getPlatform(),o=GameSDK.getLocale(),"WEB"===s&&"ru"===o&&(r.secondsFirstTime=60,r.secondsBetweenAds=60),r.showWhenStartGame&&(r.secondsFirstTime=0),this.ads.configure(a,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:r,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.initWorld=function(){var e=GameCore.Configs.Game;this.world.configure({width:375,height:667,ratio:320/518}),this.world.resize(e.ForcePixelRatio)},a.initStorage=function(){var e=new Ui(this);this.storage.setInitiator(e)},a.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!0,reverseText:!1})},a.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},a.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},a.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},a.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},a.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},a.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},a.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,X.default)(e,Tm);if(t){var a=this.world.getPixelRatio();this.performance.configure((0,O.default)({pixelRatio:a},n)),this.performance.active()}},a.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},a.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,document.addEventListener("visibilitychange",(function(){if(document.hidden)return e.audio.pauseMusic(),void e.audio.stopAllSound();e.audio.playMusic()}))},a.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),Cm=wm,Im=GameCore.Configs.Debugger.ShowInspector,xm={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},audio:{noAudio:!1,disableWebAudio:!1},input:{gamepad:!1,keyboard:Im,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]},fps:{smoothStep:!1}};(0,j.initSentry)();var _m=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(_m),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new Cm(xm);window.game=e}catch(t){(0,j.sendException)(t)}}())}),50)},,,function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var a=atob(this.toDataURL(t,n).split(",")[1]),i=a.length,r=i>>2,s=new Uint8Array(i),o=new Uint32Array(s.buffer,0,r),c=0,u=0;c<r;c++)o[c]=a.charCodeAt(u++)|a.charCodeAt(u++)<<8|a.charCodeAt(u++)<<16|a.charCodeAt(u++)<<24;for(var l=3&i;l--;)s[u]=a.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})}],function(e){var t=function(t){return e(e.s=t)};e.O(0,[216],(function(){return t(81),t(80),t(68),t(65)}));e.O()}]);