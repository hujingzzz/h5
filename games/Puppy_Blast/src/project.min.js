var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};
__require=function t(e,i,n){function o(s,c){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'");}}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return o(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({AccessUD:[function(t,e,i){cc._RF.push(e,"a6a8fdyzTBDcafozI9dU/VF","AccessUD");var n=t("n7"),o=t("SdkIns"),a=function(){};e.exports=a,a.fielsv2={nkname:{def:"MXU"},sex:a._INT_={def:0,i:1},icon:a._INT_,task:a._STR_={def:""},lev:a._INT_,bag:a._STR_,gold:a._INT_,heart:a._INT_,heart_tm:a._INT_,star:a._INT_,music:{def:1,i:1},sound:{def:1,i:1},items:a._STR_,build:a._STR_,sign:a._STR_,order:a._STR_,ad:a._STR_,share:a._STR_,workdata:a._STR_,silver:a._INT_},a.JReadv2=function(t){var e=a.fielsv2,i={};if(null==cc.sys.localStorage.getItem("lev"+t))return{};for(var o in e.createtm=1,e)i[o]=cc.sys.localStorage.getItem(o+t);return n.log("AccessUD.JReadv2:"+JSON.stringify(i)),i},a.JRead=function(e){if(!o.instance().read(e,a.fielsv2)){var i=a.pid(),n=a.JReadv2(i);t("UserDataV2").init(n,i,"n7-lc"),e&&e(n)}},a.JSave=function(t,e){if(!o.instance().save(t))for(var i in e||(e=a.pid()),n.log("AccessUD.JSave:"+JSON.stringify(t)),t)cc.sys.localStorage.setItem(i+e,t[i])},a._UD_KEY_="DDFARM",a.pid=function(){if(!a._pid_){var e=a._UD_KEY_+"_PID",i=cc.sys.localStorage.getItem(e);i||(i=t("StringUtils").uuid(10,16),cc.sys.localStorage.setItem(e,i)),a._pid_=i}return a._pid_},a._JRead_=function(t,e){var i=[];for(var n in t)i.push(cc.sys.localStorage.getItem(t[n]+e));return 1==i.length?i[0]:i},a.update=function(t,e){for(var i in e)cc.sys.localStorage.setItem(i+t,e[i])},cc._RF.pop()},{SdkIns:"SdkIns",StringUtils:"StringUtils",UserDataV2:"UserDataV2",n7:"n7"}],AdsManager:[function(t,e,i){cc._RF.push(e,"f8c79XcHsJH4q6XgO6kqGnY","AdsManager"),window.AdsManager=window.AdsManager||{},Object.defineProperty(i,"__esModule",{value:!0});var n,o,a=cc._decorator,s=a.ccclass;a.property,function(t){t[t.none=0]="none",t[t.loading=1]="loading",t[t.load_comlepte=2]="load_comlepte",t[t.load_error=3]="load_error"}(n||(n={})),function(t){t[t.none=0]="none",t[t.loading=1]="loading",t[t.load_comlepte=2]="load_comlepte",t[t.load_error=3]="load_error"}(o||(o={}));var c=window.AdsManager=function(){function t(){}var e;return e=t,t.getRewardedPlacementId=function(){return e.REWARDED_PLACEMENT_ID_NORMAL},t.createRewardedAd=function(){},t.startPreLoad=function(){setInterval(this.checkHasAd.bind(this),3E4),this.checkHasAd()},t.checkHasAd=function(){e.loadingRewardedVideoState!==n.load_comlepte&&e.loadingRewardedVideoState!==n.loading&&this.loadRewardedVideo()},t.loadRewardedVideo=function(){cc.log("start loadRewardedVideo: "+e.getRewardedPlacementId()),e.loadingRewardedVideoState!==n.load_comlepte&&e.loadingRewardedVideoState!==n.loading&&"undefined"!=typeof gdsdk&&"undefined"!==gdsdk.preloadAd&&(e.loadingRewardedVideoState=n.loading,gdsdk.preloadAd("rewarded").then(function(t){cc.log("loadRewardedVideo video preloaded."),e.loadingRewardedVideoState=n.load_comlepte})["catch"](function(t){e.loadingRewardedVideoState=n.load_error,cc.log("loadRewardedVideo video failed to preload:"+t.message)}))},t.showRewardedVideo=function(t,i){if("undefined"!=typeof gdsdk&&"undefined"!==gdsdk.preloadAd){if(e.loadingRewardedVideoState!==n.load_comlepte)return cc.log("showRewardedVideo: not load.. try loading ... "),i&&i(),void e.loadRewardedVideo();gdsdk.showAd("rewarded").then(function(){cc.log("showRewardedVideo ok."),t&&t(),window.LastShowAdsTime=cc.sys.now()/1E3,e.loadingRewardedVideoState=n.none,e.preloadedRewardedVideo=null})["catch"](function(t){cc.log("showRewardedVideo error : "+t.message),i&&i()})}else i&&i()},t.isCompleteVideoLoad=function(){return e.loadingRewardedVideoState===n.load_comlepte},t.REWARDED_PLACEMENT_ID_TEST="357043241791815_357153011780838",t.REWARDED_PLACEMENT_ID_NORMAL="442357326571825_443112246496333",t.preloadedRewardedVideo=null,t.loadingRewardedVideoState=n.none,t.INTERSTITIAL_PLACEMENT_ID_TEST="357043241791815_357152638447542",t.INTERSTITIAL_PLACEMENT_ID_NORMAL="442357326571825_443112076496350",t.preloadedInterstitial=null,t.loadingInterstitialState=o.none,t=e=__decorate([s],t)}();i["default"]=c,cc._RF.pop()},{}],AchieveLogic:[function(t,e,i){cc._RF.push(e,"5fc1fmqaD9CZ4I1fxt+HHkf","AchieveLogic");var n=t("UserDataV2"),o=(t("StringBuilder"),t("GameEvent")),a=t("JsonMetaCache"),s=t("GameTools"),c=t("n7"),r=function e(){this.achieves={},this.achievesSorted=[],this.finishNum=[],this.__init=function(t){t||(t=e._VER_),t[0]==e._EXVER1_&&(t=e._VER_);for(var i={},n=void 0,o=(t=t.substring(1)).split(e._SP1_),s=0;s<o.length;s++){var r=o[s].split(e._SP3_);if(null!=r[0]&&""!=r[0]){var l=this.getResults(r[0]),h=l[0],u=0|l[1],d=0|r[1],f=a.getAllAchieve()[u];if(null==f)continue;i[n=f.type]={type:n,id:u,count:d,status:h},i[n].sortValue=f.sortValue}}var g=a.getAllTypeAchieve();for(n in g)null==i[n]&&(i[n]={type:n,id:g[n][0].id,count:0,status:e.STATUS_PROCESS},i[n].sortValue=g[n][0].sortValue),this.achieves[n]=i[n],this.achievesSorted.push(i[n]),this.addFinishNum(i[n],!1);this.achievesSorted.sort(function(t,e){return t.sortValue-e.sortValue}),c.isDebug&&c.log(e.field+".__init:"+JSON.stringify(this.achieves))},this.toString=function(){var t="";for(var i in this.achieves){var n=this.achieves[i];n.count<=0||(t+=n.status+n.id+e._SP3_,t+=n.count,t+=e._SP1_)}return e._VER_+t},this.updateAchieve=function(t,i,o){var s=this.achieves[t];if(null==s)return-1;if(s.status!=e.STATUS_END){var r=s.id,l=a.getAllAchieve()[r];if(!l)return-1;var h=e.getCaculateFunc(l.chgType);s.count=o?i:h&&h(s.count,i),s.status=s.count>=l.tar?e.STATUS_FINISH:e.STATUS_PROCESS,this.addFinishNum(s)}return n.nsave(e.field),c.isDebug&&c.log(e.field+".updateAchieve.type: "+t+",num: "+i+","+JSON.stringify(s)),i},this.getAward=function(e,i){i?t("ShareLogic").checkShare(10,null,function(i){var n=!1;i&&i.dt&&0==i.dt.code&&(n=!0),(n||t("GuideLogic").hasNextGuide())&&this._getAward(e,n)},this):this._getAward(e,!1)},this._getAward=function(i,r){var l=1,h=a.getAllAchieve()[i].type,u=this.achieves[h];if(null==u)return-1;var d=u.id;if(u.status==e.STATUS_FINISH){var f=a.getAllAchieve()[d];if(f){var g=s.doubleAward(f.award,r?2:1);t("GuideLogic").hasNextGuide()||(g.from="dialog_achieve",g.btnc=!0),t("UserLogic").award(g,"ACHIEVE"),o.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:g,owner:"dialog_achieve"}),this.delFinishNum(u);var p=this.getTypeNextId(h,d);if(-1==p)u.status=e.STATUS_END;else{u.id=p;var _=a.getAllAchieve()[p];u.status=u.count>=_.tar?e.STATUS_FINISH:e.STATUS_PROCESS,this.addFinishNum(u)}n.nsave(e.field)}l=0}return c.isDebug&&c.log(e.field+".getAward.achieveId: "+i+","+JSON.stringify(u)),l},this.isFinish=function(t){var i=a.getAllAchieve()[t].type,n=this.achieves[i];if(null==n)return!1;var o=n.status;return n.id==t&&o==e.STATUS_FINISH},this.getResults=function(t){return[t[0],t.slice(1)]},this.getTypeNextId=function(t,e){var i=0,n=a.getAchieveByType(t);for(i=0;i<n.length&&n[i].id!=e;i++);return n[i+1]?n[i+1].id:-1},this.getAllAchieve=function(){return this.achieves},this.getAllAchieveSorted=function(){return this.achievesSorted},this.addFinishNum=function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.status==e.STATUS_FINISH&&(-1==this.finishNum.indexOf(t.id)&&(this.finishNum.push(t.id),i&&o.EVENT_ACHIEVE_FINISH(this.finishNum.length)),c.isDebug&&c.log(e.field+".addFinishNum:"+JSON.stringify(this.finishNum)))},this.delFinishNum=function(t){var i=this.finishNum.indexOf(t.id);-1!=i&&(this.finishNum.splice(i,1),o.EVENT_ACHIEVE_FINISH(this.finishNum.length)),c.isDebug&&c.log(e.field+".delFinishNum:"+JSON.stringify(this.finishNum))}};e.exports=r,r.field="build",r.STATUS_PROCESS="a",r.STATUS_FINISH="b",r.STATUS_END="c",r._EXVER1_="A",r._VER_="B",r._SP1_="|",r._SP2_="\x3d",r._SP3_=":",r.CACULATEFUNC={},r.getCaculateFunc=function(t){if(!r.CACULATEFUNC[t])switch(t){case 1:r.CACULATEFUNC[t]=function(t,e){return t+e};break;case 2:r.CACULATEFUNC[t]=function(t,e){return e}}return r.CACULATEFUNC[t]},r.init=function(t){var e=n._set_(r.field,new r);c.isDebug&&c.log(r.field+".init:"+t),e.__init(t)},r.getAllAchieve=function(){return n.get(r.field).getAllAchieve()},r.getAllAchieveSorted=function(){return n.get(r.field).getAllAchieveSorted()},r.updateAchieve=function(t,e,i){return n.get(r.field).updateAchieve(t,e,i)},r.getAward=function(t,e){return n.get(r.field).getAward(t,e)},r.isFinish=function(t){return n.get(r.field).isFinish(t)},r.canReceiveAchieve=function(){return n.get(r.field).finishNum.length},r.addFinishNum=function(t){n.get(r.field).addFinishNum(t)},r.delFinishNum=function(t){n.get(r.field).delFinishNum(t)},r.resetDataFromSdk=function(){var e=t("SdkIns").instance().getSdkData("achieve"),i=a.getAllAchieve();for(var n in i)e&&e[n]&&(s.copys(i[n],e[n]),i[n].award=s.strToArr(i[n].award))},cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",SdkIns:"SdkIns",ShareLogic:"ShareLogic",StringBuilder:"StringBuilder",UserDataV2:"UserDataV2",UserLogic:"UserLogic",n7:"n7"}],ActionCommand:[function(t,e,i){cc._RF.push(e,"1f74fa2wptAWYjRGLdGp1oX","ActionCommand");var n=t("n7"),o=t("GameCommon"),a=t("GameTools"),s=function t(e){this.uuid=t.UUID(),this.data=e,this.cmds=this.data.cmds,this.cmdCount=0,this.groups=[];var i=[],s={},c=0,r=this.cmds.length-1,l=r,h=0,u=-1;for(var d in this.cmds){var f=this.cmds[d],g=f.datas;if(f.idx=t.ComUUID(),!f.pass)if(f.cmd!=o.com_down){if(f.cmd==o.com_chglist&&(u=c),i[c++]=f,f.cmd==o.com_destroy){if(!g.tar)continue;var p=g.grid,_=s[p.x];_||(s[p.x]=_=[]),_[p.y]=f}}else h++,f.y=f.datas.grid.y,i[l--]=f}if(u>=0&&r>1&&(a.swap(i,u,l),a.swap(i,r,l),l--,r--),h)for(var m=r,v=m-1,E=void 0,y=void 0,b=l+1;b<=v;b++)for(var I=b+1;I<=m;I++)E=i[b],y=i[I],E.datas.grid.y>y.datas.grid.y&&a.swap(i,b,I);for(var T in s)for(var C=s[T],S=null,A=C.length-1;A>=0;A--){var N=C[A];N&&N.datas.tar?(S||(S={y:0}),S.y++,S.id=N.meta.id,N.goaldown=S):S=null}this.cmds=i,this.addGroup(i),n.isDebug&&n.log("ActionCommand new uuid:"+t.uuid+" idx:"+t.com_uuid+" count:"+this.cmdCount),this.list=null,this.callFuncFin=[]};s.com_uuid=0,s.group_uuid=0,s.uuid=0,s.UUID=function(){return++s.uuid},s.ComUUID=function(){return++s.com_uuid},s.GroupUUID=function(){return++s.group_uuid},s.resetUUID=function(){s.uuid=0,s.com_uuid=0,s.group_uuid=0},s.PERMISSION_NO=0,s.PERMISSION_STATE=1,s.PERMISSION_DOWN=2,s.PERMISSION_TOY=4,s.PERMISSION_ROUNDEND=8,s.PERMISSION_ROUNDBALANCE=16,s.PERMISSION_START=(s.PERMISSION_PREBATTLE=32)|s.PERMISSION_ROUNDEND|(s.PERMISSION_REALIGN=64),s.PERMISSION_SUB=s.PERMISSION_DOWN|s.PERMISSION_TOY,s.PERMISSION_BAL=s.PERMISSION_DOWN|s.PERMISSION_ROUNDBALANCE,s.PERMISSION_ALL=s.PERMISSION_STATE|(s.PERMISSION_ALLBASE=s.PERMISSION_SUB|s.PERMISSION_ROUNDEND|s.PERMISSION_REALIGN),s.prototype.permission=s.PERMISSION_NO,s.prototype.uuid=0,s.prototype.idx=0,s.prototype.finCount=0,s.prototype.finish=!1,s.prototype.canDelete=function(){return!0},s.prototype.setPermission=function(t){return this.permission=t},s.prototype.addPermission=function(t){return this.permission|=t},s.prototype.havePermission=function(t){return(this.permission&t)==t},s.prototype.removePermission=function(t){this.setPermission((this.permission^t)&this.permission)},s.prototype.permissionFinish=function(){return this.permission==s.PERMISSION_NO},s.prototype.pause=function(t){var e=this.group();return void 0!=t&&(e.pause=t),e.pause},s.prototype.addGroup=function(t,e,i,n){var o=new c(this,t,this.groups.length);o.uuid=s.GroupUUID(),this.groups.push(o),this.cmdCount+=o.count},s.prototype.eachGroup=function(t,e){for(var i in this.groupIdx=0,this.groups)this.groupIdx=i,t.call(e,this.groups[i],this.groupIdx)},s.prototype.waitFinish=function(t){void 0==this._waitFinish&&(this._waitFinish=0),this._waitFinish+=t?1:-1},s.prototype.isWaitFinish=function(){return this._waitFinish>0},s.prototype.group=function(){return this.groups[this.groupIdx]},s.gid=function(t){var e=t.datas;return void 0==e?"undefind":e.tile?e.tile.gid:e.gid?e.gid:"undefind"},s.prototype.command=function(t){var e=this.group().command();if(n.isDebug&&e&&!t){var i="ActionCommand command uuid:"+this.uuid+" idx:"+e.idx+" com:"+e.cmd+" gid:"+s.gid(e),o=e.datas;o&&(o.moveNext&&(i+=" next:"+e.idx),o.who&&(i+=" who:"+e.idx)),n.log(i)}return e},s.prototype.next=function(){return this.group().next()},s.prototype.each=function(t,e){for(var i=this.idx+1,n=this.cmds.length;i<n;i++)if(t.call(e,i,this.cmds[i]))return},s.prototype.finish=function(t,e,i){++this.finCount,this.finCount>this.cmdCount&&n.error("ActionCommand finish flowout uuid:"+this.uuid+" idx:"+t.idx+" com:"+t.cmd+" finish:"+this.finCount+" count:"+this.cmdCount),t&&(t.finish=t.finish?t.finish+1:1,t.finish),t&&t.finNext&&(t.finNext.stop=!1,this.next(),e&&e.call(i,t.finNext)),n.isDebug&&n.log("ActionCommand finish uuid:"+this.uuid+" idx:"+t.idx+" com:"+t.cmd+" finish:"+this.finCount+" count:"+this.cmdCount);var o=this.allFinish();return o&&this.callFinish(),o},s.prototype.callFinish=function(){var t=this.allFinish();if(t&&this.callFuncFin.length>0)for(var e in this.callFuncFin){var i=this.callFuncFin[e];i.called||(i.called=i.callFunc.call(i.caller,this,i,i.params))}return t},s.prototype.isFinish=function(){return this.finCount>=this.cmdCount},s.prototype.clearAll=function(){if(this.sub)for(var t in this.sub)this.sub[t].clearAll();this.sub=null},s.prototype.addSub=function(t){this.sub||(this.sub=[]),this.sub.push(t)},s.prototype.allFinish=function(t){if(this.sub)for(var e in this.sub)if(!this.sub[e].allFinish(t))return!1;return t?this.isFinish()&&this.permission==s.PERMISSION_NO:this.isFinish()},s.prototype.allFinishStrict=function(){if(this.sub)for(var t in this.sub)if(!this.sub[t].allFinish(!0))return!1;return this.isFinish()},s.prototype.eof=function(){return this.idx>=this.cmdCount},s.prototype.finishCallFunc=function(t,e,i,n){var o={callFunc:t,caller:e,called:!1,params:i};return n?this.callFuncFin.unshift(o):this.callFuncFin.push(o),this},s.prototype.nextACCallFunc=function(t,e){this.callFuncNextAC=t?{callFunc:t,caller:e,called:!1}:null},s.prototype.callNextActionCommnad=function(t){var e=this.callFuncNextAC;e&&e.callFunc.apply(e.caller,[this,t,e.params])},s.prototype.read=function(){return this.group().read()};var c=function(t,e,i){this.dropCount=1,this.gpidx=i,this.uuid=t.uuid,this.cmd=e,this.count=e.length};c.equleGrid=function(t,e){return t.x==e.x&&t.y==e.y},c.prototype.makePortal=function(t){for(var e=[],i=0,n={},a={},r={};;){var l=null,h=!0;n={},a={};for(var u=[],d=0,f=t.length;d<f;d++){var g=t[d],p=g.datas;if(g.gid=p?p.gid:0,g.cmd!=o.com_transfer)if(g.cmd!=o.com_down)u.push(d),e.push(g);else{if(n[p.gid]&&g!=n[p.gid])continue;n[p.gid]=g;var _=a[p.gid];if(_&&_.cmd==o.com_transfer&&_.datas.gid==p.gid)continue;if(p.from&&p.from.x==p.tar.x&&p.from.y==p.tar.y){if(g.del=1,u.push(d),g.downEnd){var m=r[p.gid];m&&(m.downEnd=g.downEnd)}continue}p.from||(p.old=cc.p(p.grid.x,p.grid.y),p.from=cc.p(p.grid.x,p.grid.y)),p.step||(p.step=cc.p(p.grid.x-p.tar.x,p.grid.y-p.tar.y),p.step.x=p.step.x?-1:0,p.step.y=p.step.y?-1:0);var v=cc.p(p.from.x+p.step.x,p.from.y+p.step.y),E=r[p.gid];E?E.datas.tar=v:((E={cmd:o.com_down,idx:s.ComUUID(),datas:{gid:p.gid,grid:p.from,tar:v,pass:!0}}).gid=p.gid,E.root=g,r[p.gid]=E,e.push(E),l=E),p.grid=p.from,p.from=v,p.count=i}else{if(a[p.gid]&&g!=a[p.gid])continue;a[p.gid]=g,h=!1;var y=n[p.gid],b=!0;if(y&&y.cmd==o.com_down&&y.datas.gid==p.gid){if(y.datas.count==i)continue;b=c.equleGrid(y.datas.from||y.datas.grid,p.org)}b&&(u.push(d),l=g,this.dropCount++,r={},e.push(g),hasPortal=!0)}}for(var I=u.length-1;I>=0;I--)t.splice(u[I],1);if(i++,h){if(t.length>0)for(var T in t){var C=t[T],S=C.datas;S.grid&&S.grid.x==S.tar.x&&S.grid.y==S.tar.y?C.del=2:e.push(C)}break}l&&(l.datas.moveNext=s.createWait(this,l.idx),e.push(l.datas.moveNext)),portkey=null}return e},s.createWait=function(t,e){return{cmd:o.com_wait,group:t,idx:s.ComUUID(),who:e}},c.prototype.idx_pre=-1,c.prototype.idx=0,c.prototype.count=0,c.prototype.pause=!1,c.prototype.portal=!1,c.prototype.eof=function(){return this.idx>=this.count},c.prototype.next=function(t){if(this.eof())return null;var e=this.idx+(t||1),i=this.cmd[e];if(i){if(i.stop)return null}else n.isDebug&&n.log("ActionCommand next uuid:"+this.uuid+" cur:"+this.idx+" count:"+this.count+" is eof");return this.idx=e,i},c.prototype.check=function(t){return this.eof()?null:this.cmd[(t||1)+this.idx]},c.prototype.command=function(){if(this.idx==this.idx_pre)return null;if(this.eof())return null;var t=this.cmd[this.idx];return t.stop?null:t},c.prototype.read=function(){return this.cmd[this.idx],this.idx_pre=this.idx>this.idx_pre?this.idx:this.idx_pre},e.exports=s,cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",n7:"n7"}],ActionLock:[function(t,e,i){cc._RF.push(e,"a8782GMtAJDRIYWVpMydcbk","ActionLock");var n=function(t,e){this.callFunc=t,this.caller=e,this.list={},this.guid=0,this.lockCount=0};n.prototype.stateCall=function(){this.callFunc&&this.callFunc.call(this.caller,this.isLock()?1:0)},n.prototype.lock=function(t,e){return this.list[t]=e||"NA",this.lockCount++,this.stateCall(),t},n.prototype.isLock=function(){return this.lockCount>0},n.prototype.unlock=function(t){if(this.list[t]){delete this.list[t];var e=--this.lockCount>0;return this.stateCall(),e}},n.prototype.clear=function(){this.list={},this.guid=0,this.lockCount=0},e.exports=n,cc._RF.pop()},{}],ActivityLogic:[function(t,e,i){cc._RF.push(e,"6c9e2bSJ1JBQYmdtryYmFiI","ActivityLogic");var n=t("n7"),o=t("WorkData"),a=t("GameEvent"),s=t("UserLogic"),c=t("GameTools"),r=t("JsonMetaCache"),l=t("UITournament"),h=t("GameCommon"),u=function(){this.activity_tm=0};e.exports=u,u._ins=null,u.instance=function(){return u._ins},u.init=function(){u.assaultTableData=null,u.assaultSaveData=null,u.lastStage=null,u.needShow=!1,u._ins=new u},u.getActivity=function(t){var e=u.instance();return e&&e.activity?e.activity[t]:void 0},u.get=function(t){return u.getActivity(t)},u.getActivityLevel=function(t){var e=u.get(t);return e?e.level:0},u.getActivityData=function(t,e){var i=u.get(t);return i?i[e]:0},u.__activity=function(e){var i=u._ins;i.activity_tm<c.cutm()?t("FamNet").unified_send("Activity/get",null,function(t){i.activity_tm=c.cutm()+18E5,i.activity=JSON.parse(t),e&&e(i.activity)}):e&&e(i.activity)},u.mainui_showed=function(t){var e=t&&t.cmp;e&&u.levelup(s.geti("lev"),t.org_star),u.__activity(function(){var t=u.getActivity("notice");if(t){var i=u.instance();if(!i._NOTICE_){var n={title:"affiche",lab:t.title,labc:t.content,yes:"know",layer:98};a.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:n})}i._NOTICE_=1}u.activityInit(e)}),u.test&&u.activityInit(e),u.newyearTable={start:c.getTimeStameByDate("2019-01-01")/1E3,end:c.getTimeStameEnd("3019-02-13")/1E3,level:1},u.refreshNewYearAds()},u.test=!1,u.testActivity=function(){var t=u.instance();t&&!t.activity&&(t.activity={})},u.testLevelup=function(e){t("UserLogic").levelup(0,e),a.EVENT_BIGMAP_COMMAND({mainui:{nextlevel:s.geti("lev")}})},u.testFailed=function(e){t("GameLogic").crossFailed(e),a.EVENT_BIGMAP_COMMAND({mainui:{nextlevel:s.geti("lev")}})},u.activityShow=function(t){a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_assault",sh:u.assaultIsIn(),assault:u.getAssaultLevel(),cd:u.getAssaultTmremaining(),level:u.getAssaultOpenLevel()}})},u.activityInit=function(t){var e=s.geti("lev");u.chkActivity("assault",e,u.initassault,!1),u.chkActivity("chp",e,u.chp),u.chkActivity("recharge",e,u.initRecharge),u.chkActivity("tower",e,u.chkTower),u.chkFestival(e),u.activityShow(e),t||u.chkChpBtn()},u.initRecharge=function(e){var i=t("ReChargeLogic");i.init(e),i.show()},u.assaultTableData=null,u.assaultSaveData=null,u.lastStage=null,u.needShow=!1,u.initassault=function(t){return null!=t&&(u.assaultTableData=t,u.initassaultData(t.flag)),!0},u.assaultSuccess=function(e){if(u.assaultIsIn()){var i=u.assaultSaveData,o=u.assaultTableData,a=e-i.startLevel;a>3&&(a=3),a<0&&(i.startLevel=e-1,a=e-i.startLevel,u.setObj(i));var s=null;null!=o.award[a]&&(u.lastStage=i.currStage,i.currStage=a,i.currLevel=u.setAssaultLevel(i.currStage),s=u.setObj(i),0!=u.lastStage&&u.lastStage!=i.currStage&&(u.needShow=!0)),n.isDebug&&n.log("ActivityLogic.assaultSuccess.dt:"+s+",obj:"+JSON.stringify(i)),t("TDLog").Event("assault",{stage:"s"+a})}},u.assaultFailed=function(){if(u.assaultIsIn()){var e=u.assaultSaveData;u.lastStage=0,e.startLevel=s.geti("lev"),e.currStage=0,e.currLevel=u.setAssaultLevel(e.currStage);var i=u.setObj(e,e.startLevel);n.isDebug&&n.log("ActivityLogic.assaultFailed.dt: "+i+",obj: "+JSON.stringify(e)),t("TDLog").Event("assault",{stage:"s0",failed:"f1"})}},u.assaultIsIn=function(){return null!=u.assaultSaveData&&null!=u.assaultTableData&&u.getAssaultTmremaining()>0},u.assaultNotice=function(t,e){var i=u.assaultSaveData;u.assaultIsIn()&&1==i.first?a.EVENT_OPEN_DIALOG({name:"dialog_assault"}):t.call(e)},u.cleanFirst=function(){if(u.assaultIsIn()){var t=u.assaultSaveData;1==t.first&&(t.first=0,u.setObj(t))}},u.canAssaultNotice=function(){return!u.isTowerMap()&&-1!=u.getAssaultLevel()},u.getAssaultLevel=function(){return u.assaultIsIn()?u.assaultSaveData.currLevel:-1},u.getAssaultOpenLevel=function(){if(!u.assaultIsIn()){var t=u.get("assault");return t?t.level:-1}return u.assaultTableData.level},u.assaultpreBattle=function(e){if(!u.assaultIsIn()||t("ActivityLogic").isTowerMap())return e;var i=u.assaultSaveData;null==e&&(e={});var o=u.assaultTableData.award[i.currStage];for(var a in o){var s=r.item(a);if(s){var c=s.id_name;void 0==e[c]&&(e[c]=0),1==e[c]&&(e[c]=1),e[c]+=o[a]}}return n.isDebug&&n.log("ActivityLogic.assaultpreBattle.p: "+JSON.stringify(e)+",preItems: "+JSON.stringify(o)),e},u.initassaultData=function(t){var e=u.assaultSaveData=u.getObj();return 0!=e.flag&&e.flag==t||(u.lastStage=0,e.flag=t,e.startLevel=s.geti("lev"),e.currStage=0,e.first=1,e.currLevel=u.setAssaultLevel(e.currStage),u.setObj(e,e.startLevel)),n.isDebug&&n.log("ActivityLogic.initassaultData.assaultSaveData: "+JSON.stringify(e)),n.isDebug&&n.log("ActivityLogic.initassaultData.assaultTableData: "+JSON.stringify(u.assaultTableData)),e},u.getObj=function(){var t=o.get(o.WKD_ASSAULT),e=o.get(o.WKD_ASSAULT_STARLV),i={};return i.startLevel=e,i.currStage=parseInt(t/u.a)%(u.b/u.a),i.flag=parseInt(t/u.b)%(u.c/u.b),i.first=parseInt(t/u.c),null==u.lastStage&&(u.lastStage=0),i.currLevel=u.setAssaultLevel(i.currStage),n.isDebug&&n.log("ActivityLogic.getObj.dt: "+t+",startLevel: "+e),i},u.setObj=function(t,e){var i=t.first*u.c+t.flag*u.b+t.currStage*u.a;return i=o.set(o.WKD_ASSAULT,i),null!=e&&o.set(o.WKD_ASSAULT_STARLV,e),n.isDebug&&n.log("ActivityLogic.setObj.dt: "+i+",startLevel: "+e),i},u.a=1,u.b=100,u.c=1E7,u.setAssaultLevel=function(t){if(0==t)return-1;var e=0;for(var i in u.assaultTableData.award){if(i==t)return e;e++}return-1},u.getAssaultTmremaining=function(){var t=u.assaultTableData;if(null==u.assaultSaveData||null==t)return 0;var e=t.start_tm,i=t.day;return c.getTmrByDay(e,i,!0)},u.chkActivity=function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=u.get(t),a=o&&e>=o.level;if(a&&n&&o.award&&!o.ped){var c=o.award;for(var r in c)c[r]=s.awdidton(c[r]);o.ped=!0}return i&&i(a?o:null),a},u.levelup=function(t,e){u.upload(t,e)},u.chpAwd=function(e,i){t("FamNet").unified_send("Activity/chpawd",e,function(t){if(void 0!=t.chp){var e=u.get("chp");if(e){!1!==t.chp&&"false"!=t.chp||(t.chp=51);var n=e.award[t.chp],o=t.chp>50?"50+":t.chp+1,r=[];c.copys(r,n),r&&r.length>0?(s.award(r,"CHP_AWD_"+t.chp),r.txt="awd_hint.jbs_awd"):r={txt:"awd_hint.jbs_noawd",labc:"keep_trying"},r.txtarr=o,r.title="tournament.title",a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:r}),i&&i()}}else i&&i()})},u._newChp=function(e){var i=u.getChpStage(e);t("FamNet").unified_send("Activity/signup",{lev:i},function(e){e.stage&&(t("GuideLogic").hasNextGuide()||a.EVENT_OPEN_DIALOG({name:"dialog_active_open"}),o.set(o.WKD_CHP,e.stage),o.set(o.WKD_CHP_STAR,0),u.chkChpBtn())})},u.chp=function(t){var e=o.get(o.WKD_CHP);if(t){var i=parseInt(e/1E5);i!=t.flag&&(i>0?u.chpAwd({chp:e},function(){u._newChp(t)}):u._newChp(t))}return e},u.getChpStage=function(t,e){void 0==e&&(e=s.getLevel());var i=[60,5,100,10,150,20,200,50,300,100,500,200,99999,500],n=0,o=t.level,a=void 0;e-=o;for(var c=0;c<i.length;c+=2){if(e<(a=i[c]-o)){n+=parseInt(e/i[c+1])+1;break}n+=parseInt(a/i[c+1]),e-=a,o=i[c]}return n},u.showChpMainUI=function(){var t=u.get("chp"),e=s.getLevel();if(t&&e>=t.level){var i=0,n=o.get(o.WKD_CHP);return parseInt(n/1E5)!=t.flag?{level:-1}:(t.start_tm&&(i=c.getTmrByDay(t.start_tm,t.day)),{cd:i})}return!!t&&{level:t.level}},u.chkChpBtn=function(t){var e=u.showChpMainUI();e&&!e.level?l.getRLst(0,function(t){var i=!!o.get(o.WKD_CHP_STAR)&&t.myrank;a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_tournament",sh:e,cd:e.cd,rank:i}})}):a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_tournament",sh:!1,rank:!1,level:e.level?e.level:-1}})},u.upload=function(t,e){var i=u._upload_param_={lev:t,count:0};u.chkActivity("chp",t,function(n){n&&n.level!=t?(i.stage=u.chp(n),i.act="chp",i.star=o.add(o.WKD_CHP_STAR,e)):u.chkChpBtn(),u.__upload()}),u.chkActivity("tre",t,function(t){t&&(i.tre=e),u.__upload()})},u.__upload=function(){var e=u._upload_param_;if(++e.count>1){if(!e.act&&!e.tre)return;delete e.count,t("FamNet").unified_send("Activity/upload",e,function(i){if(i.act&&(void 0!=i.rank&&0!=i.rank||(i.rank="50+"),t("TDLog").Event("championship",{star:"s"+e.star,stage:"d"+e.stage,rank:"r"+i.rank}),u.chkChpBtn(!0)),i.tre){var n=t("GuildLogic").getGuild("tre");n&&(n.myrank=i.tre.rank,n.star=i.tre.allstar,n.mystar=i.tre.star)}})}},u.chprlst=function(e,i){var n={page:e,chp:o.get(o.WKD_CHP)};t("FamNet").unified_send("Activity/rlst",n,function(t){i&&i(c.parse_rlst(t.chp))})},u.trerlst=function(e,i){var n=s.get("guiid");if(n){var o={page:e,tre:n};t("FamNet").unified_send("Activity/rlst",o,function(t){i&&i(c.parse_rlst(t.tre))})}},u.chkFestival=function(e){var i=t("JsonMetaCache").getFestivalData();for(var n in i){var o=i[n],a=o.key;if(u.festivalJsonData=o,u.chkActivity(a,e,u.chkNewYear))break}u.chgFestTitle()},u.newyearTable=null,u.festivalJsonData=null,u.getNewYearTable=function(){return u.newyearTable},u.getCurFestData=function(){return u.festivalJsonData},u.getNewYearRemain=function(){var t=u.getNewYearTable();if(t){var e=c.getCurtm(!0);return t.start>e?-1:1E3*(t.end-e)}return 0},u.chkNewYear=function(t){if(u.log&&t){u.chgNewYearTime(t);var e=new Date(1E3*t.start),i=new Date(1E3*t.end);n.log("ActivityLogic.chkFestival: "+u.getCurFestData().key+JSON.stringify(t)),n.log("ActivityLogic.chkFestival.starttm: "+e.format("yyyy-MM-dd hh-mm-ss")+",endtm: "+i.format("yyyy-MM-dd hh-mm-ss"))}u.newyearTable=t,u.refreshNewYearSign(),u.refreshNewYearGift(),u.refreshNewYearAds()},u.refreshNewYearSign=function(){var e=u.getCurFestData().signKey,i=!1,n=!1,o=u.getNewYearTable(),s=u.getNewYearRemain();if(o&&s>0&&e){var c=t("SignLogic");c.openSign(e);var r=(n=c.getSignState(e))==h.SIGN_HASSIGN||n==h.RSIGN_TODAYNOSIGN;i=!t("ShareLogic").getWatchOrShare(108).hide&&r}a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_newYearSign",sh:i,level:i?1:0,tips:n==h.RSIGN_TODAYNOSIGN,cd:s}})},u.refreshNewYearGift=function(){t("ReChargeLogic").refreshNewYearGift()},u.refreshNewYearAds=function(){var e=u.getNewYearTable(),i=t("ShareLogic"),n=i.openAd(107),o=i.getWatchOrShare(107),s=n&&e&&!o.hide&&u.getNewYearRemain()>0,c=u.getNewYearRemain();a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_newYearWatch",sh:s,level:s?1:0,tips:o.condition&&o.cd<=0,cd:c}})},u.chgFestTitle=function(){var e=t("UIMainV2").instance();if(e){var i={btn_newYearWatch:"adsTitle",btn_newYearSign:"signTitle",btn_newYearGift:"giftTitle"};for(var n in i){var o=e[n],a=u.getCurFestData(),s=a[i[n]];o&&(o.titleKey=s,o.descKey="giftDesc."+a.id,c.textp(o,"title",s))}}},u.chgNewYearTime=function(t){if(t){var e=c.GetQueryString("newYearStart"),i=c.GetQueryString("newYearEnd");e&&(t.start=c.getTimeStameByDate(e)/1E3),i&&(t.end=c.getTimeStameByDate(i)/1E3)}},u.chgTowerTime=function(t){if(t){var e=c.GetQueryString("towerStart"),i=c.GetQueryString("towerEnd");e&&(t.start=c.getTimeStameByDate(e)/1E3),i&&(t.end=c.getTimeStameByDate(i)/1E3)}},u.log=!0,u.testTowerTable={mapid:[10001,10002,10003,10004,10005,10006,10007,10008,10009,10010],level:5,end:c.getTimeStameByDate("2019-01-31")/1E3,award:{5:[{k:"Drill",v:3},{k:"ResetCube",v:3},{k:"gold",v:8E3},{k:"unheart",v:1},{k:"silver",v:8E3}],10:[{k:"Drill",v:3},{k:"Rotor",v:3},{k:"ResetCube",v:3},{k:"gold",v:4E3},{k:"unheart",v:2},{k:"silver",v:12E3}]},flag:0,ped:!0},u.testOpen=function(e){var i=u.instance();for(var n in i&&!i.activity&&(i.activity={}),u.testFestData)delete i.activity[n];i.activity[e]=u.testFestData[e];var o=t("GameLogic");o.cleanAll(),o.setTestTime(1E3*u.testFestData[e].start)},u.testFestData={spring:{start:c.getTimeStameByDate("2019-01-31")/1E3,end:c.getTimeStameEnd("2019-02-13")/1E3,level:1},Women:{start:c.getTimeStameByDate("2019-03-08")/1E3,end:c.getTimeStameEnd("2019-03-10")/1E3,level:1},AprilFool:{start:c.getTimeStameByDate("2019-04-01")/1E3,end:c.getTimeStameEnd("2019-04-03")/1E3,level:1},ChingMing:{start:c.getTimeStameByDate("2019-04-04")/1E3,end:c.getTimeStameEnd("2019-04-10")/1E3,level:1},Labor:{start:c.getTimeStameByDate("2019-04-30")/1E3,end:c.getTimeStameEnd("2019-05-06")/1E3,level:1},Mother:{start:c.getTimeStameByDate("2019-05-10")/1E3,end:c.getTimeStameEnd("2019-05-12")/1E3,level:1},Children:{start:c.getTimeStameByDate("2019-05-31")/1E3,end:c.getTimeStameEnd("2019-06-02")/1E3,level:1},DragonBoat:{start:c.getTimeStameByDate("2019-06-06")/1E3,end:c.getTimeStameEnd("2019-06-12")/1E3,level:1},Father:{start:c.getTimeStameByDate("2019-06-14")/1E3,end:c.getTimeStameEnd("2019-06-16")/1E3,level:1},Tanabata:{start:c.getTimeStameByDate("2019-08-06")/1E3,end:c.getTimeStameEnd("2019-08-11")/1E3,level:1},Teachers:{start:c.getTimeStameByDate("2019-09-06")/1E3,end:c.getTimeStameEnd("2019-09-10")/1E3,level:1},"Mid-Autumn":{start:c.getTimeStameByDate("2019-09-12")/1E3,end:c.getTimeStameEnd("2019-09-18")/1E3,level:1},National:{start:c.getTimeStameByDate("2019-09-30")/1E3,end:c.getTimeStameEnd("2019-10-13")/1E3,level:1},Halloween:{start:c.getTimeStameByDate("2019-10-31")/1E3,end:c.getTimeStameEnd("2019-11-02")/1E3,level:1},Thanksgiving:{start:c.getTimeStameByDate("2019-11-27")/1E3,end:c.getTimeStameEnd("2019-11-29")/1E3,level:1},Christmas:{start:c.getTimeStameByDate("2019-12-20")/1E3,end:c.getTimeStameEnd("2019-12-26")/1E3,level:1}},u.towerTable=null,u.initTowerTable=function(t){var e=null;if(t){(e={}).id=t.flag,e.list={};for(var i=void 0,n=0;n<t.mapid.length;n++)(i={}).id=n,i.mapId=t.mapid[n],i.gift=t.award[n+1],e.list[n]=i;e.start=t.start,e.end=t.end,u.towerMapList=t.mapid}u.towerTable=e},u.getTowerTable=function(){return u.towerTable},u.getTowerRemain=function(){var t=u.getTowerTable();if(t){var e=c.getCurtm(!0);return t.start>e?-1:1E3*(t.end-e)}return 0},u.getTowerRemain1=function(){var t=u.getActivityData("tower","start"),e=u.getActivityData("tower","end");if(0==t||0==e)return 0;var i=c.getCurtm(!0);return t>i?-1:1E3*(e-i)},u.chkTower=function(t){if(u.log&&t){u.chgTowerTime(t);var e=new Date(1E3*t.start),i=new Date(1E3*t.end);n.log("ActivityLogic.chkTower: "+JSON.stringify(t)),n.log("ActivityLogic.chkTower.starttm: "+e.toString()+",endtm"+i.toString())}var o=!1;u.initTowerTable(t);var c=u.getTowerRemain();if(t){var r=u.getTowerTable(),l=u.getTowerData();if(c>0){var d=r.id;l[0]!=d&&((l=u.getDefaultTower())[0]=d,u.setTowerData(l)),u.canTowerAward().state!=h.TOWER_END&&(o=!0)}}var f=s.geti("lev"),g=u.getActivityLevel("tower"),p=f<g&&u.getTowerRemain1()>0,_=o||p?g:0;return a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_tower",sh:f>=g,level:_,cd:c}}),o},u.getTowerJsonData=function(){var t=u.getTowerTable(),e=u.getTowerData();return t&&t.list?t.list[e[1]]:null},u.mainClick=function(){var t={};t.state=h.TOWER_XUANCHUAN;var e=u.canTowerAward();t.awd=e.awd,a.EVENT_OPEN_DIALOG({name:"dialog_tower_active",param:t})},u.canTowerAward=function(){var t={},e=u.getTowerTable();if(!e)return null;var i=u.getTowerData(),n=0|i[1],o=0|i[2];for(var a in e.list){var s=e.list[a];if(!(a<=o)&&s.gift){t.awd=s.gift,t.curLevel=a;break}}var c=o<t.curLevel&&n>t.curLevel;return t.state=c?h.TOWER_CANAWD:h.TOWER_NOTAWD,t.curLevel=t.state==h.TOWER_CANAWD?t.curLevel:n,t.showLevel=u.getShowLevel(t.curLevel),t.stage=u.getStageByLevel(t.curLevel),n!=o||e.list[n+1]||(t.state=h.TOWER_END),t},u.getTowerAward=function(e,i){var n=u.canTowerAward();if(n.state==h.TOWER_CANAWD){var o=n.awd;o.callFunc=e,o.caller=i,t("UserLogic").award(o,"TOWER"),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:o});var s=u.getTowerData();s[2]=s[1],u.setTowerData(s)}else a.EVENT_MESSAGEBOX("newyear_sign.hasGet");return u.canTowerAward()},u.towerWinOrLose=function(e,i){return!!u.isTowerMap(e)&&(i?a.EVENT_TOWER_SHOW({ret:t("GameCommon").TOWER_WIN,mapId:e}):(u.resetTowerLevel(),a.EVENT_TOWER_SHOW({ret:t("GameCommon").TOWER_LOSE,mapId:e})),!0)},u.canStar=function(){var t=!1,e=u.getTowerData();return parseInt(e[1])>parseInt(e[3])&&(e[3]=e[1],u.setTowerData(e),t=!0),t},u.isTowerMap=function(e){if(null==e){var i=t("UIGameV2").instance();if(!i)return 0;e=i.mapId}return e>1E4?u.getTowerSMapId(e):0},u.getTowerSMapId=function(t){return null==u.towerMapList?t:u.towerMapList.indexOf(t)%5+1},u.getTowerLevelByMapId=function(t){return null==u.towerMapList?0:u.towerMapList.indexOf(t)},u.getShowLevel=function(t){return null==t&&(t=u.getTowerLevel()),t%5+1},u.getStageByLevel=function(t){return null==t&&(t=u.getTowerLevel()),0|t/5},u.getTowerLevel=function(){return 0|u.getTowerData()[1]},u.cleanTowerLevel=function(){u.setTowerData(null)},u.resetTowerLevel=function(){var t=u.getTowerData();t[1]=t[2]=t[1]>=5?5:0,u.setTowerData(t)},u.addTowerLevel=function(){var t=u.getTowerData();t[1]=1+(0|t[1]),u.setTowerData(t)},u.getDefaultTower=function(){return[0,0,0,0]},u.getTowerData=function(){var e=t("ShareLogic").__SP2,i=u.getDefaultTower(),a=o.get(o.WKD_TOWER_LEVEL);if("number"!=typeof a){var s=(a=a.substring(1)).split(e);s&&""!=s[0]&&(i=s)}return n.log("ActivityLogic.getTowerData: "+JSON.stringify(i)),i},u.setTowerData=function(e){var i=t("ShareLogic").__SP2,a="";if(null!=e){a=o.STR;for(var s=0;s<e.length;s++)a+=e[s]+i;a=a.substring(0,a.length-1)}o.set(o.WKD_TOWER_LEVEL,a),n.log("ActivityLogic.setTowerData: "+a)},cc._RF.pop()},{ActivityLogic:"ActivityLogic",FamNet:"FamNet",GameCommon:"GameCommon",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",GuideLogic:"GuideLogic",GuildLogic:"GuildLogic",JsonMetaCache:"JsonMetaCache",ReChargeLogic:"ReChargeLogic",ShareLogic:"ShareLogic",SignLogic:"SignLogic",TDLog:"TDLog",UIGameV2:"UIGameV2",UIMainV2:"UIMainV2",UITournament:"UITournament",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],AtlasAnimation:[function(t,e,i){cc._RF.push(e,"6875eBfxElKkZReAc6EiFzE","AtlasAnimation");var n=t("n7"),o=t("StringUtils"),a=t("GameTools"),s=cc.Class({"extends":cc.Component,properties:{atlas:{"default":null,type:cc.SpriteAtlas,notify:function(t){0!=this.animationName.length&&this.refrushAnim()}},animationName:{"default":"",notify:function(t){null!==this.atlas&&(this._needformat=this.animationName.indexOf("{0}")>=0,this.refrushAnim())}},startIndex:{"default":1,notify:function(t){this.setMode(),this.refrushAnim()}},fill:{"default":"",notify:function(t){this.setMode(),this.refrushAnim()}},frameCount:0,playLoop:0,pingpong:{"default":!1,notify:function(t){this.setMode()}},reverse:{"default":!1,notify:function(t){this.setMode()}},duration:{"default":.5,notify:function(t){this._duration=this.duration/(this.endIdx-this.startIdx+1)}},playOnLoad:!0},statics:{NORMAL:1,REVERSE:2,PINGPONG:4,REVERSE_PINGPONG:6,PLAYING:1,PLAY_START:2,PLAY_END:3},onLoad:function(){this._step=1,this.playOnLoad&&(this.setAnimation(this.atlas,this.animationName,this.startIdx,this.endIdx,this.fill),this.playLoop>=0?this.play(this.duration,this.playLoop):this.stop()),this.isLoadOk=!0},ctor:function(){this._needformat=!1,this.idx=0,this._step=1,this._curLoop=0,this._timer=0,this._duration=0,this._sprite=null},setMode:function(){var t=this.reverse?s.REVERSE:s.NORMAL;this.pingpong&&(t=s.PINGPONG),this.mode=t,this.setStep()},setNormalMode:function(){this._step=1,this.startIdx=this.startIndex,this.endIdx=this.frameCount},setReverseMode:function(){this._step=-1,this.startIdx=this.frameCount,this.endIdx=this.startIndex},setStep:function(){a.queryBinary(this.mode,s.NORMAL)?this.setNormalMode():a.queryBinary(this.mode,s.REVERSE)?this.setReverseMode():a.queryBinary(this.mode,s.PINGPONG)&&(this._curLoop%2?this.setNormalMode():this.setReverseMode()),this.idx=this.startIdx},setAnimation:function(t,e,i,n,o){this.animationName=e,this._needformat=this.animationName.indexOf("{0}")>=0,this.atlas=t,this.endIndex=0,n&&(this.frameCount=n),this.setMode(),this.fill=void 0===o?"":o},play:function(t,e,i,n){t=t||this.duration,this._duration=t/(this.frameCount-this.startIndex+1),void 0===e&&(e=this.playLoop||0),this.playLoop=e,this.loopCount=this.playLoop,this._curLoop=0,this._timer=0,this.setMode(),i&&this.setCallFunc(i,n)},setCallFunc:function(t,e){this.callFunc=t,this.caller=e},callPlayEnd:function(){this.callFunc&&(this.callFunc.call(this.caller,s.PLAY_END,this),this.callFunc=this.caller=null)},callPlaying:function(t){this.callFunc&&this.callFunc.call(this.caller,s.PLAYING,t)},stop:function(){this.loopCount=-1,this.callPlayEnd()},getAnimationName:function(){return this.animationName},loopEnd:function(t){},isPlayOver:function(){return this._step>0?this.idx>=this.endIdx:this.idx<=this.endIdx},update:function(t){if(this.isPlay()&&(this._timer+=t,this._timer>=this._duration)){var e=Math.floor(this._timer/this._duration);if(this.idx+=this._step*Math.floor(this._timer/this._duration),this._timer-=e*this._duration,this.isPlayOver()&&(++this._curLoop,this.setStep(),this.loopEnd(this._curLoop),this.loopCount>0&&this._curLoop>=this.loopCount))return void this.stop();this.refrushAnim()}},isPlay:function(){return this.loopCount>=0},refrushAnim:function(){if(this.isPlay())if(null!=this.atlas){var t=0==this.fill.length?this.idx:o.replaceFill(this.fill,this.idx),e=null;e=this._needformat?o.formatStr(this.animationName,t):this.animationName+t;var i=this.atlas.getSpriteFrame(e);null!=i&&(null===this._sprite&&(this._sprite=this.node.getComponent(cc.Sprite)),this._sprite.spriteFrame=i,this.callPlaying(i))}else n.log("altas is null "+this.animationName)}});cc._RF.pop()},{GameTools:"GameTools",StringUtils:"StringUtils",n7:"n7"}],AtlasText:[function(t,e,i){cc._RF.push(e,"37bb4VbSItBkYwuzkm6ds39","AtlasText");var n=t("StringUtils");cc.Class({"extends":cc.Component,properties:{altas:{"default":null,type:cc.SpriteAtlas,notify:function(t){this.setText(this.text)}},text:{"default":"",notify:function(t){this.setText(this.text)}},textureName:{"default":"",notify:function(t){this.setTextureName(this.textureName),this.setText(this.text)}},fill:"",space:0,align:{"default":cc.Label.HorizontalAlign.CENTER,type:cc.Label.HorizontalAlign}},statics:{__id:0},ctor:function(){this._fill="",this._textureName="",this._atlas=null,this._layout=null,this._align=cc.Label.HorizontalAlign.CENTER},onLoad:function(){},init:function(){if(!this._init){this._init=!0,this.node.removeAllChildren(!0);var t=this.node;this._layout=t.getComponent(cc.Layout),null===this._layout&&(this._layout=t.addComponent(cc.Layout)),this._layout.type=cc.Layout.Type.HORIZONTAL,this._layout.resizeMode=cc.Layout.ResizeMode.CONTAINER,this._layout.startAxis=cc.Layout.AxisDirection.HORIZONTAL,this.setTextureName(this.textureName),this.setSpace(this.space),this.setAlign(this.align),this.setText(this.text,this.fill)}},setTextureName:function(t){this._textureName=t},setSpace:function(t){this._layout.spacingX=t},setAlign:function(t){switch(this._align=t,t){case cc.Label.HorizontalAlign.CENTER:this._layout.node.anchorX=.5;break;case cc.Label.HorizontalAlign.LEFT:this._layout.node.anchorX=0;break;case cc.Label.HorizontalAlign.RIGHT:this._layout.node.anchorX=1}},setText:function(t,e){null==this._layout&&this.init(),null!==t&&void 0!==t||(t=""),this._text=""+t,this._fill=e;for(var i=null,o=0;o<this._text.length;o++){if(this._layout.node.childrenCount>o)(i=this._layout.node.getChildByName(""+o)).active=!0,i=i.getComponent(cc.Sprite);else{var a=new cc.Node;a.name=""+o,i=a.addComponent(cc.Sprite),this._layout.node.addChild(a)}var s=this._textureName,c=!this._fill||this._fill.length<1?this._text[o]:n.replaceFill(this._fill,this._text[o]);if(s.indexOf("{")<0?s+=c:s=n.formatStr(s,c),null==this.altas)return void console.log("this.node "+this.node.name);i.spriteFrame=this.altas.getSpriteFrame(s)}for(var r=this._text.length;r<this.node.childrenCount;r++)(i=this._layout.node.getChildByName(""+r))&&(i.active=!1)}}),cc._RF.pop()},{StringUtils:"StringUtils"}],ChestRandLogic:[function(t,e,i){cc._RF.push(e,"55192H37+BIxq3+Nc3QloV1","ChestRandLogic");var n=t("JsonMetaCache"),o=t("GameCommon"),a=t("MathUtils"),s=t("UserLogic"),c=t("n7"),r=function(){};r.randBoxItems=function(t,e){var i=n.getAllChest(),o=i[t];if(!o)return c.log("ChestRandLogic.randBoxItems.id: "+t+" \u6ca1\u6709\u6570\u636e"),null;e=Math.abs(e);for(var a=[],s=void 0,l=void 0,h=void 0,u=void 0,d=r.RANDOM_ITEMSKEY.length,f=void 0,g=0;g<d;g++)l=o[u=r.RANDOM_ITEMSKEY[g]],h=o[u+r.RANDOM_RANGEKEY],null!=i[l]&&(l=i[l][u]),null==(f=r.RANDOMFUNC_LIST[u])&&(f="randItems"),null!=(s=r[f](l,h,e,a))?a.push(s):c.log("ChestRandLogic.randBoxItems.id: "+t+",key: "+u+" \u968f\u673a\u5230\u4e86\u7a7a\u7269\u54c1");return c.isDebug&&c.log("ChestRandLogic.randBoxItems.id: "+t+",rand: "+e+",itemsResult: "+JSON.stringify(a)),a},r.randItems=function(t,e,i,c){if(""==t||""==e)return null;var r=t[o.CHESTCONDITIONKEY];if(null!=r){for(var l=void 0,h=void 0,u=0;u<r.length;u++){var d=r[u].lessKey,f=r[u].lessNum,g=r[u].moreKey,p=r[u].moreNum;if(null!=d&&s.geti(d)<f){l=r[u].id,h=r[u].num;break}if(null!=g&&s.geti(g)>p){l=r[u].id,h=r[u].num;break}}if(null!=l&&null!=h)return{k:n.item(l).id_name,v:h}}var _=a.randv1v2(i,e.min,e.max),m=t[_-1];if(null==m)return null;var v=n.item(m.id);if(!v)return null;for(var E=v.id_name,y=!1,b=0;b<c.length;b++)E==c[b].k&&(y=!0);if(y){if(_+1>e.max?_-=1:_+=1,!(m=t[_-1]))return null;if(!(v=n.item(m.id)))return null;E=v.id_name}return{k:E,v:m.num}},r.randGold=function(t,e,i){if(""==t||""==e)return null;var o=a.randv1v2(i,1,e),s=parseInt((t.max-t.min)/e)*o+t.min,c=n.item(t.id);return c?{k:c.id_name,v:s}:null},r.checkNumWrong=function(t,e,i){return t<e||t>i},r.RANDOM_ITEMSKEY=["g1","g2","g3"],r.RANDOM_RANGEKEY="_rand",r.RANDOMFUNC_LIST={g1:"randGold"},e.exports=r,r.test1=function(e,i){for(var n="1"+10*e,o=0;o<i;o++){var a=t("MathUtils").randInt(1,100);r.randBoxItems(n,a)}},r.test2=function(e,i){for(var n=e-1+1E5,o=0;o<i;o++){var a=t("MathUtils").randInt(1,100);r.randBoxItems(n,a)}},r.testcase=function(){var t=n.getAllChest(),e=void 0,i=void 0;for(i in t){e=t[i];for(var o=0;o<101;o++)r.randBoxItems(e.id,o)}r.randBoxItems(-1,-1),r.randBoxItems(-1,-1E8),r.randBoxItems(-1,0),r.randBoxItems(-1,100),r.randBoxItems(-1,101),r.randBoxItems(-1E3,101E6),r.randBoxItems(1E8,101E6),r.randBoxItems(120,101E6),r.randBoxItems(110,101E6)},cc._RF.pop()},{GameCommon:"GameCommon",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",UserLogic:"UserLogic",n7:"n7"}],CircleLayout:[function(t,e,i){cc._RF.push(e,"042bauTd2VLiIuSaa+Lrvul","CircleLayout");var n=t("MathUtils"),o=t("StringUtils");cc.Class({"extends":cc.Component,properties:{diameter:{"default":0},count:{"default":0},nodeRotation:!0,nodeName:"node_{0}",startRotation:0,nodeStartRotation:0,template:{"default":null,type:cc.Node},resetAll:{"default":!1,notify:function(t){this.resetLayout()}}},onLoad:function(){},resetLayout:function(){this.node.removeAllChildren(!0);for(var t=360/this.count,e=0,i=0;i<this.count;i++){var a=n.getAimPointOffset(0,0,n.angleToRadian(e+this.startRotation),this.diameter,this.diameter),s=cc.instantiate(this.template);s.x=a.x,s.y=a.y,s.parent=this.node,this.nodeRotation&&(s.rotation=e+this.nodeStartRotation),s.name=o.formatStr(this.nodeName,i),e+=t}}}),cc._RF.pop()},{MathUtils:"MathUtils",StringUtils:"StringUtils"}],CoolArray:[function(t,e,i){cc._RF.push(e,"1bf7f+NMXZGUqSEDTMXEs7R","CoolArray");var n=cc.Class({properties:{length:{get:function(){return this._length}}},statics:{createArray:function(){return new n}},ctor:function(){this._data=[],this._length=0},remove:function(t){return!(t<0||t>=this._length||(this._data[t]=this._data[--this._length],this._data[this._length]=null,0))},clear:function(){this._data=[],this._length=0},push:function(t){return this._data[this._length++]=t,this._length},shift:function(){if(this._length<=0)return null;for(var t=this._data,e=t[0],i=1,n=this._length;i<n;i++)t[i-1]=t[i];return t[--this._length]=null,e},pop:function(){if(this._length<=0)return null;var t=this._data,e=t[--this._length];return t[this._length]=null,e},indexOf:function(t){return this._data.indexOf(t)},forEach:function(t,e){for(var i in this._data){if(i>=this._length)break;if(t.call(e,this._data[i],i))return}},getData:function(t){return t<0||t>=this._length?null:this._data[t]}});e.exports=n,cc._RF.pop()},{}],Dispel:[function(t,e,i){cc._RF.push(e,"52058HZWANJQazMpvOolcRL","Dispel");var n=t("GameTools"),o=t("GameCommon"),a=t("MathUtils"),s=t("n7"),c=function(){};e.exports=c;var r=function(){var t=[];this.IsAndOpen=function(e,i){var o=n.ptoidx(e,i);return!t[o]&&(t[o]=1)},this.is=function(e,i){return 1==t[n.ptoidx(e,i)]},this.open=function(e,i){t[n.ptoidx(e,i)]=1},this.close=function(e,i){t[n.ptoidx(e,i)]=0},this.xy=function(){return t}};c.__SAME_COLOR=null,c._SAMECOLOR_=function(t){if(!c.__SAME_COLOR){var e=c.__SAME_COLOR={};e.clean=function(){return this.list=[],this},e.finded=function(t){var e=t.block;return!(!e||e.chId==this.chId)&&(e.chId=this.chId,e.list=this.list,this.list.push(e),this.chklst=t.getChkList(),0!=this.chklst)},e.compare=function(t,e){var i=e.getChkList();return this.chklst==i&&(1!=i||e.compare_color(t))}}return c.__SAME_COLOR.chId=t,c.__SAME_COLOR},c.__sameMData=function(t,e,i){if(e&&i.finded(e)){var n=e.getx(),a=e.gety(),s=t.getMapData(n+1,a);s&&!s.blockIsLock(t,o.LOCK_COM_DOWN)&&s.invalid()&&i.compare(e,s)&&c.__sameMData(t,s,i),(s=t.getMapData(n,a+1))&&!s.blockIsLock(t,o.LOCK_COM_DOWN)&&s.invalid()&&i.compare(e,s)&&c.__sameMData(t,s,i),(s=t.getMapData(n-1,a))&&!s.blockIsLock(t,o.LOCK_COM_DOWN)&&s.invalid()&&i.compare(e,s)&&c.__sameMData(t,s,i),(s=t.getMapData(n,a-1))&&!s.blockIsLock(t,o.LOCK_COM_DOWN)&&s.invalid()&&i.compare(e,s)&&c.__sameMData(t,s,i)}},c._SAMEDISPEL=null,c._SAMEDSP_=function(t){if(!c._SAMEDISPEL){var e,i,n=c._SAMEDISPEL={};n.init=function(t){return e=this._f=new r,i=[],this.meta=t,this.carpet=!1,this},n.finded=function(t){return!!e.IsAndOpen(t.getx(),t.gety())&&(t.block&&t.block.isTypei(this.meta.type)&&(t.haveCage()||i.push(t.block.gid)),this.carpet||(this.carpet=void 0!=t.carpet),!t.unFindAround())},n.compare=function(t,e){return!!t.compare(e)||e.canDispel(this.meta)},n.list=function(){return i},n.close=function(t,i){e.close(t,i)},n.output_destory=function(t,i){var n,o,a,s=t.xcount,r=t.ycount;for(o=0;o<s;o++)for(a=0;a<r;a++)(n=t.getMapData(o,a)).invalid()&&n.block&&e.is(o,a)&&(t.gDestroy(i,n.block)||e.close(o,a));t.lated&&(c.late_destroy(t,i,t.lated),t.lated=null)}}return c._SAMEDISPEL.init(t)},c.can=function(t){return!0},c.__dsp=function(e,i,n){var a=i.block;c.__sameMData(e,i,c._SAMECOLOR_(e.getChkid()).clean());var s=a.list.length;if(s<2)return null;!n&&e.saveCurRecord();var r=e.chgToItem(a,s),l=c._SAMEDSP_(a.getMeta());c.__sameMData(e,i,l);var h=e.makeOut(a);return h.carpet=l.carpet,r&&(l.close(i.getx(),i.gety()),h.cmds.push({cmd:o.com_merge,datas:{lst:l.list(),gid:a.gid,par:r}}),e.gChgTo(h,i,r),e.recordChgToItem(r)),l.output_destory(e,h),t("GameLogic").canDispelGift(s)&&(e.dispelGift=!0),h},c.__down=function(t,e){e||(e=t.makeOut());for(var i,n=e.cmds,o=t.order,a=0;i=o[a],a<o.length;a++)n.length,c._fillColumn(t,e,i);for(var s=0;s<t.xlist.length;s++)c._fillColumn(t,e,t.xlist[s],void 0,void 0,!0);for(var r=0;r<t.xlist.length;r++)c._fillColumn(t,e,t.xlist[r],void 0,void 0,!0);return t.xlist=[],e},c._fillColumn=function(t,e,i,n,o,a,s){var r;for(void 0==n&&(n=0),void 0==a&&(a=!1),void 0==s&&(s=t.ycount);n<s;n++)if((r=t.getMapData(i,n)).block)if(r.canDown())!r.block.isG4()||a?(n==r.block.gety()&&c._downp(t,e,r.block),r.tffr&&!r.block&&c._fillColumn(t,e,r.tffr.x,r.tffr.y,1)):-1==t.xlist.indexOf(i)&&t.xlist.push(i);else{if(o)return}else r.tffr&&c._fillColumn(t,e,r.tffr.x,r.tffr.y,1);if(t.getTopMapData(i).canDown()){for(n=s-1;n>=0&&!t.invalid(i,n);n--);if(!(n<0)){r=t.getMapData(i,n);for(var l=n;!r.block&&l++>=0;)c._downp(t,e,t.gCreate2(e,{x:i,y:n,i:l}))}}},c._downp=function(t,e,i){for(var n,o,a=i.getx(),r=i.gety(),l=-1,h=i.getDowny(),u=i.getG4();r>=0;r--){if(n=t.getMapData(a,r)){if(n.tfto){if(o=n.tfto,(n=t.getMapData(o.x,o.y)).block){s.log("cannot tf:"+i.gid+"|"+a+"_"+r+"|"+o.x+"_"+o.y);break}return l>=0&&t.gDown2(e,i,l),t.gTf(e,i,o),void c._downp(t,e,i)}if(n.haveCage())break}if(r-1<0)break;if(n=t.getMapData(a,r+h-1)){if(n.block)break;if(n.offdown)break;if(n.invalid()){if(u&&0!=u.w){for(var d=!1,f=!1,g=u.w>0?0:u.w,p=u.w>0?u.w:0,_=g;_<=p;_++)0!=_&&((n=t.getMapData(a+_,r+h-1))||(d=!0),n.block&&(f=!0),n.offdown&&(f=!0),n.invalid()||(d=!0));if(d)continue;if(f)break}l=r-1}}}-1!=l&&t.gDown2(e,i,l)},c.__toy=function(t,e){var i=t.getToyd();if(!i||i.length<1)return null;for(var n=0;n<i.length;n++)t.gDestroy(e,i[n]);return e},c.prv_moves=0,c.__roundEnd=function(t){var e=t.makeOut(),i=t.calc_type_count();return c.operSpTile(t,e,i),t.checkMapTileList(e),e},c.__chkEnd=function(t,e,i){return c._chkEnd(t,e)&&i.cmds.push({cmd:o.com_realign,datas:{}}),i},c._chkEnd=function(t,e){var i,n=t.getPropOfTpCnt(e);if(n.length>0)for(i=0;i<n.length;i++)if(!t.btom(n[i]).haveCage())return!1;for(n=t.getTileOfTpCnt(e),i=0;i<n.length;i++)if(n[i].list&&n[i].list.length>1)return!1;return!0},c.realign=function(t,e){var i=e[o.tile_type_cube];if(i.length<2)return null;for(var n,s,c=[],r=[],l=0;l<i.length;l++)t.btom(n=i[l]).haveCage()||(c.push(n.cpos()),(s=a.getArr(r,n.getColor()))||(s=a.setArr(r,n.getColor(),[])),s.push(n));if(a.adjacent(c,function(t,e){return t.x==e.x?1==Math.abs(t.y-e.y):t.y==e.y&&1==Math.abs(t.x-e.x)}),c=a.upset(c,5),r.sort(function(t,e){return t?e?t.length>e.length?-1:1:-1:1}),r[0].length<2)return null;var h=t.makeOut();for(l=0;l<r.length;l++)for(;r[l]&&r[l].length>0;)s=c.pop(),n=r[l].pop(),t.getMapData(s.x,s.y).setBlock(t,h,n);return h},c.__tips=function(t){var e,i=t.makeOut(),n=[],s=t.getTileOfTpCnt();for(e=0;e<s.length&&(s[e].list&&s[e].list.length<2||(n.push(s[e].list),!(n.length>2)));e++);if(s=t.getPropOfTpCnt(),n.length<2&&s.length>0)for(e=0;e<s.length&&(t.btom(s[e]).haveCage()||(n.push([s[e]]),!(n.length>2)));e++);return n.length<1?null:(i.cmds.push({cmd:o.com_tips,datas:{list:a.randArray(n)}}),i)},c.crtItems=function(t,e,i,n){null==i&&(i=t.calc_type_count()),null!=t.openCr&&c.openCr(t,e,i,n),t.lockFromCmds(e.cmds,o.com_dtchg)},c.chgState=function(t,e,i){null==i&&(i=t.calc_type_count()),n.defaultArr(i,o.tile_type_mussel)>0&&c.mussel(t,e,i[o.tile_type_mussel]),n.defaultArr(i,o.tile_type_copter)>0&&c.copter(t,e,i[o.tile_type_copter]),n.defaultArr(i,o.tile_type_ice)>0&&c.ice(t,e,i[o.tile_type_ice]),n.defaultArr(i,o.tile_type_magicwater)>0&&c.nextColor(t,e,i[o.tile_type_magicwater]),t.lockFromCmds(e.cmds,o.com_dtchg)},c.operSpTileAtLeast=function(t,e,i){var a=null;null==a&&(a=t.calc_type_count()),n.defaultArr(a,o.tile_type_nest)>0&&c.tarFinishDel(t,e,a[o.tile_type_nest])},c.canChgState=function(t,e,i){return!0},c.operSpTile=function(t,e,i){if(!t.statu(0))return i;var a,s,r,l,h=t.getMoves();return c.prv_moves==h?i:(c.prv_moves=h,n.defaultArr(i,o.tile_type_timebomb)>0&&(a=c.timeBomb(t,e,i[o.tile_type_timebomb])),n.defaultArr(i,o.tile_type_chgc)>0&&(s=c.chgc(t,e,i[o.tile_type_chgc])),n.defaultArr(i,o.tile_type_swap)>0&&(r=c.swap(t,e,i[o.tile_type_swap])),n.defaultArr(i,o.tile_type_candy)>0&&c.candy(t,e,i[o.tile_type_candy]),l=c.convey(t,e,t.getCovs()),t.lockFromCmds(e.cmds,o.com_dtchg),a||s||r||l?t.calc_type_count(e):i)},c.__ice=function(t,e){var i=t.getMoves();if(c.prv_ice_moves==i)return e;c.prv_ice_moves=i;var n=t.getBOfTp(o.tile_type_ice);return n&&n.length>0&&(e||(e=t.makeOut()),c.ice(t,e,n)),e};var l=function t(e){this.list=[];var i=new r;this.finded=function(t){var e={x:t.getx(),y:t.gety()};if(!i.IsAndOpen(e.x,e.y))return!1;var n=t.block;return n?!!n.isTypei(o.tile_type_ice)||(this.list.push({t:1,b:n,md:t}),!1):(this.list.push({t:0,pos:e}),!1)},this.compare=function(e,i){var n=i.block;return!n||n.isType(t.COMPTPS)}};l.COMPTPS=[1,4,6,8,o.tile_type_ice],c.ICECRCMD={id:o.id_tile_ice,lay:"block"},c.ice=function(t,e,i){if(t.h_ice)return t.h_ice=!1;for(var n,s=new l(t.getMoves()),r=0;r<i.length;r++)n=t.btom(i[r]),c.__sameMData(t,n,s);if(s.list.length<1)return!1;var h=[],u=s.list;for(r=0;r<u.length;r++)(0==u[r].t||u[r].b.isTypei(o.tile_type_cube))&&h.push(u[r]);if(h.length<1)return!1;var d=a.randArray(h);return 1==d.t?t.gChgTo(e,d.md,o.id_tile_ice,1):t.gCreate(e,d.pos,c.ICECRCMD),t.goals().chgLogicTarget(o.id_tile_ice,1),!0},c.timeBomb=function(t,e,i){for(var n=t.getMoves()+1,o=0;o<i.length;o++)i[o].subMoves(e,n)<1&&(t.gDestroy(e,i[o]),e.needbalance=2);return!1},c.chgc=function(t,e,i){for(var n=t.getGupColors(),s=void 0,c=0;c<i.length;c++)s=a.randArray(n),i[c].getColor()!=s&&(i[c].setColor(s),e.cmds.push({cmd:o.com_dtchg,datas:{gid:i[c].gid,chgc:s}}));return!0},c.convey=function(t,e,i){if(!i)return!1;for(var n,a,s=[],r=0;r<i.length;r++)void 0==i[r].getExdt("cancov")&&0!=(n=i[r].getCovDir())&&(a=c.__chkConveyPos(t,i[r].getx(),i[r].gety(),n),s.push({block:i[r].block,md:a}));for(r=0;r<s.length;r++)s[r].block?s[r].md.setBlock(t,e,s[r].block,o.com_conveyor):s[r].md.block=null;return!0},c.__chkConveyPos=function(t,e,i,n){var o=e,a=i;switch(n){case 1:(a=i+1)>=t.ycount&&(a=0);break;case 2:(o=e+1)>=t.xcount&&(o=0);break;case 3:(a=i-1)<0&&(a=t.ycount-1);break;case 4:(o=e-1)<0&&(o=t.xcount-1);break;default:return null}var s=t.getMapData(o,a);return s&&s.invalid()?s:c.__chkConveyPos(t,o,a,n)},c.maxEnergy=function(t){return o.MAX_ENERGY+(t.mapid>50?0:5)},c.swap=function(t,e,i){for(var o,a,s=new function(){this.finded=function(t){return this.list=[],!0},this.compare=function(t,e){return e.block&&e.block.isTile()&&this.list.push(e),!1}},l=new r,h=0;h<i.length;h++)if(!((o=t.btom(i[h])).haveCage()||(l.IsAndOpen(o.getx(),o.gety()),c.__sameMData(t,o,s),s.list.length<1))){n.upset(s.list);for(var u=0;u<s.list.length;u++)if(a=s.list[u],l.IsAndOpen(a.getx(),a.gety())){o.setBlock(t,e,a.block),a.setBlock(t,e,i[h]);break}}},c.cannon=function(t,e,i,a){for(var c=void 0,r=void 0,l=t.cannon.length-1;l>=0;l--)if(c=t.cannon[l],null==a||c.gid==a){r=c.exdt;var h=void 0;if(i=n.upset(i),r.cannon%r.fireCount==0){h=[];for(var u=0;u<r.fireCount;u++)h.push(i.pop())}if(e.cmds.push({cmd:o.com_dtchg,datas:{gid:c.gid,count:r.cannon,chg:h}}),h){for(u=0;u<h.length;u++)t.gChgTo(e,h[u],o.id_tile_beachball,1);h=void 0}t.cannon.splice(l,1),r.crtItems=!1,s.log("Dispel.cannon: "+c.gid)}},c.openCr=function(t,e,i,n){if(t.openCr)for(var o=t.openCr.length-1;o>=0;o--)c._openCr(t.openCr[o],t,e,i,n)&&t.openCr.splice(o,1)},c._openCr=function(t,e,i,n,a){var r=t.block;if(null!=a&&r.gid!=a)return!1;var l=t.crNum,h=t.crTileId,u=t.gup,d=t.lay;l||(l=1),h||(h=o.id_tile_paopao),u||(u=o.TILE_LAYER_BUFF),d||(d="bub");for(var f="bub"==d,g=null,p=null,_=-1!=o.chg_target_num.indexOf(r.meta.id),m=0,v=0;v<l;v++)if((_||!c.isTargetAndFull(h,e))&&(g=null!=r.exdt.defPos?c.getDefBlock(e,v,r,f):c.getRandBlock(e,n,f))&&g.invalid()){p=g.block;var E=g.getPos();f||null==p?e.gCreate(i,{x:E.x,y:E.y},{id:h,gup:u,lay:d}):e.gChgTo(i,p,h),++m}return _&&e.goals().chgLogicTarget(h,m),r.exdt.crtItems=!1,s.log("Dispel._openCr: "+r.gid),!0},c.getRandBlock=function(t,e,i){var a=!1,s=null,c=null,r=e[o.tile_type_cube];0==r.length&&(r=e[0],a=!0),n.upset(r);for(var l=0;l<r.length&&(a?s=r[l]:(c=r[l],s=t.getMapData(c.pos.x,c.pos.y)),i&&s.haveBubble());l++)s=null;return s},c.getDefBlock=function(t,e,i,n){var o=i.pos,a=i.exdt.defPos,s=t.getMapData(o.x+a[2*e],o.y+a[2*e+1]);return n&&c.cannotBubble(s)&&(s=null),s},c.cannotBubble=function(t){if(!t)return!1;if(t.haveBubble())return!0;var e=t.block;return!(!e||e.canDown()||-1==o.TILE_CANNOT_DISBYROCKER.indexOf(e.meta.type)&&!e.isG4())},c.isTargetAndFull=function(t,e){var i=e.goals().getTargetNum(t);if(-1!=i){var n=e.getTileByTileId(t);if(null!=n&&n>=i)return!0}return!1},c.isTargetAndCreated=function(t,e){},c.candy=function(t,e,i){var n=i[0];if(n){var o=t.goals().isTarget(n.meta);-1!=o&&c._candy(n,e,i,o<1?1:0)}},c._candy=function(t,e,i,n){if(t.exdt.cover!=n)for(var a=0;a<i.length;a++)(t=i[a])&&(t.exdt.cover=n,e.cmds.push({cmd:o.com_dtchg,datas:{gid:t.gid,cover:n}}))},c.rotor=function(t,e,i){for(var n,a=t.getMoves(),s=0;s<i.length;s++)(n=i[s]).crtm!=a+1&&(n.exdt.rdir++,e.cmds.push({cmd:o.com_dtchg,datas:{gid:n.gid,rdir:n.exdt.rdir}}))},c.late_destroy=function(t,e,i){t.calc_type_count();var o,a=t.getTileOfTpCnt(),s=[];n.upset(a);for(var c=0;c<i.length;c++){o=i[c].exdt.dchg;for(var r=0;r<3;r++)a.length>0&&s.push(a.pop());if(s)for(r=0;r<s.length;r++)t.gChgTo(e,s[r],o,1);t.btom(i[c])._destroy(t,e,{chg:s}),s=[]}},c.copter=function(t,e,i){for(var n=0;n<i.length;n++)i[n].copter(t,e)},c.mussel=function(t,e,i){for(var n=0;n<i.length;n++)i[n].mussel(t,e)},c.nextColor=function(t,e,i){for(var n=0;n<i.length;n++)i[n].nextColor(t,e)},c.tarFinishDel=function(t,e,i){var n=i[0].exdt;if(0==t.goals().isTarget(n.goaln))for(var o=0;o<i.length;o++)t.gDestroy(e,i[o])},cc._RF.pop()},{GameCommon:"GameCommon",GameLogic:"GameLogic",GameTools:"GameTools",MathUtils:"MathUtils",n7:"n7"}],ErrorLog:[function(t,e,i){cc._RF.push(e,"4e424AgRjhMfanBCykZF+pZ","ErrorLog");var n=t("n7"),o=(t("N7HttpToJava"),t("HttpRequest")),a=t("N7Jsonp"),s=t("GameTools"),c=function(){this.errorUrl=null,this.type=null,this.channel=null,this.gameId=0,this.version=null,this.dinfo=null,this.user=null,this.sex=0,this.openid=null},r=c.prototype;r.uploadErr=function(t){t&&t.error&&c.errorCount++<50?this.reportError("error",t.error.stack,null):t&&t.message&&c.errorCount++<50&&this.reportError("error",t.message,null)},r.uploadErrAndroid=function(t){c.errorCount++<50&&this.reportError("error",t,null)},r.sendLog=function(t,e,i){c.HttpRequestSend("http://"+this.errorUrl+e,t,function(){})},r.reportError=function(e,i,o){n.log("ErrorLog.reportError: "+i),o=o||{};var a=Date.now(),r=new Date(a+c.deltaTime);o.date=encodeURIComponent(r.toLocaleString()),n.log("ErrorLog.reportError.1"),o.etype=e,o.os=cc.sys.os,o.isNative=cc.sys.isNative,o.version=this.version,o.msg=encodeURIComponent(i),n.log("ErrorLog.reportError.2");try{o.baseURI=null!=document?document.baseURI:""}catch(t$0){}o.dump=s.dump();var l=t("UserDataV2").get("pid","user");o.nkname=encodeURIComponent(l),n.log("ErrorLog.reportError.3");var h=c.getDay(r);o.rdate=h,this.sendLog(o,this.type+"error-"+h.substring(0,6)+"/"+e+"/",e)},r.reportOneMin=function(t,e){var i={};i.step=t,this.reportError("onemin",e,i)},r.addStat=function(t,e){var i={};e.writeToObj(i),this.reportError("statistics",t,i)},r.initError=function(){cc.sys.isNative?window.__errorHandler=function(t,e,i,o){var a=JSON.stringify({file:t,line:e,msg:i,error:o});n.log("ErrorLog.__errorHandler: "+a+",ErrorLog.errorCount: "+c.errorCount),this.uploadErrAndroid(a)}.bind(this):window.addEventListener("error",this.uploadErr.bind(this))},c.initRegDate=function(t){c.regDate=t?c.getDay(new Date(1E3*parseInt(t))):""},c.init=function(t,e,i,o,a){a||cc.sys.os!=cc.sys.OS_WINDOWS&&cc.sys.os!=cc.sys.OS_OSX?(n.log("ErrorLog.init: type: "+t+",channel: "+e+",gameId: "+i+",version: "+o),c.getHttpRequest(),(c.I=c.I||new c).channel=e,c.I.type=t,c.I.gameId=i,c.I.version=o,window.location.protocol,c.I.errorUrl=c.ErrorUrlHttp,c.I.initError()):n.log("ErrorLog.init: OS_WINDOWS || OS_OSX \u4e0d\u521d\u59cb\u5316")},c.initUser=function(t,e){c.I&&(c.I.user=t,c.I.openid=e)},c.getDay=function(t){var e=t.getMonth()+1,i=t.getDate();return t.getFullYear()+""+(e<10?"0"+e:e)+(i<10?"0"+i:i)},c.deltaTime=0,c.regDate=null,c.isinit=!1,c.ErrorUrlHttp="39.106.153.206:9000/",c.I=null,c.errorCount=0,c.HTTPJSON=null,c.testSend=function(t){c.I||c.init("test",996,10086,"0.0.0.1",!0),c.I.uploadErrAndroid(t)},c.testError=function(){null.xx=1},c.httpSend=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n.log("ErrorLog.httpSend: "+e);var s=new XMLHttpRequest;if(s.open(i,t,!0),a)for(var c=0;c<a.length;c++)s.setRequestHeader(a[c++],a[c]);else e&&"string"==typeof e?s.setRequestHeader("Content-Type","application/json"):s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");return s.responseType="arraybuffer"!==o?"text":"arraybuffer",s.onerror=function(t){n.log("onerror")},s.onabort=function(t){n.log("onabort")},s.onprogress=function(t){n.log("onprogress")},s.onload=function(t){n.log("onload")},s.send(e),s},c.getHttpRequest=function(){return c.HTTPJSON||(c.HTTPJSON=cc.sys.isNative?a:o),c.HTTPJSON},c.toString=o.instance().toString,c.HttpRequestSend=function(t,e,i){n.log("ErrorLog.HttpRequestSend: "+t+c.toString(e)),c.HTTPJSON["do"](t,e,i)},e.exports=c,cc._RF.pop()},{GameTools:"GameTools",HttpRequest:"HttpRequest",N7HttpToJava:"N7HttpToJava",N7Jsonp:"N7Jsonp",UserDataV2:"UserDataV2",n7:"n7"}],FBLog:[function(t,e,i){cc._RF.push(e,"ba014S64DJC34oLMtWUUtiu","FBLog");var n=t("n7"),o=cc.Class({login:function(t,e,i,o){n.log("FBLog login:"+t+","+e+","+i+","+o),n.window.FBInstant&&n.window.FBInstant.logEvent("login",0,{accountId:t,level:i,accountType:o})},setLevel:function(t){n.log("FBLog levelup "+t),n.window.FBInstant&&n.window.FBInstant.logEvent("levelup",0,{level:t})},onReward:function(t,e,i){n.log("FBLog reward "+t+","+e+","+i),n.window.FBInstant&&n.window.FBInstant.logEvent("onReward",0,{chg:t,cu:e,why:i})},onMissionBegin:function(t,e){n.log("FBLog onMissionBegin "+t+","+e),t>20&&t%10!=0||n.window.FBInstant&&n.window.FBInstant.logEvent("stage"+t,1)},onMissionCompleted:function(t,e){n.log("FBLog onMissionCompleted "+t+","+e),t>20&&t%10!=0||n.window.FBInstant&&n.window.FBInstant.logEvent("cplstage"+t,1)},onMissionFailed:function(t,e){n.log("FBLog onMissionFailed "+t+","+e),n.window.FBInstant&&n.window.FBInstant.logEvent("failedstage"+t,1)},onEvent:function(t,e){if(n.log("FBLog Event "+t+":"+JSON.stringify(e)),n.window.FBInstant){switch(t){case "AD_RewardedVideo":return void n.window.FBInstant.logEvent("ad_show_reward",1,e);case "AD_RewardedVideo_OK":return void n.window.FBInstant.logEvent("ad_show_rewardsuccess",4,e);case "FristUI2":return void n.window.FBInstant.logEvent("initializeAsync",1);case "FristUI3":return void n.window.FBInstant.logEvent("loadAssets",1);case "FristUI4":return n.window.FBInstant.logEvent("loadComplete",1),void n.window.FBInstant.logEvent("LoginUI",1);case "FristUI5":return void n.window.FBInstant.logEvent("getData",1);case "FristUI6":return void n.window.FBInstant.logEvent("getDataSuccess",1);case "guide":return void n.window.FBInstant.logEvent("guide"+e.guide,1);case "share":return void n.window.FBInstant.logEvent("share"+e.id,1)}n.window.FBInstant.logEvent(t,0,e)}},onItemPurchase:function(t,e,i){n.log("FBLog purchase "+t+","+e+","+i);var o={item:t,itemNumber:1,cu:i};n.window.FBInstant&&n.window.FBInstant.logEvent("onItemPurchase",0,o)},onItemUse:function(t,e,i){n.log("FBLog useItem "+e+","+i);var o={item:e,itemNumber:1};n.window.FBInstant&&n.window.FBInstant.logEvent("onItemUse",0,o)}});e.exports=o,cc._RF.pop()},{n7:"n7"}],FamNet:[function(t,e,i){cc._RF.push(e,"4cb34mp25dH14b/Wkz05pJs","FamNet");var n=t("GameEvent"),o=t("SdkIns"),a=t("GameTools"),s=t("GameConfig"),c=t("MathUtils"),r=t("StringUtils"),l=t("n7"),h=function e(){var i="HttpRequest";cc.sys.isNative&&(i="N7HttpToJava"),i=t(i),this.send=function(t,n,a){var s=this.createp(n);o.instance().isRequest()?o.instance().request(this.getSvIp()+"/"+t,s,function(i){var o=e.__chkRespone(i,t,n);o&&a(o.data?o.data:o)}):i["do"](this.getSvIp()+"/"+t,s,function(i){var o=e.__chkRespone(i,t,n);o&&a(o.data?o.data:o)})},this.sendp=function(t,e,n){var a=this.createp(e);o.instance().isRequest()?o.instance().request(this.getSvIp()+"/"+t,a,n):i["do"](this.getSvIp()+"/"+t,a,n)}};e.exports=h,h.prototype.getSvIp=function(){return this.svip||(this.svip=s.get("svip","http://127.0.0.1/index.php"),this.svip.indexOf("http")<0&&(this.svip="http://"+this.svip)),this.svip},h.FORGE_CODE="abcde[]fghijklmn123456789opqr{}styvwxyz",h.KEY_CODE="agk41tf2y3",h.prototype.createp=function(t){var e=this.p;if(!e){var i=o.instance();(e=this.p={}).version=s.get("ver","0.9.1"),e.pf=i.getPf(),e.openid=i.getOpenId()}var n=t=JSON.stringify(t);if(this.token){this.msgid++;var a=h.KEY_CODE+this.msgid;if(l.log("msgid:"+this.msgid+" info:"+t),n=r.encrypt(t,this.token,a))delete e.e;else{n=t;for(var u=h.FORGE_CODE,d="",f=c.randInt(10,16);f>=0;f--)d+=u.charAt(c.randInt(0,u.length));e.e=r.encrypt(d,this.token,a)}}else l.log("not:token:"+n);return o.instance().netEncode()?e.content=r.encode(n):e.content=n,e},h.prototype.loginDt=function(t){this.p.pid=t.pid,this.NU=t.NU,this.token=t.token,this.msgid=0,this.swap_token_tm=a.cutm()},h.getNU=function(){return h.instance().NU},h.pid=function(){return h.instance().p?h.instance().p.pid:"101"},h.instance=function(){return h.__ins||(h.__ins=new h),h.__ins},h.__chkRespone=function(t,e,i){var n=t[0];return h.__chkCode(n)?null:n},h.__svrError=function(e,i){t("SdkIns").instance().upLogLeast("get","serverdata_failed","",JSON.stringify(e),i)},h.__chkCode=function(t){if(!t||void 0==t.code)return h.__svrError(t,!0),n.EVENT_SHOW_DISCONNET(),!0;if(408==t.code)return h.__svrError(t),n.EVENT_LOGIN_LOG("Network timeout, please check the network or try again later!"),!0;if(-9==t.code)return h.__svrError(t,!0),n.EVENT_SHOW_DISCONNET(),l.CS&&(l.CS=!1,l.log("\u7f51\u7edc\u65ad\u5f00"),n.EVENT_NET_STATU(!1)),!0;if(l.CS||(l.CS=!0,l.log("\u7f51\u7edc\u6062\u590d"),n.EVENT_NET_STATU(!0)),-3==t.code){n.EVENT_LOGIN_LOG("This account is logged in elsewhere! Please log in again.");var e={fo:h.logout,closefo:h.logout,title:"hintt",lab:"login.elselogin",yes:"login.again"};return n.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:e}),!0}if(-1==t.code){var i={fo:h.logout,closefo:h.logout,title:"hintt",lab:"login.invalid",yes:"login.again"};return n.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:i}),!0}return!1},h.logout=function(){TDLog.fEvent("logout",{count:1}),o.instance().logout(),n.EVENT_LOGOUT(),h.__ins=void 0},h.info=function(t){var e=t||{};return o.instance().info(e),e},h.account_login=function(t){var e=h.instance(),i=o.instance(),a=i.getLogin(h.info());n.EVENT_LOGIN_LOG("Login Game Server"),TDLog.Event("login",{count:1});var s=t;l.log("account_login:"+JSON.stringify(a)),e.sendp("account/login",a,function(t){var o=t[0];o&&(o.code?-9==o.code?n.EVENT_LOGIN_LOG("Network abnormalities, please check the network!"+o.msg):i.loginErr(o)||n.EVENT_LOGIN_LOG("Network abnormalities:"+o.code):(o=o.data,TDLog.Event("LoginOk",{count:1}),e.loginDt(o),i.logined(o),h.user_init(s)))})},h.account_swap=function(){var t=h.instance();t.sendp("account/swap",h.info(),function(e){t.loginDt(e)})},h.isNet=function(){return l.CS},h.user_init=function(e){n.EVENT_LOGIN_LOG("Getting User Data");var i=o.instance(),s=i.ubase_info(h.info()),r=o.urlp("ivtpid");r&&(s.inviter=r);var u=e,d=t("UserDataV2");h.instance().sendp("user/get",s,function(e){e=e[0];var o=h.pid();if(e){if(e.code&&408!=e.code)return n.EVENT_LOGIN_LOG("Failure to obtain user data:"+e.code),TDLog.Event("user_get_error",{code:"c"+e.code}),void h.__chkCode(e);n.EVENT_LOGIN_LOG("Successful access to user data");var s=t("AccessUD"),r=s.JReadv2(o),f=e.data,g=c.geti(r,"order"),p=c.geti(f,"order");p>=g?(n.EVENT_LOGIN_LOG("Using network data"),d.init(f,o,i.getPf())):(n.EVENT_LOGIN_LOG("Using local data"),a.copy_keys(r,f,["nkname","sex","icon"]),d.init(r,o,i.getPf())),g!=p&&(p>g?s.update(o,f):d.saveAll(r,f)),u&&u()}else l.log("famenet user/get d is null")})},h.user_set=function(t,e){if(h.instance().token){var i=h.info(t);h.instance().sendp("user/set",i,function(t){t=t[0],h.__chkCode(t),e&&e(t)})}else e({code:-10,msg:"not net"})},h.unified_send=function(t,e,i){if(l.CS){var n=o.instance().ubase_info(h.info(e));h.instance().send(t,n,function(t){i&&i(t)})}},h.pay=function(e,i,n){if(l.log("FamNet.pay:"+e),l.CS){var a=h.info();a.cPoint=e;var s=o.instance(),c=s.getPay(a,n);h.instance().sendp("Order/pay",c,function(n){if(n=n[0])if(n.code<0)l.log("order_buy error:"+n.code);else{var o=n.data;o&&(o.cu_gold=t("UserLogic").get("gold"),o.pf=s.getPf(),t("TDLog").pay_cr_orderid(o)),n.cpi=e,s.pay(n,i)}else l.log("order_buy r is null")})}else i&&i({code:-96})},h.payLog=function(t,e){var i=h.info(t);h.instance().sendp("N7Log/recharge",i,function(t){e&&e(t[0])})},h.chgNkn=function(e,i){var n=h.info(e);h.instance().sendp("user/chgnkn",n,function(e){var n=e[0];0==n.code&&(t("UserDataV2")._set_("nkname",n.data.nkname,"user"),t("GameEvent").EVENT_UDATA_CHG({n:"nkname",v:n.data.nkname})),i&&i(n)})},cc._RF.pop()},{AccessUD:"AccessUD",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",MathUtils:"MathUtils",SdkIns:"SdkIns",StringUtils:"StringUtils",TDLog:"TDLog",UserDataV2:"UserDataV2",UserLogic:"UserLogic",n7:"n7"}],FillBackground:[function(t,e,i){cc._RF.push(e,"1379a1e0lFFLpaY53RH/A0b","FillBackground");var n=t("GameEvent");cc.Class({"extends":t("UILayer"),properties:{},onLoad:function(){this.baseWidth=this.node.width,this.baseHeight=this.node.height,n.on(n.EVENT_CANVAS_RESIZE,function(){this.resetSize()},this)},onDestroy:function(){n.off(this)},resetSize:function(){if(this._super(),this.fullscreen){var t=(this.targetScreen||cc.Canvas.instance).getContentSize(),e=this.baseHeight/t.height;this.node.scale=e}}}),cc._RF.pop()},{GameEvent:"GameEvent",UILayer:"UILayer"}],Frame:[function(t,e,i){cc._RF.push(e,"8e0ear7T/BOrp4Ih4S1fwA7","Frame");var n=t("CoolArray"),o=cc.Class({ctor:function(){this.event_listener={}},properties:{},statics:{s_instance:null,instance:function(){return null===o.s_instance&&(o.s_instance=new o),o.s_instance},on:function(t,e,i,n){o.instance().on(t,e,i,n)},once:function(t,e,i,n){o.instance().once(t,e,i,n)},off:function(t,e){o.instance().off(t,e)},broadcastEvent:function(t){o.instance().broadcastEvent(t)}},on:function(t,e,i,n){this.findEvent(t).push({call:e,obj:i,capture:n})},once:function(t,e,i,n){this.findEvent(t).push({call:e,obj:i,capture:n,once:!0})},off:function(t,e){var i=this;if(void 0!==e){var n=this.findEvent(e);n.forEach(function(e,i){if(e&&e.obj===t)return n.remove(i),!0},this)}else for(var o in this.event_listener)!function(e){var n=i.event_listener[e];n.forEach(function(e,i){if(e&&e.obj===t)return n.remove(i),!0},i)}(o)},broadcastEvent:function(t){var e=this.findEvent(t.getEventName()),i=[];for(var n in e.forEach(function(e,n){if(null!=e){if(e.once&&i.push(n),cc.isValid(e.obj)){var o=e.call.call(e.obj,t);if(t.isStopped()||o)return!0}return!1}},this),i)e.remove(i[n])},findEvent:function(t){var e=this.event_listener[t];return void 0!==e&&null!==e||(e=n.createArray(),this.event_listener[t]=e),e}});e.exports=o,cc._RF.pop()},{CoolArray:"CoolArray"}],FristUILoadingBar:[function(t,e,i){cc._RF.push(e,"49cf9/j4v1KIKZEvk/RGTGi","FristUILoadingBar");var n=t("MathUtils"),o=t("GameEvent"),a=t("GameTools"),s=t("n7");cc.Class({"extends":cc.Component,properties:{message:{type:cc.Label,"default":null}},onLoad:function(){this.scheduleOnce(function(){this.__onload()},0)},__onload:function(){this.msg_tp=0,this.msg_loading="",this.msg_tips="",this.tips(),this.log("Resources loading ...."),o.on(o.EVENT_LOGIN_LOG,function(t){var e=t.getUserData();this.log(e.msg),e.log&&this.chg_msg_tpye(1)},this),this.message.node.on("touchstart",function(t){this.chg_msg_tpye()},this)},onDestroy:function(){o.off(this)},log:function(t){s.log(t),this.msg_loading=t,1==this.msg_tp&&(this.message.string=t)},tips:function(){var t="fuitips.t"+n.randInt(1,5);this.msg_tips=a.i18ns(t),0==this.msg_tp&&(this.message.string=this.msg_tips),this.scheduleOnce(function(){this.tips()},3)},chg_msg_tpye:function(t){this.msg_tp=void 0==t?1-this.msg_tp:t;var e=this.message.node;switch(this.msg_tp){case 0:this.message.string=this.msg_tips,e.getComponent(cc.LabelOutline).color="#284D13";break;case 1:this.message.string=this.msg_loading,e.getComponent(cc.LabelOutline).color="#58031B"}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",MathUtils:"MathUtils",n7:"n7"}],GALog:[function(t,e,i){cc._RF.push(e,"13a56iQK1VLZI/N335B1/kG","GALog");var n=cc.Class({event:function(t,e,i,n){var o={};void 0!=e&&(o.event_category=e),void 0!=i&&(o.event_label=i),void 0!=n&&(o.value=n),window.gtag("event",t,o)},login:function(t,e,i,n){var o={accountId:t,level:i,accountType:n,accountName:e};window.gtag("event","login",{method:n,event_label:JSON.stringify(o)})},setLevel:function(t){this.event("level"+t,"level","levelup")},onReward:function(t,e){this.event("reward_"+e,"reward",t)},onMissionBegin:function(t){this.event("begin_"+t,"mission")},onMissionCompleted:function(t){this.event("complete_"+t,"mission")},onMissionFailed:function(t,e){this.event("fail_"+t,"mission",e)},onEvent:function(t,e){this.event("event_"+t,"event",e)},onItemPurchase:function(t){this.event("purchase_"+t.item,"item",t.itemNumber)},onItemUse:function(t){this.event("use_"+t.item,"item",t.itemNumber)}});e.exports=n,cc._RF.pop()},{}],GBlock:[function(t,e,i){cc._RF.push(e,"d8e05xqyYNFvbKNarW14Wh9","GBlock");var n=t("n7"),o=t("Prop"),a=t("StringUtils"),s=t("MathUtils"),c=t("GameCommon"),r=t("GameTools"),l=t("JsonMetaCache"),h=0,u=function(t,e,i,n){this.gid=t,this.pos=cc.p(e,i),this.name=t,this.meta=null,this.color=0,this.gn=0,this.crtm=n,this.exdt=null,this.prop=!1,this.juuid=++h};u.prototype.getx=function(){return this.pos.x},u.prototype.gety=function(){return this.pos.y},u.prototype.getPos=function(){return cc.p(this.pos.x,this.pos.y)},u.prototype.cpos=function(){return this.getPos()},u.prototype.setBlock=function(t){return this.setData(t.meta,t.ext),t.gn&&(this.gn=t.gn),this.unDown=!1,this.record("setBlock:"+this.gid+"_"+this.getId()+"_xy:"+this.getx()+"_"+this.gety()+"_"+this.gn+"_"+this.crtm),this},u.prototype.isToy=function(){return this.isTypei(9)},u.prototype.getMeta=function(){return this.meta},u.prototype.appendExdt=function(t){if(t){var e=a.isStr(t);if(!e||(t=a.toJson(t)))for(var i in this.exdt||(this.exdt={}),t){if(this.exdt[i]=t[i],e&&t[i].indexOf("-")>0){var n=t[i].split("-");"rand"==n[0]&&(this.exdt[i]=s.randInt(1*n[1],1*n[2]+1))}if("g4"==i){var o=null==t[i][0]?t[i]:t[i][0],c=null==t[i][1]?o:t[i][1];this.exdt[i]={},this.exdt[i].w=o,this.exdt[i].h=c}}}},u.prototype.setData=function(t,e){this.meta=t,this.meta&&(this.color=t.color,this.exdt={},this.prop=r.isProp(t),this.prop||(this.tile=this.isType(c.TILE_TYPES)),this.appendExdt(t.exdt),this.appendExdt(e))},u.prototype.getDef=function(t){return this.meta[t]},u.prototype.getId=function(){return this.meta.id},u.prototype.getGId=function(){return this.gid},u.prototype.setExdt=function(t,e){return this.exdt||(this.exdt={}),this.exdt[t]=e,this},u.prototype.getExdt=function(t,e){return t?this.exdt&&this.exdt[t]?this.exdt[t]:e:this.exdt},u.prototype.getExdti=function(t,e){return e||(e=0),this.exdt&&this.exdt[t]?1*this.exdt[t]:e},u.prototype.setPos=function(t,e){this.pos.x=t,this.pos.y=e,this.record("setpos:"+t+"_"+e)},u.prototype.record=function(t){this.r+="["+t+"]"},u.prototype.getType=function(){return this.meta.type},u.prototype.getType2=function(){return this.prop?6:this.tile?1:this.getType()},u.prototype.isTypei=function(t){return this.getType()==t},u.prototype.isType=function(t){for(var e=this.getType(),i=0;i<t.length;i++)if(e==t[i])return!0;return!1},u.prototype.canBeHit=function(){return this.getDef("behit")},u.prototype.cannotBeItemHit=function(){return 2==this.exdt.mussel},u.prototype.isProp=function(){return this.prop},u.prototype.isTile=function(){return this.isTypei(1)},u.prototype.isBubble=function(){return this.isTypei(5)},u.prototype.isCage=function(){return this.isTypei(2)},u.prototype.isRocker=function(){return this.isTypei(c.tile_type_rocker)},u.prototype.cageCanRoundHit=function(){return 1==this.exdt.canRoundHit},u.prototype.isIce=function(){return this.isTypei(7)},u.prototype.isG4=function(){return null!=this.getExdt("g4")},u.prototype.getG4=function(){return this.getExdt("g4")},u.prototype.isUsed=function(){return this.used},u.prototype.getColor=function(){return this.color},u.prototype.setColor=function(t){this.color=t},u.prototype.getGoal=function(){return this.getDef("goalName")},u.prototype.canMagicCube=function(){return this.getDef("canMagicCube")},u.prototype.unFindAround=function(){return this.getDef("onNeighborHit")},u.prototype.canNeighborHit=function(t){switch(this.getDef("onNeighborHit")){case 1:return!0;case 2:return t.color==this.getColor();case 3:return s.inArr(this.exdt.colors,t.color)>=0}return!1},u.prototype.compare=function(t){return t&&t.getType2()==this.getType2()&&t.getColor()==this.getColor()},u.prototype.compare_color=function(t){return t&&t.getColor()==this.getColor()},u.prototype.subMoves=function(t,e){var i=this.exdt;return i&&i.movesLeftToLost?this.crtm==e?1:(i.movesLeftToLost--,this.record("subMoves:"+this.gid+" movesLeftToLost:"+i.movesLeftToLost),t.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),movesLeftToLost:i.movesLeftToLost}}),i.movesLeftToLost):1},u.prototype.onCreate=function(t,e,i,n){this.record("oncr_gid:"+this.gid+"_id:"+this.getId());var o={cmd:c.com_create,datas:{tile:this,grid:i,gn:n,exdt:this.exdt}};e.cmds.push(o),t.lockGblock(this.gid)},u.prototype.onDestroy=function(t,e,i){if(this.desmv=t.getMoves(),this.record("ond1_"+this.getId()),t.checkBlockLock(this.gid))return!1;var n=this.exdt;if(n){if(null!=n.randColor&&e.meta.type==c.tile_type_cube&&n.randColor!=e.meta.color)return!1;if(null!=n.curColor){var o=e.meta.type==c.tile_type_cube;if(n.curColor==c.color_full){var a=o?e.meta.color:t.randMapColor().meta.color;return n.curColor=a,e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),curColor:n.curColor}}),!1}if(null==e.uuitem&&o&&e.meta.color!=n.curColor)return!1}if(!e.forceDestroy&&null!=n.unique){null==n.uniqueObj&&(n.uniqueObj={});var l=n.uniqueObj[e.uniqueId];if(null==l&&(l=-1),++l,n.uniqueObj[e.uniqueId]=l,l>=n.unique)return!1}if(n.colors){var h=-1;if(r.isProp(e.meta)||e.meta.type==c.tile_type_rocker||null!=e.uuitem){if(h=s.randInt(0,n.colors.length),-1==n.colors[h])for(var u=0;u<n.colors.length;u++)if(-1!=n.colors[u]){h=u;break}}else h=n.colors.indexOf(e.meta.color);if(-1==h||-1==n.colors[h])return!1;n.colors[h]=-1,this.record("ond_dtchg:"+e.meta.color);var d={cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),color:h}};for(n.goaln&&t.setTarFlagToCmd(e,d,n.goaln),e.cmds.push(d),u=0;u<n.colors.length;u++)if(-1!=n.colors[u])return!1}if(null!=n.chgCanDown&&(n.canDown=0|n.chgCanDown),n.count&&(n.count=1*n.count-1,d={cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),count:n.count,chg:1}},n.goaln&&t.setTarFlagToCmd(e,d,n.goaln),e.cmds.push(d),n.count>0))return!1;if(n.merge&&e.uitem)return t.gChgTo(e,this,n.merge),!1;if(n.undes)return t.statu(0)&&this.pushCmds(t,e,{cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),count:1}}),!1;if(void 0!=n.cannon){n.cannon++;var f=!1;return n.cannon%n.fireCount==0&&-1==t.cannon.indexOf(this)&&(t.cannon.push(this),f=!0),e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,count:n.cannon,chg:[],crtItems:f}}),!1}if(void 0!=n.openCr&&(n.crCount||(n.crCount=0),n.crCount++,f=!1,n.crCount>=n.openCr&&(f=!0,n.crCount=0,t.openCr.push({block:this,crNum:n.crNum,crTileId:n.crTileId,gup:n.gup,lay:n.lay})),e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,count:n.crCount,crtItems:f}}),null==n.del))return!1;if(n.dchg)return t.lated||(t.lated=[]),t.lated.push(this),!1;if(!e.forceDestroy&&null!=n.mussel&&2==n.mussel)return!1;if(null!=n.copter&&--n.copter>0)return n.hit=null!=e.uuitem?0:1,e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),copter:n.copter}}),!1;if(null!=n.light&&!this.lightBehit(t,e))return!1;if(null!=n.tarFinishDel&&(d={cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos()}},n.goaln&&t.setTarFlagToCmd(e,d,n.goaln),e.cmds.push(d),0!=t.goals().isTarget(n.goaln)))return!1}var g=this.meta.next;if(g&&g.length>0){var p=g.split("\x3d");switch(p[0]){case "id":return t.gChgTo(e,this,1*p[1],1),!1;case "gup":if(g=t.randByGup(p[1])){var _=g.id;if(null!=_)return this.record("ond_next:"+_),t.gChgTo(e,this,_),!1}}}return this._destroy(t,e)},u.prototype._destroy=function(t,e,i){if(this.destroyed)return!1;this.record("ond2_:"+this.getGId()+"_"+this.getId()+"_xy:"+this.getx()+"_"+this.gety());var o={cmd:c.com_destroy,meta:this.meta,datas:{gid:this.getGId(),grid:this.cpos()}};return i&&r.copy_keys(o.datas,i),this.pushCmds(t,e,o,!0),e.total++,this.isIce()&&(n.isDebug&&n.log("ice destroy!"),t.h_ice=!0),this.destroyed=!0,this.desOrChg(t),!0},u.prototype.desOrChg=function(t){1==this.exdt.randGift&&(t.randGift=!0)},u.prototype.getTarData=function(){return{gid:this.gid,hasCollectCount:0|this.exdt.hasCollectCount,allCollectCount:this.exdt.collectObj[1]}},u.prototype.onDowned=function(t,e,i){var n=this.cpos();e.cmds.push({cmd:c.com_down,datas:{gid:this.gid,grid:i,tar:n}}),this.chkToyd(t,e),this.mvtm=t.getMoves(),this.record("ondown_"+i.x+"_"+i.y+"_to:"+n.y),t.lockGblock(this.gid,c.LOCK_COM_DOWN)},u.prototype.onChgTo=function(t,e,i,n){var o=i.id;o||(o=1*i,i=null);var a=l.tile(o);if(!a)return console.error("onChgTo not tile def "+o),null;this.desOrChg(t);var s=this.getMeta(),r=this.getGoal(),h=this.getPos();this.crtm=t.getMoves(),this.setBlock({meta:a,ext:i}),this.record("onChgTo:"+this.getId()+"_crtm:"+this.crtm+"_id:"+o);var u={cmd:c.com_chgto,meta:s,datas:{gid:this.gid,id:this.getId(),grid:h,exdt:this.exdt}};return n||t.setTarFlagToCmd(e,u,r,!0),this.isIce()?e.cmds.unshift(u):e.cmds.push(u),this.getExdti("chgdes")>0&&t.gDestroy(e,this),t.lockGblock(this.gid),u},u.prototype.onUse=function(t,e){var i,n={cmd:c.com_useitem,datas:{dur:this.getTipsByMerge(),gid:this.gid,id:this.getId(),exdt:this.exdt}};this.pushCmds(t,e,n),this.used=!0,this.record("onuse:"+this.getId()+"_xy:"+this.getx()+"_"+this.gety()),t.statu(0)?(i=this.getExdti("eng",0))>0&&(n.datas.eng=i):(i=this.getExdti("gold"),n.datas.gold=i)},u.prototype.getTipsByMerge=function(){var t=o.MERGE_EFF[this.mergeTmp];return null!=t?s.randArray(t):null},u.prototype.onTransfer=function(t,e,i){e.cmds.push({cmd:c.com_transfer,datas:{gid:this.gid,org:i,id:this.getId(),tfto:this.cpos()}}),this.record("ontransfer:"+this.getId()+"_x:"+this.getx()+"_"+this.gety())},u.prototype.onAProp=function(t,e){t.checkBlockLock(this.getGId())||(t.unaprop||e.cmds.push({cmd:c.com_activeprop,datas:{gid:this.getGId()}}),e.activeprop=1)},u.prototype.canDown=function(){return null!=this.exdt.canDown?this.exdt.canDown:!this.unDown&&this.getDef("canDown")},u.prototype.chkToyd=function(t,e){if(this.isTypei(c.tile_type_toy)){var i=this.pos;this.isG4()&&(i=cc.p(this.pos.x,this.pos.y+this.getDowny())),t.isBottom(i)&&t.pushToyd(this)}},u.prototype.getDowny=function(){var t=this.getG4();return null!=t&&t.h<0?t.h:0},u.push2Cmds=function(t,e){t._2cmds||(t._2cmds=[]),t._2cmds.push(e)},u.prototype.pushCmds=function(t,e,i,n){i.cmd!=this.meta.goalPass&&t.setTarFlagToCmd(e,i,this.getDef("goalName"),n),e.cmds.push(i)},u.prototype.copter=function(t,e){var i=this.exdt;e.uuitem!=c.USERITEMIDS[4]?2!=i.copter&&(1!=i.hit?(i.copter=2,e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),copter:i.copter}})):i.hit=0):e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),copter:i.copter}})},u.prototype.mussel=function(t,e){var i=this.exdt;i.mussel=2==i.mussel?1:2,e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),mussel:i.mussel}})},u.prototype.nextColor=function(t,e){var i=this.exdt;i.randColor=t.getNextColor(i.randColor),e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),randColor:i.randColor}})},u.prototype.cannon=function(t,e){var i=t.calc_type_count()[c.tile_type_cube],n=this.exdt,o=void 0;if(i=r.upset(i),n.cannon%n.fireCount==0){o=[];for(var a=0;a<n.fireCount;a++)o.push(i.pop())}if(e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,count:n.cannon,chg:o}}),o){for(a=0;a<o.length;a++)t.gChgTo(e,o[a],c.id_tile_beachball,1);o=void 0}},u.prototype.lightBehit=function(t,e){var i=this.exdt,n=this.list[0].exdt,o=n.lightCount>=this.list.length;if(o)return!0;if(0==i.light)return!1;if(i.light=0,n.lightCount||(n.lightCount=0),n.lightCount++,o=n.lightCount>=this.list.length,e.cmds.push({cmd:c.com_dtchg,datas:{gid:this.gid,grid:this.cpos(),light:i.light}}),o)for(var a=0;a<this.list.length;a++)t.gDestroy(e,this.list[a]);return!1},u.prototype.logicChgTo=function(t,e){var i=l.tile(e);return i?(this.setBlock({meta:i}),!0):(console.error("onChgTo not tile def "+e),null)},u.prototype.dataChgTo=function(t){if(t){var e=this.exdt;for(var i in t)e[i]=t[i];return!0}},u.prototype.getData=function(){for(var t=null,e=this.exdt,i=0;i<u.COPYVALUE.length;i++){var n=u.COPYVALUE[i];null!=e[n]&&(t||(t={}),e[n].slice?t[n]=e[n].slice():t[n]=e[n])}return t},u.COPYVALUE=["count","colors","cannon","movesLeftToLost","curColor","hit","copter","mussel","light","lightCount","cover","canDown","hit","hasCollectCount"],e.exports=u,cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",Prop:"Prop",StringUtils:"StringUtils",n7:"n7"}],GMapData:[function(t,e,i){cc._RF.push(e,"22920jYu8lKybViXVyhQ9Bx","GMapData");var n=t("GameCommon"),o=t("GameTools"),a=(t("n7"),function t(e,i){this.state=t.STATE_EMPTRY,this.carpet=null,this.block=null,this.buff=null,this.tf=null,this.group=90;var n={x:e,y:i};this.name="md_"+e+"_"+i,this.getx=function(){return n.x},this.gety=function(){return n.y},this.getPos=function(){return cc.p(n.x,n.y)},this.cpos=this.getPos});a.prototype.setGroup=function(t){var e=t>=n.game_tile_rand_group_min&&t<=n.game_tile_rand_group_max;return e&&(this.group=t),e},a.prototype.setBlock=function(t,e,i,o){i.setPos(this.getx(),this.gety()),this.block=i,e.cmds.push({cmd:o||n.com_moveto,datas:{gid:i.getGId(),grid:i.getPos()}})},a.prototype.invalid=function(){return this.state==a.STATE_NORMAL},a.prototype.blockIsLock=function(t,e){return this.block&&t.checkBlockLock(this.block.gid,e)},a.prototype.active=function(){return this.state=a.STATE_NORMAL,this},a.prototype.onDown=function(){this.block=null},a.prototype.onDowned=function(t,e,i){this.block.onDowned(t,e,i)},a.prototype.onAProp=function(t,e){this.block&&this.block.onAProp(t,e)},a.prototype.onChgTo=function(t,e,i,o){if(this.block&&t.checkBlockLock(this.block.getGId(),n.LOCK_COM_CHGTO))return!1;!o&&this.haveBubble()&&this.dBuff(t,e,"bub");var a=this.block.onChgTo(t,e,i,o);return e.carpet&&t.gCarpet(e,this),a};var s=function(t){return!!t&&!!t.getMeta()};a.prototype.haveBubble=function(){return void 0!=this.bub},a.prototype.haveCage=function(){return void 0!=this.cage},a.prototype.cageCanRoundHit=function(){return this.haveCage()&&this.cage.cageCanRoundHit()},a.prototype.onTransfer=function(t,e,i,n){this.block=i,i.setPos(this.getx(),this.gety()),this.block.onTransfer(t,e,n)},a.prototype.canDown=function(){return!this.offdown&&!this.haveCage()&&(!this.block||this.block.canDown())},a.prototype.compare_color=function(t){return t.block&&t.block.compare_color(this.block)},a.prototype.compare=function(t){return!this.haveCage()&&t.block&&t.block.compare(this.block)},a.prototype.getExdt=function(t){return this._get_(t,"getExdt")},a.prototype.getDef=function(t){return this._get_(t,"getDef")},a.prototype._get_=function(t,e){var i=this.cage||this.bub||this.block;return s(i)?i[e](t):void 0},a.prototype.getCovDir=function(){return this.cov?this.cov.getExdti("cov",0):0},a.prototype.unFindAround=function(){return this.cageCanRoundHit()?1:this.block&&this.block.unFindAround()},a.prototype.getChkList=function(){return!this.haveCage()&&(this.block?1*this.block.getDef("chklist"):0)},a.prototype.canDispel=function(t){return this.haveCage()?this.cageCanRoundHit():this.block&&this.block.canNeighborHit(t)},a.prototype.tileCnt=function(t){a._tileCnt(t,this.bub),a._tileCnt(t,this.cage),this.cage||a._tileCnt(t,this.block),this.invalid()&&!this.block&&o._2ArrPush(t,0,this)},a._tileCnt=function(t,e){s(e)&&o._2ArrPush(t,e.getType(),e)},a.prototype.onItemHit=function(t,e){return!this.haveCage()||(this.dBuff(t,e,"cage"),this.block&&(this.block.unDown=void 0,this.block.chkToyd(t,e)),!1)},a.prototype.onBeHit=function(t,e){return this.onItemHit(t,e)},a.prototype.onUse=function(t,e){this.haveBubble()&&this.dBuff(t,e,"bub")},a.prototype.onUsed=function(t,e){this.block=null},a.prototype.onDestroy=function(t,e){var i=this.getHammerDestroyBlock(e.uuitem),n=this[i];if(!n)return 1;var o=n.isTile()||n.isProp();if(o&&this.haveCage()||this.cageCanRoundHit())return this.dBuff(t,e,"cage"),this.block&&(this.block.unDown=void 0,this.block.chkToyd(t,e)),1;var a=n.onDestroy(t,e,0);return a&&(o&&this.haveBubble()&&this.dBuff(t,e,"bub"),this[i]=null,e.carpet&&t.gCarpet(e,this)),a?2:0},a.prototype.dBuff=function(t,e,i){this[i].onDestroy(t,e,1)&&(this[i]=null)},a.prototype._destroy=function(t,e,i){if(!s(this.block))return!1;var n=this.block._destroy(t,e,i);return n&&(this.block=null),n},a.prototype.getHammerDestroyBlock=function(t){return"block"},a.prototype.isPosEqual=function(t){return!!t&&this.getx()==t.pos.x&&this.gety()==t.pos.y},a.STATE_NORMAL=0,a.STATE_EMPTRY=-1,e.exports=a,cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",n7:"n7"}],GameCommon:[function(t,e,i){cc._RF.push(e,"2ca4216SjlNhYLDqVCwJtYN","GameCommon");var n=function(){};n.com_destroy=1,n.com_down=2,n.com_create=3,n.com_useitem=4,n.com_chgto=5,n.com_moveto=6,n.com_clear=7,n.com_chglist=8,n.com_merge=9,n.com_useditem=10,n.com_sorce=11,n.com_dtchg=12,n.com_uitem=13,n.com_evaluate=14,n.com_transfer=15,n.com_activeprop=16,n.com_vertical=17,n.com_conveyor=18,n.com_realign=19,n.com_rotoroff=20,n.com_balance=21,n.com_tips=22,n.com_undo=23,n.com_wait=100,n.color_yellow=0,n.color_red=1,n.color_blue=2,n.color_green=3,n.color_pink=4,n.color_orange=5,n.color_full=6,n.DOWNLOCK_DOWN=1,n.DOWNLOCK_TOY=2,n.DOWNLOCK_MAGIC=4,n.DOWNLOCK_DOUBLEMAGIC=8,n.MAIN_PAGE_BTN_SCROLL_TIME=1E3*(n.MAIN_PAGE_SCROLL_TIME=.25),n.ANIM_STATE_START_HIT=1,n.ANIM_STATE_PLAY_END=100,n.ANIM_STATE_DESTROY=200,n.CUBE_SETPARAM_START=1,n.CUBE_SETPARAM_END=2,n.CUBE_SETPARAM_NEXT=4,n.CUBE_SETPARAM_STARTEND=n.CUBE_SETPARAM_START|n.CUBE_SETPARAM_END,n.CUBE_SETPARAM_STARTNEXT=n.CUBE_SETPARAM_START|n.CUBE_SETPARAM_NEXT,n.CUBE_SETPARAM_ALL=n.CUBE_SETPARAM_START|n.CUBE_SETPARAM_END|n.CUBE_SETPARAM_NEXT,n.tile_type_cube=1,n.tile_type_cage=2,n.tile_type_beachball=3,n.tile_type_rotor=4,n.tile_type_bubble=5,n.tile_type_puzzle=6,n.tile_type_ice=7,n.tile_type_tnt=8,n.tile_type_toy=9,n.tile_type_pinwheel=11,n.tile_type_bowling=15,n.tile_type_candy=16,n.tile_type_timebomb=22,n.tile_type_chgc=23,n.tile_type_swap=25,n.tile_type_copter=27,n.tile_type_mussel=34,n.tile_type_rocker=36,n.tile_type_magicwater=37,n.tile_type_nest=38,n.TILE_GROUP=[n.TILE_LAYER_BACKGROUND=-1,n.TILE_LAYER_NORMAL=1,n.TILE_LAYER_BUFF=2,n.TILE_LAYER_TRANFORM=3],n.TILE_LAYER_INCAGE=-1,n.TILE_LAYER_TOY=9,n.TILE_LAYER_CAGE=242,n.TILE_LAYER_NORMAL_TOP=100,n.TILE_LAYER_TOY_ZINDEX=100,n.TILE_LAYER_BUFF_ZINDEX=300,n.TILE_LAYER_CAGE_ZINDEX=400,n.TILE_LAYER_MERGE_T_ZINDEX=502,n.TILE_LAYER_MERGE_ZINDEX=501,n.TILE_LAYER_MERGE_GLOW_ZINDEX=500,n.TILE_DROP_GROUP_NAME="group1",n.game_tile_rand_group_min=90,n.game_tile_rand_group_max=100,n.touchstart=cc.Node.EventType.TOUCH_START,n.touchend=cc.Node.EventType.TOUCH_END,n.touchcancel=cc.Node.EventType.TOUCH_CANCEL,n.touchmove=cc.Node.EventType.TOUCH_MOVE,n.mouseup=cc.Node.EventType.MOUSE_UP,n.magiccube_delaytime=.1,n.auto_activeitem_delaytime=.45,n.effect_maxtime=3,n.BALANCE_DELAYTIME=.1,n.BALANCE_ACTIVE_DELAYTIME=100,n.BALANCE_ACTIVE_COUNT=5,n.CUBE_REALIGN_TIME=2*(n.CUBE_DROP_TIME=.56),n.CUBE_FLY_TIME=.14,n.CUBE_PORTAL_TIME=n.CUBE_DROP_TIME/2,n.CUBE_CREATE_TIME=n.CUBE_DROP_TIME/2,n.CUBE_MERGE_TIME=.16,n.CUBE_DOWNEND_TIME=.12,n.GOALFLY_DOWN=.09,n.GOALFLY_WAIT=.025,n.id_tile_beachball=35,n.id_tile_chgc=151,n.id_tile_ice=56,n.id_tile_snowhouse=58,n.id_tile_paopao=37,n.merge_rotor_cnt=[5,7],n.merge_shot_cnt=[6,8],n.merge_rotor_cnt1=5,n.merge_rotor_cnt2=6,n.merge_tnt_cnt=7,n.merge_mcube_cnt=9,n.BIGMAP_RESID_START=10100,n.MAX_LEVEL=501,n.CUBE_TILE_TIME=5,n.TILE_CANNOT_DISBYROCKER=[9,16,26,36],n.TILE_TYPES=[1,22,23,24],n.BARRIER_TYPES=[12,3],n.USERITEMIDS=[1,2,3,4,5,6],n.PROP_TYPES=[4,6,8,33],n.colors_def=["yellow","red","blue","green","purple","orange"],n.chg_target_num=[232],n.dir_to_rotation={4:-1,6:1,8:0,2:-2},n.colors_next=["1","3","0","2","4","5"],n.datum_time=1512057600,n.nkname_check=/^dPuaClb/,n.buy5step=[{gold:1E3},{gold:1300,item:{PreWar_Rotor:1}},{gold:1800,item:{PreWar_Tnt:1,Drill:1}},{gold:2E3,item:{PreWar_Cube:1,PreWar_Tnt:1}}],n.effect_recovery=!0,n.GCHGTOICE=0,n.GCREATEICE=1,n.HASICEY=2,n.ACHIEVE_STAR=1,n.ACHIEVE_LEVEL=2,n.ACHIEVE_TREASURE=3,n.ACHIEVE_ROTOR=4,n.ACHIEVE_BOMB=5,n.ACHIEVE_MAGICCUBE=6,n.ACHIEVE_PREBATTLEITEM=7,n.ACHIEVE_BATTLEITEM_CHUIZI=8,n.ACHIEVE_BATTLEITEM_QICHE=9,n.ACHIEVE_BATTLEITEM_FEIDIE=10,n.ACHIEVE_BATTLEITEM_TOUZI=11,n.ACHIEVE_12=12,n.ACHIEVE_13=13,n.ACHIEVE_14=14,n.ACHIEVE_15=15,n.ACHIEVE_16=16,n.ACHIEVE_17=17,n.ACHIEVE_18=18,n.ACHIEVE_19=19,n.ACHIEVE_20=20,n.ACHIEVE_21=21,n.ACHIEVE_22=22,n.ACHIEVE_23=23,n.ACHIEVE_24=24,n.ACHIEVE_25=25,n.ACHIEVE_26=26,n.EDGE_POS=14,n.EDGE_WIDTH=14,n.EDGE_CIRCLEANGLE=3,n.EDGE_OFFSETCIRCLE=1,n.MAP_DISAPPEAR=.8,n.STATE_STARTHIT=1,n.STATE_PLAYEND=100,n.CUBE_SIZE=112,n.caleDownSpeed=function(t){return n.CUBE_SIZE/(1E3*t)},n.CUBE_DOWN_GRID=.085,n.CUBE_DOWN_NEW_GRID_G=n.caleDownSpeed((n.CUBE_DOWN_NEW_GRID=.085)-(n.CUBE_DOWN_NEW_GRID_A=.025)),n.CUBE_DOWN_SEND_TM=1.15*n.CUBE_DOWN_NEW_GRID,n.CUBE_DOWN_SPEED=n.caleDownSpeed(n.CUBE_DOWN_GRID),n.CUBE_DOWN_NEW_SPEED=n.caleDownSpeed(n.CUBE_DOWN_NEW_GRID),n.CUBE_DOWN_SPEED_ADD=n.CUBE_DOWN_NEW_GRID_A/(1E3*(n.CUBE_DOWN_SPEED_ADDTM=.3)),n.CUBE_DOWN_SPEED_ADD_TM=1E3*n.CUBE_DOWN_SPEED_ADDTM,n.calcDown=function(t,e,i){return t*e+(i>0?.5*i*t*t:0)},n.CUBE_DOWN_SPEED_ADDMAX=n.calcDown(n.CUBE_DOWN_SPEED_ADD_TM,n.CUBE_DOWN_NEW_SPEED,n.CUBE_DOWN_SPEED_ADD),n.OPEN_LEVEL=16,n.NAME_MAXS_LEN=14,n.NAME_MAXL_LEN=24,n.CLUB_GRADE_NUM=50,n.WELCOME_GIFT_DATA=[{k:"BigLives",v:2},{k:"MidLives",v:10},{k:"TinyLives",v:99}],n.ADD_DESKTOP_AWD={k:"gold",v:1E3,u:1},n.SIGN_SUCCESS=0,n.SIGN_HASSIGN=1,n.RFRESH_FAILED=2,n.RFRESH_SUCCESS=3,n.SIGN_END=4,n.SIGN_NOTSTART=5,n.RSIGN_LACKGOLD=-5,n.RSIGN_NOSIGNCOUNT=-6,n.RSIGN_TODAYNOSIGN=-7,n.SIGN_END_STATUS="d",n.nowExcute=!1,n.CHESTCONDITIONKEY="condition",n.USEITEM_RESULT0=0,n.USEITEM_RESULT1=1,n.USEITEM_RESULT2=2,n.USEITEM_RESULT3=3,n.USEITEM_RESULT4=4,n.USEITEM_RESULT5=5,n.LOCK_ALL=1,n.LOCK_COM_CREATE=2,n.LOCK_COM_DOWN=4,n.LOCK_COM_CHGTO=8,n.LOCK_COM_DTCHG=16,n.NEWYEAR_SIGN=10,n.NOT_START=-3,n.HAS_END=-4,n.SHARE_AD_NEVER=-2,n.SHARE_AD_NO=-1,n.SHARE_AD_0=0,n.AD_FAILED=-1001,n.SHARE_FAILED=-2001,n.INVITE_1=-1,n.INVITE_2=-2,n.INVITE_3=-3,n.INVITE_0=0,n.DIALOG_FROM_GUIDE="guide",n.PFS=["facebook","fb","gp","kuaishou","mq","n7","note7g","qqplay","wx_game","tb"],e.exports=n,n.BADGES={0:{c:6E4,l:"#c47313"},1:{c:60004,l:"#cc4740"},2:{c:60003,l:"#d1611e"},3:{c:60006,l:"#289b4d"},4:{c:60005,l:"#d36311"},5:{c:60002,l:"#157fab"},6:{c:60001,l:"#9947c8"},7:{c:60004,l:"#cc4740"},8:{c:60003,l:"#d1611e"},9:{c:60006,l:"#289b4d"},10:{c:60005,l:"#d36311"},11:{c:60002,l:"#157fab"},12:{c:60001,l:"#9947c8"},13:{c:60004,l:"#cc4740"},14:{c:60003,l:"#d1611e"},15:{c:60006,l:"#289b4d"},16:{c:60005,l:"#d36311"},17:{c:60002,l:"#157fab"},18:{c:60001,l:"#9947c8"},19:{c:60004,l:"#cc4740"},20:{c:60006,l:"#289b4d"},21:{c:60005,l:"#d36311"},22:{c:60002,l:"#157fab"},23:{c:60001,l:"#9947c8"},24:{c:60004,l:"#cc4740"},25:{c:60006,l:"#289b4d"},26:{c:60005,l:"#d36311"},27:{c:60002,l:"#157fab"},28:{c:60001,l:"#9947c8"},29:{c:60004,l:"#cc4740"},30:{c:60002,l:"#157fab"},31:{c:60004,l:"#cc4740"},32:{c:60002,l:"#157fab"},33:{c:60004,l:"#cc4740"},34:{c:60002,l:"#157fab"}},n.BADGES_EN={1:{c:60004},2:{c:60001},3:{c:60002},4:{c:60003},5:{c:60005},6:{c:60006},7:{c:60004},8:{c:60001},9:{c:60002},10:{c:60003},11:{c:60005},12:{c:60006},13:{c:60004},14:{c:60001},15:{c:60002},16:{c:60003},17:{c:60005},18:{c:60006},19:{c:60004},20:{c:60001},21:{c:60002},22:{c:60003},23:{c:60005},24:{c:60006},25:{c:60004},26:{c:60001},27:{c:60002},28:{c:60003},29:{c:60005},30:{c:60006},31:{c:60004},32:{c:60001},33:{c:60002},34:{c:60003},35:{c:60005},36:{c:60006}},cc._RF.pop()},{}],GameConfig:[function(t,e,i){cc._RF.push(e,"f8189dLpTZGjaEDDCuljnFj","GameConfig");var n=t("n7"),o=function(){},a=null;o.init=function(t){a=t},o.set=function(t,e){null===a&&(a={}),a[t]=e},o.remove=function(t){a[t]&&delete a[t]},o.get=function(t,e){if(null===a)return e||null;if(n.window.game_config&&void 0!=n.window.game_config[t])return n.window.game_config[t];var i=a[t];return void 0===i||null===i?e:i},o.geti=function(t){return o.get(t,0)},e.exports=o,cc._RF.pop()},{n7:"n7"}],GameEvent:[function(t,e,i){cc._RF.push(e,"cd47aLg0a5D2ab/mGh16M8m","GameEvent");var n=t("n7"),o=t("Frame"),a=cc.Class({statics:{on:function(e,i,n,a,s){if("function"==typeof e){var c=(e=t("StringUtils").replace(""+e,'"',"'")).indexOf("'EVENT_"),r=e.indexOf("'",c+1);e=e.substring(c+1,r)}s?o.once(e,i,n,a,s):o.on(e,i,n,a,s)},once:function(t,e,i,n){a.on(t,e,i,n,!0)},off:function(t,e){o.off(t,e)},dispatchEvent:function(t){o.broadcastEvent(t)},createEvent:function(t,e,i){n.GameEvent=cc.EventCustom||cc.Event.EventCustom;var o=new n.GameEvent(t,!0);return o.setUserData(e),(void 0===i||i)&&a.dispatchEvent(o),o},EVENT_LOG:function(){return a.createEvent("EVENT_LOG",0,!0)},EVENT_ASSETSUPDATE_P:function(t){return a.createEvent("EVENT_ASSETSUPDATE_P",t,!0)},EVENT_ASSETSUPDATE_STATE:function(t){return a.createEvent("EVENT_ASSETSUPDATE_STATE",t,!0)},EVENT_ROOTGAME:function(){return a.createEvent("EVENT_ROOTGAME",0,!0)},EVENT_RESTARTGAME:function(){return a.createEvent("EVENT_RESTARTGAME",0,!0)},EVENT_CANVAS_RESIZE:function(t){return a.createEvent("EVENT_CANVAS_RESIZE",t,!0)},EVENT_CANVAS_RESIZEEND:function(t){return a.createEvent("EVENT_CANVAS_RESIZEEND",t,!0)},EVENT_PAGE_RESIZEEND:function(t){return a.createEvent("EVENT_PAGE_RESIZEEND",t,!0)},EVENT_SHOW_DISCONNET:function(){return a.createEvent("EVENT_SHOW_DISCONNET",0,!0)},EVENT_NET_STATU:function(t){return a.createEvent("EVENT_NET_STATU",t,!0)},EVENT_PLAYINFO:function(t){return a.createEvent("EVENT_PLAYINFO",t,!0)},EVENT_PLAY_HEADIMG:function(t){return a.createEvent("EVENT_PLAY_HEADIMG",t,!0)},EVENT_GAME_DATA_LOADOK:function(t,e,i){return a.createEvent("EVENT_GAME_DATA_LOADOK",{url:t,count:e,less:i},!0)},EVENT_GAME_DATA_LOADALL:function(){return a.createEvent("EVENT_GAME_DATA_LOADALL",0,!0)},EVENT_LOAD_UI:function(t,e,i){return a.createEvent("EVENT_LOAD_UI",{asyn:t,file:e,finish:i},!0)},EVENT_LOAD_UI_CLOSE:function(t){return a.createEvent("EVENT_LOAD_UI_CLOSE",{asyn:t},!0)},EVENT_NEXT_DAY:function(){return a.createEvent("EVENT_NEXT_DAY",0,!0)},EVENT_SWITCH_MUSIC:function(){return a.createEvent("EVENT_SWITCH_MUSIC",0,!0)},EVENT_SWITCH_VOL:function(){return a.createEvent("EVENT_SWITCH_VOL",0,!0)},EVENT_MAIN_LOADBACKGROUND:function(){return a.createEvent("EVENT_MAIN_LOADBACKGROUND",0,!0)},EVENT_GAMEJSON_LOADED:function(){return a.createEvent("EVENT_GAMEJSON_LOADED",0,!0)},EVENT_LOGIN_LOG:function(t,e){return a.createEvent("EVENT_LOGIN_LOG",{msg:t,log:!!e},!0)},EVENT_GAME_LOADSECEN:function(){return a.createEvent("EVENT_GAME_LOADSECEN",0,!0)},EVENT_GAME_LOADGAMEJSON:function(){return a.createEvent("EVENT_GAME_LOADGAMEJSON",0,!0)},EVENT_GAME_LOADDATA:function(t,e,i){return a.createEvent("EVENT_GAME_LOADDATA",{count:t,finish:e,from:i},!0)},EVENT_RELOGIN:function(){return a.createEvent("EVENT_RELOGIN",0,!0)},EVENT_LOGOUT:function(){return a.createEvent("EVENT_LOGOUT",0,!0)},EVENT_SYSTEM_TOUCH:function(t){return a.createEvent("EVENT_SYSTEM_TOUCH",t,!0)},EVENT_MESSAGE:function(t){return a.createEvent("EVENT_MESSAGE",t,!0)},EVENT_GUILD_MEMEBER:function(t){return n.log("EVT_GUILD_MEMEBER:"+JSON.stringify(t)),a.createEvent("EVENT_GUILD_MEMEBER",t,!0)},EVENT_GUILD:function(t){return n.log("EVT_GUILD:"+JSON.stringify(t)),a.createEvent("EVENT_GUILD",t,!0)},EVENT_GUILD_MESSAGE:function(t){return n.log("EVT_GUILD_MESSAGE:"+JSON.stringify(t)),a.createEvent("EVENT_GUILD_MESSAGE",t,!0)},EVENT_SHOW_GUILD:function(){return a.createEvent("EVENT_SHOW_GUILD",0,!0)},EVENT_SHOW_GUILD_RANK:function(){return a.createEvent("EVENT_SHOW_GUILD_RANK",0,!0)},GET_BIGMAP_PARAM:function(){return a._bigmap_param_},EVENT_BIGMAP_SHOW:function(e){a._bigmap_param_=e,t("N7UIManager").loadScene("tile_map")},EVENT_BIGMAP_SHOWED:function(t){return a.createEvent("EVENT_BIGMAP_SHOWED",t,!0)},EVENT_TREEHOUSE_SHOW:function(t){return a.createEvent("EVENT_TREEHOUSE_SHOW",t,!0)},EVENT_TREEHOUSE_SHOWED:function(t){return a.createEvent("EVENT_TREEHOUSE_SHOWED",t,!0)},EVENT_TOPBAR_FLY:function(t){return a.createEvent("EVENT_TOPBAR_FLY",t,!0)},EVENT_BIGMAP_CRBUILD:function(t){return a.createEvent("EVENT_BIGMAP_CRBUILD",t,!0)},EVENT_CAMERA_TOBUILD:function(t){return a.createEvent("EVENT_CAMERA_TOBUILD",t,!0)},EVENT_MAINUI_NEXT_GUIDE:function(t){return a.createEvent("EVENT_MAINUI_NEXT_GUIDE",t,!0)},EVENT_NEXT_LEVEL:function(t){return a.createEvent("EVENT_NEXT_LEVEL",t,!0)},EVENT_GAME_ITEM_NOTICE:function(t){return a.createEvent("EVENT_GAME_ITEM_NOTICE",t,!0)},EVENT_OPEN_ITEM:function(t){return a.createEvent("EVENT_OPEN_ITEM",t,!0)},EVENT_GUIDE_UNLOCK:function(t){return a.createEvent("EVENT_GUIDE_UNLOCK",t,!0)},EVENT_BIGMAP_COMMAND:function(t){return a.createEvent("EVENT_BIGMAP_COMMAND",t,!0)},EVENT_MAPEDIT_COMMAND:function(t){return a.createEvent("EVENT_MAPEDIT_COMMAND",t,!0)},EVENT_LIFT_BUILD:function(t){return a.createEvent("EVENT_LIFT_BUILD",t,!0)},EVENT_UDATA_CHG:function(t){return a.createEvent("EVENT_UDATA_CHG",t,!0)},EVENT_ITEMS_CHG:function(t,e){return a.createEvent("EVENT_ITEMS_CHG",{list:t,failed:e},!0)},EVENT_UDATA_CAMOUFLAGE:function(t){return a.createEvent("EVENT_UDATA_CAMOUFLAGE",t,!0)},EVENT_USEPROP_FAIL:function(t){return a.createEvent("EVENT_USEPROP_FAIL",t,!0)},EVENT_FRIEND_GETED:function(t){return a.createEvent("EVENT_FRIEND_GETED",t,!0)},EVENT_FRIEND_CHGDATA:function(t){return a.createEvent("EVENT_FRIEND_CHGDATA",t,!0)},EVENT_LOAD_ASYN_RES_PROCESSOR:function(t,e){return a.createEvent("EVENT_LOAD_ASYN_RES_PROCESSOR",{count:t,finish:e},!0)},EVENT_GAME_USE_ITEM:function(t,e){return a.createEvent("EVENT_GAME_USE_ITEM",{id:t,item:e},!0)},EVENT_GAME_CLOSE_USE_ITEM:function(t,e){return a.createEvent("EVENT_GAME_CLOSE_USE_ITEM",{id:t,map:e},!0)},EVENT_DIALOG_SHOWED:function(t){return a.createEvent("EVENT_DIALOG_SHOWED",t,!0)},EVENT_OPEN_DIALOG:function(t){return a.createEvent("EVENT_OPEN_DIALOG",t,!0)},EVENT_OPEN_GAME_DIALOG:function(t){return a.createEvent("EVENT_OPEN_GAME_DIALOG",t,!0)},EVENT_ACTIVESALSE_ICON:function(t){return a.createEvent("EVENT_ACTIVESALSE_ICON",t,!0)},EVENT_GUIDE_BRUSH:function(t){return a.createEvent("EVENT_GUIDE_BRUSH",t,!0)},EVENT_ONREFRESH_USERDT:function(t){return a.createEvent("EVENT_ONREFRESH_USERDT",t,!0)},EVENT_PORPNUM_REFRUSH:function(t,e,i){return a.createEvent("EVENT_PORPNUM_REFRUSH",{name:t,num:e,noSelect:i},!0)},EVENT_SAWNUM_REFRUSH:function(t,e){return a.createEvent("EVENT_SAWNUM_REFRUSH",{name:t,num:e},!0)},EVENT_NUMBER_CHANGE:function(t){return a.createEvent("EVENT_NUMBER_CHANGE",t,!0)},GET_GAME_PARAM:function(){var t=a._game_param_;return a._game_param_=null,t},CLEAN_GAME_PARAM:function(){a._game_param_=void 0},EVENT_MAGICCUBE_LOCKDOWN:function(t,e){return a.createEvent("EVENT_MAGICCUBE_LOCKDOWN",{id:t,lock:e},!0)},EVENT_GAME_TOUCH:function(){return a.createEvent("EVENT_GAME_TOUCH",0,!0)},EVENT_GAME_SHOW:function(e,i){void 0===e&&(e=t("GameConfig").get("mapId",1)),a._game_param_={mid:e,param:i},t("N7UIManager").loadScene("game_v2"),t("SdkIns").instance().upLogLeast("start","gate_loading")},EVENT_GAME_SHOWED:function(t){return a.createEvent("EVENT_GAME_SHOWED",0,!0)},EVENT_GAME_DOG_HAPPY:function(t){return a.createEvent("EVENT_GAME_DOG_HAPPY",t,!0)},EVENT_GAME_DOG_SAD:function(){return a.createEvent("EVENT_GAME_DOG_SAD",0,!0)},EVENT_GAME_DOG_MOVESETP:function(t){return a.createEvent("EVENT_GAME_DOG_MOVESETP",t,!0)},EVENT_GAME_EXIT:function(t){return a.createEvent("EVENT_GAME_EXIT",t,!0)},EVENT_ASSAULT_LEVELCHG:function(t){return a.createEvent("EVENT_ASSAULT_LEVELCHG",t,!0)},EVENT_ACHIEVE_FINISH:function(t){return a.createEvent("EVENT_ACHIEVE_FINISH",t,!0)},EVENT_GAME_CUBECOLOR_CHG:function(t){return a.createEvent("EVENT_GAME_CUBECOLOR_CHG",t,!0)},EVENT_GAME_TILE_LOADOK:function(){return a.createEvent("EVENT_GAME_TILE_LOADOK",0,!0)},EVENT_GAME_TILE_EDGE:function(){return a.createEvent("EVENT_GAME_TILE_EDGE",0,!0)},EVENT_GAME_ZHEN:function(t,e){return a.createEvent("EVENT_GAME_ZHEN",{time:t,all:e},!0)},EVENT_GAME_TILE_CLICK_LOCK:function(t,e){return a.createEvent("EVENT_GAME_TILE_CLICK_LOCK",t,!0)},EVENT_GAME_SENDROTOR:function(t){return a.createEvent("EVENT_GAME_SENDROTOR",t,!0)},EVENT_GAME_CLICK_NODE:function(t,e){return a.createEvent("EVENT_GAME_CLICK_NODE",{cube:t,force:e},!0)},EVENT_GAME_FLY_SCORE:function(t){return a.createEvent("EVENT_GAME_FLY_SCORE",t,!0)},EVENT_GAME_ADD_SCORE:function(t){return a.createEvent("EVENT_GAME_ADD_SCORE",t,!0)},EVENT_GAME_MOVE_STEP:function(t){return a.createEvent("EVENT_GAME_MOVE_STEP",t,!0)},EVENT_GAME_FLYTO_GOAL:function(t){return a.createEvent("EVENT_GAME_FLYTO_GOAL",t,!0)},EVENT_GAME_LOCK_ITEM:function(t){return a.createEvent("EVENT_GAME_LOCK_ITEM",t,!0)},EVENT_GAME_ADD_GOAL:function(t){return a.createEvent("EVENT_GAME_ADD_GOAL",t,!0)},EVENT_GAME_BALANCE:function(t){return a.createEvent("EVENT_GAME_BALANCE",t,!0)},EVENT_GAME_TIPS:function(t,e,i){return a.createEvent("EVENT_GAME_TIPS",{state:t,callFunc:e,caller:i},!0)},EVENT_GAME_EFFECT:function(t){return a.createEvent("EVENT_GAME_EFFECT",t,!0)},EVENT_GAME_BALANCE_START:function(t,e){return a.createEvent("EVENT_GAME_BALANCE_START",{statu:t,gold:e},!0)},EVENT_GAME_BALANCE_END:function(t){return a.createEvent("EVENT_GAME_BALANCE_END",t,!0)},EVENT_GAME_START:function(t){return a.createEvent("EVENT_GAME_START",t,!0)},EVENT_GAME_STARTV2:function(t){return a.createEvent("EVENT_GAME_STARTV2",t,!0)},EVENT_GAME_LOADED:function(t){return a.createEvent("EVENT_GAME_LOADED",t,!0)},EVENT_GAME_BATTLEGOAL_FLYED:function(t){return a.createEvent("EVENT_GAME_BATTLEGOAL_FLYED",t,!0)},EVENT_GAME_BATTLE_TOITEMS:function(t){return a.createEvent("EVENT_GAME_BATTLE_TOITEMS",t,!0)},EVENT_GAME_TIMEOUT:function(t){return a.createEvent("EVENT_GAME_TIMEOUT",t,!0)},EVENT_GAME_PAUSE:function(t){return a.createEvent("EVENT_GAME_PAUSE",t,!0)},EVENT_GAME_TARGETNUMCHG:function(t){return a.createEvent("EVENT_GAME_TARGETNUMCHG",t,!0)},EVENT_GAME_BUYED5STEP:function(t){return a.createEvent("EVENT_GAME_BUYED5STEP",t,!0)},EVENT_GAME_BUYED5STEP2:function(){return a.createEvent("EVENT_GAME_BUYED5STEP2",0,!0)},EVENT_GAME_BUYED5STEPEND:function(t){return a.createEvent("EVENT_GAME_BUYED5STEPEND",t,!0)},EVENT_GAME_BATTLE_FAIL:function(t){return a.createEvent("EVENT_GAME_BATTLE_FAIL",t,!0)},EVENT_MESSAGEBOX:function(t,e,i,n,o){a.EVENT_OPEN_DIALOG({name:o?"dialog_msg_remind":"dialog_messagebox",param:{s:t,i:e,t:i,fo:n}})},EVENT_OPEN_GAME_GUIDE:function(t){a.EVENT_GAME_TILE_CLICK_LOCK(!0,1),a.EVENT_OPEN_DIALOG({name:"dialog_game_guide",param:t})},EVENT_GAME_NEXTGUIDE:function(t){return a.createEvent("EVENT_GAME_NEXTGUIDE",t,!0)},EVENT_GAME_GUIDE_UPDATE:function(t){return a.createEvent("EVENT_GAME_GUIDE_UPDATE",t,!0)},EVENT_OPEN_MAINUI_GUIDE:function(t){a.EVENT_OPEN_DIALOG({name:"dialog_guide",param:t})},EVENT_STAR_INIT:function(t){return a.createEvent("EVENT_STAR_INIT",t)},EVENT_GOTO_SKIP_DIALOG:function(t,e){return a.createEvent("EVENT_GOTO_SKIP_DIALOG",{id:t,p:e},!0)},EVENT_LOGIN_ERROR:function(t){return a.createEvent("EVENT_LOGIN_ERROR",t,!0)},EVENT_GOLD_SHOP:function(e){t("SdkIns").instance().isPay()&&a.EVENT_OPEN_DIALOG(e)},EVENT_ADS_CHG:function(t){return a.createEvent("EVENT_ADS_CHG",t)}},onLoad:function(){}});e.exports=a,cc._RF.pop()},{Frame:"Frame",GameConfig:"GameConfig",N7UIManager:"N7UIManager",SdkIns:"SdkIns",StringUtils:"StringUtils",n7:"n7"}],GameLogic:[function(t,e,i){cc._RF.push(e,"59eb5HfgXhCsLMqv5lKmBrJ","GameLogic");var n=t("n7"),o=t("WorkData"),a=t("GameEvent"),s=t("UserLogic"),c=t("MathUtils"),r=t("GameCommon"),l=(t("N7Sound"),t("GameTools")),h=t("JsonMetaCache"),u=t("AchieveLogic"),d=t("ActivityLogic"),f=t("GuildLogic"),g=t("SignLogic"),p=function(){this.isTodayFirstSign=!1};e.exports=p,p._ins=null,p.instance=function(){return p._ins},p.resetDataFromSdk=function(){p.hasReset||(p.hasReset=!0,t("ReChargeLogic").resetDataFromSdk(),t("AchieveLogic").resetDataFromSdk(),t("ShareLogic").resetDataFromSdk(),t("JsonMetaCache").instance().initDynamicData(),p.checkGiftStatus=0)},p.init=function(){t("N7MusicV2").init(),t("N7Sound").init(),t("SdkIns").instance().user_init()},p.crossSteps={3:3,5:4,7:6},p.getFromData=function(t){return-1==(t+="").indexOf(o.STR)?0|t:-(0|t.slice(1))},p.setToData=function(t){return t>=0?t:o.STR+Math.abs(t)},p.getWinOrLoseCount=function(){var t=o.get(o.WKD_FAILEDCOUNT)+"";return p.getFromData(t)},p.setWinOrLoseCount=function(t){var e=p.setToData(t);return o.set(o.WKD_FAILEDCOUNT,e)},p.crossSuccess=function(t,e,i){var o=p.getWinOrLoseCount();o<0&&(o=0),o=p.setWinOrLoseCount(++o),n.isDebug&&n.log("GameLogic.crossSuccess: "+o),d.assaultSuccess(t)},p.crossFailed=function(e){var i=p.getWinOrLoseCount();i>0&&(i=0),i=p.setWinOrLoseCount(--i),n.isDebug&&n.log("GameLogic.crossFailed: "+i),d.assaultFailed(),t("ReChargeLogic").crossFailed(e),e<=5&&p.checkReturnItems()},p.retryNotice=function(){if(t("ActivityLogic").isTowerMap())return!1;if(-1==p.getWinOrLoseCount()){var e=s.geti("lev"),i=t("UIGateEntrance")._PREWAR_;for(var o in i){var a=o;if(e>=i[o]&&t("ItemsLogic").get(a))return n.isDebug&&n.log("GameLogic.retryNotice"),!0}}return!1},p.itemsNotice=function(){if(t("ActivityLogic").isTowerMap())return!1;if(-2==p.getWinOrLoseCount()){var e=s.geti("lev"),i=t("UIGameUseItem")._PREWAR_;if(e>=i[i.length-1])for(var o=0;o<i.length;o++){var c=h.item(o+1);if(c&&t("ItemsLogic").get(c.id_name))return n.isDebug&&n.log("GameLogic.itemsNotice"),a.EVENT_GAME_ITEM_NOTICE(),!0}}return!1},p.checkReturnItems=function(){if(t("ActivityLogic").isTowerMap())return!1;var e=t("ShareLogic").getWatchOrShare(14);if(e.condition&&!e.hasShare){var i=t("UIGameUseItem");if(i&&i.instance()){var n=i.instance().savedUseItems,o=[];for(var s in n)o.push({k:s,v:n[s]});0!=o.length&&(o.title="share.returnTitle",o.txt="share.returnDesc",o.btnc=!0,o.greentxt="share.returnBtn",o.callFunc=function(){p.shareAndGet(14,o)},a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:o}))}}},p.shareAndGet=function(e,i){t("ShareLogic").showAndWatchOrShare(e,null,function(e){var n=e?e.dt:null;n&&0==n.code&&(delete i.title,delete i.txt,delete i.btnc,delete i.greentxt,delete i.callFunc,t("UserLogic").award(i,"SHARE"),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:i}))},this)},p.getCrossCompensation=function(e,i){if(t("ActivityLogic").isTowerMap(i))return 0;var n=0,o=null!=e?e:p.getWinOrLoseCount(),a=p.getDataByLoseCount(o);return a&&p.levelSatisfy(a)&&(n=a.steps),n},p.levelSatisfy=function(t){if(!t)return!1;var e=s.geti("lev"),i=-1==t.closelevel||e<=t.closelevel;return!!(e>=t.openlevel&&i)},p.getFailedPreItems=function(e){if(t("ActivityLogic").isTowerMap(e))return null;var i=null,n=s.geti("lev"),o=h.getDynamicPreItems()[n];if(null!=o){var a=p.getWinOrLoseCount(),r=null;for(var l in o.mapList)l*a<0||Math.abs(a)>=Math.abs(l)&&(r=o.mapList[l]);if(null!=r){i={};for(var u=0|r.itemCount,d=0;d<u;d++){var f=c.randArray(r.itemsId),g=h.item(f);if(g){var _=g.id_name;i[_]=1+(0|i[_])}}}}return i},p.getSdkChgStep=function(){var e=t("SdkIns").instance().chgStep();if(!e)return 0;var i=0,n=s.geti("lev");for(var o in e)n>=o&&(i=e[o]);return i},p.getDataByLoseCount=function(t){var e=void 0,i=h.getDynamicDataCount();for(var n in i)if(!(n*t<0)){if(Math.abs(n)>Math.abs(t))break;e=i[n]}return e},p.canLevelGift=function(e){var i=o.get(o.WKD_LEV_GIFT);return 0==i&&(i=o.set(o.WKD_LEV_GIFT,t("MathUtils").randInt(1,100))),p.__chkLevelGift(i,e)},p.__chkLevelGift=function(t,e){var i=10*(parseInt(t/1E3)+1);return e||(e=s.getLevel()),e>=i?i:-i},p.LEVEL_GIFT_1={k:"gold",v1:300,v2:500},p.LEVEL_GIFT_2=[{k:"PreWar_RS",v:1},{k:"PreWar_Cube",v:1},{k:"PreWar_CB",v:1}],p.LEVEL_GIFT_3=[{k:"star",v:2},{k:"Drill",v:1}],p.getLevelGift=function(e,i){var n=o.get(o.WKD_LEV_GIFT);if(!n)return e&&e.call(i,1);var s=p.__chkLevelGift(n);if(s<0)return e&&e.call(i,2,s);var r=t("ChestRandLogic").randBoxItems("1"+s,n%1E3);for(var l in r)"gold"!=r[l].k&&"silver"!=r[l].k||(r[l].u=1);var h=function(){t("UserLogic").award(r,"LEVELGIFT");var a=parseInt(n/1E3);o.set(o.WKD_LEV_GIFT,1E3*(a+1)+c.randInt(1,100)),e&&e.call(i,0)}.bind(this);r.callFunc=h,function(e){0==e.code&&a.EVENT_OPEN_DIALOG({name:t("GameConfig").get("award_low")?"dialog_get_item_low":"dialog_get_item",param:r})}({code:0})},p.isNextChapter=function(){var t=s.geti("lev"),e=h.findMapChapter(t);return e.chapter>1&&t==e.min},p.mainui_showed=function(e){var i=s.geti("lev");t("N7MusicV2").switchVol(1),p.refreshSevenTips(),p.refreshAchievementTips(),6==i&&0==o.geti(o.WKD_WELCOME_GF)&&(o.set(o.WKD_WELCOME_GF,1),s.award(r.WELCOME_GIFT_DATA,"level_5_gift"),a.EVENT_OPEN_DIALOG("dialog_welcome_gift"));var n=!!e&&e.cmp;p.popUpInterface(n),(!s.get("nkname")||s.get("nkname").length<1)&&a.EVENT_OPEN_DIALOG("dialog_change_name"),d.mainui_showed(e)},p.popUpInterface=function(e){t("GuideLogic").hasNextGuide()||t("UIMainV2").instance().__openSeven_days()||e&&p.popUpGateEntrance()},p.popUpGateEntrance=function(){var e=p.canLevelGift()>0,i=p.getStarBox();i.star>=i.max||e||t("UIMainV2").instance().openGateEntrance()},p.game_inited=function(){0==o.get(o.WKD_BACK_GIFT)&&(o.set(o.WKD_BACK_GIFT,1),"0"==t("FamNet").getNU())&&(n.log("\u8001\u73a9\u5bb6\uff0c\u7ed9\u793c\u5305"),s.award([{k:"gold",v:9999},{k:"silver",v:9999},{k:"Drill",v:5}],"BACK_GIFT"),a.EVENT_OPEN_DIALOG("dialog_regression_gift"))},p.refreshRankTips=function(){s.geti("lev"),a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_rank_list",sh:!0,level:3}})},p.refreshSevenTips=function(){var t=s.geti("lev"),e=7==g.refreshSign("s1").data.todayIndex,i=g.getSignState("s1"),n=i!=r.SIGN_END&&i!=r.SIGN_NOTSTART,o=e&&i==r.SIGN_HASSIGN,c=void 0;!o&&e&&(c=l.i18ns("recharge.discount",[l.discount(1)])),a.EVENT_BIGMAP_COMMAND({mainui:{btn:"seven_days",sh:t>=4,level:!n||o?-1:4,info:c,tips:n&&i!=r.SIGN_HASSIGN}})},p.refreshThirtyTips=function(){var t=g.refreshSign("s2"),e=t!=r.SIGN_END&&t!=r.SIGN_NOTSTART;a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_sign_in",sh:e,tips:e&&t!=r.SIGN_HASSIGN}})},p.refreshDesktopTips=function(){var e=s.geti("lev"),i=o.get(o.WKD_ADD_DESKTOP);t("UIMainV2").instance().btn_desktop_c.active=i;var n=t("SdkIns").instance().canPushIcon();a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_desktop",sh:e>=5,level:0==i&&n?5:-1,tips:0==i}})},p.refreshInviteGiftTips=function(){var e=s.geti("lev"),i=t("SdkIns").instance(),n=t("ShareLogic").openShare()&&i.getSdkData("cumshare"),o=!1;if(n){var c=t("ShareLogic").getInviteData();c.hasGetInvAwdNum<c.hasInvNum&&(o=!0)}a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_invite_gift",sh:e>=3&&n,level:n?3:-1,tips:o}})},p.refreshMainUnShare=function(){var e=t("ShareLogic").getWatchOrShare(13),i=e.condition&&!e.hasShare;a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_shareUnheart",sh:i,level:i?1:0}})},p.refreshAchievementTips=function(){var t=s.geti("lev"),e=u.canReceiveAchieve();a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_achievement",sh:t>=9,level:9,tips:e>0,num:l.numOrDot(e)}})},p.refreshDialTips=function(){var e=s.geti("lev"),i=t("ShareLogic").getWatchOrShare(118).condition?1:0;a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_dial",sh:e>=3,level:3,tips:i}})},p.refreshAdsTips=function(){var e=s.geti("lev"),i=t("ShareLogic").getWatchOrShare(100).condition?1:0;a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_ads",sh:e>=3,level:3,tips:i}}),d.refreshNewYearAds()},p.refreshInviteTips=function(){var e=s.geti("lev"),i=t("ShareLogic"),n=i.openShare(8),o=i.getWatchOrShare(8);a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_invite",sh:n&&e>=0,level:n?1:0,tips:o.cd<0,cd:1E3*o.cd}})},p.refreshMailTips=function(){var t=s.allmsgs(),e=0,i=!1;for(var n in t){var o=t[n].type;o==s.MAIL_SYSTEM?i=!0:o==s.MAIL_HEART&&e++}a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_mail_box",sh:!0,tips:i,tipg:e>0,num:l.numOrDot(e)}})},p.refreshGuildTips=function(){a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_guild",tips:!0}})},p.refreshGuildTipg=function(){if(t("FamNet").isNet()){var e=f.allMsg(),i=0,n=null,o=void 0,c=s.pid();for(var r in e){var h=e[r];if(h.type==f.MSGTP_HELP&&(1==(o=(n=h.attach.split("|")).length)&&""==n[0]&&(o=0),h.sender!=c)){if(o<=0){i++;break}for(var u=0;u<o&&n[u]!=c;u++)u+1==o&&i++}}a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_guild",tipg:i>0,num:l.numOrDot(i)}})}},p.showTournamentIcon=function(){a.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_tournament",sh:!0}})},p.getNeedStar=function(t){var e=h.getAllChest()[t],i=e?e.exdt:null;return i||(i=20),0|i},p.getStarBox=function(){var t=o.get(o.WKD_STAR_BOX);0==t&&(t=o.set(o.WKD_STAR_BOX,c.randInt(1,100)));var e=parseInt(t/100),i=p.getNeedStar(1E5+e);return{id:e,rand:t%100,star:s.geti("star"),max:i}},p.getStarBoxDetail=function(){var e=p.getStarBox();return t("ChestRandLogic").randBoxItems(1E5+e.id,e.rand)},p.getLevelBoxDetail=function(){var e=o.get(o.WKD_LEV_GIFT);if(!e)return null;var i=p.__chkLevelGift(e);return t("ChestRandLogic").randBoxItems("1"+Math.abs(i),e%1E3)},p.openStarBox=function(e,i){var n=p.getStarBox();if(n.star<n.max)return e&&e.call(i,1,n.max-n.star);var l=t("ChestRandLogic").randBoxItems(1E5+n.id,n.rand);for(var h in l)"gold"!=l[h].k&&"silver"!=l[h].k||(l[h].u=1);var u=function(){s.award(l,"star_box"),s.sub("star",n.max);var a=n.id+1;o.set(o.WKD_STAR_BOX,100*a+c.randInt(1,100)),t("AchieveLogic").updateAchieve(r.ACHIEVE_TREASURE,1),e&&e.call(i,0)}.bind(this);l.callFunc=u,function(e){0==e.code&&a.EVENT_OPEN_DIALOG({name:t("GameConfig").get("award_low")?"dialog_get_item_low":"dialog_get_item",param:l})}({code:0})},p.setTestTime=function(t){l.setTestTime(t),p.mainui_showed(!0)},p.cleanAll=function(){p.cleanSign(),p.cleanShare(),p.cleanReCharge(),p.setWorkDataArr(o.WKD_BATTLE_GIFT,{}),d.cleanTowerLevel(),p.mainui_showed()},p.cleanSign=function(){t("SignLogic").testDelayed(0)},p.cleanShare=function(){t("ShareLogic").clean()},p.cleanReCharge=function(){t("ReChargeLogic").testDelayed(0)},p.calcCondition=function(t,e){var i=new Date(1E3*l.getCurtm(!0)),n=l.getTimeStameByDate(e.starttm),o=l.getTimeStameByDate(e.endtm);if(n&&i.getTime()<n||o&&i.getTime()>o)return!1;var a=t[e.type];if(null!=a){var s=new Date(1E3*a),c=e.cd[0],r=0|e.cd.substr(1);switch(c){case "y":if(i.getFullYear()-s.getFullYear()<r)return!1;break;case "d":if(i.getDate()-s.getDate()<r)return!1}}var h=e.condition,u=h[0],d=h[1],f=h[2];switch(u){case "hasNotGet":return null==t[d];case "checkWeek":return-1!=h.indexOf(""+l.getWeek(!0));case "checkDate":return i.getMonth()+1==d&&i.getDate()==f}return!0},p.canRandGift=function(){if(1==t("SdkIns").instance().getSdkData("randGift")){var e=t("ShareLogic");if(!e.openAd(110)&&!e.openShare(110))return!1;if(!e.getWatchOrShare(110).condition)return!1;var i=s.geti("lev"),n=p.getWorkDataArr(o.WKD_BATTLE_GIFT);return!p.hasGetGift(2,i,n)&&(null!=n[0]&&l.isEqualDay(!0,n[0])?(i-n[1])%4==0:(n[0]=l.getCurtm(!0),n[1]=i,p.setWorkDataArr(o.WKD_BATTLE_GIFT,n),!0))}},p.canDispelGift=function(t){var e=s.geti("lev");return!p.hasGetGift(3,e)&&t>=p.getMaxCnt(e)},p.getMaxCnt=function(t){null==t&&(t=s.geti("lev"));var e=12;return t>=200?e=10:t>=101&&(e=11),e},p.hasGetGift=function(t,e,i){return null==e&&(e=s.geti("lev")),null==i&&(i=p.getWorkDataArr(o.WKD_BATTLE_GIFT)),e==i[t]},p.openGiftUI=function(e,i,n){var o=t("ShareLogic");if((o.openAd(e)||o.openShare(e))&&o.getWatchOrShare(e).condition){var s=c.randArray([9,10,11]),r=[{k:h.item(s).id_name,v:1}],l=t("UIBattleShare");r.title="battle_share.title"+l.uiObj[e],r.info="battle_share.info"+l.uiObj[e],r.greentxt="share.title",t("GameEvent").EVENT_OPEN_DIALOG({name:"dialog_battle_share",param:{shareId:e,awd:r,callFunc:function(){i&&i.call(n),delete r.title,delete r.info,delete r.greentxt,r.callFunc=function(){a.EVENT_GAME_BATTLE_TOITEMS(r)},a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:r})},caller:null}})}},p.getAwdFunc=function(t){p.setWDIndexValue(o.WKD_BATTLE_GIFT,t,s.geti("lev"))},p.setWDIndexValue=function(t,e,i){var n=p.getWorkDataArr(t);n[e]=i,p.setWorkDataArr(t,n)},p.getWorkDataArr=function(e){var i=t("ShareLogic").__SP2,a=[],s=o.get(e);if("number"!=typeof s){var c=(s=s.substring(1)).split(i);c&&""!=c[0]&&(a=c)}return n.log("GameLogic.getWorkDataArr: "+e+": "+JSON.stringify(a)),a},p.setWorkDataArr=function(e,i){var a=t("ShareLogic").__SP2,s="";if(null!=i){s=o.STR;for(var c=0;c<i.length;c++)s+=i[c]+a;s=s.substring(0,s.length-1)}o.set(e,s),n.log("GameLogic.setWorkDataArr: "+e+": "+s)},cc._RF.pop()},{AchieveLogic:"AchieveLogic",ActivityLogic:"ActivityLogic",ChestRandLogic:"ChestRandLogic",FamNet:"FamNet",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",GuildLogic:"GuildLogic",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",N7MusicV2:"N7MusicV2",N7Sound:"N7Sound",ReChargeLogic:"ReChargeLogic",SdkIns:"SdkIns",ShareLogic:"ShareLogic",SignLogic:"SignLogic",UIBattleShare:"UIBattleShare",UIGameUseItem:"UIGameUseItem",UIGateEntrance:"UIGateEntrance",UIMainV2:"UIMainV2",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],GameMapCube:[function(t,e,i){cc._RF.push(e,"c2ca0rxKChIaKssfGyYvr3T","GameMapCube");var n=function(){};n.prototype.back=null,n.prototype.normal=null,n.prototype.buff=null,n.prototype.tranform=null,e.exports=n,cc._RF.pop()},{}],GameMapV2:[function(t,e,i){cc._RF.push(e,"e970esD+YRA6qfTnPOBAYL+","GameMapV2");var n=t("RandTile"),o=t("GameTools"),a=t("GMapData"),s=t("GBlock"),c=t("Dispel"),r=t("Prop"),l=t("GameEvent"),h=t("GameConfig"),u=t("MathUtils"),d=t("n7"),f=t("GameCommon"),g=t("JsonMetaCache"),p=function e(){var i=1,p=null,_=0,m=0,v=null;this.clearAndNew=function(i,o){d.isDebug&&(e.BACKSTEPDATALENGTH=100),this.canUseBack=e.BACKSTEPDATALENGTH,this.s_uniqueId=1,this.p=i,this.xcount=1*o.width,this.ycount=1*o.height,this.mapDatas=[],this.tpCnt=[],this.openCr=[],this.cannon=[],this.chgToItemList={},this.useItemList={},this.hasCreateOpenCr={},this.collectList={},this.lockList={},this.openLockList=!0,this.randGift=!1,this.dispelGift=!1,this.cannotBirthPos=[],this._CUBEC_=null,this._TOPY_={},this.h_ice=!1,this.crtIce=!1,this.unaprop=!1;var s=t("MapTarget");(v=new s).setTarget(o.properties),this.xlist=[],this.backStepData=[],m=0,p=new n;var c=void 0,r=void 0;for(c=0;c<this.xcount;c++)for(r=0;r<=this.ycount;r++)this.mapDatas[this.calcIdx(c,r)]=new a(c,r);l.on(l.EVENT_GAME_BUYED5STEP,function(t){this.buyed5Step(t.getUserData())},this),l.on(l.EVENT_GAME_NEXTGUIDE,function(t){this.nextGuide(t.getUserData())},this)},this.onDestroy=function(){l.off(this),v&&v.onDestroy(),p&&p.onDestroy()},this.getDrops=function(){return p},this.calcIdx=function(t,e){return o.ptoidx(t,e)},this.btom=function(t){return this.getMapData(t.getx(),t.gety())},this.getMapData=function(t,e){return t<0||e<0?null:t>=this.xcount||e>this.ycount?null:this.mapDatas[this.calcIdx(t,e)]},this.__init=function(e,i,n){var o=this,a=i.width,s=i.height-1,c=[],r=void 0,l=void 0,h=void 0,d=void 0,g=void 0,m=void 0,v=void 0;_=0,this.mapid=e,p.init(e,this);var E={tile_w:i.tilewidth,tile_h:i.tileheight,h:s};for(this.order=[],v=0;v<this.xcount;v++)this.order.push(v);var y=void 0;for(v=0;v<i.layers.length;v++)switch((r=i.layers[v]).name){case "grid":y=r.data;break;case "hat":p.hat(r);break;case "barrel":p.barrel(r);break;case "carpet":this.__crCubes(r.objects,function(t,e){t.carpet=e},E);break;case "conveyor":this.conveyor(r.objects,E);break;case "portal":this.portal(r.objects,E);break;default:if(r.name.indexOf("negative")>=0){this.__crCubes(r.objects,function(t,e){e.list=[e],e.isBubble()?t.bub=e:e.isCage()&&(t.cage=e)},E);break}r.name.indexOf("group")>=0&&p.initDrops(r)}for(d=0;d<y.length;d++)if(0!=(g=y[d]))if(l=d%a,h=s-parseInt(d/a),(m=this.getMapData(l,h).active()).setGroup(g))c.push({x:l,y:h});else if("continue"===function(){var t=o.crCube(l,h,g,m.group);if(!t)return"continue";m.block=t,t.isG4()&&(o.callG4Func(t.getG4(),function(e,i){this.setBlock(l+e,h+i,t)}),o.addToCollectList(t))}())continue;if(c.length>0)for(var b=0;b<c.length;b++)r=c[b],(m=this.getMapData(r.x,r.y).active()).block=this.crInitCube(m);if(p.inited(),this.param=n,this.goals().getHard()&&t("ShareLogic").inHardMap(e),this.initDynamicHard(),!t("GuideLogic").inMapHasGuide(this.mapid)&&t("GameLogic").canRandGift()){var I=this.calc_type_count()[f.tile_type_cube];if(I){var T=u.randArray(I);T&&(T.exdt.randGift=1,this.cannotBirthPos.push(10*T.getx()+T.gety()))}}return this.mapDatas},this.initDynamicHard=function(){if(!t("ActivityLogic").isTowerMap(this.mapid)){var e=t("GameLogic").getWinOrLoseCount();this.extraTileList=p.chgRatioByCount(e);for(var i=0;i<this.extraTileList.length;i++){var n=g.tile(this.extraTileList[i]);n&&(this.extraTileList[i]=n.res_id)}this.failedPreItems=t("GameLogic").getFailedPreItems(this.mapid)}},this.getExtraTileList=function(){return this.extraTileList},this.addToCollectList=function(t){var e=t.exdt;if(null!=e.collectObj){var i=e.collectObj[0];this.collectList[i]||(this.collectList[i]=[]),this.collectList[i].push(t)}},this.collectBlock=function(t){var e=this.getCollectBlock(t);if(null!=e){var i=e.exdt;i.hasCollectCount=1+(0|i.hasCollectCount),d.isDebug&&d.log("collectBlock: "+e.gid+",exdt: "+JSON.stringify(i)),i.hasCollectCount>=i.collectObj[1]&&this.collectList[t].shift()}return e},this.getCollectBlock=function(t){var e=null,i=this.collectList[t];return null!=i&&(e=i[0]),e},this.dispelRocker=function(t,e){var i=null,n=this.getMapData(t,e);if(n&&n.block){var o=n.block,a=o.exdt;i=this.makeOut(o),r.rockerLine(i,this,n,0|a.dir),this.gDestroy(i,n.block)}return i},this.callG4Func=function(t,e){for(var i=t.w,n=t.h,o=i>0?i:0,a=n>0?0:n,s=n>0?n:0,c=i>0?0:i;c<=o;c++)for(var r=a;r<=s;r++)0==c&&0==r||e.call(this,c,r)},this.conveyor=function(t,e){var i=this.covs=[];this.__crCubes(t,function(t,e){t.cov=e,i.push(t)},e)},this.getCovs=function(){return this.covs},this.goals=function(){return v},this.portal=function(t,e){var i={};this.__crCubes(t,function(t,e){t.tf=e,e.list=[e],i[e.getId()]=t},e);var n=void 0,o=[],a=void 0,s=void 0;for(var c in i)(n=i[c].tf.getExdti("tfto",0))<1||(a={x:i[n].getx(),y:i[n].gety()},i[c].tfto=a,i[n].tffr={x:i[c].getx(),y:i[c].gety()},o.push({id:n,x:a.x}),(s=this.getMapData(a.x,a.y+1))&&(s.offdown=1));o.sort(function(t,e){return e.id-t.id});for(var r=this.order,l=o.length-1;l>=0;l--)r.unshift(o[l].x);this.order=u.unique(r)},this.crCube=function(t,e,i,n){var o=p.get(i);if(!o){var a=g.tile(i);a&&(o={meta:a,ext:a.exdt,gn:n})}return o?this.crBlock(t,e,o):null},this.crBlock=function(t,e,n){var a=new s(i++,t,e);return a.mvtm=this.getMoves(),a.crtm=a.mvtm,a.setBlock(n),o._2ArrPush(this.tpCnt,a.getType(),a),a},this.createBlock=function(t,e){var i=p.rand(this,t,e);if(9==i.meta.type){var n=v.isTarget(i.meta);(0==n||this.getCount(9)>=n)&&(i=p.randCubeFormColors(this))}return this.crBlock(t,e,i)},this.randMapColor=function(){return p.randCubeFormColors()},this.setBlock=function(t,e,i){var n=this.getMapData(t,e);n&&(n.active(),n.block=i)},this.__crCubes=function(t,e,i){for(var n=void 0,o=void 0,a=void 0,s=void 0,c=0;c<t.length;c++)n=t[c],o=parseInt(n.x/i.tile_w),a=i.h-parseInt(n.y/i.tile_h-1),(s=this.getMapData(o,a)).active(),e(s,this.crCube(o,a,n.gid,s.group))},this.crInitCube=function(t){var e=p.initRandCube(t);return e?this.crBlock(t.getx(),t.gety(),e):(console.error("not find rand cube:"+t.getx()+","+t.gety()),null)},this.randByGup=function(t){return p.randByGup(t)},this.getGupColors=function(){return p.colors},this.battleToItems=function(t){var e=this.getTileOfTpCnt();if(!(e.length<1)){e=o.upset(e);var i=this.getCanotBirthPos(),n=this.makeOut();for(var a in t)if(t[a]&&t[a].k){var s=t[a].k;this.toItems(s,e,i,n)}return this.checkMapTileList(n)}},this.toItems=function(e,i,n,o){var a,s=void 0,c=void 0,r=t("StringUtils");if(!(a=g.itemn(e)))return!1;var l=r.toKeyValue(a.exdt),h=l.addSteps;if(null!=h&&this.buyed5Step({step:h}),!(c=l.chg))return!1;-1==c[0]&&(c=c.filter(function(t){var e=g.tile(t);return null!=e&&-1!=p.cubeColors().indexOf(e.color+"")}));var d=u.randArray(c);if(i.length<1)return!1;for(var f=10*(s=i.pop()).getx()+s.gety();null!=n&&-1!=n.indexOf(f);)f=10*(s=i.pop()).getx()+s.gety();return s&&(this.gChgTo(o,this.btom(s),d,1).datas.preBattle=1),!0},this.preBattle=function(e){var i=this.param;if(e||(i=t("ActivityLogic").assaultpreBattle(i)),!i)return this.inited();var n=this.getTileOfTpCnt();n=o.upset(n);var a=this.makeOut();this._SUBITEMS_=[];var s=this.getCanotBirthPos(),c=this.failedPreItems;for(var r in c)i[r]=(0|i[r])+(0|c[r]);for(var l in i)if(i[l]){for(var h=1==i[l]?1:i[l],u=0;u<h;u++)this.toItems(l,n,s,a);this._SUBITEMS_.push(l)}return e&&(this._SUBITEMS_=void 0),this._SUBITEMS_&&t("AchieveLogic").updateAchieve(f.ACHIEVE_PREBATTLEITEM,this._SUBITEMS_.length),this.checkMapTileList(a)},this.getCanotBirthPos=function(){for(var e=g.map(this.mapid),i=e?e.g_guide:null,n=g.item(i),o=null,a=[];n;)(o=t("StringUtils").toKeyValue(n.info))&&o.grids&&(a=a.concat(o.grids)),n=g.item(n.next);return a=a.concat(this.cannotBirthPos),d.isDebug&&d.log("getCanotBirthPos: "+JSON.stringify(a)),a},this.inited=function(t){return t||(t=this.makeOut()),this.checkMapTileList(t),c.__chkEnd(this,this.tpCnt,t)},this.checkMapTileList=function(t){for(var e=c._SAMECOLOR_(++m),i=void 0,n=0;n<this.xcount;n++)for(i=0;i<=this.ycount;i++){var o=this.getMapData(n,i);o&&o.invalid()&&c.__sameMData(this,o,e.clean())}return t&&t.cmds.push({cmd:f.com_chglist}),t},this.getChkid=function(){return++m},this.makeOut=function(t){var e={nchk:[],statu:_,cmds:[],total:0};return t&&(e.meta=t.meta,e.pos=t.getPos?t.getPos():t.pos),e.uniqueId=++this.s_uniqueId,e},this.getUniqueId=function(){return++this.s_uniqueId},this.crtItems=function(t){var e=this.makeOut();return c.crtItems(this,e,null,t),e},this.cleanLock=function(){this.openLockList&&(this.lockList={})},this.lockGblock=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.LOCK_ALL;return this.openLockList?(null==this.lockList[t]&&(this.lockList[t]=0),this.lockList[t]=this.lockList[t]|e,this.lockList[t].toString(2)):null},this.unLockGblock=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.LOCK_ALL;return this.openLockList?(this.lockList[t]=(this.lockList[t]^e)&this.lockList[t],null!=this.lockList[t]?this.lockList[t].toString(2):null):null},this.checkBlockLock=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.LOCK_ALL;return!!this.openLockList&&(this.lockList[t]&e)==e},this.lockFromCmds=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.LOCK_ALL;if(this.openLockList)for(var n=t.length,o=0;o<n;o++){var a=t[o];a&&a.cmd==e&&this.lockGblock(a.datas.gid,i)}},this.logicEnd=function(){return v.getMove()<1||v.isAllDone()},this.dispel=function(t,e,i,n){if(!i&&b>0)return this.nextGuideFailed(),void d.log("wj.dispel have next gudid:"+b);var o=this.getMapData(t,e);if(o&&o.block){if(!(n&&v.getMove()<1)&&o.getDef("click")&&!this.checkBlockLock(o.block.gid)){var a=null;return o.block.isProp()?(!i&&this.saveCurRecord(),a=r.__use(this,o.block,i)):c.can(o)&&(a=c.__dsp(this,o,i)),this.dispeled(a,i),a}}else d.log("dispel md is null:"+t+","+e)},this.dispeled=function(t,e){t&&(e||v.subMove(),c.operSpTileAtLeast(this,t,e),this.calcScore(t,e))},this.calcScore=function(t,i,n){if(t&&t.cmds&&t.meta){for(var o,a=void 0,s=0,c=0,r=f.COEFF,l=void 0,h=t.meta.type==f.tile_type_cube,u=0;u<t.cmds.length;u++){if((a=(l=t.cmds[u]).cmd)==f.com_useitem){var g=l.datas.exdt.coeff;null!=g&&(r*=g),c++,d.isDebug&&d.log("scorefly.calcScore.\u4f7f\u7528\u9053\u5177\u589e\u52a0\u6b21\u6570: "+c)}a==f.com_destroy&&(n||l.meta.type==f.tile_type_cube)&&s++,a==f.com_merge&&h&&s++}o=e.__calcScore(s+=c,r),d.isDebug&&d.log("scorefly.calcScore.\u6d88\u9664\u65b9\u5757\u5f97\u5206: "+o+",total: "+s),t.score=o+0,t.color=2}},this.gDestroy=function(t,e){var i=this.btom(e),n=i?i.onDestroy(this,t):-1;if(2==n&&e.isG4()){var o=i.getx(),a=i.gety();this.callG4Func(e.getG4(),function(t,e){this.setBlock(o+t,a+e,null)})}return n>0},this.gCarpet=function(t,e){e.carpet||(e.carpet=this.gCreate(t,{x:e.getx(),y:e.gety()},{id:84,gup:-1}))},this.gCreate=function(t,e,i){var n=this.crCube(e.x,e.y,i.id);return n.onCreate(this,t,e,i.gup),i.lay&&(this.getMapData(e.x,e.y)[i.lay]=n),n},this.gCreate2=function(t,e){var i=this.createBlock(e.x,e.y);return i.setPos(e.x,e.i),i.onCreate(this,t,{x:e.x,y:e.i}),i},this.gBuff=function(t,e,i){if(!e.buff){void 0==i&&(i=f.id_tile_bubble);var n=this.crCube(e.getx(),e.gety(),i);n.onCreate(this,t,e.cpos(),2),e.buff=n}},this.gDown2=function(t,e,i){var n=e.getPos(),o=this.getMapData(n.x,n.y);o&&o.onDown(),e.isG4()&&this.callG4Func(e.getG4(),function(t,e){var i=this.getMapData(n.x+t,n.y+e);i&&i.onDown()}),null!=(o=this.getMapData(n.x,i))&&(o.block=e,e.isG4()&&this.callG4Func(e.getG4(),function(t,o){this.setBlock(n.x+t,i+o,e)}),e.setPos(n.x,i),o.onDowned(this,t,n))},this.gChgTo=function(t,e,i,n){return e?e.onChgTo(this,t,i,n):null},this.gTf=function(t,e,i){var n=e.cpos(),o=this.getMapData(n.x,n.y);o.block=null,(o=this.getMapData(i.x,i.y)).onTransfer(this,t,e,n)},this.gAProp=function(t,e){var i=this.btom(e);return i?i.onAProp(this,t):null},this.setTarFlagToCmd=function(t,e,i,n){if(v.dispelTarget(i)>0&&(e.datas.tar=1),n&&e&&e.meta){var o=this.collectBlock(e.meta.id);null!=o&&(e.datas.tar=1,e.datas.tarData=o.getTarData(),d.isDebug&&d.log("collectBlock.setTarFlagToCmd: "+JSON.stringify(e.datas.tarData)))}};var E=[{id:38,rdir:1},{id:36,rdir:0}];this.oneRator=function(t){this.ratorCount=t},this.getRandRotor=function(){return this.ratorCount>0?(--this.ratorCount,E[1]):u.randArray(E)},this.chgToItem=function(e,i){var n=e.getExdti("merge");if(n)return n;var o=h.get("debug_merge_item",0);return o>0?o:i>=f.merge_mcube_cnt?(t("AchieveLogic").updateAchieve(f.ACHIEVE_MAGICCUBE,1),41+e.getColor()):i>=f.merge_tnt_cnt?(t("AchieveLogic").updateAchieve(f.ACHIEVE_BOMB,1),86):i>=f.merge_rotor_cnt2?(t("AchieveLogic").updateAchieve(f.ACHIEVE_ROTOR,1),this.getRandRotor()):i>=f.merge_rotor_cnt1?(t("AchieveLogic").updateAchieve(f.ACHIEVE_ROTOR,1),this.getRandRotor()):0},this.checkCanGift=function(){var e=t("GameLogic"),i=1==t("SdkIns").instance().getSdkData("randGift"),n=1==t("SdkIns").instance().getSdkData("dispelGift");if(i&&this.randGift)return e.openGiftUI(110,function(){e.getAwdFunc(2)},this),void(this.randGift=!1);!(b||y)&&n&&this.dispelGift&&(e.openGiftUI(111,function(){e.getAwdFunc(3)},this),this.dispelGift=!1)},this.isBottom=function(t){if(this.getMapData(t.x,t.y).tfto)return!1;if(t.y<=0)return!0;for(var e=t.y-1;e>=0;e--)if(this.invalid(t.x,e))return!1;return!0},this.getTopMapData=function(t){if(!this._TOPY_[t])for(var e=0;e<this.ycount+1;e++)this.getMapData(t,e).invalid()?this._TOPY_[t]&&(this._TOPY_[t]=void 0):this._TOPY_[t]||(this._TOPY_[t]=e);return this.getMapData(t,this._TOPY_[t])},this.calc_type_count=function(){var t=void 0,e=void 0;for(var i in this.tpCnt)this.tpCnt[i]=[];for(e=0;e<this.ycount;e++)for(t=0;t<this.xcount;t++)this.mapDatas[this.calcIdx(t,e)].tileCnt(this.tpCnt);return this.tpCnt},this.getTileOfTpCnt=function(t){return this._getBOfTpCnt(t)},this.getPropOfTpCnt=function(t){return this._getBOfTpCnt(t,f.PROP_TYPES)},this._getBOfTpCnt=function(t,e){void 0==t&&(t=this.tpCnt),void 0==e&&(e=f.TILE_TYPES);var i=[];for(var n in t)for(var o in e)if(n==e[o]){i=i.concat(t[n]);break}return i},this.getTileByTileId=function(t){var e=g.tile(t);if(e){var i=this._getBOfTpCnt(null,[e.type]);return null!=i?i.length:0}return 0},this.getBOfTp=function(t){return this.tpCnt[t]},this.statu=function(t){return _==t},this.getCount=function(t){var e=this.tpCnt[t];return e?e.length:0},this.invalid=function(t,e){var i=this.getMapData(t,e);return!!i&&i.invalid()},this.makeDown=function(t){var e=c.__down(this);return!t&&this.statu(0)&&this.checkMapTileList(e),e},this.pushToyd=function(t){this.toyds||(this.toyds=[]),this.toyds.push(t)},this.getToyd=function(){var t=this.toyds;return this.toyds=null,t},this.makeToy=function(){var t=c.__toy(this,this.makeOut());return t?(c.__down(this,t),this.checkMapTileList(t),d.log("wj.makeToy:"+this.getMoves()),t):null},this.useItem=function(t,e,i){var n=this.getMapData(t,e);if(!r.canUseUItem(this,n,i))return null;var o=r.useUItem(this,n,i);return c.operSpTileAtLeast(this,o,!1),this.calcScore(o,!1,!0),o},this.cubeTips=function(){return c.__tips(this)},this.chgPreItem=function(t){return this.param=t,this.preBattle(!0)},this.checkRealign=function(){var t=this.makeOut(),e=this.calc_type_count();return this.checkMapTileList(),c._chkEnd(this,e)&&t.cmds.push({cmd:f.com_realign,datas:{}}),t},this.roundEnd=function(t,e){var i=!!t||v.getMoveStep()>0;if(d.isDebug&&d.log("wj.roundEnd:"+this.getMoves()+",chk: "+t+",click: "+e+",end: "+i+",moveStep: "+v.getMoveStep()),v.isAllDone())return this.balance(1);var n=c.__roundEnd(this);return n.needbalance?this.balance(3,n):i?(y>0&&this.showGuideUi(),n):(d.isDebug&&d.log("wj.roundEnd 2"),this.balance(2,n))},this.chgState=function(){var t=this.makeOut();return c.chgState(this,t),t},this.balance=function(t,e){return _==t?e:(_=t,e||(e=this.makeOut()),e.cmds.push({cmd:f.com_balance,datas:{statu:t}}),1==_&&(l.EVENT_GAME_BALANCE(_),this._bend_=0,this.bal(e)),e)},this.bal=function(t){if(1!=_)return null;switch(t||(t=this.makeOut()),this._bend_){case 0:if(this._bend_=1,r.runAll(this,t))break;case 1:this._bend_=2,this.unaprop=1;var e=v.getBMoves();if(r.chgProps(this,t,e)){this.unaprop=0;break}case 2:default:this._bend_=3,t._2bao=1,r.runAll(this,t)}return t},this.endCalScore=function(t){var e=0;if(1==this._bend_){var i=v.getBMoves();r.chgProps(this,t,i)}this.cleanLock();for(var n=this.getPropOfTpCnt(this.calc_type_count()),o=void 0,a=void 0,s=0;s<n.length;s++)o=n[s].pos.x,a=n[s].pos.y,(t=this.dispel(o,a,!0))&&(e+=t.score,this.makeDown(t));l.EVENT_GAME_ADD_SCORE(e)},this.calculateStar=function(){var t=v.getBMoves()*e.ITEMSCORE;return d.isDebug&&d.log("scorefly.calcScore.\u7ed3\u7b97\u6b65\u6570\u589e\u52a0\u7684\u5206\u6570: "+t),l.EVENT_GAME_ADD_SCORE(t),this.goals().getBalData()},this.getMoves=function(){return v.getMoveStep()},this.getNextColor=function(t){var e=0,i=p.cubeColors(),n=f.colors_next,o=n.length,a=n.indexOf(t);for(e=n[a=(a+1)%o];-1==i.indexOf(e);)e=n[a=(a+1)%o];return e},this.cubeColors=function(){return this._CUBEC_||(this._CUBEC_={c:p.cubeColors(),index:0,next:function(t){var e=this.index+1;return e>=this.c.length&&(e=0),t&&(this.index=e,l.EVENT_GAME_CUBECOLOR_CHG(this)),this.c[e]},get:function(){return this.c[this.index]}}),this._CUBEC_},this.realign=function(){var t=c.realign(this,this.calc_type_count());return t?this.checkMapTileList(t):(console.error("can not realign!"),console.log(this.mapDatas),void console.log(this.tpCnt))},this.buyed5Step=function(t){_=0,v.addMoveStep(t.step),t.item?d.log("buy 2 :push a "+t.item):l.EVENT_GAME_BUYED5STEP2()};var y=0;this.guide=function(t){10053==t&&(this._CHGCUBEGRIDS_=1),y=t};var b=0,I=0;this.nextGuideFailed=function(){++I>=5&&(b=0)},this.nextGuide=function(t){d.log("wj.nextGuide:"+t),b=t,I=0},this.getGuide=function(){return y},this.showGuideUi=function(){l.EVENT_OPEN_GAME_GUIDE(y),y=0,b=0},this.getPosAllTileOfColor=function(t,e){var i=void 0,n=void 0,o=void 0;for(o=0;o<this.ycount;o++)for(n=0;n<this.xcount;n++)i=this.getMapData(n,o).block,nd&&i.isTile()&&i.color==t&&e.push(10*n+o);return e},this.getChgCubeTile=function(){if(this._CHGCUBEGRIDS_)return this._CHGCUBEGRIDS_=void 0,this.getMapData(0,1).block;var t=this.getTileOfTpCnt();return u.randArray(t)},this.saveCurRecord=function(){this.backStepData.length>=e.BACKSTEPDATALENGTH&&this.backStepData.shift();var t={};t.mapRecord=this.getRecordData(),t.mapTarget=this.goals().getRecordData(),this.backStepData.push(t)},this.runLastRecord=function(t){if(!(this.backStepData.length<1)){var e=this.backStepData.pop();this.runByRecordData(e.mapRecord,t),this.goals().runByRecordData(e.mapTarget,t),--this.canUseBack<=0&&l.EVENT_GAME_LOCK_ITEM({lock:20})}},this.getRecordData=function(){var t={},i=void 0,n=void 0,o=void 0;for(i in this.mapDatas)n=this.mapDatas[i],t[i]={},e.GMAPDATALAYER.map(function(e){(o=n[e])&&(i==this.calcIdx(o.pos.x,o.pos.y)?t[i][e]={id:o.getId(),data:o.getData()}:t[i][e]={id:null})}.bind(this));return t.h_ice=this.h_ice,Object.assign(t.hasCreateOpenCr={},this.hasCreateOpenCr),t},this.runByRecordData=function(t,e){this.collectList={};var i=void 0;for(i in this.mapDatas)this.logicChgTo(this.mapDatas[i],t[i]);var n={cmd:f.com_undo};e.out.cmds.push(n),this.checkMapTileList(e.out),this.h_ice=t.h_ice,this.hasCreateOpenCr=t.hasCreateOpenCr},this.logicChgTo=function(t,i){e.GMAPDATALAYER.map(function(e){if(i[e]){var n=i[e].id;if(null==n)return;var o=t.getPos().x,a=t.getPos().y,s=i[e].data;t[e]=this.crCube(t.getx(),t.gety(),n),t[e].dataChgTo(s),t[e].isG4()&&(this.callG4Func(t[e].getG4(),function(i,n){this.setBlock(o+i,a+n,t[e])}),this.addToCollectList(t[e]))}else t[e]=null}.bind(this))},this.recordChgToItem=function(t){if(d.isDebug){t.id&&(t=t.id);var e=g.tile(t).name;this.chgToItemList[e]||(this.chgToItemList[e]=0),this.chgToItemList[0]||(this.chgToItemList[0]=0),this.chgToItemList[e]++,this.chgToItemList[0]++,d.log("record.\u5408\u6210\u9053\u5177."+e+": "+JSON.stringify(this.chgToItemList)+",\u603b\u5408\u6210\u6b21\u6570: "+this.chgToItemList[0])}},this.recordUseItem=function(t){if(d.isDebug){t.id&&(t=t.id);var e=g.tile(t).name;this.useItemList[e]||(this.useItemList[e]=0),this.useItemList[0]||(this.useItemList[0]=0),this.useItemList[e]++,this.useItemList[0]++,d.log("record.\u4f7f\u7528\u9053\u5177."+e+": "+JSON.stringify(this.useItemList)+",\u603b\u4f7f\u7528\u6b21\u6570: "+this.useItemList[0])}},this.goalToStr=function(){return v.goalToStr()},this.testClickCube=function(e,i){var n=t("UIGameV2"),o=this.calcIdx(e,i);if(n&&n.instance()&&n.instance().gameMap&&n.instance().gameMap.cubesMap){var a=n.instance().gameMap.cubesMap[o];a&&a.node&&n.instance().clickCube({cube:a.node})}},this.testUseItem=function(e,i,n){var o=t("UIGameV2"),a=this.calcIdx(e,i);if(o&&o.instance()&&o.instance().gameMap&&o.instance().gameMap.cubesMap){var s=o.instance().gameMap.cubesMap[a].node;s&&o.instance().useItem({cube:s},n)}},this.testClickBtn=function(e,i){var n=t("N7UIManager").instance().getDialogByName(e);if(n){var o=n.getComponent("UIDialog");o&&o[i]()}},this.startRand=function(){this.startRandIndex=setInterval(function(){if(!this.statu(0))return this.testClickBtn("dialog_adding_steps","keepPlaying"),this.testClickBtn("dialog_gateEntrance","startGame"),void this.testClickBtn("dialog_buy_heart","buyProp");var t=u.randInt(0,this.xcount),e=u.randInt(0,this.ycount);if(Math.random()>.5)this.testClickCube(t,e);else{var i=u.randInt(1,5);this.testUseItem(t,e,i)}}.bind(this),5)},this.endRand=function(){clearInterval(this.startRandIndex)},this.testTime=function(t){console.time("testTime");for(var e=0;e<t;e++)this.checkMapTileList();console.timeEnd("testTime")},this.testBalance=function(){this.goals().end()}};p.__calcScore=function(t,e){return e||(e=40),t<1?0:1==t?40:(t*(t+1)/2-1)*e},p.ITEMSCORE=560,p.TOYSCORE=0,p.COEFF=40,p.BACKSTEPDATALENGTH=1,p.GMAPDATALAYER=["block","buff","bub","cage"],p.MAPSTATICSCORE={1:[500,1E3,1500],2:[500,1E3,1500]},p.STAR3=10,e.exports=p,cc._RF.pop()},{AchieveLogic:"AchieveLogic",ActivityLogic:"ActivityLogic",Dispel:"Dispel",GBlock:"GBlock",GMapData:"GMapData",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",MapTarget:"MapTarget",MathUtils:"MathUtils",N7UIManager:"N7UIManager",Prop:"Prop",RandTile:"RandTile",SdkIns:"SdkIns",ShareLogic:"ShareLogic",StringUtils:"StringUtils",UIGameV2:"UIGameV2",n7:"n7"}],GameParam:[function(t,e,i){cc._RF.push(e,"5546bJ58T5LrIE1BF1gUHYT","GameParam"),cc._RF.pop()},{}],GameTools:[function(t,e,i){cc._RF.push(e,"aec73/HRMVBo5JoDVJPnvoM","GameTools");var n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)},o=t("n7"),a=t("GameCommon"),s=t("GameConfig"),c=t("MathUtils"),r=t("JsonMetaCache"),l=t("StringUtils"),h=t("N7Resource"),u=function(){};u.stringToObject=function(t,e,i,n){if(!t||!t.length)return null;for(var o=t.split(";"),a=e||n?{}:[],s=i?i.length:0,c=n?n.length:0,r=0,l=o.length;r<l;r++){var h=o[r],d=s>r?i[r]:null;if(e){var f=h.indexOf("\x3d");a[c>r?n[r]:h.substring(0,f)]=u.stringToValue(h.substring(f+1),d)}else{var g=u.stringToValue(h,d);if(c>0){if(!(c>r))break;a[n[r]]=g}else a.push(g)}}return a},u.stringToValue=function(t,e){switch(e){case "v":return l.convertVec2(t);case "f":return parseFloat(t);case "d":return parseInt(t);case "b":return"t"==(t=t.toLowerCase())||"1"==t||"true"==t;default:return t}},u.getFName=function(t){return/^[\s\(]*function(?:\s+([\w$_][\w\d$_]*))?\(/.exec(t.toString())[1]||""},u.removeHex=function(t,e){return(t^e)&t},u.isItem=function(t){var e=null;if(!(e="object"===(void 0===t?"undefined":n(t))?t:r.tile(t)))return!1;for(var i=a.PROP_TYPES,o=e.type,s=0;s<i.length;s++)if(o==i[s])return!0;return!1},u.isMagicCube=function(t){return t>=41&&t<=47},u.isProp=u.isItem,u.getCanavasContent=function(){return cc.Canvas.instance.node.getContentSize()},u.nodeAdd=function(t,e,i){e instanceof cc.Component&&(e=e.node),void 0===i&&(i=e),i instanceof cc.Component&&(i=i.node);var n=c.convertToWorldVec2(e);n=t.convertToNodeSpaceAR(n),i.parent=t,i.setPosition(n)},u.chd=function(t,e){if(!t||!cc.isValid(t))return null;if(!e)return t;if(!(t instanceof cc.Node))return console.error("param node type is no cc.Node "),null;for(var i=e.split("/"),n=t,a=0;a<i.length;a++)if(null===(n=n.getChildByName(i[a])))return o.log("not child find "+e),null;return n},u.show=function(t,e){var i=u.chd(t,e);return i&&(i.active=!0),i},u.hide=function(t,e){var i=u.chd(t,e);return i&&(i.active=!1),i},u.sh=function(t,e,i){var n=u.chd(t,e);return n&&(n.active=i),n},u.scale=function(t,e,i){var n=u.chd(t,e);return n&&(n.scale=i),n},u.cmpt=function(t,e,i){var n=u.chd(t,e);return n?n.getComponent(i):null},u.schex=function(t,e,i){var n=u.chd(t,e);n&&(n.color=n.color.fromHEX(i))},u.text=function(t,e,i){var n=u.cmpt(t,e,cc.Label);n&&(n.string=i)},u.i18n=void 0,u.i18ns=function(t,e){u.i18n||u.setLanguage();var i=u.i18n.t(t);if(e&&e.length>0)for(var n=0;n<e.length;n++)i=i.replace("%"+(n+1),e[n]);return i},u.setLanguage=function(e){void 0==e&&(e=s.get("Lang","en")),(u.i18n=t("LanguageData")).init(e),u.CULANG=e,u.i18n.updateSceneRenderers()},u.getLanguage=function(){return u.CULANG},u.textp=function(t,e,i,n){var o=u.i18ns(i,n);o&&u.text(t,e,o)},u.richp=function(t,e,i,n){var o=u.i18ns(i,n);if(o){var a=u.cmpt(t,e,cc.RichText);a&&(a.string=o)}},u.unbtn=function(t){t.off(a.touchstart,t.startFunc,t),t.off(a.touchend,t.endFunc,t),t.off(a.touchcancel,t.cancelFunc,t),t.startFunc=null,t.endFunc=null,t.cancelFunc=null},u.btn=function(e,i,n,o){var s=2==n;n&&(n={x:e.scaleX,y:e.scaleY}),o||(o={}),e.startFunc=function(i){if(n){var a=this;s&&(a=u.chd(a,"add")),a.scaleX=n.x-.08,a.scaleY=n.y-.08}var c=this.getComponent("N7Sound");c?c.n7play():t("N7Sound").playSound(90122),o.dis&&(e.__touchp=i.getLocation()),i.stopPropagation()},e.endFunc=function(t){if(o.unc||(this.color=cc.color(255,255,255)),n){var a=this;s&&(a=u.chd(a,"add")),a.scaleX=n.x,a.scaleY=n.y}if(o.dis){var c=t.getLocation(),r=e.__touchp;if(Math.abs(r.x-c.x)>o.dis||Math.abs(r.y-c.y)>o.dis)return}"function"==typeof i?i():u.runf(i)},e.cancelFunc=function(t){if(o.unc||(this.color=cc.color(255,255,255)),n){var e=this;s&&(e=u.chd(e,"add")),e.scaleX=n.x,e.scaleY=n.y}},e.on(a.touchstart,e.startFunc,e),e.on(a.touchend,e.endFunc,e),e.on(a.touchcancel,e.cancelFunc,e)},u.btnc=function(t,e,i,n){var o=u.chd(t,e);o&&u.btn(o,i,n)},u.Percentage=function(t,e){return 100*t/e/100},u.runf=function(t){if(!(t instanceof Array))return t.fun.apply(t.caller,[t.par]);for(var e=0;e<t.length;e++)u.runf(t[e])},u.makeTimeZone=function(t){return t<=2E3?"1s_2s":t>2E3&&t<=4E3?"2s_4s":t>4E3&&t<=6E3?"4s_6s":t>6E3&&t<=8E3?"6s_8s":t>8E3&&t<=1E4?"8s_10s":t>1E4&&t<=2E4?"10s_20s":t>2E4&&t<=3E4?"20s_30s":"30s_big"},u.makef=function(t,e,i){return{fun:t,caller:e,par:i}},u.runfp=function(t,e){t.par?"array"!=typeof t.par&&(t.par=[t.par]):t.par=[],t.par.push(e);try{t.fun.apply(t.caller,t.par)}catch(t$1){o.log(t$1)}},u.ptoidx=function(t,e){return 100*t+e},u.idxtop=function(t){return cc.p(parseInt(t/100),t%100)},u.defaultArr=function(t,e){var i=t[e];return i?i.length:0},u._2ArrPush=function(t,e,i){return t[e]||(t[e]=[]),t[e].push(i)},u.upset=function(t){return t.sort(function(){return.5-Math.random()}),t},u.clone=function(t,e){var i={};for(var o in t)"object"==n(t[o])?e&&(i[o]=u.clone(t[o])):i[o]=t[o];return i},u.copys=function(t,e){for(var i in e)"object"==n(e[i])?(void 0==t[i]&&(t[i]={}),u.copys(t[i],e[i])):t[i]=e[i]},u.copy=function(t,e,i,n){e[i]&&(n||(n=i),t[n]=e[i])},u.copy_keys=function(t,e,i){if(void 0==i)for(var n in e)t[n]=e[n];else for(var o=0;o<i.length;o++)t[i[o]]=e[i[o]];return t},u.findMapBkgResId=function(t){var e=c.findInt(t);return a.BIGMAP_RESID_START+e},u.pushCallBack=function(t,e){return t?("Array"!=typeof t&&(t=[t]),t.push(e),t):e},u._SHOW_ITEM_CFG_={n:"item_name",i:"item_icon",c:"item_count",d:"item_info"},u.initItem=function(t,e,i){if(e.meta||(e.meta=r.item(e.name),e.meta)){var n=e.meta;i||(i=u._SHOW_ITEM_CFG_);var o=void 0==e.num?UserDataV2.get("items").get(e.name):e.num;i.n&&u.text(t,i.n,n.name),i.i&&u.imgs(t,n.icon,i.i),i.c&&u.text(t,i.c,13!=n.id?o:u.i18ns("UnlimitedLives",[o])),i.d&&u.text(t,i.d,n.info),t.__item_row=n}else console.error("can not find item:"+e.name)},u.awdtoitems=function(t){var e=[];for(var i in t)e.push({name:i,num:1*t[i]});return e},u.sh_items=function(t,e,i){void 0==i&&(i=4);var n=void 0,o=0;for(var a in t)if(1*t[a]!=NaN)if(n=u.chd(e,"item"+(o+1))){if(n.active=!0,u.initItem(n,{name:a,num:1*t[a]}),++o>=i)break}else console.error("items error1 "+o);for(var s=o;o<i;o++)(n=u.chd(e,"item"+(o+1)))?n.active=!1:console.error("items error2 "+o);return s},u.sh_Goals=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i||(i=4);var o=0;for(var a in t)if(u.show(e,"tar"+(o+1)).getComponent("UIGameGoal").setData(t[a].meta,1*t[a].num,n),++o>=i)break;for(var s=o;o<i;o++)u.hide(e,"tar"+(o+1));return s},u.cutm=function(){return(new Date).getTime()},u.timestamp=function(){return parseInt(u.cutm()/1E3)},u.getGids=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].gid);return e},u.capture=function(t,e,i){t.on(cc.Node.EventType.MOUSE_DOWN,function(t){t.stopPropagation()},t,!0),t.on(a.touchstart,function(t){e&&e.call(i),t.stopPropagation()},t,!0)},u._query_list={},u.GetQueryString=function(t,e){if(window&&window.location&&window.location.search&&window.location.search.length>1&&void 0==u._query_list[t]){var i=new RegExp("(^|\x26)"+t+"\x3d([^\x26]*)(\x26|$)"),n=o.window.location.search.substr(1).match(i),a=null!=n?decodeURIComponent(n[2]):void 0==e?null:e;u._query_list[t]=a}return u._query_list[t]},u.cd=function(t,e,i){if(void 0==e||e<1)return t.__cd_tm=0,void(t.__cd_fo=null);t.__cd_tm=parseInt(e),t.__cd_cutm=u.cutm(),u.text(t,null,u.tm_format(t.__cd_tm,t.__tmfmt)),t.__cd_fo=i,void 0==t.__cd_update&&(t.__cd_update=1,t.getComponent(cc.Label).schedule(function(){var t=this.node;if(!(t.__cd_tm<0)){var e=u.cutm(),i=e-t.__cd_cutm,n=parseInt(i/1E3);if(!(n<1)&&(t.__cd_tm-=n,t.__cd_cutm=e-i%1E3,t.__cd_tm>=0&&u.text(t,null,u.tm_format(t.__cd_tm,t.__tmfmt)),t.__cd_tm<0)){var o=t.__cd_fo;t.__cd_fo=null,o&&u.runf(o)}}},1))},u.queryBinary=function(t,e){return(t&e)==e},u.uncd2=function(t,e){var i=u.chd(t,e);i.__cd_update=void 0,i.getComponent(cc.Label).unscheduleAllCallbacks()},u.cd2=function(t,e,i,n,o){var a=u.chd(t,e);a.__tmfmt=o,u.cd(a,i,n)},u.timestampToTime=function(t,e){var i=void 0,n=void 0,o=void 0,a="",s=new Date(1E3*t);return e&&(a=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "),(i=s.getHours())<10&&(i="0"+i),(n=s.getMinutes())<10&&(n="0"+n),(o=s.getSeconds())<10&&(o="0"+o),a+i+":"+n+":"+o},u.timestampToDate=function(t){var e=new Date(1E3*t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},u.timestampToTime=function(t){var e=void 0,i=void 0,n=void 0,o=new Date(1E3*t);return(e=o.getHours())<10&&(e="0"+e),(i=o.getMinutes())<10&&(i="0"+i),(n=o.getSeconds())<10&&(n="0"+n),e+":"+i+":"+n},u.timeAgo=function(t){var e=parseInt((u.timestamp()-t)/60),i=0,n=0,o=0;return i=parseInt(e/3600),n=parseInt((e-3600*i)/60),(i=i>0?i+u.i18ns("day"):"")+(n=i>0||n>0?(n>0?n:0)+u.i18ns("hour"):"")+(o=((o=e%60)>0?o:0)+u.i18ns("min"))+u.i18ns("ago")},u.dayDifference=function(t,e){var i="20"+parseInt(t/1E4)+"/"+parseInt(t%1E4/100)+"/"+t%100+" 00:00:00",n=new Date(i),o=void 0;if(e){var a="20"+parseInt(e/1E4)+"/"+parseInt(e%1E4/100)+"/"+e%100+" 00:00:00";o=new Date(a)}else o=new Date;var s=o.getTime()-n.getTime();return Math.floor(s/864E5)},u.tm_format=function(t,e){var i=t%60,n=(t=parseInt(t/60))%60,o=parseInt(t/60),a="";return o>0&&(a=(o>=10?o:"0"+o)+":"),a+=n>=10?n:"0"+n,(e||o<1)&&(a+=":"+(i>=10?i:"0"+i)),a},u.toTime=function(t,e){return e-(u.cutm()/1E3-t)},u.mintosec=function(t){return 60*t},u.icon=function(t,e,i){return e&&(t=u.chd(t,e)),u._icon(t,r.itemn(i))},u._icon=function(t,e){return e&&e.icon&&u.imgs(t,e.icon),t},u.imgs=function(t,e,i,n){var o=r.instance().getResMeta(e);if(o){var a=o.param;h.loadRes(e,function(e){var o=u.cmpt(t,i,cc.Sprite);o&&(o.spriteFrame=e,n&&n(t),!a||a.length<1||"string"!=typeof a[0]&&((a=l.toKeyValue(a[0])).w&&(t.width=a.w),a.h&&(t.height=a.h)))},t)}},u.imgsPrefab=function(t,e,i,n){var o=r.instance().getResMeta(e);if(o){var a=o.param;h.loadRes(e,function(e){var o=u.cmpt(t,i,cc.Sprite);o&&(e instanceof cc.SpriteFrame?(o.spriteFrame=e,o.node.removeAllChildren()):(o.spriteFrame=null,e.node.parent=t),n&&n(t),!a||a.length<1||"string"!=typeof a[0]&&((a=l.toKeyValue(a[0])).w&&(t.width=a.w),a.h&&(t.height=a.h)))},t)}},u.fristKV=function(t){for(var e in t)return{k:e,v:t[e]};return null},u.kcnt=function(t){var e=0;for(var i in t)e++;return e},u.toShortTm=function(t){return t>0?t-a.datum_time:t},u.toLongTm=function(t){return t>0?t+a.datum_time:t},u.setSpriteFrame=function(t,e){if(e){t instanceof cc.Node&&(t=t.getComponent(cc.Sprite));var i=t.node.scale;t.spriteFrame&&(i=t.spriteFrame.getTexture().pixelWidth*i/e.getTexture().pixelWidth),t.spriteFrame=e,t.node.scale=i}},u.loadScript=function(t,e){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){e()},i.src=t,document.body.appendChild(i)},u.uicon_spframe={},u.uicon=function(e,i,n,o){var a=u.chd(e,i);if((n=""+n).indexOf("http")>=0){var s=a.getComponent(cc.Sprite),c=u.uicon_spframe[n];if(c)return void(s.spriteFrame=c);t("SdkIns").instance().icon(n,function(t){s.spriteFrame=u.uicon_spframe[n]=t})}},u.onShow=function(t,e,i){t.on("active-in-hierarchy-changed",e,i)},u.datetos=function(t){var e=new Date;return e.setTime(1E3*t),e.toLocaleDateString()},u.getDataformat=function(t,e){return 1*(new Date(e)).format(t)},u.today=function(){return u.getDataformat("yyMMdd",u.cutm())},u.getDayTime=function(){return u.getDataformat("yyMMddhhmm",u.cutm())},u.getTime=function(){return u.getDataformat("hhmm",u.cutm())},u.fmtDate=function(t){for(var e=u.getDataformat("yyyyMMdd",t)+"",i="",n=0;n<e.length;n++)i+=e[n],3!=n&&5!=n||(i+=".");return i},Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)(new RegExp("("+i+")")).test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},u.correct=function(t,e){e.px&&(t.x+=e.px),e.py&&(t.y+=e.py),e.sx&&(t.scaleX=e.sx),e.sy&&(t.scaleY=e.sy)},u.nodeToNodePos=function(t,e){var i=t.parent.convertToWorldSpaceAR(t.position);return e.convertToNodeSpaceAR(i)},u.pushNode=function(t,e,i){return i=i||u.nodeToNodePos(t,e),t.removeFromParent(!1),t.position=i,t.parent=e,t},u.stopParticle=function(t){if(t){if(t.children){var e=t.children;for(var i in e)u.stopParticle(e[i])}var n=t.getComponent(cc.ParticleSystem);n&&n.stopSystem()}},u.resetParticle=function(t){if(t){if(t.children){var e=t.children;for(var i in e){var n=e[i];u.resetParticle(n)}}var o=t.getComponent(cc.ParticleSystem);o&&o.resetSystem()}},u.scaleParticle=function(t,e){if(null!==t&&void 0!==t){var i=t.getComponent(cc.ParticleSystem);for(var n in i&&(i.startSize*=e,i.endSize*=e,i.startSpeed*=e,i.startRotation*=e),t.children)u.scaleParticle(t.children[n],e)}},u.resetAnimation=function(t){var e=t.children;for(var i in e){var n=e[i].getComponent(cc.Animation);n&&n.play()}},u.kmb=function(t){if(o.BS)return t;if(t>=1E3){var e="",i=100,n="k";t>=1E6&&(i=1E5,n="m"),(t=Math.floor(t/i))%10==0&&(e=".0"),t=t/10+e+n}return t},u._PRVLVTASKRET_={lv:0},u.lvTask=function(t,e){var i=u._PRVLVTASKRET_;return t==i.lv?i.ret:(i.lv=t,i.ret=u.__lvTask(t,e))},u._PRVLVORDERRET_={lv:0},u.lvOrder=function(t,e){var i=u._PRVLVORDERRET_;return t==i.lv?i.ret:(i.lv=t,i.ret=u.__lvTask(t,e))},u.__lvTask=function(t,e){if(t>e[e.length-1])return e.length;for(var i=0;i<e.length;i++)if(t<=e[i])return i+1;return 1},u.stringMaxLength=function(t,e){e||(e=16);for(var i=0,n="",o=0;o<t.length;o++){var a=t.charCodeAt(o);if(a>127||94==a?i+=2:i++,i>e)return n;n+=t[o]}return n},u.createBrizer=function(t,e,i,n,o){var a=c.distance(t,e),s=i.len1||a*i.scale1,r=i.len2||a*i.scale2,l=c.angle(t,e),h=l+180;void 0!=i.p1.set?l=i.p1.set:void 0!=i.p1.offset?l+=i.p1.offset:l+=c.randInt(i.p1.min,i.p1.max)*(c.randInt(0,100)<50?-1:1),void 0!=i.p2.set?h=i.p2.set:void 0!=i.p2.offset?h+=i.p2.offset:h+=c.randInt(i.p2.min,i.p2.max)*(c.randInt(0,100)<50?-1:1);var u=s?c.getAimPointOffset(t.x,t.y,c.angleToRadian(l),s,s):t,d=r?c.getAimPointOffset(e.x,e.y,c.angleToRadian(h),r,r):e;if(o){var f=new cc.Node;f.addComponent(cc.Label).string="fo",f.position=t;var g=new cc.Node;g.addComponent(cc.Label).string="to",g.position=e;var p=new cc.Node;p.addComponent(cc.Label).string="p1",p.position=u;var _=new cc.Node;_.addComponent(cc.Label).string="p2",_.position=d,o.addChild(f),o.addChild(g),o.addChild(p),o.addChild(_)}n||(n=i.time||a*i.speed),i.time||i.maxTime&&n>i.maxTime&&(n=i.maxTime);var m=[u,d,e];return cc.bezierTo(n,m)},u.swap=function(t,e,i){var n=t[e];t[e]=t[i],t[i]=n},u.dump=function(){var t=cc.sys,e=o.callToApp("org/cocos2dx/javascript/SDKWrapper","dump","()S");return e||(e=t.browserType+"|"+t.browserVersion+"|"+t.osVersion+"|"+t.platform),o.log("dump:"+e),e},u.play=function(t,e,i){if(i&&(t=u.chd(t,i)),t){var n=t.getComponent(cc.Animation);if(n)return n.play(e);o.log("GameTools.playAnimation:not:find:Animation:"+e)}},u.isPlaying=function(t,e,i){if(i&&(t=u.chd(t,i)),!t)return!1;var n=t.getComponent(cc.Animation);return!!n&&n.getAnimationState(e).isPlaying},u.strToArr=function(t){for(var e=[],i=t.split("|"),n=0;n<i.length;n++){var o=i[n].split(":"),a=r.item(o[0]);e.push({k:a?a.id_name:o[0],v:o[1]})}return e},u.initBadge=function(t,e){e||(e=0),e*=1;var i="en"==s.get("Lang")&&e,n=i?a.BADGES_EN[e]:a.BADGES[e];u.imgs(t,n.c,"icon");var o=u.sh(t,"img",i);if(u.sh(t,"label",!i).active){u.textp(t,"label","badge_list."+e);var c=u.cmpt(t,"label",cc.LabelOutline);c&&(c.color=n.l)}o.active&&u.imgs(t,60010+e,"img")},u.getWeek=function(t){var e;return 0==(e=t?(new Date(1E3*u.getCurtm(t))).getDay():(new Date).getDay())&&(e=7),e},u.getCurtm=function(e){return null!=u.testTime?u.getTestTime():e?t("UserDataV2").cutm():0|(new Date).getTime()/1E3},u.setTestTime=function(t){u.testTime=new Date(t),u.testTimeKey=new Date,console.log(u.testTime)},u.getTestTime=function(){var t=(new Date).getTime()-u.testTimeKey.getTime();return(u.testTime.getTime()+t)/1E3},u.isEqualDay=function(t,e){var i=u.getCurtm(t);return u.timestampToDate(e)==u.timestampToDate(i)},u.getTmrByDay=function(e,i,n){var o=n?1E3*t("UserDataV2").cutm():(new Date).getTime();(0|n)>1&&(o=1E3*n),e=u.getTimeStameByDate(e);var a=new Date(e);return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setDate(a.getDate()+i),a.getTime()-o},u.getTimeRemaining=function(t,e){if(null==t||""==t)return 0;t=u.getTimeStameByDate(t);var i=u.getCurtm(!0);return(new Date(t)).getTime()/1E3>i?-1:u.getTmrByDay(t,e,i)},u.getTimeStameByDate=function(t){var e=(t+"").split("-");if(e.length>1){var i=new Date;return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setFullYear(e[0],e[1]-1,e[2]),i.getTime()}return t},u.getTimeStameEnd=function(t){var e=(t+"").split("-");if(e.length>1){var i=new Date;return i.setHours(23),i.setMinutes(59),i.setSeconds(59),i.setMilliseconds(59),i.setFullYear(e[0],e[1]-1,e[2]),i.getTime()}return t},u.getMonthDate=function(t,e){var i=new Date(1E3*t),n=new Date(1E3*e);return[i.getMonth()+1+u.i18ns("newyear_sign.month")+(i.getDate()+u.i18ns("newyear_sign.date")),n.getMonth()+1+u.i18ns("newyear_sign.month")+(n.getDate()+u.i18ns("newyear_sign.date"))]},u.getTimeRemaining1=function(t,e,i){var n=new Date(u.getTimeStameByDate(t));return n.setDate(n.getDate()+e),u.getTimeRemaining(n.getTime(),i)},u.getWeekTmremaining=function(e,i){var n=i?1E3*t("UserDataV2").cutm():(new Date).getTime(),o=new Date(n);return o.setHours(23),o.setMinutes(59),o.setSeconds(59),o.setMilliseconds(59),o.setDate(o.getDate()+e),o.getTime()-n},u.getOneDayTime=function(){var t=new Date((new Date((new Date).toLocaleDateString())).getTime()+864E5-1);return parseInt((t-u.cutm())/1E3)},u.arraySame=function(t,e){return t.filter(function(t){return-1!=e.indexOf(t)})},u.numOrDot=function(t){return t>=100?"???":t},u.editPchd=function(t,e){t.placeholder=u.i18ns(e)},u.byteToString=function(t){if(t<1024)return t+"b";var e=t/1024;return e<1024?e.toFixed(2)+"B":(e/1024).toFixed(2)+"m"},u.parse_rlst=function(t){var e=void 0,i={},n=void 0,o=0;for(var a in t)(e=(""+t[a]).split("score")).length<2?i[a]=t[a]:(o++,(n=JSON.parse(e[0])).score=e[1],i[a]=n);return i.length=o,i},u.getNetInfo=function(){return o.callToApp("org/cocos2dx/javascript/SDKWrapper","getNetInfo","()S")},u.testFunc=function(t,e){console.time("testFunc");for(var i=0;i<e;i++)t&&t();console.timeEnd("testFunc")},u.ischeckemail=function(t){return!(!t||""==t)&&!!/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(t)},u.ischeckname=function(t){return!(!t||""==t)&&!!/^[\u4E00-\u9FA5A-Za-z0-9_]+$/.test(t)},u.discount=function(t){return"en"==u.getLanguage()&&(t=10*(10-t)),t},u.currency=function(t,e,i){if(e&&t){var n=u.sh(t,"lab",e.t),o=u.sh(t,"img",e.i);n.active&&(n.getComponent(cc.Label).string=e.t),o.active&&u.imgs(o,e.i),void 0!=i&&u.text(t,"num",i)}},u.doubleAward=function(t,e){var i=[];u.copys(i,t);for(var n=0;n<i.length;n++)i[n].v*=e;return i},u.bezierFlyOld=function(t,e,i,n,o){if(t&&e){var a=t.position,s=t;s.active=!0;var c=u.nodeToNodePos(e,s.parent),r=o||u.FLY2,l=[u.createBrizer(s.position,c,r).easing(cc.easeIn(4)),cc.callFunc(function(t){s.active=!1,s.position=a,i&&i.call(n)},s)];s.runAction(cc.sequence(l))}},u.bezierFly=function(t,e,i,n,o){if(t&&e){var a=cc.instantiate(t);a.parent=t.parent,a.active=!0;var s=u.nodeToNodePos(e,a.parent),c=o||u.FLY2,r=[u.createBrizer(a.position,s,c).easing(cc.easeIn(4)),cc.callFunc(function(t){a.destroy(),i&&i.call(n)},a)];a.runAction(cc.sequence(r))}},u.FLY2={scale1:.6,scale2:.2,p1:{offset:50},p2:{offset:-150},time:1},e.exports=u,cc._RF.pop()},{GameCommon:"GameCommon",GameConfig:"GameConfig",JsonMetaCache:"JsonMetaCache",LanguageData:"LanguageData",MathUtils:"MathUtils",N7Resource:"N7Resource",N7Sound:"N7Sound",SdkIns:"SdkIns",StringUtils:"StringUtils",UserDataV2:"UserDataV2",n7:"n7"}],GuideLogic:[function(t,e,i){cc._RF.push(e,"4f113I2fzNNrJdsjkEERcyN","GuideLogic");var n=t("JsonMetaCache"),o=t("StringUtils"),a=t("GameEvent"),s=t("GameTools"),c=t("UserLogic"),r=t("AchieveLogic"),l=t("ItemsLogic"),h=t("SignLogic"),u=t("WorkData"),d=t("GameCommon"),f=t("n7"),g=function(){};e.exports=g,g.touchClosebk={},g.checkEnougthList={lev:1,achieve:2,once:3,sign:4},g.giftMaxNum=3,g.lastGuideId=0,g.nextGuideId=0,g.initGuide=function(){},g.mainUIGuide=function(){var t=n.map(c.geti("lev"));g.checkPointGuide(t.tar_guide)},g.guideCanTrigger=function(t,e){var i=n.item(t);if(!i)return!1;f.isDebug&&f.log("GuideLogic.checkPointGuide: "+t);var a=o.toKeyValue(i.info);return!(!e&&!g.checkEnougth(a))},g.checkPointGuide=function(t,e){g.guideCanTrigger(t,e)&&g.triggerGuide(t)},g.checkEnougth=function(t){if(!t)return!0;for(var e in g.checkEnougthList){var i=g.checkEnougthList[e],n=t[e];if(null!=n)if(1==i){if(c.geti(e)!=n)return!1}else if(2==i){if(!r.isFinish(n))return!1}else if(3==i){if(g.guideHasFinish(t.once))return!1}else if(4==i&&h.getSignState(n)!=d.RSIGN_TODAYNOSIGN)return!1}return!0},g.isItemEnougth=function(t){var e=n.item(t);if(!e)return!0;var i=o.toKeyValue(e.info);if(null!=i.uitem){var a=n.item(i.uitem);if(l.get(a.id_name)<3)return!1}return!0},g.guideHasFinish=function(t){var e=u.get(u.WKD_GUIDE),i=Math.pow(2,t);return(e&i)==i},g.finishGuide=function(t){var e=u.get(u.WKD_GUIDE);e|=Math.pow(2,t),u.set(u.WKD_GUIDE,e)},g.hasNextGuide=function(){return null!=n.item(g.nextGuideId)},g.inMapHasGuide=function(e){var i=n.map(e),o=!1;return i&&i.g_guide>0&&t("GuideLogic").isItemEnougth(i.g_guide)&&(o=!0),!!o&&g.checkLocal(e)},g.checkLocal=function(e){var i=t("UserDataV2").get("pid","user")+".mapid."+e;return 1!=cc.sys.localStorage.getItem(i)},g.saveLocal=function(e){var i=t("UserDataV2").get("pid","user")+".mapid."+e;cc.sys.localStorage.setItem(i,1)},g.triggerGuide=function(e,i,s){var c=n.item(e);if(c){var r=o.toKeyValue(c.info);if(r||(r={}),null==r.lastGuideId||r.lastGuideId==g.lastGuideId){var h=t("SdkIns").instance().getSdkData("forceShare");if(s||1!=h||null==r.share){g.lastGuideId=e,g.nextGuideId=c.next;var u=t("UIMainV2").instance();if(u&&u.__checkGuideLock(),r.oDialog){g.listenDialog(e,c,r,r.oDialog);var p="dialog_seven_sign"==r.oDialog||"dialog_achieve"==r.oDialog,_={name:r.oDialog},m=t("SdkIns").instance().getSdkData("guideShare");p&&1!=m&&(_.param=d.DIALOG_FROM_GUIDE),a.EVENT_OPEN_DIALOG(_)}else if(r.lDialog)g.listenDialog(e,c,r,r.lDialog);else{if(r.nDialog){if((i=t("N7UIManager").instance().getDialogByName(r.nDialog))||(i=window[r.nDialog])&&(i=i.node),!i)return void f.log("GuideLogic.triggerGuide.failed: "+r.nDialog+"\u6ca1\u6709\u8fd9\u4e2a\u754c\u9762");if(!i.active)return void f.log("GuideLogic.triggerGuide.failed: "+r.nDialog+"\u754c\u9762\u6ca1\u6709\u663e\u793a")}if(r.gift){for(var v=[],E=0;E<r.gift.length;E++){var y=r.gift[E],b=n.item(y);l.add(b.id_name,g.giftMaxNum,"GUIDE_GIFT"),a.EVENT_NUMBER_CHANGE({n:b.id_name,a:3,gameprop:y<=5}),v.push({k:b.id_name,v:g.giftMaxNum})}v.title="unlock_item",g.listenDialog(e,c,r,"dialog_achieve_notice"),null!=r.giftTxt&&(v.txt="guide."+r.giftTxt),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:v})}else{var I=g.getParam(e,i,c,r);I&&a.EVENT_OPEN_MAINUI_GUIDE(I)}}f.isDebug&&f.log("GuideLogic.triggerGuide: "+JSON.stringify(c))}else t("ShareLogic").checkShare(r.share,null,function(){g.triggerGuide(e,i,!0)},this)}}},g.listenDialog=function(t,e,i,n){a.off(f.window,a.EVENT_DIALOG_SHOWED),a.once(a.EVENT_DIALOG_SHOWED,function(o){var s=o.getUserData().node;if(s.name==n){g.unLockDialog(n);var c=g.getParam(t,s,e,i);c&&a.EVENT_OPEN_MAINUI_GUIDE(c)}},f.window),g.lockDialog(n)},g.unLockDialog=function(t){delete this.touchClosebk[t]},g.lockDialog=function(t){this.touchClosebk[t]=5},g.canCloseBK=function(t){var e=this.touchClosebk[t];return null==e||e<=0?(f.isDebug&&f.log("GuideLogic.canCloseBK: "+e),!0):(e=--this.touchClosebk[t],f.isDebug&&f.log("GuideLogic.canCloseBK: "+e),e<=0)},g.getParam=function(t,e,i,o){var c={id:t};if(null!=e){var r=e.getComponent("UIGuideData");if(null!=o.finger){var h=r.finger[o.finger-1],u=s.chd(e,h);if(null==u)return null;c.n=u}if(null!=o.fingerNode){var d=r.fingerNode[o.fingerNode-1];if(null==d)return null;c.n=d}if(null!=o.highLight){for(var f=[],p=0;p<o.highLight.length;p++){var _=r.highLight[p];_&&f.push(s.chd(e,_))}c.hl=f}null!=o.clickToNext&&(c.btn=1,c.fo=function(){g.triggerGuide(i.next,e)}),c.isMain=r.isMain}if(o.justGift)for(var m=0;m<o.justGift.length;m++){var v=o.justGift[m],E=n.item(v);l.add(E.id_name,g.giftMaxNum,"GUIDE_GIFT"),a.EVENT_NUMBER_CHANGE({noSelect:1,n:E.id_name,a:3,gameprop:v<=5})}return c.funcIcon=o.funcIcon,c.toNode=o.toNode,null!=o.onceEnd&&g.finishGuide(o.onceEnd),c},cc._RF.pop()},{AchieveLogic:"AchieveLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",N7UIManager:"N7UIManager",SdkIns:"SdkIns",ShareLogic:"ShareLogic",SignLogic:"SignLogic",StringUtils:"StringUtils",UIMainV2:"UIMainV2",UserDataV2:"UserDataV2",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],GuildLogic:[function(t,e,i){cc._RF.push(e,"9ac62zxMB9Jh5xyI+R99AC/","GuildLogic");var n=t("UserDataV2"),o=t("n7"),a=t("UserLogic"),s=t("GameEvent"),c=t("FamNet"),r=t("GameTools"),l=t("TDLog"),h=t("StringBuilder"),u=t("GameCommon"),d=function(){this.__lastHelpId=0,this.__lastMsgId=0,this.msgs={},this._FRISTMSG_=!0};e.exports=d,d.prototype.__init=function(){s.on(s.EVENT_LOGOUT,function(){s.off(d._ins_),d._ins_=void 0},this)},d.prototype.getMemCnt=function(){return this.members?r.kcnt(this.members):0},d.MSGTP_APPLY=1,d.MSGTP_NOR=2,d.MSGTP_SYS=3,d.MSGTP_HELP=5,d.PWR_CAPTAIN=100,d.PWR_VICEC=50,d.PWR_MEMBER=0,d.MAX_MEMBERS=50,d.instance=function(){return d._ins_||(d._ins_=new d).__init(),d._ins_},d.clean_instance=function(){d._ins_=null},d.can=function(){return!0},d.have=function(){return a.geti("guiid")&&d.instance().guild},d.get=function(t){var e=a.geti("guiid");e<1||c.unified_send("guild/all",{},function(i){i?i.code?o.info("get:guild:"+e+":code:"+i.code):(i.guild.send_time=r.cutm(),d.__init(i,t)):o.info("get:guild:dt:is:NULL")})},d.__init=function(t,e){var i=d.instance();i.guild=t.guild,i.members={},e||(e={oper:"init"}),e.gu=i;var n=t.members;for(var a in n)d._updateMember(a,JSON.parse(n[a]),i);d.__updateAllMem(i),s.EVENT_GUILD(e),o.log(i)},d.getGuild=function(t){var e=d.instance();return t?e[t]:e},d.getMember=function(t){return d.instance().members[t]},d.updateMember=function(t,e){var i=d._updateMember(t,e);i&&s.EVENT_GUILD_MEMEBER({oper:"update",ms:i})},d._updateMember=function(t,e,i){if(e){i||(i=d.instance()),e.id=t,t==c.pid()&&(i.self=e);var n=i.members[t];return n?r.copy_keys(n,e):n=i.members[t]=e,n}},d.removeMember=function(t,e){if(e||(e=d.instance()),e.members[t]){var i=e.members[t];delete e.members[t],e.guild.memcnt--,s.EVENT_GUILD_MEMEBER({oper:"del",ms:i}),d.__updateAllMem(e)}},d.__updateAllMem=function(t){t||(t=d.instance());var e=t.members;t.memcnt=0;var i=new h(";");for(var n in e)e[n]&&(t.memcnt++,e[n].a==d.PWR_VICEC&&i.Append(e[n].n),e[n].a>=d.PWR_CAPTAIN&&(t.leader=e[n]));t.vicecNames=i.IsEmpty()?"":i.ToString()},d.updateInfo=function(t){var e=d.instance();if(e){var i=null;try{i=JSON.parse(t)}catch(e$2){o.error("updateInfo:not:json:"+t)}i&&(r.copy_keys(e.guild,i),s.EVENT_GUILD({oper:"mod",guild:e.guild}))}},d.quitTo=function(){var t=d.instance();t.self=null,t.leader=null,t.guild&&delete t.guild,t.members&&delete t.members,t.msgs&&delete t.msgs;var e=n.geti("guiid");n._set_("guiid",0,"user"),s.EVENT_GUILD({oper:"quit"}),l.Event("guild_quit",{gid:"g"+e}),d.clean_instance()},d.joinTo=function(t){o.log("GuildLogic:joinTo:"+t),l.Event("guild_join",{gid:"g"+t}),n._set_("guiid",t,"user"),d.get()},d.oper=function(t){if(t.attach&&!(t.attach.indexOf("|")<0)){var e=t.attach.split("|");if(!(e.length<1)){switch(e[0]){case "join":var i=t.content.split("|");d.updateMember(parseInt(e[1]),{l:1*i[0],i:1*i[1],n:i[2],a:0});break;case "quit":d.removeMember(parseInt(e[1]));break;case "auth":d.updateMember(parseInt(e[1]),{a:1*e[2]}),e.length>3&&d.updateMember(parseInt(e[3]),{a:1*e[4]});break;case "mod":o.log("mod guild info:"+e[1]),d.updateInfo(e[1]);break;default:return}d.__updateAllMem()}}},d.apply=function(t,e){l.Event("guild_appley",{gid:"g"+t}),c.unified_send("guild/apply",{guiid:t},function(t){t.length>4&&a.updateMsgs([t],1),e&&e(t)})},d.CR_MONEY=600,d.create=function(e,i){a.geti("gold")<d.CR_MONEY?i&&i({code:2E3}):c.unified_send("guild/create",e,function(e){if(e.code)o.info("create:guild:code:"+e.code);else{var c=e.guild.guiid;a.buy({gold:d.CR_MONEY,why:"cr_guild"}),l.Event("guild_created",{gid:"g"+c}),n._set_("guiid",c,"user"),d.__init(e),s.EVENT_GUILD({oper:"cr"}),t("AchieveLogic").updateAchieve(u.ACHIEVE_26,1)}i&&i(e)})},d.loopup=function(t,e){var i=d._PRV_LOOKUP_TM,n=r.cutm();return i&&i>n?-1:(d._PRV_LOOKUP_TM=n+3E3,c.unified_send("guild/lookup",t,function(t){var i=t;if(!t.code)for(var n in i=[],t)i.push(JSON.parse(t[n]));l.Event("guild_loopup",{count:1}),e&&e(i)}),0)},d.operap=function(t,e){var i=t.msgid=t.msgid.substr(1),n=this;c.unified_send("guild/opap",t,function(t){o.log(t),l.Event("guild_operap",{msgid:"m"+i}),n.deleteMsg(i,d.MSGTP_APPLY),e&&e(t)})},d.appo=function(t,e){c.unified_send("guild/appo",t,function(t){t.code||d.updateMsg(JSON.parse(t)),l.Event("guild_appo",{code:t.code}),e&&e(t)})},d.history=function(t,e){c.unified_send("guild/history",t,function(t){e&&e(t)})},d.chat=function(t,e){t.length<2||t.length>50?s.EVENT_MESSAGEBOX("msg_hint.lab_length"):c.unified_send("guild/chat",{text:t},function(t){d.updateMsg(JSON.parse(t)),e&&e(t)})},d._UPTM_=0,d.update=function(t){d._UPTM_%10==0&&d.refushMsgAndHelp(),d._UPTM_++},d._FRISTMSG_=!0,d.refushMsgAndHelp=function(){if(d.have()){var t=d.instance(),e={msgid:t.__lastMsgId,helpid:t.__lastHelpId};c.unified_send("guild/msg",e,function(e){if(e.code)o.error("guild/msg:"+e.code+":"+e.msg);else{var i=[],n=e.msg,a=void 0;if(n&&n.length>0)for(a in n)i.push(JSON.parse(n[a]));if(n=e.help)for(a in t.__lastHelpId=n.last_update_id,delete n.last_update_id,n)0==n[a]?d.deleteMsg(a,d.MSGTP_HELP):i.push(JSON.parse(n[a]));if(i.length>0){for(a in i.sort(function(t,e){return t.crtime-e.crtime}),i)d.updateMsg(i[a],t._FRISTMSG_);s.EVENT_GUILD_MESSAGE({oper:"all"})}t._FRISTMSG_=!1}})}},d.deleteMsg=function(t,e){var i=d.instance(),n=""+e+t,o=i.msgs[n];void 0!=o&&(s.EVENT_GUILD_MESSAGE({oper:"del",msg:o,msgid:n}),delete i.msgs[n])},d._pushMsg=function(t,e){switch(e||(e=d.instance()),e.msgs||(e.msgs={}),t.type=parseInt(t.type),t.msgid=parseInt(t.msgid),t.type){case d.MSGTP_HELP:break;case d.MSGTP_APPLY:if(e.self.a<50)return;default:t.msgid>e.__lastMsgId&&(e.__lastMsgId=t.msgid)}var i=""+t.type+t.msgid,n=e.msgs[i]?"update":"new";return e.msgs[i]=t,t.msgid=i,{oper:n,msg:t}},d.updateMsg=function(t,e){var i=d._pushMsg(t);i&&(s.EVENT_GUILD_MESSAGE(i),!e&&i.msg.attach&&d.oper(i.msg))},d.allMsg=function(){return d.instance().msgs},d.leave=function(t,e){var i=t?{kick:t}:{};c.unified_send("guild/quit",i,function(i){var n={gid:a.get("guiid")};t&&(n.kick=t),n.code=i.code?i.code:0,l.Event("guild_leave",n),i.code?o.error("guild/quit:"+i.code+":"+i.msg):(e&&e(i),t?d.removeMember(t):d.quitTo())})},d.info=function(t,e){var i={guiid:t};c.unified_send("guild/info",i,function(t){e&&e(t)})},d.setting=function(t,e){c.unified_send("guild/setting",t,function(t){d.updateMsg(JSON.parse(t)),e&&e(t)})},d.nhelp=function(t,e){c.unified_send("GuildHelp/nhelp",t,function(t){if(t.code)o.error("GuildHelp/nhelp:"+t.code+":"+t.msg);else{var i=d.instance();i.guild.helpcd=1*t.helpcd,i.guild.send_time=1*t.time,i.__lastHelpId=1*t.last_update_id,d.updateMsg(JSON.parse(t.msg),1),e&&e(t)}})},d.dhelp=function(t,e){var i={msgid:t.substr(1)};c.unified_send("GuildHelp/del",i,function(t){e&&e(t)})},d.helpto=function(e,i){var n={msgid:e.substr(1)};c.unified_send("GuildHelp/helpto",n,function(e){if(e.code)o.error("GuildHelp/helpto:"+e.code+":"+e.msg);else{var n=d.instance();e.last_update_id&&(n.__lastHelpId=1*e.last_update_id),n.guild.helpcnt=e.helpcnt,n.self.aid=e.aid,s.EVENT_GUILD({oper:"help",self:e.aid,cnt:e.helpcnt}),e.delmsg?d.deleteMsg(e.delmsg,d.MSGTP_HELP):d.updateMsg(JSON.parse(e.msg),1);var c={k:"gold",v:5,u:1};a.award(c,"help_heart"),t("AchieveLogic").updateAchieve(u.ACHIEVE_13,1),i&&i(e,c)}})},d.rlst=function(t,e){if(!o.BS){var i=t?{page:t}:{};c.unified_send("guild/rlst",i,function(t){e&&e(r.parse_rlst(t))})}},cc._RF.pop()},{AchieveLogic:"AchieveLogic",FamNet:"FamNet",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",StringBuilder:"StringBuilder",TDLog:"TDLog",UserDataV2:"UserDataV2",UserLogic:"UserLogic",n7:"n7"}],HelpFlag:[function(t,e,i){cc._RF.push(e,"809baj842tIyJMKYlrT46Er","HelpFlag");var n=function(){this.arrayBool=[]};n.ver="A",n.mark="|",n.prototype.get=function(t){return!!this.arrayBool[t]},n.prototype.set=function(t,e){this.arrayBool[t]=e?1:null},n.prototype.open=function(t){this.set(t,1)},n.prototype.close=function(t){this.set(t)},n.codes=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.decode=function(t){if(!n.decodes)for(var e in n.decodes={},n.codes)n.decodes[n.codes[e]]=1*e;return n.decodes[t]},n.encode=function(t,e){var i=n.codes.length-1,o=t%i,a=n.codes[i]+n.mark;if(t<10)e+=t;else{var s=Math.ceil(t/i);e+=s>1?Array(s).join(a):Array(s-1).join(a),e+=o?n.codes[o]:n.codes[i]}return e},n.prototype.toSave=function(){var t=""+n.ver,e=0,i=this.get(0);t+=i?"1":"0";for(var o=1,a=this.arrayBool.length;o<=a;o++)e++,i!=this.get(o)&&(t=n.encode(e,t),i=1-i,e=0);return t},n.prototype.init=function(t){if(t&&!(t.length<2)&&t.charAt(0)==n.ver){t=t.substring(1);for(var e=[],i=0,o=0,a=parseInt(t[0]),s=1;s<t.length;s++){for(var c=i,r=c+(o=n.decode(t[s]));c<r&&a;c++)e[c]=1;i+=parseInt(o),t[s+1]!=n.mark?a=1-a:s++}this.arrayBool=e}},e.exports=n,cc._RF.pop()},{}],HttpRequest:[function(t,e,i){cc._RF.push(e,"18dc5Bn4ItEdYrzKKI7PUs6","HttpRequest");var n=t("n7"),o=t("StringBuilder"),a=t("GameTools"),s=t("MathUtils"),c=cc.Class({properties:{__support:-1},onLoad:function(){},getRequest:function(){switch(this.__support){case 0:return new XMLHttpRequest;case 1:return new ActiveXObject("Msxml2.XMLHTTP");case 3:return new ActiveXObject("Microsoft.XMLHTTP");case 4:return null}try{return this.__support=0,n.log("try XMLHttpRequest..."),new XMLHttpRequest}catch(t$3){}try{return this.__support=1,n.log("try Msxml2.XMLHTTP..."),new ActiveXObject("Msxml2.XMLHTTP")}catch(t$4){}try{return this.__support=2,n.log("try Microsoft.XMLHTTP..."),new ActiveXObject("Microsoft.XMLHTTP")}catch(t$5){}return n.error("Explorer cannot create HttpRequest"),this.__support=4,null},get:function(t,e,i){var n=this.getRequest();if(n){var o=this.makeUrl(t,e);n.open("GET",o,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),n.onreadystatechange=function(){c.instance().__chkBack(n,i)},n.send()}},post:function(t,e,i){var n=this.getRequest();if(n){var o=this.makeUrl(t);n.open("POST",o,!0),n.setRequestHeader("cache-control","no-cache"),n.setRequestHeader("contentType","text/html;charset\x3duft-8"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),n.onreadystatechange=function(){c.instance().__chkBack(n,i)},n.send(toString(e))}},makeUrl:function(t,e){return t+(e?"?"+this.toString(e):"")},toString:function(t){var e=new o("\x26");for(var i in t)e.Append(i+"\x3d"+t[i]);return e.ToString()},__chkBack:function(t,e){if(e)try{switch(t.readyState){case 4:t.status>=200&&t.status<400&&this.__response(e,t.responseText)}}catch(t$6){}},__response:function(t,e){t(e)},onJsonDone:function(t,e){n.log(e);var i=t.retry;this.__response(i.callback,e)},onError:function(t,e){n.log(e),n.error("HttpRequest error! "+t.src),this.onJsonDone(t,[{code:408,message:JSON.stringify(e)}])},jsonp:function(t,e,i,o){var r,l="";i&&(l=a.cutm()+""+s.randInt(1E4,99999),n.window["note7_"+l]=function(){r=arguments});var h=n.window.document,u=h.createElement("script");void 0==o&&(o=0),u.retry={retry:o,fun:t,data:e,callback:i},u.type="text/javascript",u.onerror=function(t){c.instance().onError(this,t)},u.onload=u.onreadystatechange=function(t,e){(e||!this.readyState||/loaded|complete/.test(this.readyState))&&(this.onload=this.onreadystatechange=null,this.parentNode&&this.parentNode.removeChild(this),e||(void 0===r?c.instance().onError(this,{response:void 0}):c.instance().onJsonDone(this,r)))},u.src=this.makeUrl(t,e)+(l?"\x26jsonp\x3dnote7_"+l:""),n.log((o>0?"retry ":"")+"HttpRequest-OUT:"+u.src),h.getElementsByTagName("head")[0].appendChild(u)}});e.exports=c,c._ins=null,c.instance=function(){return c._ins||(c._ins=new c),c._ins},c.SENDTYPE=2,c.RETRYCNT=1,c["do"]=function(t,e,i){switch(c.SENDTYPE){case 0:c.doGet(t,e,i);break;case 1:c.doPost(t,e,i);break;case 2:c.doJsonp(t,e,i);break;default:n.log("can not send type")}},c.doPost=function(t,e,i){c.instance().post(t,e,i)},c.doGet=function(t,e,i){c.instance().get(t,e,i)},c.doJsonp=function(t,e,i){c.instance().jsonp(t,e,i)},cc._RF.pop()},{GameTools:"GameTools",MathUtils:"MathUtils",StringBuilder:"StringBuilder",n7:"n7"}],ItemsLogic:[function(t,e,i){cc._RF.push(e,"6ce08XlqBRMGbwCtxlm74VE","ItemsLogic");var n=t("UserDataV2"),o=t("StringBuilder"),a=t("GameEvent"),s=t("JsonMetaCache"),c=t("TDLog"),r=t("n7"),l=function(){this.field="items",this.items={},this.OPER=0};e.exports=l,l.prototype.__init=function(t){for(var e,i=t.split(l._SP1_),n=0;n<i.length;n++){e=i[n].split(l._SP2_);var o=l.nameToId(e[0]);this.items[o]=1*e[1]}},l._VER_="A",l._SP1_="|",l._SP2_="\x3d",l.prototype.toString=function(){var t=new o(l._SP1_),e=this.items;for(var i in e)e[i]&&t.Append(i+l._SP2_+e[i]);return l._VER_+t.toString()},l.prototype._SET_=function(t,e){return t=l.nameToId(t),this.OPER++,this.items[t]=e,n.nsave(this.field),e},l.prototype._GET_=function(t){return t=l.nameToId(t),this.items[t]||0},l.nameToIdList={},l.nameToId=function(t){if(!l.nameToIdList[t]){var e=s.itemn(t);if(!e)return t;l.nameToIdList[t]=e.id}return l.nameToIdList[t]},l.add=function(t,e,i){if(!s.itemn(t))return-1;if(e<1)return l.get(t);void 0==e&&(e=1);var o=n.get("items"),r=o._SET_(t,o._GET_(t)+e);return a.EVENT_ITEMS_CHG({name:t,num:r}),c.Event("onAddItem",{why:i,name:t,cu:r,chg:e}),e},l.sub=function(t,e,i){if(e<1)return l.get(t);void 0==e&&(e=1);var o=n.get("items"),s=o._GET_(t);if(s<e)return-1;var r=o._SET_(t,s-e);return a.EVENT_ITEMS_CHG({name:t,num:r}),c.useItem(r,t,i),r},l.all=function(){return n.get("items","items")},l.getById=function(t){return n.get("items").items[t]},l.get=function(t){return n.get("items")._GET_(t)},l.init=function(t){var e=n._set_("items",new l);r.log("items:"+t),t&&t.length>1&&t[0]==l._VER_&&e.__init(t.substring(1))},cc._RF.pop()},{GameEvent:"GameEvent",JsonMetaCache:"JsonMetaCache",StringBuilder:"StringBuilder",TDLog:"TDLog",UserDataV2:"UserDataV2",n7:"n7"}],JAction:[function(t,e,i){cc._RF.push(e,"4d040KbA7FOpKk9Ud5sk8dP","JAction"),e.exports=function(){},cc._RF.pop()},{}],JBase64:[function(t,e,i){cc._RF.push(e,"56e19B7s0hDW59IiE3++UAt","JBase64");var n=function(){};e.exports=n,n.keystr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",n.decode=function(t){var e,i,o,a,s,c,r="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)e=n.keystr.indexOf(t.charAt(l++))<<2|(a=n.keystr.indexOf(t.charAt(l++)))>>4,i=(15&a)<<4|(s=n.keystr.indexOf(t.charAt(l++)))>>2,o=(3&s)<<6|(c=n.keystr.indexOf(t.charAt(l++))),r+=String.fromCharCode(e),64!=s&&(r+=String.fromCharCode(i)),64!=c&&(r+=String.fromCharCode(o));return r=n.utf8_decode(r)},n.utf8_decode=function(t){for(var e="",i=0,n=0,o=0,a=0;i<t.length;)(n=t.charCodeAt(i))<128?(e+=String.fromCharCode(n),i++):n>191&&n<224?(o=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&o),i+=2):(o=t.charCodeAt(i+1),a=t.charCodeAt(i+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),i+=3);return e},n.encode=function(t){var e,i,o,a,s,c,r,l="",h=0;for(t=n.utf8_decode(t);h<t.length;)a=(e=t.charCodeAt(h++))>>2,s=(3&e)<<4|(i=t.charCodeAt(h++))>>4,c=(15&i)<<2|(o=t.charCodeAt(h++))>>6,r=63&o,isNaN(i)?c=r=64:isNaN(o)&&(r=64),l=l+n.keyStr.charAt(a)+n.keyStr.charAt(s)+n.keyStr.charAt(c)+n.keyStr.charAt(r);return l},cc._RF.pop()},{}],JMD5:[function(t,e,i){cc._RF.push(e,"2a501RgMLFI+ZC0Xo/wjdPu","JMD5");var n=function(){};e.exports=n,n.hexcase=0,n.b64pad="",n.chrsz=8,n.hex_md5=function(t){return n.binl2hex(n.core_md5(n.str2binl(t),t.length*n.chrsz))},n.b64_md5=function(t){return n.binl2b64(n.core_md5(n.str2binl(t),t.length*n.chrsz))},n.str_md5=function(t){return n.binl2str(n.core_md5(n.str2binl(t),t.length*n.chrsz))},n.hex_hmac_md5=function(t,e){return n.binl2hex(n.core_hmac_md5(t,e))},n.b64_hmac_md5=function(t,e){return n.binl2b64(n.core_hmac_md5(t,e))},n.str_hmac_md5=function(t,e){return n.binl2str(n.core_hmac_md5(t,e))},n.core_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,o=-271733879,a=-1732584194,s=271733878,c=0;c<t.length;c+=16){var r=i,l=o,h=a,u=s;i=n.md5_ff(i,o,a,s,t[c+0],7,-680876936),s=n.md5_ff(s,i,o,a,t[c+1],12,-389564586),a=n.md5_ff(a,s,i,o,t[c+2],17,606105819),o=n.md5_ff(o,a,s,i,t[c+3],22,-1044525330),i=n.md5_ff(i,o,a,s,t[c+4],7,-176418897),s=n.md5_ff(s,i,o,a,t[c+5],12,1200080426),a=n.md5_ff(a,s,i,o,t[c+6],17,-1473231341),o=n.md5_ff(o,a,s,i,t[c+7],22,-45705983),i=n.md5_ff(i,o,a,s,t[c+8],7,1770035416),s=n.md5_ff(s,i,o,a,t[c+9],12,-1958414417),a=n.md5_ff(a,s,i,o,t[c+10],17,-42063),o=n.md5_ff(o,a,s,i,t[c+11],22,-1990404162),i=n.md5_ff(i,o,a,s,t[c+12],7,1804603682),s=n.md5_ff(s,i,o,a,t[c+13],12,-40341101),a=n.md5_ff(a,s,i,o,t[c+14],17,-1502002290),o=n.md5_ff(o,a,s,i,t[c+15],22,1236535329),i=n.md5_gg(i,o,a,s,t[c+1],5,-165796510),s=n.md5_gg(s,i,o,a,t[c+6],9,-1069501632),a=n.md5_gg(a,s,i,o,t[c+11],14,643717713),o=n.md5_gg(o,a,s,i,t[c+0],20,-373897302),i=n.md5_gg(i,o,a,s,t[c+5],5,-701558691),s=n.md5_gg(s,i,o,a,t[c+10],9,38016083),a=n.md5_gg(a,s,i,o,t[c+15],14,-660478335),o=n.md5_gg(o,a,s,i,t[c+4],20,-405537848),i=n.md5_gg(i,o,a,s,t[c+9],5,568446438),s=n.md5_gg(s,i,o,a,t[c+14],9,-1019803690),a=n.md5_gg(a,s,i,o,t[c+3],14,-187363961),o=n.md5_gg(o,a,s,i,t[c+8],20,1163531501),i=n.md5_gg(i,o,a,s,t[c+13],5,-1444681467),s=n.md5_gg(s,i,o,a,t[c+2],9,-51403784),a=n.md5_gg(a,s,i,o,t[c+7],14,1735328473),o=n.md5_gg(o,a,s,i,t[c+12],20,-1926607734),i=n.md5_hh(i,o,a,s,t[c+5],4,-378558),s=n.md5_hh(s,i,o,a,t[c+8],11,-2022574463),a=n.md5_hh(a,s,i,o,t[c+11],16,1839030562),o=n.md5_hh(o,a,s,i,t[c+14],23,-35309556),i=n.md5_hh(i,o,a,s,t[c+1],4,-1530992060),s=n.md5_hh(s,i,o,a,t[c+4],11,1272893353),a=n.md5_hh(a,s,i,o,t[c+7],16,-155497632),o=n.md5_hh(o,a,s,i,t[c+10],23,-1094730640),i=n.md5_hh(i,o,a,s,t[c+13],4,681279174),s=n.md5_hh(s,i,o,a,t[c+0],11,-358537222),a=n.md5_hh(a,s,i,o,t[c+3],16,-722521979),o=n.md5_hh(o,a,s,i,t[c+6],23,76029189),i=n.md5_hh(i,o,a,s,t[c+9],4,-640364487),s=n.md5_hh(s,i,o,a,t[c+12],11,-421815835),a=n.md5_hh(a,s,i,o,t[c+15],16,530742520),o=n.md5_hh(o,a,s,i,t[c+2],23,-995338651),i=n.md5_ii(i,o,a,s,t[c+0],6,-198630844),s=n.md5_ii(s,i,o,a,t[c+7],10,1126891415),a=n.md5_ii(a,s,i,o,t[c+14],15,-1416354905),o=n.md5_ii(o,a,s,i,t[c+5],21,-57434055),i=n.md5_ii(i,o,a,s,t[c+12],6,1700485571),s=n.md5_ii(s,i,o,a,t[c+3],10,-1894986606),a=n.md5_ii(a,s,i,o,t[c+10],15,-1051523),o=n.md5_ii(o,a,s,i,t[c+1],21,-2054922799),i=n.md5_ii(i,o,a,s,t[c+8],6,1873313359),s=n.md5_ii(s,i,o,a,t[c+15],10,-30611744),a=n.md5_ii(a,s,i,o,t[c+6],15,-1560198380),o=n.md5_ii(o,a,s,i,t[c+13],21,1309151649),i=n.md5_ii(i,o,a,s,t[c+4],6,-145523070),s=n.md5_ii(s,i,o,a,t[c+11],10,-1120210379),a=n.md5_ii(a,s,i,o,t[c+2],15,718787259),o=n.md5_ii(o,a,s,i,t[c+9],21,-343485551),i=n.safe_add(i,r),o=n.safe_add(o,l),a=n.safe_add(a,h),s=n.safe_add(s,u)}return Array(i,o,a,s)},n.md5_cmn=function(t,e,i,o,a,s){return n.safe_add(n.bit_rol(n.safe_add(n.safe_add(e,t),n.safe_add(o,s)),a),i)},n.md5_ff=function(t,e,i,o,a,s,c){return n.md5_cmn(e&i|~e&o,t,e,a,s,c)},n.md5_gg=function(t,e,i,o,a,s,c){return n.md5_cmn(e&o|i&~o,t,e,a,s,c)},n.md5_hh=function(t,e,i,o,a,s,c){return n.md5_cmn(e^i^o,t,e,a,s,c)},n.md5_ii=function(t,e,i,o,a,s,c){return n.md5_cmn(i^(e|~o),t,e,a,s,c)},n.core_hmac_md5=function(t,e){var i=n.str2binl(t);i.length>16&&(i=n.core_md5(i,t.length*n.chrsz));for(var o=Array(16),a=Array(16),s=0;s<16;s++)o[s]=909522486^i[s],a[s]=1549556828^i[s];var c=n.core_md5(o.concat(n.str2binl(e)),512+e.length*n.chrsz);return n.core_md5(a.concat(c),640)},n.safe_add=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},n.bit_rol=function(t,e){return t<<e|t>>>32-e},n.str2binl=function(t){for(var e=Array(),i=(1<<n.chrsz)-1,o=0;o<t.length*n.chrsz;o+=n.chrsz)e[o>>5]|=(t.charCodeAt(o/n.chrsz)&i)<<o%32;return e},n.binl2str=function(t){for(var e="",i=(1<<n.chrsz)-1,o=0;o<32*t.length;o+=n.chrsz)e+=String.fromCharCode(t[o>>5]>>>o%32&i);return e},n.binl2hex=function(t){for(var e=n.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<4*t.length;o++)i+=e.charAt(t[o>>2]>>o%4*8+4&15)+e.charAt(t[o>>2]>>o%4*8&15);return i},n.binl2b64=function(t){for(var e="",i=0;i<4*t.length;i+=3)for(var o=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255,a=0;a<4;a++)8*i+6*a>32*t.length?e+=n.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-a)&63);return e},cc._RF.pop()},{}],JProgressBar:[function(t,e,i){cc._RF.push(e,"9d0857uYhpNYKimY3F1fzqe","JProgressBar"),cc.Class({"extends":cc.Component,properties:{mask:{"default":null,type:cc.Node},bar:{"default":null,type:cc.Node},label:{"default":null,type:cc.Label},per_centum:{"default":null,type:cc.Label}},start:function(){},onDestroy:function(){this.callFunc=this.caller=null},setCallFunc:function(t,e){this.callFunc=t,this.caller=e},progress:function(t,e,i){if(t=t?1E3*t:0,this.cu=e,this.max=i,void 0==this._cu&&(this.width=this.mask.width,this.mask.width=0,this._cu=this._cuT=0),0==t)return this._cu=this._cuT=e,void this.showProgress();this.step=(e-this._cu)/t,this.stepT=Math.floor(this.step),this.showProgress()},isEnd:function(){return this._cu>=this.max},showProgress:function(){var t=this._cu/this.max;this.mask.width=this.width*t,this.label&&(this.label.string=this._cuT+"/"+this.max),this.per_centum&&(this.per_centum.string=parseInt(100*t)+"%"),this.callFunc&&this.callFunc.caller(this.caller,this._cu,this.max,this.isEnd())},update:function(t){this.step&&(t*=1E3,this._cu+=this.step*t,this._cuT+=this.stepT*t,this.isEnd()&&(this._cuT=this._cu=this.max,this.step=0),this.showProgress())}}),cc._RF.pop()},{}],JsonConfig:[function(t,e,i){cc._RF.push(e,"d90cf0ayxBEC4DdoNGTmOi7","JsonConfig");var n=t("JsonMetaCache"),o=t("N7Resource"),a=t("GameEvent"),s=function e(){this.db_cache={},this.db_list_load_count=0,this.loadAll=function(){o.loadJson("data/db_cache",function(t){this.metas=t;var e=[];for(var i in this.metas){var n=this.metas[i];1==n.type&&e.push(n)}for(var i in this.db_list_load_count=e.length,this.count=this.db_list_load_count,e)this.loadConfig(e[i])},this)},this.loadConfig=function(t){o.loadJson(t.url,function(e){this.db_list_load_count--,this.db_cache[t.url]=e,this.loadMeta(t,e),a.EVENT_GAME_DATA_LOADOK(t.url,this.count,this.db_list_load_count),this.db_list_load_count<=0&&a.EVENT_GAME_DATA_LOADALL()},this)},this.loadMeta=function(i,o){switch(i.id){case e.DB_ID_CONFIG:t("GameConfig").init(o);break;case e.DB_ID_RES_DEF:n.instance().loadResMeta(o);break;case e.DB_ID_TILE_DEF:n.instance().loadTileMeta(o);break;case e.DB_ID_MAP_DEF:n.instance().loadMapMeta(o);break;case e.DB_ID_ITEM_DEF:n.instance().loadItemMeta(o);break;case e.DB_ID_TASK_DEF:n.instance().loadTaskMeta(o);break;case e.DB_ID_ACHIEVE_DEF:n.instance().loadAchieveMeta(o);break;case e.DB_ID_CHEST_DEF:n.instance().loadChestMeta(o);break;case e.DB_ID_SIGN_DEF:n.instance().loadSignMeta(o);break;case e.DB_ID_SHARE_DEF:n.instance().loadShareMeta(o);break;case e.DB_ID_DYNAMIC_DEF:n.instance().loadDynamicMeta(o);break;case e.DB_ID_MONEY_DEF:n.instance().loadMoneyMeta(o)}}};s.DB_ID_CONFIG=0,s.DB_ID_RES_DEF=1,s.DB_ID_TILE_DEF=2,s.DB_ID_SIGN_DEF=3,s.DB_ID_MAP_DEF=4,s.DB_ID_ITEM_DEF=5,s.DB_ID_TASK_DEF=6,s.DB_ID_ACHIEVE_DEF=7,s.DB_ID_CHEST_DEF=8,s.DB_ID_SHARE_DEF=9,s.DB_ID_DYNAMIC_DEF=10,s.DB_ID_MONEY_DEF=11,s.s_instance=null,s.instance=function(){return null===s.s_instance&&(s.s_instance=new s),s.s_instance},e.exports=s,cc._RF.pop()},{GameConfig:"GameConfig",GameEvent:"GameEvent",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource"}],JsonMetaCache:[function(t,e,i){cc._RF.push(e,"3bca1sFcvtHS4Q/inD5YzPA","JsonMetaCache");var n=t("n7"),o=t("GameCommon"),a=(t("GameConfig"),t("StringUtils")),s=function e(){this.dic_res_id={},this.cache_list=[],this.preload_res=[],this.loadResMeta=function(t){for(var i in t){var n=t[i];if(!n.file||0==n.file.length){if(!n.h5_file||!n.h5_file.length)continue;n.file=n.h5_file}n.param&&n.param.length>0&&(n.param=n.param.split(","));var o=n.file.lastIndexOf("/");if(n.fileName=o?n.file.substr(o+1):n.file,(n=e.__chkType(n)).showParams&&n.showParams.length>0){var s=n.showParams.split(";"),c={};s.length>=1&&(c.pos=a.convertVec2(s[0])),s.length>=2&&(c.scale=parseFloat(s[1])),s.length>=3&&(c.rotation=parseFloat(s[2])),n.showParams=c}else n.showParams=null;if(n.preload&&n.preload.length){var r=n.preload.split(";"),l={};for(var h in r){var u=r[h],d=u.indexOf("\x3d");l[u.substring(0,d)]=1*u.substring(d+1)}void 0!=l.lv?(n.preload=l,this.preload_res.push(n)):n.preload=null}else n.preload=null;this.dic_res_id[n.id]=n}},this.getResMeta=function(t){var e=this.dic_res_id[t];return void 0===e?null:e},this.dic_tile_def={},this.dic_tile_group={},this.dic_tile_cube_group={},this.dic_tile_goalname={},this.dic_tile_skeleton_idle={},this.dic_tile_resKey={};var i=t("GameTools");this.loadTileMeta=function(t){for(var n in t){var s=e.__chkType(t[n]);if(this.dic_tile_def[s.id]=s,s.isItem=i.isItem(s),s.goalPass=0,s.goalName){var c=s.goalName.split(",");s.goalName=c[0],c.length>1&&(s.goalPass=parseInt(c[1]))}if(s.goalAnim&&s.goalAnim.length>0){var r=s.goalAnim.split(";");s.goalAnim={fly:1*r[0]==1},r.length>1&&(s.goalAnim.soundId=1*r[1]),r.length>2&&(s.goalAnim.effectId=1*r[2]),r.length>3&&(s.goalAnim.isDown=1*r[3]==1),r.length>4&&(s.goalAnim.goalFinish=1*r[4]==1)}else s.goalAnim=null;if(void 0!==this.dic_tile_goalname[s.goalName]&&null!==this.dic_tile_goalname[s.goalName]||(this.dic_tile_goalname[s.goalName]=s),s.act_idle&&s.act_idle.length>0&&(s.act_idle=s.act_idle.split(";")),s.control&&s.control.length>0){var l=s.control.split(";"),h={};l.length>=1&&(h.pos=a.convertVec2(l[0])),l.length>=2&&(h.scale=parseFloat(l[1])),s.control=h}var u=this.dic_tile_resKey[s.res_id];u||(this.dic_tile_resKey[s.res_id]=u=[]),u.push(s),s.exdt.length<1&&(s.exdt=null),void 0!==s.type&&(this.getTileMetaGroup(s.type).push(s),s.type==o.tile_type_cube&&this.getTileCubeGroup(s.color).push(s))}},this.getTileFormResId=function(t){return this.dic_tile_resKey[t]},this.getTileGoalName=function(t){return this.dic_tile_goalname[t]},this.getTileMeta=function(t){return this.dic_tile_def[t]},this.getTileMetaGroup=function(t){var e=null;return void 0===this.dic_tile_group[t]?(e=[],this.dic_tile_group[t]=e,e):this.dic_tile_group[t]},this.getTileCubeGroup=function(t){var e=null;return void 0===this.dic_tile_cube_group[t]?(e=[],this.dic_tile_cube_group[t]=e,e):this.dic_tile_cube_group[t]},this.getTileCubeMeta=function(t,e){var i=this.getTileCubeGroup(t);if(null===i)return null;var n=null;for(var o in i){var a=i[o];if(null===n&&(n=a),a.count>e)return n;n=a}return n},this.dic_map_def={},this.dic_bigm_gup={},this.loadMapMeta=function(t){var i=e.__init_Gup(t,function(t){return t.bigmap});this.dic_map_def=i.res,this.dic_bigm_gup=i.gup;var o={},a=void 0,s=1,c=void 0,r=void 0;for(var l in i.gup){var h=i.gup[l];if(i.gup[l]){for(var u=0;u<h.length;u++){var d=h[u].episode;if(d&&d.length>0){a=d;break}}if(l>1&&(s=c+1),r=s+"-"+(c=s+h.length-1),!a||""==a){n.error("JsonMetaCache loadMapMeta chapter:"+l+" no name");break}var f=a.split(";");o[l]={name:f[0],chapter:l,items:f.length>1?f[1]:"",levels:r,min:s,max:c,gup:h},a=null}}this.dic_bigm_gup=o},this.getMap=function(t){return this.dic_map_def[t]},this.getBigmGup=function(t){return t?this.dic_bigm_gup[t]:this.dic_bigm_gup},this.findMapChapter=function(t){var e=this.dic_bigm_gup,i=void 0;for(var n in e)if(t>=(i=e[n]).min&&t<=i.max)return i;return null},this.dic_item_def=null,this.dic_item_name={},this.loadItemMeta=function(t){this.dic_item_def=e.__init(t);var i=void 0;for(var n in this.dic_item_def){if(i=this.dic_item_def[n],this.dic_item_name[i.id_name]=i,i.exdt){var o=i.exdt.split(";"),a=[];for(var s in o){var c=o[s],r=c.indexOf("\x3d"),l=null,h=1;r>0?(l=c.substring(0,r),h=1*c.substring(r+1)):l=c,a.push({name:l,num:h})}i.exdt_obj=a}if(i.useItems){var u=i.useItems.split(";"),d=[];for(var f in u){var g=u[f],p=g.indexOf("\x3d"),_=null,m=1;p>0?(_=g.substring(0,p),m=1*g.substring(p+1)):_=g,d.push({name:_,num:m})}i.useItems_obj=d}}this.initAchieveMeta(),this.initShareData(),this.initSignData()},this.getItem=function(t){return this.dic_item_def[t]},this.getItemByName=function(t){return this.dic_item_name[t]},this.dic_achieve_def=null,this.dic_achieve_type_def=null,this.loadAchieveMeta=function(t){this.dic_achieve_def=t,this.dic_item_def&&this.initAchieveMeta()},this.initAchieveMeta=function(){if(this.dic_achieve_def&&!this.dic_achieve_type_def){this.dic_achieve_type_def={};var t=void 0,e=void 0,n=this.dic_achieve_def;for(var o in n)(t=n[o]).award=i.strToArr(t.award),e=t.type,this.dic_achieve_type_def[e]||(this.dic_achieve_type_def[e]=[]),this.dic_achieve_type_def[e].push(t);for(var a in this.dic_achieve_type_def)this.dic_achieve_type_def[a].sort(function(t,e){return t.tar-e.tar})}},this.dic_chest_def={},this.FORMATFUNC_LIST={g1:"format1",g2:"format2",g3:"format2",g1_rand:"format3",g2_rand:"format3",g3_rand:"format3"},this._SP1_=":",this._SP2_="-",this._SP3_="|",this._SP4_="\x3c",this._SP5_="\x3e",this.loadChestMeta=function(t){this.dic_chest_def=t;var e=void 0,i=void 0,n=void 0,o=void 0,a=void 0;for(e in t)for(n in i=t[e])o=i[n],null!=(a=this.FORMATFUNC_LIST[n])&&""!=o&&(i[n]=this[a](o))},this.format1=function(t){if(-1==t.indexOf(this._SP1_)||-1==t.indexOf(this._SP2_))return parseFloat(t);var e={},i=t.split(this._SP1_),n=i[1].split(this._SP2_);return e.id=parseFloat(i[0]),e.min=parseFloat(n[0]),e.max=parseFloat(n[1]),e},this.format2=function(t){if(-1==t.indexOf(this._SP1_)&&-1==t.indexOf(this._SP3_))return parseFloat(t);for(var e=[],i=t.split(this._SP3_),n=0;n<i.length;n++){var a=i[n].split(this._SP1_),s={};if(s.id=parseFloat(a[0]),s.num=parseFloat(a[1]),null!=a[2]){var c=a[2].split(this._SP4_);c.length>=2&&(s.lessKey=c[0],s.lessNum=c[1]);var r=a[2].split(this._SP5_);r.length>=2&&(s.moreKey=r[0],s.moreNum=r[1]),e[o.CHESTCONDITIONKEY]||(e[o.CHESTCONDITIONKEY]=[]),e[o.CHESTCONDITIONKEY].push(s)}else e.push(s)}return e},this.format3=function(t){if(-1==t.indexOf(this._SP2_))return parseFloat(t);var e={},i=t.split(this._SP2_);return e.min=parseFloat(i[0].substring(1)),e.max=parseFloat(i[1].substring(0,i[1].length-1)),e},this.dic_sign_def,this.loadSignMeta=function(t){this.dic_sign_def=t,this.dic_item_def&&this.initSignData()},this.initSignData=function(){var t=this.dic_sign_def;for(var e in t){var n=t[e];for(var o in n){var a=n[o].dayList;for(var s in a){var c=a[s];c.gift=i.strToArr(c.gift)}}}},this.dic_share_def,this.loadShareMeta=function(t){this.dic_share_def=t,this.dic_item_def&&this.initShareData()},this.initShareData=function(){var t=this.dic_share_def;for(var e in t){var n=t[e];for(var a in n){var s=n[a];s.condition=s.condition.split(","),s.awardCondition=s.awardCondition.split(",");var c=[];if(null!=s.pf)for(var r in s.pf){var l=s.pf[r];for(var h in l){var u=l[h];isNaN(parseInt(h))||""==u||(l[h]=i.strToArr(u))}c.push({title:l.title,text:l.text})}if(null!=s.openPf)for(var d in s.openPf=s.openPf.split(","),s.openPf)s.openPf[d]=o.PFS[s.openPf[d]];s.titleList=c}}},this.dic_dynamic_def,this.loadDynamicMeta=function(t){this.dic_dynamic_def=t},this.initDynamicData=function(){var e=this.dic_dynamic_def,i={},n=void 0,o=void 0,a=0;for(n in e.preItems){var s=e.preItems[n].mapList;for(var c in s){var r=s[c];r.itemsId=r.itemsId.split(","),delete s[c],s[r.id]=r}}for(n in e.nobarrier)i[(o=e.nobarrier[n]).key]||(i[o.key]=[],a++),i[o.key].push({tileid:o.tileid,level:o.level});var l=t("SdkIns").instance().getSdkData("dynamic_def");null==l&&(l="streak"),e.streak=e[l];var h={};for(n in e.streak){h[(o=e.streak[n]).winOrLost]=o;for(var u=1;u<=a;u++){var d=o["nobarrier"+u];0!=d&&(d={ratio:d,tileList:i[u]}),o["nobarrier"+u]=d}}e.streakNew=h,e.nobarrierCount=a,this.dic_dynamic_def=e},this.base_money_def,this.dic_money_def,this.dic_money_type_def,this.loadMoneyMeta=function(t){this.base_money_def=t},this.initMoneyData=function(t){var e=this.base_money_def;if(e&&!this.dic_money_def){null==t&&(t=[1,2,3,4,5]),e=e.charge;var i={};for(var n in this.dic_money_def={},e)if(-1!=t.indexOf(0|n)){var o=e[n],a=o.type;i[a]||(i[a]=[]),o.condition=o.condition.split(","),o.hasCharge=o.hasCharge.split(","),o.openSuccess=o.openSuccess.split(",");var s={};for(var c in o.giftlist){var r=o.giftlist[c];this.formatGiftList(r),s[r.discount]||(s[r.discount]=[]),s[r.discount].push(r)}for(var l in o.giftlist=s,o.discount){var h=o.discount[l];h.discount=h.discount.split(",")}for(var u in o.gear){var d=o.gear[u];this.formatGear(d)}i[a].push(o),this.dic_money_def[o.id]=o}this.dic_money_type_def=i}},this.formatGiftList=function(t){t.items=i.strToArr(t.items)},this.formatGear=function(t){t.value=t.value.split(",")},this.dic_task_def={},this.dic_task_gup={},this.loadTaskMeta=function(t){var i=e.__init_Gup(t,function(t){return t.type+"_"+t.lev});this.dic_task_def=i.res,this.dic_task_gup=i.gup}};s.s_instance=null,s.instance=function(){return null===s.s_instance&&(s.s_instance=new s,n.window.JsonMetaCache=s.s_instance),s.s_instance},s.openmap=function(){return s.instance().dic_bigm_gup},s.preloadRes=function(){return s.instance().preload_res},s.res=function(t){return s.instance().getResMeta(t)},s.tile=function(t){return s.instance().getTileMeta(t)},s.tileByName=function(t){return s.instance().getTileGoalName(t)},s.__init=function(t){var e={};for(var i in t){var n=s.__chkType(t[i]);e[n.id]=n}return e},s.__init_Gup=function(t,e){var i={},n={},o=void 0;for(var a in t){var c=s.__chkType(t[a]);i[c.id]=c,n[o=e(c)]||(n[o]=[]),n[o].push(c)}return{res:i,gup:n}},s.__chkType=function(t){for(var e in t)if("string"==typeof t[e]&&1==t[e].length){var i=t[e].charAt(0);"T"!=i&&"F"!=i||(t[e]="T"==i)}return t},s.map=function(t){return s.instance().getMap(t)},s.allMap=function(){return s.instance().dic_map_def},s.item=function(t){return s.instance().getItem(t)},s.itemn=function(t){return s.instance().getItemByName(t)},s.item_idton=function(t){if(!t)return null;var e=[],i=void 0,n=void 0;for(var o in t)i=t[o].id?t[o].id:t[o],n=s.item(i),e.push(n.id_name);return e},s.idton=function(t){var e=s.item(t);return e?e.id_name:null},s.ntoid=function(t){var e=s.itemn(t);return e?e.id:0},s.task=function(t){return s.instance().dic_task_def[t]},s._EMPTYARR_=[],s.taskByType=function(t){return s.instance().dic_task_gup[t]||s._EMPTYARR_},s.groupRes=function(t){var e=s.instance(),i=new Array;for(var n in e.group_res)if(parseInt(n)==t){i.push(e.group_res[n]);break}return i},s.getAllAchieve=function(){return s.instance().dic_achieve_def},s.getAllTypeAchieve=function(){return s.instance().dic_achieve_type_def},s.getAchieveById=function(t){return s.instance().dic_achieve_def[t]},s.getAchieveByType=function(t){return s.instance().dic_achieve_type_def[t]},s.getAllChest=function(){return s.instance().dic_chest_def},s.getAllSign=function(){return s.instance().dic_sign_def},s.getBigmGup=function(t){return s.instance().getBigmGup(t)},s.findMapChapter=function(t){return s.instance().findMapChapter(t)},s.getTileFormResId=function(t){return s.instance().getTileFormResId(t)},s.getShare=function(){return s.instance().dic_share_def},s.getDynamicData=function(){return s.instance().dic_dynamic_def},s.getDynamicDataId=function(){return s.instance().dic_dynamic_def.streak},s.getDynamicDataCount=function(){return s.instance().dic_dynamic_def.streakNew},s.getDynamicPreItems=function(){return s.instance().dic_dynamic_def.preItems},s.getRechargeData=function(){return s.instance().dic_money_def},s.getRechargeTypeData=function(){return s.instance().dic_money_type_def},e.exports=s,cc._RF.pop()},{GameCommon:"GameCommon",GameConfig:"GameConfig",GameTools:"GameTools",SdkIns:"SdkIns",StringUtils:"StringUtils",n7:"n7"}],LanguageData:[function(t,e,i){function n(t){return window.i18n.languages[t]}function o(t){t&&(s?s.replace(t):s=new a({phrases:t,allowMissing:!0}))}cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var a=t("polyglot.min"),s=null;window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=n(t)||{};window.i18n.curLang=t,o(e)}},t:function(t,e){if(s)return s.t(t,e)},inst:s,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],i=0;i<t.length;++i){var n=t[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,n)}for(var o=0;o<e.length;++o)e[o].updateLabel();for(var a=[],s=0;s<t.length;++s){var c=t[s].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(a,c)}for(var r=0;r<a.length;++r)a[r].updateSprite(window.i18n.curLang)}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LinkedList:[function(t,e,i){cc._RF.push(e,"b845dlcLUFMlZcfPX5P8/QS","LinkedList"),e.exports=function(){var t={},e=null,i=null;return t.length=0,t.clear=function(){e=null},t.add=function(i){e={data:i,next:e||null},t.length++},t.push=function(e){i={data:e,next:null},t.tail&&(t.tail.next=i),t.tail=i},t.del=function(i){if(e.data!=i)for(var n=temp=e;temp;n=temp,temp=temp.next){if(temp.data==i)return n.next=temp.next,void t.length--}else this.pop()},t.pop=function(){var i=e;return e=e.next,t.length--,i},t.get=function(t){for(var i=e;i;i=i.next)if(i.data==t)return i},t.show=function(t){for(var i=e;i;i=i.next)console.log(i.data)},t},cc._RF.pop()},{}],LocalizedLabel:[function(t,e,i){cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=t("LanguageData");cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){n.init||n.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,i){cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=t("SpriteFrameSet");cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{"default":[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],LogicActiveSale:[function(t,e,i){cc._RF.push(e,"8399cpA/B5MVpDXmKKSFi6u","LogicActiveSale");var n=t("WorkData"),o=t("UserLogic"),a=t("MathUtils"),s=t("GameTools"),c=t("GameEvent"),r=t("JsonMetaCache"),l=(t("GameConfig"),t("SdkIns")),h=cc.Class({properties:{},statics:{instance:function(){return h.s_instance||(h.s_instance=new h),h.s_instance},start:function(){h.instance().start()},id:function(){return h.instance().id},buyFinish:function(t,e){return h.instance().buyFinish(t,e)},addRecharge:function(t){return h.instance().addRecharge(t)}},start:function(){this.logic()},initEvent:function(){},logic:function(){l.instance(),c.EVENT_ACTIVESALSE_ICON(0)},buyFinish:function(t,e){this.addRecharge(t,e),n.set(n.WKD_ACTIVESALE_PRE_ID,this.id),this.id=0,n.set(n.WKD_ACTIVESALE_ID,0),c.EVENT_ACTIVESALSE_ICON(0)},addRecharge:function(t,e){var i=n.get(n.WKD_RECHARGECOUNT);e||(t=l.instance().exchangeGlobal(t)),n.set(n.WKD_RECHARGECOUNT,i+t),n.set(n.WKD_RECHARGEDATA,10*t+1),n.set(n.WKD_RECHARGETIME,s.today())},firstRechargeLogic:function(t){return!(t||n.get(n.WKD_ACTIVESALE_ID)>=0)&&(o.geti("lev")>=11?this.showDialog(1,!0):(c.EVENT_ACTIVESALSE_ICON(0),!1))},unrechargeLogic:function(t){if(t)return!1;if(this.activeTime<=0)return c.EVENT_ACTIVESALSE_ICON(0),!0;var e=r.activeType(1),i=null,o=0,s=n.get(n.WKD_ACTIVESALE_PRE_ID);if(s){o=(i=r.active(s)).saleOff,i=null;for(var l=e.length-1;l>=0;l--){var h=e[l];if(!(l>=o)&&h){i=a.randArray(h);break}}i||(i=a.randArray(e[1]))}else{var u=e[e.length-1];i=u[u.length-1]}return o=i.saleOff,s=i.id,this.showDialog(s,!0)},rechargeLogic:function(t){if(!t)return!1;var e=r.activeType(2),i=n.get(n.WKD_RECHARGEDATA),o=7;if(i%10){i=parseInt(i/10);var c=e[o];if(n.set(n.WKD_RECHARGEDATA,10*i),!c)return;for(var l=c[c.length-1],h=l.id,u=c.length-1;u>=0&&!((l=c[u]).price<=i);u--)h=l.id;return this.showDialog(h,!0)}var d=n.get(n.WKD_RECHARGETIME);if(o=7,o=(d=s.dayDifference(d,s.today()))<=3?a.randArray([8,7]):d<=7?a.randArray([6,7]):d<=11?a.randArray([6,5]):d<=14?a.randArray([4,5]):d<=14?3:1,list=e[o],list){id=0;var f=6;t<18&&(f=a.randArray([6,18])),f=t<30?a.randArray([6,18,30]):t<68?a.randArray([6,18,30,68]):t<328?a.randArray([6,18,30,68,128]):a.randArray([6,18,30,68,128,328]);for(var g=null,p=0,_=list.length;p<_;p++){if((g=list[p]).price==f){id=g.id;break}if(g.price>f)break;id=g.id}return this.showDialog(id,!0)}},showDialog:function(t,e){return this.id=t,e&&(n.set(n.WKD_ACTIVESALE_ID,t),this.activeTime=s.today(),n.set(n.WKD_ACTIVESALE_TIME,this.activeTime),c.EVENT_OPEN_DIALOG({name:"dialog_activesale",param:{id:t}})),c.EVENT_ACTIVESALSE_ICON(t),!0}});e.exports=h,cc._RF.pop()},{GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",SdkIns:"SdkIns",UserLogic:"UserLogic",WorkData:"WorkData"}],MainPageCtr:[function(t,e,i){cc._RF.push(e,"201f9s5vtxA5bZsUD5SWHib","MainPageCtr"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){var t=this.node.getComponent(cc.PageView);t._onTouchBegan=function(t){},t._onTouchMoved=function(t){},t._onTouchCancelled=function(t){},t._onTouchEnded=function(t){}}}),cc._RF.pop()},{}],MapTarget:[function(t,e,i){cc._RF.push(e,"1979aaQfiJPA6+MWiRxlIvI","MapTarget");var n=t("n7"),o=t("GameTools"),a=t("GameEvent"),s=t("JsonMetaCache"),c=function e(){this.goals=null,this.maxMoves=3,this.endLeftMoves=0,this._target=null,this._hard=0,this._energy=0,this.score=0,this.MAXSCORE=6E3,this._starp=[],this.geti=function(t,e){return this._target?1*this._target[t]:e},this.gets=function(t,e){return this._target?this._target[t]:e},this.getHard=function(){return this._hard},this.onDestroy=function(){a.off(this)},this.setTarget=function(i){this.endLeftMoves=0,this._target=i,this._hard=i.row.hard;var c=s.map(i.mapid),r=t("GameLogic").getCrossCompensation(null,i.mapid),l=t("GameLogic").getSdkChgStep();i.maxMoves=c.maxMoves+r+l,i.star1=c.star1,i.star2=c.star2,i.star3=c.star3;var h=1*i.star1,u=1*i.star2,d=1*i.star3;this.MAXSCORE=parseInt(1.1*d);var f=o.Percentage(h,this.MAXSCORE),g=o.Percentage(u,this.MAXSCORE),p=o.Percentage(d,this.MAXSCORE),_=",loseStep: "+r+",sdkStep: "+l+",maxMoves: "+c.maxMoves;n.log("scorefly.calcScore.\u661f\u661f\u9700\u8981\u7684\u5206,star1: "+h+",star2: "+u+",star3: "+d+",\u6700\u9ad8\u5206: "+this.MAXSCORE+_),this._starp=[f,g,p],this.score=0,this.is_on_score||(this.is_on_score=!0,a.on(a.EVENT_GAME_ADD_SCORE,function(t){var e=t.getUserData();this.score+=e,n.isDebug&&n.log("scorefly.MapTarget.\u903b\u8f91\u5206\u6570: "+this.score)},this)),this.allMaxMoves=this.maxMoves=1*i.maxMoves,this._done=!1,this.goals={};var m,v,E="";for(var y in this._target)y.indexOf("Goal")>=0&&(v=s.tileByName(y),m=1*this._target[y],this.goals[y]={num:m,name:y,row:v,count:m},E+=y+":"+m+";");this.goal_str=E,this.uuid=++e.uuid,n.log("setTarget "+this.uuid),a.EVENT_STAR_INIT(this._starp)},this.getBMoves=function(){return this.getMoveStep()},this.setEndLeftMoves=function(t){this.endLeftMoves=t},this.getEndLeftMoves=function(){return this.endLeftMoves},this.isTarget=function(t){var e=t.goalName;return null==e&&(e=t),this.goals[e]?this.goals[e].num:-1},this.getTargetNum=function(t){var e=s.tile(t);if(!e)return-1;var i=e.goalName;return this.goals[i]?this.goals[i].num:-1},this.dispelTarget=function(t){if(!this.goals[t])return 0;if(this.goals[t].num<1)return 0;this.goals[t].num--;var e=this.goals[t].num<1&&this.isDone()?2:1;return this._done=2==e,e},this.end=function(){for(var t in this.goals)this.goals[t].num=1},this.goalToStr=function(){var t="";for(var e in this.goals)t+=e+":"+this.goals[e].num+";";return t},this.getGoals=function(){return this.goals},this.isDone=function(){for(var t in n.log("isDone "+this.uuid),this.goals)if(this.goals[t].num>0)return!1;return!0},this.isAllDone=function(){return this._done},this.getMove=function(){return this.maxMoves},this.subMove=function(){this.maxMoves--,this.maxMoves<0&&(this.maxMoves=0),a.EVENT_GAME_MOVE_STEP(this.maxMoves);var t=this.maxMoves;switch(t){case 10:a.EVENT_OPEN_GAME_DIALOG({name:"dialog_steptips",param:10});break;case 5:a.EVENT_OPEN_GAME_DIALOG({name:"dialog_steptips",param:5})}return t>0},this.getBalData=function(){var t=this.__calcStar();return{score:this.score,star:t,mapid:this.geti("mapid"),goals:this.goals,move:this.maxMoves,allmove:this.allMaxMoves,goals_str:this.goal_str}},this.getMoveStep=function(){return this.maxMoves},this.addMoveStep=function(t){this.maxMoves+=t,a.EVENT_GAME_MOVE_STEP(this.maxMoves)},this.chgLogicTarget=function(t,e){var i=s.tile(t).goalName;if(!this.goals[i])return 0;this.goals[i].count+=e,this.goals[i].num+=e,a.EVENT_GAME_TARGETNUMCHG([t,e])},this.__calcStar=function(){if(this.maxMoves>=t("GameMapV2").STAR3)return 3;var e=o.Percentage(this.score,this.MAXSCORE);e>1&&(e=1);for(var i=0;i<this._starp.length&&!(e<this._starp[i]);)i++;return i},this.getRecordData=function(){var t={};for(var e in t.score=this.score,t.getMoveStep=this.getMoveStep(),t.goal={},this.goals)t.goal[e]=this.goals[e].num;return t},this.getScore=function(){return this.score},this.runByRecordData=function(t,e){for(var i in a.EVENT_GAME_ADD_SCORE(t.score-this.score),this.score=t.score,this.addMoveStep(t.getMoveStep-this.getMoveStep()),this.goals)t.goal[i]-=this.goals[i].num,this.goals[i].num+=t.goal[i];a.EVENT_GAME_ADD_GOAL(t.goal)}};c.uuid=0,e.exports=c,cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameMapV2:"GameMapV2",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",n7:"n7"}],MathUtils:[function(t,e,i){cc._RF.push(e,"83b22f8tcNDaIsDQSJYBmvW","MathUtils");var n=function(){};n.PI_180=Math.PI/180,n.S180_PI=180/Math.PI,n.LEAD=50,n.PI_X2=2*Math.PI,n.getNormalPoint=function(t,e,i,n){return cc.p(i-t,n-e)},n.angle=function(t,e,i){var o=this.radian(t,e,i)*n.S180_PI;return o>=0?o:360+o},n.radian=function(t,e,i){return i?e.sub(t).angle():Math.atan2(e.y-t.y,e.x-t.x)},n.getAiPredictPoint=function(t,e,i){return this.getAimPoint(t,e,i,this.LEAD)},n.getAimPointOffset=function(t,e,i,n,o){return cc.p(t+n*Math.cos(i),e+o*Math.sin(i))},n.getAimPoint=function(t,e,i,n,o,a,s){if(a&&null===s&&(s=a),null===a&&(a=n-t),null===s&&(s=o-e),0===i)return cc.p(n,o);var c=a*Math.cos(i)-s*Math.sin(i)+t,r=s*Math.sin(i)+s*Math.cos(i)+e;return cc.p(c,r)},n.angleToRadian=function(t){return n.PI_180*t},n.radianToAngle=function(t){return n.S180_PI*t},n.distance=function(t,e){return Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))},n.pointToLineDistance=function(t,e,i){var n,o,a,s=void 0,c=void 0,r=void 0,l=void 0;return t.x==e.x?Math.abs(i.x-t.x):t.y==e.y?Math.abs(i.y-e.y):(t.x>e.x?(c=t.x,s=e.x,l=t.y,r=e.y):(s=t.x,c=e.x,r=t.y,l=e.y),a=-((n=(l-r)/(c-s))*s+(o=n*(s-c)/(l-r))*r),Math.abs(n*i.x+o*i.y+a)/Math.sqrt(n*n+o*o))},n.pointInRect=function(t,e,i,n,o,a){return i==o&&e>=n&&e<=a||e==o&&t>=i&&t<=o||t>=i&&t<=o&&e>=n&&e<=a},n.triangleArea=function(t,e,i){return Math.abs((t.x*e.y+e.x*i.y+i.x*t.y-e.x*t.y-i.x*e.y-t.x*i.y)/2)},n.pointInTriangle=function(t,e,i,n){var o=MathTools.triangleArea(e,i,n),a=MathTools.triangleArea(t,e,i);return a+=MathTools.triangleArea(t,e,n),a+=MathTools.triangleArea(t,i,n),Math.abs(o-a)<1E-4},n.lineK=function(t,e){var i=e.x-t.x;return(e.y-t.y)/i},n.getCirclePath=function(t,e,i,n,o){return null===o&&(o=n),i<3?null:{}},n.getLineCenterPos=function(t,e){return cc.p((t.x+e.x)/2,(t.y+e.y)/2)},n.rand=function(t,e){return void 0===e?Math.random()*t:Math.random()*(e-t)+t},n.randRadian=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=n.PI_X2),n.rand(t,e)},n.convertToNodeVec2=function(t,e){return t instanceof cc.Node?t.convertToNodeSpaceAR(e):null},n.convertToWorldVec2=function(t){return t instanceof cc.Component&&(t=t.node),t instanceof cc.Node&&t.parent?t.parent.convertToWorldSpaceAR(t.getPosition()):null},n.convertNodeToNodeVec2=function(t,e){t instanceof cc.Component&&(t=t.node),e instanceof cc.Component&&(e=e.node);var i=t.parent.convertToWorldSpaceAR(t.getPosition());return e.parent.convertToNodeSpaceAR(i)},n.range=function(t,e,i){return t<=e&&i>=e},n.randOdds=function(t,e){var i=n.randInt(0,t.odds),o=0,a=o;for(var s in t.list){var c=t.list[s];if(a+=c.odds,n.range(o,i,a))return c.data;o=a}return void 0!=e?t.list[e]:null},n.randFloat=function(t,e){return Math.random()*(e-t)+t},n.randInt=function(t,e){return parseInt(Math.random()*(e-t)+t)},n.randArray=function(t,e){var i=n.randInt(0,e||t.length);return t[i<t.length?i:0]},n.randPopArray=function(t,e){if(e>=t.length)return t;for(var i=[],o=t.length,a=0;a<e;a++){var s=n.randInt(0,e);i.push(t[s]),n.swapArray(t,s,--o)}return i},n.randv1v2=function(t,e,i){return void 0==i&&(i=e.v2,e=e.v1),t%(i-e+1)+e},n.swapArray=function(t,e,i){var n=t[e];t[e]=t[i],t[i]=n},n.getVal=function(t,e,i){return t&&void 0!=t[e]?t[e]:i},n.getv2=function(t,e,i){if(!t)return i;var o=e.indexOf("."),a=e,s=void 0;return o>0&&(a=e.substr(0,o),s=e.substring(o+1)),void 0==t[a]?i:s?n.getv2(t[a],s,i):t[a]},n.getv2i=function(t,e,i){return i||(i=0),parseInt(n.getv2(t,e,i))},n.geti=function(t,e,i){i||(i=0);var o=parseInt(n.getVal(t,e,i));return isNaN(o)?i:o},n.gets=function(t,e,i){return n.getVal(t,e,i)},n.randRatio=function(t,e){var i=void 0,o=void 0;if(!e)for(e=0,i=0;i<t.length;i++)e+=t[i].ratio;for(o=n.randInt(0,e+1),i=0;i<t.length;i++){if(o<=t[i].ratio)return t[i].n;o-=t[i].ratio}return null},n.randr=function(t,e,i){return t%(i-e+1+e)},n.arrayRandr=function(t,e){return t[n.randr(e,0,t.length-1)]},n.inArr=function(t,e){if(!t)return-1;for(var i=0;i<t.length;i++)if(e==t[i])return i;return-1},n.delArr=function(t,e){var i=n.inArr(t,e);return-1==i?-1:(t.splice(i,1),t.length)},n.findInt=function(t){return 1*t.replace(/[^0-9]/gi,"")},n.getArr=function(t,e){return e>=t.length?null:t[e]},n.setArr=function(t,e,i){t||(t=[]);var n=e-t.length+1;if(n>0)for(;n>0;n--)t.push(null);return t[e]=i,i},n.adjacent=function(t,e,i){var n=void 0,o=void 0,a=void 0,s=0,c=void 0;for((void 0==i||t.length<i)&&(i=t.length),n=1;n<i;n++)for(a=t[s++],o=n+1;o<t.length;o++)if(e(a,t[o])){c=t[n],t[n]=t[o],t[o]=c;break}return t},n.upset=function(t,e){for(var i=t.length,o=void 0,a=void 0;e<i;e++)a=n.randInt(e,i),o=t[e],t[e]=t[a],t[a]=o;return t},n.unique=function(t,e){if(t.length<1)return 0;e||(e=function(t,e){return t==e});for(var i=0,n=[t[0]],o=1,a=t.length;o<a;o++,i=0){for(;i<n.length&&!e(n[i],t[o]);i++);i==n.length&&n.push(t[o])}return n},e.exports=n,cc._RF.pop()},{}],N7AsynchList:[function(t,e,i){cc._RF.push(e,"ccca9AfFoRCx5XZse9c/Ju2","N7AsynchList"),cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null},template:{type:cc.Node,"default":null},pageCount:0,frameCount:1},setScrollEvent:function(t){t.on("scroll-to-bottom",this.scrollDown,this),t.on("scroll-to-top",this.scrollUp,this),this.isScroll=!0},setContent:function(t){this.content=t||this.node},setList:function(t,e,i){this.setContent(this.content),this.list=t,this.count=t.length,this.addCount=0,this.pageCount<=0?(this.step=1,this.toIdx=this.count):this.step=0;var n=void 0!=e?e:0;this.minIdx=this.maxIdx=n,i&&this.setScrollEvent(this.content.parent)},scrollUp:function(){if(!this.isAddFinish()&&this.pageCount){if(0!=this.step)return;if(this.minIdx<=0)return;this.toIdx=this.minIdx-this.pageCount,this.toIdx<0&&(this.toIdx=0),this.step=-1}},scrollDown:function(){if(!this.isAddFinish()&&this.pageCount){if(0!=this.step)return;if(this.maxIdx>=this.count)return;this.toIdx=this.maxIdx+this.pageCount,this.toIdx>this.count&&(this.toIdx=this.count),this.step=1}},isAddFinish:function(){return this.addCount>=this.count},createList:function(){for(var t=this.step,e=t?this.maxIdx:this.minIdx,i=0;i<this.frameCount&&e!=this.toIdx;i+=t,e+=t){var n=this.createNode();t>0?this.content.addChild(n):this.content.insertChild(n,0),this.onAddNode(n,this.list[e]),++this.addCount}t?this.maxIdx=e:this.minIdx=e,e==this.toIdx&&(this.step=0),this.isAddFinish()&&this.onFinish(this.isAddFinish())},createNode:function(){return cc.instantiate(this.template)},update:function(t){0==this.step||void 0==this.step||this.isAddFinish()||this.createList()},onAddNode:function(t,e){},onFinish:function(){}}),cc._RF.pop()},{}],N7Cache:[function(t,e,i){cc._RF.push(e,"bd9c4AvOJ9JT5CWCtGcTbty","N7Cache");var n=function t(e,i){this.type=e||t.CACHE_TYPE_NOODPOOL,this.cache={},this.max=i};n.CACHE_TYPE_NOODPOOL=1,n.CACHE_TYPE_OBJECT=2,n.prototype.type=n.CACHE_TYPE_NOODPOOL,n.prototype.cacheTime=60,n.prototype.getCache=function(t,e){var i=this.cache[t];if(!i){if(e)return null;i=this.type==n.CACHE_TYPE_NOODPOOL?new cc.NodePool:[],this.cache[t]=i}return i},n.prototype.put=function(t,e){var i=this.getCache(t);if(this.type==n.CACHE_TYPE_NOODPOOL){if(this.max&&i.size()<this.max)return i.put(e),!0}else if(this.max&&i.length<this.max)return i.push(e),!0;return!1},n.prototype.get=function(t){for(var e=null;e=this.getAndCheck(t);){if(null==e)return null;if(cc.isValid(e))return e}return null},n.prototype.getCount=function(t){var e=this.getCache(t);return this.type==n.CACHE_TYPE_NOODPOOL?e.size():e.length},n.prototype.getAndCheck=function(t){var e=this.getCache(t,!0);if(!e)return null;if(this.type==n.CACHE_TYPE_NOODPOOL)return e.get();if(0==e.length)return null;var i=e[0];return e.splice(0,1),i},n.prototype.clear=function(){for(var t in this.cache){var e=this.cache[t];this.type==n.CACHE_TYPE_NOODPOOL?e.clear():e=null}},n.prototype.update=function(t){},e.exports=n,cc._RF.pop()},{}],N7CheckRes:[function(t,e,i){cc._RF.push(e,"f9e5aZei1pIkobJ6gB+5PLz","N7CheckRes");var n=t("n7");cc.Class({properties:{},start:function(t){var e=t.name;n.log("LoadUI-\x3eName:"+("Canvas"==e?cc.director._scene._name:e)),this.resList={},this.loadRes(t)},loadRes:function(t){t||(t=this.node);var e=t.getComponent(cc.Sprite);if(e){var i=e.spriteFrame;if(i){var o=this.resList,a=i._textureFilename;o[a]||(o[a]=!0,n.log("LoadUI-\x3eURL:"+a))}}var s=t.children;for(var c in s)this.loadRes(s[c])}}),cc._RF.pop()},{n7:"n7"}],N7CircleBar:[function(t,e,i){cc._RF.push(e,"21d5dVQ909O94DRG1ehp0k5","N7CircleBar"),cc.Class({"extends":cc.Component,properties:{mask:{type:cc.Mask,"default":null}},start:function(){},update:function(t){this.step&&(this.time-=t,this.curValue+=this.step*(1E3*t),this.curValue>this.value&&(this.curValue=this.value,this.step=0),this.setMask())},init:function(){this.curValue=0,this.value=0,this.step=0},setMask:function(){this.curValue>=1?this.mask.node.active=!1:(this.mask.node.active=!0,this.mask.alphaThreshold=this.curValue),this.callFunc.call(this.caller,this.curValue,this.value,1)},progress:function(t,e){this.value=t,e?(this.time=e,this.step=(t-this.curValue)/(1E3*e)):(this.time=0,this.curValue=t,this.setMask())},setCallFunc:function(t,e){this.callFunc=t,this.caller=e}}),cc._RF.pop()},{}],N7FitScreen:[function(t,e,i){cc._RF.push(e,"c1982+q8bNCfI42yuMBjV/0","N7FitScreen");var n=t("n7"),o=t("GameEvent"),a=cc.Class({"extends":t("N7UILayer"),properties:{fitWidht:!1,fitHeight:!1,minWidth:0,minHeight:0,content:{type:cc.Node,"default":null},background:{type:cc.Node,"default":null}},statics:{instance:function(){return a.s_instance}},onLoad:function(){a.s_instance=this,this.fit(),this.schedule(this.checkFit,1)},start:function(){},onDestroy:function(){o.off(this),a.s_instance==this&&(a.s_instance=null)},checkFit:function(){var t=cc.Canvas.instance.node;this.canvasSize.width==t.width&&this.canvasSize.height==t.height||o.EVENT_CANVAS_RESIZE(cc.size(t.width,t.height))},fit:function(){var t=cc.Canvas.instance.node;this.canvasSize=cc.size(t.width,t.height),this.fitHeight?this.initFitHeight():this.fitWidht?this.initFitWidth():this.initFitAll(),o.EVENT_CANVAS_RESIZEEND(this.canvasSize),o.EVENT_PAGE_RESIZEEND(this.canvasSize)},initFitAll:function(){var t=cc.Canvas.instance.node;this.content.scale=1,this.minHeight=this.minHeight||n.desginHeight,this.content.height=t.height,this.content.width=t.width},initFitWidth:function(){var t=cc.Canvas.instance,e=t.node;this.content.scale=1,this.scale=e.height/t.designResolution.height,this.backgroundScale=1,e.width>n.orgDesginWidth&&(this.backgroundScale=e.width/n.orgDesginWidth),e.height>n.orgDesginHeight&&(this.backgroundScale=e.height/n.orgDesginHeight),this.background&&(this.background.scale=this.backgroundScale),this.content.width=e.width,this.isPhoneX=n.isPhoneX(),this.isPhoneX&&(this.content.y=n.contentOffsetY),this.content.height=this.isPhoneX?n.desginHeight:e.height,e.height<this.minHeight&&(this.content.scale=e.height/n.desginHeight,this.content.height=this.content.height/this.content.scale,this.content.width=e.width/this.content.scale,n.log("N7FitScreen fit height 2 scale:"+this.scale))},initFitHeight:function(){var t=cc.Canvas.instance,e=t.node;this.scale=1,this.scale=e.height/t.designResolution.height,this.background.scale=n.desginHeight/e.height,e.height>=t.designResolution.height?(this.content.height=n.isPhoneX()?n.desginHeight:e.height,this.content.width=e.width,n.log("N7FitScreen fit height 1 scale:"+this.scale)):(this.scale=n.desginHeight/e.height,this.content.scale=this.scale,n.log("N7FitScreen fit height 2 scale:"+this.scale))}});cc._RF.pop()},{GameEvent:"GameEvent",N7UILayer:"N7UILayer",n7:"n7"}],N7HotUpdate:[function(t,e,i){cc._RF.push(e,"159cc/o5DNBE5H+ihl2kbFG","N7HotUpdate");var n=t("GameEvent"),o=t("GameTools"),a=cc.Class({"extends":cc.Component,properties:{nativeUrl:"",_updating:!1,_canRetry:!1,_storagePath:""},statics:{instance:function(){return a.s_instance||(a.s_instance=new a),a.s_instance},init:function(){return a.instance().init()},STATE_ROOTGAME:1,STATE_NEEDUPDATE:2,STATE_RESTART:3,STATE_RETRY:4,STATE_SUCCESS:5,STATE_FAILED:6},initEvent:function(){},commonCode:function(t,e){var i={msg:null,state:-1,failed:!1,ret:!1},s=t.getEventCode();switch(s){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:i.msg=o.i18ns("load_fail"),i.state=a.STATE_FAILED,i.failed=!0;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:i.msg=o.i18ns("query_fail"),i.state=a.STATE_FAILED,i.failed=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:i.msg=o.i18ns("ok"),i.state=a.STATE_ROOTGAME,i.verCur=this._am.getLocalManifest().getVersion();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:i.msg=o.i18ns("info"),i.state=a.STATE_NEEDUPDATE}return e.call(this,s,i,t),i.state>=0&&n.EVENT_ASSETSUPDATE_STATE(i),i},checkCb:function(t){this.commonCode(t,function(t,e){t==jsb.EventAssetsManager.NEW_VERSION_FOUND&&(e.msg=o.i18ns("find_new"),e.state=a.STATE_NEEDUPDATE,e.verNew=e.verCur=this._am.getLocalManifest().getVersion())}),this._am.setVerifyCallback(null),this._updateListener=null,this._updating=!1},updateCb:function(t){var e=!1;if(this.commonCode(t,function(t,i,s){switch(t){case jsb.EventAssetsManager.UPDATE_PROGRESSION:n.EVENT_ASSETSUPDATE_P(s);break;case jsb.EventAssetsManager.UPDATE_FINISHED:i.msg=o.i18ns("update_ok"),i.state=a.STATE_SUCCESS,e=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:i.failed=!0,++this.retryCount,i.msg=o.i18ns("update_fail",[this.retryCount]),i.state=a.STATE_RETRY,this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:i.failed=!0,i.state=a.STATE_RETRY,i.msg=o.i18ns("update_ifail"),n7.log("N7HotUpdate updateCb download fail file:"+s.getAssetId()+","+s.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:i.msg=s.getMessage()}}).failed&&(this._am.setVerifyCallback(null),this.clearEventListener(),this._updateListener=null,this._updating=!1),e){this._am.setVerifyCallback(null),this.clearEventListener(),this._updateListener=null;var i=jsb.fileUtils.getSearchPaths(),s=this._am.getLocalManifest().getSearchPaths();cc.log(JSON.stringify(s)),Array.prototype.unshift.apply(i,s),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(i)),jsb.fileUtils.setSearchPaths(i)}},clearEventListener:function(){this._eam&&(cc.director.getEventDispatcher().removeListeners(this._eam,this),this._eam=null)},addEventListener:function(t){this._eam=new jsb.EventListenerAssetsManager(this._am,t.bind(this)),cc.director.getEventDispatcher().addEventListenerWithFixedPriority(this._eam,1)},retry:function(){if(!this._updating&&this._canRetry){this._canRetry=!1;var t=this._am.getStoragePath();return t&&jsb.fileUtils.removeDirectory(t),void this.hotUpdate()}},checkUpdate:function(){if(!this._updating){if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.nativeUrl;cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),this._am.loadLocalManifest(t)}this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this.addEventListener(this.checkCb),this._am.setVerifyCallback(this.checkVerify),this._am.checkUpdate(),this._updating=!0,this.retryCount=0):n.EVENT_ASSETSUPDATE_STATE({msg:o.i18ns("load_ifail"),state:a.STATE_FAILED,failed:!0})}},hotUpdate:function(){if(this._am&&!this._updating){if(this.addEventListener(this.updateCb),this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.nativeUrl;cc.loader.md5Pipe&&(t=cc.loader.md5Pipe.transformURL(t)),this._am.loadLocalManifest(t)}this._failCount=0,this._am.setVerifyCallback(this.checkVerify),this._am.update(),this._updating=!0}},downLoadFailed:function(){assetsManager.downloadFailedAssets()},init:function(t){return!!cc.sys.isNative&&(this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",cc.log("Storage path for remote asset : "+this._storagePath),this.versionCompareHandle=function(t,e){cc.log("JS Custom Version Compare: version A is "+t+", version B is "+e);for(var i=t.split("."),n=e.split("."),o=0;o<i.length;++o){var a=parseInt(i[o]),s=parseInt(n[o]||0);if(a!==s)return a-s}return n.length>i.length?-1:0},this._am=new jsb.AssetsManager("assets/project.manifest",this._storagePath,this.versionCompareHandle),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),!0)},onDestroy:function(){this._updateListener&&(this._am.setVerifyCallback(null),this._updateListener=null)},checkVerify:function(t,e){return e.compressed,e.md5,e.path,e.size,!0}});cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools"}],N7HttpToJava:[function(t,e,i){cc._RF.push(e,"82b8bT9vFJLXYFQtMGuUCQ9","N7HttpToJava");var n=t("GameTools"),o=t("n7"),a=t("JBase64"),s=t("MathUtils"),c=t("StringBuilder"),r=function(){};e.exports=r,o.window.N7HttpToJava=r,r.CALLBACK={},r["do"]=function(t,e,i){var a=t,l="n7_"+n.cutm()+s.randInt(1E4,99999);r.CALLBACK[l]=i,e||(e={}),e.jsonp=l;var h=new c("\x26");for(var u in e)h.Append(u+"\x3d"+e[u]);var d=h.toString();o.log("N7HttpToJava:url:"+a+":params:"+d),r.__callToJava(a,d)},r.__response=function(t){var e=t.indexOf("("),i=t.lastIndexOf(")"),n=t.substring(0,e),o=r.CALLBACK[n];o&&delete r.CALLBACK[n],t=t.substring(e+1,i);var a=[JSON.parse(t)];o&&o(a)},r.__callToJava=function(t,e){return o.isAndroid?window.jsb.reflection.callStaticMethod("net/N7Http","thread_get","(Ljava/lang/String;Ljava/lang/String;)V",t,e):o.isIOS?(window.http_callback||(window.http_callback=function(t){r.java_get_response(t)}),jsb.reflection.callStaticMethod("N7Http","openURLGet:params:",t,e)):r._java_get_response(r.JAVA_ERROR+e+"|not:window.jsb"),o.isAndroid},r.JAVA_ERROR="ERROR Unexpected:",r.java_get_response=function(t){t?(t=a.decode(t),r._java_get_response(t)):o.error("N7HttpToJava.java_get_response r is null")},r._java_get_response=function(t){if(t){if(0==t.indexOf(r.JAVA_ERROR)){var e=(t=t.substring(r.JAVA_ERROR.length)).split("|"),i=e[0].split("\x26"),n=void 0;for(var a in i)if(0==i[a].indexOf("jsonp\x3d")){n=i[a].substr(6);break}if(!n)return void o.error("java_get_response:error:"+e[1]);t=n+'({"code":-9,"msg":"'+encodeURIComponent(e[1])+'"})'}o.log("N7HttpToJava.__response:"+t),r.__response(t)}else o.error("N7HttpToJava._java_get_response r is null")},r.test=function(){r._java_get_response("ERROR Unexpected:version\x3d1.0.6\x26pf\x3dkuaishou\x26openid\x3dnull\x26content\x3d%7B%22uid%22%3A%22EwWSAJ2y2M2PB_s4onMK8w%22%2C%22sdktoken%22%3A%22ChJvcGVucGxhdGZvcm0udG9rZW4SMAorPX7RAeiL0M0wkc4aZGSRqSpHYTSC44AD1FNV3lE6yAW9746dfxzSb9clZ2W2KhoS-kD-wdRNSEuh7HbKp4dDkl_0IiDDx4Dn1rIXF0s5ALuLSSuorSbVbiG6b6jbIWqYmhljWygFMAE%22%2C%22sdktokensign%22%3A%22PyZ8QJ_37QR4Fif32hwdafJBhoC8n5p9athY1Rjxhfg%22%7D\x26jsonp\x3dn7_153736014152815717|Failed to connect to /192.168.100.247:10086")},cc._RF.pop()},{GameTools:"GameTools",JBase64:"JBase64",MathUtils:"MathUtils",StringBuilder:"StringBuilder",n7:"n7"}],N7Jsonp:[function(t,e,i){cc._RF.push(e,"23125q4BNNEipCj6wfK72bl","N7Jsonp");var n=t("StringBuilder"),o=t("GameTools"),a=t("MathUtils"),s=t("n7"),c=function(){};e.exports=c,c.getRequest=function(){try{return new XMLHttpRequest}catch(t$7){}return null},c.formatParams=function(t){return c.toString(t)+"\x26jsonp\x3dnote7_"+o.cutm()+a.randInt(1E4,99999)},c.ajax=function(t){(t=t||{}).type=t.type||"GET",t.dataType=t.dataType||"json";var e=c.toString(t.data);e+="\x26jsonp\x3dnote7_"+o.cutm()+a.randInt(1E4,99999);var i=c.getRequest();i?(i.onreadystatechange=function(){try{switch(i.readyState){case 4:i.status>=200&&i.status<400?t.success&&t.success(i.responseText,t.fo):t.error&&t.error(status)}}catch(t$8){}},s.log("N7Jsonp-OUT "+t.type+":"+t.url+"?"+e),"GET"==t.type?(i.open("GET",t.url+"?"+e,!0),i.send(null)):"POST"==t.type&&(i.open("POST",t.url,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(e))):s.log("N7Jsonp:error:not:Request")},c["do"]=function(t,e,i,n){var o=t;s.log("N7Jsonp-SEND "+o),c.ajax({url:o,type:"GET",data:e,fo:i,success:c.__response,error:function(t){console.log("jsonp error:"+t)}})},c.__response=function(t,e){s.log("r:"+t);var i=t.indexOf("(")+1,n=t.lastIndexOf(")"),o=[JSON.parse(t.substring(i,n))];e&&e(o)},c.toString=function(t){var e=new n("\x26");for(var i in t)e.Append(i+"\x3d"+t[i]);return e.ToString()},cc._RF.pop()},{GameTools:"GameTools",MathUtils:"MathUtils",StringBuilder:"StringBuilder",n7:"n7"}],N7MusicV2:[function(t,e,i){cc._RF.push(e,"9bcfbu6MtNIqpFr9VOYy4LH","N7MusicV2"),t("GameTools");var n=t("GameEvent"),o=t("SdkIns"),a=cc.Class({"extends":cc.Component,properties:{clip:{type:cc.AudioClip,"default":null}},onLoad:function(){n.on(n.EVENT_SWITCH_MUSIC,function(){this.play()},this),n.on(n.EVENT_SWITCH_VOL,function(){this.volume()},this),a.VOL||this.volume(),a.BGM&&this.play()},onDestroy:function(){cc.audioEngine.stopMusic(),n.off(this)},play:function(){(this.clip||this.isPlay!=a.BGM)&&(o.instance().useSelfSound()?o.instance().playMusic(this.clip,a.BGM):a.BGM?cc.audioEngine.playMusic(this.clip,!0):cc.audioEngine.stopMusic(),this.isPlay=a.BGM)},volume:function(){this.clip&&(cc.audioEngine.setMusicVolume(a.VOL),a.VOL&&this.play())}});a.VOL=1,a.BGM=!0,a.bgmIsOpen=function(){return a.BGM},a.switchBgm=function(e){return a.BGM=void 0==e?!a.BGM:e,t("TDLog").Event("music",{bgm:a.BGM?"open":"close"}),t("UserLogic").set("music",a.BGM?1:0),n.EVENT_SWITCH_MUSIC(),a.BGM},a.switchVol=function(t){a.BGM&&(a.VOL=t,n.EVENT_SWITCH_VOL())},a.init=function(){var e=t("SdkIns").instance().getSdkData("audioStatus");a.BGM=null!=e?e:!!t("UserLogic").geti("music")},cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",SdkIns:"SdkIns",TDLog:"TDLog",UserLogic:"UserLogic"}],N7ParticleSystem:[function(t,e,i){cc._RF.push(e,"608a3KphdlD+pmXNpd/DMsv","N7ParticleSystem"),cc.Class({"extends":cc.Component,properties:{reset:{"default":!0,notify:function(){this.particle&&this.particle.resetSystem()}}},onLoad:function(){this.particle=this.getComponent(cc.ParticleSystem)}}),cc._RF.pop()},{}],N7Resource:[function(t,e,i){cc._RF.push(e,"f2b85D7+1hEiYTfXazPkXzy","N7Resource");var n=t("n7"),o=t("N7Cache"),a=t("GameConfig"),s=t("JsonMetaCache"),c=function(){};c.prototype.cache=new o(o.CACHE_TYPE_NOODPOOL,30),c.prototype.reslist={},c.prototype.clearAllCache=function(){this.cache.clear(),this.loadList={}},c.prototype.addResList=function(t,e,i){var n=this.reslist[e];n||(this.reslist[e]=n={res:t,path:e,meta:i})},c.addResList=function(t,e,i){},c.prototype.removeResList=function(){this.reslist={}},c.prototype.removeRes=function(t,e,i){var n=cc.loader.getDependsRecursively(e),o=n.indexOf(t._uuid);-1!==o&&n.splice(o,1),cc.loader.release(n)},c.prototype.update=function(t){},c.prototype.loadJson=function(t,e,i){this.json_cache||(this.json_cache={});var n=this.json_cache[t];if(null==n){var o=this;this.loadFile(t,cc.JsonAsset,function(n){n=n.json||n,o.json_cache[t]=n,e.call(i,n)},this)}else e.call(i,n)},c.prototype.backPrefab=function(t,e){e&&cc.isValid(e)?this.cache.put(t,e)||e.destroy():n.error("N7Resource backPrefab node isValid "+t)},c.prototype.prefabCount=function(t){return this.cache.getCount(t)},c.prototype.createPrefab=function(t,e,i,n){var o=this.cache.get(t);return o||(o=cc.instantiate(e)),this.initPrefab(o,i,n)},c.prototype.preloadPrefab=function(t,e,i){if(!((i=this.cache.getCount(t)-i)<=0))for(var n=0;n<i;n++){var o=cc.instantiate(e);this.cache.put(t,o)}},c.prototype.getPrefab=function(t){if(!this.hasPrefabCache)return null;var e=this.hasPrefabCache[t];if(e)return e.prefab;var i=s.res(t);return i?this.cache.get(i.fileName):null},c.prototype.loadPrefab=function(t,e,i,o){if(this.hasPrefabCache||(this.hasPrefabCache={}),e&&this.hasPrefabCache[t.id])i.call(o,this.hasPrefabCache[t.id]);else{var a=null;if(e||!(a=this.cache.get(t.fileName))){var s=n.H5&&t.h5_file.length?t.h5_file:t.file;s=s||t.file,this.loadFile(s,cc.Prefab,function(a){if(e){if(!(a&&a instanceof cc.Prefab&&cc.isValid(a)))return void n.error("N7Resource loadPrefab fail file:"+s);c.addResList(a,s,t);var r={prefab:a,meta:t,component:t.frame.length?a.data.getComponent(t.frame):null};return this.hasPrefabCache||(this.hasPrefabCache={}),this.hasPrefabCache[t.id]=r,void i.call(o,r)}a&&this.callFuncPrefab(cc.instantiate(a),t,i,o)},this)}else this.callFuncPrefab(a,t,i,o)}},c.prototype.prefabFromURL=function(t,e,i,n,o){var a=this.cache.get(t);a?n.call(o,this.initPrefab(a,e,i)):this.loadFile(t,cc.Prefab,function(a){c.addResList(a,t,null),a&&n.call(o,this.initPrefab(cc.instantiate(a),e,i))},this)},c.prototype.initPrefab=function(t,e,i){if(t&&cc.isValid(t)){if(!e||0==e.length)return t;var o=t.getComponent(e);return o?(i&&o.init&&o.init.apply(o,i),o):(n.error("N7Resource initPrefab "+t.name+" on find "+e),t)}n.error("N7Resource initPrefab node is null "+t+" on find "+e)},c.prototype.loadTexture=function(t,e,i,o,a){this.spriteFrames||(this.spriteFrames={});var s=this.spriteFrames[t.fileName];if(s)return o&&o.call(a,s),s;var r=n.H5&&t.h5_file.length?t.h5_file:t.file;this.loadFile(r,cc.SpriteFrame,function(e){c.addResList(e,r,t),e&&e instanceof cc.SpriteFrame?(this.spriteFrames||(this.spriteFrames={}),this.spriteFrames[t.fileName]=e,o&&o.call(a,e,t)):(n.error("N7Resource loadTexture no find "+t.file),i&&o.call(a))},this)},c.prototype.loadSpriteFrame=function(t,e,i,o,a){this.atlasCache||(this.atlasCache={});var s=n.H5&&t.h5_file.length?t.h5_file:t.file,r=this.atlasCache[s];if(r){var l=e?r.getSpriteFrame(e):r;o&&o.call(a,l,t)}else this.loadFile(s,cc.SpriteAtlas,function(r){if(c.addResList(r,s,t),r&&r instanceof cc.SpriteAtlas){var l=e?r.getSpriteFrame(t.frame):r;this.atlasCache||(this.atlasCache={}),this.atlasCache[s]=r,o&&o.call(a,l,t)}else n.error("N7Resource loadSpriteFrame no find "+t.file),i&&o&&o.call(a)},this)},c.prototype.callFuncPrefab=function(t,e,i,n){i.call(n,this.initPrefab(t,e.frame,e.param))},c.prototype.loadFile=function(t,e,i,n){var o={url:t,type:e,callFunc:i,caller:n,count:1};this.loadList[t]=o,this._loadFile(o)},c.MAX_TRYLOAD_COUNT=3,c.prototype.loadList={},c.prototype._loadFile=function(e){var i=this;cc.loader.loadRes(e.url,e.type,function(n,o){if(n&&(!o||!o.data))return cc.error("N7Resource loadFile error url:"+e.url+" try:"+e.count),cc.error("N7Resource loadFile error msg:"+JSON.stringify(n)),void(e.count>c.MAX_TRYLOAD_COUNT?(c.loadError(e.url),t("GameEvent").EVENT_SHOW_DISCONNET(),i.loadList[e.url]=null,e.callFunc.call(e.caller,null)):(e.count++,i.loadList[e.url]&&cc.director.getScheduler().schedule(function(){i._loadFile(e)},cc.director.getScene(),1,1,0,!1)));i.loadList[e.url]=null,e.callFunc.call(e.caller,o)})},c.prototype.loadDialog=function(e,i,o,s){var c=a.get("dialogPath")+e,r=t("GameEvent");n.log("\u52a0\u8f7d"+c),r.EVENT_LOAD_UI(s,c,!1),this.loadFile(c,cc.Prefab,function(t){n.log("\u5b8c\u6210\u52a0\u8f7d"+e),t&&r.EVENT_LOAD_UI_CLOSE(s,c,!0),i&&i.call(o,cc.instantiate(t))},this)},c.prototype.loadSound=function(t,e,i,n,o,a){this.sound||(this.sound={});var s=this.sound[e];if(s)return n&&n.call(o,s),s;this.loadFile(e,cc.AudioClip,function(t){c.addResList(t,e,null),this.sound||(this.sound={}),this.sound[e]=t,n&&n.call(o,t)},this)},c.prototype.preloadResList=function(t,e,i){var n=this,o={count:t.length,finish:0,allFinish:0==t.length};o.allFinish&&e.call(i,null,null,o);for(var a in t)!function(a){var s=t[a];n.loadRes(s.id||s,!0,function(n){o.allFinish=++o.finish==o.count,e.call(i,n,t[a],o)},n)}(a)},c.prototype.loadRes=function(t,e,i,o){var a=s.instance().getResMeta(t);if(!a||!a.type)return n.error("N7Resource loadRes no find id:"+t),i&&i.call(o),null;switch(a.type){case c.RES_SPRITEFRAME:return this.loadSpriteFrame(a,a.frame,e,i,o);case c.RES_TEXTURE:return this.loadTexture(a,a.frame,e,i,o);case c.RES_ATLAS:return this.loadSpriteFrame(a,null,e,i,o);case c.RES_PREFAD:return this.loadPrefab(a,e,i,o);case c.RES_SPINE:return this.loadSpine(a,a.file,a.frame,i,o);case c.RES_SOUND:return this.loadSound(a,a.file,a.frame,i,o);default:return null}},c.prototype.textureFromPath=function(t,e,i){this.textureCache||(this.textureCache={});var o=this.textureCache[t];o&&e&&e.call(i,o),cc.loader.loadRes(t,cc.SpriteFrame,function(o,a){o&&(n.error("N7Resource textureFromPath error url:"+t),n.error("N7Resource textureFromPath error msg:"+JSON.stringify(o)),a=null),c.addResList(a,t,null),e&&e.call(i,a)})},c.prototype.textureFromURL=function(t,e,i,o){this.textureCache||(this.textureCache={});var a=this.textureCache[t];a&&i&&i.call(o,a);var s=this;cc.loader.load({url:t,type:e},function(e,a){if(e)return n.error("N7Resource textureFromURL error url:"+t),void n.error("N7Resource textureFromURL error msg:"+JSON.stringify(e));c.addResList(a,t,null);var r=new cc.SpriteFrame;r.setTexture(a),s.textureCache[t]=r,i&&i.call(o,r)})},c.instance=function(){return c.s_instance||(c.s_instance=new c),c.s_instance},c.textureFromPath=function(t,e,i){c.instance().textureFromPath(t,e,i)},c.textureFromURL=function(t,e,i,n){c.instance().textureFromURL(t,e,i,n)},c.loadRes=function(t,e,i){c.instance().loadRes(t,!1,e,i)},c.preloadRes=function(t,e,i){c.instance().loadRes(t,!0,e,i)},c.preloadResList=function(t,e,i){c.instance().preloadResList(t,e,i)},c.loadDialog=function(t,e,i,n){c.instance().loadDialog(t,e,i,n)},c.backPrefab=function(t,e){t&&(void 0==e&&(t=(e=t).name),c.instance().backPrefab(t,e))},c.prefabFromURL=function(t,e,i,n,o){return c.instance().prefabFromURL(t,e,i,n,o)},c.prefabCount=function(t){return c.instance().prefabCount(t.data.name)},c.createPrefab=function(t,e,i){return c.instance().createPrefab(t.data.name,t,e,i)},c.preloadPrefab=function(t,e,i,n){return c.instance().preloadPrefab(t.data.name,t,e,i,n)},c.createNode=function(t,e,i){return c.instance().createPrefab(t.name,t,e,i)},c.getNodeFromId=function(t){return c.instance().getPrefab(t)},c.createNodeFromId=function(t,e,i){var n=c.instance(),o=n.getPrefab(t);return o?n.createPrefab(o.name,o,e,i):null},c.loadJson=function(t,e,i){return c.instance().loadJson(t,e,i)},c.clearAllCache=function(){return c.instance().clearAllCache()},c.loadError=function(e){t("SdkIns").instance().upLogLeast("get","h5data_failed","",e,!0)},c.RES_SPRITEFRAME=1,c.RES_ATLAS=2,c.RES_PREFAD=3,c.RES_TEXTURE=4,c.RES_SPINE=5,c.RES_SOUND=6,c.s_instance=null,e.exports=c,cc._RF.pop()},{GameConfig:"GameConfig",GameEvent:"GameEvent",JsonMetaCache:"JsonMetaCache",N7Cache:"N7Cache",N7Sound:"N7Sound",SdkIns:"SdkIns",n7:"n7"}],N7SoundV2:[function(t,e,i){cc._RF.push(e,"7a1bf5OIIZE25U1oLESlM7T","N7SoundV2");var n=t("JsonMetaCache"),o=t("N7Resource"),a=cc.Class({"extends":cc.AudioSource,properties:{},onLoad:function(){},_load:function(){o.loadRes(90057,function(t){this.clip=t,this.loadok=!0},this)},_n7play:function(t,e){this.loadok?this.__isplaying||(this.setCurrentTime(t),console.log("play tm:"+this.getCurrentTime()+","+this.getDuration()),this.play(),this.__isplaying=!0,this.scheduleOnce(this._n7stop,e)):this._load()},_n7stop:function(){this.pause(),this.__isplaying=!1}});a.__snds=null,a.__snd_num=3,a.init=function(t){var e;a.__snds=[];for(var i=0;i<a.__snd_num;i++)(e=new cc.Node).parent=t,e.addComponent(a),a.__snds.push(e.getComponent(a))},a.get=function(){return a.__snds?a.__snds[0].__isplaying?a.__snds[1].__isplaying?a.__snds[2].__isplaying?null:a.__snds[3]:a.__snds[1]:a.__snds[0]:null},a.__defs={},a.n7play=function(t){var e=a.__defs[t];if(void 0==e){if(!(e=n.res(t)))return void console.error("play snd! not res def"+t);if(!(e=n.snd(e.file)))return void console.error("play snd! not snd def"+e.file);e.start/=1E3,e.time/=1E3,a.__defs[t]=e}var i=a.get();i&&i._n7play(e.start,e.time)},cc._RF.pop()},{JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource"}],N7Sound:[function(t,e,i){cc._RF.push(e,"f3d1eHwT6dDBLWg8U6AfGHA","N7Sound");var n=t("JsonMetaCache"),o=t("N7Resource"),a=t("n7"),s=t("SdkIns"),c=cc.Class({"extends":cc.Component,properties:{resid:{"default":0,notify:function(t){this.n7play()}},count:1},onLoad:function(){},n7play:function(){c.playSound(this.resid,this.count)},animSound:function(t){c.playSound(t,this.count)}});c.BGS=!0,c.VOLUME=1,c.switchBgs=function(e){return c.BGS=void 0==e?!c.BGS:e,t("TDLog").Event("sound",{bgs:c.BGS?"open":"close"}),t("UserLogic").set("sound",c.BGS?1:0),c.BGS},c.init=function(){c.BGS=!!t("UserLogic").geti("sound")},c.bgsIsOpen=function(){return c.BGS},c.EFFSuds=[],c.play=function(t,e,i,n){for(var o=void 0,a=void 0,s=0;s<e;s++)if(a=t+"_"+s,void 0==(o=c.EFFSuds[a])||i>=o)return c.EFFSuds[a]=i+n,!0;return!1},c.SudDus={},c.AS=new cc.AudioSource,c.playSound=function(t,e){if(c.BGS){var i=c.SudDus[t];if(!i||!i.data||!i.data.isValid)return c.SudDus[t]=1,void o.loadRes(t,function(e){if(e){c.AS.clip=e;var o=n.res(t),a=o.param&&o.param[0]?1*o.param[0]:0;i=c.SudDus[t]={id:t,pr:a,dutm:200,data:e},c.AS.clip=null,c._playSoundv2(i)}},null);i.data&&c._playSoundv2(i)}},c.cutm=function(){return(new Date).getTime()},c.EFFSudsV2={},c.clear=function(){c.SudDus={}},c._playSoundv2=function(t){var e=c.cutm(),i=void 0;a.isDebug&&a.log("N7Sound._playSoundv2:"+t.id);for(var n=t.pr-1;n>=0;n--)if((i=c.EFFSudsV2[n])&&i.tm>e)return void a.log("can not play "+t.id+" sound pr:"+n+", my pr:"+t.pr);(i=c.EFFSudsV2[t.pr])||(i=c.EFFSudsV2[t.pr]={tm:0}),i[t.id]>e||(s.instance().useSelfSound()?s.instance().playSound(t.id,t.data):cc.audioEngine.playEffect(t.data,!1),i[t.id]=e+t.dutm,i.tm<i[t.id]&&(i.tm=i[t.id]))},c._playSound=function(t,e,i){var n=c.cutm(),o=c.SudDus[t];if(!o){var a=cc.audioEngine.playEffect(i,!1),s=cc.audioEngine.getDuration(a)/2*1E3;return c.SudDus[t]={dutm:s,sudid:a},void c.play(t,e,n,s)}c.play(t,e,n,o.dutm)&&cc.audioEngine.resume(o.sudid)},cc._RF.pop()},{JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",SdkIns:"SdkIns",TDLog:"TDLog",UserLogic:"UserLogic",n7:"n7"}],N7SpriteShader:[function(t,e,i){cc._RF.push(e,"b3fcaSOH1hDLbqoJrjjYqhV","N7SpriteShader");var n=t("ShaderUtils");cc.Class({"extends":cc.Component,properties:{_shader:{display:!1,"default":0},setOnLoad:!1,shader:{set:function(t){this._shader=t},get:function(){return this._shader}}},start:function(){this.setOnLoad&&this.setShader(this._shader)},update:function(){},setOtherName:function(t){this.otherName=t},setParams:function(t){this.params=t},setShader:function(t){this._shader=t||this._shader,n.setShaderFromId(this.getComponent(cc.Sprite),this._shader,this.params,this.otherName)}}),cc._RF.pop()},{ShaderUtils:"ShaderUtils"}],N7UIEffectLayer:[function(t,e,i){cc._RF.push(e,"9cabcxuA+hMAasWfvGiJw+S","N7UIEffectLayer");var n=t("N7Resource"),o=t("GameTools"),a=t("GameEvent"),s=t("n7"),c=cc.Class({"extends":cc.Component,properties:{background:{type:cc.Node,"default":null}},statics:{instance:function(){return c.s_instance},node:function(){return c.instance().node},toPos:function(t){return c.instance().node.convertToNodeSpaceAR(t)},getPos:function(t){return o.nodeToNodePos(t,c.instance().node)},addInCube:function(t,e,i,n,o){c.instance().addInCube(t,e,i,n,o)},addNodeInCube:function(t,e,i,n){c.instance().addNodeInCube(t,e,i,n)},remove:function(t){c.instance().remove(t)}},onLoad:function(){c.s_instance=this,this.lock=0,a.on(a.EVENT_GAME_EFFECT,function(t){this.background&&(this.lock+=t.getUserData()?1:-1,this.background.active=this.lock>0)},this)},onDestroy:function(){a.off(this),c.s_instance==this&&(c.s_instance=null)},remove:function(t,e){t.node.parent&&(t.node.active=!1,void 0==e&&(e=!0),this.removeList||(this.removeList=[]),this.removeList.push({node:t.node,recovery:e}))},update:function(t){if(this.removeList&&0!=this.removeList.length){for(var e in this.removeList){var i=this.removeList[e];i.recovery?(i.node.active=!0,n.backPrefab(i.node)):i.node.removeFromParent(!0)}this.removeList=[]}},addInCube:function(t,e,i,a,c){var r=null,l=0,h=null;if(t){if(r=o.nodeToNodePos(this.getCubeNode(t),this.node),l=t.gid,h=t.meta,!e)return s.isDebug&&s.error("N7UIEffectLayer addInCube gid:"+l+" id:"+e+" pos:"+r),!1}else r=cc.p(0,0);return n.loadRes(e,function(i){i&&i.node?(t&&i.setCubeInfo(l,h),i.node.position=r,this.node.addChild(i.node),a&&a.call(c,i)):s.log("N7UIEffectLayer addInCube effect node is null id::"+e+" gid:"+l)},this),!0},getCubeNode:function(t){return t.cube&&t.cube.node&&t.cube.node.parent?t.cube.node:t.node},addNodeInCube:function(t,e,i,n){var a=o.nodeToNodePos(this.getCubeNode(t),this.node);e.node.parent&&e.node.removeFromParent(!1),e.node.position=a,this.node.addChild(e.node),i&&i.call(n,e)}});e.exports=c,cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7Resource:"N7Resource",n7:"n7"}],N7UIFlyLayer:[function(t,e,i){cc._RF.push(e,"42a89TiwxxI+ZuWHOOIdUMT","N7UIFlyLayer");var n=t("GameTools"),o=cc.Class({"extends":cc.Component,properties:{},statics:{instance:function(){return o.s_instance},node:function(){return o.instance().node},flyTo:function(t,e,i,n,a){return o.instance().flyTo(t,e,i,n,a)},flyNodeTo:function(t,e,i,n,a){return o.instance().flyNodeTo(t,e,i,n,a)},nodeFlyTo:function(t,e,i,n,a){return o.instance().nodeFlyTo(t,e,i,n,a)},getPos:function(t){return o.instance().getPos(t)}},onLoad:function(){o.s_instance=this},onDestroy:function(){o.s_instance==this&&(o.s_instance=null)},getPos:function(t){return n.nodeToNodePos(t,this.node)},flyNodeTo:function(t,e,i,n,o){t.position=i,t.parent=this.node,n&&n.call(o,t),t.runAction(e)},flyTo:function(t,e,i,n,o){this.nodeFlyTo(t.node,t.scale,e,i,n,o)},nodeFlyTo:function(t,e,i,n,o,a){var s=[i,cc.callFunc(function(t){this.schedule(function(){t.destroy()},0,0)},this)],c=cc.sequence(s),r=cc.instantiate(t);r.position=n,r.rotation=0,r.scale=e||1,r.runAction(c),r.parent=this.node,o&&o.call(a,r)}});cc._RF.pop()},{GameTools:"GameTools"}],N7UILayer:[function(t,e,i){cc._RF.push(e,"1c8a2Wm4i5O4plTvAJSPpUf","N7UILayer"),cc.Class({"extends":cc.Component,properties:{onwer:{type:cc.Node,"default":null}},onLoad:function(){var e=t("N7FitScreen").instance().content||cc.Canvas.instance.node;this.onwer=this.onwer||e,this.resize()},resize:function(){if(this.onwer){if(this.node.width>this.onwer.width)return this.node.scale=this.onwer.width/this.node.width,void(this.node.height=this.onwer.height/this.node.scale);this.node.width=this.onwer.width,this.node.height=this.onwer.height}}}),cc._RF.pop()},{N7FitScreen:"N7FitScreen"}],N7UIManager:[function(t,e,i){cc._RF.push(e,"894b48PNQ1E2InIEpOQ/RnK","N7UIManager");var n=t("UIDialog"),o=t("GameEvent"),a=t("N7Resource"),s=t("GameTools"),c=t("TDLog"),r=t("n7"),l=cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null},layerFly:{type:cc.Node,"default":null},layerDialog:{type:cc.Node,"default":null},layerEffect:{type:cc.Node,"default":null},dialogLoading:{type:t("dialog_nowloading"),"default":null},dialogSlowLoading:{type:cc.Node,"default":null},dialogDisconnet:{type:t("dialog_disconnet"),"default":null},list:[cc.Prefab],_dialogMap:[],_dialogMapByName:{"default":{},display:!1}},statics:{loadtime:20,clearTime:240,instance:function(){return l.s_instance},loadingShowed:function(t){var e=l.instance();e.dialogLoading&&(l._FLOADING_&&e.dialogLoading.loadingShowed(t),l._FLOADING_=1)},loadScene:function(t){l._FLOADING_||"tile_map"==t||(l._FLOADING_=1),l.s_instance.curLoadName=t,l.loadingShowed(0),r.sceneName=t,c.Event("scene_"+t,{show:1}),l._loadScene(t,1)},_loadScene:function(t,e){var i=l.s_instance;cc.director.preloadScene(t,function(n){n?e>a.MAX_TRYLOAD_COUNT?i.disconnectTips():cc.director.getScheduler().schedule(function(){l._loadScene(t,++e)},cc.director.getScene(),1,1,0,!1):(i.curLoadName=null,a.clearAllCache(),r.log("load scene "+t),r.sceneName=t,cc.director.loadScene(t))})}},disconnectTipsEvent:function(t){this.disconnectTips(null)},disconnectTipsSelf:function(){this.disconnectTips(null)},disconnectTips:function(t){t&&(t="\u52a0\u8f7d"+t+"\u5931\u8d25"),this.dialogDisconnet&&(null!=this.curLoadName&&a.loadError(this.curLoadName),this.dialogDisconnet.show(t))},onLoad:function(){r.isDebug&&(new (t("N7CheckRes"))).start(this.node),r.canvasSize(),l.s_instance=this,this.createLog(),l.loadingShowed(1),this.dialogDisconnet=s.cmpt(this.node,"dialog_disconnet","dialog_disconnet"),o.on(o.EVENT_SHOW_DISCONNET,this.disconnectTipsEvent,this),o.on(o.EVENT_GAME_DATA_LOADALL,this.onLoadOk,this),o.on(o.EVENT_OPEN_DIALOG,function(t){this.createAndShowDialog(null,t.getUserData())},this)},update:function(t){cc.isValid(this.node)&&r.canvasSize(),this.removeTimeDialog(t)},removeDialog:function(t){var e=t.dialog,i=this._dialogMap;for(var n in i)if(i[n]===e){i.slice(n,1);break}this.uiPool[t.path]=null,this._dialogMapByName[e.node.name]=null,e.node.removeFromParent()},removeTimeDialog:function(t){var e=[];for(var i in this._dialogMapByName){var n=this._dialogMapByName[i];n&&null!=n.time&&(n.time-=t,n.time<=0&&e.push(n))}if(!(e.length<=0))for(var o in e)this.removeDialog(e[o])},clearDialogTime:function(t){var e=this._dialogMapByName[t];e&&(e.time=null)},onLoadOk:function(){this.createLog()},onDestroy:function(){this.uiPool=null,l.s_instance=null,o.off(this)},getDialogLayer:function(t){if(!this.layerDialog)return null;var e=this._dialogMap[t];return void 0===e&&(e=[],this._dialogMap[t]=e),e},getDialogByName:function(t){var e=this._dialogMapByName[t];if(!e)return null;var i=e.dialog;return i?i.node:null},showDialog:function(t){if(this.layerDialog){var e=0,i=null;for(var o in t instanceof n&&(e=t.dialogLayer),i=this.getDialogLayer(e),null===t.node.parent&&(t.node.zIndex=e,this.layerDialog.addChild(t.node),i.push(t)),i){var a=i[o];a.node.active=a===t}}},closeDialog:function(t,e){var i=this._dialogMapByName[t];i&&(i.time=l.clearTime)},showDialogFromName:function(t){var e=this._dialogMapByName[t];if(!e)return this.createAndShowDialog(null,{name:t}),null;var i=e.dialog;return i?(this.showDialog(i),i):null},createAndShowDialog:function(t,e){if("string"==typeof e&&(e={name:e}),e.name){var i=e.name;this.uiPool||(this.uiPool={});var o=this.uiPool[i];o?o.showDialog(e.param,e.owner):(this.dialogSlowLoading&&(this.dialogSlowLoading.active=!0),this.curLoadName=i,a.loadDialog(i,function(t){if(this.dialogSlowLoading&&(this.dialogSlowLoading.active=!1),null!=t&&(this.curLoadName=null,cc.isValid(this))){var o=t.getComponent(n);this.uiPool[i]=o,this._dialogMapByName[o.node.name]={dialog:o,path:i,time:null},o.preload(function(){o.showDialog(e.param,e.owner)})}},this))}else r.log("N7UIManager createAndShowDialog name error")},createLog:function(){r.showLog&&a.loadDialog("dialog_log",function(t){this.node.addChild(t)},this)}});cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7CheckRes:"N7CheckRes",N7Resource:"N7Resource",TDLog:"TDLog",UIDialog:"UIDialog",dialog_disconnet:"dialog_disconnet",dialog_nowloading:"dialog_nowloading",n7:"n7"}],N7UISkinData:[function(t,e,i){cc._RF.push(e,"cb5316RbC9AIJn9LiZDZf1K","N7UISkinData");var n=cc.Class({name:"N7UISkinData",properties:{skinName:"",spriteFrame:cc.SpriteFrame}});e.exports=n,cc._RF.pop()},{}],N7UISkin:[function(t,e,i){cc._RF.push(e,"ba66c5KQ8JLZraR4JFyluBm","N7UISkin");var n=t("GameEvent"),o=cc.Class({properties:{skinName:""},statics:{instance:function(){return o.s_instance||(o.s_instance=new o),o.s_instance}},setSkinName:function(t){this.skinName!=t&&(this.skinName=t,n.EVENT_SKIN_CHANGE(t))}});window.N7UISkin=o.instance(),e.exports=o,cc._RF.pop()},{GameEvent:"GameEvent"}],NumberChange:[function(t,e,i){cc._RF.push(e,"1567dRU0qRJMKH3DdstIEqf","NumberChange");var n=t("GameEvent"),o=t("ItemsLogic"),a=t("N7Sound");cc.Class(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({"extends":cc.Component,properties:{count:3,is_g:0},onLoad:function(){n.on(n.EVENT_NUMBER_CHANGE,function(t){this.numIncrease(t.getUserData())},this)},onDestroy:function(){n.off(this)},numIncrease:function(t){var e=t.a,i=t.n,s=this.count;Math.abs(e)<this.count&&(s=Math.abs(e));var c=parseInt(e/s),r=e%c+c,l=s,h=o.get(i)-e;this.schedule(function(){var e=h+=1==l?r:c;this.is_g?n.EVENT_SAWNUM_REFRUSH(i,e):n.EVENT_PORPNUM_REFRUSH(i,e,t.noSelect),a.playSound(90172),1==l&&t.fo&&t.fo(),l--},.25,s-1)}},"onDestroy",function(){n.off(this)})),cc._RF.pop()},{GameEvent:"GameEvent",ItemsLogic:"ItemsLogic",N7Sound:"N7Sound"}],ProcessorGameV2:[function(t,e,i){cc._RF.push(e,"347ffdl5VlMqKlfmHBaxTeo","ProcessorGameV2"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],ProcessorRoot:[function(t,e,i){cc._RF.push(e,"70b5dDV8pZDMYQcA9KkD4R9","ProcessorRoot");var n=t("n7"),o=t("ErrorLog"),a=t("GameTools"),s=t("GameEvent"),c=t("GameConfig"),r=t("JsonConfig"),l=t("JsonMetaCache"),h=t("N7Resource"),u=t("N7HotUpdate"),d=cc.Class({"extends":cc.Component,properties:{hotUpdate:{type:t("UIHotUpdate"),"default":null},ver:{type:cc.Label,"default":null},note:{type:cc.Node,"default":null}},statics:{instance:function(){return d.s_instance}},onLoad:function(){this.initEvent()},initEvent:function(){s.on(s.EVENT_ROOTGAME,this.rootGame,this),s.on(s.EVENT_RESTARTGAME,this.restartGame,this),s.on(s.EVENT_GAME_DATA_LOADALL,this.onLoadAllOk,this),s.on(s.EVENT_GAME_DATA_LOADOK,this.onLoadOk,this)},start:function(){n.isAndroid&&n.callToApp("org/cocos2dx/javascript/SDKWrapper","jscreated"),u.init()?this.hotUpdate.checkUpdate():this.rootGame()},rootGame:function(){this.hotUpdate.hide(),o.init("test",cc.sys.os,10086,"0.0.0.1"),n.log("ProcessorRoot onLoad:"+n.isAndroid),d.s_instance=this,n.window.ProcessorRoot=this,t("TDLog").Event("FristUI2",{count:1}),this._dialogMap={},n.log("ProcessorRoot event"),this.ver.node.active=!1,this.reloadConfig()},onDestroy:function(){s.off(this)},reloadConfig:function(){t("TDLog").Event("FristUI3",{count:1}),n.hasLoadOk?this.onLoadAllOk():r.instance().loadAll(this)},onLoadOk:function(t){"data/config"==t.getUserData().url&&(cc.sys.isNative?this.ver.string=a.i18ns("setting.ver")+n.gameVer:this.ver.string=a.i18ns("setting.ver")+c.get("ver")+"."+c.get("buildver"),this.ver.node.active=!0,n.isAndroid&&n.callToApp("ad/N7Ad","vinit","(S)V","ironsrc"))},restartGame:function(){cc.audioEngine.stopAll(),cc.game.restart()},onLoadAllOk:function(){cc.log("excel read ok!"),n.showLog=c.get("showLog"),n.H5=c.get("h5")?1:0,n.isDebug=c.get("debug"),n.BS=c.get("bs"),n.CS=c.get("cs"),cc.log(a.i18ns("lang")),this.preLoad(this.login,this),n.hasLoadOk=!0;var t=c.get("mq");a.sh(this.note,"tel",t),a.sh(this.note,"publish",t);var e=c.get("package"),i="en"==a.getLanguage()?80010:8E4;a.imgs(this.node,i+e,"content/logo")},preLoad:function(t,e){var i=this,n=[],o=l.preloadRes();for(var a in o){var c=o[a];-1==c.preload.lv&&n.push(c)}var r=n.length,u=0;r<=0&&t.call(e),s.EVENT_GAME_LOADDATA(r,u);for(var d in n)!function(o){var a=n[o];h.preloadRes(a.id||a,function(i){a.preload&&a.preload.c>0&&h.preloadPrefab(i,a.preload.c),++u==r&&t.call(e),s.EVENT_GAME_LOADDATA(r,u)},i)}(d)},login:function(){t("TDLog").Event("FristUI4",{count:1});var e=this,i=a.chd(this.node,"content/btn");a.btnc(i,"btn_facebook",function(){e._click_login("facebook")},1),a.btnc(i,"btn_gp",function(){e._click_login("gp")},1),a.btnc(i,"btn_note7g",function(){s.EVENT_OPEN_DIALOG({name:"dialog_login",param:{fo:function(){e._click_login("note7g")}}})},1),s.on(s.EVENT_RELOGIN,function(){i&&(i.active=!0)},this);var n=c.get("pf");i&&(i.active=!n),n&&this._click_login(n)},_click_login:function(e){var i=this,o=t("SdkIns").instance();o.init(function(){n.log("sdk:init:ok"),o.login(function(){a.hide(i.node,"content/btn"),n.log("sdk:login:ok"),i.__login()})},e)},__login:function(){t("TDLog").Event("FristUI5",{count:1});var e=this;t("AccessUD").JRead(function(){e.__readdataok()})},__readdataok:function(){t("TDLog").Event("FristUI6",{count:1}),n.BS?this.scheduleOnce(this.__tostartgame,3):this.__tostartgame()},__tostartgame:function(){var e={};if(e.title=a.i18ns("invite_title.12"),e.text=a.i18ns("invite_desc.0"),t("SdkIns").instance().defaultShare(e),t("TDLog").Event("FristUI7",{count:1}),1!=c.get("frist_scene",0)){t("UserDataV2").geti("lev","user");s.EVENT_BIGMAP_SHOW()}else{var i=c.get("preItems",0),n={};if(null!=i)for(var o=0;o<i.length;o++)n[l.item(i[o]).id_name]=!0;s.EVENT_GAME_SHOW(void 0,n)}}});cc._RF.pop()},{AccessUD:"AccessUD",ErrorLog:"ErrorLog",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",JsonConfig:"JsonConfig",JsonMetaCache:"JsonMetaCache",N7HotUpdate:"N7HotUpdate",N7Resource:"N7Resource",SdkIns:"SdkIns",TDLog:"TDLog",UIHotUpdate:"UIHotUpdate",UserDataV2:"UserDataV2",n7:"n7"}],Prop:[function(t,e,i){cc._RF.push(e,"dcd76F90b5HJY8hXc+GHgC/","Prop");var n=t("Dispel"),o=t("GameTools"),a=t("GameCommon"),s=t("MathUtils"),c=t("n7"),r=function(){};e.exports=r,r.__use=function(t,e,i){var n=i?null:r.merge(t,e);return n||(n=r.UseItem(t,e)),n};var l=function(){var t=[];this.IsAndOpen=function(e,i){var n=o.ptoidx(e,i);return!t[n]&&(t[n]=1)},this.open=function(e,i){t[o.ptoidx(e,i)]=1},this.close=function(e,i){delete t[o.ptoidx(e,i)]}};r._USEITEM_PARS=function(t,e){var i=t.makeOut(e),n=new l;return i.uitem=!0,{map:t,block:e,out:i,dp:n,items:[],gid:e.gid,trg:0,tt:[]}},r.UseItem=function(t,e){var i=r._USEITEM_PARS(t,e);return r.__useItem(i),i.out},r.__useItem=function(t){var e=t.block;if(!e.isUsed()){switch(e.getType()){case 4:r.Rotor(t);break;case 6:r.Cube(t);break;case 8:r.Bomb(t);break;case 33:r.Shot(t)}t.map.recordUseItem(e.meta.id)}},r.onUse=function(t){var e=t.block;t.map.btom(e).onUse(t.map,t.out),t.out.useItem=e.getId(),e.onUse(t.map,t.out),t.map.btom(e).carpet&&(t.out.carpet=!0)},r.onUsed=function(t){var e=t.map;e.btom(t.block).onUsed(e,t.out)},r.Rotor=function(t){var e=t.block,i=e.getExdti("dir");return i||(i=e.getExdti("rdir")%2),r.onUse(t),r.__rotor(t,e.getx(),e.gety(),e.getExdti("lv",1),i),r.onUsed(t),t},r.__rotor=function(t,e,i,n,o,a){var s,c,l,h=t.map,u=!0,d=!0;if(n=parseInt(n/2),l=void 0==a?h.xcount:a,2==o||0==o)for(s=0;s<l;s++)for(c=-n;c<=n;c++)u&&(u=1!=r.rotor_destroy(t,e+s,i+c)),s>0&&d&&(d=1!=r.rotor_destroy(t,e-s,i+c));if(2==o||1==o)for(u=d=!0,l=void 0==a?h.ycount:a,s=0;s<l;s++)for(c=-n;c<=n;c++)u&&(u=1!=r.rotor_destroy(t,e+c,i+s)),s>0&&d&&(d=1!=r.rotor_destroy(t,e+c,i-s))},r.Bomb=function(t){var e=t.block,i=e.getExdti("lv",1);r.onUse(t),r.__Bomb(t,e.getx(),e.gety(),i),r.onUsed(t)},r.__Bomb=function(t,e,i,n){var o,a;for(o=-n;o<=n;o++)for(a=-n;a<=n;a++)r.destroy(t,e+a,i+o)},r.Shot=function(t){var e=t.block,i=e.getExdti("lv",1),n=e.getx(),o=e.gety();if(-1==i){var a=t.map;i=(a.xcount>a.ycount?a.xcount:a.ycount)-1}r.onUse(t),r.__Shot(t,n,o,i),1==e.getExdti("rotor")&&r.__rotor(t,n,o,1,2,3),1==e.getExdti("tnt")&&r.__Bomb(t,n,o,2),r.onUsed(t)},r.__Shot=function(t,e,i,n){var o=[-1,-1],a=[1,1],s=[1,-1],c=[-1,1];r.rotor_destroy(t,e,i);for(var l=1;l<=n;l++)o&&1==r.rotor_destroy(t,e+o[0]*l,i+o[1]*l)&&(o=void 0),a&&1==r.rotor_destroy(t,e+a[0]*l,i+a[1]*l)&&(a=void 0),s&&1==r.rotor_destroy(t,e+s[0]*l,i+s[1]*l)&&(s=void 0),c&&1==r.rotor_destroy(t,e+c[0]*l,i+c[1]*l)&&(c=void 0)},r.CUBECOLOR=null,r._GETCC_=function(t){return r.CUBECOLOR||((r.CUBECOLOR={color:0}).__is=function(t){if(!t||!t.invalid())return!1;var e=t.block;return!!e&&(this.color==a.color_full?!e.isToy()||t.haveCage():e.canMagicCube()&&e.getColor()==this.color)}),r.CUBECOLOR.color=t,r.CUBECOLOR},r.rotor_list=[36,38],r.Cube=function(t){var e,i,n,a=t.block,c=t.map,l=[],h=r._GETCC_(a.getColor()),u=a.getExdt();for(n=0;n<c.ycount;n++)for(i=0;i<c.xcount;i++)e=c.getMapData(i,n),h.__is(e)&&l.push(e);if(r.onUse(t),l.length<1)r.onUsed(t);else if(u.chg){var d=t.out,f={id:u.chg,eng:0,eff:u.eff2};for(o.copy_keys(f,u,["lv","rdir"]),i=0;i<l.length;i++)36!=u.chg&&38!=u.chg||(f.id=s.randArray(r.rotor_list),f.rdir=36==f.id?0:1),l[i].onItemHit(c,d)&&c.gChgTo(d,l[i].block,f);for(i=0;i<l.length;i++)c.gAProp(d,l[i].block);r.onUsed(t)}else{for(i=0;i<l.length;i++)r._destroy(t,l[i],!0);r.onUsed(t)}},r.rotor_destroy=function(t,e,i){var n=t.map.getMapData(e,i);if(!n||!n.invalid())return-1;var o=n.block,s=t.out;if(!o)return-2;var c=o.getExdti("rotoroff",0);return r._destroy(t,n),c&&s.cmds.push({cmd:a.com_rotoroff,datas:{gid:o.getGId(),grid:o.cpos()}}),c},r.destroy=function(t,e,i){var n=t.map.getMapData(e,i);return n&&n.invalid()?r._destroy(t,n):-10},r._destroy=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.getx(),o=e.gety(),a=t.map,s=t.out;if(!t.dp.IsAndOpen(n,o))return-2;if(!e.onBeHit(a,s)&&!t.out.forceDestroy)return 0;var c=e.block;return c?i&&!c.isRocker()?a.gDestroy(s,c):c.isProp()&&!c.isUsed()?(a.gAProp(s,c),1):c.canBeHit()?a.gDestroy(s,c):-3:-5},r._SAMEP_=null,r._SAMEPROP_=function(){if(!r._SAMEP_){var t=r._SAMEP_={};t.clean=function(){return this.res=[],this.f=new l,this.carpet=!1,this},t.finded=function(t){return!!t.block&&(this.f.open(t.getx(),t.gety()),this.res.push(t.block),this.carpet||(this.carpet=void 0!=t.carpet),!0)},t.compare=function(t,e){return!!e.block&&!e.haveCage()&&!!this.f.IsAndOpen(e.getx(),e.gety())&&e.block.isProp()}}return r._SAMEP_.clean()},r.merge=function(t,e){if(e.list.length<2)return null;var i=r._SAMEPROP_(),s=t.btom(e);n.__sameMData(t,s,i);var l=i.res;if(l.length<2)return null;var h,u=[];for(h=0;h<l.length;h++)u.push(r.chgType(l[h]));var d=r._merge(u);if(!d)return null;l.shift();var f=o.getGids(l),g=t.makeOut(e);for(g.carpet=i.carpet,g.cmds.push({cmd:a.com_merge,datas:{lst:f,gid:e.gid,par:d}}),h=0;h<l.length;h++)t.gDestroy(g,l[h]);return t.gChgTo(g,e,d).datas.merge=u,g.activeprop=1,c.BS||(e.mergeTmp=d.tmp),g},r.chgType=function(t){var e={id:t.getId()};switch(t.getType()){case 6:e.tp=4;break;case 8:e.tp=3;break;case 4:e.tp=2;break;case 33:e.tp=1;break;default:return null}return e},r._MERGE_ARR={44:{id:47,eff:2038,coeff:.5},43:{oid:1,chg:86},42:{oid:1,chg:36,rdir:1,eff2:2636},41:{oid:1,chg:38,lv:-1,eff2:2639},33:{id:86,lv:3,eng:6,eff:5606,coeff:.5},32:{id:36,eng:5,dir:2,lv:3,eff:2636,all:1,coeff:.5},31:{id:86,lv:2,eng:4,eff:5607},22:{id:36,dir:2,eng:4,eff:2636,all:1,coeff:.5},21:{id:38,lv:1,rotor:1,eng:3,eff:5607},11:{id:38,lv:-1,eng:2,eff:2639}},r.MERGE_EFF={44:[3,4],43:[3,4],42:[3,4],41:[3,4],33:[1,2],32:[1,2],31:[1,2],22:[1,2],21:[1,2],11:[1,2]},r._merge=function(t){t.sort(function(t,e){return e.tp-t.tp});for(var e,i=10*t[0].tp,n=t[0].id,o=1;o<t.length;o++)if(i+=1*t[o].tp,e=r._MERGE_ARR[""+i])return e.oid&&(e.id=n),e.tmp=i,e;return null},r.canUseUItem=function(t,e,i){return!(!e.haveCage()&&(1==i&&e.block&&(e.block.isProp()||e.block.isToy())||e.block&&e.block.cannotBeItemHit()))},r.useUItem=function(e,i,n){if(!i.block)return null;var o=a.USERITEMIDS,s=-1;n||(n=1);var c=r._USEITEM_PARS(e,i.block);switch(c.out.uuitem=n,n<=4&&c.out.cmds.push({cmd:a.com_uitem,datas:{gid:c.block.gid,item:n}}),n!=o[4]&&e.saveCurRecord(),n){case o[0]:s=r.dispelTile(c,i),t("AchieveLogic").updateAchieve(a.ACHIEVE_BATTLEITEM_CHUIZI,1);break;case o[1]:s=r.dispelLine(c,i,1),t("AchieveLogic").updateAchieve(a.ACHIEVE_BATTLEITEM_QICHE,1);break;case o[2]:s=r.dispelLine(c,i,2),t("AchieveLogic").updateAchieve(a.ACHIEVE_BATTLEITEM_FEIDIE,1);break;case o[3]:s=r.realign(c,i),t("AchieveLogic").updateAchieve(a.ACHIEVE_BATTLEITEM_TOUZI,1);break;case o[4]:s=r.backOne(c,i);break;default:return!1}return s<0?null:c.out},r.dispelTile=function(t,e){return t.out.forceDestroy?r.forceDispelTile(t,e):r._destroy(t,e)},r.forceDispelTile=function(t,e){var i=e.getx(),n=e.gety();if(!r.dirWrong(i,n,t.block.getx(),t.block.gety(),t.block.exdt.dir)){var o=0,s=r._destroy(t,e),c=e.block?e.block.meta.type:0;if(-1!=a.TILE_CANNOT_DISBYROCKER.indexOf(c))return 0;for(;!1===s;)if(t.dp.close(i,n),s=r._destroy(t,e),++o>=10)return 1;return 0}},r.dirWrong=function(t,e,i,n,o){return 4==o&&t>=i||6==o&&t<=i||8==o&&e<=n||2==o&&e>=n},r.dispelLine=function(t,e,i){var n=e.getx(),o=e.gety(),a=t.map,s=void 0,c=void 0;if(1==i||-1==i)for(var r=0;r<t.map.xcount;r++)s=a.getMapData(n+r,o),c=a.getMapData(n-r,o),s&&this.dispelTile(t,s),r>0&&c&&this.dispelTile(t,c);if(2==i||0==i)for(r=0;r<t.map.ycount;r++)s=a.getMapData(n,o+r),c=a.getMapData(n,o-r),s&&this.dispelTile(t,s),r>0&&c&&this.dispelTile(t,c);return 0},r.rockerLine=function(t,e,i,n){if(!i.block)return null;var o=a.dir_to_rotation[n],s=r._USEITEM_PARS(e,i.block);return s.out=t,t.forceDestroy=!0,r.dispelLine(s,i,o),0},r.addBub=function(t,e){if(!e.bub){e.active();var i=t.map,n=e.getx(),o=e.gety();return i.gCreate(t.out,{x:n,y:o},{id:37,gup:a.TILE_LAYER_BUFF,lay:"bub"}),0}},r.realign=function(t,e){return t.out.cmds.push({cmd:a.com_realign,datas:{}}),0},r.backOne=function(t,e){t.map.runLastRecord(t)},r.runAll=function(t,e,i){if(i||(i=t.getPropOfTpCnt(t.calc_type_count())),i.length<1)return!1;for(var n=0;n<i.length;n++)t.gAProp(e,i[n]);return!0},r.chgProps=function(t,e,i){if(i<1)return null;t.calc_type_count();var n,a=t.getTileOfTpCnt();o.upset(a);for(var s=[];i>0&&a.length>0;i--)n=a.shift(),t.gChgTo(e,t.btom(n),r.chgToRotor(i)).datas.bubu=1,s.push(n);for(var c in s)t.gAProp(e,s[c]);return t.goals().setEndLeftMoves(i),s},r.chgToRotor=function(t){return t%2?{id:38,rdir:1}:{id:36,rdir:0}},cc._RF.pop()},{AchieveLogic:"AchieveLogic",Dispel:"Dispel",GameCommon:"GameCommon",GameTools:"GameTools",MathUtils:"MathUtils",n7:"n7"}],RandTile:[function(t,e,i){cc._RF.push(e,"71661mgVfpFWZbqmp5F1LAb","RandTile");var n=t("JsonMetaCache"),o=t("GameCommon"),a=t("GameTools"),s=t("MathUtils"),c=t("StringUtils"),r=t("UserLogic"),l=t("n7"),h=function e(){var i,h=null,u=null,d=null;this.scripts={},this.cubeList={cube:{},barrier:{}},this.init=function(t,e){h={g:[]},u={},d={},this.gamelogic=e},this.onDestroy=function(){this.gamelogic=null},this.getTiles=function(){return u},this.initDrops=function(t){var e,i,c,r,l=o.game_tile_rand_group_min+parseInt(t.name.substring(5))-1,p=t.objects,m=h.g[l]={p:t.properties,tiles:[],rand_area:0,name:t.name};if(m.p){var v=m.p.colors;v&&(this.colors=_(v));var E=s.gets(m.p,"conditionOperator","and");m.c1=void 0!=m.p.condition1,m.bt="and"==E,m.count=s.geti(m.p,"generatePerTurn",999999),m.p.useForDrop&&(h.rand_area||(h.rand_area=0,h.rand_arr=[]),e=s.geti(m.p,"ratio"),h.rand_area+=e,h.rand_arr.push({n:m,ratio:e})),m.p.first&&(h.first_arr||(h.first_arr=[]),h.first_arr.push(m),h.first=1)}for(var y=0;y<p.length;y++){null===(i=n.tile(r=p[y].gid))&&console.error("meta error "+datas[k].gid),c={meta:i,ext:p[y].properties,gn:l},0==(e=s.getv2i(p[y],"properties.ratio"))?e=100:e*=100;var b={n:c,ratio:e};if(m.tiles.push(b),e>0&&(m.rand_area+=e),u[r]=c,f(i.type)){d[i.color]=c;var I=this.cubeList.cube;I[l]||(I[l]=[]),I[l].push(b),a.upset(I[l])}if(g(i.type)&&!this.__isTarget(i)){var T=this.cubeList.barrier;T[l]||(T[l]=[]),T[l].push(b),a.upset(T[l])}}this.logMapRatio(l)};var f=function(t){for(var e=o.TILE_TYPES,i=0;i<e.length;i++)if(t==e[i])return!0;return!1},g=function(t){return-1!=o.BARRIER_TYPES.indexOf(t)};this.__isTarget=function(t){return-1!=this.gamelogic.goals().isTarget(t)},this.__noColorCube=function(t){return"2"==t.onNeighborHit&&-1==this.cubeColors().indexOf(t.color+"")},this.chgRatioById=function(t){var e=n.getDynamicDataId()[t];return this.chgRatio(e)},this.chgRatioByCount=function(e){var i=t("GameLogic").getDataByLoseCount(e);return this.chgRatio(i)},this.chgRatio=function(e){var i=[];if(!e)return i;l.isDebug&&l.log("RandTile.chgRatio.data: "+JSON.stringify(e));var n=r.geti("lev");return t("GameLogic").levelSatisfy(e)&&(i=(i=i.concat(this.addCubeRatio("group1","cube",e,n))).concat(this.addCubeRatio("group1","barrier",e,n))),i},this.getGname=function(t){return o.game_tile_rand_group_min+parseInt(t.substring(5))-1},this.addCubeRatio=function(t,e,i,o){var s=[],c=i[e],r=this.cubeList[e];if(0==c)return s;var l=this.getGname(t),u=h.g[l],d=r[l],f=1;if(d&&0!=d.length)"cube"==e&&(f=d.length>4?2:1),this.chgCubeRatio(u,d,u.tiles,c,f);else{var g=n.getDynamicData().nobarrierCount,p=[],_=void 0;for(_=1;_<=g;_++)p.push(_);for(a.upset(p),_=0;_<p.length;_++){var m=i["nobarrier"+p[_]];if(m){c=m.ratio;for(var v=m.tileList.length-1;v>=0;v--){var E=m.tileList[v].tileid,y=m.tileList[v].level,b=n.tile(E);o<y||this.__isTarget(b)||this.__noColorCube(b)||s.push(E)}if(0!=s.length)break}}if(!s||0==s.length)return s;var I={ratio:0};I.n={tileList:s},u.tiles.unshift(I),this.chgCubeRatio(u,u.tiles,u.tiles,c,f)}return s},this.chgCubeRatio=function(t,e,i,n,o){if(0!=e.length&&0!=n){n/=100;var a=[],s=void 0;for(s=0;s<o;s++){var c=e[s];if(c){var r=c.ratio/t.rand_area;r+n>1&&(n=1-r),r+n<0&&(n=-r),c.ratio=parseInt((r+n)*t.rand_area),a.push(c)}}var h=n*o/(i.length-o),u=0,d=[],f=void 0;for(s=0;s<i.length;s++){if(f=i[s],-1==a.indexOf(f)){var g=f.ratio/t.rand_area-h;g>1&&(g=1),g<0&&(g=0),f.ratio=parseInt(g*t.rand_area)}if(u+f.ratio>t.rand_area&&(f.ratio=t.rand_area-u),u+=f.ratio,l.isDebug){var p=f.n;d.push({name:p.meta?p.meta.name:p.tileList,ratio:f.ratio})}}var _=t.rand_area-u;f&&_>0&&(f.ratio+=_),l.isDebug&&l.log("RandTile.chgCubeRatio.name: "+t.name+",rand_area: "+t.rand_area+".cubes: "+JSON.stringify(d))}},this.logMapRatio=function(t){if(l.isDebug){for(var e=h.g[t],i=e.tiles,n=[],o=0;o<i.length;o++){var a=i[o],s=a.n;n.push({name:s.meta?s.meta.name:s.tileList,ratio:a.ratio})}l.log("RandTile.logMapRatio.name: "+e.name+",rand_area: "+e.rand_area+".cubes: "+JSON.stringify(n))}};var p=function(t,e){t.moves!=e&&(t.moves=e,t.num=t.count)};this.chkFrist=function(t){for(var e,i=h.first_arr,n=0;n<i.length;n++)if(e=i[n],p(e,t.getMoves()),e.num>0&&this.operScript(t,e))return e.num--,e;return null},this.inited=function(){var t=[],e=[];for(var i in d)e.push(i),t.push(d[i]);a.upset(e),d={c:e,arr:t}},this.cubeColors=function(){return d.c},this.get=function(t){return u[t]},this.randCubeFormColors=function(){return s.randArray(d.arr)},this.rand=function(t,e,a){if(!t.invalid(e,a))return null;if(!t.statu(0))return this.randCubeFormColors();i=e;var c=h.first?this.chkFrist(t):null;c||(c=s.randRatio(h.rand_arr,h.rand_area),p(c,t.getMoves()),c.num<1||!this.operScript(t,c)?c=h.g[o.game_tile_rand_group_min]:c.num--);var r=null;return r=c.rand_area?s.randRatio(c.tiles,c.rand_area):s.randArray(c.tiles).n,this.removeHasRand(r,c,h),null!=r.tileList&&(r.meta=n.tile(s.randArray(r.tileList))),r},this.removeHasRand=function(t,e,i){if(t&&t.ext&&null!=t.ext.randCount&&(t.ext.hasRandCount=1+(0|t.ext.hasRandCount),t.ext.hasRandCount>=t.ext.randCount)){var n=0;if(e.tiles=e.tiles.filter(function(e){var i=e.n!=t;return n+=i?e.ratio:0,i}),e.rand_area=n,0==e.tiles.length){var o=0;i.rand_arr=i.rand_arr.filter(function(t){var i=t.n!=e;return o+=i?t.ratio:0,i}),i.rand_area=o}}},this.initRandCube=function(t){var e=h.g[t.group];return s.randArray(e.tiles).n},this.operScript=function(t,e){if(!e.c1)return!0;for(var i,n=1,o=e.bt;n<16&&(i=e.p["condition"+n]);n++){var a=this.__operScript(t,i);if(o){if(!a)return!1}else if(a)return!0}return o},this.__operScript=function(t,e){for(var i,n=0;n<e.length&&"\x3d"!=(i=e.charAt(n))&&" "!=i&&"\x3e"!=i&&"\x3c"!=i;n++);if(n>=e.length)return console.error("script error "+e),!1;var o=e.substring(0,n),a=this.scripts[o];if(!a)return console.error("not function "+e),!1;var s=n;for(n++;n<e.length&&!((i=e.charAt(n))>="0"&&i<="9");n++);var r=c.replace(e.substring(s,n)," ",""),l=e.substring(n),u=1*a.apply(this,[t]);switch(r){case "\x3c":return u<parseInt(l);case "\x3e":return u>parseInt(l);case "\x3c\x3d":return u<=parseInt(l);case "\x3e\x3d":return u>=parseInt(l);case "\x3d":var d=h["par_"+o+"_"+l];for(d||(d=h["par_"+o+"_"+l]=c.atois(l,",")),n=0;n<d.length;n++)if(d[n]==u)return!0}return!1},this.getGupAtt=function(t,e){var i=h.g[t];return i?i.p[e]:null};var _=function(t){t=c.trim(t);for(var i=e.COLOR_NAMES,n=0;n<i.length;n++)t=c.replace(t,i[n],""+n);return c.atois(t,",")};this.hat=function(t){var e,i,n=t.name,o=h.g[n]={p:t.properties,tiles:[],rand_area:0,name:n},a=t.objects;for(var c in a)e=a[c].gid,(i=s.geti(o.p,"id_"+e))<1||(o.tiles.push({n:{id:e,properties:a[c].properties},ratio:i}),o.rand_area+=i)},this.barrel=function(t){var e,i,n=t.name,o=h.g[n]={p:t.properties,tiles:[],rand_area:0,name:n},a=t.objects;for(var c in a)e=a[c].gid,i=s.getv2i(a[c],"properties.ratio"),o.tiles.push({n:{id:e,properties:a[c].properties},ratio:i}),o.rand_area+=i},this.randByGup=function(t){var e=h.g[t];if(!e)return null;for(var i in e.tiles)if(51==e.tiles[i].n.id)return e.tiles[i].n;return s.randRatio(e.tiles,e.rand_area)},this.tgUndone=function(t,e){for(var i in t)if(!(t[i].num<1)&&(!e||i.indexOf(e)>=0))return n.tileByName(i);return null},this.scripts.countOfToy=function(t){return t.getCount(9)},this.scripts.targetColumns=this.scripts.TargetColumns=function(t){return i+1},this.scripts.countOfMovesLeft=function(t){return t.getMoves()},this.scripts.countOfGiftLeft=function(t){return t.getCount(24)},this.scripts.countOfBeachball=function(t){return t.getCount(3)},this.scripts.countOfBrick=function(t){return t.getCount(10)},this.scripts.countOfColoredbrick=function(t){return 0},this.scripts.countOfCubebomb=function(t){return t.getCount(22)},this.scripts.countOfPiggy=function(t){return t.getCount(12)},this.scripts.countOfMagichat=function(t){return t.getCount(13)},this.scripts.countOfCrystal=function(t){return t.getCount(23)},this.scripts.countOfEgg=function(t){return t.getCount(14)}};h.COLOR_NAMES=["yellow","red","blue","green","purple","orange"],e.exports=h,cc._RF.pop()},{GameCommon:"GameCommon",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],ReChargeLogic:[function(t,e,i){cc._RF.push(e,"75439fJxOZCsbeQCtlyFbbg","ReChargeLogic");var n=t("n7"),o=(t("GameCommon"),t("GameEvent")),a=t("WorkData"),s=t("StringBuilder"),c=t("GameTools"),r=t("UserLogic"),l=t("JsonMetaCache"),h=t("MathUtils"),u=function e(){this.chargeData={},this.savedData={},this.tableData=null,this.resetDataFromSdk=function(){var e=t("SdkIns").instance().getSdkData("money_def");l.instance().initMoneyData(e)},this.calcCondition=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"condition";if(!this.openReCharge())return!1;var i=t[e],n=t.openLev;if(r.geti("lev")<n)return!1;var o=i[0],a=i[1];switch(o){case "rechargeValue1":return 0==this.getTotalRechargeValue();case "rechargeValue2":return this.getTotalRechargeValue()>0;case "specialactivity":return!1;case "lost":return this.getLost()>=a;case "setLost":return this.setLost(a),!0}return!0},this.calcDiscount=function(t,e){var i=t.type,n=this.getDiscount(i),o=[],a=t.calcDiscount,s=void 0,r=void 0,l=void 0;switch(a){case 1:n=0;case 2:0==n?n=10:n--;for(var u=n<=0;!t.giftlist[n];)u?n++:n--;o[0]=n,r=t.giftlist[o[0]],s=h.randArray(r),o[1]=r.indexOf(s);break;case 3:case 4:var d=0;if(0!=(d=e?this.getTotalRechargeValue():3==a?this.getRechargeValue(i):this.getTotalRechargeValue())){o[0]=h.randArray(t.hasCharge),r=t.giftlist[o[0]];for(var f=0;f<r.length;f++)if(r[f].price>d){o[1]=f;break}null==o[1]&&(o[1]=r.length-1)}else{var g=this.getDiscountByDeltaDay(t);o[0]=h.randArray(g),r=t.giftlist[o[0]],l=this.getGearByValue(t);var p=r.slice();c.upset(p);var _=l.slice();c.upset(_);for(var m=0;m<p.length&&(s=p[m],-1==_.indexOf(s.price+""));m++);o[1]=r.indexOf(s)}}return o},this.getDiscountByDeltaDay=function(t){var e=void 0,i=1E3*this.getLastRechargeTime(),n=0==i?new Date:new Date(i),o=(new Date(1E3*this.getSvrTime())).getDate()-n.getDate();for(var a in t.discount){var s=t.discount[a];if(0==s.deltaDay){e=s.discount;break}if(o<=s.deltaDay){e=s.discount;break}}return e},this.getGearByValue=function(t){var e=void 0,i=this.getRechargeValue(t.type);for(var n in t.gear){var o=t.gear[n];if(i<=o.chargeValue){e=o.value;break}}return e},this.isClean=function(t){return isNaN(t)||null==t||t==e.CLEANKEY},this.checkType=function(t){null==this.savedData[t]&&(this.savedData[t]=[t])},this.getDelayed=function(){return this.checkType(100),0|this.savedData[100][1]},this.setDelayed=function(t){this.checkType(100),this.savedData[100][1]=t,this.save()},this.getTotalRechargeValue=function(){this.checkType(100);var t=parseFloat(this.savedData[100][2]);return isNaN(t)?0:t},this.addTotalRechargeValue=function(t){this.checkType(100),this.savedData[100][2]=this.getTotalRechargeValue()+t},this.getLastRechargeTime=function(){return this.checkType(100),0|this.savedData[100][3]},this.setLastRechargeTime=function(){this.checkType(100),this.savedData[100][3]=this.getSvrTime()},this.getFallDt=function(){return t("GameLogic").getWinOrLoseCount()},this.getLost=function(){return this.checkType(100),t("GameLogic").getFromData(this.savedData[100][4])},this.setLost=function(e){this.checkType(100),this.savedData[100][4]=t("GameLogic").setToData(e)},this.getRechargeId=function(t){return this.checkType(t),0|this.savedData[t][1]},this.setRechargeId=function(t,e){this.checkType(t),this.savedData[t][1]=e},this.getRechargeStarttm=function(t){return this.checkType(t),0|this.savedData[t][2]},this.setRechargeStarttm=function(t,e){this.checkType(t),this.savedData[t][2]=e},this.getRechargeValue=function(t){this.checkType(t);var e=parseFloat(this.savedData[t][3]);return isNaN(e)?0:e},this.setRechargeValue=function(t,e){if(null!=t)this.setSingleValue(t,e);else for(var i in this.savedData)100!=i&&this.setSingleValue(i,e)},this.setSingleValue=function(t,e){this.checkType(t),0!=this.getRechargeStarttm(t)&&(this.savedData[t][3]=Math.max(this.getRechargeValue(t),e))},this.getDiscount=function(t){return this.checkType(t),0|this.savedData[t][4]},this.getDiscountId=function(t){return this.checkType(t),0|this.savedData[t][5]},this.setDisCount=function(t,e,i){this.checkType(t),this.savedData[t][4]=e,this.savedData[t][5]=i,this.save()},this.getFlag=function(t){return this.checkType(t),0|this.savedData[t][6]},this.setFlag=function(t,e){this.checkType(t),this.savedData[t][6]=e,this.save()},this.getHasMoney=function(t){return this.checkType(t),0|this.savedData[t][7]},this.setHasMoney=function(t,e){this.checkType(t),this.savedData[t][7]=e,this.save()},this.recharge=function(t){this.addTotalRechargeValue(t),this.setRechargeValue(null,t),this.setLastRechargeTime(),this.save()},this.crossFailed=function(e){var i=t("JsonMetaCache").getRechargeTypeData()[5][0],n=this.isExpired(i)&&this.canReOpen(i);e<=10&&n&&(this.setLost(this.getLost()+1),this.save())},this.buySuccess=function(t){this.setHasMoney(t,1)},this.init=function(t){if(this.openReCharge()){null==t&&(t=this.tableData),this.tableData=t,this.chargeData={},this.savedData=this.getSave();var e=l.getRechargeTypeData(),i=!1,o="",a=[];for(var s in e)for(var c=e[s],r=0;r<c.length;r++){var h=c[r];if(-1==a.indexOf(h.checkOrder)){var u=this.savedData[h.type];if(this.useSvrOpen(h)?null!=t&&(this.svrIsExpired(h,t)||(null==u?i=this.openNew(h,!0):this.useOld(h)),this.svrCanReOpen(h,t)&&(i=this.openNew(h))):null==u?i=this.openNew(h,!0):(this.isExpired(h)||this.useOld(h),this.canReOpen(h)&&(i=this.openNew(h))),null!=this.chargeData[h.type]){a.push(h.checkOrder);var d=this.chargeData[h.type];o+="id: "+d.sdata.id+",des: "+d.sdata.des+",gift: "+d.gift.id+"\n";break}}}i&&this.save(),n.log("ReChargeLogic.tableData: "+JSON.stringify(this.tableData)),n.log("ReChargeLogic.logs: \n"+o)}},this.useOld=function(t){this.chargeData[t.type]=this.getDataByValue(t)},this.openNew=function(t,e){var i=this.calcCondition(t);return i&&(this.chargeData[t.type]=this.getDataByValue(t,!0,e)),i},this.getDataByValue=function(t,e,i){var n={};n.sdata=t;var o=this.getDiscount(t.type),a=this.getDiscountId(t.type);if(null!=t.giftlist[o]&&null!=t.giftlist[o][a]||(e=!0),e){var s=this.calcDiscount(t,i);o=s[0],a=s[1],this.savedData[t.type]=this.getInitData(t),this.useSvrOpen(t)&&this.tableData&&this.setFlag(t.type,this.tableData.flag),this.setRechargeValue(t.type,0),this.setDisCount(t.type,o,a),this.calcCondition(t,"openSuccess")}return n.gift=t.giftlist[o][a],n},this.getInitData=function(t){return[t.type,t.id,this.getSvrTime()]},this.getSvrTime=function(){var t=this.getDelayed(),e=new Date(1E3*c.getCurtm(!0));return e.setMinutes(e.getMinutes()+t),e.getTime()/1E3},this.useSvrOpen=function(t){return-1==t.lastTime},this.getRemainTime=function(t){var e=l.getRechargeData()[t];if(e){if(this.useSvrOpen(e)){if(!this.tableData)return 0;var i=this.tableData,n=i.start_tm,o=i.day;return c.getTmrByDay(n,o,!0)}var a=60*e.lastTime*1E3;return 1E3*this.getRechargeStarttm(e.type)+a-1E3*this.getSvrTime()}var s=this.chargeData[t];if(s){var r=(e=s.sdata).starttm,h=e.day;return c.getTmrByDay(r,h,this.getSvrTime())}return 0},this.svrIsExpired=function(t){return!!this.tableData&&this.getRemainTime(t.id)<=0},this.svrCanReOpen=function(t){return!!this.tableData&&this.getFlag(t.type)!=this.tableData.flag},this.isExpired=function(t){return-1==t.lastTime||this.getRemainTime(t.id)<=0},this.canReOpen=function(t){if(-1==t.nextOpenTime)return!1;var e=60*t.lastTime*1E3,i=60*t.nextOpenTime*1E3,n=1E3*this.getRechargeStarttm(t.type);return 1E3*this.getSvrTime()>=n+e+i},this.getStrFromArray=function(t,i){for(var n=0,o=i.length-1;o>=0;o--)if(0!=i[o]&&!this.isClean(i[o])){n=o;break}if(n<1)return t;for(var a=0;a<=n;a++)null==i[a]&&(i[a]=e.CLEANKEY),t.Append(i[a]);return t},this.save=function(){var t="",i=new s(e.__SP2);for(var o in this.savedData){var c=this.savedData[o];0!=(i=this.getStrFromArray(i,c)).Length()&&(t+=i+e.__SP1),i.Clear()}t=""==(t=t.substring(0,t.length-1))?"":e.KEY+t,a.set(a.WKD_RECHARGE,t),n.log("ReChargeLogic.save: "+t)},this.getSave=function(){var t={},i=a.get(a.WKD_RECHARGE);if(0!=i)for(var o=(i=i.substring(1)).split(e.__SP1),s=0;s<o.length;s++){var c=o[s].split(e.__SP2);t[c[0]]=c}return n.log("ReChargeLogic.getSave.dt: "+i+"\n"+JSON.stringify(t)),t},this.openReCharge=function(){return null!=t("SdkIns").instance().isPay()},this.getChargeData=function(t){var e=l.getRechargeData()[t],i=null==e?t:e.type,n=this.chargeData[i];return n.test||(n.remainTime=this.getRemainTime(t)),n},this.initNewYearGift=function(){var e=t("SdkIns").instance().getSdkData("newYearGift");if(e)for(var i="btn_newYearGift",n=0;n<e.length;n++){var o=e[n],a=o.starttm,s=o.day,r=this.getSvrTime();if((new Date(a)).getTime()/1E3>r)this.__showIcon(i,!1);else{var h=c.getTmrByDay(a,s,r);if(h<0)this.__showIcon(i,!1);else{if(1!=this.getHasMoney(o.id)){var u={sdata:{}};u.sdata.id=o.id,u.sdata.type=o.id,u.sdata.btn=i,u.sdata.starttm=a,u.sdata.day=s;var d=void 0,f=void 0,g=l.getRechargeData();for(f in g){var p=g[f].giftlist;for(var _ in p)for(var m=p[_],v=0;v<m.length;v++)if(m[v].id==o.id){d=m[v];break}}u.gift=d,u.remainTime=h,this.chargeData[u.sdata.type]=u;break}this.__showIcon(i,!1)}}}},this.show=function(){if(!this.openReCharge())return!1;var t=void 0,e=l.getRechargeData();for(t in e){var i=e[t];this.showIcon(i,!1)}for(t in this.chargeData){var n=this.chargeData[t];1!=this.getHasMoney(n.sdata.type)&&this.showIcon(n.sdata,!0)}},this.__showIcon=function(t,e){o.EVENT_BIGMAP_COMMAND({mainui:{btn:t,sh:e,level:e?1:0,tips:!0}})},this.showIcon=function(e,i){var n=e.btn;this.__showIcon(n,i);var o=t("UIMainV2").instance();if(o){var a=o[n];a.chargeId=e.id;var s=1==e.type;c.sh(a,"first",s),c.sh(a,"limited",!s)}},this.testShow=function(t,e){this.chargeData={};var i={};i.sdata=l.getRechargeData()[t];var n=void 0,o=i.sdata.giftlist;for(var a in o)for(var s=o[a],c=0;c<s.length;c++)if(s[c].id==e){n=s[c];break}i.gift=n,i.remainTime=10086E3,i.test=!0,this.chargeData[i.sdata.type]=i,this.show()},this.testDelayed=function(t){0==t&&(this.savedData={}),this.setDelayed(t),this.init(this.tableData),this.show(),this.save()}};e.exports=u,u._ins=null,u.instance=function(){return null==u._ins&&(u._ins=new u),u._ins},u.CLEANKEY="d",u.KEY="s",u.__SP1="\x3d",u.__SP2=":",u.init=function(t){u.instance().init(t)},u.getChargeData=function(t){return u.instance().getChargeData(t)},u.show=function(){u.instance().show()},u.recharge=function(t){u.instance().recharge(t)},u.buySuccess=function(t){u.instance().buySuccess(t)},u.crossFailed=function(t){u.instance().crossFailed(t)},u.testDelayed=function(t){u.instance().testDelayed(t)},u.resetDataFromSdk=function(){u.instance().resetDataFromSdk()},cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",SdkIns:"SdkIns",StringBuilder:"StringBuilder",UIMainV2:"UIMainV2",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],SdkIns:[function(t,e,i){cc._RF.push(e,"f9e6aDJLIJN06BrDu7wzUqt","SdkIns");var n=t("n7"),o=function e(){this.loadjs=function(t){this.__sdk&&this.__sdk.loadjs?this.__sdk.loadjs(t):t&&t()},this.getPf=function(){return this.__sdk?this.__sdk.pf:"n7"},this.getOpenId=function(){return this.__sdk&&this.__sdk.getOpenId?this.__sdk.getOpenId():null},this.__sdk=null,this.init=function(i,o){var a=o||e.sdk();a||(a="n7"),n.log("SdkIns init sdk pf:"+a);var s=void 0;a&&(s=t("sdk_"+a))?(this.__sdk=new s,this.__sdk.init&&this.__sdk.init(),n.log("init sdk:"+a)):n.log("unknow sdk name:"+a),this.loadjs(i)},this.login=function(t){this.__sdk&&this.__sdk.login?this.__sdk.login(t):t&&t()},this.logout=function(){var e=this.__sdk;this.__sdk=void 0;var i=e&&e.logout;if(i&&e.logout(),cc.sys.localStorage.removeItem("per_pf2"),!i){var n=t("N7UIManager");n.loadScene("debug_wait_h5"),n._FLOADING_=void 0}},this.getLogin=function(t){return this.__sdk&&this.__sdk.getLogin?this.__sdk.getLogin(t):t},this.loginErr=function(t){return!(!this.__sdk||!this.__sdk.loginErr)&&this.__sdk.loginErr(t)},this.logined=function(t){return!this.__sdk||(cc.sys.localStorage.setItem("per_pf2",this.__sdk.pf),!this.__sdk.logined)||this.__sdk.logined(t)},this.ubase_info=function(t){return this.__sdk&&this.__sdk.ubase_info?this.__sdk.ubase_info(t):t},this.user_init=function(t){this.__sdk&&this.__sdk.user_init&&this.__sdk.user_init(t)},this.isPay=function(){return this.__sdk&&this.__sdk.pay},this.pay=function(t,e){this.isPay()?this.__sdk.pay(t,e):n.error("sdkins:pay:sdk not pay")},this.getPay=function(t,e){return this.__sdk&&this.__sdk.getPay?this.__sdk.getPay(t,e):t},this.info=function(t){this.__sdk&&this.__sdk.info&&this.__sdk.info(t)},this.canShare=function(){return null},this.defaultShare=function(t){this.__sdk&&this.__sdk.defaultShare&&this.__sdk.defaultShare(t)},this.share=function(t,e){this.__sdk&&this.__sdk.share?this.__sdk.share(t,e):n.error("can not share!")},this.canPushIcon=function(){return this.__sdk&&this.__sdk.pushIcon},this.pushIcon=function(e){this.canPushIcon()?this.__sdk.pushIcon(e):e&&t("GameTools").runfp(e,0)},this.hfriends=function(){return this.__sdk&&this.__sdk.hfriends},this.savePayp=function(t){this.__sdk&&this.__sdk.savePayp&&this.__sdk.savePayp(t)},this.sdkInfo=function(t){return this.__sdk&&this.__sdk.sdkInfo?this.__sdk.sdkInfo(t):t},this.loginGift=function(){return this.__sdk&&this.__sdk.loginGift?this.__sdk.loginGift():null},this.icon=function(t,e){var i=this.__sdk&&this.__sdk.icon;return i&&this.__sdk.icon(t,e),i},this.save=function(t,e){var i=this.__sdk&&this.__sdk.save;return i&&this.__sdk.save(t,e),i},this.read=function(t,e){var i=this.__sdk&&this.__sdk.read;return i&&this.__sdk.read(t,e),i},this.isAd=function(){return this.__sdk&&this.__sdk.ad},this.ad=function(t,e){n.log("open ad:"+t),this.isAd()&&this.__sdk.ad(t,e)},this.price=function(t){if(this.__sdk&&this.__sdk.price)return this.__sdk.price(t)},this.onMainShowed=function(t){this.__sdk&&this.__sdk.onMainShowed&&this.__sdk.onMainShowed(t)},this.scoreUpdate=function(t){if(this.__sdk&&this.__sdk.scoreUpdate)return this.__sdk.scoreUpdate(t)},this.update=function(t){this.__sdk&&this.__sdk.update&&this.__sdk.update(t)},this.netEncode=function(){return!this.__sdk||!this.__sdk.netEncode||this.__sdk.netEncode()},this.isRequest=function(){return this.__sdk&&this.__sdk.request},this.request=function(t,e,i){return!this.__sdk||!this.__sdk.request||this.__sdk.request(t,e,i)},this.setting_info=function(){return!(!this.__sdk||!this.__sdk.setting_info)&&this.__sdk.setting_info()},this.gameStart=function(){this.__sdk&&this.__sdk.gameStart&&this.__sdk.gameStart()},this.exchangeLocal=function(t){return this.__sdk&&this.__sdk.exchangeLocal?this.__sdk.exchangeLocal(moeny):t},this.exchangeGlobal=function(t){return this.__sdk&&this.__sdk.exchangeGlobal?this.__sdk.exchangeGlobal(moeny):t},this.requestFight=function(){this.__sdk&&this.__sdk.requestFight&&this.__sdk.requestFight()},this.submitResult=function(t,e){this.__sdk&&this.__sdk.submitResult&&this.__sdk.submitResult(t,e)},this.chgStep=function(){return this.__sdk&&this.__sdk.chgStep?this.__sdk.chgStep():null},this.upLogLeast=function(t,e,i,n,o){this.__sdk&&this.__sdk.upLogLeast&&this.__sdk.upLogLeast(t,e,i,n,o)},this.getSdkData=function(t){if(this.__sdk&&this.__sdk.getSdkData)return this.__sdk.getSdkData(t)},this.useSelfSound=function(){return!(!this.__sdk||!this.__sdk.useSelfSound)&&this.__sdk.useSelfSound()},this.playSound=function(t,e){return!(!this.__sdk||!this.__sdk.playSound)&&this.__sdk.playSound(t,e)},this.playMusic=function(t,e){return!(!this.__sdk||!this.__sdk.playMusic)&&this.__sdk.playMusic(t,e)},this.testPay=function(t){if(this.__sdk&&this.__sdk.testPay)return this.__sdk.testPay(t)},this.dialogShow=function(t){if(this.__sdk&&this.__sdk.dialogShow)return this.__sdk.dialogShow(t)},this.dialogClose=function(){if(this.__sdk&&this.__sdk.dialogClose)return this.__sdk.dialogClose()},this.closeBanner=function(){if(this.__sdk&&this.__sdk.closeBanner)return this.__sdk.closeBanner()},this.getRankList=function(t,e){var i=this.__sdk&&this.__sdk.getRankList;return i&&this.__sdk.getRankList(t,e),i},this.hasf=function(t){return this.__sdk&&this.__sdk[t]},this.runf=function(t,e){return!(!this.__sdk||!this.__sdk[t])&&this.__sdk[t](e)}};o.__ins=new o,o.instance=function(){return o.__ins},o.loadScript=function(t,e){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){e()},i.src=t,document.body.appendChild(i)},o._query_list={},o.urlp=function(t,e){if(window&&window.location&&window.location.search&&window.location.search.length>1&&void 0==o._query_list[t]){var i=new RegExp("(^|\x26)"+t+"\x3d([^\x26]*)(\x26|$)");n.log("SdkIns.urlp n7.window "+n.window),n.log("SdkIns.urlp n7.window.location "+n.window.location),n.log("SdkIns.urlp n7.window.location.search "+n.window.location.search);var a=n.window.location.search.substr(1).match(i),s=null!=a?decodeURIComponent(a[2]):void 0==e?null:e;o._query_list[t]=s}return o._query_list[t]},o.sdk=function(){return t("GameConfig").get("pf")||o.urlp("sdk")},o.getPf=function(){var e=void 0;return n.window.OPEN_DATA&&(e=o.getv(n.window.OPEN_DATA.appurl,"sdk")),null==e&&(e=t("GameConfig").get("pf")||cc.sys.localStorage.getItem("per_pf")),e},o.getv=function(t,e){var i=t.indexOf(e);if(i<1)return null;i+=e.length+1;var n=t.indexOf("\x26",i);return t.substr(i,n-i)},o.canSh=function(){return o.instance().canShare()},o.hf=function(){return o.instance().hfriends()},e.exports=o,cc._RF.pop()},{GameConfig:"GameConfig",GameTools:"GameTools",N7UIManager:"N7UIManager",n7:"n7"}],ShaderUtils:[function(t,e,i){cc._RF.push(e,"22dafrxIcNKmJaLsD5wZcng","ShaderUtils");var n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)},o={shaderPrograms:{},screen:function(t,e,i){var n=cc.RenderTexture.create(e.width,e.height);return n.begin(),t._sgNode.visit(),n.end(),i&&i._sgNode.addChild(n),n},setShader:function(e,i,o,a){var s=a||i,c=this.shaderPrograms[s];if(!c){c=new cc.GLProgram;var r=t(cc.js.formatStr("%s.vert",i)),l=t(cc.js.formatStr("%s.frag",i));c.initWithString(r,l),cc.sys.isNative||(c.initWithVertexShaderByteArray(r,l),c.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),c.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),c.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),c.link(),c.updateUniforms(),this.shaderPrograms[s]=c}if(c.use(),cc.sys.isNative){var h=cc.GLProgramState.getOrCreateWithGLProgram(c);if(o)for(var u in o){var d=o[u];"object"!=(void 0===d?"undefined":n(d))?h.setUniformFloat(u,d):c.setUniformVec2(ba,d)}e._sgNode.setGLProgramState(h)}else{if(o)for(var f in o){var g=c.getUniformLocationForName(f),p=o[f];"object"!=(void 0===p?"undefined":n(p))?c.setUniformLocationWith1f(g,p):c.setUniformLocationWith2f(g,p)}e._sgNode.setShaderProgram(c)}},setGray:function(t){o.setShader(t,"gray")},setBlur:function(t){o.setShader(t,"blur")}};e.exports=o,o.shader_list=["gray","blur","color","overlayer"],o.SHADER_GRAY=0,o.SHADER_BLUR=1,o.SHADER_COLOR=2,o.SHADER_OVERLAYER=3,o.setShaderFromId=function(t,e,i,n){e<0||e>=o.shader_list.length||o.setShader(t,o.shader_list[e],i,n)},cc._RF.pop()},{}],ShareBtn:[function(t,e,i){cc._RF.push(e,"904d4KqZFZJeZJk07CiPcJq","ShareBtn");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache");t("SdkIns"),cc.Class({"extends":cc.Component,properties:{btn_share:{"default":null,type:cc.Node},awdn:{"default":null,type:cc.Node}},start:function(){},__initEvent:function(){n.btn(this.btn_share,n.makef(this.shareTo,this),1)},__showed:function(t,e){this.hasInit||(this.__initEvent(),this.hasInit=!0),this.data=t,this.cfo=e;var i=t.tmpData,o=i.award?i.award:null;if(o){var s=o[0];if(s&&!i.hasShare){this.awdn.active=!0;var c=a.itemn(s[0].k);n.imgs(this.awdn,c.icon,"icon"),n.text(this.awdn,"num","x"+s[0].v)}else this.awdn.active=!1}},shareTo:function(){if(!this.is_click){this.is_click=!0;var t=this.data,e=this.cfo,i=this;t.fo&&t.fo(0,function(t){i.is_click=!1,t.code||(e?e():i.awdn.active=!1)})}},onDestroy:function(){o.off(this)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",SdkIns:"SdkIns"}],ShareLogic:[function(t,e,i){cc._RF.push(e,"49356CYwvpJfKth4DROfglD","ShareLogic");var n=("function"==typeof Symbol&&_typeof(Symbol.iterator),t("n7")),o=t("GameCommon"),a=t("GameEvent"),s=t("WorkData"),c=t("StringBuilder"),r=t("GameTools"),l=t("UserLogic"),h=t("JsonMetaCache"),u=t("GameLogic"),d=(t("MathUtils"),t("GameConfig")),f=function e(){this.shareDataId={},this.shareDataType={},this.savedData={},this.shareAchieves=e.achieve,this.calcCondition=function(e,i){var n=i.sdata.openLev,o=l.geti("lev");if(o<n)return!1;var a=void 0,s=e[0],c=e[1];switch(s){case "checkLev":return o>=c;case "checkWeek":return!i.hasShare&&-1!=e.indexOf(""+r.getWeek(!0));case "heartMorethen":return t("UserDataV2").geti("heart","user")>=c;case "":return!0}var h=this.checkType(0);if(!h)return!1;switch(s){case "checkWin":return a=u.getFromData(h[1]),!this.isClean(a)&&a>0&&a>=c;case "checkLose":return a=u.getFromData(h[1]),!(this.isClean(a)||a<=0)&&((a=-u.getFromData(h[8]))<0&&a<=c);case "checkSteps1":return a=h[2],!this.isClean(a)&&c<=a;case "checkSteps2":return a=h[2],!this.isClean(a)&&(new Number(c)).toFixed(2)==a;case "checkFirstHard":return a=h[3],!this.isClean(a)&&a>0}return!0},this.crossSuccess=function(t){if(this.openShare()){var e=this.checkType(0),i=u.getFromData(e[1]);i<0&&(i=0),i++,e[1]=u.setToData(i),e[2]=(new Number(t)).toFixed(2),this.save("crossSuccess")}},this.crossFailed=function(){if(this.openShare()){var t=this.checkType(0),e=u.getFromData(t[1]);e>0&&(e=0),e--,t[1]=u.setToData(e);var i=u.getFromData(t[3]);i>0&&(i=-i,t[3]=u.setToData(i)),t[8]=Math.abs(e),this.save("crossFailed")}},this.inHardMap=function(t){if(this.openShare()){var e=this.checkType(0),i=u.getFromData(e[3]);Math.abs(i)!=t&&(e[3]=u.setToData(t))}},this.setTodayShare=function(){if(this.openShare()){var t=this.checkType(0);r.isEqualDay(!0,t[4])||(t[5]=0),t[4]=r.getCurtm(!0),t[5]=1+(0|t[5]),this.save("setTodayShare")}},this.getTodayShareCount=function(){if(!this.openShare())return-1;var t=this.checkType(0);return r.isEqualDay(!0,t[4])?0|t[5]:0},this.shareResult=function(){var t=0,e=this.checkType(0),i=0|e[6],a=this.getTodayShareCount();return 0==a&&(t=o.SHARE_FAILED),a-i>3&&(t=Math.random()<=.3?o.SHARE_FAILED:0),t<0&&(e[6]=i=a,this.save("shareResult")),n.log("ShareLogic.shareResult.code: "+t+",faildCount: "+i+",todayCount: "+a),t},this.saveInvAwdNum=function(){var t=this.checkType(0);t[7]=1+(0|t[7]),this.save("saveInviteCount")},this.getInvAwdNum=function(){return 0|this.checkType(0)[7]},this.isClean=function(t){return isNaN(t)||null==t||t==e.CLEANKEY},this.getShareUrl=function(){var e=r.getLanguage(),i=d.get("share_url"),o=d.get("pf");if(n.window.OPEN_DATA){var a=t("SdkIns").getv(n.window.OPEN_DATA.appurl,"sdk");a&&(o=a)}return(d.get("share_url_"+o)||i)+e+"/"},this.getStrFromArray=function(t,i){for(var n=0,o=i.length-1;o>=0;o--)if(0!=i[o]&&!this.isClean(i[o])){n=o;break}if(n<1)return t;for(var a=0;a<=n;a++)null==i[a]&&(i[a]=e.CLEANKEY),t.Append(i[a]);return t},this.save=function(t){var i="",o=new c(e.__SP2);for(var a in this.savedData){var r=this.savedData[a];r.length<=1||(0!=(o=this.getStrFromArray(o,r)).Length()&&(i+=o+e.__SP1),o.Clear())}i=""==(i=i.substring(0,i.length-1))?"":e.KEY+i,s.set(s.WKD_BACK_SHARE,i),n.log("ShareLogic.from: "+t+",save: "+i)},this.getSave=function(){var t={},i=s.get(s.WKD_BACK_SHARE);if(0!=i)for(var o=(i=i.substring(1)).split(e.__SP1),a=0;a<o.length;a++){var c=o[a].split(e.__SP2);t[c[0]]=c}return n.log("ShareLogic.getSave: "+JSON.stringify(t)),t},this.init=function(){this.savedData=this.getSave(),this.shareDataId={},this.shareDataType={};var e=h.getShare().kuaishou,i=void 0,n=void 0,o=t("SdkIns").instance().getSdkData("delShare");for(i in e){var a=e[i],s=a.type;null==this.shareDataType[s]&&(this.shareDataType[s]=[]),this.checkType(s),(n={}).hide=!(!o||-1==o.indexOf(a.id)),n.sdata=a,this.shareDataId[a.id]=n,this.shareDataType[s].push(n)}for(i in this.shareDataType)this.shareDataType[i].sort(function(t,e){return t.sdata.priority-e.sdata.priority});this.getAllShareAchieve()},this.getShareCd=function(t){if(!this.openShare())return-1;var e=this.shareDataId[t],i=this.checkType(e.sdata.type),n=r.getCurtm(!0)-(0|i[1]);return n<e.sdata.watchCd?e.sdata.watchCd-n:-2},this.checkHasShare=function(t){if(!this.openShare())return!1;var e=this.shareDataId[t],i=0==e.sdata.crossReset,n=this.checkType(e.sdata.type);return r.isEqualDay(!0,n[1])||i?(0|n[2])>=e.sdata.maxCount:(0!=n[2]&&(n[2]=0,this.save("checkHasShare")),!1)},this.getShareState=function(t){var e=this.shareDataId[t];return e.condition=this.checkCondition(e,1),e.hasShare=this.checkHasShare(t),e.award=this.getAward(t),e.cd=e.hasShare?-1:this.getShareCd(t),e.hasGetAward=this.getHasGetAward(e.sdata.type),e},this.getAdStateData=function(t){var e=this.shareDataId[t];return e.condition=this.getAdState(t)==o.SHARE_AD_0,e.award=this.getAwardByPf(t,this.getAwardIndex(e)),e.cd=this.getShareCd(t),e.hasGetAward=this.getHasGetAward(e.sdata.type),e},this.getShareAward=function(t,e,i,n){var o=this.shareDataId[t];o.hasShare||(this.toAward(t,e,i,n),o.hasShare=this.checkHasShare(t))},this.getAdAward=function(t){var e=this.shareDataId[t];this.toAward(t,this.getAwardIndex(e))},this.getAwardIndex=function(t){var e=0;return""!=t.sdata.awardCondition&&(e=this.calcCondition(t.sdata.awardCondition,t)?0:1),e},this.toAward=function(e,i,o,s){var c=this.shareDataId[e],l=c.sdata.type,h=this.checkType(l),u=null!=c.hasShare?"share.awardnotice":"ads_notice.ads3",d=null!=c.hasShare?"SHARE":"ADS";if(4!=c.sdata.showType){var f=this.getAwardByPf(e,i);if(f){var g=f.slice();u&&(g.title=u),o&&(g.callFunc=o),s&&(g.caller=s),t("UserLogic").award(g,d),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:g})}this.setHasGetAward(l,1)}else this.setHasGetAward(l,0);h[1]=r.getCurtm(!0),h[2]=1+(0|h[2]),n.log("ShareLogic.getWatchOrAdAward: "+JSON.stringify(h)),this.save("getWatchOrAdAward")},this.getAwardByPf=function(t,e,i){var n=i?this.getHasWatchCount(t):this.getShareCount(t),o=this.shareDataId[t],a=o.sdata.pf[n];return(a=a||o.sdata.pf[1])?null==e?a:a[e]:null},this.checkType=function(t){var e=this.savedData[t];return e||(e=this.savedData[t]=this.getAdInitData(t)),e},this.shareSuccess=function(t){if(this.openShare()){var e=this.checkType(t);e[1]=r.getCurtm(!0),e[2]=1+(0|e[2]),this.save("shareSuccess")}},this.getHasWatchCount=function(t){return 0|this.checkType(t)[2]},this.getShareCount=function(t){return this.checkType(t),1+(0|this.savedData[t][2])},this.getHasGetAward=function(t){return this.checkType(t),0|this.savedData[t][3]},this.setHasGetAward=function(t,e){this.checkType(t)[3]=e},this.checkCondition=function(t,e){return!((1==e?!this.openShare():!this.openAd())||t.hide)&&!(this.getEndTime(t.sdata.id)<0)&&this.calcCondition(t.sdata.condition,t)},this.cleanShareData=function(t){if(this.openShare()&&""!=t.sdata.saveKey){var i=this.checkType(0);i[t.sdata.saveKey]=e.CLEANKEY,this.save("cleanShareData"),n.log("ShareLogic.cleanShareData: "+JSON.stringify(i))}},this.cleanShareDataById=function(t){var e=this.shareDataId[t];e&&this.cleanShareData(e)},this.checkShare=function(t,e,i,n,o){return!1},this.getAdInitData=function(t){return[t]},this.getAdState=function(t){if(!this.openAd())return o.SHARE_AD_NEVER;var e=this.shareDataId[t];if(e.hide)return o.SHARE_AD_NEVER;if(!this.checkCondition(e,2))return o.NOT_START;var i=0==e.sdata.crossReset,n=this.checkType(e.sdata.type);if(r.isEqualDay(!0,n[1])||i){if((0|n[2])>=e.sdata.maxCount)return o.SHARE_AD_NO;var a=r.getCurtm(!0)-parseInt(n[1]);return a<e.sdata.watchCd?e.sdata.watchCd-a:o.SHARE_AD_0}return 0!=n[2]&&(n[2]=0,this.save("getAdState")),o.SHARE_AD_0},this.watchAd=function(e,i,s){console.log("watchAd...111");if(this.openAd()){var c=this.shareDataId[e],r=this.getAdState(e);if(n.log("ShareLogic.watchAd: "+r+",tmpData: "+JSON.stringify(c)),r==o.SHARE_AD_0){console.log("watchAd...222");var tt=this;showTTReward().then(function(){tt.getAdAward(e)}).catch(function(){a.EVENT_MESSAGEBOX("ads_notice.failed"),i&&i.call(s,{tmpData:c,dt:t}),n.log("ShareLogic.watchAd.dt: "+JSON.stringify(t))});
//showTTAward(function(){tt.getAdAward(e)},function(){a.EVENT_MESSAGEBOX("ads_notice.failed"),i&&i.call(s,{tmpData:c,dt:t}),n.log("ShareLogic.watchAd.dt: "+JSON.stringify(t))})

}else{var h={};h.code=r,i&&i.call(s,h),a.EVENT_MESSAGEBOX(r==o.SHARE_AD_NO?"ads_notice.no1":"ads_notice.no2")}}else i&&i.call(s,null)},this.__showAndWatch=function(t,i,a){e.watchAd(t,function(e){var s=e?e.dt:null;n.log("ShareLogic.showAndWatch: "+JSON.stringify(s)),s&&s.code==o.AD_FAILED?this.checkShare(t,null,i,a):i&&i.call(a,e)},this)},this.showAndWatch=function(t,i,s,c){if(!this.openAd())return i&&(i.active=!1),!1;var l=e.getAdState(t)==o.SHARE_AD_0;if(!i)return l&&this.__showAndWatch(t,s,c),l;if(i.active=l,l){var h=r.chd(i,i.clickPath);h||(h=i),h.lastClick=0,r.unbtn(h),r.btn(h,r.makef(function(){var e=(new Date).getTime(),i=e-h.lastClick;if(i<=1E3&&i>=100)return a.EVENT_MESSAGEBOX("ads_notice.fast"),void n.log("ShareLogic.showAndWatch.too fast: "+(e-h.lastClick));h.lastClick=e,this.__showAndWatch(t,s,c)},this),1)}return l},this.getAward=function(t,e){return this.getAwardByPf(t,e)},this.clean=function(){this.shareAchieves=e.achieve,this.savedData={},this.save("clean")},this.hasAd=function(t){return this.openAd(t)},this.openAd=function(e){return null!=t("SdkIns").instance().isAd()&&(null==e||this.getAdState(e)!=o.SHARE_AD_NEVER)},this.openShare=function(e){if(null==t("SdkIns").instance().canShare())return!1;if(null==e)return!0;var i=this.getShareState(e);return!(!i||i.hide)},this.showAndWatchOrShare=function(t,e,i,n){var o=this.shareDataId[t];if(o){if(1==o.sdata.useType)return this.checkShare(t,e,i,n);if(2==o.sdata.useType)return this.showAndWatch(t,e,i,n);if(3==o.sdata.useType)return this.hasAd(t)?this.showAndWatch(t,e,i,n):this.checkShare(t,e,i,n)}return!1},this.getWatchOrShare=function(t){var e=this.shareDataId[t];return e&&(1==e.sdata.useType&&(e=this.getShareState(t)),2==e.sdata.useType&&(e=this.getAdStateData(t)),3==e.sdata.useType&&(e=this.hasAd(t)?this.getAdStateData(t):this.getShareState(t))),e.hasWatchCount=this.getHasWatchCount(e.sdata.type),e.endTime=this.getEndTime(t),e},this.openWatchOrShareAward=function(e){var i=this.shareDataId[e];if(i){var n=null;1==i.sdata.useType&&(i=this.getShareState(e)),2==i.sdata.useType&&(i=this.getAdStateData(e),n="ads_notice.ads3");var o=this.getHasGetAward(i.sdata.type),s=this.getAwardByPf(e,0,!0);if(s&&!o){var c=s.slice();n&&(c.title=n),t("UserLogic").award(c,"ADS"),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:c})}o||(this.setHasGetAward(i.sdata.type,1),this.save("openWatchOrShareAward"))}},this.getAllShareAchieve=function(){if(!this.openShare())return null;for(var e in this.shareAchieves){var i=this.shareAchieves[e],n=i.shareId,o=this.getShareState(n);if(o.condition){var a=0|this.checkType(o.sdata.type)[2];i.award=o.award[0];var s=t("AchieveLogic");a>=2?i.status=s.STATUS_END:1==a?(i.status=s.STATUS_FINISH,s.addFinishNum(i)):i.status=s.STATUS_PROCESS,i.count=i.status==s.STATUS_FINISH?i.tar:i.count}}return this.shareAchieves},this.updateShareAchieve=function(e){var i=t("AchieveLogic"),n=this.shareAchieves[e];if(n&&n.status==i.STATUS_PROCESS){var o=this.getShareState(n.shareId);if(o&&o.condition){var a=t("AchieveLogic");n.count=n.tar,n.status=a.STATUS_FINISH,this.getShareAward(o.sdata.id),a.addFinishNum(n)}}},this.getShareAchieveAward=function(e,i){i?t("ShareLogic").checkShare(10,null,function(t){t&&t.dt&&0==t.dt.code&&this._getShareAchieveAward(e,!0)},this):this._getShareAchieveAward(e,!1)},this._getShareAchieveAward=function(e,i){var n=t("AchieveLogic"),o=this.shareAchieves[e];if(o&&o.status==n.STATUS_FINISH){var s=this.getShareState(o.shareId);if(s){n.delFinishNum(o),this.shareSuccess(s.sdata.type);var c=this.getAwardByPf(o.shareId,0),l=r.doubleAward(c,i?2:1);t("UserLogic").award(l,"SHARE"),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:l,owner:"dialog_achieve"})}}},this.getInviteData=function(){if(!this.openShare())return null;var e=this.getInvAwdNum(),i=0|t("UserLogic").get("ad"),n=this.getMaxInvNum(),o=this.shareDataId[11].sdata.pf,a={};return a.hasGetInvAwdNum=e,a.hasInvNum=i,a.maxInvNum=n,a.awd=o,a},this.getInviteAward=function(){if(!this.openShare())return o.INVITE_3;var e=this.getInviteData();if(e.hasGetInvAwdNum>=e.hasInvNum)return o.INVITE_1;if(e.hasGetInvAwdNum>=e.maxInvNum)return o.INVITE_2;var i=e.awd[e.hasGetInvAwdNum+1];return i||(i=e.awd[this.getMaxInvNum()]),t("UserLogic").award(i[0],"SHARE"),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:i[0],owner:"dialog_invite_gift"}),this.saveInvAwdNum(),o.INVITE_0},this.getMaxInvNum=function(){if(!this.openShare())return null;if(null==e.MAXINVITE){var t=this.shareDataId[11].sdata.pf;for(var i in t)e.MAXINVITE=Math.max(i,e.MAXINVITE)}return e.MAXINVITE},this.getEndTime=function(t){var e=this.shareDataId[t],i=e.sdata.starttm,n=0|e.sdata.day;return r.getTimeRemaining(i,n)}};e.exports=f,f._ins=null,f.instance=function(){return null==f._ins&&(f._ins=new f),f._ins},f.CLEANKEY="d",f.KEY=s.STR,f.__SP1="\x3d",f.__SP2=":",f.achieve={1E3:{id:1E3,type:1E3,count:0,tar:1,shareId:9}},f.MAXINVITE=null,f.init=function(){f.instance().init()},f.shareResult=function(){return f.instance().shareResult()},f.getShareState=function(t){return f.instance().getShareState(t)},f.checkShare=function(t,e,i,n,o){return f.instance().checkShare(t,e,i,n,o)},f.getShareUrl=function(){return f.instance().getShareUrl()},f.getAdState=function(t){return f.instance().getAdState(t)},f.watchAd=function(t,e,i){f.instance().watchAd(t,e,i)},f.showAndWatch=function(t,e,i,n){return f.instance().showAndWatch(t,e,i,n)},f.showAndWatchOrShare=function(t,e,i,n){return f.instance().showAndWatchOrShare(t,e,i,n)},f.getWatchOrShare=function(t){return f.instance().getWatchOrShare(t)},f.openWatchOrShareAward=function(t){return f.instance().openWatchOrShareAward(t)},f.getAward=function(t,e){return f.instance().getAward(t,e)},f.openAd=function(t){return f.instance().openAd(t)},f.hasAd=function(t){return f.instance().hasAd(t)},f.openShare=function(t){return f.instance().openShare(t)},f.mainui_showed=function(){var t=!1,e=[2,3,4,6,5,7],i=void 0;for(i=0;i<e.length;i++)if(f.checkShare(e[i])){t=!0;break}if(t)for(i=0;i<e.length;i++){var n=e[i];this.getShareState(n).condition&&f.instance().cleanShareDataById(n)}return t},f.stepCheck=function(t){for(var e=void 0,i=0;i<t.length&&(!(e=f.getWatchOrShare(t[i])).condition||e.hasShare);i++);return e},f.crossSuccess=function(t){f.instance().crossSuccess(t)},f.crossFailed=function(){f.instance().crossFailed()},f.inHardMap=function(t){f.instance().inHardMap(t)},f.getAllShareAchieve=function(){return f.instance().getAllShareAchieve()},f.getShareAchieveAward=function(t,e){return f.instance().getShareAchieveAward(t,e)},f.getInviteData=function(){return f.instance().getInviteData()},f.getInviteAward=function(){return f.instance().getInviteAward()},f.clean=function(){f.instance().clean()},f.resetDataFromSdk=function(){var e=t("SdkIns").instance().getSdkData("share"),i=h.getShare().kuaishou;if(e)for(var n in i)null!=e[n]&&r.copys(i[n],e[n]);var o=t("SdkIns").instance().getSdkData("replaceShare");if(o)for(var a in o){var s=o[a];i[a]&&i[s]&&(i[a]=i[s],i[a].id=0|a)}},cc._RF.pop()},{AchieveLogic:"AchieveLogic",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",SdkIns:"SdkIns",ShareLogic:"ShareLogic",StringBuilder:"StringBuilder",UserDataV2:"UserDataV2",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],SignByDay:[function(t,e,i){cc._RF.push(e,"ca40990m/JPJr5ycTbPxZg7","SignByDay");var n=t("SignByTimes"),o=(t("GameTools"),t("UserLogic")),a=t("GameEvent"),s=t("GameCommon"),c=t("SignLogic"),r=t("StringUtils"),l=t("n7"),h=cc.Class({"extends":n,refreshTodayIndex:function(){var e=1,i=this.initData;return i.startSignDate||(i.startSignDate=this.getSvrTime(),e=0),i.todayIndex=this.getTodayIndex(),i.replenishIndex=this.getReplenishIndex(),this.checkCrossDay()&&(i.hasReplenishCount=0),this.isTodaySignd()||1==this.getTwoDaysDis(i.lastSignDate,this.getSvrTime())||t("AchieveLogic").updateAchieve(s.ACHIEVE_16,0,!0),e},getReplenishIndex:function(){if(this.isTodaySignd()){var t=this.initData.signList,e=void 0;for(e=0;e<t.length&&0!=t[e];e++);return e>this.initData.todayIndex?s.RSIGN_NOSIGNCOUNT:e}return s.RSIGN_TODAYNOSIGN},getReplenishMoney:function(){var t=this.initData.hasReplenishCount;if(t<0)return-1;var e=new RegExp("x","g"),i=this.tableData.replenish.replace(e,t);return r.jeval(i)},getTodayIndex:function(){return this.getDisStartSignDate()},isThisRoundSignEnd:function(){return this.getDisStartSignDate()>=this.tableData.showCount},replenishSign:function(){var t=s.SIGN_SUCCESS,e=0;if(this.canotSign())t=this.getSignState();else{var i=this.initData;i.replenishIndex<0?t=i.replenishIndex:(e=this.getReplenishMoney(),o.buy({why:"buy_sign",gold:e},function(e){0==e?(this.signAward(i.replenishIndex,!0),i.hasReplenishCount++,i.signList[i.replenishIndex]=1,i.replenishIndex=this.getReplenishIndex()):(a.EVENT_MESSAGEBOX("ungold"),a.EVENT_GOLD_SHOP({name:"dialog_gold_shop",owner:"dialog_thirty_days_box"}),t=s.RSIGN_LACKGOLD)}.bind(this)))}return l.isDebug&&l.log(c.field+".SignByDay.replenishSign.code: "+t+",money: "+e+","+JSON.stringify(this.initData)),t},signAward:function(e,i,n){var o=this.tableData.dayList[e+1],r=o.gift;t("UserLogic").award(r,"30SIGN"),a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:r,owner:"dialog_thirty_days_box"}),l.isDebug&&l.log(c.field+".SignByDay.signAward: "+JSON.stringify(o)),i||t("AchieveLogic").updateAchieve(s.ACHIEVE_16,1),t("AchieveLogic").updateAchieve(s.ACHIEVE_17,1),n&&n()},toString:function(){var t=this._super(),e=this.initData;return this.levNotEnougth()?t:(this.isSignEnd()||(t+=c._SP3_+e.startSignDate,t+=c._SP3_+e.hasReplenishCount),t)},savedDataToThis:function(){this._super();var t=this.savedData,e=this.initData;e.startSignDate=1*t[3],e.hasReplenishCount=0|t[4]},getSignEndLeftTime:function(){return-1}});e.exports=h,cc._RF.pop()},{AchieveLogic:"AchieveLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",SignByTimes:"SignByTimes",SignLogic:"SignLogic",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],SignByTimes:[function(t,e,i){cc._RF.push(e,"88a5838eA1HXor3FgWHxDUN","SignByTimes");var n=t("UserDataV2"),o=t("SignLogic"),a=t("GameTools"),s=t("GameCommon"),c=t("JsonMetaCache"),r=t("GameEvent"),l=(t("UserLogic"),t("n7")),h=cc.Class({properties:{tableData:null,initData:null},clear:function(){this.initData.startSignDate=this.getSvrTime(),this.initData.lastSignDate=0,this.initData.signList=[],this.initData.key&&(this.tableData=c.getAllSign()[this.initData.key][this.initData.id],this.initData.signList=o.binaryToArray(0,this.tableData.showCount)),this.initData.hasReplenishCount=0,this.initData.todayIndex=0,this.initData.replenishIndex=s.RSIGN_TODAYNOSIGN},__init:function(t,e,i){this.initData||(this.initData={},this.clear()),this.savedData=t,this.initData.key=e,this.tableData=i,this.savedDataToThis(),l.isDebug&&l.log(o.field+".SignByTimes.__init: "+this.initData.key+JSON.stringify(this.initData));var n=this.refreshSign();return this.checkLev(),n},checkLev:function(){if(1!=this.hasCheckLev){this.hasCheckLev=1;var t=this.savedData,e=this.tableData;return!this.levNotEnougth()||(r.on(r.EVENT_UDATA_CHG,function(i){var n=i.getUserData();if("lev"==n.n){var a=n.v;a>=e.openLv&&(this.__init(t,this.initData.key,e),r.off(this),o.save()),l.isDebug&&l.log(o.field+".SignByTimes.__init.level chg: "+a+","+e.openLv)}},this),l.isDebug&&l.log(o.field+".SignByTimes.__init.level not enough: "+e.openLv),!1)}},onDestroy:function(){r.off(this)},refreshSign:function(){var t=s.SIGN_SUCCESS,e=1;return this.canotSign()?t=this.getSignState():(e=this.refreshTodayIndex(),this.isThisRoundSignEnd()?this.finishSign():(t=this.checkCrossDay()?s.RFRESH_SUCCESS:s.RFRESH_FAILED,l.isDebug&&l.log(o.field+".SignByTimes.refreshSign: "+this.initData.key+JSON.stringify(this.initData)))),0==e?0:t},refreshTodayIndex:function(){var t=this.initData;return t.startSignDate||(t.startSignDate=this.getSvrTime()),t.todayIndex=this.getTodayIndex(),1},finishSign:function(){if(l.isDebug&&l.log(o.field+".SignByTimes.finishSign: "+this.initData.key+JSON.stringify(this.initData)),this.clear(),-1!=this.tableData.next){var t=[this.tableData.next,0,0],e=c.getAllSign()[this.initData.key][this.tableData.next];this.__init(t,this.initData.key,e)}else this.initData.lastSignDate=s.SIGN_END_STATUS;l.isDebug&&l.log(o.field+".SignByTimes.finishSignResult: "+this.initData.key+JSON.stringify(this.initData))},getSignData:function(){return this.initData},isSignEnd:function(){return this.initData.lastSignDate==s.SIGN_END_STATUS},levNotEnougth:function(){return n.geti("lev","user")<this.tableData.openLv},canotSign:function(){return this.isSignEnd()||this.levNotEnougth()},isThisRoundSignEnd:function(){if(this.getDisStartSignDate()>=this.tableData.showCount)return!0;var e=this.initData,i=this.tableData.dayList[e.todayIndex+1];return!(null!=t("SdkIns").instance().isPay())&&""!=i.payName||0!=e.todayIndex&&0!=e.signList.length&&e.todayIndex>=e.signList.length},isTodaySignd:function(){var t=this.initData;return 1==t.signList[t.todayIndex]},getSignState:function(){return this.isSignEnd()?s.SIGN_END:this.levNotEnougth()?s.SIGN_NOTSTART:this.isTodaySignd()?s.SIGN_HASSIGN:s.RSIGN_TODAYNOSIGN},sign:function(t,e){var i=s.SIGN_SUCCESS;if(this.canotSign())i=this.getSignState();else{var n=this.initData;this.isTodaySignd()?i=s.SIGN_HASSIGN:this.signAward(n.todayIndex,!1,function(){n.signList[n.todayIndex]=1,n.lastSignDate=this.getSvrTime(),this.refreshTodayIndex(),t&&t(i)}.bind(this),e)}return l.log(o.field+".SignByTimes.sign.code: "+i+","+JSON.stringify(this.initData)),i},replenishSign:function(){var t=s.RSIGN_NOSIGNCOUNT;return l.isDebug&&l.log(o.field+".SignByTimes.replenishSign.code: "+t+","+JSON.stringify(this.initData)),t},signAward:function(e,i,n,s){var c=this.tableData.dayList[e+1];if(""!=c.payName)t("UserLogic").pay(c.payName,function(t){n&&n()});else{var h=a.doubleAward(c.gift,s?2:1);t("GuideLogic").hasNextGuide()?r.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:h,owner:"s3"==this.initData.key?"dialog_newYear_sign":"dialog_seven_sign"}):(h.from="dialog_seven_sign",h.btnc=!0),t("UserLogic").award(h,"7SIGN"),n&&n()}l.isDebug&&l.log(o.field+".SignByTimes.signAward: "+JSON.stringify(c))},showOther:function(e){var i=e.slice();e.greentxt="battle_share.green1",e.title="battle_share.title3",e.info="battle_share.info3",e.ignore="battle_share.ignore1",t("GameEvent").EVENT_OPEN_DIALOG({name:"dialog_battle_share",param:{shareId:103,awd:e,callFunc:function(){delete i.from,delete i.btnc,i.title="ads_notice.ads3",t("UserLogic").award(i,"ADS"),r.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:i})},caller:this,close:!0,shareBtn:!0},owner:"s3"==this.initData.key?"dialog_newYear_sign":"dialog_seven_sign"})},getTodayIndex:function(){var t=this.initData.signList,e=void 0;for(e=0;e<t.length&&0!=t[e];e++);return 0==e||this.checkCrossDay()?e:e-1},toString:function(){var t=this.initData,e="";return e+=t.key+o._SP2_,this.levNotEnougth()?e:(this.isSignEnd()?(e+=t.id+o._SP3_,e+=t.lastSignDate):(e+=t.id+o._SP3_,e+=t.lastSignDate+o._SP3_,e+=o.arrayToBinary(t.signList)+o._SP3_,e+=t.startSignDate),e)},savedDataToThis:function(){var t=this.savedData,e=this.initData,i=this.tableData;e.id=t[0],e.lastSignDate=t[1]==s.SIGN_END_STATUS?t[1]:1*t[1],e.signList=o.binaryToArray(t[2],i.showCount),e.startSignDate=1*t[3]},getDisStartSignDate:function(){var t=this.initData,e=a.getDataformat("yyyyMMdd",(new Date(t.startSignDate)).getTime()),i=a.getDataformat("yyyyMMdd",(new Date(this.getSvrTime())).getTime());return a.dayDifference(e,i)},checkCrossDay:function(){var t=this.initData;return!!t.lastSignDate&&a.getDataformat("yyyyMMdd",(new Date(t.lastSignDate)).getTime())!=a.getDataformat("yyyyMMdd",(new Date(this.getSvrTime())).getTime())},getSvrTime:function(t){var e=o.getDelayed(),i=t||new Date(1E3*a.getCurtm(!0));return i.setDate(i.getDate()+e),i.getTime()},getNextSignLeftTime:function(){if(!this.isTodaySignd())return 0;var t=this.getSvrTime(),e=new Date(t);return e.setDate(e.getDate()+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()-t},getSignEndLeftTime:function(){var t=this.getSvrTime(),e=new Date(this.initData.startSignDate);return e.setDate(e.getDate()+this.tableData.showCount),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()-t},getTwoDaysDis:function(t,e){var i=a.getDataformat("yyyyMMdd",(new Date(t)).getTime()),n=a.getDataformat("yyyyMMdd",(new Date(e)).getTime());return a.dayDifference(i,n)}});e.exports=h,cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",SdkIns:"SdkIns",SignLogic:"SignLogic",UserDataV2:"UserDataV2",UserLogic:"UserLogic",n7:"n7"}],SignLogic:[function(t,e,i){cc._RF.push(e,"06bdeeVQ0VB6YTNspkocWuA","SignLogic");var n=t("JsonMetaCache"),o=(t("MathUtils"),t("UserDataV2")),a=t("StringBuilder"),s=t("GameCommon"),c=t("n7"),r=function e(){this.signDatas={},this.delayed=0,this.SignByTimes=t("SignByTimes"),this.SignByDay=t("SignByDay"),this.__init=function(t){t||(t=e._VER_);for(var i=(t=t.substring(1)).split(e._SP1_),a={},s=0;s<i.length;s++)if(i[s]){var c=i[s].split(e._SP2_);c&&c[1]&&(a[c[0]]=c[1].split(e._SP3_))}this.delayed=0|a.s;var r=n.getAllSign(),l=1;for(var h in r){var u=a[h];u||(u=[1,0,0]);var d=r[h][u[0]];if(d){var f=new (0,this[d.logic]);l=f.__init(u,h,d)&&l,this.signDatas[h]=f}}0==l&&o.nsave(e.field)},this.getSignData=function(t){return this.signDatas[t].getSignData()},this.getSignState=function(t){return this.signDatas[t].getSignState()},this.sign=function(e,i,n){n!=s.NEWYEAR_SIGN?n?t("ShareLogic").checkShare(10,null,function(n){var o=!1;n&&n.dt&&0==n.dt.code&&(o=!0),(o||t("GuideLogic").hasNextGuide())&&this._sign(e,i,o)},this):this._sign(e,i,!1):t("ShareLogic").showAndWatchOrShare(108,null,function(t){t&&t.dt&&0==t.dt.code&&this._sign(e,i,!1)},this)},this._sign=function(t,i,n){var a={};this.signDatas[t].sign(function(n){n==s.SIGN_SUCCESS&&(o.nsave(e.field),a.data=this.getSignData(t)),a.code=n,i&&i(a)}.bind(this),n)},this.replenishSign=function(t){var i={},n=this.signDatas[t].replenishSign();return n==s.SIGN_SUCCESS&&(o.nsave(e.field),i.data=this.getSignData(t)),i.code=n,i},this.getReplenishMoney=function(t){return this.signDatas[t].getReplenishMoney()},this.refreshSign=function(t){var i={},n=this.signDatas[t].refreshSign();return n==s.SIGN_SUCCESS&&o.nsave(e.field),i.code=n,i.data=this.getSignData(t),i},this.getNextSignLeftTime=function(t){return this.signDatas[t].getNextSignLeftTime()},this.getSignEndLeftTime=function(t){return this.signDatas[t].getSignEndLeftTime()},this.toString=function(){var t=new a(e._SP1_);for(var i in this.signDatas)t.Append(this.signDatas[i].toString());return e._VER_+t.toString()+e._SP1_+"s\x3d"+this.delayed},this.testDelayed=function(t){for(var i in 0==t?(this.delayed=0,this.signDatas={},this.__init("")):this.delayed=t,this.signDatas)this.signDatas[i].refreshSign();o.nsave(e.field)}};e.exports=r,r.field="sign",r._VER_="A",r._SP1_="|",r._SP2_="\x3d",r._SP3_=":",r.init=function(t){var e=o._set_(r.field,new r);c.isDebug&&c.log(r.field+".SignLogic.init:"+t),e.__init(t)},r.save=function(){o.nsave(r.field)},r.getSignState=function(t){var e=o.get(r.field);return e&&e.getSignState(t)},r.sign=function(t,e,i){var n=o.get(r.field);return n&&n.sign(t,e,i)},r.replenishSign=function(t){var e=o.get(r.field);return e&&e.replenishSign(t)},r.getReplenishMoney=function(t){var e=o.get(r.field);return e&&e.getReplenishMoney(t)},r.refreshSign=function(t){var e=o.get(r.field);return e&&e.refreshSign(t)},r.getNextSignLeftTime=function(t){var e=o.get(r.field);return e&&e.getNextSignLeftTime(t)},r.getSignEndLeftTime=function(t){var e=o.get(r.field);return e&&e.getSignEndLeftTime(t)},r.testDelayed=function(t){var e=o.get(r.field);return e&&e.testDelayed(t)},r.getDelayed=function(){return o.get(r.field).delayed},r.arrayToBinary=function(t){for(var e=0,i=t.length-1,n=0;n<=i;n++){var o=Math.pow(2,n);1==t[n]&&(e|=o)}return e},r.binaryToArray=function(t,e){var i=[];e--;for(var n=0;n<=e;n++){var o=Math.pow(2,n);i[n]=(t&o)==o?1:0}return i},cc._RF.pop()},{GameCommon:"GameCommon",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",ShareLogic:"ShareLogic",SignByDay:"SignByDay",SignByTimes:"SignByTimes",StringBuilder:"StringBuilder",UserDataV2:"UserDataV2",n7:"n7"}],SpawSprite:[function(t,e,i){cc._RF.push(e,"a447f4nMZNII782ndQq7HJS","SpawSprite"),cc.Class({"extends":cc.Component,properties:{spriteFrameOld:{type:cc.SpriteFrame,"default":null,notify:function(){this.findOld()}},spriteFrame:{type:cc.SpriteFrame,"default":null},allChildren:!0,spawFrame:{"default":!1,notify:function(){this.spaw&&this.doSpaw()}},atlas:{type:cc.SpriteAtlas,"default":null,notify:function(){null!=this.atlas&&(cc.log("this.atlas._textureFilename:"+JSON.stringify(this.atlas)),this.findAtlas(this.node,this.node.name))}}},start:function(){this.findOld()},findOld:function(){var t=this.spriteFrameOld;this.list=[],t&&(cc.log("find start "+t._uuid),this.find(this.node,this.node.name,t),this.spaw=!1)},find:function(t,e,i){var n=t.getComponent(cc.Sprite);for(var o in n&&n.spriteFrame&&n.spriteFrame._uuid==i._uuid&&(this.list.push({path:e,node:t}),cc.log("find "+e),this.spriteFrame&&(n.spriteFrame=this.spriteFrame)),t.children){var a=t.children[o];a&&this.find(a,e+"/"+(a.name||"new node"),i)}},findAtlas:function(t,e){var i=t.getComponent(cc.Sprite);if(i&&i.spriteFrame)for(var n in this.atlas._spriteFrames)this.atlas._spriteFrames[n]._uuid==i.spriteFrame._uuid&&cc.log("find "+e);for(var o in t.children){var a=t.children[o];a&&this.findAtlas(a,e+"/"+(a.name||"new node"))}},doSpaw:function(){}}),cc._RF.pop()},{}],SpriteFrameSet:[function(t,e,i){cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=n,cc._RF.pop()},{}],StringBuilder:[function(require,module,exports){function StringBuilder(){if(this._buffers=[],this._length=0,this._splitChar=arguments.length>0?arguments[arguments.length-1]:"",arguments.length>0)for(var t=0,e=arguments.length-1;t<e;t++)this.Append(arguments[t])}cc._RF.push(module,"7f6a6eeVWVESZmxQZShivGv","StringBuilder"),StringBuilder.prototype.Append=function(t){return t=""+t,this._length+=t.length,this._buffers[this._buffers.length]=t,this},StringBuilder.prototype.Add=StringBuilder.prototype.Append,StringBuilder.prototype.AppendFormat=function(){if(arguments.length>1){var TString=arguments[0];if(arguments[1]instanceof Array)for(var i=0,iLen=arguments[1].length;i<iLen;i++){var jIndex=i,re=eval("/\\{"+jIndex+"\\}/g;");TString=TString.replace(re,arguments[1][i])}else for(var _i=1,_iLen=arguments.length;_i<_iLen;_i++){var _jIndex=_i-1,_re=eval("/\\{"+_jIndex+"\\}/g;");TString=TString.replace(_re,arguments[_i])}this.Append(TString)}else 1==arguments.length&&this.Append(arguments[0])},StringBuilder.prototype.Length=function(){return this._splitChar.length>0&&!this.IsEmpty()?this._length+this._splitChar.length*(this._buffers.length-1):this._length},StringBuilder.prototype.IsEmpty=function(){return this._buffers.length<=0},StringBuilder.prototype.Clear=function(){this._buffers=[],this._length=0},StringBuilder.prototype.ToString=function(){return 1==arguments.length?this._buffers.join(arguments[1]):this._buffers.join(this._splitChar)},StringBuilder.prototype.toString=StringBuilder.prototype.ToString,module.exports=StringBuilder,cc._RF.pop()},{}],StringUtils:[function(t,e,i){cc._RF.push(e,"50713FPcJtENqWYOl8p3fSc","StringUtils");var n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)},o=function(){};o.commandParse=function(t){var e=t.match(/\w+/g),i=t.indexOf("."),n=e[0],o=null;return i>0?(o=e[0],n=e[1],e.shift(),e.shift()):e.shift(),{mod:o,fun:n,params:e}},o.getFileName=function(t){var e=t.lastIndexOf("/")+1,i=t.lastIndexOf(".");return t.substring(e,i)},o.convertVec2=function(t){return(t=t.split(",")).length<=1?cc.p(parseFloat(t),0):cc.p(parseFloat(t[0]),parseFloat(t[1]))},o.strToArrayInt=function(t,e){void 0===e&&(e=","),t=t.split(e);var i=[];for(var n in t)i.push(parseInt(t[n]));return i},o.strToArrayFloat=function(t,e){void 0===e&&(e=","),t=t.split(e);var i=[];for(var n in t)i.push(parseFloat(t[n]));return i},o.formatStr=function(t){if(arguments.length<=1)return t;for(var e=1,i=0;e<arguments.length;e++,i++)t=t.replace("{"+i+"}",arguments[e]);return t},o.replaceFill=function(t,e){var i=e.toString().length,n=t.length,o=t[0];return n>i?Array(n-i+1).join(o)+e:e},o.replace=function(t,e,i){return t.replace(new RegExp(e,"gm"),i)},o.atois=function(t,e){for(var i=t.split(e),n=0;n<i.length;n++)i[n]=parseInt(i[n]);return i},o.toJson=function(t){if(!t||t.length<2)return null;t=o.replace(t,"'",'"');var e=JSON.parse(t);for(var i in e){var n=e[i];"string"==typeof n&&n.indexOf(",")>0&&(n=o.atois(e[i],",")),e[i]=n}return e},o.toKeyValue=function(t){if(!t||t.length<2)return null;for(var e=t.split(";"),i={},n=void 0,a=void 0,s=0;s<e.length;s++)if(!((n=e[s].split("\x3d")).length<2)){if((a=n[1]).length<1)a=1;else switch(a.charAt(0)){case "[":a=a.substring(1,a.length-1),a=o.atois(a,",");break;case "@":break;case "!":a=a.substring(1);break;default:a*=1}i[n[0]]=a}return i},o.trim=function(t){return t.replace(/\s/g,"")},o.encode=function(t){var e=t;return"object"==(void 0===t?"undefined":n(t))&&(e=JSON.stringify(t)),encodeURIComponent(e)},o.objtos=function(t){var e="";for(var i in t)e=i+"\x3d"+t[i]+",";return e.substr(0,e.length-1)},o.uuid=function(t,e){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],o=void 0;if(e=e||i.length,t)for(o=0;o<t;o++)n[o]=i[0|Math.random()*e];else{var a=void 0;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",o=0;o<36;o++)n[o]||(a=0|16*Math.random(),n[o]=i[19==o?3&a|8:a])}return n.join("")},o.cut=function(t,e){if(!t)return"";for(var i=void 0,n=0;n<t.length;n++)if((e-=(i=t.charCodeAt(n))>127||94==i?2:1)<=0)return t.substr(0,n+(0==e?1:0))+"...";return t},o.strlen=function(t){if(!t)return"";for(var e=void 0,i=0,n=0;n<t.length;n++)i+=(e=t.charCodeAt(n))>127||94==e?2:1;return i},o.isStr=function(t){return"[object String]"===Object.prototype.toString.call(t)},o.encryptAnddecrypt=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e||e.length<1)return t;1==i&&(t+=".yi");for(var n=e.charCodeAt(0)%7,o="",a=void 0,s=0;s<t.length;s++)a=t.charCodeAt(s)+n*i,o+=String.fromCharCode(a),(n+=1)>6&&(n=2);return o},o.encrypt=function(t,e,i){if(!t||!e)return null;if(t.length<3)return null;for(var n=t+i,o=e.length,a=n.length,s=n.split(""),c=void 0,r=0;r<a;r++){if(c=e.charCodeAt(r%o)%a,s[r].charCodeAt()>128||s[c].charCodeAt()>128)return null;var l=[s[c],s[r]];s[r]=l[0],s[c]=l[1]}return s.join("")},o.atos=function(t){var e="";for(var i in t)e+=t[i];return e},o.findToEnd=function(t,e,i,n){for(var o=0;e<t.length;e++)if(t[e]!=i){if(t[e]==n&&0==--o)break}else o++;return e},o._clearDouble=function(t){return parseInt(100*t)/100},o.jeval_toint=function(t){var e=o.jeval(t);return parseInt(e+.5)},o.jeval=function(t){var e=t.indexOf("(");if(e>=0){var i=o.findToEnd(t,e,"(",")"),n=t.substring(0,e)+o.jeval(t.substring(e+1,i))+(i+1>=t.length?"":t.substring(i+1));return o.jeval(n)}for(var a=new function(t){var e=0,i=[],n=t;this.pushNum=function(){var t=this.getNum();return 0!=t&&(i.push(t),!0)},this.isEnd=function(){return e>=n.length},this.putChar=function(){return n[e++]},this.getNum=function(){for(var t=e,i=!1,a=n[t];"-"==a||"+"==a;)"-"==a&&(i=!i),a=n[++t];for(var s=[];t<n.length&&("."==(a=n[t])||!(a<"0"||a>"9"));t++)s.push(a);return!(s.length<1)&&(e=t,o._clearDouble(o.atos(s)*(i?-1:1)))},this.calcToPrv=function(t){var e=i.length;if(e<1)return!1;var n=i[e-1],o=this.getNum();switch(t){case "*":i[e-1]=n*o;break;case "/":i[e-1]=n/o}return!0},this.toValue=function(){var t=0;for(var e in i)t+=i[e];return t}}(t),s=0;!a.isEnd();){for(;a.pushNum(););if(a.isEnd())break;if("*"==(s=a.putChar())||"/"==s)a.calcToPrv(s);else if(";"==s)break}return a.toValue()},o.test_encryptAnddecrypt=function(t,e){this.test_compare(decodeURIComponent(t),e),this.test_compare(t,e)},o.test_compare=function(t,e){var i=o.encryptAnddecrypt(t,e,1),n=o.encryptAnddecrypt(i,e,-1);t!=n?console.log("test_compare failed: str: "+t+",afterEncrypt: "+i+",afterDecrypt: "+n):console.log("test_compare success: str: "+t+",afterEncrypt: "+i+",afterDecrypt: "+n)},o.encryptAnddecrypt=function(t,e,i){if(!e||e.length<1)return t;var n=e.charCodeAt(0),o=e.charCodeAt(e.length-1);if(n>o){var a=n;n=o,o=a}for(var s=n,c="",r=1,l=void 0,h=0;h<t.length;h++)l=t.charCodeAt(h)+s*i,c+=String.fromCharCode(l),(s+=r)>=o&&(r=-1),s<=n&&(r=1);return c},o.versionCompare=function(t,e){cc.log("StringUtils versionCompare: version A is "+t+", version B is "+e);for(var i=t.split("."),n=e.split("."),o=0;o<i.length;++o){var a=parseInt(i[o]),s=parseInt(n[o]||0);if(a!==s)return a-s}return n.length>i.length?-1:0},e.exports=o,cc._RF.pop()},{}],TDLog:[function(t,e,i){cc._RF.push(e,"39f8flXz6RNYacb17n/Z8ys","TDLog");var n=t("n7"),o=function(){};e.exports=o,o._OPEN_=!0,o._DEBUG_=!0;var a=function(){if(!n._log_engine_){var e=t("FBLog");n._log_engine_=new e}return n._log_engine_};o.login=function(t,e,i,n){if(o._OPEN_){t=n+"_"+t;var s=a();s&&s.login(t,e,i,n)}},o.levelup=function(t){if(o._OPEN_){var e=a();e&&e.setLevel(t)}},o.reward=function(t,e,i){if(o._OPEN_){var n=a();n&&n.onReward(t,e,i)}},o.mission=function(t,e,i){if(o._OPEN_){parseInt(t/10);var s=a(),c=void 0;if(s)switch(t%10){case 0:c="begin",s.onMissionBegin(e,i);break;case 1:c="completed",s.onMissionCompleted(e,i);break;case 2:c="failed",s.onMissionFailed(e,i)}o._DEBUG_&&n.log("tdga mission:"+c+":"+e)}};var s=[];o.Event=function(t,e){o.fEvent(t,e)},o.update=function(){if(o._OPEN_&&!(s.length<=0)){var t=s.shift(),e=t.key,i=t.param;o.fEvent(e,i)}},o.guide=function(t){o._OPEN_&&(o._DEBUG_&&n.log("tdga guide:"+t),o.Event("guide",{guide:"g"+t}))},o.fEvent=function(t,e){if(o._OPEN_){o._DEBUG_&&n.log("tdga event:"+t+","+JSON.stringify(e));var i=a();i&&i.onEvent(t,e)}},o.purchase=function(t,e,i){if(o._OPEN_){var n=a();n&&n.onItemPurchase(t,e,i)}},o.useItem=function(t,e,i){if(o._OPEN_){var n=a();n&&n.onItemUse(t,e,i)}},o.pay_cr_orderid=function(t){o._OPEN_&&(o._DEBUG_&&n.log("tdga onChargeRequest:"+JSON.stringify(t)),t.itemFee?t.itemFee:t.price)},o.pay_done=function(t){o._OPEN_&&o._DEBUG_&&n.log("tdga onChargeSuccess:"+t.orderid+","+t.msg)},cc._RF.pop()},{FBLog:"FBLog",n7:"n7"}],TalkDataLog:[function(t,e,i){cc._RF.push(e,"a709fzX5b5FVb8JKQtSXKPV","TalkDataLog");var n=t("n7"),o=cc.Class({login:function(t,e,i,o){n.isDebug&&n.log("tdga login:"+t+","+e+","+i+","+o),n.window.TDGA&&n.window.TDGA.Account({accountId:t,level:i,accountType:o,accountName:e,gameServer:o})},setLevel:function(t){n.isDebug&&n.log("tdga levelup "+t);var e=n.window.TDGA;e&&e.Account&&e.Account.setLevel(t)},onReward:function(t,e,i){n.isDebug&&n.log("tdga reward "+t+","+e+","+i),n.window.TDGA&&n.window.TDGA.onReward(t,i)},onMissionBegin:function(t,e){n.isDebug&&n.log("tdga onMissionBegin "+t+","+e),n.window.TDGA&&n.window.TDGA.onMissionBegin(t)},onMissionCompleted:function(t,e){n.isDebug&&n.log("tdga onMissionCompleted "+t+","+e),n.window.TDGA&&n.window.TDGA.onMissionCompleted(t)},onMissionFailed:function(t,e){n.isDebug&&n.log("tdga onMissionFailed "+t+","+e),n.window.TDGA&&n.window.TDGA.onMissionFailed(t,e)},onEvent:function(t,e){n.isDebug&&n.log("tdga Event "+t+":"+JSON.stringify(e)),n.window.TDGA&&n.window.TDGA.onEvent(t,e)},onItemPurchase:function(t,e,i){n.isDebug&&n.log("tdga purchase "+t+","+e+","+i);var o={item:t,itemNumber:e,cu:i};n.window.TDGA&&n.window.TDGA.onItemPurchase(o)},onItemUse:function(t,e,i){n.isDebug&&n.log("tdga useItem "+e+","+i);var o={item:e,itemNumber:1};n.window.TDGA&&n.window.TDGA.onItemUse(o)}});e.exports=o,cc._RF.pop()},{n7:"n7"}],UIAchieveItem:[function(t,e,i){cc._RF.push(e,"b638eLsz1ND0JOfhv9TJJ+O","UIAchieveItem"),t("n7");var n=t("GameTools"),o=t("JsonMetaCache");cc.Class({"extends":cc.Component,properties:{btn:{type:cc.Node,"default":null},bk:{type:cc.Sprite,"default":null},btnBk:{type:cc.Sprite,"default":null},btnLab:{type:cc.Label,"default":null},icon:{type:cc.Node,"default":null},awardList:{type:cc.Node,"default":null},award_temp:{type:cc.Node,"default":null},btnBK_temp:[cc.SpriteFrame],bk_temp:[cc.SpriteFrame]},onLoad:function(){this.initUI()},start:function(){},initUI:function(){this.awardIdx=0;var t=this.node;if(!this.jpros){var e=n.chd(t,"box/progresskong");this.jpros=e.getComponent("JProgressBar")}!this.labName&&(this.labName=n.cmpt(t,"top/top_name",cc.Label)),!this.labDesc&&(this.labDesc=n.cmpt(t,"box/lab",cc.Label)),!this.labPG&&(this.labPG=n.cmpt(t,"box/progresskong/num",cc.Label))},setState:function(t){this.finish=t;var e=t?0:1;this.btnBk.spriteFrame=this.btnBK_temp[e],this.bk.spriteFrame=this.bk_temp[e],this.btnLab.string=n.i18ns(t?"receive":"goto")},setData:function(t,e,i){this.id=t,this.data=i,this.labName.string=n.i18ns("achieve_list."+i.type),this.labDesc.string=n.i18ns("achieve_list.info"+i.type,[i.tar]),this.labPG.string=e+"/"+i.tar,this.jpros.progress(0,e,i.tar),this.setAward(i.award)},addAward:function(t,e){var i=null;this.awardIdx<this.awardList.children.length?(i=this.awardList.children[this.awardIdx++]).active=!0:(i=cc.instantiate(this.award_temp)).parent=this.awardList;var a=o.itemn(t);n.imgs(i,a.icon,"icon/icon"),n.cmpt(i,"num",cc.Label).string="x"+n.kmb(e)},setAward:function(t){for(var e=0;e<this.awardList.children.length;e++)this.awardList.children[e].active=!1;for(var i in this.awardIdx=0,t){var n=t[i];this.addAward(n.k,n.v)}}}),cc._RF.pop()},{GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",n7:"n7"}],UIAchieve:[function(t,e,i){cc._RF.push(e,"07c27zhoGNHmbYJ+FSyJhIy","UIAchieve");var n=t("GameTools"),o=t("UserLogic"),a=t("GameEvent"),s=t("AchieveLogic"),c=t("ShareLogic"),r=(t("GameCommon"),cc.Class({"extends":t("UIDialog"),properties:{item:{"default":null,type:cc.Node},layer:{"default":null,type:cc.Node},help:{"default":null,type:cc.Node},mask:{"default":null,type:cc.Node}},statics:{removeOnce:!1},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btnc(this.help,null,n.makef(this.OpenHelp,this),1),this.layer.parent.on("scroll-to-bottom",function(){this.showedList()},this),this.allItemObj={}},showed:function(t){this.refreshData(),this.scheduleOnce(this.showedList,0),n.cmpt(this.node,"center/concent",cc.ScrollView).scrollToTop(0)},refreshData:function(){r.removeOnce&&0!=this.layer.children.length&&this.layer.removeAllChildren();var t=s.getAllAchieveSorted(),e=[],i=[];for(var n in t){var o=t[n];o.status==s.STATUS_FINISH?e.push(o):o.status==s.STATUS_PROCESS&&i.push(o)}var a=c.getAllShareAchieve();for(var l in a){var h=a[l];h.status==s.STATUS_FINISH?e.push(h):h.status==s.STATUS_PROCESS&&i.unshift(h)}this.allList=e.concat(i),this.curIdx=0,this.gotoIdx=0},showedList:function(){var t=this.allList.length;this.gotoIdx>=t||(this.gotoIdx=this.curIdx+5,this.gotoIdx>=this.allList.length&&(this.gotoIdx=t))},OpenHelp:function(){a.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_achieve",param:{text:"achievetRule"}})},OpenBtn:function(t){var e=this.isShareAchieve(t.data);t.finish?(this.Resume=t.node,e?c.getShareAchieveAward(t.data.id):s.getAward(t.id),this.dialogResume()):e?c.checkShare(t.data.shareId,null,function(){this.refreshData(),this.showedList()},this):a.EVENT_OPEN_DIALOG({name:"dialog_gateEntrance",param:{lv:o.geti("lev")}})},closeDialog:function(){this._super(),this.Resume&&(this.Resume.setPositionX(0),this.Resume.stopAllActions())},dialogResume:function(){if(this.Resume){var t=this,e=cc.moveBy(.5,cc.v2(1080,0));this.Resume.runAction(e),this.scheduleOnce(function(){r.removeOnce?t.layer.removeChild(t.Resume):t.Resume.setPositionX(0),t.Resume=null,t.refreshData(),t.showedList(),n.cmpt(this.node,"center/concent",cc.ScrollView).scrollToTop(.5)},.6),a.EVENT_DIALOG_SHOWED(this)}},exhibition:function(e,i){for(var o=0;o<i;o++,e++){var a=this.allItemObj[e],c=!1;a||((a=cc.instantiate(this.item)).active=!0,a.parent=this.layer,r.removeOnce||(this.allItemObj[e]=a),c=!0);var l=a.getComponent("UIAchieveItem");c&&n.btn(l.btn,n.makef(this.OpenBtn,this,l),1);var h=this.allList[e],u=h.status==s.STATUS_FINISH;u&&0==o&&(a.name="first");var d=this.isShareAchieve(h)?h:t("JsonMetaCache").getAllAchieve()[h.id];l.setState(u),l.setData(h.id,h.count,d)}},isShareAchieve:function(t){return null!=t.shareId},onUiFlyInEnd:function(t){a.EVENT_DIALOG_SHOWED(this)},update:function(){this.curIdx>=this.gotoIdx||this.exhibition(this.curIdx++,1)},onDestroy:function(){this.allItemObj={},this.allList=[],this.Resume=null,a.off(this)}}));cc._RF.pop()},{AchieveLogic:"AchieveLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIActiveOpenDialog:[function(t,e,i){cc._RF.push(e,"d4e9dkLowRNPqRvON3balo2","UIActiveOpenDialog");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic");cc.Class({"extends":t("UIDialog"),properties:{timen:{"default":null,type:cc.Node},btn_help:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btnc(this.content,"btn_play",n.makef(this.gotoDialog,this),1),n.btn(this.btn_help,n.makef(this.openHelp,this),1)},showed:function(){var e=t("ActivityLogic").get("chp"),i=0;e&&e.start_tm&&(i=n.getTmrByDay(e.start_tm,e.day,!0)),n.cd2(this.timen,"label",parseInt(i/1E3),n.makef(function(){},this),1)},gotoDialog:function(){o.EVENT_OPEN_DIALOG({name:"dialog_gateEntrance",param:{lv:a.geti("lev")}})},openHelp:function(){o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_active_open",param:{text:"tournamentRule"}})},onUiFlyInEnd:function(t){o.EVENT_DIALOG_SHOWED(this)}}),cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameEvent:"GameEvent",GameTools:"GameTools",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIAddDesktop:[function(t,e,i){cc._RF.push(e,"200d8cuxYBOu4U4ZK04btrJ","UIAddDesktop");var n=t("GameTools"),o=t("SdkIns"),a=t("GameEvent"),s=t("WorkData"),c=t("UserLogic"),r=t("GameCommon"),l=t("UIFlyGold"),h=t("UIGameComplete");cc.Class({"extends":t("UIDialog"),properties:{btn_add:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_add,n.makef(this.addDesktop,this),1)},showed:function(){},addDesktop:function(){var t=o.instance(),e=this;t.canPushIcon()&&t.pushIcon(function(t){e.closeDialog();var i=!t||t.code?"add_desktop.no":"add_desktop.ok";if(a.EVENT_MESSAGEBOX(i),!t.code&&0==s.get(s.WKD_ADD_DESKTOP)){s.set(s.WKD_ADD_DESKTOP,1);var n=r.ADD_DESKTOP_AWD;c.award(n,"ADD_DESKTOP"),(new l).__showed({name:n.k,posn:h.node(),count:n.v}),e.flyIcon()}})},flyIcon:function(){var e=t("UIMainV2").instance();e.btn_desktop_c.active=!0;var i=e.btn_desktop,o=cc.instantiate(n.chd(i,"icon"));o.parent=i,o.scale=2,e.openMenu(),e.scheduleOnce(function(){(new l).__showed({ton:e.btn_desktop_c,posn:o,fo:function(){i.active=!1}})},.1)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",SdkIns:"SdkIns",UIDialog:"UIDialog",UIFlyGold:"UIFlyGold",UIGameComplete:"UIGameComplete",UIMainV2:"UIMainV2",UserLogic:"UserLogic",WorkData:"WorkData"}],UIAddStep:[function(t,e,i){cc._RF.push(e,"18f38UdavpJT4cYafaBsS0h","UIAddStep"),t("GameCommon"),cc.Class({"extends":cc.Component,properties:{num:{"default":null,type:cc.Node}},onLoad:function(){},start:function(){},init:function(t){GameTools.text(this.num,void 0,0|t)}}),cc._RF.pop()},{GameCommon:"GameCommon"}],UIAddingSteps:[function(t,e,i){cc._RF.push(e,"fa6eezGL3xIg4wnf74+Pc19","UIAddingSteps");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("UIGameV2"),c=t("GameCommon"),r=t("ItemsLogic"),l=t("N7Sound"),h=t("ShareLogic"),u=t("JsonMetaCache");cc.Class({"extends":t("UIDialog"),properties:{propn:{"default":null,type:cc.Node},btn_keep:{"default":null,type:cc.Node},btn_ads:{"default":null,type:cc.Node},btn_exitgame:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){this.btn_ads.clickPath="btn",n.btn(this.btn_keep,n.makef(this.keepPlaying,this),1),n.btn(this.btn_exitgame,n.makef(this.exitGame,this),1)},showed:function(e){t("N7MusicV2").switchVol(0),l.playSound(90105),this.is_touch=!1,this.count=e;var i=r.get("AddStep")>0&&!e;if(this.steps=5*(e<4?1:e-2),n.text(this.propn,"step/num","+"+this.steps),!i){var o;e+1>c.buy5step.length&&(e=c.buy5step.length-1),o=c.buy5step[e],this.needg=o.gold,o.item&&(this.awd=o.item)}var a=0;for(var s in this.awd){var d=n.show(this.propn,"prop"+ ++a),f=u.itemn(s);f&&n.imgs(d,f.icon,"icon")}n.textp(this.content,"lab_info",e?"add_step.info2":"add_step.info1",[this.steps,a]),n.sh(this.btn_keep,"p/gold",!i),n.sh(this.btn_keep,"p/item",i),n.text(this.btn_keep,"p/num",i?1:this.needg),h.showAndWatch(101,this.btn_ads,this.watchSuccess,this)},watchSuccess:function(t){var e=t?t.dt:null;e&&0==e.code&&this.flyToStep(0,this.btn_ads)},exitGame:function(){this.is_touch||(t("ActivityLogic").canAssaultNotice()?o.EVENT_OPEN_DIALOG({name:"dialog_assault_notice",param:{keep:1,needg:this.needg,count:this.count,steps:this.steps,awd:this.awd,funcClose:this.realExitGame,funcLeave:this.keepPlaying,flyToStep:this.flyToStep}}):(o.EVENT_GAME_EXIT(),this.closeDialog()))},realExitGame:function(){o.EVENT_GAME_EXIT()},keepPlaying:function(){if(!this.is_touch){this.is_touch=!0;var t=this;r.get("AddStep")>0&&!this.count?(r.sub("AddStep",1,"battle_"+a.geti("lev")),t.flyToStep()):a.buy({gold:this.needg,why:"buystep"},function(e){0==e?t.flyToStep():(t.is_touch=!1,o.EVENT_MESSAGEBOX("ungold"),o.EVENT_GOLD_SHOP({name:"dialog_gold_shop",owner:"dialog_adding_steps"}))}),s.instance().chgStepCnt()}},flyToStep:function(e,i){void 0==e&&(e=this.count);var n=s.instance().topbar,a={step:this.steps};e&&(a.item=this.awd),null==i&&(i=this.btn_keep,t("AchieveLogic").updateAchieve(c.ACHIEVE_22,1)),n.flyToStep(i,function(){o.EVENT_GAME_BUYED5STEP(a),this.closeDialog()},this)},playCloseDialog:function(){var t=this.node.getComponent(cc.Animation);t&&t.play("anim_step_go")}}),cc._RF.pop()},{AchieveLogic:"AchieveLogic",ActivityLogic:"ActivityLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",N7MusicV2:"N7MusicV2",N7Sound:"N7Sound",ShareLogic:"ShareLogic",UIDialog:"UIDialog",UIGameV2:"UIGameV2",UserLogic:"UserLogic"}],UIAdsItem:[function(t,e,i){cc._RF.push(e,"dd611HnUqNN/ancTiIxT0KU","UIAdsItem");var n=t("GameTools"),o=t("ShareLogic"),a=t("GameCommon"),s=t("GameLogic"),c=t("GameEvent");cc.Class({"extends":cc.Component,properties:{btn_ads:{type:cc.Node,"default":null},lab_des:{type:cc.Node,"default":null},cd:{type:cc.Node,"default":null}},onLoad:function(){this.initUI()},start:function(){},initUI:function(){c.on(c.EVENT_ADS_CHG,function(t){this.refresh()},this)},showed:function(){this.refresh(),o.showAndWatch(100,this.btn_ads,function(){this.refresh()},this)},refresh:function(){var t=o.getAdState(100);switch(this.btn_ads.active=t==a.SHARE_AD_0,this.cd.active=t>0,t){case a.SHARE_AD_0:n.textp(this.lab_des,"","ads_notice.watch");break;case a.SHARE_AD_NO:n.textp(this.lab_des,"","ads_notice.no1");break;default:n.textp(this.lab_des,"","ads_notice.next"),n.cd2(this.cd,null,t,n.makef(function(){this.refresh()},this),1)}s.refreshAdsTips()}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",ShareLogic:"ShareLogic"}],UIAds:[function(t,e,i){cc._RF.push(e,"83100fa8aZMq6VCuajypSY/","UIAds");var n=t("GameTools"),o=t("GameEvent"),a=t("ShareLogic"),s=t("GameCommon"),c=t("GameLogic"),r=t("JsonMetaCache");cc.Class({"extends":t("UIDialog"),properties:{btn_ads:{type:cc.Node,"default":null},lab_des:{type:cc.Node,"default":null},cd:{type:cc.Node,"default":null},btn_no:{type:cc.Node,"default":null},items:{type:cc.Node,"default":null}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){o.on(o.EVENT_ADS_CHG,function(t){this.refresh()},this)},showed:function(){this.refresh(),a.showAndWatch(100,this.btn_ads,function(){this.refresh()},this)},refresh:function(){var t=a.getAdState(100);this.btn_ads.active=t==s.SHARE_AD_0,this.btn_no.active=t<0,this.cd.parent.active=t>0;var e=null;switch(t>=0&&(e=a.instance().getWatchOrShare(100).award),this.initAwd(e),t<0&&n.textp(this.btn_no,"label","ads_notice.err"+t),t){case s.SHARE_AD_0:n.textp(this.lab_des,"","ads_notice.watch");break;case s.SHARE_AD_NO:n.textp(this.lab_des,"","ads_notice.no1");break;default:n.textp(this.lab_des,"","ads_notice.next"),n.cd2(this.cd,null,t,n.makef(function(){this.refresh()},this),1)}c.refreshAdsTips()},initAwd:function(t){for(var e=0;e<this.items.childrenCount;e++){var i=t&&t[e],o=n.sh(this.items,"item"+e,i);if(!i)return;var a=r.itemn(i.k);n.imgs(o,a.icon,"icon"),n.text(o,"num",i.v)}}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog"}],UIAssaultNotice:[function(t,e,i){cc._RF.push(e,"b863fCGNKtPLaf2lEgKS7Hh","UIAssaultNotice");var n=t("GameTools"),o=(t("GameEvent"),t("UserLogic"),t("ItemsLogic"));cc.Class({"extends":t("UIDialog"),properties:{btn_leave:{"default":null,type:cc.Node},btn_keep:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_leave,n.makef(this.leaveGame,this),1),n.btn(this.btn_keep,n.makef(this.continueGame,this),1)},showed:function(t){if(this.is_touch=!1,this.funcClose=t.funcClose,this.funcLeave=t.funcLeave,this.flyToStep=this.getFlyToStep(t.flyToStep),this.btn_leave.active=t.leave,this.btn_keep.active=t.keep,this.count=t.count,this.needg=t.needg,this.steps=t.steps,this.awd=t.awd,this.btn_keep.active){var e=o.get("AddStep")>0;n.sh(this.btn_keep,"p/gold",!e),n.sh(this.btn_keep,"p/item",e),n.text(this.btn_keep,"p/num",e?1:this.needg)}},getFlyToStep:function(t){return function(){null!=t&&(this.funcClose=null,t.call(this))}},closeDialog:function(){null!=this.funcClose?(this.funcClose.call(this),this.funcClose=null):this._super()},leaveGame:function(){this.is_touch||(this.funcLeave&&this.funcLeave.call(this),this.funcLeave=null,this.is_touch=!0)},continueGame:function(){this.is_touch||(this.funcLeave&&this.funcLeave.call(this),this.funcLeave=null,this.is_touch=!0)},touchBackground:function(){this.closeDialog()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIAssault:[function(t,e,i){cc._RF.push(e,"8421egVCpJK0KdwKjDcBjIf","UIAssault");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("JsonMetaCache"),c=t("ActivityLogic");cc.Class({"extends":t("UIDialog"),properties:{guangList:{type:cc.Node,"default":[]},itemsList:{type:cc.Node,"default":[]},dialogAtlas:{type:cc.SpriteAtlas,"default":null},help:{"default":null,type:cc.Node},assault:{"default":null,type:cc.Node},cd:{"default":null,type:cc.Node},btn_game:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btnc(this.help,null,n.makef(this.OpenHelp,this),1),n.btn(this.btn_game,n.makef(this.toGame,this),1)},showed:function(){c.assaultIsIn()?(this.delayShowed(),c.cleanFirst()):c.activityShow()},delayShowed:function(t,e){null!=t&&(t.x=0,t.y=0);var i=c.assaultTableData,o=c.assaultSaveData,a=null!=e?e:o.currStage,s=c.getAssaultTmremaining(),r=0;for(var l in i.award)this.showStage(r,l==a,i.award[l]),r++;c.lastStage=a,n.cd2(this.cd,null,parseInt(s/1E3),n.makef(function(){},this),1)},showStage:function(t,e,i){var o=this.guangList[t];n.sh(o,"blue_bk",!e),n.sh(o,"yellow_bk",e);var a=this.itemsList[t];if(null!=a){var c=null;for(var r in i){var l=s.item(r);l&&(l.id_name,c=i[r])}n.text(a,"lab_num",c)}},touchBackground:function(){this.closeDialog()},OpenHelp:function(){o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_assault",param:{text:"assaultRule"}})},toGame:function(){o.EVENT_OPEN_DIALOG({name:"dialog_gateEntrance",param:{lv:a.geti("lev")}})},onUiFlyInEnd:function(t){o.EVENT_DIALOG_SHOWED(this)}}),cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIAwardIcon:[function(t,e,i){cc._RF.push(e,"c94e83RYQRPuqDgWt1UuixY","UIAwardIcon");var n=t("GameTools"),o=t("UIFlyGold"),a=t("UIGameComplete");cc.Class({"extends":cc.Component,properties:{icon:{type:cc.Sprite,"default":null},awardName:{type:cc.Label,"default":null},num:{type:cc.Label,"default":null}},setData:function(t,e){this.id_name=t.id_name,this.number=e,this.awardName.string.length<5?this.awardName.node.scale=1:this.awardName.node.scale=.7,n.textp(this.awardName.node,void 0,"item_list."+t.id),n.imgs(this.icon.node,t.icon);var i="unheart"==this.id_name?"h":"";this.num.string="x"+e+i},play:function(t,e,i,o){this.node.opacity=0,n.show(this.node,"reverse"),n.hide(this.node,"positive"),this.scheduleOnce(function(){var t=void 0,n=void 0,a=this.getComponent(cc.Animation);a.on("finished",function(){i.call(o,this.node),t.speed=n},this),t=a.play(),n=t.speed,t.speed*=e},t)},flyTo:function(){"gold"!=this.id_name&&"silver"!=this.id_name||(new o).__showed({name:this.id_name,posn:a.node(),count:this.number})}}),cc._RF.pop()},{GameTools:"GameTools",UIFlyGold:"UIFlyGold",UIGameComplete:"UIGameComplete"}],UIAward:[function(t,e,i){cc._RF.push(e,"eefea8B6SlFJ6K5M+/q1yWh","UIAward");var n=t("N7FitScreen"),o=t("GameTools"),a=t("GameEvent"),s=t("GameCommon"),c=t("UIAwardIcon"),r=t("JsonMetaCache"),l=t("N7Resource"),h=t("AtlasAnimation");cc.Class(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({"extends":t("UIDialog"),properties:{cao:{type:sp.Skeleton,"default":null},dog:{type:t("UIDogAward"),"default":null},dogAnim:{type:t("AtlasAnimation"),"default":null},btnAward:{type:cc.Node,"default":null},bottom:{type:cc.Node,"default":null},awardBk:{type:cc.Node,"default":null},list:{type:cc.Node,"default":null},effect:5023},onLoad:function(){this._super(),this.initUI(),this.initEvent()},playDogWait:function(){this.dogAnim&&(this.dogAnim.frameCount=7,this.dogAnim.pingpong=!0,this.dogAnim.play(.7,0))},setDogSize:function(){var e=t("N7FitScreen").instance();this.dog.node.parent.scale=e.backgroundScale/e.content.scale},resetSize:function(){var t=n.instance();this.background&&(this.background.scale=t.backgroundScale),this.content&&(this.content.width=t.content.width,this.content.height=t.content.height,this.content.y=t.content.y),this.setDogSize()},initUI:function(){var t=this;this.setDogSize(),this.cao&&this.cao.setCompleteListener(function(e){t.playAnimEnd(e)}),this.playDogWait(),o.btn(this.btnAward,o.makef(this.throwBall,this),1),this.awardIcons=[];for(var e=1;e<=3;e++)this.awardIcons.push(o.cmpt(this.list,"tar"+e,c));this.list.active=!1},playAnimEnd:function(){},initEvent:function(){},contentTouch:function(){},scaleAllSpineOrAnim:function(t,e){if(t){var i=t.getComponent(sp.Skeleton);if(i)i.timeScale=(e?2:.5)*i.timeScale;else{var n=t.getComponent(cc.Animation);if(n){var o=n.getAnimationState();o&&(o.speed=(e?2:.5)*o.speed)}}for(var a in t.children)this.scaleAllSpineOrAnim(t.children[a],e)}},showed:function(e){if(!this.isShewed){this.isShewed=!0,t("N7MusicV2").switchVol(0),this._throwBall=!1,this._speedScale=!1,this.awardBk.active=!1,this.list.active=!1;var i=this.btnAward;i.active=!0,i.opacity=255,i.getComponent(cc.Animation).play();var n=this.closeButton;n.scaleX=.3,n.scaleY=.8,n.active=!1,this.initAwards(e),a.EVENT_DIALOG_SHOWED(this)}},initAwards:function(t){var e=[];if(t[0])for(var i in t){var n=t[i];null!=n.k&&(e[n.k]=n.v)}else e=t;var o=0;for(var a in e){var s=this.awardIcons[o++],c=r.itemn(a);s?s.setData(c,e[a]):n7.log("JsonMetaCache not find itemname:"+a)}this.callFunc=t.callFunc},throwBall:function(){this._throwBall=!0,this.list.active=!1;var t=this.btnAward,e=[cc.spawn(cc.scaleTo(.15,0,.24),cc.fadeOut(.1)),cc.callFunc(function(){if(t.scale=1,t.active=!1,this.dogAnim)return this.sound(1),this.dogAnim.frameCount=45,this.dogAnim.pingpong=!1,this.dogAnim.play(4,1,function(t){t==h.PLAY_END&&(this.playDogWait(),this.endAward())},this),void this.startAward();this.dog.throwBall(this)},this)];t.getComponent(cc.Animation).stop(),t.runAction(cc.sequence(e)),this.callFunc&&this.callFunc(),this.callFunc=null,this.scheduleOnce(function(){this.content.once(s.touchend,this.contentTouch,this)},.2)},playCao:function(){this.cao&&(this.cao.setAnimation(0,"cao_4",!1),this.cao.addAnimation(0,"cao",!0))},startAward:function(){this.awardBk.active=!0,this.awardBk.opacity=0,this.awardBk.runAction(cc.speed(cc.fadeIn(.25),this._speedScale?.5:1)),this.list.active=!0;var e=1,i=.5,n=1;for(var a in this._speedScale&&(n=2,i*=.5,e*=.5),this.awardIcons)this.awardIcons[a].play(e,n,function(e){if(this.effect&&t("GameConfig").get("award_eff")){var i=l.createNodeFromId(this.effect);i.rotation=e.rotation,i.position=o.nodeToNodePos(e,this.node),i.parent=this.node,i.getComponent("effect_base").playEffect()}},this),e+=i},closeDialog:function(){for(var e in this.unschedule(this.delayClose),this.awardIcons)this.awardIcons[e].flyTo();this.closeButton.getComponent(cc.Animation).stop(),t("N7MusicV2").switchVol(1),this._super(),t("GuideLogic").checkPointGuide(11342),t("GuideLogic").checkPointGuide(11343),this.isShewed=!1},endAward:function(){var t=this.closeButton;t.active=!0;var e=[cc.scaleTo(.15,1,1),cc.callFunc(function(){var e=t.getComponent(cc.Animation).play();this._speedScale&&(e.speed=.5*e.speed),a.EVENT_DIALOG_SHOWED(this),this.waitTime=5,this.schedule(this.delayClose,1,this.waitTime,1),this._speedScale&&this.scaleAllSpineOrAnim(this.node,!1),this._speedScale=!1,this.delayClose()},this)];t.runAction(cc.sequence(e)),this._throwBall=!1},delayClose:function(t){this.waitTime<=0&&this.closeDialog(),o.text(this.closeButton,"label",o.i18ns("finish")+"("+this.waitTime+")"),--this.waitTime}},"resetSize",function(){var t=n.instance();this.background&&(this.background.scale=t.backgroundScale/t.content.scale),this.content&&(this.content.width=t.content.width,this.content.height=t.content.height,this.content.y=t.content.y)})),cc._RF.pop()},{AtlasAnimation:"AtlasAnimation",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",N7FitScreen:"N7FitScreen",N7MusicV2:"N7MusicV2",N7Resource:"N7Resource",UIAwardIcon:"UIAwardIcon",UIDialog:"UIDialog",UIDogAward:"UIDogAward"}],UIBackgroundLock:[function(t,e,i){cc._RF.push(e,"a45471bxGRLroha+ZS1WFxH","UIBackgroundLock");var n=t("n7");cc.Class({"extends":cc.Component,properties:{},start:function(){var e=t("GameTools"),i=t("GameCommon");e.chd(this.node,"background").on(i.touchend,function(){n.log("click:background:UIBackgroundLock")},this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",n7:"n7"}],UIBackpack:[function(t,e,i){cc._RF.push(e,"ec50fQWIP9CvoAcJbIMQKw6","UIBackpack");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("ItemsLogic"),c=t("UserLogic"),r=t("StringUtils"),l=cc.Class({"extends":t("UIDialog"),properties:{obj:{"default":null,type:cc.Node},pages:{"default":null,type:cc.Node},obj_lay:{"default":null,type:cc.Node},info:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent(),this.obj_halfh=this.obj.height/2-20},__initEvent:function(){n.btnc(this.content,"help",n.makef(this.OpenHelp,this),1),n.btnc(this.pages,"btn_left",n.makef(this.initPages,this,-1),1),n.btnc(this.pages,"btn_right",n.makef(this.initPages,this,1),1),n.btnc(this.info,"content/btn",n.makef(this.useItem,this),1),o.on(o.EVENT_OPEN_DIALOG,function(){this.info.active&&this.info.getComponent("UIPopBase").close()},this)},showed:function(){this.page_index=1,this.obj_lay.childrenCount&&this.obj_lay.removeAllChildren();var t=s.all(),e=[],i=void 0;for(var o in t)if(!(t[o]<=0)&&(i=a.item(o))){var c=r.toKeyValue(i.exdt);if(c&&!c.unshow){for(var h=t[o];h>l._ITEMNUM_;)h-=l._ITEMNUM_,e.push({temp:i,num:l._ITEMNUM_});e.push({temp:i,num:h})}}this.__list=e,this.indexK=0,this.istcend=!1,this.num=Math.ceil(this.__list.length/l._PAGENUM_),n.text(this.pages,"num",this.page_index+"/"+this.num)},update:function(){if(!this.istcend&&this.__list)if(this.indexK>=this.page_index*l._PAGENUM_)this.istcend=!0;else for(var t=0;t<4;t++){var e=this.__list[this.indexK];this.popUI(e),this.indexK++}},popUI:function(t){var e=cc.instantiate(this.obj);if(e.parent=this.obj_lay,t){var i=n.show(e,"content");n.imgs(i,t.temp.icon,"icon"),n.text(i,"num",t.num),n.btnc(e,"bk",n.makef(this.initInfo,this,{node:e,tmp:t.temp}))}},initInfo:function(t){if(t){var e=t.node,i=t.tmp,o=n.nodeToNodePos(e,this.content);this.info.x=o.x,this.info.y=o.y+this.obj_halfh;var a=n.chd(this.info,"content");n.textp(a,"name","item_list."+i.id),n.textp(a,"label","item_list.info"+i.id);var s=!1;if(this.clickItem=null,i.exdt_obj){var c=i.exdt_obj;for(var r in c)if("type"==c[r].name&&2==c[r].num){s=!0,this.clickItem=i;break}}n.sh(a,"btn",s),this.info.getComponent("UIPopBase").show()}},useItem:function(){var t=this.clickItem;if(t){var e=this;c.useItem(t.id_name,null,function(t){0==t?(o.EVENT_MESSAGEBOX("item_list.user_ok"),e.showed()):5==t?o.EVENT_MESSAGEBOX("buy_heart.full"):o.EVENT_MESSAGEBOX("item_list.user_no")})}},OpenHelp:function(){o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_backpack",param:{text:"achievetRule"}})},initPages:function(t){this.page_index+t<=this.num&&this.page_index+t>0&&(this.page_index+=t,this.obj_lay.removeAllChildren(),1==this.page_index&&(this.indexK=0),this.istcend=!1,n.text(this.pages,"num",this.page_index+"/"+this.num))}});l._PAGENUM_=20,l._ITEMNUM_=999,cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIBalloon:[function(t,e,i){cc._RF.push(e,"b42beHV88tIRZ/kochs4KQq","UIBalloon");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{atlas:{"default":null,type:cc.SpriteAtlas},sprite:{"default":null,type:cc.Sprite}},onLoad:function(){},start:function(){},init:function(t){this.am||(this.am=this.getComponent(cc.Animation)),this.sprite||(this.sprite=this.getComponent(cc.Sprite));var e="beachball";t>=0&&t<=5&&(e+="_"+n.colors_def[t]),this.sprite.spriteFrame=this.atlas.getSpriteFrame(e)},punchMe:function(){this.am.play()}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIBarrel:[function(t,e,i){cc._RF.push(e,"069d71QaY5IfKcsfmTEREOp","UIBarrel");var n=t("n7"),o=t("GameCommon"),a=cc.Class({"extends":t("UIBlock"),properties:{altas:{type:cc.SpriteAtlas,"default":null},whiteBall:{type:cc.Sprite,"default":null}},statics:{COLORSATLAS:["magic_ye","magic_re","magic_bl","magic_gr","magic_pu","magic_or"]},onLoad:function(){},start:function(){},getCubeData:function(){return this.color},setData:function(t,e,i,n,a){this.data=t,this.playChg(e),i&&i.call(n,o.CUBE_SETPARAM_ALL),this.destroyCall&&this.playDestroyAnim()},playChg:function(t){var e=this.data;if(this.color=e.randColor,null!=e.randColor){var i=a.COLORSATLAS[e.randColor];this.whiteBall.spriteFrame=this.altas.getSpriteFrame(i)}},destroyMe:function(t,e,i){if(this.destroyCall)return e.call(i),void(n.isDebug&&n.log("UIBarrel gid:"+this.tile.gid+" destroyMe 2"));this.destroyCall={cmd:t,callfun:e,caller:i},this.animState?n.isDebug&&n.log("UIBarrel gid:"+this.tile.gid+" destroyMe 3"):this.playDestroyAnim()},playDestroyAnim:function(){this.animState?n.isDebug&&n.log("UIBarrel gid:"+this.tile.gid+" playDestroyAnim out"):(n.isDebug&&n.log("UIBarrel gid:"+this.tile.gid+" playDestroyAnim"),this.destroyCall&&(n.isDebug&&n.log("UIBarrel gid:"+this.tile.gid+" playEnd destroy"),this.destroyCall.callfun.call(this.destroyCall.caller),this.destroyCall=null))}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock",n7:"n7"}],UIBattleShare:[function(t,e,i){cc._RF.push(e,"11d83Rtx1NFZb4UoBUEdJ3t","UIBattleShare");var n=t("GameTools"),o=t("ShareLogic"),a=t("JsonMetaCache"),s=t("GameEvent");cc.Class({"extends":t("UIDialog"),properties:{itemList:{type:cc.Node,"default":[]},itemLayout:{type:cc.Node,"default":null},btn_getAwd:{type:cc.Node,"default":null},btn_share:{type:cc.Node,"default":null},btn_close:{type:cc.Node,"default":null},title:{type:cc.Node,"default":null},info:{type:cc.Node,"default":null}},onLoad:function(){this._super(),this.initUI(),this.initEvent()},initUI:function(){},initEvent:function(){n.btn(this.btn_getAwd,n.makef(this.getAwd,this),1),n.btn(this.btn_share,n.makef(this.share,this),1),n.btn(this.btn_close,n.makef(this.closeDialog,this),1),s.on(s.EVENT_DIALOG_SHOWED,function(){this.closeDialog()},this)},getAwd:function(){if(!o.openAd(this.shareId))return s.EVENT_MESSAGEBOX("ads_notice.ads8"),void this.closeDialog();this.needClose?this.closeDialog():o.showAndWatchOrShare(this.shareId,null,function(t){var e=t?t.dt:null;e&&0==e.code&&(this.needClose=!0,n.textp(this.btn_getAwd,"label","close"),this.callFunc&&this.callFunc.call(this.caller))},this)},share:function(){o.showAndWatchOrShare(10,null,function(){this.closeDialog()},this)},touchBackground:function(){this.needClose&&this._super()},showed:function(t){this.callFunc=t.callFunc,this.caller=t.caller,this.shareId=t.shareId;var e=t.awd;this.initAwards(e),this.needClose=!1,n.textp(this.btn_getAwd,"label",e.greentxt?e.greentxt:"receive"),n.textp(this.btn_share,"label","share.shareTo"),n.sh(this.btn_share.parent,"",t.shareBtn),n.sh(this.node,"center/close",!t.close),n.sh(this.node,"center/xclose",t.close)},initAwards:function(e){var i={};if(e&&e[0])for(var o in e){var s=e[o];null!=s.k&&(i[s.k]=s.v)}else i=e;var c=0,r="";for(var l in i){var h=a.itemn(l);if(h){var u=this.itemList[c++];if(u){var d=n.chd(u,"icon"),f=n.chd(u,"num");n.imgsPrefab(d,h.icon),n.text(f,void 0,i[l]),f.zIndex=d.zIndex+1,u.active=!0}r+=n.i18ns("item_list."+h.id)+"*"+i[l]}}for(var g=c;g<this.itemList.length;g++)this.itemList[g].active=!1;var p=280;2==c&&(p=350),this.itemLayout.scale=1==c?1.5:1,this.itemLayout.getComponent(cc.Layout).spacingX=p;var _=110==this.shareId?r:t("GameLogic").getMaxCnt();n.textp(this.title,void 0,e.title),n.textp(this.info,void 0,e.info,[_]),n.textp(this.node,"center/close/labal",e.ignore)}}).uiObj={110:1,111:2},cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog"}],UIBattleStart:[function(t,e,i){cc._RF.push(e,"ac5a1HDrrJDp7ZLlGmmtm+2","UIBattleStart");var n=t("GameTools"),o=t("JsonMetaCache"),a=t("UIGameTopbarV2"),s=t("N7UIFlyLayer"),c=t("GameEvent"),r=cc.Class({"extends":t("UIDialog"),properties:{lvbk:{"default":null,type:cc.Node},goal:{"default":null,type:cc.Node}},statics:{FLYTO_GOAL_PARAMS_LEFT:{scale1:.4,scale2:.5,p1:{offset:-120},p2:{offset:20},time:1},FLYTO_GOAL_PARAMS_RIGHT:{scale1:.4,scale2:.5,p1:{offset:120},p2:{offset:-20},time:1},GOAL_SCALES:[{scale:1.2,x:0},{scale:1.2,x:80},{scale:1,x:80},{scale:1,x:80}]},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){c.on(c.EVENT_GAME_STARTV2,this.guideStart,this)},showed:function(){this.lvbk.width=0;var e=t("UIGameV2").instance();this.mapid=e.mapId;var i=e.gameLogic.goals().getGoals();for(var o in i)i[o].meta=i[o].row;var a=n.sh_Goals(i,this.goal,4,!0),s=r.GOAL_SCALES[a-1],c=this.goal.getComponent(cc.Layout);1==a&&(c.enabled=!1,n.chd(this.goal,"tar1").position=cc.p(0,0)),c.spacingX=s.x;var l=1;for(var h in i)n.scale(this.goal,"tar"+l+"/content",s.scale),l++;this.node.active=!0,e.topbar.nodeGoals.active=!1,this.scheduleOnce(function(){this.getComponent(cc.Animation).play()},.5)},getGoals:function(){return a.instance().nodeGoals},flyInEnd:function(){this.getGoals().active=!0,this.closeDialog_notfly(),c.EVENT_GAME_BATTLEGOAL_FLYED(),t("N7MusicV2").switchVol(1)},guideStart:function(){var e=t("GuideLogic");if(e.inMapHasGuide(this.mapid)){var i=o.map(this.mapid);c.EVENT_OPEN_GAME_GUIDE(i.g_guide),e.saveLocal(this.mapid)}else t("GameLogic").itemsNotice()},onFlyTargetStart:function(){var t=this.getGoals(),e=s.getPos(this.goal),i=s.getPos(t),o=r.FLYTO_GOAL_PARAMS_LEFT,a=n.createBrizer(e,i,o);this.goalPos=this.goal.position,this.goalParent=this.goal.parent;var c=[a,cc.callFunc(function(e){t.active=!0,this.goal.parent=this.goalParent,this.goal.position=this.goalPos,this.goal.active=!1},this)],l=cc.sequence(c);s.flyNodeTo(this.goal,l,e)}});cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",N7MusicV2:"N7MusicV2",N7UIFlyLayer:"N7UIFlyLayer",UIDialog:"UIDialog",UIGameTopbarV2:"UIGameTopbarV2",UIGameV2:"UIGameV2"}],UIBlock:[function(t,e,i){cc._RF.push(e,"7a3a9jfuTJJepzme6Y8yAoh","UIBlock");var n=t("N7Resource"),o=t("N7UIEffectLayer"),a=t("N7Sound"),s=t("GameCommon"),c=cc.Class({"extends":cc.Component,properties:{content:{"default":null,type:cc.Node},effectList:[cc.Integer],soundList:[cc.Integer]},statics:{anima:null},setTile:function(t){this.tile=t},setMeta:function(t){this.meta=t},getCubeData:function(){return null},getGoal:function(){return null},setClick:function(t,e,i){i?this.node.on(s.touchstart,t,e):this.node.off(s.touchstart,t,e)},clear:function(){this.tile=null,this.meta=null},createEffect:function(t,e,i){if(void 0==t&&(t=0),t>=0&&t<=this.effectList.length){t=this.effectList[t];var n=this.tile.grid;o.addInCube(this.tile,t,void 0,function(t){e&&e.call(i,t),t.node.scale=s.gameMapScale,t.play(void 0,n,void 0,function(t){},this)},this)}},playSound:function(t){a.playSound(t)},sound:function(t){void 0==t&&(t=0),t>=0&&t<=this.soundList.length&&this.playSound(this.soundList[t])},cubeTwinkle:function(){this.initAnim(),this.am.play("twinkle")},initAnim:function(){this.am||(this.content=this.content||this,this.am=this.content.getComponent(cc.Animation),this.am||(this.am=this.content.addComponent(cc.Animation)),this.load())},load:function(){this.am.getAnimationState("twinkle")||c.anima||n.prototype.loadFile("gameres/basev2/gameplay/anim/twinkle.anim",cc.AnimationClip,function(t){c.anima=t,this.am.addClip(c.anima),this.am.play("twinkle")},this)},getGoalNode:function(){return this.node},setCallPlayEnd:function(t,e){this.callEnd={callFunc:t,caller:e}},callPlayEnd:function(t){if(this.callEnd){var e=this.callEnd.callFunc,i=this.callEnd.caller;this.callEnd=null,e.call(i,t)}}});cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIEffectLayer:"N7UIEffectLayer"}],UIBowling:[function(t,e,i){cc._RF.push(e,"07da7TJWUtFbZo5U5rykwJG","UIBowling");var n=t("n7"),o=t("GameCommon"),a=t("GameTools"),s=t("N7UIEffectLayer");cc.Class({"extends":t("UIBlock"),properties:{altas:{type:cc.SpriteAtlas,"default":null},background:{type:cc.Sprite,"default":null},club:{type:cc.Node,"default":null},goalBall:{type:cc.Prefab,"default":null},clubAnimClips:[cc.AnimationClip],delayStep:.1,_idx:0,dropCount:0},statics:{club_anim_name_list:["bowling_club_shake_0","bowling_club_shake_1"],APPLE_DROP:cc.spawn(cc.rotateBy(.5,360),cc.moveBy(.5,0,-2E3),cc.sequence([cc.delayTime(.25),cc.fadeOut(.25)]))},onLoad:function(){},init:function(t,e){if(!this.clubList){this.clubList=[];for(var i=1;i<=10;i++)this.clubList.push(a.chd(this.club,"ball_"+i))}if(this.hadInit)for(var n in this.clubList)this.clubList[n].active=!0;else this.hadInit=!0;this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this)),this.background.node.rotation=0,this.background.node.scale=1,this.idx=0,this.appleCount=this.clubList.length},setData:function(t,e,i,c,r){if(e){n.log("UIBowling gid:"+this.tile.gid+" 1 count:"+this.idx);var l=this.clubList[this.idx++];l.active=!1,this.createEffect(0,function(t){t.node.position=s.getPos(l);var e=a.cmpt(l,"ball",cc.Sprite);e?t.setDatas(e.spriteFrame):n.error("UIBowling setData setBall failed no find cc.Sprite from name ball")},this),this.anim.play("bowling_shock"),this.sound()}else for(var h=this.appleCount-t.count;this.idx<h;this.idx++)this.clubList[this.idx].active=!1;i&&i.call(c,o.CUBE_SETPARAM_ALL)},destroyMe:function(t,e,i){if(n.log("UIBowling gid:"+this.tile.gid+" destroyMe 1"),this.destroyCall)return e.call(i),void(n.isDebug&&n.log("UIBowling gid:"+this.tile.gid+" destroyMe 2"));this.destroyCall={cmd:t,callfun:e,caller:i},this.idx<this.appleCount?n.isDebug&&n.log("UIBowling gid:"+this.tile.gid+" destroyMe 3"):this.playDestroyAnim()},playDestroyAnim:function(){this.idx<this.appleCount?n.isDebug&&n.log("UIBowling gid:"+this.tile.gid+" playDestroyAnim out"):(n.isDebug&&n.log("UIBowling gid:"+this.tile.gid+" playDestroyAnim"),this.anim.play("bowling_destroy"))},playEnd:function(t){n.isDebug&&n.log("UIBowling gid:"+this.tile.gid+" playEnd name:"+t.currentTarget.name),"bowling_destroy"==t.currentTarget.name?(this.destroyCall&&(n.isDebug&&n.log("UIBowling gid:"+this.tile.gid+" playEnd destroy"),this.destroyCall.callfun.call(this.destroyCall.caller)),this.destroyCall=null):this.playDestroyAnim()}}),cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock",n7:"n7"}],UIBox:[function(t,e,i){cc._RF.push(e,"458adI1scVM/I2H52FLHpUk","UIBox");var n=t("GameCommon"),o=cc.Class({"extends":t("UIBlock"),properties:{box:{type:cc.Sprite,"default":null},cage:{type:cc.Sprite,"default":null},altas:{type:cc.SpriteAtlas,"default":null}},statics:{box:["x","x2","x3","x4","x5"],extraColor:n.colors_def.concat(["black"])},onLoad:function(){this.am=this.getComponent(cc.Animation)},init:function(t,e){this.id=t,this.col=e,this.IdColor(t,e)},setData:function(t,e,i,o){this.set=t.count,0==this.set?e&&(6==this.col?this.createEffect(3):this.createEffect(0)):e&&(this.createEffect(1==this.set?1:2),this.am.play()),this.IdColor(this.set-1,this.col),i&&i.call(o,n.CUBE_SETPARAM_ALL)},createEffect:function(t){this._super(t,function(t){!this.set&&t.setTexture&&t.setTexture(this.col)},this)},IdColor:function(t,e){var i="box";e>=0&&(i+="_"+o.extraColor[e]),this.box.spriteFrame=this.altas.getSpriteFrame(i),t>0&&(this.cage.spriteFrame=this.altas.getSpriteFrame("box_c"+t)),this.cage.node.active=t>0}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIBuyHeart:[function(t,e,i){cc._RF.push(e,"984a7yy9n5Au6rIgUUS1YZw","UIBuyHeart");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("UserLogic"),c=t("ItemsLogic"),r=(t("n7"),t("GameCommon")),l=cc.Class({"extends":t("UIDialog"),properties:{item:{"default":null,type:cc.Node},info:{"default":null,type:cc.Node},btn_free:{"default":null,type:cc.Node},btn_buy:{"default":null,type:cc.Node},btn_ads:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){this.btn_ads.clickPath="btn",n.btn(this.btn_buy,n.makef(this.buyProp,this),1)},showed:function(e){this.money=1*a.itemn("FullPower").money,n.text(this.btn_buy,"p/lab_num",this.money),this.refushHeart(),this.refushItem(),t("ShareLogic").showAndWatch(102,this.btn_ads,function(t){t&&t.dt&&0==t.dt.code&&(this.btn_ads.active=!1)},this)},refushHeart:function(){var t=s.heart();n.text(this.info,"num",t.h);var e=t.h>=s._MAX_;n.textp(this.info,"label",e?"buy_heart.full":"buy_heart.time");var i=n.sh(this.info,"time",!e);e||n.cd(i,t.tm,n.makef(function(){this.refushHeart()},this))},refushItem:function(){var t=this,e=1;for(var i in l.ITEM_PREWAR)!function(i){var o=n.chd(t.item,"item"+e);e++;var a=l.ITEM_PREWAR[i],s=c.get(a);n.sh(o,"add",!s),n.sh(o,"num",s).active&&n.text(o,"num",s),n.btn(o,n.makef(function(){o.getComponent(cc.Animation).play(),this.userItem(i)},t),1)}(i)},userItem:function(t){var e=l.ITEM_PREWAR[t];if(c.get(e)>0){if(s.heart().h>=s._MAX_)return void o.EVENT_MESSAGEBOX("buy_heart.full");var i={fo:function(){s.useItem(e),this.refushItem(),this.refushHeart()},caller:this,title:"item_list.user_item",lab:"buy_heart.use",labc:"item_list.info"+t,name:n.i18ns("item_list."+t),yes:"confirm",no:"cancel"};o.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:i,owner:"dialog_buy_heart"})}else o.EVENT_MESSAGEBOX("unitem")},buyProp:function(){if(s.heart().h>=s._MAX_)return o.EVENT_MESSAGEBOX("buy_heart.full"),void this.closeDialog();var e=this;s.buy({why:"buy_heart",gold:this.money},function(i){0==i?(s.addHeart(s._MAX_),t("AchieveLogic").updateAchieve(r.ACHIEVE_18,1),e.closeDialog()):(o.EVENT_MESSAGEBOX("ungold"),o.EVENT_GOLD_SHOP({name:"dialog_gold_shop",owner:"dialog_buy_heart"}))})},onDestroy:function(){o.off(this)}});l.ITEM_PREWAR={6:"TinyLives",7:"MidLives",8:"BigLives"},cc._RF.pop()},{AchieveLogic:"AchieveLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog",UserLogic:"UserLogic",n7:"n7"}],UIBuyProp:[function(t,e,i){cc._RF.push(e,"18b26OOE+JLaqHMA9DbX1K0","UIBuyProp");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("UserLogic"),c=t("ItemsLogic"),r=t("StringUtils"),l=t("n7");cc.Class({"extends":t("UIDialog"),properties:{btn_buy:{"default":null,type:cc.Node},prop:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_buy,n.makef(this.buyProp,this),1)},showed:function(t){var e=r.isStr(t);this.name=e?t:t.name,e||(this.fo=t.fo),this.__p=t;var i=a.itemn(this.name);this.itemn_prop=i,i?(n.imgs(this.prop,i.icon,"icon"),this.isp=r.toKeyValue(i.exdt).p,n.text(this.prop,"num","x"+(this.isp?this.isp:1)),n.textp(this.content,"lab_title","item_list."+i.id),n.textp(this.content,"lab_info","item_list.info"+i.id),n.sh(this.btn_buy,"p/gold",i.money),n.sh(this.btn_buy,"p/silver",i.silver),this.gameprop=i.money?i.money:i.silver,n.text(this.btn_buy,"p/num",this.gameprop)):l.log("JsonMetaCache not find itemname:"+this.name)},buyProp:function(){var t=this.itemn_prop.money,e=this.itemn_prop.silver,i="buy_prop_"+this.name;this.__p.why&&(i+=":"+this.__p.why);var n=this;s.buy({why:i,silver:e,gold:t},function(t){0==t?(c.add(n.name,n.isp?n.isp:1,"WAR_BUY"),n.closeDialog(),o.EVENT_MESSAGEBOX("buyok"),o.EVENT_NUMBER_CHANGE({n:n.name,a:n.isp?n.isp:1,fo:n.fo}),n.fo=void 0):e?o.EVENT_MESSAGEBOX("unsilver"):(o.EVENT_MESSAGEBOX("ungold"),o.EVENT_GOLD_SHOP({name:"dialog_gold_shop",owner:"dialog_buy_prop"}))})}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic",n7:"n7"}],UICage:[function(t,e,i){cc._RF.push(e,"12e60G6KzdPraOvAGsi3/VU","UICage");var n=t("GameEvent"),o=t("GameCommon");cc.Class({"extends":t("UICube"),properties:{},initCube:function(){n.once(n.EVENT_GAME_TILE_EDGE,function(){this.initCage()},this)},onLoad:function(){},onDestroy:function(){n.off(this)},getCube:function(){var e=this.tile.grid,i=t("UIGameV2").instance();return i.haveCage=!0,i.gameMap.getCubeLayer(e.x,e.y,o.TILE_LAYER_NORMAL)},initCage:function(t){t||(t=this.getCube()),t&&(t.inCage={zIndex:t.node.zIndex,"in":!0},t.node.zIndex=this.tile.node.zIndex-1)},clear:function(){var t=this.getCube();t&&t.inCage&&(t.node.zIndex=t.inCage.zIndex,t.inCage=null),n.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",UICube:"UICube",UIGameV2:"UIGameV2"}],UICandy:[function(t,e,i){cc._RF.push(e,"3dd83mD+PpKjK9+ZVtByIB7","UICandy");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{sweets:{"default":null,type:cc.Node},color:{"default":null,type:cc.Sprite},altas:{type:cc.SpriteAtlas,"default":null},cover:{"default":null,type:cc.Node}},onLoad:function(){},init:function(t){var e="toaster";t>=0&&t<n.colors_def.length&&(e=e+"_"+n.colors_def[t]),this.color.getComponent(cc.Sprite).spriteFrame=this.altas.getSpriteFrame(e),this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.callPlayEnd,this)),this.am.play("candymachine_idle"),this.cover.active=!1},setData:function(t,e,i,o){e?(this.am.play("candymachine_candymix"),this.sound(0),this.scheduleOnce(function(){1==t.tar&&(this.am.playAdditive("candymachine_candymix_star"),this.setCallPlayEnd(function(){this.am.play("candymachine_idle")},this),this.sound(1)),i&&i.call(o,n.CUBE_SETPARAM_STARTEND,{node:this.sweets})},.5),i&&i.call(o,n.CUBE_SETPARAM_NEXT)):i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.cover&&(this.cover.active=1==t.cover)}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UICannonBase:[function(t,e,i){cc._RF.push(e,"84fe7FBwIdGUpCgT6tCoPKL","UICannonBase");var n=t("n7"),o=t("GameTools"),a=t("GameCommon"),s=t("N7Resource"),c=t("UIGameV2"),r=t("N7UIEffectLayer");cc.Class({"extends":t("UIBlock"),properties:{fireNode:{"default":null,type:cc.Node},ammo:{"default":null,type:cc.Prefab},delay:0},flyToCube:function(e,i,n,o){var a=t("UIGameV2").instance().gameMap,s={to:r.toPos(a.getGridPos(i.x,i.y,!0)),callFunc:n,caller:o,cube:e};if(this.shotList||(this.shotList=[]),this.shotList.push(s),this.isShoting)return s.delay=this.shotDelayTm,void(this.shotDelayTm+=this.shotDelay||0);this.fire()},fire:function(){this.shotDelayTm=0,this.isShoting=!0},shot:function(t){for(var e in this.shotPos=r.getPos(this.fireNode),this.shotList)this.shotOnce(this.shotList[e],t);this.fireEnd(!0)},shotOnce:function(t,e){var i=s.createPrefab(this.ammo,"effect_base"),n=i.node,a=o.createBrizer(this.shotPos,t.to,e),c=t.callFunc,l=t.caller,h=[a,cc.callFunc(function(t){c.call(l),i.removeSelf()},this,n)],u=cc.sequence(h);n.parent=r.node(),n.position=this.shotPos,n.getComponent("effect_base").initEffect(),n.runAction(u)},checkFire:function(t){return t.cmd==a.com_chgto},fireList:function(t,e,i){this.waitFire=0;var n=t.cmds;for(var o in n){var a=n[o];this.checkFire(a)&&(a.datas.cannon=this.tile.gid,this.waitFire++)}return!1},playFireEnd:function(){},fireEnd:function(t){this.shotList=null,this.cmd=null,this.isShoting=!1,--this.waitFire<=0&&this.callDestroy()},setData:function(t,e,i,o,a){this.cmd=a,this.callFunc=i,this.caller=o;var s=c.instance();if(t.crtItems&&!s.isBalance){var r=s.activeCannon(this.tile,a);r?this.fireList(r,t):n.error("UICannonBase setData fireList is null gid:"+this.tile.gid)}},destroyMe:function(t,e,i){this.cmd=null,this.callFunc=this.caller=null,this.waitFire?this.destroyCall={callFunc:e,caller:i}:e&&e.call(i)},callDestroy:function(){this.destroyCall&&(this.destroyCall.callFunc.call(this.destroyCall.caller),this.destroyCall=null)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock",UIGameV2:"UIGameV2",n7:"n7"}],UICannon:[function(t,e,i){cc._RF.push(e,"7e56aNwkilHrqmr3AxwM9ly","UICannon");var n=t("GameCommon"),o=t("GameTools"),a=cc.Class({"extends":t("UICannonBase"),properties:{smoke:{"default":null,type:cc.Node},flame:{"default":null,type:cc.Node},light:{"default":null,type:cc.Node}},statics:{FLYTO_ENERGY_PARAMS:{scale1:.5,scale2:.3,p1:{offset:45},p2:{offset:-45},speed:.001,maxTime:.5},am:["ballooncannon_idle","ballooncannon_jitter","ballooncannon_shoot"]},onLoad:function(){this.index=-1,this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this))},init:function(t){if(this.content){var e=Math.abs(this.content.scaleX);this.content.scaleX=1==t?e:-e}},setTile:function(t){this._super(t),this.tile.node.zIndex=n.TILE_LAYER_NORMAL_TOP},fire:function(){this._super(),this.am.play(a.am[2]),this.sound(0)},shot:function(){o.resetParticle(this.smoke),this._super(a.FLYTO_ENERGY_PARAMS)},setData:function(t,e,i,o,s){this._super(t,e,i,o,s),e?(this.index++,2==this.index||(1==this.index?(this.light.active=!0,this.sound(1)):0==this.index&&(this.flame.active=!0,this.sound(2))),this.am.play(a.am[this.index])):null!=t.cannon&&(this.index=t.cannon%3-1,this.showByIndex()),i&&i.call(o,n.CUBE_SETPARAM_ALL)},showByIndex:function(){this.light.active=!1,this.flame.active=!1,1==this.index?(this.light.active=!0,this.flame.active=!0):0==this.index&&(this.flame.active=!0),this.am.play(a.am[this.index])},playFireEnd:function(){this._super(),this.light.active=!1,this.flame.active=!1,this.am.play(a.am[0])}});cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",UICannonBase:"UICannonBase"}],UIChain:[function(t,e,i){cc._RF.push(e,"75dd9R9MLdCIrqLhrnQZ9eo","UIChain");var n=t("GameCommon"),o=cc.Class({"extends":t("UIBlock"),properties:{count:1,state:0},statics:{COUNTS:["one","two","three","four"],IDLE:0,CANT:1},onLoad:function(){this.scheduleOnce(function(){this.play(this.state)},0)},init:function(t){if(this.count=1*t,!this.skeleton){this.skeleton=this.getComponent(sp.Skeleton);var e=this;this.skeleton.setEndListener(function(){e.playEnd()})}this.play(o.IDLE)},setData:function(t,e,i,a){e?(this.count=1*t.count,this.play(o.IDLE),this.createEffect()):(this.count=1*t.count,this.play(o.IDLE)),i&&i.call(a,n.CUBE_SETPARAM_ALL)},play:function(t){if(!(this.count<1)){var e=o.COUNTS[this.count-1]+"_layer";t==o.IDLE&&(e+="_idle"),this._state=t,this.skeleton.setAnimation(0,e,t==o.IDLE)}},playCantClick:function(){this.play(o.CANT)},playEnd:function(){this.state==o.CANT&&this.play(o.IDLE),this.state=this._state}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIChangeBadge:[function(t,e,i){cc._RF.push(e,"c4abciiBpFCj5Kt3LRv2Q+U","UIChangeBadge");var n=t("GameTools"),o=t("GameCommon"),a=t("GuildLogic"),s=t("GameConfig");cc.Class({"extends":t("UIDialog"),properties:{badge_layout:{"default":null,type:cc.Node},itemn:{"default":null,type:cc.Node},linen:{"default":null,type:cc.Node},lightn:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){this.badgeid=1,this.indexK=1,this.badgeP="en"==s.get("Lang")?o.BADGES_EN:o.BADGES,n.btnc(this.content,"btn_play",n.makef(this.setBadge,this),1)},showed:function(t){this.__p=t},update:function(){if(!this.istcend)if(this.badgeP[this.indexK])this.popUI();else{this.istcend=!0;var t=this.badgeid,e=a.instance().guild;e&&1*e.gicon&&(t=1*e.gicon);var i=this.badge_layout.getChildByTag(t);this.changeBadge(i)}},popUI:function(){var t=cc.instantiate(this.itemn);t.parent=this.badge_layout,t.tag=this.indexK,n.initBadge(t,this.indexK),n.btn(t,n.makef(this.changeBadge,this,t)),this.indexK%4==0&&(cc.instantiate(this.linen).parent=this.badge_layout),this.indexK++},changeBadge:function(t){this.badgeid=t.tag,this.lightn.parent=n.chd(t,"light"),this.lightn.active=!0},setBadge:function(){this.__p.fo&&this.__p.fo(this.badgeid),this.closeDialog()}}),cc._RF.pop()},{GameCommon:"GameCommon",GameConfig:"GameConfig",GameTools:"GameTools",GuildLogic:"GuildLogic",UIDialog:"UIDialog"}],UIChangeName:[function(t,e,i){cc._RF.push(e,"dc47eBDKyRPw5pYFZwuPPRu","UIChangeName");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("N7Resource"),c=t("FamNet");cc.Class({"extends":t("UIDialog"),properties:{btn_confirm:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_confirm,n.makef(this.isConfirm,this),1),this.__inputd=n.cmpt(this.content,"editbox",cc.EditBox),n.editPchd(this.__inputd,"option.input")},showed:function(){var t=a.get("nkname");this.__inputd.string=t||"",this.btn_confirm.active=this.__inputd.string},textChange:function(){this.__inputd.string=n.stringMaxLength(this.__inputd.string),this.btn_confirm.active=this.__inputd.string.length>=2},isConfirm:function(){var t=this,e=this.__inputd.string;n.ischeckname(e)?s.loadJson("data/markwords",function(i){var n=i.words;for(var a in n)if(e.indexOf(n[a])>=0)return void o.EVENT_MESSAGEBOX("chg_name.error");c.chgNkn({nkn:e},function(e){e.code?o.EVENT_MESSAGEBOX("chg_name.no"+e.code):(o.EVENT_MESSAGEBOX("chg_name.ok"),t.closeDialog())})},this):o.EVENT_MESSAGEBOX("chg_name.hint")}}),cc._RF.pop()},{FamNet:"FamNet",GameEvent:"GameEvent",GameTools:"GameTools",N7Resource:"N7Resource",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIChapter:[function(t,e,i){cc._RF.push(e,"b5334PR9E5G1ITxQBX9wOKS","UIChapter");var n=t("GameTools"),o=t("JsonMetaCache"),a=t("UserLogic"),s=t("GameEvent"),c=t("N7Resource");cc.Class({"extends":t("UIDialog"),properties:{btn:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),window.UIChapter=this},__initEvent:function(){},showed:function(){t("N7MusicV2").switchVol(0);var e=a.geti("lev"),i=o.findMapChapter(e);if(n.textp(this.node,"content/title/title","chapter_list."+i.name),n.textp(this.node,"content/pic/levels/levels/lab","Guild.applylv",[i.levels]),i.items){for(var s=n.chd(this.node,"content/icon"),r=i.items.split(","),l=0;l<r.length&&4!=l;l++){var h=n.chd(s,"icon0"+(l+1)+"/"+(l+1));this.initIcon(h,r[l],l+1)}for(;l<=4;l++)n.sh(s,"icon0"+(l+1),!1)}var u="main/gmap/m"+i.chapter,d=this;c.textureFromPath(u,function(t){null!=t&&(n.cmpt(d.node,"content/pic/picture/icon/m1",cc.Sprite).spriteFrame=t)},this),this.node.getComponent(cc.Animation).play()},initIcon:function(t,e,i){var a=t,s=o.res(e);if(s){var r=s.showParams;c.loadRes(e,function(t){var e=void 0;t instanceof cc.SpriteFrame?(a.active=!0,n.cmpt(a,"",cc.Sprite).spriteFrame=t,e=a):(t.node.position=a.position,t.node.parent=a.parent,a.removeFromParent(),e=t.node),null!=r&&(null!=r.scale&&""!=r.scale&&(e.scale=r.scale),null!=r.rotation&&""!=r.rotation&&(e.rotation=r.rotation),null!=r.pos&&""!=r.pos&&(e.x+=r.pos.x,e.y+=r.pos.y))},this)}},closeDialog:function(){t("N7MusicV2").switchVol(1),s.EVENT_MAIN_LOADBACKGROUND(),this._super()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7MusicV2:"N7MusicV2",N7Resource:"N7Resource",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIChatWorld:[function(t,e,i){cc._RF.push(e,"b48f0COdWJD547UbPC7TudS","UIChatWorld");var n=t("GameTools"),o=t("GameEvent"),a=t("StringUtils"),s=t("GameCommon");cc.Class({"extends":cc.Component,properties:{btn_send:{"default":null,type:cc.Node},input_edit:{"default":null,type:cc.EditBox},self_msg:{"default":null,type:cc.Node},else_msg:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){n.btn(this.btn_send,n.makef(this.sendMsg,this),1),n.editPchd(this.input_edit,"option.input")},__showed:function(){},sendMsg:function(){this.init_chat(this.input_edit.string)},init_chat:function(t){var e=cc.instantiate(this.self_msg);e.parent=this.node,n.text(e,"info/name",a.cut("\u6635\u79f0",s.NAME_MAXL_LEN)),n.text(e,"msg/label",t)},onDestroy:function(){o.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",StringUtils:"StringUtils"}],UIChat:[function(t,e,i){cc._RF.push(e,"7201f+6IINM57EFZCgR8lyl","UIChat"),t("GameTools"),t("GameEvent"),cc.Class({"extends":t("UIDialog"),properties:{},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){},showed:function(){},playCloseDialog:function(){var e=this.node.getComponent(cc.Animation);e&&(e.play().wrapMode=cc.WrapMode.Reverse,e.once("finished",function(){t("UIMainV2").instance().btn_chat.active=!0},this))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",UIDialog:"UIDialog",UIMainV2:"UIMainV2"}],UIChoosePages:[function(t,e,i){cc._RF.push(e,"8eb85OqYLxE0aAAzrWQL62Z","UIChoosePages");var n=t("GameTools"),o=t("GameCommon"),a=t("GameEvent");cc.Class({"extends":cc.Component,properties:{page_off:{"default":null,type:cc.Node},page_on:{"default":null,type:cc.Node},contents:{"default":null,type:cc.Node},fun:{"default":null,type:cc.Component.EventHandler},index:1},onLoad:function(){this.run=!1,this.__init()},__init:function(){this.pageoffobjs=[],this.pageonobjs=[],this.contobjs=[];var t=void 0,e=void 0;for(e=1;e<10&&null!=(t=n.chd(this.page_off,"page"+e));e++)this.pageoffobjs[e-1]=t,this.__on(t,e);for(e=1;e<10&&null!=(t=n.chd(this.page_on,"page"+e));e++)this.pageonobjs[e-1]=t,this.__on(t,e);for(e=1;e<10&&null!=(t=n.chd(this.contents,"content"+e));e++)this.contobjs[e-1]=t;e=this.index,this.index=0,this.select(e)},__on:function(t,e){n.chd(t,"icon").on(o.touchend,function(t){this.select(e)},this)},select:function(e){if(this.fun&&this.fun.emit([e]),e!=this.index){t("N7Sound").playSound(90122);var i=this.index-1;this.btnStatu(i,!1),this.btnStatu(e-1,!0),this.index=e}},btnStatu:function(t,e){if(!(t<0)){t<this.pageoffobjs.length&&(this.pageoffobjs[t].active=!e),t<this.pageonobjs.length&&(this.pageonobjs[t].active=e),t<this.contobjs.length&&(this.contobjs[t].active=e);var i=n.chd(this.pageonobjs[t],"icon"),o=i.getComponent(cc.Animation);i.on("mousedown",function(t){o.play()},i),this.run&&o.play(),this.run=!0}},onDestroy:function(){a.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",N7Sound:"N7Sound"}],UICloudAni:[function(t,e,i){cc._RF.push(e,"e07a8EO68NJlbO+RF3O2+9g","UICloudAni"),cc.Class({"extends":cc.Component,_ani_:function(){return this.ani||(this.ani=this.node.getComponent(cc.Animation)),this.ani},load_begin:function(){this._ani_().play("Cloud_enter")},load_end:function(){this._ani_().play("Cloud_out")},cloud_loading:function(){this._ani_().stop()}}),cc._RF.pop()},{}],UIClubContend:[function(t,e,i){cc._RF.push(e,"e7049z5DDREjp/MvXmzQTFl","UIClubContend");var n=t("GameTools"),o=t("GameEvent"),a=t("ActivityLogic"),s=t("GuildLogic"),c=t("GameCommon"),r=t("UserLogic"),l=t("StringUtils"),h=t("WorkData"),u=t("JsonMetaCache"),d=cc.Class({"extends":t("UIDialog"),properties:{btn_help:{"default":null,type:cc.Node},refrushn:{"default":null,type:cc.Node},rsinfo:{"default":null,type:cc.Node},time:{"default":null,type:cc.Node},content1:{"default":null,type:cc.Node},content2:{"default":null,type:cc.Node},obj1:{"default":null,type:cc.Node},obj2:{"default":null,type:cc.Node},myobj1:{"default":null,type:cc.Node},myobj2:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent(),d.GET().score!=h.get(h.WKD_CHP_STAR)&&d.DEFAULT(),this.init()},__initEvent:function(){n.btn(this.refrushn,n.makef(this.clickRefrush,this),1),n.btn(this.btn_help,n.makef(this.openHelp,this),1)},showed:function(){var t=d.GET();if(t.tm){var e=(t.tm-n.cutm())/1E3;e>0?this.initRefrushBtn(e):this.mask.node.active=!1}var i=a.get("chp"),o=0;i&&i.start_tm&&(o=n.getTmrByDay(i.start_tm,i.day,!0)),n.cd2(this.time,"label",parseInt(o/1E3),n.makef(function(){},this),1)},init:function(){this.__initGuild(),this.__initMyGuild()},__initGuild:function(){this.arank=!1},__initMyGuild:function(){var t=s.instance();if(t.members){this.selfid=r.pid();var e=t.members,i=Object.keys(e).sort(function(t,i){return e[i].l-e[t].l}),o=void 0,a=void 0,h=void 0,u=void 0;for(var d in i)if(o=e[i[d]]){a=this.popPlayerUI(o.id),h=n.chd(a,"ranking"),u=1*d+1,n.sh(h,"1",1==u),n.sh(h,"2",2==u),n.sh(h,"3",3==u);var f=n.sh(h,"num",u>3);u>3&&f.getComponent("AtlasText").setText(u);var g=n.chd(a,"name");n.text(g,"name",l.cut(o.n,c.NAME_MAXS_LEN)),n.sh(g,"1",o.a==s.PWR_CAPTAIN),n.sh(g,"2",o.a==s.PWR_VICEC),n.text(a,"star/num",o.l),o.id==this.selfid&&(this.pwr=o.a,this.srank=u)}}},popGuildUI:function(t){var e=this.selfgid==t?this.obj2:this.obj1,i=cc.instantiate(e);return i.parent=this.content1,i},popPlayerUI:function(t){var e=this.selfid==t?this.myobj2:this.myobj1,i=cc.instantiate(e);return i.parent=this.content2,i},initSelf:function(t){this.initSelfInfo(1==t)},initSelfInfo:function(t){n.sh(this.self,"icon",t),n.sh(this.self,"label",t),n.sh(this.self,"dan",!t),n.sh(this.self,"dan_star",!t);var e=n.chd(this.self,"name"),i=n.sh(e,"clubname",t),o=n.sh(e,"nickname",!t),a=i.active?i:o,u=void 0;if(t){var d=s.instance().guild;d||(d={gname:n.i18ns("no_club"),gicon:0}),n.initBadge(this.self,d?d.gicon:0),u=d.gname}else u=r.get("nkname");n.text(a,void 0,l.cut(u,c.NAME_MAXS_LEN)),n.sh(e,"1",!t&&this.pwr==s.PWR_CAPTAIN),n.sh(e,"2",!t&&this.pwr==s.PWR_VICEC);var f=h.get(h.WKD_CHP_STAR);n.text(this.self,"star/num",f),n.text(this.rsinfo,"score/num",f),this.initSelfRank(t)},initSelfRank:function(t,e){var i=t?this.arank:this.srank,o=isNaN(parseInt(i)),a=n.chd(this.self,"ranking");n.sh(a,"1",1==i),n.sh(a,"2",2==i),n.sh(a,"3",3==i);var s=n.sh(a,"num",i>3);i>3&&s.getComponent("AtlasText").setText(i),n.sh(a,"no",o),t&&n.text(this.rsinfo,"rank/num",o?"-":i);var c=n.sh(this.self,"awd",e);c.active&&this.initAwdData(c,e)},initAwdData:function(t,e){for(var i in e){var o=n.show(t,"tar"+(1*i+1)),a=u.itemn(e[i].k);n.imgs(o,a.icon,"icon"),n.text(o,"num",e[i].v)}},clickRefrush:function(){var t=d.GET();if(t.tm<n.cutm())return d.DEFAULT(),this.content1.removeAllChildren(!0),this.content2.removeAllChildren(!0),this.init(),this.initRefrushBtn(),void o.EVENT_MESSAGEBOX("refresh_ok");var e=Math.ceil((t.tm-n.cutm())/1E3);o.EVENT_MESSAGEBOX("refresh_time",e)},initRefrushBtn:function(t){this.mask=n.cmpt(this.refrushn,"mask",cc.Mask),this.mask.node.active=!0,this.waitTime=t||5},update:function(t){this.waitTime>0&&(this.waitTime-=t,this.waitTime<=0?(this.mask.node.active=!1,this.waitTime=0):this.mask.alphaThreshold=1-this.waitTime/5)},openHelp:function(){o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_club_contend",param:{text:"contendRule"}})}});d.DEFAULT=function(){return d.RANKDATA={arr:[],tm:n.cutm()+5E3,score:0},d.RANKDATA},d.GET=function(){return d.RANKDATA?d.RANKDATA:d.DEFAULT()},cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",JsonMetaCache:"JsonMetaCache",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic",WorkData:"WorkData"}],UIClubCreate:[function(t,e,i){cc._RF.push(e,"22e9bmLSbFA6oVz3YKFgDZ6","UIClubCreate"),t("n7");var n=t("GameTools"),o=t("GameEvent"),a=t("GuildLogic"),s=t("N7Resource"),c=t("GameCommon"),r=t("UserLogic");cc.Class({"extends":cc.Component,properties:{btn_create:{"default":null,type:cc.Node},badge:{"default":null,type:cc.Node}},start:function(){this.__initEvent()},__initEvent:function(){this.gicon=1,this.type=!0,this.grade=c.OPEN_LEVEL,n.btnc(this.node,"btn_create",n.makef(this.create,this),1),n.btnc(this.badge,"btn",n.makef(this.cicon,this),1),n.text(this.btn_create,"info/num",a.CR_MONEY),n.btnc(this.node,"type/btn_l",n.makef(this.changeType,this),1),n.btnc(this.node,"type/btn_r",n.makef(this.changeType,this),1),n.btnc(this.node,"grade/btn_l",n.makef(this.changeGrade,this,-c.CLUB_GRADE_NUM),1),n.btnc(this.node,"grade/btn_r",n.makef(this.changeGrade,this,c.CLUB_GRADE_NUM),1),this.__gname=n.cmpt(this.node,"nickname/edit_box",cc.EditBox),this.__notice=n.cmpt(this.node,"info/edit_box",cc.EditBox),n.initBadge(this.badge,this.gicon),this.refrushGrade()},cicon:function(){var t=this;o.EVENT_OPEN_DIALOG({name:"dialog_change_bager",param:{fo:function(e){t.gicon=1*e,n.initBadge(t.badge,e)}}},this)},changeType:function(){this.type=!this.type,n.textp(this.node,"type/label",this.type?"club.public":"club.private")},changeGrade:function(t){var e=this.grade+t,i=c.OPEN_LEVEL,a=n.chd(this.node,"grade"),s=n.chd(a,"btn_l/gray").active&&t<0,r=n.chd(a,"btn_r/gray").active&&t>0;s||r?o.EVENT_MESSAGEBOX("club.unlv_hint",i):(this.grade<=i&&t>0&&(e=c.CLUB_GRADE_NUM),t<0&&this.grade==-t&&(e=i),this.grade=e,n.text(a,"label",e),this.refrushGrade())},refrushGrade:function(){var t=r.geti("lev"),e=n.chd(this.node,"grade"),i=c.CLUB_GRADE_NUM,o=this.grade>=i,a=t>this.grade+i||this.grade<i&&t>=i;n.sh(e,"btn_l/green",o),n.sh(e,"btn_l/gray",!o),n.sh(e,"btn_r/green",a),n.sh(e,"btn_r/gray",!a)},nameTextChange:function(){this.__gname.string=n.stringMaxLength(this.__gname.string)},noticeTextChange:function(){this.__notice.string=n.stringMaxLength(this.__notice.string,100)},create:function(){var t=n.cutm();if(!(this.__create_tm&&this.__create_tm>t)){var e=this.__gname.string;if(!e||e.length<2)o.EVENT_MESSAGEBOX("Guild.gnerr");else{var i=this.__notice.string,c=this.type,r=this.grade,l={gname:e,notice:i,type:c,limitlev:r,gicon:this.gicon},h=this;s.loadJson("data/markwords",function(t){var i=t.words;for(var n in i)if(e.indexOf(i[n])>=0)return void o.EVENT_MESSAGEBOX("Guild.createnameerr");a.create(l,function(t){t.code?t.code>0?(2E3==t.code&&o.EVENT_GOLD_SHOP({name:"dialog_gold_shop"}),o.EVENT_MESSAGEBOX("Guild.create"+t.code)):o.EVENT_MESSAGEBOX("Guild.error",t.code):o.EVENT_MESSAGEBOX("Guild.createok"),h.__create_tm=0})},this),this.__create_tm=t+3E3}}}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",N7Resource:"N7Resource",UserLogic:"UserLogic",n7:"n7"}],UIClubInformation:[function(t,e,i){cc._RF.push(e,"59ab3Vy2RFLv4ceSSoSKNKL","UIClubInformation");var n=t("n7"),o=t("GameTools"),a=t("GuildLogic"),s=t("GameEvent"),c=t("StringUtils"),r=t("GameCommon"),l=t("UserLogic");cc.Class({"extends":t("UIDialog"),properties:{info:{"default":null,type:cc.Node},alter:{"default":null,type:cc.Node},btn:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){o.btnc(this.alter,"region_btn",o.makef(this.cicon,this),1),o.btnc(this.btn,"btn_green/btn",o.makef(this.joinOrEdit,this),1),o.btnc(this.btn,"btn_red/btn",o.makef(this.leave,this),1),o.btnc(this.alter,"type/btn_l",o.makef(this.changeType,this),1),o.btnc(this.alter,"type/btn_r",o.makef(this.changeType,this),1),o.btnc(this.alter,"grade/btn_l",o.makef(this.changeGrade,this,-r.CLUB_GRADE_NUM),1),o.btnc(this.alter,"grade/btn_r",o.makef(this.changeGrade,this,r.CLUB_GRADE_NUM),1),o.btnc(this.content,"btn_close",o.makef(this.close,this),1),this.__notice=o.cmpt(this.alter,"info/edit_box",cc.EditBox),o.editPchd(this.__notice,"club.describe")},showed:function(t){this.guiid=t;var e=a.instance();if(!e.guild||e.guild.guiid!=t&&t){var i=this;a.info(t,function(t){i.__showedInfo(t)})}else{var n=e.self.a;e.guild.memcnt=e.getMemCnt(),this.__showedInfo(e.guild,n)}},__showedInfo:function(t,e){this.auth=e,this.openShowActive(),this.gicon=t.gicon?1*t.gicon:0,o.initBadge(this.info,this.gicon),void 0==t.memcnt&&(t.memcnt=0),o.text(this.info,"members/num",t.memcnt+"/"+a.MAX_MEMBERS),void 0==t.gname&&(t.gname=""),o.text(this.info,"nickname",c.cut(t.gname,r.NAME_MAXS_LEN)),void 0==t.notice&&(t.notice=""),o.text(this.info,"info",t.notice),void 0==t.devote&&(t.devote=0),void 0==t.helpcnt&&(t.helpcnt=0),o.text(this.info,"score/label",t.devote),o.text(this.info,"help/label",t.helpcnt),this.__notice.string=t.notice?t.notice:"",void 0==t.limitlev&&(t.limitlev=r.OPEN_LEVEL),void 0==t.type&&(t.type=0),this.type=1*t.type,this.grade=1*t.limitlev,o.textp(this.info,"type/label",1*t.type?"club.public":"club.private"),o.text(this.info,"grade/label",t.limitlev),this.isleader=!1,e&&(this.isleader=e==a.PWR_CAPTAIN,this.lastp={notice:t.notice,type:1*t.type,level:1*t.limitlev,gicon:t.gicon});var i=l.geti("lev"),n=i>=r.OPEN_LEVEL&&i>=this.grade;o.sh(this.btn,"btn_gray",!n);var s=o.sh(this.btn,"btn_green",(this.isleader||void 0==e)&&n);if(o.sh(this.btn,"btn_red",void 0!=e),s.active){var h=e?"club.alter":"club.join";o.textp(s,"btn/label",h)}},touchBackground:function(){this.close()},cicon:function(){var t=this;s.EVENT_OPEN_DIALOG({name:"dialog_change_bager",param:{fo:function(e){t.gicon=1*e,o.initBadge(t.info,e)}},owner:"dialog_club_information"},this)},noticeTextChange:function(){this.__notice.string=o.stringMaxLength(this.__notice.string,100)},joinOrEdit:function(){if(void 0!=this.auth)if(this.alter.active){var t=this.ifAlter();if(!t)return void this.closeDialog();this.alterSet(t)}else o.textp(this.btn,"btn_green/btn/label","club.save"),o.hide(this.info,"info"),o.textp(this.alter,"type/label",this.type?"club.public":"club.private"),o.text(this.alter,"grade/label",this.grade),this.alter.active=!0,this.refrushGrade();else{var e=this;a.apply(e.guiid,function(t){t.code?t.code>0?s.EVENT_MESSAGEBOX("Guild.apply"+t.code):s.EVENT_MESSAGEBOX("Guild.error",t.code):s.EVENT_MESSAGEBOX("Guild.applyok"),e.closeDialog()})}},alterSet:function(t){var e=this;a.setting(t,function(t){t.code?t.code>0?s.EVENT_MESSAGEBOX("Guild.setting"+t.code):s.EVENT_MESSAGEBOX("Guild.error",t.code):s.EVENT_MESSAGEBOX("Guild.settingok"),e.closeDialog(),n.log("savealter:"+JSON.stringify(t))})},openShowActive:function(){o.show(this.info,"info"),this.alter.active=!1},changeType:function(){this.type=!this.type,o.textp(this.alter,"type/label",this.type?"club.public":"club.private")},changeGrade:function(t){var e=this.grade+t,i=r.OPEN_LEVEL,n=o.chd(this.alter,"grade"),a=o.chd(n,"btn_l/gray").active&&t<0,c=o.chd(n,"btn_r/gray").active&&t>0;a||c?s.EVENT_MESSAGEBOX("club.unlv_hint",i):(this.grade<=i&&t>0&&(e=r.CLUB_GRADE_NUM),t<0&&this.grade==-t&&(e=i),this.grade=e,o.text(n,"label",e),this.refrushGrade())},refrushGrade:function(){var t=l.geti("lev"),e=o.chd(this.alter,"grade"),i=r.CLUB_GRADE_NUM,n=this.grade>=i,a=t>this.grade+i||this.grade<i&&t>=i;o.sh(e,"btn_l/green",n),o.sh(e,"btn_l/gray",!n),o.sh(e,"btn_r/green",a),o.sh(e,"btn_r/gray",!a)},leave:function(){var t="club.whether_quit",e=this.quit;this.isleader&&(a.instance().guild.memcnt>1?(t="club.pass_on",e=void 0):t="club.break_up");var i={fo:e,caller:this,title:"club.quit",lab:t,yes:"confirm",no:"cancel"};s.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:i})},quit:function(){var t=this;a.leave(null,function(e){e.code?e.code>0?s.EVENT_MESSAGEBOX("Guild.quit"+e.code):s.EVENT_MESSAGEBOX("Guild.error",e.code):s.EVENT_MESSAGEBOX("Guild.quitok"),t.closeDialog()})},ifAlter:function(){var t=this.__notice.string,e=this.grade,i={notice:t,type:this.type,level:e,gicon:this.gicon},n=0;for(var o in i){if(i[o]!=this.lastp[o])break;n++}return n>=4?null:i},close:function(){if(this.alter.active&&this.ifAlter()){var t={fo:this.closeDialog,caller:this,title:"club.ifsave",lab:"club.issaveto",yes:"club.nosave",no:"back",cbefore:1};return void s.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:t,owner:"dialog_club_information"})}this.closeDialog()}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic",n7:"n7"}],UIClubListview:[function(t,e,i){cc._RF.push(e,"aa3c5GO0sJAtY7BrQaEwk4p","UIClubListview");var n=t("GameTools"),o=t("GuildLogic"),a=t("GameEvent"),s=t("StringUtils"),c=t("GameCommon"),r=t("n7");cc.Class({"extends":cc.Component,properties:{content:{"default":null,type:cc.Node},clubn:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox")},__showed:function(){var t=this;o.loopup(null,function(e){t.initClubList(e)})},initClubList:function(t){this.content.removeAllChildren(!0),this.__list=t,this.indexK=0},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];t?(this.popUI(t),this.indexK++):this.istcend=!0}},popUI:function(t){var e=cc.instantiate(this.clubn);e.parent=this.content,e.tag=1*t.guiid,n.initBadge(e,t.gicon),n.text(e,"nickname",s.cut(t.gname,c.NAME_MAXS_LEN)),void 0==t.memcnt&&(t.memcnt=1),n.text(e,"on_line",t.memcnt+"/"+o.MAX_MEMBERS),n.textp(e,"btn/label",1*t.type?"club.join":"club.apply"),n.btnc(e,"btn",n.makef(this.apply,this,this.indexK),1),n.btnc(e,"bk",n.makef(this.openMenu,this,e))},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"club"})},apply:function(t){var e=this.__list[t];if(e)if(e.guiid){var i=this;o.apply(e.guiid,function(e){if(e.code)e.code>0?a.EVENT_MESSAGEBOX("Guild.apply"+e.code):a.EVENT_MESSAGEBOX("Guild.error",e.code);else{a.EVENT_MESSAGEBOX("Guild.applyok");var o=i.content.getChildByTag(t);n.sh(o,"btn",!o),n.sh(o,"btn_gray",o)}})}else r.info("apply:ERROR:"+e.gname+":GUIID:NULL");else r.info("apply:ERROR:"+t+":IS:NULL")}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",n7:"n7"}],UIClubLookUp:[function(t,e,i){cc._RF.push(e,"49123qBfNZBT5cH3+qveNZC","UIClubLookUp");var n=t("n7"),o=t("GameTools"),a=t("GameEvent"),s=t("GuildLogic"),c=t("StringUtils"),r=t("GameCommon");cc.Class({"extends":cc.Component,properties:{top:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},instan:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node}},start:function(){this.__initEvent()},__initEvent:function(){this.input_lab=o.cmpt(this.top,"edit_box",cc.EditBox),o.btnc(this.top,"btn",o.makef(this.lookup,this),1),o.btnc(this.top,"fork",o.makef(function(){this.input_lab.string=""},this),1),this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox"),o.editPchd(this.input_lab,"club.p5_info")},lookup:function(){var t={},e=this,i=this.input_lab.string;i&&(t.gname=i),-1==s.loopup(t,function(t){t.code?a.EVENT_MESSAGEBOX("Guild.error",t.code):t.length<=0?a.EVENT_MESSAGEBOX("Guild.notfind"):e.showGuilds(t)})&&a.EVENT_MESSAGEBOX("Guild.later")},showGuilds:function(t){this.content.removeAllChildren(!0),this.__list=t,this.indexK=0,this.istcend=!1},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];t?(this.popUI(t),this.indexK++):this.istcend=!0}},popUI:function(t){var e=cc.instantiate(this.instan);e.parent=this.content,e.tag=1*t.guiid,o.initBadge(e,t.gicon),o.text(e,"nickname",c.cut(t.gname,r.NAME_MAXS_LEN)),void 0==t.memcnt&&(t.memcnt=1),o.text(e,"on_line",t.memcnt+"/"+s.MAX_MEMBERS),o.textp(e,"btn/label",1*t.type?"club.join":"club.apply"),o.btnc(e,"btn",o.makef(this.apply,this,this.indexK),1),o.btnc(e,"bk",o.makef(this.openMenu,this,e))},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"club"})},apply:function(t){var e=this.__list[t];if(e)if(e.guiid){var i=this;s.apply(e.guiid,function(e){if(e.code)e.code>0?a.EVENT_MESSAGEBOX("Guild.apply"+e.code):a.EVENT_MESSAGEBOX("Guild.error",e.code);else{a.EVENT_MESSAGEBOX("Guild.applyok");var n=i.content.getChildByTag(t);o.sh(n,"btn",!n),o.sh(n,"btn_gray",n)}})}else n.info("apply:ERROR:"+e.gname+":GUIID:NULL");else n.info("apply:ERROR:"+t+":IS:NULL")}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",n7:"n7"}],UIClubMsg:[function(t,e,i){cc._RF.push(e,"dc1bdbFR5pDYI3WiLooYBEe","UIClubMsg");var n=t("GameTools"),o=t("GameEvent"),a=t("GuildLogic"),s=t("UIFlyGold"),c=t("StringUtils"),r=t("GameCommon"),l=cc.Class({"extends":cc.Component,properties:{content:{"default":null,type:cc.Node},chat:{"default":null,type:cc.Node},msgsys:{"default":null,type:cc.Node},msgself:{"default":null,type:cc.Node},msgelse:{"default":null,type:cc.Node},msgheart:{"default":null,type:cc.Node},msgapply:{"default":null,type:cc.Node},btn_green:{"default":null,type:cc.Node},btn_gray:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node}},start:function(){var t=this;this.__lastid=0,this.__msgstr=n.cmpt(this.chat,"input/edit_box",cc.EditBox),this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox"),o.on(o.EVENT_GUILD_MESSAGE,function(t){this.event_message(t.getUserData())},this),o.on(o.EVENT_GUILD,function(t){"quit"==t.getUserData().oper&&this.content.removeAllChildren(!0)},this),n.btn(this.btn_green,n.makef(this.askHeart,this),1),n.btnc(this.chat,"btn_blue",n.makef(this.shInput,this),1),n.btnc(this.chat,"input/btn",n.makef(function(){if(l.CHAT_TIME<n.cutm()){l.CHAT_TIME=n.cutm()+5E3,t.shInput();var e=this.__msgstr.string;this.__msgstr.string="",a.chat(e)}else{var i=Math.ceil((l.CHAT_TIME-n.cutm())/1E3);o.EVENT_MESSAGEBOX("club.msg_time",i)}},this),1),this.__showed()},onDestroy:function(){o.off(this)},event_message:function(t){var e=null;switch(t.oper){case "update":var i=t.msg;i.type==a.MSGTP_HELP&&(e=this.content.getChildByTag(i.msgid),this.init_help(e,i));break;case "new":this.message(t.msg);break;case "del":(e=this.content.getChildByTag(t.msgid))&&(e.parent=null)}},getcd:function(){var t=a.instance(),e=t.guild.helpcd;return void 0==e&&(e=0),e<=0?0:e-(n.cutm()-t.guild.send_time)/1E3},shcdbtn:function(t){this.btn_green.active=t<1,this.btn_gray.active=t>0,t>0&&n.cd2(this.btn_gray,"time/time",t,n.makef(function(){this.shcdbtn(0)},this),1)},__showed:function(){var t=a.instance(),e=this.getcd();this.shcdbtn(e);var i=a.allMsg();if(i&&!(i.length<1)){this.selfid=t.self.id,this.prow=n.chd(this.msgheart,"p/progress_bk/mask").width;var o=[];for(var s in i)o.push(i[s]);o.sort(function(t,e){return t.crtime-e.crtime}),this.__list=o,this.indexK=0,this.istcend=!1}},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];t?(this.message(t),this.indexK++):this.istcend=!0}},message:function(e){var i=void 0,n=t("FamNet").pid();switch(e.type){case a.MSGTP_APPLY:i=this.msgapply;break;case a.MSGTP_NOR:i=e.sender==n?this.msgself:this.msgelse;break;case a.MSGTP_SYS:if("mod"==e.attach.split("|")[0])return;i=this.msgsys;break;case a.MSGTP_HELP:i=this.msgheart;break;default:return}var o=cc.instantiate(i);switch(o.parent=this.content,o.__msg=e,o.tag=e.msgid,o.active=!0,this.content.y+=o.height+8,e.type){case a.MSGTP_APPLY:this.init_apply(o,e);break;case a.MSGTP_NOR:this.init_chat(o,e);break;case a.MSGTP_SYS:this.init_sys(o,e);break;case a.MSGTP_HELP:this.init_help(o,e)}},init_apply:function(t,e){var i=e.content.split("|");n.text(t,"nickname",c.cut(i[2],r.NAME_MAXL_LEN)),n.btnc(t,"btn_green",n.makef(function(){this.oper_apply(e,1)},this),1),n.btnc(t,"btn_red",n.makef(function(){this.oper_apply(e,0)},this),1)},oper_apply:function(t,e){var i={msgid:t.msgid,oper:e},n=this;a.operap(i,function(t){t.code?o.EVENT_MESSAGEBOX("Guild.operaperr",t.code):(e?o.EVENT_MESSAGEBOX("Guild.operapok"):o.EVENT_MESSAGEBOX("Guild.operapno"),i.oper="del",n.event_message(i))})},init_chat:function(t,e){n.text(t,"nickname",c.cut(e.attach,r.NAME_MAXL_LEN));var i=e.content,o=i.split("|");"i18n"==o[0]&&2==o.length&&(i=n.i18ns(o[1],[e.attach])),n.text(t,"msg",i),n.text(t,"time",n.timeAgo(e.crtime)),t.tag=e.gid,n.btn(t,n.makef(this.openMenu,this,t))},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"msg"})},init_sys:function(t,e){var i=e.attach.split("|"),o="Guild."+i[0];if("auth"==i[0]){var a=[];a[0]=e.content,a[1]=n.i18ns("Guild.auth_"+i[2]),i=a}else i=e.content?e.content.split("|"):[];i[2]=c.cut(i[2],r.NAME_MAXL_LEN),n.textp(t,"label",o,i)},init_help:function(t,e){n.text(t,"nickname",c.cut(e.content,r.NAME_MAXL_LEN));var i=e.attach.split("|"),l=i.length;if(1==l&&""==i[0]&&(l=0),e.sender==this.selfid)this.refreshHelp(t);else for(var h=0;h<l;h++)if(i[h]==this.selfid){this.refreshHelp(t);break}var u=e.count,d=n.chd(t,"p/progress_bk");n.chd(d,"mask").width=this.prow*(l/u),n.text(d,"label",3*l+"/"+3*u);var f=n.chd(t,"btn"),g=this;n.btn(f,function(){a.helpto(t.tag,function(e,i){e.code?o.EVENT_MESSAGEBOX("Guild.error",e.code):(g.refreshHelp(t),(new s).__showed({name:i.k,posn:f,count:i.v}))})},1)},refreshHelp:function(t){n.show(t,"grey"),n.hide(t,"btn")},askHeart:function(){if(this.getcd()>0)o.EVENT_MESSAGEBOX("club.ask_time");else{var t=this;a.nhelp(null,function(){var e=a.instance().guild.helpcd;t.shcdbtn(e)})}},shInput:function(){var t=n.chd(this.chat,"input");t.active=!t.active}});l.CHAT_TIME=0,cc._RF.pop()},{FamNet:"FamNet",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UIFlyGold:"UIFlyGold"}],UIClubTreasure:[function(t,e,i){cc._RF.push(e,"a8ddfxQleRBw4Ls8hZGHd8r","UIClubTreasure");var n=t("GameTools"),o=t("GameEvent"),a=t("ActivityLogic"),s=t("GuildLogic"),c=t("GameCommon"),r=t("UserLogic"),l=t("StringUtils"),h=t("WorkData");cc.Class({"extends":t("UIDialog"),properties:{btn_help:{"default":null,type:cc.Node},time:{"default":null,type:cc.Node},content_lay:{"default":null,type:cc.Node},obj1:{"default":null,type:cc.Node},obj2:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node},complete:{"default":null,type:cc.Node},progressn:{"default":null,type:cc.Node},clubn:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent(),this.init()},__initEvent:function(){n.btn(this.btn_help,n.makef(this.openHelp,this),1),n.btnc(this.complete,"btn_green",n.makef(this.getAward,this),1),this.pro_width=n.chd(this.progressn,"mask").width},showed:function(){var t=a.get("chp"),e=0;t&&t.start_tm&&(e=n.getTmrByDay(t.start_tm,t.day,!0)),n.cd2(this.time,"label",parseInt(e/1E3),n.makef(function(){},this),1)},init:function(){var t=s.instance();if(this.initInfo(t&&t.guild?t.guild:void 0),t&&t.members){this.selfid=r.pid();var e=t.members,i=Object.keys(e).sort(function(t,i){return e[i].l-e[t].l}),o=void 0,a=void 0,h=void 0,u=void 0;for(var d in i)if(o=e[i[d]]){a=this.popPlayerUI(o.id),h=n.chd(a,"ranking"),u=1*d+1,n.sh(h,"1",1==u),n.sh(h,"2",2==u),n.sh(h,"3",3==u);var f=n.sh(h,"num",u>3);u>3&&f.getComponent("AtlasText").setText(u);var g=n.chd(a,"name");n.text(g,"name",l.cut(o.n,c.NAME_MAXS_LEN)),n.sh(g,"1",o.a==s.PWR_CAPTAIN),n.sh(g,"2",o.a==s.PWR_VICEC),n.text(a,"star/num",o.l),o.id==this.selfid&&(this.pwr=o.a,this.srank=u)}this.initSelfInfo()}},popPlayerUI:function(t){var e=this.selfid==t?this.obj2:this.obj1,i=cc.instantiate(e);return i.parent=this.content_lay,i},initInfo:function(t){t||(t={gname:n.i18ns("no_club"),gicon:0}),n.text(this.clubn,"name",l.cut(t.gname,c.NAME_MAXL_LEN)),n.initBadge(this.clubn,t.gicon);this.complete.active=!1,this.progressn.parent.active=!0;var e="";e="treasure.info1",n.text(this.progressn,"label","12/120"),n.chd(this.progressn,"mask").width=.1*this.pro_width,n.textp(this.content,"info/label",e)},initSelfInfo:function(){var t=n.chd(this.self,"name");n.text(t,"name",l.cut(r.get("nkname"),c.NAME_MAXS_LEN)),n.sh(t,"1",this.pwr==s.PWR_CAPTAIN),n.sh(t,"2",this.pwr==s.PWR_VICEC);var e=h.get(h.WKD_CHP_STAR);n.text(this.self,"star/num",e),this.initSelfRank()},initSelfRank:function(){var t=this.srank,e=n.chd(this.self,"ranking");n.sh(e,"1",1==t),n.sh(e,"2",2==t),n.sh(e,"3",3==t);var i=n.sh(e,"num",t>3);t>3&&i.getComponent("AtlasText").setText(t)},openHelp:function(){o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_club_treasure",param:{text:"treasureRule"}})},getAward:function(){var e=void 0;for(var i in e)"gold"!=e[i].k&&"silver"!=e[i].k||(e[i].u=1);var n=function(){r.award(e,"treasure"),callFunc&&callFunc.call(caller,0)}.bind(this);e.callFunc=n,o.EVENT_OPEN_DIALOG({name:t("GameConfig").get("award_low")?"dialog_get_item_low":"dialog_get_item",param:e})}}),cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic",WorkData:"WorkData"}],UIColorLamp:[function(t,e,i){cc._RF.push(e,"533efBX7KxP4azybqHfWOVF","UIColorLamp");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{animation:{type:cc.Animation,"default":null},pin:{type:cc.Node,"default":null},atlas:{type:cc.SpriteAtlas,"default":null},pinCount:4},onLoad:function(){},test:function(){this.scheduleOnce(function(){this.addColor(2)},1),this.scheduleOnce(function(){this.addColor(4)},4)},initUI:function(){if(this.animation||(this.animation=this.node.getComponent(cc.Animation),this.animation.on("finished",this.playEnd,this)),!this._pinList){this._pinList=[];for(var t=1;t<=6;t++){var e=this.pin.getChildByName("fan"+t);this._pinList.push(e.getComponent(cc.Sprite))}}},init:function(t,e){this.pinCount=1*t,this.count=0,this.initUI(),this.setPinCount(this.pinCount,e)},setPinCount:function(t,e){for(var i=n.colors_def[e],o=360/t,a=0,s=0;s<t;s++){var c=this._pinList[s];c.node.rotation=a,a+=o,c.node.active=!0,c.spriteFrame=this.atlas.getSpriteFrame("fan_"+(i||n.colors_def[s]))}for(var r=t,l=this._pinList.length;r<l;r++)this._pinList[r].node.active=!1},setData:function(t,e,i,o){if(e)this.callFunc=i,this.caller=o,this.addColor(t.color),this.callFunc.call(this.caller,n.CUBE_SETPARAM_NEXT);else if(i&&i.call(o,n.CUBE_SETPARAM_ALL),t.colors)for(var a=0;a<this.pinCount;a++)-1==t.colors[a]&&(this._pinList[a].spriteFrame=this.atlas.getSpriteFrame("fan_white"))},playEnd:function(){this.playing=!1,this.callFunc&&(this.callFunc.call(this.caller,n.CUBE_SETPARAM_END|n.CUBE_SETPARAM_START),this.callFunc=this.caller=null),this.playEndDestroyAnim()},addColor:function(t){this.count++,this.animation.play("anim_pinwheel_turn"),this._pinList[t].spriteFrame=this.atlas.getSpriteFrame("fan_white"),this.playing=!0,this.sound(0)},destroyMe:function(t,e,i){this.destroyCall={callFunc:e,caller:i,params:t},this.sound(1),this.playing||this.playEndDestroyAnim()},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i)}}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UICopter:[function(t,e,i){cc._RF.push(e,"257a2y2VOFLKoJvTEcieEu2","UICopter");var n=t("GameCommon"),o=t("N7Resource"),a=t("N7UIEffectLayer"),s=cc.Class({"extends":t("UIBlock"),properties:{dog:{type:cc.Node,"default":null},altas:{type:cc.SpriteAtlas,"default":null},flyPrefab:{type:cc.Prefab,"default":null}},statics:{amplay:["Helicopter_idle","Helicopter_run"]},onLoad:function(){},start:function(){this.playAni(0)},init:function(t){},getGoal:function(){return{node:o.createPrefab(this.flyPrefab,"goal_base"),pos:a.getPos(this.dog),isDown:!1}},setData:function(t,e,i,o,a){e?(this.sound(0),this.playAni(t.copter),i.call(o,n.CUBE_SETPARAM_ALL)):(i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.copter&&this.playAni(t.copter))},playAni:function(t){var e=s.amplay[t];null==e&&(e=s.amplay[0]),this.dog.getComponent(cc.Animation).play(e)},destroyMe:function(t,e,i){this.destroyCall={callFunc:e,caller:i,params:t},this.playing||this.playEndDestroyAnim()},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i)}}});cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock"}],UICrayon:[function(t,e,i){cc._RF.push(e,"5177c3G075GebU0n++UAIoN","UICrayon");var n=t("N7UIEffectLayer"),o=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{animation:{type:cc.Animation,"default":null},pen:{type:cc.Node,"default":null},atlas:{type:cc.SpriteAtlas,"default":null}},onLoad:function(){this.animation.on("finished",this.playEnd,this)},test:function(){this.scheduleOnce(function(){this.addColor(2)},1),this.scheduleOnce(function(){this.addColor(4)},4)},initUI:function(t,e){var i=this.pen;this._pinList=[];for(var n=1;n<=6;n++){var o=i.getChildByName("fan"+n),a=o.getComponent(cc.Sprite);if(n>t)o.active=!1;else{o.active=!0,this._pinList.push(a);var s=null!=e?e:n-1;a.spriteFrame=this.atlas.getSpriteFrame("crayon"+s)}}},init:function(t,e){this.pinCount=1*t,this.pinColor=e,this.count=0,this.initUI(this.pinCount,e)},setData:function(t,e,i,n){if(e)this.addColor(t.color),i.call(n,o.CUBE_SETPARAM_ALL);else if(i&&i.call(n,o.CUBE_SETPARAM_ALL),t.colors)for(var a=0;a<this.pinCount;a++)-1==t.colors[a]?(this.count++,this._pinList[a].node.opacity=0):this._pinList[a].node.opacity=255},addColor:function(t){this.count++,this.animation.play("crayon_box_idle"),this._pinList[t].node.opacity=0,this.sound(0);var e=n.getPos(this._pinList[t].node);this.createEffect(0,function(i){i&&(i.setTexture(null!=this.pinColor?this.pinColor:t,this._pinList[t].spriteFrame),i.node.position=e)},this)},destroyMe:function(t,e,i){if(this.destroyCall)return e.call(i),void(n7.isDebug&&n7.log("UICrayon gid:"+this.tile.gid+" destroyMe 2"));this.destroyCall={cmd:t,callfun:e,caller:i},this.doDestroy()},doDestroy:function(){this.count<this.pinCount||(this.sound(0),this.destroyCall&&(this.destroyCall.callfun.call(this.destroyCall.caller,this.destroyCall.cmd),this.destroyCall=null))},playEnd:function(t){this.destroyCall&&this.doDestroy()}}),cc._RF.pop()},{GameCommon:"GameCommon",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock"}],UICubeAnim:[function(t,e,i){cc._RF.push(e,"cb4422flZ5JkoZyBzMl7AAx","UICubeAnim"),cc.Class({"extends":t("UICube"),properties:{},onLoad:function(){this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this))},start:function(){},playEnd:function(){},destroyMe:function(e,i,n){this.destroyCall={callFunc:i,caller:n,params:e},t("N7Sound").playSound(90025),this.anim.play()}}),cc._RF.pop()},{N7Sound:"N7Sound",UICube:"UICube"}],UICubeSender:[function(t,e,i){cc._RF.push(e,"a6daaCgqP5A8YQD5/QSsm+e","UICubeSender");var n=t("UIGameV2"),o=t("GameCommon"),a=t("CoolArray");cc.Class({properties:{},ctor:function(){this.gids={},this.cols=[];for(var t=0;t<9;t++)this.cols[t]={time:0,list:new a,c:0}},find:function(t){var e=this.gids[t],i=!1;return void 0!=e&&this.cols[e].list.forEach(function(e,n){if(t==e.gid)return i=!0,!0},this),i},push:function(t,e,i,n){var o=null;void 0==this.gids[i]?(o={gid:i,list:[{com:e,cmd:t}]},this.cols[n].list.push(o),this.gids[i]=n):this.cols[this.gids[i]].list.forEach(function(n,o){return i==n.gid&&(n.list.push({com:e,cmd:t}),!0)},this)},remove:function(t,e,i){var n=this.gids[t],o=[];if(void 0!=n){delete this.gids[t];var a=this.cols[n];a.list.forEach(function(n,a){if(t==n.gid){for(var s in n.list)e.call(i,n.list[s]);return o.push(a),!0}return!1},this);for(var s=o.length-1;s>=0;s--)a.list.remove(o[s])}return o.length>0},update:function(t){for(var e in this.cols){var i=this.cols[e];if(!(i.time<=0&&i.list.length<=0||(i.time=i.time-t,i.time>0))){var a=i.list.shift();if(a){for(var s in a.list){var c=a.list[s];n.instance().doDownCube(c.cmd,c.com)}i.time=0,i.list.length?(i.time=o.CUBE_DOWN_SEND_TM,i.c++):i.c=0}}}}}),cc._RF.pop()},{CoolArray:"CoolArray",GameCommon:"GameCommon",UIGameV2:"UIGameV2"}],UICube:[function(t,e,i){cc._RF.push(e,"07656TOiM5CI5xiQJMj+1IR","UICube"),cc.Class({"extends":t("UIBlock"),properties:{},onLoad:function(){},start:function(){},setFrame:function(t){this.sprite||(this.sprite=this.getComponent(cc.Sprite)),this.sprite.spriteFrame=t},getFrame:function(){return this.sprite.spriteFrame}}),cc._RF.pop()},{UIBlock:"UIBlock"}],UIDialogFullScreenBg:[function(t,e,i){cc._RF.push(e,"85f3flXcyJF/o834AE7OBNf","UIDialogFullScreenBg"),t("n7");var n=t("N7FitScreen");cc.Class({"extends":cc.Component,properties:{owner:{type:cc.Node,"default":null},splitJointChild:!1},onLoad:function(){var t=n.instance();this.fitWidht=t.fitWidht,this.fitHeight=t.fitHeight,this.fit()},fit:function(){if(this.orgWidth=this.node.width,this.orgHeight=this.node.height,this.splitJointChild){this.list=[];var t=this.node.children;for(var e in t){var i=t[e];this.list.push({node:i,width:i.width,height:i.height})}}this.fitWidht&&this.initFitWidth()},initFitWidth:function(){var t=n.instance();if(this.fitHeight&&(this.node.height=this.orgHeight/t.content.scaleY),this.fitWidht){var e=this.orgWidth/t.content.scaleX;this.node.width=e;var i=this.list;for(var o in i){var a=i[o];a.node.width=a.width/t.content.scaleX}}}}),cc._RF.pop()},{N7FitScreen:"N7FitScreen",n7:"n7"}],UIDialogPages:[function(t,e,i){cc._RF.push(e,"556b4b7BSRFK6nG12x+yQHE","UIDialogPages");var n=t("GameTools"),o=t("GameCommon"),a=t("GameEvent");cc.Class({"extends":cc.Component,properties:{pages:{"default":null,type:cc.Node},contents:{"default":null,type:cc.Node},fun:{"default":null,type:cc.Component.EventHandler},index:1},onLoad:function(){this.__init()},__init:function(){var t,e;for(this.pageobjs=[],this.contobjs=[],e=1;e<10&&null!=(t=n.chd(this.pages,"page"+e));e++)this.pageobjs[e-1]={node:t,off:n.chd(t,"off"),on:n.chd(t,"on")},this.__on(t,e);for(e=1;e<10&&null!=(t=n.chd(this.contents,"content"+e));e++)this.contobjs[e-1]=t;e=this.index,this.index=0,this.select(e)},__on:function(t,e){t.on(o.touchend,function(t){this.select(e)},this)},select:function(e){if(e!=this.index){t("N7Sound").playSound(90122),this.fun&&this.fun.emit([e]);var i=this.index-1;this.btnStatu(i,!1),this.btnStatu(e-1,!0),this.index=e}},left:function(){this.index>1&&this.select(this.index-1)},right:function(){this.index<this.pageobjs.length&&this.select(this.index+1)},btnStatu:function(t,e){var i;t<0||(t<this.pageobjs.length&&((i=this.pageobjs[t]).off.active=!e,i.on.active=e),t<this.contobjs.length&&((i=this.contobjs[t]).active=e))},onDestroy:function(){a.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",N7Sound:"N7Sound"}],UIDialog:[function(t,e,i){cc._RF.push(e,"959b8Oe4NFI26HGIC9jvfYP","UIDialog");var n=t("GameTools"),o=t("GameEvent"),a=t("TDLog"),s=t("GuideLogic"),c=t("n7"),r=t("N7Sound"),l=t("N7Resource"),h=t("SdkIns");cc.Class({"extends":t("UILayer"),properties:{background:{type:cc.Node,"default":null},floor:{type:cc.Node,"default":null},bannerNode:{type:cc.Node,"default":null},clickBgClose:!1,resizeBackground:!0,dialogCapture:!0,dialogLayer:0,dialogResult:0,closeButton:{type:cc.Node,"default":null},content:{type:cc.Node,"default":null},manual_play_ani:{"default":!1},effectList:[cc.Integer],soundList:[cc.Integer]},statics:{DIALOG_RESULT_OK:0,DIALOG_RESULT_CANCEL:1,DIALOG_RESULT_CLOSE:100},onLoad:function(){c.isDebug&&(new (t("N7CheckRes"))).start(this.node),this._super();var e=this.node.getComponent(cc.Animation);if(e){var i=this;e.on("finished",function(){i.flyInEnd()})}this.background&&this.dialogCapture&&n.capture(this.background,this.touchBackground,this),this.floor&&this.dialogCapture&&n.capture(this.floor,function(){},this),this.closeButton&&n.btn(this.closeButton,n.makef(this.closeDialog,this),1),this.loaded=!0,void 0!=this.__param&&this.__showed(this.__param)},onDestroy:function(){o.off(this)},touchBackground:function(){this.clickBgClose&&s.canCloseBK(this.node.name)&&this.closeDialog()},showDialog:function(e,i){var n=t("N7UIManager");n.instance().showDialog(this),this.owner=i,i&&n.instance().clearDialogTime(i),this.__show(e),a.Event("dlg_"+this.node.name,{show:1})},__show:function(t){this.loaded?this.__showed(t):this.__param=t},__showed:function(t){if(h.instance().dialogShow({obj:this}),this.showed(t),this.__active=!0,this.content&&(this.content.active=!0),!this.manual_play_ani){var e=this.node.getComponent(cc.Animation);if(e){var i=e.play();i.wrapMode=cc.WrapMode.Normal,i.speed=1}}},showed:function(t){},openOwenr:function(){h.instance().dialogClose({obj:this});var e=t("N7UIManager").instance();if(this.owner){var i=e.showDialogFromName(this.owner);i&&i.dialogResume&&i.dialogResume()}else e.closeDialog(this.node.name,this)},closeDialog:function(){if(this.__active=!1,this.manual_play_ani)return this.node.active=!1,void this.openOwenr();var t=this.node.getComponent(cc.Animation);t?this.playCloseDialog(t):(this.openOwenr(),this.node.active=!1),a.Event("dlg_"+this.node.name,{close:1})},playCloseDialog:function(t){var e=t.play();e.wrapMode=cc.WrapMode.Reverse,e.speed=2,this.content&&(this.content.active=!1)},closeDialog_notfly:function(){this.__active=!1,this.node.active=!1,a.Event("dlg_"+this.node.name,{close:1}),this.openOwenr()},flyInEnd:function(){this.node.active=this.__active,this.node.active||this.openOwenr(),this.onUiFlyInEnd(this.__active)},onUiFlyInEnd:function(t){},resetSize:function(){if(this._super(),this.fullscreen){var e=t("N7FitScreen").instance();this.background&&(this.background.scale=e.backgroundScale/e.content.scale,this.backgroundOldY||(this.backgroundOldY=this.background.y),this.background.y=this.backgroundOldY+(e.isPhoneX?-e.content.y:0)),e.content&&(this.node.width=e.content.width,this.node.height=e.content.height),this.content&&(this.content.width=this.node.width,this.content.height=this.node.height)}},sound:function(t){t>=0&&t<=this.soundList.length&&r.playSound(this.soundList[t])},preload:function(t){if(!this.isPreloaded){var e=[];if(this.effectList)for(var i in this.effectList)e.push(this.effectList[i]);if(this.soundList)for(var n in this.soundList)e.push(this.soundList[n]);var a=e.length;o.EVENT_GAME_LOADDATA(e.length,0),0!=a?l.preloadResList(e,function(e,i,n){if(!e)return o.EVENT_GAME_LOADDATA(n.count,n.finish),void(--a<=0&&n.allFinish&&t());--a<=0&&n.allFinish&&(this.isPreloaded=!0,t())},this):t()}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",N7CheckRes:"N7CheckRes",N7FitScreen:"N7FitScreen",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIManager:"N7UIManager",SdkIns:"SdkIns",TDLog:"TDLog",UILayer:"UILayer",n7:"n7"}],UIDial:[function(t,e,i){cc._RF.push(e,"146f5E947NL8q1JO40+a0GU","UIDial");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("MathUtils"),c=t("ShareLogic"),r=t("WorkData"),l=cc.Class({"extends":t("UIDialog"),properties:{btn_get:{"default":null,type:cc.Node},help:{"default":null,type:cc.Node},laycon:{"default":null,type:cc.Node},giftn:{"default":null,type:cc.Node},gift:{"default":null,type:cc.Node},light:{"default":null,type:cc.Node},bk:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.initEvent(),this.initData()},initEvent:function(){n.btn(this.btn_get,n.makef(this.getOrWatch,this),1),n.btn(this.help,n.makef(this.OpenHelp,this),1),n.btn(this.gift,n.makef(this.openGiftAwds,this)),n.btn(this.bk,n.makef(function(){},this)),o.on(o.EVENT_OPEN_DIALOG,function(t){this.giftn.active&&this.giftn.getComponent("UIPopBase").close()},this)},showed:function(){this.bk.active=!1;var t=c.getWatchOrShare(118).condition;if(n.sh(this.content,"btn_gray",!t),this.btn_get.active=t,t){var e=r.get(r.WKD_DIAL_GIFT);this.isads=!1,e&&(this.isads=n.isEqualDay(!0,e));var i=n.chd(this.btn_get,"p");n.sh(i,"ads",this.isads),n.textp(i,"label",this.isads?"dial.ads":"dial.free")}},initData:function(){var t=l._PREWAR_,e=void 0,i=void 0;for(var o in t)if(e=n.chd(this.laycon,"item"+o),(i=t[o]).length>1){var a=n.chd(this.giftn,"tar");for(var s in i)e=n.chd(a,"tar"+s),this.initItem(e,i[s])}else this.initItem(e,i[0])},initItem:function(t,e){var i=a.itemn(e.k);n.imgs(t,i.icon,"icon"),n.textp(t,"name","item_list."+i.id);var o="unheart"==e.k?"h":"";n.text(t,"num","x "+e.v+o)},getOrWatch:function(){this.isads?c.showAndWatchOrShare(118,null,function(t){t&&t.dt&&0==t.dt.code&&this.getDial()},this):(r.set(r.WKD_DIAL_GIFT,n.getCurtm(!0)),this.getDial())},getDial:function(){this.bk.active=!0,this.cardId=0,this.number=this.randNum(),this.awd=l._PREWAR_[this.number],this.agoNum=27,this.schedule(this.updateCadeAgo,.05,26)},updateCadeAgo:function(){this.agoNum--,this.updateLight(),this.agoNum<=0&&this.schedule(this.updateCard,.3,this.number)},updateCard:function(){this.number--,this.updateLight(),this.number<=0&&this.changeThis()},updateLight:function(){var t=n.chd(this.laycon,"item"+this.cardId);this.light.parent=t,this.light.position=cc.p(0,0),this.cardId<8?this.cardId++:this.cardId=0},changeThis:function(){var t=this.light.getComponent(cc.Animation);t.play(),t.on("finished",function(){this.getAward()},this)},getAward:function(){this.showed(),t("GameLogic").refreshDialTips();var e=this.awd;t("UserLogic").award(e,"dialRandAwd"),o.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:e,owner:"dialog_dial"})},randNum:function(){for(var t=s.randInt(1,1E3),e=l._NUMBER_,i=e.length-1,n=0;n<i;n++)if(t<e[n+1]&&t>=e[n])return n},openGiftAwds:function(){this.giftn.getComponent("UIPopBase").show()},OpenHelp:function(){o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_dial",param:{text:"dialRule"}})}});l._NUMBER_=[0,20,90,405,615,620,930,950,980,1E3],l._PREWAR_=[[{k:"Drill",v:1}],[{k:"silver",v:1200}],[{k:"PreWar_Rotor",v:1}],[{k:"PreWar_Cube",v:1}],[{k:"unheart",v:2},{k:"Rotor",v:2},{k:"Drill",v:2},{k:"ResetCube",v:2}],[{k:"PreWar_Tnt",v:1}],[{k:"ResetCube",v:1}],[{k:"gold",v:600}],[{k:"Rotor",v:1}]],cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",ShareLogic:"ShareLogic",UIDialog:"UIDialog",UserLogic:"UserLogic",WorkData:"WorkData"}],UIDogAward:[function(t,e,i){cc._RF.push(e,"c18aabfvbJJS40E+Ae+sT8P","UIDogAward");var n=t("UIDogBase"),o=cc.Class({"extends":n,properties:{},statics:{fms_pool:{idle:{name:"idle",loop:!0,anim:{name:"xiaogou_1"}},ball:{name:"ball",next:"pick",anim:{name:"xiaogou_3",loop:!1},soundId:90215},pick:{name:"pick",next:"award",anim:{name:"xiaogou_4",loop:!1}},award:{name:"award",next:"idle",anim:{name:"xiaogou_2",loop:!1},soundId:90219}}},start:function(){this._super(o.fms_pool),this.setFMS(this.fmsPool.idle)},throwBall:function(t){this.fms==this.fmsPool.idle&&(this.dialog=t,this.fms=this.fmsPool.award)},enterFMS:function(t){t!==this.fmsPool.ball&&t!==this.fmsPool.back?t!==this.fmsPool.award||this.dialog.startAward():this.dialog.playCao()},outFMS:function(t){t===this.fmsPool.award&&(this.dialog.endAward(),this.dialog=null)}});cc._RF.pop()},{UIDogBase:"UIDogBase"}],UIDogBase:[function(t,e,i){cc._RF.push(e,"0fc01Q0KNlAAa36VSNctfPM","UIDogBase");var n=t("n7"),o=t("MathUtils"),a=t("N7Sound");cc.Class({"extends":cc.Component,properties:{dog:{type:sp.Skeleton,"default":null},fms:{set:function(t){this.setFMS(t)},get:function(){return this._fms}}},start:function(t){t&&this.setFmsPool(t),this.initEvent()},setTimeScale:function(t){this.dog.timeScale=t},setFmsPool:function(t){this.fmsPool=t},onLoad:function(){this.dog||(this.dog=this.getComponent(sp.Skeleton)),this.dog||n.error("UIDogBase no find skeleton")},initEvent:function(){var t=this;this.dog.setStartListener(function(e){t.playAnimStart(e)}),this.dog.setEndListener(function(t){}),this.dog.setCompleteListener(function(e){t.playAnimEnd(e,"comp")})},setFMS:function(t){"string"==typeof t&&(t=this.fmsPool[t]),t&&this.fms!=t&&(this.fms&&this.fms.cantBreak||(this._fms&&this.outFMS(this.fms),this._fms=t,this.setAnim(t,!0)))},setAnim:function(t,e){var i=t.anim;if(t.anim)if(i.list)if(i.rand){var n=void 0;n=void 0!=i.odds?o.randOdds(i,0):o.randArray(i.list),this.playAnim(n,i.loop)}else e?this.animIdx=0:++this.animIdx>=i.list.length&&(this.animIdx=0),this.playAnim([this.animIdx],i.loop);else this.playAnim(i.name,i.loop)},setListener:function(t,e){this.callFunc=t,this.caller=e},enterFMS:function(t){this.callFunc&&this.callFunc.call(this.caller,1,t)},outFMS:function(t){this.callFunc&&this.callFunc.call(this.caller,2,t)},playAnim:function(t,e){this.dog.setAnimation(0,t,e)},playAnimStart:function(t){this.fms&&(this.fms.soundId&&a.playSound(this.fms.soundId),this.enterFMS(this.fms))},playAnimEnd:function(t,e){if(this.fms){if(this.fms.next){var i=this.fms.next;return this._fms&&this.outFMS(this.fms),this._fms=null,void(this.fms=this.fmsPool[i])}this.fms.loop&&this.setAnim(this.fms,!1)}}}),cc._RF.pop()},{MathUtils:"MathUtils",N7Sound:"N7Sound",n7:"n7"}],UIDogHead:[function(t,e,i){cc._RF.push(e,"02c69KmWBVAtrdXDRuGB1rM","UIDogHead");var n=t("GameEvent"),o=t("UIDogBase"),a=cc.Class({"extends":o,properties:{},statics:{fms_pool:{idle:{name:"idle",loop:!0,anim:{list:[{data:"xiaogou_1",odds:52},{data:"xiaogou_2",odds:12},{data:"xiaogou_7",odds:12},{data:"xiaogou_6",odds:12},{data:"xiaogou_8",odds:12}],odds:100,loop:!1,rand:!0}},happy1:{name:"happy1",next:"idle",anim:{list:["xiaogou_7","xiaogou_6"],loop:!1,rand:!0},cantBreak:!0},happy2:{name:"happy2",next:"idle",anim:{list:["xiaogou_7","xiaogou_6"],loop:!1,rand:!0},cantBreak:!0},happy3:{name:"happy3",next:"idle",anim:{name:"xiaogou_5",loop:!1},cantBreak:!0}}},onLoad:function(){},start:function(){this._super(a.fms_pool),this.fms=this.fmsPool.idle,n.on(n.EVENT_GAME_DOG_HAPPY,this.dogHappy,this),n.on(n.EVENT_GAME_DOG_SAD,this.dogSad,this)},onDestroy:function(){n.off(this)},dogHappy:function(t){this.fms="happy"+(t.getUserData()||1)},dogSad:function(){},dogWin:function(){this.fms="win"}});cc._RF.pop()},{GameEvent:"GameEvent",UIDogBase:"UIDogBase"}],UIDogToy:[function(t,e,i){cc._RF.push(e,"64e31xe8v5C/r/h6grz+jSe","UIDogToy");var n=t("n7"),o=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{altas:{type:cc.SpriteAtlas,"default":null},whiteBall:{type:cc.Sprite,"default":null},ball:{type:cc.Sprite,"default":null}},statics:{COLORS:[new cc.Color(255,255,0,255),new cc.Color(252,0,0,255),new cc.Color(0,0,255,255),new cc.Color(0,255,0,255),new cc.Color(160,32,240,255),new cc.Color(255,97,0,255),new cc.Color(255,255,255,255)]},onLoad:function(){},start:function(){},getCubeData:function(){return this.color},setData:function(t,e,i,n,a){this.data=t,this.playChg(e),e&&(this.callFunc=i,this.caller=n,this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this)),this.animState=this.am.play()),i&&i.call(n,e?o.CUBE_SETPARAM_STARTNEXT:o.CUBE_SETPARAM_ALL)},playChg:function(t){var e=this.data;if(this.color=e.curColor,null!=e.curColor){var i="Rubber-ball_white";null!=o.colors_def[e.curColor]&&(i="Rubber-ball_"+o.colors_def[e.curColor]),this.ball.spriteFrame=this.altas.getSpriteFrame(i),this.ball.node.opacity=t?0:255,this.whiteBall.enabled=!!t}else this.ball.node.opacity=0,this.whiteBall.enabled=!0},playEnd:function(){this.animState=null,this.whiteBall.enabled=!1,this.createEffect(0,function(t){t.setDatas(this.color)},this),this.callFunc&&this.callFunc.call(this.caller,o.CUBE_SETPARAM_END),this.callFunc=this.caller=null,this.destroyCall&&this.playDestroyAnim()},destroyMe:function(t,e,i){if(this.destroyCall)return e.call(i),void(n.isDebug&&n.log("UIDogToy gid:"+this.tile.gid+" destroyMe 2"));this.destroyCall={cmd:t,callfun:e,caller:i},this.animState?n.isDebug&&n.log("UIDogToy gid:"+this.tile.gid+" destroyMe 3"):this.playDestroyAnim()},playDestroyAnim:function(){this.animState?n.isDebug&&n.log("UIDogToy gid:"+this.tile.gid+" playDestroyAnim out"):(n.isDebug&&n.log("UIDogToy gid:"+this.tile.gid+" playDestroyAnim"),this.destroyCall&&(n.isDebug&&n.log("UIDogToy gid:"+this.tile.gid+" playEnd destroy"),this.destroyCall.callfun.call(this.destroyCall.caller),this.destroyCall=null))}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock",n7:"n7"}],UIDolls:[function(t,e,i){cc._RF.push(e,"9b7f6qDpnpHc6IsYPBmbBM8","UIDolls");var n=t("GameCommon"),o=cc.Class({"extends":t("UIBlock"),properties:{},statics:{IDLE:0,CANT:1},start:function(){},onLoad:function(){},init:function(t){this.count=1*t,this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",function(){this.playEnd()},this)),this.play(o.IDLE)},setData:function(t,e,i,a){e?(this.count=1*t.count,this.createEffect(this.count),this.play(o.IDLE)):(this.count=1*t.count,this.play(o.IDLE)),i&&i.call(a,n.CUBE_SETPARAM_ALL)},play:function(t){var e="martlight"+this.count;t==o.IDLE?e+="_idle":e+="_star",this.state=t,this.anim.play(e)},playEnd:function(){this.state==o.CANT&&this.play(o.IDLE)}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIEgg:[function(t,e,i){cc._RF.push(e,"9f2e3pbT5hLlJ5yTAWuMkRT","UIEgg");var n=cc.Class({"extends":t("UIBlock"),properties:{sprite:{"default":null,type:cc.Sprite},atlas:{"default":null,type:cc.SpriteAtlas}},statics:{anims:["","egg_jitter"],spriteframes:["easter01","easter02"]},init:function(t){this.hadInit||(this.anim=this.getComponent(cc.Animation),this.anim&&this.anim.on(this.callPlayEnd,this),this.hadInit=!0),this.setSprite(t)},setData:function(t,e,i,n,o){e?(this.setCallPlayEnd(function(){this.setSprite(state),i&&i.call(n,GameCommon.CUBE_SETPARAM_STARTEND)},this),this.anim.play(),i&&i.call(n,GameCommon.CUBE_SETPARAM_NEXT)):i&&i.call(n,GameCommon.CUBE_SETPARAM_ALL)},setSprite:function(t){this.sprite.spriteFrame=this.atlas.getSpriteFrame(n.spriteframes[t])}});cc._RF.pop()},{UIBlock:"UIBlock"}],UIFAQ:[function(t,e,i){cc._RF.push(e,"1630eB6tshPxII662dvdcbv","UIFAQ"),t("GameTools"),cc.Class({"extends":t("UIDialog"),properties:{layout_label:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent(),this.view_l=this.layout_label.y},__initEvent:function(){},showed:function(){this.layout_label.y=this.view_l}}),cc._RF.pop()},{GameTools:"GameTools",UIDialog:"UIDialog"}],UIFlyGold:[function(t,e,i){cc._RF.push(e,"f277bDQYzFC6IYxhYf+Umny","UIFlyGold");var n=t("GameTools"),o=t("N7Resource"),a=t("MathUtils"),s=t("N7UIFlyLayer"),c=t("UserLogic"),r=t("UIMainV2"),l=t("N7Sound"),h=cc.Class({"extends":cc.Component,properties:{},statics:{FLYTO_GOLD_PARAMS:{len1:400,len2:300,p1:{set:270},p2:{set:270},time:.7}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){},__showed:function(t){var e=null;if(t.fo&&(this.fo=t.fo),t.ton)this._onFlyItem(t.ton,t.posn);else{var i=t.name;"gold"==i||"silver"==i?("gold"==i?e=r.instance().topbar.goldIcon:"silver"==i&&(e=r.instance().topbar.silverIcon),this._onFlyGold(i,e,t.posn,t.count)):(e="heart"==i||"unheart"==i||"BigLives"==i||"MidLives"==i||"TinyLives"==i?r.instance().topbar.heartIcon:r.instance().btn_backpack,this._onFlyItem(e,t.posn))}},_onFlyGold:function(t,e,i,n){l.playSound(90180);for(var o=n>=6?6:n,a=parseInt(n/o),c=n%a,r=.12,h=s.getPos(e),u=s.getPos(i),d=0;d<o;d++)n-=c&&d==o-1?a+c:a,this.flyGold(t,u,h,n,r,e),r+=.12},flyGold:function(t,e,i,r,u,d){var f=h.FLYTO_GOLD_PARAMS,g=o.createNodeFromId(5644,"effect_goal_fly");g.showgs("gold"==t);var p=a.randRadian(),_=a.randInt(40,100),m=a.getAimPointOffset(e.x,e.y,p,_,_);_=m.x-i.x,f.len2=i.y-m.y,0!=_&&(f.p1.set=a.angle(m,cc.p(i.x,m.y-400)));var v=n.createBrizer(m,i,f),E=[cc.spawn(cc.fadeIn(.2),cc.scaleTo(.4,1,1)),cc.delayTime(u),v.easing(cc.easeIn(2.5)),cc.callFunc(function(){n.text(d.parent,"label",n.kmb(c.geti(t)-r)),l.playSound(90158);var e=[cc.scaleTo(.1,.9,.9).easing(cc.easeIn(3)),cc.scaleTo(.05,1,1).easing(cc.easeOut(3))];d.parent.runAction(cc.sequence(e)),this["isPlay"+t]||(o.loadRes(5623,function(t){var e=t.node;e.position=s.getPos(d),s.node().addChild(e),t.playEffect()},this),this["isPlay"+t]=!0,this.scheduleOnce(function(){this["isPlay"+t]=!1},.3)),g.removeSelf()},this)];g.node.opacity=0,g.node.scale=.5,s.flyNodeTo(g.node,cc.sequence(E),m)},_onFlyItem:function(t,e){var i=s.getPos(e),n=s.getPos(t),a=o.createNodeFromId(5625,"effect_goal_fly"),c=cc.instantiate(e);a.content.removeAllChildren(),a.setIcon(c),c.position=cc.p(0,0),a.node.scale=e.scaleX;var r=[cc.moveBy(.14,0,-20),cc.callFunc(function(t){a.lizi.active=!0},this),cc.spawn(cc.moveTo(.8,n.x,n.y),cc.scaleTo(.8,.5,.5)),cc.callFunc(function(t){l.playSound(90182),a.lizi.active=!1,a.removeSelf(),this.fo&&this.fo()},this)];s.flyNodeTo(a.node,cc.sequence(r),i,function(){a.initEffect&&a.initEffect()},this),e.active=!1}});cc._RF.pop()},{GameTools:"GameTools",MathUtils:"MathUtils",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIFlyLayer:"N7UIFlyLayer",UIMainV2:"UIMainV2",UserLogic:"UserLogic"}],UIGameBalance:[function(t,e,i){cc._RF.push(e,"bddfeewhC5OfaZBTIt8L+Cn","UIGameBalance");var n=t("GameTools"),o=(t("GameEvent"),t("StringUtils"),t("JsonMetaCache"),t("N7Sound"));cc.Class({"extends":cc.Component,properties:{btn_continue:{"default":null,type:cc.Node},btn_ads:{"default":null,type:cc.Node},btn_noads:{"default":null,type:cc.Node},nodeGoals:{"default":null,type:cc.Node},item:{"default":null,type:cc.Node},share_btn:{type:t("ShareBtn"),"default":null}},start:function(){this.__initEvent()},__initEvent:function(){n.btn(this.btn_continue,n.makef(this.continueGame,this),1),n.btnc(this.node,"btn_close",n.makef(this.continueGame,this),1)},__showed:function(e,i,o){this.btn_ads.clickPath="btn",this.node.active=!0,this.data=e,this.mid=e.p.mid,n.textp(this.node,"lab_level","level",[this.mid]),this.star=i,this.starIdx=1,this.starLightIdx=1,this.scheduleOnce(function(){this.boneFly()},.5);var a=t("UIGameV2").instance().gameLogic.goals().getGoals();for(var s in a)a[s].meta=a[s].row;n.sh_Goals(a,this.nodeGoals,4);var c=t("ShareLogic"),r=c.checkShare(1);if(r&&(this.share_btn.node.active=!0,this.share_btn.__showed(r)),c.showAndWatch(104,this.btn_ads,function(t){t&&t.dt&&0==t.dt.code&&(this.btn_ads.active=!1,this.btn_noads.active=!0)},this)){var l=c.getAward(104),h=l?l[0].v:0;n.textp(this.btn_ads,"label","ads_notice.ads2",[h])}},continueGame:function(){this.node.active=!1,this.data.balanceEnd()},boneFly:function(){if(this.starIdx>this.star)this.starLight();else{var t=n.chd(this.item,"item"+this.starIdx);n.show(t,"bone");var e=t.getComponent(cc.Animation);e.play();var i=this;e.boneFlyEnd=function(){o.playSound(90222+i.starIdx),i.starIdx++,i.boneFlyEnd(t)}}},boneFlyEnd:function(t){this.boneFly(),n.show(t,"eff").getComponent(cc.Animation).play()},starLight:function(){this.schedule(function(){this.starLightIdx=1,this.playLight()},3)},playLight:function(){if(!(this.starLightIdx>this.star)){var t=n.cmpt(this.item,"item"+this.starLightIdx+"/mask",cc.Animation);t.play();var e=this;t.once("finished",function(){e.starLightIdx++,e.playLight()},this)}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Sound:"N7Sound",ShareBtn:"ShareBtn",ShareLogic:"ShareLogic",StringUtils:"StringUtils",UIGameV2:"UIGameV2"}],UIGameBottomV2:[function(t,e,i){cc._RF.push(e,"3e1d0mkVp9MuqFW9wW4BJWW","UIGameBottomV2");var n=t("GameTools"),o=t("GameEvent"),a=(t("effect_base"),t("N7UIFlyLayer"),t("N7UIEffectLayer"),t("GameCommon")),s=t("N7MusicV2"),c=t("N7Sound"),r=t("UserLogic");t("N7Resource"),cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null},btn_set:{"default":null,type:cc.Node},btn_eff:{"default":null,type:cc.Node},btn_music:{"default":null,type:cc.Node},btn_exit:{"default":null,type:cc.Node},btn_help:{"default":null,type:cc.Node},set_content:{"default":null,type:cc.Node},item_notice:{"default":null,type:cc.Node},useitem:{type:t("UIGameUseItem"),"default":null}},onLoad:function(){this.initUI(),this.initEvent()},onDestroy:function(){o.off(this)},initUI:function(){this.set_speed=1;var e=r.geti("lev")>2;this.btn_exit.active=e,"tb"==t("GameConfig").get("pf")&&(this.btn_eff.active=!1,this.btn_music.active=!1,this.set_speed=2),this.anim||(this.anim=this.set_content.getComponent(cc.Animation),this.anim.on("finished",this.callPlayEnd,this))},setCallPlayEnd:function(t,e){this.callEnd={callFunc:t,caller:e}},callPlayEnd:function(t){if(this.callEnd){var e=this.callEnd.callFunc,i=this.callEnd.caller;this.callEnd=null,e.call(i,t)}},getGameLogic:function(){return this.gameLogic||(this.gameLogic=t("UIGameV2").instance().gameLogic),this.gameLogic},shakeUI:function(){this.getComponent(cc.Animation).play()},initEvent:function(){this.btn_eff.on(a.touchstart,this.switchEff,this),this.btn_music.on(a.touchstart,this.switchMusic,this),this.btn_exit.on(a.touchstart,this.exitGame,this),this.btn_help.on(a.touchstart,this.openHelpDialog,this),this.item_notice.on(a.touchstart,this.hideNotice,this),n.btn(this.btn_set,n.makef(this.settings,this)),o.on(o.EVENT_GAME_ZHEN,function(t){t.getUserData().all&&this.shakeUI()},this),o.on(o.EVENT_GAME_TOUCH,function(){this.set_content.active&&this.settings()},this),o.on(o.EVENT_GAME_BALANCE,function(t){},this),o.on(o.EVENT_GAME_BALANCE_START,function(){this.balanceStart(!0)},this),o.on(o.EVENT_GAME_BALANCE_END,function(){this.balanceEnd(!0)},this),o.on(o.EVENT_GAME_BATTLEGOAL_FLYED,function(){this.openSetBtn=!0},this),o.on(o.EVENT_GAME_ITEM_NOTICE,function(t){this.item_notice.active=!0;var e=t.getUserData();null==e?(e="gate_failt",this.item_notice.x=27):this.item_notice.x=260,n.textp(this.item_notice,"notice_lab",e)},this)},openHelpDialog:function(){o.EVENT_OPEN_DIALOG({name:"dialog_help"})},initData:function(){this.content.active=!0,this.switchVoice(this.btn_music,s.bgmIsOpen()),this.switchVoice(this.btn_eff,c.bgsIsOpen())},settings:function(){if(this.openSetBtn){var t=this.anim.play();this.set_content.active?(t.wrapMode=cc.WrapMode.Reverse,this.setCallPlayEnd(function(){this.set_content.active=!1},this)):(this.set_content.active=!0,t.wrapMode=cc.WrapMode.Normal)}},exitGame:function(){o.EVENT_OPEN_DIALOG("dialog_whether_exit_game")},hideNotice:function(){this.item_notice.active=!1},switchEff:function(){this.switchVoice(this.btn_eff,c.switchBgs())},switchMusic:function(){this.switchVoice(this.btn_music,s.switchBgm())},switchVoice:function(t,e){n.sh(t,"off",!e)},balanceStart:function(t){this.content.active=!1},balanceEnd:function(){},pushCubeToNode:function(t){var e=n.chd(this.node,"content/RubikCube"),i=cc.instantiate(e);return n.nodeAdd(t,e,i),i},pushUItemToNode:function(t,e){var i=this.useitem.items_floors[e].node,o=cc.instantiate(i);return n.nodeAdd(t,i,o),o}}),cc._RF.pop()},{GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",N7MusicV2:"N7MusicV2",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIEffectLayer:"N7UIEffectLayer",N7UIFlyLayer:"N7UIFlyLayer",UIGameUseItem:"UIGameUseItem",UIGameV2:"UIGameV2",UserLogic:"UserLogic",effect_base:"effect_base"}],UIGameChapter:[function(t,e,i){cc._RF.push(e,"74980oD00ZCnZAn/ZAOo3SN","UIGameChapter");var n=t("GameTools"),o=t("JsonMetaCache"),a=t("UserLogic"),s=t("N7Resource"),c=cc.Class({"extends":t("UIDialog"),properties:{spriteFrame_box:{type:cc.SpriteFrame,"default":null},spriteFrame_lev:{type:cc.SpriteFrame,"default":null},spriteFrame_title:{type:cc.SpriteFrame,"default":null},scroll:{type:cc.ScrollView,"default":null},test:{"default":null,type:cc.Node},chapter_obj:{"default":null,type:cc.Node},list:{type:cc.Node,"default":null},layer:{type:cc.Node,"default":null},chapterContent:{type:cc.Node,"default":null}},statics:{COLOR:new cc.Color(21,135,211)},start:function(){},onLoad:function(){this._super(),this.__initEvent(),this.__show()},__initEvent:function(){this.list.parent.on("scroll-to-bottom",function(){this.showedNum()},this),this.list.parent.on("scroll-to-top",function(){this.showedList()},this)},closeDialog:function(){this.list.removeAllChildren(),this._super()},__show:function(){var t=o.openmap(),e=[],i=[],n=[];for(var s in t)e.push(t[s]);this.accomplish=e;var c=a.geti("lev");for(var r in t){var l=t[r];if(c>=l.min&&c<=l.max){this.verifica=l.chapter;break}i.push(l)}for(var h=i.length-1;h>=0;h--)n.push(i[h]);this.unfinished=n,this.showedList()},resetSize:function(){var t=this.list.parent.height/this.list.parent.parent.height;this._super(),this.list.parent.height=this.list.parent.parent.height*t},exhibition:function(t,e){var i=this;if(t&&0!=t.length)for(var o=a.geti("lev"),r=0;r<t.length;r++)!function(e){var a=t[e],r=a.gup[0],l=cc.instantiate(i.chapter_obj);if(l.height=i.list.parent.height,l.tag=a.chapter,parseInt(l.tag)<parseInt(i.verifica)?(i.list.insertChild(l,0),i.list.y=3*-i.chapter_obj.height+i.scroll.node.height/2-(i.scroll.node.height-i.chapter_obj.height)/2):l.parent=i.list,l.active=!0,n.textp(l,"bk/title/title","chapter_list."+a.name),n.textp(l,"bk/pic/levels/levels/lab","Guild.applylv",[a.levels]),o>=r.id){n.sh(l,"bk/star",!0);var h=n.chd(l,"bk/pic/picture/blue/1").getComponent(cc.Sprite),u=n.chd(l,"bk/pic/picture/blue/2").getComponent(cc.Sprite);h.spriteFrame=i.spriteFrame_box,u.spriteFrame=i.spriteFrame_box;var d=n.chd(l,"bk/pic/levels/levels/lev/1"),f=n.chd(l,"bk/pic/levels/levels/lev/2"),g=d.getComponent(cc.Sprite),p=f.getComponent(cc.Sprite);g.spriteFrame=i.spriteFrame_lev,p.spriteFrame=i.spriteFrame_lev,d.width=242,f.width=242;var _=n.chd(l,"bk/title/title_bg/1").getComponent(cc.Sprite),m=n.chd(l,"bk/title/title_bg/2").getComponent(cc.Sprite);_.spriteFrame=i.spriteFrame_title,m.spriteFrame=i.spriteFrame_title,n.chd(l,"bk/title/title").getComponent(cc.LabelOutline).color=c.COLOR;for(var v=n.chd(l,"bk/icon"),E=0;E<4;E++)n.sh(v,"icon0"+(E+1)+"/lock",!1),n.sh(v,"icon0"+(E+1),!0)}var y="main/gmap/"+(o>=r.id?"m":"g")+parseInt(l.tag);if(o>=r.id){var b=n.chd(l,"bk/pic/lock");b&&(b.active=!1)}if(s.textureFromPath(y,function(t){null!=t&&(n.cmpt(l,"bk/pic/picture/icon/m1",cc.Sprite).spriteFrame=t)},i),o>=r.id){for(var I=n.chd(l,"bk/icon"),T=a.items.split(","),C=0;C<T.length&&4!=C;C++){var S=n.chd(I,"icon0"+(C+1)+"/"+(C+1));i.initIcon(S,T[C],C+1)}for(;C<=4;C++)n.sh(I,"icon0"+(C+1),!1)}}(r)},toChatper:function(t){this.list.y=-this.chapter_obj.height*t+this.scroll.node.height/2-(this.scroll.node.height-this.chapter_obj.height)/2},showedList:function(){this.showCount=2},showedNum:function(){this.showResidue=2},initIcon:function(t,e,i){var a=t,c=o.res(e);if(c){var r=c.showParams;s.loadRes(e,function(t){var e=void 0;t instanceof cc.SpriteFrame?(a.active=!0,n.cmpt(a,"",cc.Sprite).spriteFrame=t,e=a):(t.node.position=a.position,t.node.parent=a.parent,a.removeFromParent(),e=t.node),null!=r&&(null!=r.scale&&""!=r.scale&&(e.scale=r.scale),null!=r.rotation&&""!=r.rotation&&(e.rotation=r.rotation),null!=r.pos&&""!=r.pos&&(e.x+=r.pos.x,e.y+=r.pos.y))},this)}},update:function(){this.showResidue>0&&(this.showResidue--,this.exhibition(this.unfinished.splice(0,1))),this.showCount<=0||(this.showCount--,this.exhibition(this.accomplish.splice(this.verifica-1,1)))}});cc._RF.pop()},{GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIGameClub:[function(t,e,i){cc._RF.push(e,"26c48+6jnBN3pIVskDYx2TE","UIGameClub");var n=t("GuildLogic"),o=t("GameTools"),a=t("GameCommon"),s=t("GameEvent"),c=t("UserLogic"),r=t("FamNet"),l=t("StringUtils");cc.Class({"extends":cc.Component,properties:{bk:{"default":null,type:cc.Node},topc:{"default":null,type:cc.Node},topg:{"default":null,type:cc.Node},page_titles:{"default":null,type:cc.Node},page_content:{"default":null,type:cc.Node},chat:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node},nonet:{"default":null,type:cc.Node},lock:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){o.btnc(this.topg,"btn",o.makef(function(){s.EVENT_OPEN_DIALOG("dialog_club_information")},this),1),s.on(s.EVENT_SHOW_GUILD,function(){this.__showed()},this),s.on(s.EVENT_GUILD,function(t){this.refrush(t.getUserData())},this),s.on(s.EVENT_GUILD_MEMEBER,function(t){this.refrush(t.getUserData())},this),s.on(s.EVENT_OPEN_DIALOG,function(){this.menu.active&&this.menu.getComponent("UIPopBase").close()},this),s.on(s.EVENT_NET_STATU,function(t){this.__showed(t.getUserData())},this)},refrush:function(t){switch(t.oper){case "cr":case "join":case "init":case "quit":case "del":this.__showed();break;case "mod":case "update":this.initClubInfo()}},__showed:function(t){this.menu.active=!1;var e=void 0!=t?t:r.isNet();this.nonet.active=!e;var i=e&&c.geti("lev")>=a.OPEN_LEVEL;if(this.lock.active=!i&&e,this.page_titles.active=i,this.page_content.active=i,i){var s=n.have();s&&this.initClubInfo();var l=s?3:2,h=o.chd(this.page_titles,"off"),u=o.chd(this.page_titles,"on");o.sh(h,"page1/icon",!s),o.sh(h,"page2/icon",!s),o.sh(h,"page3/icon",s),o.sh(h,"page4/icon",s),o.sh(u,"page1/icon",!s),o.sh(u,"page2/icon",!s),o.sh(u,"page3/icon",s),o.sh(u,"page4/icon",s),o.cmpt(this.node,null,"UIChoosePages").select(l)}},selectPage:function(t){this.chat.active=3==t,this.self.active=4==t},initClubInfo:function(){this.initInfo(this.topc),this.initInfo(this.topg)},initInfo:function(t){var e=n.instance(),i=e.guild;o.text(t,"nickname",l.cut(i.gname,a.NAME_MAXL_LEN)),o.text(t,"on_line/count","  "+e.getMemCnt()),o.text(t,"on_line/num","/"+n.MAX_MEMBERS),o.initBadge(t,i.gicon)}}),cc._RF.pop()},{FamNet:"FamNet",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UserLogic:"UserLogic"}],UIGameComplete:[function(t,e,i){cc._RF.push(e,"c2f48vWcWtEbawo7P6Dt8LE","UIGameComplete");var n=t("GameTools"),o=(t("N7Resource"),t("N7UIFlyLayer")),a=t("GameEvent"),s=t("UserLogic"),c=t("N7Sound"),r=t("GameLogic"),l=cc.Class({"extends":cc.Component,properties:{starNodes:{"default":null,type:cc.Node},effectFly:{"default":null,type:cc.Node}},statics:{instance:function(){return l.s_instance},node:function(){return l.s_instance.node},getPos:function(t){l.s_instance.getPos(t)}},start:function(){l.s_instance=this},onDestroy:function(){l.s_instance=null,a.off(this)},getPos:function(t){return t?(this.worldPos||(this.worldPos=this.parent.convertToWorldVec2(this.node.position)),this.worldPos):(this.pos||(this.pos=this.node.position),this.pos)},showedGoals:function(t,e){this.starIdx=1,this.star_num=t,this._flymainui=e;for(var i=0;i<this.starNodes.childrenCount;)n.sh(this.starNodes,"tar"+ ++i,i<=t);t?this.schedule(function(){this.boneFly()},.25,this.star_num-1,.5):this.onFlyed()},boneFly:function(){var t=this.starIdx,e=cc.instantiate(this.effectFly),i=n.chd(this.starNodes,"tar"+this.starIdx);e.parent=i;var o=e.getComponent(cc.Animation);o.play(),this.starIdx++,o.once("finished",function(){this._onFlyTarget(e,t)},this)},_onFlyTarget:function(t,e){var i=this._flymainui.treasure_star,a=o.getPos(i),s=[cc.spawn(cc.moveTo(.4,a.x,a.y).easing(cc.easeIn(1.5)),cc.scaleTo(.4,.5,.5)).easing(cc.easeIn(2)),cc.callFunc(function(i){c.playSound(90219+e);var o=r.getStarBox(),a=o.star-this.star_num+e;this._flymainui.btn_xing_box.getComponent(cc.Animation).play("stars_treasure"),cc.instantiate(this._flymainui.box_get_bone).parent=this._flymainui.btn_xing_box,n.show(this._flymainui.btn_xing_box,"eff_icon"),n.cmpt(this._flymainui.btn_xing_box,"xing_name/progresskong","JProgressBar").progress(0,a,o.max),t.destroy(),e>=this.star_num&&this.onFlyed()},this)];n.pushNode(t,o.node()),t.runAction(cc.sequence(s))},onFlyed:function(){n.hide(this._flymainui.btn_xing_box,"eff_icon"),this._flymainui=null;var t=s.geti("lev");a.EVENT_BIGMAP_COMMAND({mainui:{nextlevel:t}})},__chkBabo:function(t){a.EVENT_NEXT_LEVEL(t)}});cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIFlyLayer:"N7UIFlyLayer",UserLogic:"UserLogic"}],UIGameCube:[function(t,e,i){cc._RF.push(e,"ad0490+SM1KIYCxfcSZVBba","UIGameCube");var n=t("n7"),o=t("N7Resource"),a=t("JsonMetaCache"),s=(t("UICube"),t("GameCommon")),c=t("N7Sound"),r=t("GameEvent"),l=t("GameTools"),h=t("GameConfig"),u=cc.Class({"extends":cc.Component,properties:{effect:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},control:{"default":null,type:cc.Node},object:{"default":null,type:cc.Node},giftNode:{"default":null,type:cc.Node},brick:{type:t("UICube"),"default":null},lab:{"default":null,type:cc.Label},light:{"default":null,type:cc.Node},mergeHit:{"default":null,type:cc.Node},_lock:!1},statics:{colors:[new cc.Color(255,0,0,255),new cc.Color(0,255,0,255)],down_cube_values:[{s1_y:.9,t2_s:.04,t2_m:.12,s2:1,m2:30,t3:.065},{s1_y:1,t2_s:.05,t2_m:.1,s2:1,m2:16,t3:.05}],ZERO:cc.p(0,0),cube_chg:[[1201,1511,1517],[1202,1512,1518],[1203,1513,1519],[1204,1514,1520],[1205,1515,1521],[1221,1516,1522]]},onLoad:function(){u.prefabCube||(u.prefabCube=o.getNodeFromId(5618)),this.grid=cc.p(0,0),this._msg="n",this.initUI()},msg:function(t){this._msg+=","+t},initUI:function(){if(this.animation=this.node.getComponent(cc.Animation),this.animation.on("finished",this.onAnimationStop,this),h.get("cube_show_gid")){var t=new cc.Node;t.parent=this.control,this.lab=t.addComponent(cc.Label)}},onDestroy:function(){r.off(this)},initCube:function(){this.isLive||(r.on(r.EVENT_GAME_BALANCE,function(){this.setList(0,!0)},this),this.light.opacity=0,this.isLive=!0,this.cubeIsNew=3)},update:function(t){this.cubeDown(t)},getSize:function(){if(!this.size){var t=this.node;this.size=cc.size(t.width*t.scaleX,t.height*t.scaleY)}return this.size},getMeta:function(){return this.meta},setCubeData:function(t,e,i){this.meta=t,n.isDebug&&n.log("UIGameCube setCubeData gid:"+this.gid+" id:"+t.id+" name:"+t.name),this.initCube(),this.extdata=e,i&&this.setDisplay(!1,e)},setMix:function(t){this.mix=t,t.init(this),t.node.parent=this.effect,this.object.active=!1},clearMix:function(t){if(this.mix){var e=this.mix;this.object.active=!0,this.mix=null,e.removeSelf()}},getGoal:function(){return this.cube?this.cube.getGoal():null},destroyMe:function(t){r.off(this),this.isLive=!1,this.clearHit(),this.removeCube(),this.clearCube(),this.actionToEnd(this.node,{log:"destroyMe"}),this.res_id=null,this.meta=null,this.listCount=0,this.stopShake(),this.stopAnim(),this.clearObject(),this.node.scale=1},setDisplayCallFunc:function(t,e){this.displayFunc=null!=t?{callFunc:t,caller:e}:null},setPosition:function(t,e){t&&(this.node.position=t)},setGrid:function(t,e,i){this.setPosition(i,"sg"),this.layer=e||this.layer,this.preGrid=this.grid,this.grid=cc.p(t.x,t.y),this.initZIndex(),this.node.name=this.name="cube_"+t.x+"_"+t.y},getCurGrid:function(){var t=this.node.position;return cc.p(t.x/s.CUBE_SIZE,t.y/s.CUBE_SIZE)},initZIndex:function(){if(!this.inCage&&(this.node.zIndex=2*this.grid.y,this.getMeta())){var t=this.meta;if(t.id!=s.TILE_LAYER_CAGE){if(this.layer===s.TILE_LAYER_BUFF)return 33==t.id?this.node.zIndex=s.TILE_LAYER_CAGE_ZINDEX:this.node.zIndex=s.TILE_LAYER_BUFF_ZINDEX,void(this.node.zIndex+=this.grid.y);(t.type==s.TILE_LAYER_TOY||this.isItem())&&(this.node.zIndex=s.TILE_LAYER_TOY_ZINDEX+this.grid.y),this.checkCage()}}},checkCage:function(){var e=t("UIGameV2").instance();if(e.haveCage){var i=e.gameMap.getCubeLayer(this.grid.x,this.grid.y,s.TILE_LAYER_BUFF);i&&i.meta&&i.meta.id==s.TILE_LAYER_CAGE&&i.cube&&i.cube.initCage(this)}},removeCube:function(){this.clearMix(),this.object&&this.object.children&&this.object.children.length>1&&n.error("UIGameCube removeCube object children count:"+this.object.children.length),this.precube=null,this.cube&&(this.cube.node.active=!0,this.cube.setClick(this.clickCube,this,!1),this.cube.clear(),this.brick.node.active||this.cube==this.brick?this.precube=this.brick.getFrame():o.backPrefab(this.cube.node),this.cube=null)},pushBlock:function(t){this.cube&&(this.cube.node.active=!0)},popBlock:function(){if(!this.cube)return n.log("UIGameCube popBlock cube is null res:"+this.res_id),null;this.cube.node.active=!1;var t=null;if(this.cube===this.brick)(t=o.createNodeFromId(5621,"UICube")).setFrame(this.brick.sprite.spriteFrame),t.node.position=this.brick.node.position;else{var e=a.res(this.res_id);if(!e)return n.log("UIGameCube popBlock res:"+this.res_id),null;t=o.createNodeFromId(this.res_id,e.frame)}return t},clearObject:function(){this.object&&this.object.children&&this.object.children.length>=1&&this.object.removeAllChildren(),this.clearChangeEff()},clearCube:function(t){var e=this.precube;return this.precube=null,this.brick.node.parent,t?e:null},clearHit:function(){this.twinlle&&(o.backPrefab(this.twinlle),this.twinlle=null)},setList:function(t,e){this.listCount=t,this.listCount>1&&this.isItem()?this.twinlle||(this.twinlle=o.createNodeFromId(5618),l.resetParticle(this.twinlle),this.mergeHit.addChild(this.twinlle)):this.clearHit(),e&&this.setDisplay(!0)},showHint:function(t){},displayCallFunc:function(t){if(this.displayFunc){var e=this.displayFunc,i=e.callFunc,n=e.caller;this.displayFunc=null,i.call(n,this)}else this.clearCube()},isItem:function(){return!!this.meta&&this.meta.isItem},calcCubeResId:function(t){if(this.meta.type!=s.tile_type_cube)return t;var e=this.listCount||0,i=-1;return e>=s.merge_mcube_cnt?i=2:e>=s.merge_tnt_cnt?i=1:e>=s.merge_rotor_cnt1&&(i=0),i<0?t:u.cube_chg[this.meta.color][i]},setDisplay:function(t,e){if(this.initZIndex(),this.giftNode&&(this.giftNode.active=1==this.extdata.randGift),this.lab&&(this.lab.string=this.gid,this.layer===s.TILE_LAYER_BUFF?(this.lab.node.x=50,this.lab.node.color=u.colors[1]):(this.lab.node.x=0,this.lab.node.color=u.colors[0])),this.meta.isItem&&(this.showHint(this.count>1),t))this.displayCallFunc(!0);else{n.isDebug&&n.log("UIGameCube setDisplay gid:"+this.gid+" id:"+this.meta.id+" name:"+this.meta.name);var i=this.calcCubeResId(this.meta.res_id);if(i==this.res_id)return this.cube&&this.cube.meta||n.log("UIGame setDisplay error grid:"+this.grid.x+","+this.grid.y+" gid:"+this.gid+" id:"+this.meta.id+" name:"+this.meta.name+" res_id:"+i),void(this.cube&&this.cube.meta&&i==this.cube.meta.res_id&&this.displayCallFunc(!0));this.stopShake(),this.node.rotation=0,this.node.scale=1,this.res_id=i,o.loadRes(i,function(t,e,i){if(this.removeCube(),this.isLive){var o=null;if(t instanceof cc.SpriteFrame){this.brick.setFrame(t),this.brick.node.active=!0,o=this.brick;var a=this.meta.control;o.node.scale=a.scale||1,o.node.position=a.pos||u.ZERO}else this.brick.node.active=!1,(o=t).node.parent&&(n.log("UIGame setDisplay add cube is parent "+o.node.parent.name),o.node.removeFromParent(!1)),this.object.addChild(o.node),o.node.width<112&&(o.node.width=112,o.node.height=112),o.initCube&&o.initCube();this.cube=o,this.cube.setClick(this.clickCube,this,!0),o.resId=this.res_id,o.setMeta&&o.setMeta(this.meta),o.setTile&&o.setTile(this),this.setParam(this.extdata,!1),this.displayCallFunc(),this._init=!1}else this.displayCallFunc()},this)}},setScale:function(){var t=this.meta,e=this.control;void 0!=t.skeleton_dt?(void 0!=t.skeleton_dt.pos&&(e.position=t.skeleton_dt.pos),void 0!=t.skeleton_dt.scale&&(e.scale=t.skeleton_dt.scale)):(e.position=cc.p(0,0),e.scale=1)},setParam:function(t,e,i,n,o){t&&this.cube&&(this.cube.setData?this.cube.setData(t,e,n,o,i):n&&n.call(o,s.CUBE_SETPARAM_ALL))},clickCube:function(){204!=this.meta.type&&(this.actionData||this.downAct||this.animState||t("UIGameV2").instance().guideCanotClick(this)||r.EVENT_GAME_CLICK_NODE(this))},playCantClick:function(){this.meta.shakeAni&&(this.cube&&this.cube.playCantClick?this.cube.playCantClick():(this.playShake(1),c.playSound(90175)))},playAnim:function(t,e,i){this.animState&&this.stopAnim();var n=this.animation.play(t);this.animState={anim:n,animName:t,callFunc:e,caller:i}},stopAnim:function(t){this.animState&&this.animation.stop(this.animState.animName),this.animState=null},onAnimationStop:function(){if(this.node.rotation=0,this.animState){var t=this.animState;t.callFunc&&t.callFunc.call(t.caller,t)}},playShake:function(t){void 0===t&&(t=0),this.stopShake(),this.playAnim(t>0?"shake_02":"tile_shake",function(){this.stopShake()},this),this.animState.anim.repeatCount=0==t?1/0:1},playSeqAction:function(t,e,i,n){this.actionToEnd(this.node,{log:"playSeqAction"}),t.push(cc.callFunc(this.actionToEnd,this,{log:"playSeqActionEnd",end:!0}));var o=cc.sequence(t);this.actionData={act:o,pos:e,callFunc:i,caller:n},this.node.runAction(o)},actionToEnd:function(t,e,i){if(n.isDebug&&n.log("UIGameCube actionToEnd log:"+e.log+" gid:"+this.gid+" end:"+e.end),i||this.downToEnd(),this.actionData){var o=this.actionData;this.actionData=null,o.act&&cc.isValid(this.node)&&(this.node.stopAllActions(),this.setPosition(o.pos,"dte")),this.node.scale=1,e.end&&o.end&&o.end.call(this,!0),o.end=null,o.callFunc&&o.callFunc.call(o.caller,this,e)}},mergeTo:function(t,e,i,n,o){this.downToEnd(),this.actionToEnd(this.node,{log:"mergeTo"});var a=[];i&&a.push(cc.moveTo(.1,i).easing(cc.easeOut(3))),a.push(cc.delayTime(.04),cc.moveTo(.08,t).easing(cc.easeOut(3)));var s=cc.sequence(a);e.node&&e.node.runAction(s.clone());var c=cc.sequence(s,cc.callFunc(this.actionToEnd,this,{log:"mergeToEnd",end:!0}));this.actionData={act:c,pos:t,callFunc:n,caller:o},this.node.runAction(c)},downTo:function(t,e,i,o){this.actionToEnd(this.node,{log:"downTo"},!0),n.isDebug&&n.log("cube downTo gid:"+this.gid+" pos:"+this.node.position+" to:"+t);var a=this.downAct;a?a.pos.y>t.y&&(a.pos=t):((a={list:[]}).downTm=0,a.startPos=this.node.position,a.downSpeed=this.cubeIsNew?s.CUBE_DOWN_NEW_SPEED:s.CUBE_DOWN_SPEED,a.cubeIsNew=this.cubeIsNew,a.pos=t,this.downAct=a),this.node.scaleX=.97,this.node.scaleY=1,this.cubeIsNew=!1,a.list.push({y:t.y,com:e,callFunc:i,caller:o}),a.list.length>=2&&a.list.sort(this.sortDownAct),a.ckPos=a.list[0].y,n.isDebug&&n.log("cube startCubeDown gid:"+this.gid+" pos:"+this.node.position+" to:"+a.pos)},sortDownAct:function(t,e){return-(t.y-e.y)},isDowning:function(){return!!this.downAct},addDownEnd:function(t,e,i){this.downAct&&(this.downAct.endList||(this.downAct.endList=[]),this.downAct.endList.push({callFunc:t,caller:e,params:i}))},cubeDown:function(t){if(this.downAct){var e=this.downAct;e.downTm+=1E3*t;var i=0;if(i=e.cubeIsNew?e.downTm<=s.CUBE_DOWN_SPEED_ADD_TM?s.calcDown(e.downTm,e.downSpeed,s.CUBE_DOWN_SPEED_ADD):s.calcDown(e.downTm-s.CUBE_DOWN_SPEED_ADD_TM,s.CUBE_DOWN_NEW_GRID_G,0)+s.CUBE_DOWN_SPEED_ADDMAX:s.calcDown(e.downTm,e.downSpeed,0),this.node.y=e.startPos.y-i,e.ckPos>=this.node.y){var o=e.list,a=[],c=!1;for(var r in o){var l=o[r];if(l.called||!(l.y>=this.node.y)){e.ckPos=l.y;break}l.callFunc.call(l.caller),l.called=!0,a.push(r),c=!0}if(c)for(var h=a.length-1;h>=0;h--)o.splice(a[h],1)}if(e.pos.y>=this.node.y){n.isDebug&&n.log("cube cubeDown done gid:"+this.gid+" pos:"+this.node.position+" to:"+e.pos),this.downToCall(e);var d=u.down_cube_values[e.cubeIsNew?0:1],f=[];f.push(cc.scaleTo(0,1.06,d.s1_y).easing(cc.easeIn(3)),cc.spawn(cc.scaleTo(d.t2_s,1,d.s2).easing(cc.easeIn(3)),cc.moveBy(d.t2_m,0,d.m2).easing(cc.easeIn(4))),cc.moveBy(d.t3,0,-d.m2).easing(cc.easeOut(3))),this.playSeqAction(f)}}},downToEnd:function(){if(this.downAct){var t=this.downAct;this.downAct=null,this.node.scale=1,this.node.position=t.pos,this.downToCall(t)}},downToCall:function(t){var e=t.list,i=t.endList;for(var n in t.list=t.endList=null,e){var o=e[n];o.callFunc.call(o.caller)}for(var a in i){var s=i[a];s.callFunc.apply(s.caller,s.params)}},moveTo:function(t,e,i,n,o){this.downToEnd(),this.actionToEnd(this.node,{log:"moveTo"});var a=this.position(),s=[cc.delayTime(.05),cc.moveTo(.25,a.x+i.x,a.y+i.y).easing(cc.easeOut(5)),cc.delayTime(.05),cc.moveTo(.4,t.x-.5*i.x,t.y-.5*i.y).easing(cc.easeIn(3)),cc.delayTime(.05),cc.moveTo(.3,t).easing(cc.easeOut(4)),cc.callFunc(this.actionToEnd,this,{log:"moveToEnd",end:!0})],c=cc.sequence(s);this.actionData={act:c,pos:a,callFunc:n,caller:o},this.node.runAction(c)},stopShake:function(){this.content&&(this.content.scale=1,this.content.rotation=0,this.content.position=cc.p(0,0),this.stopAnim("tile_shake"))},playCreateAnim:function(t,e,i){this.cube&&this.cube.playCreateAnim?this.cube.playCreateAnim(t,e,i):e&&i&&e.call(i,t)},playDestroyAnim:function(t,e,i){if(this.destroyCall={callFunc:e,caller:i,params:t},this.node.active){if(this.cube&&this.cube.destroyMe)return void this.cube.destroyMe(t,function(){this.playCubeDestroyAnim(t,e,i)},this);this.playCubeDestroyAnim(t,e,i)}else this.playEndDestroyAnim()},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i,this.cube?this.cube.node:null),this.destroyMe("play end")}},playCubeDestroyAnim:function(t,e,i){this.playEndDestroyAnim()},position:function(){return this.node.position},hide:function(){this.node.active=!1},addChangeEff:function(){this.clearChangeEff();var t=o.createNodeFromId(5619);t.parent=this.node;var e=t.getComponent("effect_base");e.playEffect(),e.setCallFunc(function(t){t==s.STATE_PLAYEND&&(this.mergeChgEff=null)},this)},clearChangeEff:function(){this.mergeChgEff&&(this.mergeChgEff.removeSelf(),this.mergeChgEff=null)},getCubeData:function(){if(this.cube)return this.cube.getCubeData()},getGoalNode:function(){if(this.cube)return this.cube.getGoalNode()}});cc._RF.pop()},{GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",N7Sound:"N7Sound",UICube:"UICube",UIGameV2:"UIGameV2",n7:"n7"}],UIGameGoal:[function(t,e,i){cc._RF.push(e,"4c312kmd4ROsLko1I/6rjI4","UIGameGoal");var n=t("N7Resource"),o=t("N7UIEffectLayer"),a=t("N7Sound"),s=t("JsonMetaCache");cc.Class({"extends":cc.Component,properties:{icon:{type:cc.Sprite,"default":null},num:{type:cc.Label,"default":null},check:{type:cc.Node,"default":null}},onLoad:function(){var t=this.getComponent(cc.Animation);t&&(t.on("finished",this.playEnd,this),this.anim=t)},setData:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.scale||(this.scale=1);var o=null,a=s.res(t.goalIcon).param;if(null!=a[0]){var c=a[0].split("scale\x3d");c.length>=2&&(o=c[1])}n.loadRes(t.goalIcon,function(t){this.icon.spriteFrame=t,this.icon.node.scale=t.getRect().height>96?.7*this.scale:this.scale,this.node.active=!0,null!=o&&(this.icon.node.scale=o)},this),this.num&&(this.num.node.active=!0),this.check&&(this.check.active=!1),this._num=0,this.chgNum(e,!0,i)},setNum:function(t){this.num&&(this.num.string=t)},getPos:function(){return this.pos||(this.pos=o.getPos(this.icon.node)),this.pos},chgNum:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null==this._num&&(this._num=0),this._num+=t,this.setNum(this._num),!i&&this._num<=0?(this.num&&(this.num.node.active=!1),this.check&&(this.check.active=!0),a.playSound(90153),this.anim&&this.anim.play(),this.node.zIndex=1):(this.num&&(this.num.node.active=!0),this.check&&(this.check.active=!1)),e||this.playAni()},playEnd:function(){this.node.zIndex=0},isCheck:function(){return!this.check&&this.check.active},playAni:function(){if(!this.playing){this.playing=!0;var t=this.node.scaleX,e=this.node.scaleY,i=[cc.scaleTo(.1,t+.1,e+.1),cc.scaleTo(.1,t,e),cc.callFunc(function(){this.playing=!1},this)];this.node.runAction(cc.sequence(i))}}}),cc._RF.pop()},{JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIEffectLayer:"N7UIEffectLayer"}],UIGameGuide:[function(t,e,i){cc._RF.push(e,"3672bLIL2NH7aZBDhkc+/Y6","UIGameGuide");var n=t("GameTools"),o=t("JsonMetaCache"),a=t("StringUtils"),s=t("UIGameV2"),c=t("GameEvent"),r=t("GameCommon"),l=(t("GameConfig"),t("TDLog")),h=t("n7");cc.Class({"extends":t("UIDialog"),properties:{upnode:{type:cc.Node,"default":null},msgbox:{type:cc.Node,"default":null},pngbox:{type:cc.Node,"default":null},"continue":{type:cc.Node,"default":null},hamster:{type:cc.Node,"default":null}},onLoad:function(){this._super(),c.on(c.EVENT_GAME_CLICK_NODE,this.click,this),n.btnc(this.content,"text_jump",n.makef(this.pass,this)),n.btnc(this["continue"],"btn",n.makef(this.clickNext,this),1)},onDestroy:function(){this._super(),this.unschedule(this.clickNext)},resetSize:function(){this._super(),this.upnode.scale=1/this.node.scale},dudu:function(){10020==this.gudid&&s.instance().gameLogic.oneRator(1)},showed:function(t){this.clickEvent=!0,this.gudid=1*t,l.guide(this.gudid),this.dudu();var e=o.item(this.gudid);if(!e)return console.error("UIDialogGuide not row "+t),void c.EVENT_GAME_TILE_CLICK_LOCK(!1,2);var i=this.gudt=a.toKeyValue(e.info);if(!i)return console.error("not define guide!"+t),void c.EVENT_GAME_TILE_CLICK_LOCK(!1,3);if(this.next=e.next,this.__chkLine(i),n.chd(this.node,"mask").opacity=i.unbk?25:125,i.grids){for(var h=i.grids,u=[],d=0;d<h.length;d++)u.push({x:parseInt(h[d]/10),y:h[d]%10});var f=null;null!=i.can&&(f={x:parseInt(i.can/10),y:i.can%10});var g=s.instance();this.lst=g.cubePackInNode(this.upnode,u,f,!0),i.gridbk&&this.__initgbk(u)}n.chd(this.content,"text_jump").active=i.jump;var p=n.sh(this.content,"finger",void 0!=i.finger),_=void 0,m=void 0;if(void 0!=i.finger&&(m=1*i.finger,_=this._transfor(m/10,m%10,this.content),p.setPosition(_.x,_.y)),i.target&&s.instance().topbar.pushGoalToNode(this.upnode),i.step&&s.instance().topbar.pushStepToNode(this.upnode),p=n.sh(this.content,"arrows",i.arrows),i.arrows){m=1*i.arrows[0],(_=this._transfor(m/10,m%10,this.content)).x+=i.arrows[1],_.y+=i.arrows[2],p.setPosition(_);var v=i.arrows[3];void 0==v&&(v=0),p.rotation=90*v}if(i.cube&&s.instance().bottom.pushCubeToNode(this.upnode),null!=i.uitem){var E=s.instance().bottom;i.uitem=E.pushUItemToNode(this.upnode,i.uitem);var y=this;i.uitem.on(r.touchend,function(t){y.clickItem(t)},this)}this.__inigBox(e)},__chkColor:function(t){if(t.color){var e=s.instance().gameLogic;t.grids||(t.grids=[]),e.getPosAllTileOfColor(t.color,t.grids)}},__chkLine:function(t){if(t.lines){var e=s.instance().xcount;t.grids||(t.grids=[]);for(var i=0;i<t.lines.length;i++)for(var n=0;n<e;n++)t.grids.push(10*n+t.lines[i])}if(t.upr){var o=s.instance().ycount;t.grids||(t.grids=[]);for(var a=0;a<t.upr.length;a++)for(var c=0;c<o;c++)t.grids.push(10*t.upr[a]+c)}},__initgbk:function(t){for(var e=n.chd(this.content,"cube_glow"),i=void 0,o=void 0,a=0;a<t.length;a++)o=this._transfor(t[a].x,t[a].y,this.upnode),(i=cc.instantiate(e)).parent=this.upnode,i.active=!0,i.zIndex=-1,i.setPosition(o.x,o.y)},__inigBox:function(t){var e=this.msgdt=a.toKeyValue(t.exdt);e?(this.__initPngBox(null==e.p?null:e),this.__initMsgBox(null==e.p?e:null)):(this.__initMsgBox(e),this.__initPngBox(e)),this.__maskNext(!(!e||!e.maskNext))},__maskNext:function(t){var e=n.chd(this.node,"mask");t?(e.on(r.touchstart,this.__next,this),this.pngbox.on(r.touchstart,this.__tmp,this)):(e.off(r.touchstart,this.__next,this),this.pngbox.off(r.touchstart,this.__tmp,this))},__tmp:function(){},__initMsgBox:function(t){if(this.msgbox.parent.active=t,t){this["continue"].active=t.c,h.log("__initMsgBox:txt:"+t.txt);var e=this._setText(this.msgbox,"richtext_top",t.txt),i=t.h?t.h:250;e.y=i/2;var n=t.w?t.w:780;if(this.msgbox.width=n,this.msgbox.height=i,this.msgbox.active=!0,void 0!=t.pos){var o=1*t.pos;o=this._transfor(o/10,o%10,this.content),this.msgbox.setPosition(o.x,o.y+90),this.hamster.position=this.msgbox.position,this["continue"].active&&this["continue"].setPosition(o.x+350,o.y+100)}t.p2&&(this.msgbox.setPosition(t.p2[0],t.p2[1]),this.hamster.position=this.msgbox.position,this["continue"].active&&this["continue"].setPosition(t.p2[0]+350,t.p2[1]+10)),this.msgbox.active=!0}},__initPngBox:function(t){var e=this.pngbox;if(e.parent.active=t,t){h.log("__initPngBox:txt:"+t.txt),this._setText(this.pngbox,"label1",t.txt1),this._setText(this.pngbox,"label2",t.txt2),e.active=!0;for(var i=n.chd(this.pngbox,"pngs"),o=0;o<i.children.length;o++)i.children[o].active=t.p==o}},_setText:function(t,e,i){var o=n.show(t,e),a=n.i18ns("guide."+i);if(a)return o.getComponent(cc.RichText).string=a,o;console.error("guide set text not find guide."+e)},_transfor:function(t,e,i){var n=s.instance().getGridPos(parseInt(t),e,!0);return i.convertToNodeSpaceAR(n)},clickNext:function(){this.msgdt&&this.msgdt.c&&this.__next()},pass:function(){this.close()},clickItem:function(t){var e=t.target.getComponent("UIGameSingleItem").itemId;this.__next(),c.EVENT_GUIDE_BRUSH(e),this.clickEvent=e<=3},__next:function(){this.close(),this.next&&c.EVENT_OPEN_GAME_GUIDE(this.next)},click:function(e){if(this.node.active){var i=10*(e=e.getUserData()).cube.grid.x+e.cube.grid.y,n=this.gudt;if(!n)return h.log("not guide data!"),void this.close();if(n.cannot)this.__next();else if(!n.can||1*n.can==i){if(n.grids){for(var o=!0,a=0;a<n.grids.length&&!(o=n.grids[a]==i);a++);if(!o)return}this.close(),this.clickEvent&&c.EVENT_GAME_CLICK_NODE(e.cube),this.next?(s.instance().gameLogic.guide(this.next),c.EVENT_GAME_NEXTGUIDE(this.next)):t("GameLogic").itemsNotice()}}},close:function(){this.lst&&this.lst.length>0&&(s.instance().cubePackListInMap(this.lst),this.lst=null),this.msgdt&&this.msgdt.c&&this.unschedule(this.clickNext),this.upnode.removeAllChildren(),this.node.active=!1,c.EVENT_GAME_TILE_CLICK_LOCK(!1,4)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",StringUtils:"StringUtils",TDLog:"TDLog",UIDialog:"UIDialog",UIGameV2:"UIGameV2",n7:"n7"}],UIGameMapV2:[function(t,e,i){cc._RF.push(e,"315a7InofFII5NB1y4NCn9g","UIGameMapV2");var n=t("n7"),o=t("N7Sound"),a=t("GameMapCube"),s=t("GameCommon"),c=t("GameEvent"),r=t("CoolArray"),l=t("N7Resource"),h=cc.Class({"extends":cc.Component,properties:{xcount:0,ycount:0,content:{type:cc.Node,"default":null},normal:{type:cc.Node,"default":null},border:{type:t("UIMapEdge"),"default":null}},statics:{RECOVERY_CUBE:!0,GAMEMAP_SCALE:{9:1,8:1.1,7:1.15,6:1.15,5:1.15}},onLoad:function(){this.recoveryCube=!1},onDestroy:function(){this.clearAll()},clearAll:function(){if(this.mapCubeUUID)for(var t in this.mapCubeUUID){var e=this.mapCubeUUID[t];e&&(c.off(e),cc.isValid(e.node)&&(this.getCubePool().push(e),e.node.active=!1,e.destroyMe("map del")))}},initCube:function(){var t=l.getNodeFromId(5622).data;this.cubeSize=cc.size(t.width,t.height),this.cubeSizeHalf=new cc.size(this.cubeSize.width/2,this.cubeSize.height/2)},initEvent:function(){},calcIdx:function(t,e){return 100*t+e},getGridPos:function(t,e,i){var n=this.calcIdx(t,e),o=this.cubePosMap[n];return o||(o={pos:o=cc.p(this.cubeSizeHalf.width+this.cubeSize.width*t,this.cubeSizeHalf.height+this.cubeSize.height*e),world:this.normal.convertToWorldSpaceAR(o)},this.cubePosMap[n]=o),i?o.world:o.pos},pushTileToMap:function(t){for(var e in t){var i=t[e];null!==i&&void 0!==i&&GameTools.nodeAdd(this.normal,i.node)}},initData:function(t,e){this.xcount=t,this.ycount=e,this.cubePosMap=[];var i=h.GAMEMAP_SCALE[t];s.gameMapScale=i||1,this.node.scale=i,this.content.setContentSize(this.xcount*this.cubeSize.width,this.ycount*this.cubeSize.height);var n=this.content.getContentSize();this.content.setPosition(-n.width/2,-n.height/2)},inMap:function(t,e,i,n){for(var o in this.clearAll(),this.set_id=0,this.initTile=!0,this.loadCount=0,this.loadLock=!0,this.callFunc=i,this.caller=n,this.mapCubeUUID={},this.cubesMap={},e){var a=e[o];this.getBlock(a.getx(),a.gety())&&(this.setCube(a.block,void 0,s.TILE_LAYER_NORMAL),this.setCube(a.bub,void 0,s.TILE_LAYER_BUFF),this.setCube(a.cage,void 0,s.TILE_LAYER_BUFF))}this.loadLock=!1,this.initEnd()},initEnd:function(){if(!this.loadCount&&!this.loadLock){if(c.EVENT_GAME_TILE_EDGE(),this.initTile=!1,this.callFunc){var t=this.callFunc,e=this.caller;return this.callFunc=this.caller=null,void t.call(e)}c.EVENT_GAME_TILE_LOADOK()}},getCubeFromUUID:function(t){return this.mapCubeUUID[t]},getBlock:function(t,e){void 0!=e&&(t=this.calcIdx(t,e));var i=this.cubesMap[t]||null;return i||(i=new a,this.cubesMap[t]=i),i},packupCube:function(t,e,i){var n=this.getBlock(t,e),o=this.getGridPos(t,e,!0),a=[];for(var c in s.TILE_GROUP){var r=s.TILE_GROUP[c],l=this.getCubeFromLayer(n,r);l&&a.push(l.node)}return{pos:o,list:a}},unpackCube:function(t){for(var e in t){var i=t[e];i.scale=1,this.pushCubeNode(i)}},pushCubeNode:function(t){var e=t.getComponent("UIGameCube");if(e){var i=e.grid;t.parent=this.normal,t.position=this.getGridPos(i.x,i.y)}},getCubeLayer:function(t,e,i){return void 0==i&&(i=e,e=void 0),this.getCubeFromLayer(this.getBlock(t,e),i)},getCubeFromLayer:function(t,e){return e===s.TILE_LAYER_NORMAL?t.node:e===s.TILE_LAYER_BUFF?t.buff:e===s.TILE_LAYER_TRANFORM?t.tarform:e===s.TILE_LAYER_BACKGROUND?t.back:void 0},setCubeLayer:function(t,e,i,n){void 0==n&&(n=i,i=e,e=void 0);var o=this.getBlock(t,e);this.setCubeFromLayer(n,o,i)},setCubeFromLayer:function(t,e,i){return i===s.TILE_LAYER_NORMAL?e.node=t:i===s.TILE_LAYER_BUFF?e.buff=t:i===s.TILE_LAYER_TRANFORM?e.tarform=t:i===s.TILE_LAYER_BACKGROUND&&(e.back=t),t},getCubePool:function(){return this.cubePool||(this.cubePool=new r),this.cubePool},createCube:function(t){var e=this.getCubePool().pop();e||((e=l.createNodeFromId(5622,"UIGameCube")).node.parent&&(n.log("UIGameMapV2 createCube has parent gid:"+e.gid+" grid:"+e.grid.x+","+e.grid.y),e.node.removeFromParent(!1)),this.normal.addChild(e.node));var i=e.node;return i.active=!0,i.opacity=255,e.pre_gid=e.gid,e.gid=t,e},setCube:function(t,e,i,n,a,s,c){if(t&&t.getMeta()){void 0===e&&(e=cc.p(t.getx(),t.gety()));var r=this.mapCubeUUID[t.gid],l=!1;if(r||(r=this.createCube(t.gid),l=!0),this.initTile){if(!l)return;this.loadCount++}var h=this.getGridPos(e.x,e.y);return r.setDisplayCallFunc(function(e){e.isG4=t.isG4(),this.initTile?(e.cubeIsNew=!1,--this.loadCount<=0&&this.initEnd()):s&&s.call(c,e)},this),t.list&&r.setList(t.list.length,!1),this.setCubeInMap(r,e,h,i,"cre"),r.setCubeData(t.meta,t.exdt,!0),this.mapCubeUUID[t.gid]=r,n&&r.meta.crsud>0&&o.playSound(r.meta.crsud),r}},setCubeOutMap:function(t){var e=this.getBlock(t.grid.x,t.grid.y),i=this.getCubeFromLayer(e,t.layer);i&&i.gid==t.gid&&this.setCubeFromLayer(null,e,t.layer),this.mapCubeUUID[t.gid]=null,this.getCubePool().push(t),t.node.active=!1},setCubeInMap:function(t,e,i,n,o){if(void 0===n&&(n=s.TILE_LAYER_NORMAL),t){if(t.setGrid(e,n,i),t.preGrid){var a=t.preGrid,c=this.calcIdx(a.x,a.y);this.getCubeLayer(c,n)==t&&this.setCubeLayer(c,n,null)}this.setCubeLayer(this.calcIdx(t.grid.x,t.grid.y),n,t)}},disappear:function(t,e){var i=this.getBlock(t.x,t.y);for(var n in i){var o=i[n];o&&o.node&&o.node.runAction(cc.sequence([cc.delayTime(e),cc.fadeOut(.1)]))}}});cc._RF.pop()},{CoolArray:"CoolArray",GameCommon:"GameCommon",GameEvent:"GameEvent",GameMapCube:"GameMapCube",N7Resource:"N7Resource",N7Sound:"N7Sound",UIMapEdge:"UIMapEdge",n7:"n7"}],UIGameSingleItem:[function(t,e,i){cc._RF.push(e,"4c10b72ksdJDJF8K7OZnWre","UIGameSingleItem");var n=t("JsonMetaCache"),o=t("GameTools"),a=t("ItemsLogic"),s=t("GameEvent");cc.Class({"extends":cc.Component,properties:{icon:{type:cc.Node,"default":null},num:{type:cc.Label,"default":null},add:{type:cc.Node,"default":null},lockNode:{type:cc.Node,"default":null},canotclick:{type:cc.Node,"default":null},itemId:""},onLoad:function(){},onDestroy:function(){s.off(this)},start:function(){},init:function(e){this.lockItem(e),e>0||(this.id_name=n.item(this.itemId).id_name,o.btn(this.node,o.makef(function(e){var i=t("UIGameUseItem");if(!(null==i.instance()||this.lock>0))return this.node.getComponent(cc.Animation).play(),i.instance().useItem(this.itemId,this.id_name)},this),!1),5==this.itemId&&s.on(s.EVENT_GAME_LOCK_ITEM,function(t){var e=t.getUserData();o.unbtn(this.lockNode),this.darkItem(e.lock)},this))},darkItem:function(t){this.lock=t,this.canotclick.active=!0,o.btn(this.canotclick,o.makef(function(){s.EVENT_MESSAGEBOX("only_back")},this))},isIndarkState:function(){return this.canotclick&&1==this.canotclick.active},lockItem:function(t,e){this.icon.active=t<=0,this.num.node.active=t<=0,this.add.active=t<=0,this.lockNode.active=t>0,this.lock=t,this.lockNode.active&&(o.sh(this.lockNode,"label",!e),e||o.textp(this.lockNode,"label","ulev",[t])),o.btn(this.lockNode,o.makef(function(){s.EVENT_MESSAGEBOX("lv_unlock",t)},this))},refrush:function(t,e){if(this.isIndarkState()||!(this.lock>0)){var i=a.get(this.id_name);this.num.string=e||i,this.add.active=!i,this.num.node.active=i,t&&this.numAddAction()}},numAddAction:function(){var e=t("UIGameUseItem").instance();if(null!=e){e.playAddEffect(this.num.node);var i=cc.sequence(cc.scaleTo(.2,1.2,1.2),cc.scaleTo(.2,1,1));this.num.node.runAction(i)}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",UIGameUseItem:"UIGameUseItem"}],UIGameTips:[function(t,e,i){cc._RF.push(e,"fdb88a60dpPWr06nWseYa6f","UIGameTips");var n=t("GameEvent"),o=t("N7Sound"),a=cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null},tips:[cc.Node]},statics:{ID_TIMEOUT:0,ID_RESET:1,soundIds:[{id:0,delay:0},{id:90127,delay:.35}]},onLoad:function(){this.initUI(),this.initEvent()},onDestroy:function(){n.off(this)},start:function(){},initUI:function(){this.content.active=!1,this.amin||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.callPlayEnd,this))},initEvent:function(){n.on(n.EVENT_GAME_TIPS,function(t){var e=t.getUserData();this.playAnim(e.state,e.callFunc,e.caller)},this)},setCallPlayEnd:function(t,e){this.callEnd={callFunc:t,caller:e}},callPlayEnd:function(t){if(this.callEnd){var e=this.callEnd.callFunc,i=this.callEnd.caller;this.callEnd=null,e.call(i,t)}},playAnim:function(t,e,i){var n=this;this.callPlayEnd(function(){n.content.active=!1,e&&e.call(i)},this);var s=a.soundIds[t];s.id&&this.scheduleOnce(function(){o.playSound(s.id)},s.delay),this.content.active=!0,this.anim.play("game_tips")}});cc._RF.pop()},{GameEvent:"GameEvent",N7Sound:"N7Sound"}],UIGameTopbarV2:[function(t,e,i){cc._RF.push(e,"c9765am+PVNL6ZBMLEgWcl8","UIGameTopbarV2");var n=t("GameEvent"),o=t("GameTools"),a=t("N7UIEffectLayer"),s=t("GameCommon"),c=t("N7Resource"),r=t("N7UIFlyLayer"),l=t("JsonMetaCache"),h=t("N7Sound"),u=t("n7"),d=cc.Class({"extends":cc.Component,properties:{maxMoves:0,labMoves:{type:cc.Label,"default":null},labLevel:{type:t("AtlasText"),"default":null},nodeGoals:{type:cc.Node,"default":null},lightTarget:{type:cc.Node,"default":null},content:{type:cc.Node,"default":null},show_bk:{type:cc.Node,"default":null},progress:{type:cc.Node,"default":null},unstep:{type:cc.Node,"default":null}},statics:{instance:function(){return d.s_instance},moves:function(){return d.instance().maxMoves},getGoalIcon:function(t){return d.instance().getGoalIcon(t)},subGoal:function(t){return d.instance().chgGoal(t,-1)},ADDPERCENTAGE_TIME:50,FLYTO_GOAL_PARAMS:{scale1:.4,scale2:.7,p1:{offset:-135},p2:{offset:15},time:.45},FLYTO_GOAL_PARAMS2:{scale1:.4,scale2:.7,p1:{offset:135},p2:{offset:-15},time:.45},FLYTO_GOLD_PARAMS:{scale1:.4,scale2:.5,p1:{offset:-120},p2:{min:10,max:20},time:.8},FLYTO_CHANAGE_PARAMS:{scale1:.4,scale2:.4,p1:{min:10,max:20},p2:{min:10,max:20},time:.5},GOAL_SCALES:[{scale:1.2,x:0},{scale:1.2,x:80},{scale:1,x:80},{scale:1,x:80}]},onLoad:function(){d.s_instance=this,this.initUI(),this.initEvent()},onDestroy:function(){d.s_instance=null,n.off(this)},initUI:function(){this.starsPercent=null,this.stars=[];for(var t=void 0,e=0;e<=2;e++)t=o.chd(this.node,"content/staring/stars/star"+e),this.stars.push(t),o.sh(t,"star",!1);this._cupg=1,this._score=0,this._showscore=0,this._scoretm=0,this._starsValue=0,this.setProgress(0)},shakeUI:function(){this.getComponent(cc.Animation).play()},initEvent:function(){n.on(n.EVENT_GAME_ZHEN,function(t){t.getUserData().all&&this.shakeUI()},this),n.on(n.EVENT_GAME_MOVE_STEP,function(t){var e=this.maxMoves=t.getUserData();this.time||(this.labMoves.string=""+e,this.level<=50&&e<=10&&(this.unstep.active=!0),10!=e&&5!=e||this.isShowHint||(5==e&&(this.isShowHint=!0),n.EVENT_MESSAGEBOX("only_step",e,2,void 0,!0))),u.isDebug&&u.log("UIGameTopbar chgGoal roundEnd:"+e)},this),n.on(n.EVENT_GAME_STARTV2,function(){this.__gameStart()},this),n.on(n.EVENT_GAME_BALANCE,function(){this.__gameEnd()},this),n.on(n.EVENT_GAME_PAUSE,function(t){this.__gamePause(t.getUserData())},this),n.on(n.EVENT_GAME_ADD_SCORE,function(t){this.addScore(t.getUserData())},this),n.on(n.EVENT_GAME_ADD_GOAL,function(t){var e=t.getUserData();for(var i in e){var n=this.map[i];e[i]&&n.chgNum(e[i])}},this),n.on(n.EVENT_STAR_INIT,function(t){this.initStarPosition(t.getUserData())},this),n.on(n.EVENT_GAME_TARGETNUMCHG,function(t){var e=t.getUserData(),i=l.tile(e[0]);this.chgUiTarget(i,e[1])},this)},subMoves:function(){var t=--this.maxMoves;this.time||(this.labMoves.string=""+t)},initData:function(e,i,n,a){this.MAXSCORE=a,this.maxMoves=1*i,this.goldNum=0,this.level=e;for(var c=t("UIGameGoal"),r=[],h=void 0,u=void 0,f=0,g=this.nodeGoals.childrenCount;f<g;f++)(h=this.nodeGoals.children[f]).active=!1,u=h.getComponent(c),r.push(u);var p={},_=void 0,m=0,v=0;for(var E in n)v++,p[(_=n[E]).row.goalName]=r[m],r[m].node.active=!0,r[m++].setData(_.row,_.num,!0);var y=d.GOAL_SCALES[v-1],b=this.nodeGoals.getComponent(cc.Layout);1==v?(b.enabled=!1,r[0].node.position=cc.p(0,0)):(b.spacingX=y.x,this.scheduleOnce(function(){b.enabled=!1},0));for(var I in r)o.scale(r[I].node,"content",y.scale);this.map=p;var T=l.map(e).hard,C=this.time=2==T;o.sh(this.staring,null,!0),o.sh(this.timing,null,C),o.sh(this.content,"lab_time",C),o.sh(this.content,"lab_steps",!C),this.labMoves.string=""+(this.time?s.BATTLE_TIME:i),C&&(this.bar_mask=o.chd(this.timing,"progressBar_mask"))},initGoals:function(t){},addGoal:function(t,e,i,n){this.chgGoal(t.getMeta(),-1),i&&i.call(n)},chgGoal:function(t,e){var i=this.map[t.goalName];if(i.chgNum(e),!i.isPlaying||i.isCheck()){i.isPlaying=!0;var n=c.createNodeFromId(i.isCheck()?5600:5599);n.position=a.getPos(i.node),a.node().addChild(n),n.getComponent("effect_base").playEffect(),this.scheduleOnce(function(){i.isPlaying=!1},.25)}},__gameStart:function(){},__gameEnd:function(t){},__gamePause:function(t){this.gamePause=void 0!=t},getSupTime:function(){return this.time?this._TIME_:this.maxMoves},getMovePos:function(){return this.movePos||(this.movePos=r.getPos(this.labMoves.node)),this.movePos},stepChange:function(){var t=this.labMoves.node.scaleX,e=0,i=1,o=this.maxMoves-this.step_before,a=0;o<=5?(e=1/o,a=o):(a=5,i=parseInt(o/a),e=1/a),this.labMoves.string=""+this.step_before;for(var s=this.step_before,c=[],r=e/2,l=0;l<a;l++){c.push(cc.scaleBy(r,1.2,1.2),cc.callFunc(function(t,e){this.labMoves.string=""+e,e==this.maxMoves&&n.EVENT_GAME_BUYED5STEPEND()},this,l==a-1?this.maxMoves:s+=i),cc.scaleTo(r,t,t));var h=cc.sequence(c);this.labMoves.node.runAction(h)}},flyToCube:function(t,e,i){var n=r.getPos(t.node),o=this.getMovePos();d.FLYTO_CHANAGE_PARAMS,this.subMoves(),c.loadRes(5611,function(t){var a=t.moveTo(o,n,e,i),s=t.node;h.playSound(90133),r.flyNodeTo(s,a,o)},this)},flyToStep:function(t,e,i){var n=this.getMovePos(),o=r.getPos(t);c.loadRes(5611,function(t){var a=t.moveTo(o,n,function(){this.step_before=this.maxMoves,e.call(i),this.stepChange()},this),s=t.node;r.flyNodeTo(s,a,o)},this)},getGoalIcon:function(t){return this.map[t]},flyToGoal:function(t,e,i,n){var o=e.node;o||(o=c.createNodeFromId(e.effectId||5624,"goal_base")),o.node.scale=s.gameMapScale,a.node().addChild(o.node),o.init(t,e,i,n)},balanceEnd:function(){this.content.active=!1},pushGoalToNode:function(e){var i=cc.instantiate(this.lightTarget);for(var n in o.nodeAdd(e,this.lightTarget,i),this.map){var a=t("UIGameV2").instance().gameLogic.goals().isTarget(n),s=this.map[n].node.name;i.getChildByName("goal").getChildByName(s).getComponent("UIGameGoal").chgNum(a)}return i},pushStepToNode:function(t){var e=this.labMoves.node,i=cc.instantiate(e);return o.nodeAdd(t,e,i),i},showGoals:function(){this.nodeGoals.active=!0},chgUiTarget:function(t,e){this.map[t.goalName]&&this.chgGoal(t,e)},addScore:function(t){this._score+=t;var e=this._score-this._showscore;this._wait_step=e/d.ADDPERCENTAGE_TIME,u.isDebug&&u.log("scorefly.UIGameTopbarV2.\u754c\u9762\u5f53\u524d\u5206\u6570: "+this._showscore+",\u76ee\u6807\u5206\u6570: "+this._score+",_wait_step: "+this._wait_step)},showScore:function(){var t=o.Percentage(this._showscore,this.MAXSCORE);this.setProgress(t)},initStarPosition:function(t){this.starsPercent=t;for(var e=0;e<t.length;e++)this.stars[e].x=-this.progress.width/2+this.progress.width*t[e]},setProgress:function(t){if(t>1&&(t=1),t!=this._cupg&&(this._cupg=t,this.progress.parent.width=this.progress.width*t,this.starsPercent))for(var e=this.starsPercent.length,i=void 0,n=void 0,s=0;s<e;s++){if(i=this.stars[s],t>=(n=this.starsPercent[s])&&!i.isLight){i.getComponent(cc.Animation).play();var r=c.createNodeFromId(5623);r.position=a.getPos(i),a.node().addChild(r),r.getComponent("effect_base").playEffect(),h.playSound(90181),i.isLight=!0}t<n&&i.isLight&&(o.sh(i,"star",!1),i.isLight=!1)}},balance:function(t,e){this.labMoves.string="0",this._wait_step=0,this._showscore=this._score=e,this.showScore()},update:function(t){this._wait_step&&(this._showscore+=100*t*this._wait_step,this._showscore>=this._score&&(this._showscore=this._score,this._wait_step=0),this.showScore())}});cc._RF.pop()},{AtlasText:"AtlasText",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIEffectLayer:"N7UIEffectLayer",N7UIFlyLayer:"N7UIFlyLayer",UIGameGoal:"UIGameGoal",UIGameV2:"UIGameV2",n7:"n7"}],UIGameUseItem:[function(t,e,i){function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o;cc._RF.push(e,"6516f0X/wdKD472AmKIjhku","UIGameUseItem");var a=t("GameTools"),s=t("GameEvent"),c=t("ItemsLogic"),r=t("UIItemHint"),l=t("GameCommon"),h=t("UserLogic"),u=t("ShareLogic"),d=cc.Class((n(o={"extends":cc.Component,properties:{content:{type:cc.Node,"default":null},map:{type:cc.Node,"default":null},items_floors:{type:t("UIGameSingleItem"),"default":[]},item_ads:{type:cc.Node,"default":null},item_effect:{type:cc.Node,"default":null},scrollView:{type:cc.ScrollView,"default":null},arrowList:{type:cc.Node,"default":null},numAddEff:{"default":null,type:cc.Node}},statics:{instance:function(){return d.s_instance},getIcon:function(t){return d.instance().getIcon(t)}},onLoad:function(){this.initUI(),this.initEvent(),this.initData(),this.underway=!1,d.s_instance=this,this.item_effect.active=!1,this.savedUseItems={}},onDestroy:function(){s.off(this),d.s_instance=null},start:function(){},initUI:function(){for(var t=void 0,e=h.geti("lev"),i=1;i<this.items_floors.length;i++){t=this.items_floors[i],this.itemlist=t.node.parent;var n=d._PREWAR_[i-1],o=e<n?n:-n;t.init(o),this.items_floors[t.id_name]=t}this.scrollView=this.scrollView&&this.scrollView.getComponent(cc.ScrollView),this.refrush(),this.showAds()},initEvent:function(){s.on(s.EVENT_GAME_CLICK_NODE,function(t){return this.clickCube(t.getUserData())},this),s.on(s.EVENT_SAWNUM_REFRUSH,function(t){this.refrush(t.getUserData())},this),s.on(s.EVENT_GAME_BALANCE,function(t){},this),s.on(s.EVENT_GUIDE_BRUSH,function(t){this.isGuide=!0,this.useItem(t.getUserData())},this),s.on(s.EVENT_GAME_MOVE_STEP,function(e){var i=this.maxMoves=e.getUserData(),n=1==t("SdkIns").instance().getSdkData("flyItem");i==(n?9:3)&&t("ShareLogic").getAdState(106)==l.SHARE_AD_0&&this.showNotice(n)},this),a.chd(this.content,"background").on(l.touchend,function(){this.closeMap(),this.underway=!1},this);var e=a.chd(this.item_ads,"canotclick");a.btn(e,a.makef(function(){var e=t("ShareLogic").getAdState(106)==l.SHARE_AD_0;s.EVENT_MESSAGEBOX(e?"only_ads":"ads_notice.no1")},this))},showNotice:function(t){if(!this.hasShowNotice){if(s.EVENT_GAME_ITEM_NOTICE("ads_notice.ads6"),this.scrollView&&this.scrollView.scrollToTopRight(.4),t){var e=a.chd(UIGameV2.node,"fly_item");if(!e)return;e.active=!0,this.scheduleOnce(function(){a.bezierFlyOld(e,this.item_ads,null,null,d.FLY)},.4)}this.hasShowNotice=!0}},showArrow:function(t,e){a.sh(this.arrowList,"left",t),a.sh(this.arrowList,"right",e)}},"onDestroy",function(){s.off(this)}),n(o,"initData",function(){}),n(o,"showAds",function(){var e=u.openAd(106),i=!!e&&u.showAndWatch(106,this.item_ads,function(e){e&&e.dt&&0==e.dt.code&&(a.unbtn(this.item_ads),t("UIGameV2").instance().topbar.flyToStep(this.item_ads,function(){s.EVENT_GAME_BUYED5STEP({step:3})},this),a.sh(this.item_ads,"canotclick",!0))},this);a.sh(this.item_ads,"",e),a.sh(this.item_ads,"canotclick",!i),e?(this.scrollView.node.on("scrolling",function(){var t=this.scrollView.getMaxScrollOffset().x,e=this.scrollView.getScrollOffset().x,i=1,n=1;0==e&&(i=0),Math.abs(e)==t&&(n=0),this.showArrow(i,n)},this),this.showArrow(0,1),this.scrollView.enabled=!0):(this.showArrow(0,0),this.scrollView.enabled=!1)}),n(o,"refrush",function(t){var e=void 0;if(t){var i=t.name,n=t.num;(e=this.items_floors[i])&&e.refrush(i,n)}else for(var o=1;o<this.items_floors.length;o++)(e=this.items_floors[o])&&e.refrush()}),n(o,"getIcon",function(t){return this.items_floors[t]}),n(o,"useItem",function(e){this.itemId=1*e;var i=this.items_floors[e];if(this.id_name=i.id_name,this.underway)return this.closeMap(),void(this.underway=!1);var n=t("UIGameV2");if(this.isGuide||!n.instance().isClickLock())if(c.get(this.id_name)<=0){var o=this;s.EVENT_OPEN_DIALOG({name:"dialog_buy_prop",param:{name:this.id_name,why:"game",fo:function(){o.useItem(e)}}})}else if(this.captureClick)this.closeMap();else{this.underway=!0;var r=n.instance();this.captureClick=!0,this.content.active=!0,this.itemNode=i.node,a.pushNode(i.node,this.content),r.closeClick(!0),this.mapNode=r.gameMap.content,this.mapNodeParent=this.mapNode.parent,this.mapPosition=this.mapNode.position,this.mapNode.scale=l.gameMapScale;var h=a.nodeToNodePos(this.mapNode,this.map);this.mapNode.parent=this.map,this.mapNode.position=h,this.item_effect.active=!0,a.resetParticle(this.item_effect),this.item_effect.position=a.nodeToNodePos(i.node,this.node),s.EVENT_OPEN_DIALOG({name:"dialog_item_hint",param:this.id_name}),this.item_ads.parent.getComponent(cc.Layout).enabled=!1}}),n(o,"clickCube",function(e){if(!this.captureClick)return!1;var i=this.isGuide;this.closeMap();var n=t("UIGameV2").instance(),o=this,a=n.useItem(e,1*this.itemId,function(){o.underway=!1},this),s=n.mapId;return a?(c.sub(this.id_name,1,"battle_"+s),this.saveUseItems(this.id_name,1),this.refrush()):this.underway=!1,!i}),n(o,"closeMap",function(){this.item_effect.active=!1,this.captureClick=!1,this.isGuide=!1,t("UIGameV2").instance().closeClick(!1),this.mapNode.scale=1,this.mapNode.parent=this.mapNodeParent,this.mapNode.position=this.mapPosition,this.content.active=!1,a.pushNode(this.itemNode,this.itemlist),r.instance()&&r.instance().closeDialog()}),n(o,"playAddEffect",function(t){var e=this.numAddEff;e.position=a.nodeToNodePos(t,this.node),e.active=!0,e.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal}),n(o,"saveUseItems",function(t,e){this.savedUseItems[t]||(this.savedUseItems[t]=0),this.savedUseItems[t]+=e}),o));d._PREWAR_=[8,12,13,16,20],cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",SdkIns:"SdkIns",ShareLogic:"ShareLogic",UIGameSingleItem:"UIGameSingleItem",UIGameV2:"UIGameV2",UIItemHint:"UIItemHint",UserLogic:"UserLogic"}],UIGameV2:[function(t,e,i){cc._RF.push(e,"0513eWGjbNNh4VZ7ACVNW7r","UIGameV2");var n=t("n7"),o=t("dialog_balance"),a=t("N7Sound"),s=t("GameEvent"),c=t("GameTools"),r=t("GameCommon"),l=t("ActionCommand"),h=t("ActionLock"),u=t("GameConfig"),d=t("JsonMetaCache"),f=t("UserDataV2"),g=t("N7Resource"),p=t("N7UIEffectLayer"),_=t("UIGameTopbarV2"),m=t("UserLogic"),v=cc.Class({"extends":cc.Component,properties:{background:{type:cc.Sprite,"default":null},topbar:{type:_,"default":null},gameMap:{type:t("UIGameMapV2"),"default":null},bottom:{type:t("UIGameBottomV2"),"default":null},dialogStart:{type:t("UIBattleStart"),"default":null},dialogBalance:{type:t("dialog_balance"),"default":null},pause:!1,_balanceStatu:0},statics:{instance:function(){return v.s_instance},isDownStop:function(){return v.instance()._downStop>0},downStop:function(t,e){return v.instance()._downStop+=t?1:-1},lockDown:function(t){return v.instance().lockDown(t)},isDowning:function(){return v.instance().isDowning()},unlockDown:function(t){return v.instance().unlockDown(t)},addMissileCount:function(t){var e=v.instance();e&&e.addMissileCount(t)},balanceStatu:function(){var t=v.instance();return t._balanceStatu||t.isBalance},delayCommand:function(t,e,i,n){var o=n;e.each(function(t,e){i&&e.cmd!=i||(e.delay=o,e.next=!0,o+=n)},t)},effectLock:function(t){return v.instance().effectLock(t)},effectUnlock:function(t){return v.instance().effectUnlock(t)},item_ids:[5501,5503,5502,null,5626]},onLoad:function(){this.pause=!0,this.uupdatatm=0,v.s_instance=this,window.UIGameV2=this,this.gameMap.getComponent(cc.Animation).on("finished",this.shakeUIEnd,this),this.scheduleOnce(function(){this.initUI(),this.initEvent(),this.readyGame(),t("TDLog").Event("UIGame",{mapid:this.mapId})},0)},initUI:function(){this.dialogStart.node.active=!1,this.dialogBalance.node.active=!1,this.node.on(r.touchstart,function(){s.EVENT_GAME_TOUCH()},this),this.clearGameLogic();var e=t("GameMapV2");this.gameLogic=new e,this.lock=new h(this.actionLockFinish,this),this.itemLock=new h(null,null),this.lockDownList=new h(this.lockDownFinish,this)},effectLock:function(t){return this.itemLockUUID||(this.itemLockUUID=0),this.itemLock.lock(++this.itemLockUUID,t)},effectUnlock:function(t){if(t)return this.itemLock.unlock(t)},readyGame:function(){var t=s.GET_GAME_PARAM();t||(t={mid:u.get("mapId",1)}),this.initGame(t)},clearGameLogic:function(){this.gameLogic&&(this.gameLogic.onDestroy(),this.gameLogic=null)},onDestroy:function(){this.unschedule(this.cubeTips),this.clearGameLogic(),v.s_instance==this&&(v.s_instance=null,window.UIGameV2=null),s.off(this)},update:function(t){this.pause||(this.eachCommandPool(),this.sender&&this.sender.update(t),this.uupdatatm+=t,this.uupdatatm>1&&(this.uupdatatm--,f.update()))},actionLockFinish:function(t){0==t?this.setNextTipsTime():this._preclicktm_=0},makeRealign:function(t,e){if(!t.havePermission(l.PERMISSION_REALIGN))return!1;if(n.isDebug&&n.log("UIGameV2 makeRealign uuid:"+t.uuid+" permission:"+t.permission+" lock:"+this.lockDownList.isLock()),this.commandCount>0)return!0;t.removePermission(l.PERMISSION_REALIGN);var i=this.gameLogic.checkRealign();if(i&&i.cmds.length){var o=this.addCommand(i,t,l.PERMISSION_NO);o.downUUID=this.lockDown(t.uuid),v.downStop(!0,o.downUUID),o.finishCallFunc(function(t,i){return this.unlockDown(o.downUUID),v.downStop(!1,o.downUUID),o.downUUID=0,this.lockDownList.isLock(),e||this.commandEnd(t),!0},this),r.nowExcute&&this.executeCommand(o)}return!1},makeState:function(t,e){if(!t.havePermission(l.PERMISSION_STATE))return!1;n.isDebug&&n.log("UIGameV2 makeState uuid:"+t.uuid+" permission:"+t.permission+" lock:"+this.lockDownList.isLock()),t.removePermission(l.PERMISSION_STATE);var i=this.gameLogic.chgState();if(i&&i.cmds.length){var o=this.addCommand(i,t,l.PERMISSION_NO);if(!o)return!1;o.downUUID=this.lockDown(t.uuid),o.finishCallFunc(function(t,i){return this.unlockDown(o.downUUID),o.downUUID=0,this.lockDownList.isLock(),e||this.commandEnd(t),!0},this),r.nowExcute&&this.executeCommand(o)}return!1},makeDown:function(t,e){return!!t.havePermission(l.PERMISSION_DOWN)&&(n.isDebug&&n.log("UIGameV2 makeDown uuid:"+t.uuid+" permission:"+t.permission+" lock:"+!!v.isDownStop()),!!v.isDownStop()||(t.removePermission(l.PERMISSION_DOWN),!!this.doMakeDown(t,!t.havePermission(l.PERMISSION_ROUNDEND))))},checkDownList:function(t){return!!(t&&t.cmds.length>0)},doMakeDown:function(t,e){if(v.isDownStop())return null;var i=this.gameLogic.makeDown(!0);if(this.checkDownList(i)){this._downCount++;var n=this.addCommand(i,t,l.PERMISSION_TOY);return n.downUUID=this.lockDown(t.uuid),n.isDownCube=!0,n.finishCallFunc(function(t,i){return this.unlockDown(n.downUUID),n.downUUID=0,this.lockDownList.isLock(),e||this.commandEnd(t),this.changeAllList(),--this._downCount&&s.EVENT_GAME_CUBE_DOWN_END(),!0},this),r.nowExcute&&this.executeCommand(n),n}return null},isDowning:function(){return v.instance()._downCount>0},downStop:function(t,e){t?this._downStopUUID[e]||(this._downStop++,this._downStopUUID[e]=!0):this._downStopUUID[e]&&(this._downStop--,delete this._downStopUUID[e])},changeAllList:function(){this.gameLogic.checkMapTileList(),this.changeList()},makeToys:function(t,e){if(!t.havePermission(l.PERMISSION_TOY))return!1;if(v.isDownStop())return!0;t.removePermission(l.PERMISSION_TOY);var i=this.gameLogic.makeToy();if(this.checkDownList(i)){var o=this.addCommand(i,t,l.PERMISSION_TOY);o.downUUID=this.lockDown(t.uuid);var a=null;for(var s in o.cmds){var c=o.cmds[s];if(c.cmd!=r.com_destroy){if(c.cmd!=r.com_destroy){a&&(c.stop=!0,a.finNext=c);break}}else c.datas.tar&&(a=c)}return n.isDebug&&n.log("UIGameV2 makeToys uuid:"+t.uuid+" permission:"+t.permission+" ac:"+o.uuid),o.finishCallFunc(function(t,e){return this.unlockDown(o.downUUID),o.downUUID=0,this.commandEnd(t),!0},this),r.nowExcute&&this.executeCommand(o),!0}return!1},prebattleEnd:function(t){return!!t.havePermission(l.PERMISSION_PREBATTLE)&&(t.removePermission(l.PERMISSION_PREBATTLE),s.EVENT_GAME_STARTV2(),!0)},roundEnd:function(t){if(!t.havePermission(l.PERMISSION_ROUNDEND))return!1;if(!t.allFinishStrict())return!0;if(t.removePermission(l.PERMISSION_ROUNDEND),this._balanceStatu||this.isBalance)return n.isDebug&&n.log("UIGameV2 roundEnd uuid:"+t.uuid+" bs:"+this._balanceStatu+" bal:"+this.isBalance),!0;var e=t.userUseItem;e||(e=this.commandCount>0),n.isDebug&&n.log("UIGameV2 roundEnd uuid:"+t.uuid+" permission:"+t.permission+" cmdcount:"+this.commandCount);var i=this.gameLogic.roundEnd(e,t.root);if(this.commandCount<=0&&this.gameLogic.checkCanGift(),i&&i.cmds.length){this.isBalance=!1;var o=r.BALANCE_DELAYTIME;for(var a in i.cmds){var s=i.cmds[a],c=s.datas;if(s.cmd==r.com_balance)this.isBalance=!0;else if(s.cmd==r.com_chgto){if(this.isBalance&&d.tile(c.id).isItem)return this.balanceBiuBiu(t,i,this.isBalance),!0}else s.cmd==r.com_activeprop&&this.isBalance&&(s.delay=o,s.next=!0,o+=r.BALANCE_DELAYTIME)}var h=this.addCommand(i,this.isBalance?null:t,null,this.isBalance);return n.isDebug&&n.log("UIGameV2 roundEnd end uuid:"+h.uuid+" permission:"+h.permission),!0}return!1},addMissileCount:function(t){this.missileCount+=t},balanceBiuBiu:function(t,e,i){var n=[],o=r.magiccube_delaytime;for(var a in e.cmds){var s=e.cmds[a];s.cmd==r.com_chgto&&(n.push(s),s.delay=o,s.next=!0,o+=r.magiccube_delaytime)}var c=this.addCommand(e,i?null:t,null,!0);c.activeList=n,this.balanceActiveCount=c.activeList.length;var l=this;return c.finishCallFunc(function(t,e){return l.scheduleOnce(c.balanceActive,.5),!0},this),c.finishCallFunc(function(t,e){if(t.canDelete(!0))return t.deleteLock=!1,this.scheduleOnce(function(){this.balanceEnd()},1.5),!0},this),c.deleteLock=!0,c.balanceActive=function(){return!c.activeList||(l.acBalance=c,c.activeCount=c.activeList.length,c.activeIdx=0,l.schedule(c.activeBalanceItem,r.auto_activeitem_delaytime),!0)},c.activeBalanceItem=function(){for(var t=l.gameMap,e=c.activeIdx;e<c.activeCount;e++){var i=c.activeList[e];if(i){var n=t.getCubeFromUUID(i.datas.gid);if(!l.checkCube(n)&&l.activeCube(n,!0,c)){e++;break}l.balanceActiveCount--}}c.activeIdx=e,c.activeIdx>=c.activeCount&&(delete c.activeList,l.unschedule(c.activeBalanceItem))},c.canDelete=function(t){var e=this.allFinish();return e&&l.lock.unlock(c.uuid),!(!e||l.balanceActiveCount>0||l.lock.isLock()||this.permission||!t&&this.deleteLock)},c},roundBalance:function(t){if(!t.havePermission(l.PERMISSION_ROUNDBALANCE))return!1;if(!t.allFinish()||this.balanceActiveCount>0)return!0;if(this.lockDownList.isLock())return!0;t.removePermission(l.PERMISSION_ROUNDBALANCE);var e=this.gameLogic.bal(t.userUseItem);if(e&&e.cmds.length>0){if(!this.isBalance)for(var i in e.cmds)e.cmds[i].cmd==r.com_balance&&(this.isBalance=!0);return this.balanceBiuBiu(t,e,!0),!0}return n.log("UIGameV2 roundBalance uuid:"+t.uuid+" balanceBiuBiu call balance end 2"),this.scheduleOnce(function(){this.balanceEnd()},1.5),!1},commandEnd:function(t,e){return this.makeState(t,e)?t.permissionFinish():this.makeDown(t,e)?t.permissionFinish():this.makeToys(t,e)?t.permissionFinish():this.makeRealign(t,e)?t.permissionFinish():this.roundBalance(t)?t.permissionFinish():this.roundEnd(t)?t.permissionFinish():!!this.prebattleEnd(t)&&t.permissionFinish()},addCommand:function(t,e,i,n){var o=new l(t);return o.setPermission(i||l.PERMISSION_NO),this.lock.lock(o.uuid),e&&e.addSub(o),this.lockDownList.isLock()&&(this.downPools||(this.downPools=[]),this.downPools.push(o.downList)),n||this.commandCount++,o.noCount=n,o.finishCallFunc(function(t,e){t.noCount||t.isFinished||(this.commandCount--,t.isFinished=!0),t.isWaitFinish()||this.commandEnd(t)},this),this.cmdPools.push(o),e&&e.callNextActionCommnad(o),o},isAllCommandHave:function(t){for(var e in this.cmdPools)if(this.cmdPools[e].havePermission(t))return!0;return!1},eachCommandPool:function(){if(!this.pause&&this.cmdPools&&0!=this.cmdPools.length){var t=[];for(var e in this.cmdPools){var i=this.cmdPools[e];this.executeCommand(i)&&(this.lock.unlock(i.uuid),t.push(e),i.clearAll())}for(var n=t.length-1;n>=0;n--)this.cmdPools.splice(t[n],1);this.readyBalanceCallFunc&&1==this.cmdPools.length&&this.cmdPools[0].isBalance&&(this.readyBalanceCallFunc.call(this),this.readyBalanceCallFunc=null)}},executeCommand:function(t){return t.eachGroup(function(e,i){for(;t.command(!0)&&!t.pause();){var n=t.command();if(t.pause()||n.pause)return t.pause(t.pause()||n.pause),void(n.pause=!1);t.read(),n.delay?this.delayOpenCommand(t,n):this.opCommand(t,n)}},this),!(!(t.callFinish()&&t.allFinish()&&t.canDelete())||t.permission)},delayOpenCommand:function(t,e){this.scheduleOnce(function(){this.opCommand(t,e)},e.delay),e.next&&t.next()},gmBalance:function(t){var e=this.gameLogic.bal(cmd.userUseItem);e&&e.cmds.length&&this.addCommand(e,null,l.PERMISSION_NO)},opCommand:function(t,e){var i=!1;switch(e.cmd){case r.com_uitem:i=this.userUseItem(t,e);break;case r.com_chglist:i=this.changeList(t,e);break;case r.com_chgto:i=this.changeCube(t,e);break;case r.com_create:i=this.createCube(t,e);break;case r.com_destroy:i=this.destroyCube(t,e,e.destroyEff);break;case r.com_down:i=this.downCube(t,e);break;case r.com_merge:i=this.mergeCube(t,e);break;case r.com_useitem:i=this.specialCube(t,e);break;case r.com_sorce:break;case r.com_activeprop:i=this.activeSpecialCube(t,e);break;case r.com_dtchg:i=this.changeData(t,e);break;case r.com_realign:i=this.realign(t,e);break;case r.com_moveto:i=this.conveyor(t,e,!0);break;case r.com_evaluate:i=this._evaluate(t,e);break;case r.com_transfer:i=this.portal(t,e);break;case r.com_conveyor:i=this.conveyor(t,e);break;case r.com_balance:i=this.balance(t,e);break;case r.com_tips:i=this.showCubeTips(t,e);break;case r.com_undo:i=this.undo(t,e);break;case r.com_wait:break;default:i=!0}i&&(e.next||t.next(),t.finish(e))},undo:function(t,e){var i=this.effectLock("undo");t.removePermission(l.PERMISSION_ROUNDEND),g.loadRes(5626,function(n){var o=p.node();n.node.parent=o,n.setCallFunc(function(o){1==o&&this.gameMap.inMap(0,this.gameLogic.mapDatas,function(){n.playEffectEnd(function(n){2==n&&(this.effectUnlock(i),t.next(),t.finish(e))},this)},this)},this),n.playEffect()},this)},activeCannon:function(t,e,i){var n=this.gameLogic.crtItems(t.gid);if(n&&n.cmds.length){var o=this.addCommand(n,e,l.NO);return o.finishCallFunc(function(t,e,i){return t.allFinish()},this,e),o}return null},activeSpecialCube:function(t,e){var i=e.datas,o=this.gameMap.getCubeFromUUID(i.gid);if(this.checkCube(o))return n.isDebug&&n.error("UIGameV2 doActiveSpecialCube no find uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid),e.next||t.next(),void t.finish(e);if(this._balanceStatu&&36==o.meta.id&&this.missileCount>6)return e.next||t.next(),void t.finish(e);var a=this.gameLogic.dispel(o.grid.x,o.grid.y,!t.mergeGid);if(a&&a.cmds.length){var s=this.addCommand(a,t,l.PERMISSION_DOWN),c=this.effectLock("activeSpecialCube "+s.uuid);s.ascId=c,n.isDebug&&n.log("UIGameV2 doActiveSpecialCube uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid+" ac:"+s.uuid),s.finishCallFunc(function(t,o,a){if(this.effectUnlock(c),n.isDebug&&n.log("UIGameV2 doActiveSpecialCube uuid:"+a.uuid+" idx:"+e.idx+" gid:"+i.gid+" fin call"),t.allFinish())return a.finish(e),!0},this,t)}else t.finish(e);e.next||t.next()},changeList:function(t,e){if(this.gameLogic.logicEnd())t&&e&&(t.next(),t.finish(e));else{var i=this.gameLogic.mapDatas,n=this.gameMap;for(var o in i){var a=i[o];if(a.block){var s=n.getCubeFromUUID(a.block.gid);s&&a.block&&a.block.list&&s.setList(a.block.list.length,!0)}}t&&e&&(t.next(),t.finish(e))}},changeData:function(t,e){var i=e.datas,o=this.gameMap.getCubeFromUUID(i.gid);if(this.checkCube(o))return n.error("UIGameV2 changeData no find uuid:"+t.uuid+" gid:"+i.gid),!0;o.setParam(i,!0,t,function(n,a){var s=null;return 1==i.tar&&c.queryBinary(n,r.CUBE_SETPARAM_START)&&(s=this.addGoal(t,e,o,a)),c.queryBinary(n,r.CUBE_SETPARAM_END)&&(this.unlockBlock(o.gid),t.finish(e)),c.queryBinary(n,r.CUBE_SETPARAM_NEXT)&&(e.next||t.next()),s},this)},moveTo:function(t,e){var i=e.datas,o=this.gameMap.getCubeFromUUID(i.gid);if(this.checkCube(o))return n.error("UIGameV2 moveTo no find uuid:"+t.uuid+" gid:"+i.gid),!0;arr.push(cc.scaleTo(.1,0,0),cc.place(pos),cc.scaleTo(.1,1,1)),t.next(),t.finish(e)},userUseItem:function(t,e){var i=e.datas,o=this.gameMap.getCubeFromUUID(i.gid);if(this.checkCube(o))return n.error("UIGameV2 userUseItem no find uuid:"+t.uuid+" gid:"+i.gid),!0;t.userUseItem=!0;var a=v.item_ids[i.item-1];if(!a)return!0;this.addGoal(t,e,o,null,e.addGoal),p.addInCube(o,a,void 0,function(i){i.node.scale=r.gameMapScale,i.play(t,o.grid,e,function(t){},this)},this)},specialCube:function(t,e){var i=e.datas;n.isDebug&&n.log("UIGameV2 specialCube uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid);var o=this.gameMap.getCubeFromUUID(i.gid);
if(this.checkCube(o))return this.effectUnlock(t.ascId),n.error("UIGameV2 specialCube no find uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid),!0;var a=o.getMeta();if(!a&&!a.effectHit)return this.effectUnlock(t.ascId),n.error("UIGameV2 specialCube uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid+" idx:"+e.idx+" no meta"),!0;s.EVENT_GAME_DOG_HAPPY(1);var c=a.effectHit;i.exdt&&(c=i.exdt.eff||c),o.node.active=!1,this.addGoal(t,e,o,null,e.addGoal),p.addInCube(o,c,void 0,function(i){this.effectUnlock(t.ascId),i.node.scale=r.gameMapScale,i.play(t,o.grid,e,function(t){t==r.STATE_STARTHIT&&e.datas&&null!=e.datas.dur&&this.scheduleOnce(function(){p.addInCube(null,5057,void 0,function(t){t.node.scale=r.gameMapScale,t.setTexture(e.datas.dur),t.playEffect()},this)},.5),r.STATE_PLAYEND},this),o.destroyMe("specialCube"),this.gameMap.setCubeOutMap(o)},this)},realign:function(t,e){var i=this.effectLock("realign");t.finishCallFunc(function(e,o){var a=this.gameLogic.realign();if(a&&a.cmds.length){s.EVENT_GAME_TIPS(1,function(){},this);var c=this.addCommand(a,t);c.realign=!0,c.finishCallFunc(function(t,e){return this.effectUnlock(i),!0},this)}else n.error("UIGameV2 realign fail"),this.effectUnlock(i);return!0},this),t.finish(e),t.next()},activeItem:function(t,e){var i=this.gameLogic.dispelRocker(e.grid.x,e.grid.y);i&&i.cmds.length&&this.addCommand(i,t,l.PERMISSION_SUB)},conveyor:function(t,e,i){var o=e.datas,a=this.gameMap.getCubeFromUUID(o.gid);if(this.checkCube(a))n.error("UIGameV2 conveyor no find uuid:"+t.uuid+" gid:"+o.gid);else{var s=a.position(),c=o.grid,l=this.gameMap.getGridPos(c.x,c.y),h=Math.max(Math.abs(c.x-a.grid.x),Math.abs(c.y-a.grid.y));if(t.realign){var u=25*(a.grid.x-c.x),d=25*(a.grid.y-c.y),f=cc.p(u,d);return this.gameMap.setCubeInMap(a,cc.p(c.x,c.y),l,a.layer,"realign"),a.moveTo(l,r.CUBE_REALIGN_TIME,f,function(){t.finish(e)},this),void t.next()}var g=[];h>1&&!i?g.push(cc.scaleTo(r.CUBE_PORTAL_TIME,0,0),cc.place(l),cc.scaleTo(r.CUBE_PORTAL_TIME,1,1)):g.push(cc.moveTo(i?r.CUBE_FLY_TIME:r.CUBE_DROP_TIME,l)),g.push(cc.callFunc(function(i){this.gameMap.setCubeInMap(a,cc.p(c.x,c.y),s,a.layer,"move"),t.finish(e)},this)),a.node.runAction(cc.sequence(g)),t.next()}},balance:function(t,e){var i=e.datas;t.setPermission(l.PERMISSION_BAL),this._balanceStatu=i.statu,t.isBalance=!0,this.readyBalance(function(){if(1!=i.statu)return t.finish(e),void t.next();var n=_.moves(),o=d.preloadRes();for(var a in o){var s=o[a];s.preload&&s.preload.bal&&g.preloadRes(s.id,function(t){var e=t.prefab||t;!e||e.data,g.preloadPrefab(e,n)},this)}this.scheduleOnce(function(){this.balanceWin(t,e)},.25)},this)},readyBalance:function(t){this.readyBalanceCallFunc=t},balanceFail:function(){},balanceWin:function(t,e){this.dialogBalance.node.active=!0,s.EVENT_GAME_DOG_HAPPY(3);var i=e.datas;this.dialogBalance.enterState(o.STATE_FIREWORK,function(n,o){if(s.EVENT_GAME_BALANCE_START(i.statu,0),o)return t.removePermission(l.PERMISSION_ROUNDBALANCE),this.gameLogic.endCalScore(t.data),void this.balanceEnd();this.scheduleOnce(function(){t.finish(e),t.next()},1)},this)},balanceEnd:function(){if(n.log("UIGameV2 balanceEnd had:"+this.hadBalanceEnd),!this.hadBalanceEnd){this.hadBalanceEnd=!0;var e={ret:1,stu:this._balanceStatu,mid:this.mapId};if(n.log("UIGameV2 balanceEnd stat:"+this._balanceStatu),1==e.stu){this.gameMap.border.disappear(r.MAP_DISAPPEAR);var i=this.gameLogic.calculateStar();e.star=i.star,this.scheduleOnce(function(){showTT();s.EVENT_GAME_BALANCE_END(e),n.log("UIGameV2 balanceEnd show dialog"),this.topbar.balance(i.star,i.score),this.dialogBalance.enterState(o.STATE_FRIST,null,null,i.star,i.score)},1),this.dialogBalance.setParam(e);var a=this.addBuyed5Step(),c={mid:"m"+e.mid,score:"c"+i.score,star:"s"+i.star,move:"m"+i.move,allmove:"m"+i.allmove,buy5step:"b"+a,goals_str:i.goals_str};return t("TDLog").Event("balance_"+e.mid,c),t("TDLog").mission(21,this.mapId,a),m.levelup(i.star,i.move/i.allmove),t("SdkIns").instance().scoreUpdate({level:m.getLevel(),score:i.score}),void n.log("UIGameV2 balanceEnd end")}n.log("UIGameV2 balanceEnd fail"),void 0==this.stepcnt&&(this.stepcnt=0),s.EVENT_OPEN_DIALOG({name:"dialog_adding_steps",param:this.stepcnt})}},chgStepCnt:function(){this.stepcnt++},showGateEntrance:function(){t("SdkIns").instance();var e=t("GameLogic");e.crossFailed(this.gameLogic.goals().maxMoves);var i=e.retryNotice()?"dialog_gatefailed_notice":"dialog_gateEntrance";s.EVENT_OPEN_DIALOG({name:i,param:{lv:m.geti("lev"),t:1}})},gameExit:function(){3!=this._balanceStatu?this.showGateEntrance():this.scheduleOnce(function(){p.addInCube(null,2037,void 0,function(t){t.play(null,null,null,function(t){t==r.STATE_PLAYEND&&this.showGateEntrance()},this)},this)},.5)},destroyCube:function(t,e){var i=e.datas,o=this.gameMap.getCubeFromUUID(i.gid);return n.isDebug&&n.log("UIGameV2 destroyCube uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid),o?(e.next||(n.isDebug&&n.log("UIGameV2 destroyCube next uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid),t.next()),o.isDowning()&&o.meta.type==r.TILE_LAYER_TOY?(n.isDebug&&n.log("UIGameV2 destroyCube downing uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid),void o.addDownEnd(this.doDestroyCube,this,[t,e,o])):void this.doDestroyCube(t,e,o)):(n.error("UIGameV2 destroyCube no find uuid:"+t.uuid+" gid:"+i.gid),!0)},doDestroyCube:function(t,e,i){if(!i){var o=e.datas;if(!this.gameMap.getCubeFromUUID(o.gid))return n.error("UIGameV2 destroyCube no find uuid:"+t.uuid+" gid:"+o.gid),!0}var a=!i.node.active;a&&t.mergeGid==i.gid&&(a=!0);var s=i.getMeta(),c=!1;if(s&&s.goalAnim&&(c=s.goalAnim.goalFinish),e.datas.tar||(c=!1),!t.closeDestroyEff&&!a){var l=0;if(s&&s.effectDestroy&&(l=s.effectDestroy),u.get("expolde_effect",!0)){var h=i.grid,d=i.getCubeData();p.addInCube(i,l,void 0,function(i){i.node.scale=r.gameMapScale,null!=d&&i.setDatas(d),i.play(t,h,e,function(){},this)},this)}}var f=i.getGoal();this.addGoal(t,e,i,f,e.addGoal,function(i){c&&i==r.STATE_STARTHIT&&t.finish(e)},this),this.sender.remove(i.gid,function(t){t.cmd.finish(t.com)},this),!i.node.active||c?(i.node.active=!0,i.destroyMe("des_hide"),this.gameMap.setCubeOutMap(i),c||t.finish(e)):i.playDestroyAnim(t,function(n,o){t.finish(e),this.gameMap.setCubeOutMap(i)},this)},portal:function(t,e){var i=e.datas,o=this.gameMap.getCubeFromUUID(i.gid);if(this.checkCube(o))return n.error("UIGameV2 portal no find uuid:"+t.uuid+" gid:"+i.gid),!0;var a=this.gameMap,s=(a.getGridPos(i.org.x,i.org.y),a.getGridPos(i.tfto.x,i.tfto.y)),c=t.group();a.setCubeInMap(o,cc.p(i.tfto.x,i.tfto.y),o.position(),o.layer,"portal");var l=a.getCubeLayer(i.tfto.x,i.tfto.y,r.TILE_LAYER_TRANFORM);o.portalTo(s,r.CUBE_PORTAL_TIME/c.dropCount,function(i,n){1==n?l.cube.play():t.finish(e)},this),t.next()},downCube:function(t,e){var i=e.datas,o=this.gameMap,a=o.getCubeFromUUID(i.gid);if(this.checkCube(a))return n.error("UIGameV2 downCube no find uuid:"+t.uuid+" gid:"+i.gid),!0;var s=o.getGridPos(i.tar.x,i.tar.y);return n.isDebug&&n.log("UIGameV2 downCube uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid+" pos:"+i.tar.x+","+i.tar.y),i.tar.y>=a.grid.y?(n.isDebug&&n.log("UIGameV2 downCube pass uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid),t.next(),this.unlockBlock(a.gid,r.LOCK_COM_DOWN),void t.finish(e,function(){r.nowExcute&&this.executeCommand(t)},this)):(o.setCubeInMap(a,cc.p(i.tar.x,i.tar.y),a.position(),a.layer,"down"),a.cubeIsNew||this.sender.find(i.gid)?(this.sender.push(t,e,i.gid,i.tar.x),n.isDebug&&n.log("UIGameV2 downCube wait uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid+" pos:"+i.tar.x+","+i.tar.y),void t.next()):(a.cubeIsNew||(t.downOldCount=void 0==t.downOldCount?1:t.downOldCount+1),this.doDownCube(t,e,a,s),void t.next()))},doDownCube:function(t,e,i,o){var a=e.datas;if(!i){var s=this.gameMap;if(i=s.getCubeFromUUID(a.gid),this.checkCube(i))return this.unlockBlock(a.gid,r.LOCK_COM_DOWN),t.finish(e,function(){r.nowExcute&&this.executeCommand(t)},this),n.isDebug&&n.error("UIGameV2 doDownCube no find uuid:"+t.uuid+" gid:"+a.gid),!0;o=s.getGridPos(a.tar.x,a.tar.y)}var c=i.cubeIsNew;n.isDebug&&n.log("UIGameV2 doDownCube do uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid+" pos:"+a.tar.x+","+a.tar.y),i.downTo(o,e,function(){n.isDebug&&n.log("UIGameV2 doDownCube fin uuid:"+t.uuid+" idx:"+e.idx+" gid:"+i.gid+" pos:"+a.tar.x+","+a.tar.y),!c&&t.downOldCount>0&&--t.downOldCount<=0&&(t.chgOldList=!0,this.changeAllList()),this.unlockBlock(i.gid,r.LOCK_COM_DOWN),t.finish(e,function(){r.nowExcute&&this.executeCommand(t)},this),this.punchCube(a.tar)},this)},punchCube:function(t){var e=this.gameMap.getCubeLayer(t.x,t.y-1,r.TILE_LAYER_NORMAL);e&&e.cube&&e.cube.punchMe&&e.cube.punchMe()},addCubeGlow:function(t,e){var i=g.createNodeFromId(5616);return i.zIndex=r.TILE_LAYER_MERGE_GLOW_ZINDEX,i.position=t.node.position,e.push(i),this.gameMap.normal.addChild(i),i},mergeCube:function(t,e){var i=e.datas,o=this.gameMap,a=0,c=o.getCubeFromUUID(i.gid);if(this.checkCube(c))return n.error("UIGameV2 mergeCube no find uuid:"+t.uuid+" gid:"+i.gid),!0;var l={isItem:c.isItem(),node:null},h=null;l.isItem||(h=[],this.addCubeGlow(c,h)),t.addGoalGid=i.gid,c.node.zIndex=r.TILE_LAYER_MERGE_T_ZINDEX,t.mergeLockId=this.effectLock("mergeCube");var u=t.group();for(var d in t.baseItem=c.meta.isItem,i.lst){var f=i.lst[d],p=o.getCubeFromUUID(f);if(this.checkCube(p))n.error("UIGameV2 mergeCube merge no find uuid:"+t.uuid+" gid:"+f);else if(p.node.zIndex=r.TILE_LAYER_MERGE_ZINDEX,c===p)t.mergeGid=c.gid;else{a++;var _=30*(p.grid.x-c.grid.x)+p.position().x,m=30*(p.grid.y-c.grid.y)+p.position().y,v=cc.p(_,m);l.isItem||(l.node=this.addCubeGlow(p,h)),p.mergeTo(c.position(),l,v,function(i){if(i.node.active=!1,--a<=0){for(var n in h)g.backPrefab(h[n]);this.addGoal(t,e,c),t.finish(e);var o=u.next();t.read(),this.opCommand(t,o)}},this)}}c.isItem()&&(s.EVENT_GAME_DOG_HAPPY(2),t.mergeItem=!0,t.waitFinish(!0),t.finishCallFunc(function(t,e){var n=this.activeCube(o.getCubeFromUUID(i.gid),!0,t);return n?n.finishCallFunc(function(){t.waitFinish(!1)},this):t.waitFinish(!1),!0},this,null,!0))},activeCube:function(t,e,i){if(this.checkCube(t))n.isDebug&&n.log("UIGameV2 doActiveCube finish no find");else{var o=this.gameLogic.dispel(t.grid.x,t.grid.y,e);if(o&&o.cmds.length){var a=this.addCommand(o,i,l.PERMISSION_SUB).finishCallFunc(function(t,e){return this.balanceActiveCount--,a},this);return n.isDebug&&n.log("UIGame activeCube uuid:"+(i?i.uuid:0)+" ac:"+a.uuid),a.activeByItem=i.mergeItem,a}n.isDebug&&n.error("UIGameV2 doActiveCube finish merge item fail")}return this.balanceActiveCount--,null},changeCube:function(t,e){var i=e.datas,o=this.gameMap,a=o.getCubeFromUUID(i.gid);if(this.checkCube(a))return n.error("UIGameV2 changeCube no find uuid:"+t.uuid+" gid:"+i.gid),!0;e.lockId=this.effectLock("changeCube_"+i.gid),this.addGoal(t,e,a,null,!0);var s=t.group();if(!i.bubu){if(i.cannon){var l=o.getCubeFromUUID(i.cannon);if(l)return void l.cube.flyToCube(a,a.grid,function(){this.doChangeCube(t,e,s,a,0)},this);n.isDebug&&n.log("UIGameV2 changeCube no find uuid:"+t.uuid+" gid:cannon "+i.cannon)}return this.doChangeCube(t,e,s,a)}this.topbar.flyToCube(a,function(i){i&&c.queryBinary(i,r.CUBE_SETPARAM_NEXT)||this.doChangeCube(t,e,s,a,0,function(){},this)},this)},checkItemCount:function(t,e){for(var i in t)if(t[i]>=e)return!0;return!1},doChangeCube:function(t,e,i,o,s,l,h){var u=e.datas,f=d.tile(u.id);n.isDebug&&n.log("UIGameV2 doChangeCube uuid:"+t.uuid+" gid:"+u.gid+" name:"+f.name+" merge:"+t.mergeItem),o.meta.effectChgTo>0&&p.addInCube(o,o.meta.effectChgTo,null,function(i){i.node.scale=r.gameMapScale,i.play(t,o.grid,e,function(t){},this)},this),o.setDisplayCallFunc(function(){var n=t.mergeItem;if(n){var a=0,s={},d=[],f=0;for(var _ in u.merge){if(++f>2)break;var m=u.merge[_],v=38==m.id?36:m.id;86==v||38==v||36==v?s[v]=s[v]?s[v]+1:1:c.isMagicCube(v)&&a++,d.push(v)}(this.checkItemCount(s,2)||a>0)&&(n=!1)}if(n||e.next||i.next(),u.id==r.id_tile_ice)this.playChangeIceCube(o,t,i,!1,function(){this.unlockBlock(o.gid),t.finish(e),this.effectUnlock(e.lockId)},this);else{o.clearCube(),o.node.scale=1;var E=null;if(n){var y=[],b=0;for(var I in u.merge){if(++b>2)break;var T=u.merge[I].id;y.push(T)}(E=g.createNodeFromId(5615,"effect_item_mix")).init(y,t,o.grid,e,function(n){r.STATE_PLAYEND==n&&(i.next(),this.unlockBlock(o.gid),t.finish(e),this.effectUnlock(e.lockId),this.effectUnlock(t.mergeLockId),l&&l.call(h))},this),E.node.scale=r.gameMapScale,p.addNodeInCube(o,E)}else(E=g.createNodeFromId(u.preBattle?5613:5614,"cake_mix_highlight")).node.scale=r.gameMapScale,o.setMix(E),u.preBattle||(E.soundId=t.baseItem?90238:90120),E.play(t,o.grid,e,function(t){r.STATE_PLAYEND==t&&(u.preBattle||o.addChangeEff(),l&&l.call(h))},this),this.unlockBlock(o.gid),t.finish(e),this.effectUnlock(e.lockId),this.effectUnlock(t.mergeLockId);t.mergeGid=0}},this),f.crsud&&a.playSound(f.crsud),f?o.setCubeData(f,u.exdt,!0):n.error("UIGameV2 doChangeCube id:"+u.id)},playChangeIceCube:function(t,e,i,n,o,a){v.ice_cube_list||(v.ice_cube_list=[[1,0,180,270],[0,-1,270,0],[-1,0,0,90],[0,1,90,180]]);var s=t.grid.x,c=t.grid.y,l=this.gameMap,h=!1,u=null,d=-1;for(var f in v.ice_cube_list){var g=v.ice_cube_list[f],p=l.getCubeLayer(s+g[0],c+g[1],r.TILE_LAYER_NORMAL);if(null!=p&&(p.meta.id==r.id_tile_ice||p.meta.id==r.id_tile_snowhouse)){h=!0,u=p.node;var _=p.grid,m=t.grid,E=cc.p(m.x-_.x,m.y-_.y);d=0!=E.x&&0==E.y?E.x<0?0:1:E.y<0?2:3;break}}if(h){var y=u?u.parent.convertToWorldSpaceAR(u.position):null;t.cube.setParams({dir:d,pos:y})}t.playCreateAnim(e,o,a)},flyToCube:function(t,e,i,o,a,s,c){var l=this.gameMap.getCubeFromUUID(t);if(this.checkCube(l))n.error("UIGameV2 flyToCube no find uuid:"+e.uuid+" gid:"+t);else{var h=a.node;h||(h=g.createNodeFromId(a.effectId||5624,"goal_base")),h.node.scale=r.gameMapScale,p.node().addChild(h.node),h.getGoalNode(l.getGoalNode()),e.waitFinish(!0),h.init(o,a,function(t){t==r.STATE_PLAYEND&&(e.waitFinish(!1),l&&l.cube&&l.cube.flyToEnd&&l.cube.flyToEnd(e,i)),null!=s&&null!=c&&s.call(c,t)},this)}},addGoal:function(t,e,i,n,o,s,c){if(this.creatTileScore(i,t.data.score,t.data.color,t,e),!e.datas.tar)return!1;o||(o=!i.node.active||t.addGoalGid==i.gid);var l=n&&n.meta||i.meta,h=l&&l.goalAnim?l.goalAnim:null,d=0;o||(h?(o=!h.fly,d=h.soundId):o=!0);var f=void 0;if(u.get("fly_effect")||(o=!0),e.datas.tarData&&(o=!1),o)f=this.topbar.addGoal;else{if(n=n||{},h&&(n.isDown=void 0==h.isDown||h.isDown,n.effectId=h.effectId||0),n.isDown){var g=e.goaldown?e.goaldown.y:1;n.y=g*r.GOALFLY_DOWN,n.downY=g*i.node.height}f=this.topbar.flyToGoal}if(d&&a.playSound(l.goalAnim.soundId),!e.datas.tarData)return f.call(this.topbar,i,n,s,c),!0;this.flyToCube(e.datas.tarData.gid,t,e,i,n,s,c)},createCube:function(t,e){var i=t.group();e.delay>0?this.scheduleOnce(function(){this.doCreateCube(t,e,i)},e.delay):this.doCreateCube(t,e,i),e.next||t.next()},doCreateCube:function(t,e,i){var o=e.datas;if(o.cannon){var a=this.gameMap.getCubeFromUUID(o.cannon);return a?void a.cube.flyToCube(null,e.datas.grid,function(){this.setCreateCube(t,e,i)},this):void n.log("UIGameV2 doCreateCube no find uuid:"+t.uuid+" gid:cannon "+o.cannon)}this.setCreateCube(t,e,i)},setCreateCube:function(t,e,i){var o=e.datas,a=r.TILE_LAYER_NORMAL;-1==o.gn?a=r.TILE_LAYER_BACKGROUND:o.gn==r.TILE_LAYER_BUFF&&(a=r.TILE_LAYER_BUFF);var s=o.tile.meta;n.isDebug&&n.log("UIGameV2 doCreateCube gid:"+o.tile.gid+" grid:"+o.grid.x+","+o.grid.y+" id:"+s.id+" name:"+s.name);var l=this.gameMap.setCube(o.tile,o.grid,a,!0,t,function(n){n.meta.id==r.id_tile_ice?this.playChangeIceCube(n,t,i,!0,function(){this.unlockBlock(n.gid),t.finish(e)},this):n.playCreateAnim(t,function(){this.unlockBlock(n.gid),t.finish(e)},this)},this);o.cannon&&(l.cubeIsNew=!1),a!=r.TILE_LAYER_NORMAL||o.cannon||l.meta.id==r.id_tile_ice||(void 0==this.offsetY&&(this.offsetY=c.nodeToNodePos(this.topbar.node,this.gameMap.normal).y,this.gridY=parseInt(this.offsetY/this.gameMap.cubeSize.height)+1,this.gridPosY=this.gameMap.getGridPos(0,this.gridY).y),l.node.y=this.gridPosY,l.node.active=!0)},unlockBlock:function(t,e){this.gameLogic.unLockGblock(t,e)},shakeUI:function(t){var e=this.gameMap.getComponent(cc.Animation),i=e.play(t.all?"tnt_jitter":"map_jitter");i.wrapMode=1==t.time?cc.WrapMode.Reverse:cc.WrapMode.LoopReverse,1!=t.time&&this.scheduleOnce(function(){e.stop(),this.shakeUIEnd()},t.time*i.duration)},shakeUIEnd:function(){var t=c.chd(this.gameMap.node,"content");t&&(t.position=cc.p(0,0))},initEvent:function(){s.on(s.EVENT_GAME_ZHEN,function(t){var e=t.getUserData();this.shakeUI(e)},this),s.on(s.EVENT_GAME_TILE_CLICK_LOCK,function(t){this.clickLock=t.getUserData()},this),s.on(s.EVENT_GAME_BUYED5STEPEND,function(t){this._balanceStatu=0,this.isBalance=this.hadBalanceEnd=!1,this.addBuyed5Step(1)},this),s.on(s.EVENT_GAME_BUYED5STEP,function(e){t("N7MusicV2").switchVol(1);var i=e.getUserData();if(i.item){i.item.Drill&&(t("ItemsLogic").add("Drill",1,"buystep"),s.EVENT_NUMBER_CHANGE({n:"Drill",a:1}),delete i.item.Drill);var n=this.gameLogic.chgPreItem(i.item);n&&n.cmds.length&&this.addCommand(n,null,l.PERMISSION_ALLBASE).finishCallFunc(function(t,e){return!0},this)}},this),s.on(s.EVENT_GAME_BUYED5STEP2,function(t){this.changeAllList()},this),s.on(s.EVENT_GAME_CLICK_NODE,function(t){this.clickCube(t.getUserData())},this),s.on(s.EVENT_GAME_TILE_LOADOK,function(t){this.gameStart()},this),s.on(s.EVENT_GAME_BATTLEGOAL_FLYED,function(t){this.goalFlyed()},this),s.on(s.EVENT_GAME_BATTLE_TOITEMS,function(t){this.battleToItems(t.getUserData())},this),s.on(s.EVENT_GAME_BALANCE,function(t){},this),s.on(s.EVENT_GAME_EXIT,function(t){this.gameExit()},this)},addBuyed5Step:function(t){return void 0==this._buyed5step&&(this._buyed5step=0),t&&this._buyed5step++,this._buyed5step},setNextTipsTime:function(){this._preclicktm_=r.CUBE_TILE_TIME,this._TM_=0},lockDown:function(t){return this.lockDownId=this.lockDownId?this.lockDownId+1:1,this.lockDownList.lock(this.lockDownId,t),this.lockDownId},unlockDown:function(t){this.lockDownList.unlock(t)},lockDownFinish:function(){},isClickLock:function(t){return v.balanceStatu()>0?1:this.gameLogic.logicEnd()?2:this.pause?3:this.closeClickState?4:this.clickLock?5:!t&&this.lock.isLock()?6:this.itemLock.isLock()?7:0},isGuidClickLock:function(t){return v.balanceStatu()>0?1:this.pause?3:this.closeClickState?4:!t&&this.lock.isLock()?6:this.itemLock.isLock()?7:0},clickCube:function(t){var e=t.cube,i=this.isClickLock(u.get("free_click"));if(i)return!1;n.isDebug&&n.log("UIGameV2 clickCube cube:"+e.grid.x+","+e.grid.y+" uuid:"+e.uuid+" lock:"+i),this.setNextTipsTime();var o=this.gameLogic.dispel(e.grid.x,e.grid.y,!1,!0);if(o&&o.cmds.length){var a=this.addCommand(o,null,l.PERMISSION_ALL).finishCallFunc(function(t,e){return!0},this);a.root=!0,r.nowExcute&&this.executeCommand(a)}else e.playCantClick()},closeClick:function(t){this.closeClickState=t},useItem:function(t,e,i,n){if(this.setNextTipsTime(),!this.pause&&!this.lock.isLock()){var o=t.cube,a=this.gameLogic.useItem(o.grid.x,o.grid.y,e);return a&&a.cmds.length?(this.addCommand(a,null,l.PERMISSION_ALLBASE).finishCallFunc(function(t,e){return i&&i.call(n),!0},this),!0):(o.playCantClick(),!1)}},cubeTips:function(){if(!(v.balanceStatu()>0)&&!this.pause&&0!=this._preclicktm_&&(this._TM_++,!(this._preclicktm_>this._TM_)&&u.get("game_tips"))){this.setNextTipsTime();var t=this.gameLogic.cubeTips();t&&t.cmds.length&&this.addCommand(t,null,l.PERMISSION_NO,!0)}},showCubeTips:function(t,e){var i=e.datas.list;for(var n in i){var o=this.gameMap.getCubeFromUUID(i[n].gid);o&&o.cube&&o.cube.cubeTwinkle()}t.next(),t.finish(e)},checkCube:function(t){return!t||!cc.isValid(t.node)||!t.node.active},clear:function(){this.cmdPools=[],this.commandCount=0,this._balanceStatu=0,this.balanceActiveCount=0,this.gameMap.node.opacity=0,this.missileCount=0,this._downStop=0,this._downStopUUID={};var e=t("UICubeSender");this.sender=new e,l.resetUUID()},endGame:function(){},initGame:function(t){var e=d.findMapChapter(t.mid);if(e){var i=(n.H5?"main/gmap/m":"main/gmap/g")+e.chapter;g.textureFromPath(i,function(e){e&&(this.background.spriteFrame=e),this.loadMapData(t)},this)}},loadMapData:function(e){this.mapId=e.mid,this.param=e.param,this.clear();var i=""+this.mapId;this.metaMap=d.map(this.mapId),this.clickLock=t("GuideLogic").inMapHasGuide(this.mapId),this.mapId<100&&(i="0"+i),this.mapId<10&&(i="0"+i);var n="data/map/level_"+i;g.loadJson(n,function(t){this.mapdata=t,this.xcount=1*this.mapdata.width,this.ycount=1*this.mapdata.height,t.properties.mapid=this.mapId,t.properties.row=d.map(this.mapId),this.gameLogic.clearAndNew(this,t);var e=this.gameMap,i=this.gameLogic.__init(this.mapId,this.mapdata,this.param);this.preload(i,function(){e.initCube(),e.initData(this.xcount,this.ycount),this.param=null;var t=this.gameLogic.goals();e.border.show(this.gameLogic,e.cubeSize),this.bottom.initData(),this.topbar.initData(this.mapId,t.getMoveStep(),t.getGoals(),t.MAXSCORE),e.inMap(this.mapId,i)},this)},this)},addResList:function(t,e,i,n){var o=t.id||t;n[o]||(i.push(t),e&&(e.effectDestroy&&i.push(e.effectDestroy),e.effectChgTo&&i.push(e.effectChgTo)),n[o]=!0)},effectPreload:function(t){if(t&&t.data&&t.data.getComponent){var e=t.data.getComponent("effect_base");e&&e.preload&&e.preload()}},preload:function(t,e,i){if(this.hasLoadBlock)e.call(i);else{var n=this.gameLogic.getDrops().getTiles(),o=[],a={},c=d.preloadRes();for(var r in c){var l=c[r],h=l.preload?l.preload.lv:0;h>=0&&this.mapId>=h&&this.addResList(l,null,o,a)}for(var u in t){var f=t[u];f&&(f.block&&this.addResList(f.block.meta.res_id,f.block.meta,o,a),f.bub&&this.addResList(f.bub.meta.res_id,f.bub.meta,o,a),f.cage&&this.addResList(f.cage.meta.res_id,f.cage.meta,o,a))}for(var p in n){var _=n[p].meta;this.addResList(_.res_id,_,o,a)}var m=this.gameLogic.getExtraTileList();for(var v in m)this.addResList(m[v],null,o,a);var E=o.length;s.EVENT_GAME_LOADDATA(o.length,0,"UIGameV2"),g.preloadResList(o,function(t,n,o){if(!t)return s.EVENT_GAME_LOADDATA(o.count,o.finish,"UIGameV2"),void(--E<=0&&o.allFinish&&e.call(i));var a,c=[];if(t.component){var r=t.component;if(r.soundId&&c.push(r.soundId),r.soundList&&r.soundList.length)for(var l in r.soundList)r.soundList[l]&&c.push(r.soundList[l]);if(r.effectList&&r.effectList.length)for(var h in r.effectList)r.effectList[h]&&c.push(r.effectList[h])}if(t.meta){var u=d.getTileFormResId(t.meta.id);if(u)for(var f in u){var p=u[f];if(p.goalAnim){var _=p.goalAnim;_.soundId&&c.push(_.soundId),_.effectId&&c.push(_.effectId)}}}a=t.prefab||t,this.effectPreload(a),g.preloadResList(c,function(t,c,r){r.allFinish&&(t&&this.effectPreload(t.prefab||t),s.EVENT_GAME_LOADDATA(o.count,o.finish,"UIGameV2"),n.preload&&n.preload.c>0&&g.preloadPrefab(a,n.preload.c),--E<=0&&o.allFinish&&e.call(i))},this)},this)}},gameStart:function(){var e=this;s.EVENT_GAME_LOADED({mid:this.mapId,fo:function(){1==e.mapId?(e.topbar.showGoals(),s.EVENT_GAME_BATTLEGOAL_FLYED(),s.EVENT_OPEN_GAME_GUIDE(1E4)):e.dialogStart.showed(),e.gameMap.node.opacity=255,t("SdkIns").instance().gameStart(),t("GameLogic").game_inited()}}),this._TM_=0,this._preclicktm_=r.CUBE_TILE_TIME,this.schedule(this.cubeTips,1),this.isGameStart=!0},goalFlyed:function(){var t=this.gameLogic.preBattle();if(this.closeClickState=!0,this.pause=!1,t&&t.cmds.length){var e=this.addCommand(t,void 0,l.PERMISSION_START).finishCallFunc(function(t,e){return this.closeClickState=!1,!0},this);return v.delayCommand(this,e,null,.5),!0}this.closeClickState=!1,s.EVENT_GAME_STARTV2()},battleToItems:function(t){var e=this.gameLogic.battleToItems(t);this.closeClickState=!0,e&&e.cmds.length&&this.addCommand(e,void 0,l.PERMISSION_START).finishCallFunc(function(t,e){this.closeClickState=!1},this)},setBackGround:function(){var t=c.findMapBkgResId(this.mapdata.properties.background);g.loadRes(t,function(t){this.background.spriteFrame=t},this)},getGridPos:function(t,e,i){return this.gameMap.getGridPos(t,e,i)},creatTileScore:function(t,e,i,n,o){e&&!n.data.score_fly&&(s.EVENT_GAME_ADD_SCORE(e),n.data.score_fly=!0)},guideCanotClick:function(t){return null!=t&&null!=this.canGrid&&(this.canGrid.x!=t.grid.x||this.canGrid.y!=t.grid.y)},cubePackListInMap:function(t){this.canGrid=null,this.gameMap.unpackCube(t)},cubePackInNode:function(t,e,i,n){this.canGrid=i;var o=[],a=this.gameMap;for(var s in e){var c=e[s],l=a.packupCube(c.x,c.y);for(var h in l.list){var u=l.list[h];n&&(u.scale=r.gameMapScale),u.position=t.convertToNodeSpaceAR(l.pos),u.parent=t,o.push(u)}}return o},pushTileToNode:function(t,e){return this.gameMap.pushTileToNode(t,e)},test:function(t,e,i){var n=this.gameMap.getCubeLayer(t,e,1);if(n){if(i)return n.tZIndex&&(n.node.zIndex=n.tZIndex,delete n.tZIndex),n.node.stopAllActions(),n.node.scale=1,n;var o=[cc.scaleTo(.5,2,2),cc.scaleTo(.5,1,1)];return n.node.runAction(cc.repeatForever(cc.sequence(o))),n.tZIndex=n.node.zIndex,n.node.zIndex=1E4,n}return"no finid cube "+t+","+e},showCube:function(t,e,i){var n=this.gameMap.getCubeLayer(t,e,1);return n?(n.node.active=i,n):"no finid cube "+t+","+e},posCube:function(t,e,i,n){var o=this.gameMap.getCubeLayer(t,e,1);return o?(o.node.position=cc.p(i,n),o):"no finid cube "+t+","+e},gridCube:function(t,e,i,n){var o=this.gameMap.getCubeLayer(t,e,1);if(o){var a=this.gameMap.getGridPos(i,n);return o.position=a,this.gameMap.setCubeLayer(i,n,o.layer,o),o}return"no finid cube "+t+","+e}});cc._RF.pop()},{ActionCommand:"ActionCommand",ActionLock:"ActionLock",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",GameMapV2:"GameMapV2",GameTools:"GameTools",GuideLogic:"GuideLogic",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",N7MusicV2:"N7MusicV2",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIEffectLayer:"N7UIEffectLayer",SdkIns:"SdkIns",TDLog:"TDLog",UIBattleStart:"UIBattleStart",UICubeSender:"UICubeSender",UIGameBottomV2:"UIGameBottomV2",UIGameMapV2:"UIGameMapV2",UIGameTopbarV2:"UIGameTopbarV2",UserDataV2:"UserDataV2",UserLogic:"UserLogic",dialog_balance:"dialog_balance",n7:"n7"}],UIGateEntrance:[function(t,e,i){cc._RF.push(e,"988b7i90rBDcpV0KqBBnaGd","UIGateEntrance");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("ItemsLogic"),c=t("TDLog"),r=t("StringUtils"),l=t("JsonMetaCache"),h=t("N7Sound"),u=t("ShareLogic"),d=t("GameLogic"),f=cc.Class({"extends":t("UIDialog"),properties:{help:{"default":null,type:cc.Node},btn_begin:{"default":null,type:cc.Node},nodeGoals:{"default":null,type:cc.Node},item:{"default":null,type:cc.Node},levelUp:{"default":null,type:t("effect_level_up")},numAddEff:{"default":null,type:cc.Node},assaultLevel:{type:cc.SpriteFrame,"default":[]}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){this.help&&n.btn(this.help,n.makef(this.openHelpDialog,this),1),n.btn(this.btn_begin,n.makef(this.startGame,this),1),o.on(o.EVENT_PORPNUM_REFRUSH,function(t){this.refush(t.getUserData())},this)},openHelpDialog:function(){o.EVENT_OPEN_DIALOG({name:"dialog_help",owner:"dialog_gateEntrance"})},showed2:function(){n.hide(this.btn_begin,"effect_level_up");var e=this.istry?"retry":"begin";if(n.sh(this.content,"unheart",this.istry),n.sh(this.nodeGoals,null,!this.istry),n.sh(this.content,"goal_bk",!this.istry),n.textp(this.btn_begin,"label",e),n.textp(this.content,"lab_level","level",[this.mid]),!this.istry){var i=l.map(this.mid);if(i){var o=r.toJson(i.tar),a=[];for(var s in o)a.push({meta:l.tileByName(s),num:o[s]});this.nodeGoals&&n.sh_Goals(a,this.nodeGoals)}this.setAssaultIcon(t("ActivityLogic").getAssaultLevel())}},showed:function(e){null==e&&(e={lv:a.geti("lev")}),this.mid=e.lv,this.istry=e.t,n.sh(this.closeButton,void 0,!e.btnc),this.select={};var i=f._PREWAR_,o=0;for(var s in i)this.sh_item(n.chd(this.item,"item"+ ++o),s,i[s]);if(this.sh_ads(n.chd(this.item,"item4"),"PreWar_Steps",f._ADSPREWAR_.PreWar_Steps),this.istry){t("N7MusicV2").switchVol(0),h.playSound(90157);var r=t("UIGameV2").instance(),l=r&&r.gameLogic?r.gameLogic.goalToStr():"",u=r?r.addBuyed5Step():0;c.mission(22,this.mid,"3_"+u+"_"+l),c.Event("battle_fail_"+this.mid,"3_"+u)}this.showed2()},onUiFlyInEnd:function(e){o.EVENT_DIALOG_SHOWED(this),this.istry||(t("GuideLogic").checkPointGuide(11350),t("GuideLogic").checkPointGuide(11451))},sh_item:function(t,e,i){var c=a.geti("lev")<i,r=n.sh(t,"lock",c),l=n.sh(t,"unlock",!c);if(c&&n.textp(r,"label","ulev",[i]),n.btn(r,n.makef(function(){o.EVENT_MESSAGEBOX("lv_unlock",i)},this)),!c){var h=n.show(l,"item_count");n.hide(l,"tick"),n.show(t,"bk"),n.hide(t,"on_bk");var u=s.get(e);this.refush_one(h,u),t.__init_fo||(n.btn(l,n.makef(function(){t.getComponent(cc.Animation).play(),this.initSelectItem(t,e)},this)),n.icon(l,"item_icon",e),t.__init_fo=!0)}},sh_ads:function(t,e){if(t){this.item.getComponent(cc.Layout).spacingX=30,t.active=!0,n.sh(t,"lock",!1);var i=n.sh(t,"unlock",!0),o=s.get(e);if(n.sh(t,"on_bk",o>0),n.sh(i,"tick",o>0),n.sh(t,"bk",o<=0),o<=0){if(delete this.select[e],!u.showAndWatchOrShare(105,i,function(i){i&&i.dt&&0==i.dt.code&&this.sh_ads(t,e)},this))return this.item.getComponent(cc.Layout).spacingX=80,void(t.active=!1)}else this.select[e]=!0,n.unbtn(i)}},initSelectItem:function(t,e){if(s.get(e)){var i=this.select[e]=!this.select[e];n.sh(t,"bk",!i),n.sh(t,"on_bk",i),n.sh(t,"unlock/item_count",!i),n.sh(t,"unlock/tick",i)}else this.openBuyProp(e)},refush_one:function(t,e){n.sh(t,"num",e),n.sh(t,"add",!e),e&&n.text(t,"num",e)},refush:function(t){var e=t.name,i=t.num,a=0,s=void 0,c=void 0;for(var r in f._PREWAR_)if(a++,e==r){s=n.chd(this.item,"item"+a),c=n.chd(s,"unlock/item_count"),this.refush_one(c,i),this.numAddAction(c);var l="item"+a+"/unlock/item_count";o.EVENT_GAME_GUIDE_UPDATE({path:l,num:i,that:this})}},numAddAction:function(t){var e=cc.instantiate(this.numAddEff);e.position=n.nodeToNodePos(t,this.content),e.active=!0,e.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal;var i=cc.sequence(cc.scaleTo(.2,1.4,1.4),cc.scaleTo(.2,1.2,1.2));t.runAction(i),this.scheduleOnce(function(){e.destroy()},1)},openBuyHeart:function(){o.EVENT_OPEN_DIALOG({name:"dialog_buy_heart",param:this.istry,owner:"dialog_gateEntrance"})},openBuyProp:function(t){var e={name:t,why:"gate"};o.EVENT_OPEN_DIALOG({name:"dialog_buy_prop",param:e,owner:"dialog_gateEntrance"})},startGame:function(){"undefined"!=typeof gdsdk&&"undefined"!==gdsdk.showAd&&gdsdk.showAd();var e=a.heart().h<a._SUB_;if(e||(n.show(this.btn_begin,"effect_level_up"),this.levelUp.isPlay||this.levelUp.playEffect()),!this.is_touch)if(e)this.openBuyHeart();else{for(var i in this.select)if(s.get(i)<1)return void o.EVENT_MESSAGEBOX("unitem");for(var r in a.subHeart(),this.select)this.select[r]&&s.sub(r,1,"battle_"+this.mid);var l=this.select,h=this.mid,u=a._HEART_()+"a"+d.getCrossCompensation();c.mission(20,h,u),t("N7MusicV2").switchVol(0),this.scheduleOnce(function(){o.EVENT_GAME_SHOW(h,l)},.1),this.is_touch=!0}},closeDialog:function(){this._super(),this.istry&&o.EVENT_BIGMAP_SHOW({ret:3})},touchBackground:function(){this.istry||this.closeDialog()},setAssaultIcon:function(t){var e=n.chd(this.btn_begin,"assaultIcon");null!=this.assaultLevel[t]?(e.getComponent(cc.Sprite).spriteFrame=this.assaultLevel[t],e.active=!0,e.position=0==t?cc.p(-190,108):cc.p(-196,112)):e.active=!1}});f._PREWAR_={PreWar_Rotor:7,PreWar_Tnt:7,PreWar_Cube:7},f._ADSPREWAR_={PreWar_Steps:0},cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",GuideLogic:"GuideLogic",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",N7MusicV2:"N7MusicV2",N7Sound:"N7Sound",ShareLogic:"ShareLogic",StringUtils:"StringUtils",TDLog:"TDLog",UIDialog:"UIDialog",UIGameV2:"UIGameV2",UserLogic:"UserLogic",effect_level_up:"effect_level_up"}],UIGateFailedNotice:[function(t,e,i){cc._RF.push(e,"47a60a1PH5ImKJ5LpwZ2MZ5","UIGateFailedNotice");var n=t("GameEvent"),o=t("ItemsLogic"),a=t("GameTools"),s=t("UserLogic"),c=t("UIGateEntrance");cc.Class({"extends":t("UIGateEntrance"),properties:{},showed2:function(){var t=c._PREWAR_,e=0;for(var i in t)if(this.select_item(a.chd(this.item,"item"+ ++e),i,t[i]))break;a.textp(this.btn_begin,"p/label","retry")},select_item:function(t,e,i){var n=s.geti("lev")<i,c=a.sh(t,"unlock",!n);if(o.get(e)){var r=this.select[e]=!0;return a.sh(c,"item_count",!r),a.sh(c,"tick",r),a.sh(t,"bk",!r),a.sh(t,"on_bk",r),!0}return!1},onUiFlyInEnd:function(t){},openBuyHeart:function(){n.EVENT_OPEN_DIALOG({name:"dialog_buy_heart",param:this.istry,owner:"dialog_gatefailed_notice"})},openBuyProp:function(t){var e={name:t,why:"gate_failed"};n.EVENT_OPEN_DIALOG({name:"dialog_buy_prop",param:e,owner:"dialog_gatefailed_notice"})}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",UIGateEntrance:"UIGateEntrance",UserLogic:"UserLogic"}],UIGeneralAward:[function(t,e,i){cc._RF.push(e,"2d87bxVKUlOP4+atzcrxh8w","UIGeneralAward");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache");cc.Class({"extends":t("UIDialog"),properties:{itemList:{type:cc.Node,"default":[]},labelInfo:{type:cc.Node,"default":null},noticeInfo:{type:cc.Node,"default":null},labelCenter:{type:cc.Node,"default":null},itemLayout:{type:cc.Node,"default":null},btn_ads:{type:cc.Node,"default":null},btn_green:{type:cc.Node,"default":null},gift:{type:cc.Node,"default":null}},onLoad:function(){this._super(),this.initUI(),this.initEvent()},initUI:function(){},playAnimEnd:function(){},initEvent:function(){this.btn_ads.clickPath="btn",this.btn_ads.show=!0,n.btn(this.btn_green,n.makef(this.greenBtn,this),1)},showed:function(t){this.callFunc=t.callFunc,this.caller=t.caller,this.initAwards(t)},onUiFlyInEnd:function(t){o.EVENT_DIALOG_SHOWED(this)},greenBtn:function(){this.closeDialog(),o.EVENT_DIALOG_SHOWED(this),this.callFunc&&this.callFunc.call(this.caller),this.callFunc=this.caller=null},initAwards:function(e){var i={};if(e&&e[0])for(var s in e){var c=e[s];null!=c.k&&(i[c.k]=c.v)}else i=e;var r=0;for(var l in i){var h=a.itemn(l);if(h){var u=this.itemList[r++];if(u){var d=n.chd(u,"icon"),f=n.chd(u,"num");n.imgsPrefab(d,h.icon),n.text(f,void 0,i[l]+("unheart"==l?"h":"")),f.zIndex=d.zIndex+1,u.active=!0}}}var g=r>3;this.gift.active=g,g&&(r=0);for(var p=r;p<this.itemList.length;p++)this.itemList[p].active=!1;var _=280;2==r&&(_=350);var m=e&&e.itemp?e.itemp:90;this.itemLayout.y=m,this.itemLayout.scale=1==r?1.5:1,this.itemLayout.getComponent(cc.Layout).spacingX=_,e&&null!=e.txt?n.richp(this.labelInfo,void 0,e.txt,e.txtarr?[e.txtarr]:void 0):n.richp(this.labelInfo,void 0,"defaultInfo"),e&&null!=e.title?n.textp(this.noticeInfo,void 0,e.title):n.textp(this.noticeInfo,void 0,"hintt"),n.sh(this.labelCenter,void 0,e&&e.labc).active&&n.textp(this.labelCenter,void 0,e.labc),n.textp(this.btn_green,"label",e.greentxt?e.greentxt:"confirm"),this.closeButton.active=e&&e.btnc,e&&e.from?(this.btn_green.parent.active=!1,t("ShareLogic").showAndWatch(103,this.btn_ads,function(i){var n=i?i.dt:null;if(n&&0==n.code){var a=e.slice();a.title="ads_notice.ads3",t("UserLogic").award(a,"ADS"),o.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:a,owner:e.from})}},this)):(this.btn_ads.active=!1,this.btn_green.parent.active=!0);var v=n.chd(this.node,"center/chapter");v&&e.chapter?(v.getComponent(cc.Sprite).spriteFrame=e.chapter,v.active=!0):v&&(v.active=!1)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIGeneral_Rule:[function(t,e,i){cc._RF.push(e,"5deb6CalrBD7p+FyhjLFlsZ","UIGeneral_Rule");var n=t("GameTools");cc.Class({"extends":t("UIDialog"),properties:{labelText:{"default":null,type:cc.Node}},statics:{},onLoad:function(){this._super()},__initEvent:function(){},showed:function(t){if(null!=t.text){for(var e="",i=0;i<20;i++){var o=t.text+"."+i,a=n.i18ns(o);if(o==a)break;e+=a+"\n"}n.richp(this.labelText,null,e,t.arr)}}}),cc._RF.pop()},{GameTools:"GameTools",UIDialog:"UIDialog"}],UIGetItem:[function(t,e,i){cc._RF.push(e,"de83aFQGrhLu4FdrLEnwRwD","UIGetItem");var n=t("GameTools"),o=t("JsonMetaCache"),a=t("n7");cc.Class({"extends":t("UIDialog"),properties:{items:{"default":null,type:cc.Node},item:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){},showed:function(t){this.items.removeAllChildren(!0);var e=[];if(t[0])for(var i in t){var s=t[i];e[s.k]=s.v}else e=t;for(var c in e){var r=cc.instantiate(this.item);r.parent=this.items;var l=o.itemn(c);l?(n.text(r,"lab_name",l.name),n.imgs(r,l.icon,"icon"),n.text(r,"num","x"+e[c])):a.log("JsonMetaCache not find itemname:"+c)}},closeDialog:function(){this._super()}}),cc._RF.pop()},{GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",UIDialog:"UIDialog",n7:"n7"}],UIGift:[function(t,e,i){cc._RF.push(e,"9b510xC0jdAtoeOnCAWFC+8","UIGift");var n=t("GameTools");t("UserLogic"),t("WorkData"),cc.Class({"extends":t("UIDialog"),properties:{btn:{"default":null,type:cc.Node}},statics:{TIME:1},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn,n.makef(this.OpenBtn,this),1)},OpenBtn:function(){var e=t("GameCommon").WELCOME_GIFT_DATA,i=1,o=t("UIFlyGold");for(var a in e)(new o).__showed({name:e[a].k,count:e[a].v,posn:n.chd(this.content,"tar"+i)}),i++;this.closeDialog()},touchBackground:function(){this.OpenBtn()}}),cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",UIDialog:"UIDialog",UIFlyGold:"UIFlyGold",UserLogic:"UserLogic",WorkData:"WorkData"}],UIGoldShop:[function(t,e,i){cc._RF.push(e,"4c1a8Pz9iZNIpdxRyTiHlH6","UIGoldShop"),cc.Class({"extends":t("UIDialog"),properties:{},onLoad:function(){this._super();var e="tb"==t("GameConfig").get("pf");this.closeButton.x=e?-440:440},showed:function(){}}),cc._RF.pop()},{GameConfig:"GameConfig",UIDialog:"UIDialog"}],UIGuideData:[function(t,e,i){cc._RF.push(e,"9300bhMkERHubWkwnWLoMRo","UIGuideData"),cc.Class({"extends":cc.Component,properties:{finger:{type:cc.String,"default":[]},fingerNode:{type:cc.Node,"default":[]},backLight:{type:cc.SpriteFrame,"default":null},highLight:{type:cc.String,"default":[]},displayBox:{type:cc.String,"default":[]},isMain:!1},start:function(){}}),cc._RF.pop()},{}],UIGuide:[function(t,e,i){cc._RF.push(e,"a550dQgKQ9B2pQG352TgNXc","UIGuide");var n=t("n7"),o=t("GameTools"),a=t("GameCommon"),s=t("GameEvent"),c=(t("N7UIFlyLayer"),t("JsonMetaCache")),r=t("StringUtils"),l=t("N7Sound"),h=t("TDLog"),u=t("UIGameV2"),d=cc.Class({"extends":t("UIDialog"),properties:{objprt:{"default":null,type:cc.Node},msgbox:{type:cc.Node,"default":null},"continue":{type:cc.Node,"default":null},hamster:{type:cc.Node,"default":null},messagebox:{type:cc.Node,"default":null}},statics:{START_FLY1:{scale1:.6,scale2:.2,p1:{offset:110},p2:{offset:-40},time:1},START_FLY2:{scale1:.6,scale2:.2,p1:{offset:-110},p2:{offset:40},time:1}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){this.upnode=o.chd(this.content,"objprt_node"),o.chd(this.node,"background").on(a.touchstart,this.clickNext,this),o.chd(this.content,"lab_box").on(a.touchstart,this.clickNext,this),s.on(s.EVENT_GUIDE_UNLOCK,function(){this.__unlock()},this),s.on(s.EVENT_GAME_GUIDE_UPDATE,function(t){var e=t.getUserData();if(null!=e){var i=e.that,n=o.chd(this.upnode,e.path),a=e.num;null!=n&&(i.refush_one(n,a),i.numAddAction(n))}},this)},showed:function(t){if(this.upnode||(this.upnode=o.chd(this.content,"objprt_node")),this.upnode.scale=t.isMain?1/this.node.scale:1,this.upnode.removeAllChildren(),t){if(t.id){h.guide(t.id);var e=c.item(t.id),i=r.toKeyValue(e.info);o.copy_keys(t,i)}this.__p=t,o.chd(this.node,"background").opacity=t.unbk?0:125,t.delay?(o.hide(this.content,"finger"),o.hide(this.content,"arrows"),o.hide(this.content,"lab_box"),o.hide(this.content,"doudinnv"),this.scheduleOnce(this.showed2,1*t.delay)):this.showed2(t)}},showed2:function(){var t=void 0,e=this.__p;e.n&&(t=e.n);var i=c.item(e.id),r=o.sh(this.content,"lab_box",e.txt);e.txt&&(o.richp(r,"lab_introduce","guide."+e.txt),l.playSound(90149)),r.height=void 0==e.tsz?240:1==e.tsz?400:e.tsz;var h=o.sh(this.content,"girl",e.girl);r.y=2==e.girl?-370:-721,h.y=2==e.girl?-551:-907;var u=t&&(e.finger||e.fingerNode),d=o.chd(this.content,"finger"),f=o.chd(this.content,"arrows");if(null!=e.insteadArrows?(d.active=!1,f.active=!0,d=f):(d.active=u,f.active=!1),e.c&&this.scheduleOnce(this.clickNext,5),e.build&&(s.EVENT_CAMERA_TOBUILD(e.build),e.budfg&&s.EVENT_MAPEDIT_COMMAND({id:e.build,cmd:"showfg"})),e.funcIcon){for(var g=1;g<5;g++)o.sh(this.content,"funcIcon/"+g,!1);o.sh(this.content,"funcIcon",!0),this.scheduleOnce(function(){this.showIconAndFly(e,i)},0)}else o.sh(this.content,"funcIcon",!1);if(this.__initMsgBox(i),t){e.obj={parent:t.parent,pos:{x:t.x,y:t.y},n:t};var p=cc.instantiate(t);for(var _ in o.nodeAdd(this.upnode,t,p),e.hl){var m=e.hl[_],v=cc.instantiate(m);o.nodeAdd(this.upnode,m,v)}var E=void 0;if(e.btn&&(E="1"==e.btn?p:o.chd(p,e.btn)),E&&(E.on(a.touchstart,function(t){this.clickStart(t)},this),E.on(a.touchend,function(t){this.click(t)},this)),e.finger||e.fingerNode){var y=o.nodeToNodePos(t,this.content);e.px&&(y.x+=e.px),e.py&&(y.y+=e.py);var b=0;e.insteadArrows&&(y.x+=0|e.insteadArrows[0],y.y+=0|e.insteadArrows[1],b=0|e.insteadArrows[2]),d.rotation=90*b,d.position=y,o.sh(d,"Hint_effects/finger_ani",!e.unfinger)}}else n.log("UIGuide can not node")},showIconAndFly:function(e,i){var n=o.chd(this.content,"funcIcon/"+e.funcIcon),a=e.toNode,s=t("UIMainV2").instance()[a];if(s){var c=cc.instantiate(n);c.parent=n.parent,c.active=!0;var r=o.nodeToNodePos(s,c.parent),l=r.x>c.position.x?d.START_FLY2:d.START_FLY1,h=[o.createBrizer(c.position,r,l).easing(cc.easeIn(4)),cc.callFunc(function(e){c.destroy(),this.scheduleOnce(function(){t("GuideLogic").triggerGuide(i.next,this.node)},.3)},this)];this.scheduleOnce(function(){c.runAction(cc.sequence(h))},.5)}},showArrows:function(t,e){var i=this.__p.arrows,n=o.nodeToNodePos(t,this.content);n.x+=i[0],n.y+=i[1],e.position=n;var a=i[2];void 0==a&&(a=0),a>=0&&a<4&&(a*=90),e.rotation=a,e.active=!0},__unlock:function(){this.__p&&this.__p.lock&&this.close()},clickNext:function(){this.__p.lock||(n.log("UIGuide:clickNext:"+this.__p.id),this.__p.force||this.close())},clickStart:function(t){if(this.node.active&&this.__p.obj){var e=this.__p.btn;("1"==e?this.__p.n:o.chd(this.__p.n,e)).dispatchEvent(t)}},click:function(t){if(this.node.active){if(this.__p.obj){var e=this.__p.btn;("1"==e?this.__p.n:o.chd(this.__p.n,e)).dispatchEvent(t)}this.close()}},close:function(){var t=this.__p;n.log("UIGuide:close:"+this.__p.id),t.c&&this.unschedule(this.clickNext),t.arrows_delay_fo&&this.unschedule(this.arrows_delay_fo),this.upnode.removeAllChildren(),this.node.active=!1,t.build&&t.budfg&&s.EVENT_MAPEDIT_COMMAND({id:t.build,cmd:"hidefg"});var e=this.__p;return this.__p=null,e.fo&&e.fo(e.id),s.EVENT_MAINUI_NEXT_GUIDE(e.id),e},__initMsgBox:function(e){var i=this.msgdt=r.toKeyValue(e.exdt);if(this.msgbox.parent.active=i,i){this["continue"].active=i.c,n.log("UIGuide.__initMsgBox:txt:"+i.txt);var o=this._setText("richtext_top",i.txt),a=i.h?i.h:250;if(o.y=a/2,this.msgbox.height=a,this.msgbox.active=!0,void 0!=i.pos){var s={x:i.pos[0],y:i.pos[1]};this.messagebox.setPosition(s.x,s.y)}i.p2&&(this.msgbox.setPosition(i.p2[0],i.p2[1]),this.hamster.position=this.msgbox.position,this["continue"].active&&this["continue"].setPosition(i.p2[0]+350,i.p2[1]+10)),i.e&&t("GuideLogic").triggerGuide(e.next,this.node),this.msgbox.active=!0}},_setText:function(t,e){var i=o.show(this.msgbox,t),n=o.i18ns("guide."+e);if(n)return i.getComponent(cc.RichText).string=n,i;console.error("UIGuide guide set text not find guide."+t)},_transfor:function(t,e,i){var n=u.instance().getGridPos(parseInt(t),e,!0);return i.convertToNodeSpaceAR(n)}});cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuideLogic:"GuideLogic",JsonMetaCache:"JsonMetaCache",N7Sound:"N7Sound",N7UIFlyLayer:"N7UIFlyLayer",StringUtils:"StringUtils",TDLog:"TDLog",UIDialog:"UIDialog",UIGameV2:"UIGameV2",UIMainV2:"UIMainV2",n7:"n7"}],UIHUProgress:[function(t,e,i){cc._RF.push(e,"66ea8o/h1NHRI+Jfj5kbdqO","UIHUProgress");var n=t("GameEvent"),o=t("GameTools");cc.Class({"extends":cc.Component,properties:{progressBar:{type:t("JProgressBar"),"default":null},labBytes:{type:cc.Label,"default":null},labFiles:{type:cc.Label,"default":null},labInfo:{type:cc.Label,"default":null}},initAll:function(){this.initUI(),this.initEvent()},onDestroy:function(){n.off(this)},start:function(){},initUI:function(){},initEvent:function(){n.on(n.EVENT_ASSETSUPDATE_STATE,this.stateAndMsg,this),n.on(n.EVENT_ASSETSUPDATE_P,this.progressUpdate,this)},stateAndMsg:function(t){var e=t.getUserData();this.labInfo.string=e.msg},progressUpdate:function(t){var e=t.getUserData();e.getTotalFiles()&&this.progressBar.progress(.25,e.getDownloadedFiles(),e.getTotalFiles()),this.labFiles.string=e.getTotalFiles()-e.getDownloadedFiles(),this.labBytes.string=o.byteToString(e.getTotalBytes()-e.getDownloadedBytes())}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JProgressBar:"JProgressBar"}],UIHUVerInfo:[function(t,e,i){cc._RF.push(e,"e4f8f+gDwNDnZ2OdhW6pizX","UIHUVerInfo");var n=t("GameEvent"),o=t("N7HotUpdate"),a=t("GameTools");cc.Class({"extends":cc.Component,properties:{labCurVer:{type:cc.Label,"default":null},labRemoteVer:{type:cc.Label,"default":null},labVerOkay:{type:cc.Label,"default":null}},initAll:function(){this.initUI(),this.initEvent()},onDestroy:function(){n.off(this)},start:function(){},initUI:function(){this.labVerOkay.string=a.i18ns("hot_update.query_ver")},initEvent:function(){n.on(n.EVENT_ASSETSUPDATE_STATE,this.stateAndMsg,this)},startCheck:function(){o.instance().checkUpdate()},stateAndMsg:function(t){var e=t.getUserData();switch(this.labVerOkay.string=e.msg,e.state){case o.STATE_ROOTGAME:this.labCurVer.string=e.verCur,this.labRemoteVer.string=e.verCur;break;case o.STATE_NEEDUPDATE:this.labCurVer.string=e.verCur,this.labRemoteVer.string=e.verNew}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7HotUpdate:"N7HotUpdate"}],UIHelpIcon:[function(t,e,i){cc._RF.push(e,"3dd13iR4gRMFZn9lrYyRkFo","UIHelpIcon");var n=t("GameTools"),o=(t("GameCommon"),t("GameEvent"),t("N7Resource"));cc.Class({"extends":t("UIBlock"),properties:{iconList:{"default":[],type:cc.Node}},onLoad:function(){},initIcon:function(t,e,i,a,s,c){var r=this.iconList[t];o.loadRes(e,function(e){var o=void 0;e instanceof cc.SpriteFrame?(r.active=!0,n.cmpt(r,"",cc.Sprite).spriteFrame=e,o=r):(e.node.position=r.position,e.node.parent=r.parent,r.removeFromParent(),o=e.node),null!=i&&""!=i&&(o.scale=i[t]/100),null!=a&&""!=a&&(o.rotation=a[t]),null!=s&&""!=s&&(o.x+=parseInt(s[t])),null!=c&&""!=c&&(o.y+=parseInt(c[t]))},this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",N7Resource:"N7Resource",UIBlock:"UIBlock"}],UIHelp_base_content:[function(t,e,i){cc._RF.push(e,"18c73VYTPVG9IlTJlttaA7v","UIHelp_base_content");var n=t("GameTools"),o=t("N7Resource");cc.Class({"extends":cc.Component,properties:{obj:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},help_def_key:1},start:function(){o.loadJson("data/help_def",function(t){this.help_def=t.tableList,this.__initEvent(),this.__showed()},this)},__initEvent:function(){this.indexK=1},__showed:function(){var t=this.help_def[this.help_def_key];this.listData=t["table"+this.help_def_key]},update:function(){if(!this.istcend){var t=this.listData[this.indexK];t?(this.indexK++,this.initMsg(t)):this.istcend=!0}},initMsg:function(t){var e=cc.instantiate(this.obj),i=n.chd(e,"icon");i.active=!1,e.parent=this.content,e.active=!0;var a=t.icon.split(","),s=a[0],c=a[1],r=a[2];return o.loadRes(s,function(o){var a=void 0;if(o instanceof cc.SpriteFrame?(i.active=!0,n.cmpt(e,"icon",cc.Sprite).spriteFrame=o,a=i):(o.node.position=i.position,o.node.parent=i.parent,i.removeFromParent(),a=o.node),c&&r){var s=null!=t.scale&&""!=t.scale?t.scale.split(","):null,l=null!=t.rotation&&""!=t.rotation?t.rotation.split(","):null,h=null!=t.offx&&""!=t.offx?t.offx.split(","):null,u=null!=t.offy&&""!=t.offy?t.offy.split(","):null,d=a.getComponent("UIHelpIcon");d.initIcon(0,c,s,l,h,u),d.initIcon(1,r,s,l,h,u)}else null!=t.scale&&""!=t.scale&&(a.scale=t.scale/100),null!=t.rotation&&""!=t.rotation&&(a.rotation=t.rotation),null!=t.offx&&""!=t.offx&&(a.x+=parseInt(t.offx)),null!=t.offy&&""!=t.offy&&(a.y+=parseInt(t.offy))},this),e},refresh:function(){for(var t=0;t<this.content.children.length;t++)n.chd(this.content.children[t],"poit").active}}),cc._RF.pop()},{GameTools:"GameTools",N7Resource:"N7Resource"}],UIHelp_content1:[function(t,e,i){cc._RF.push(e,"fbfe9IWdZ5Fco2WVb26C5XI","UIHelp_content1");var n=t("GameTools");t("N7Resource"),cc.Class({"extends":t("UIHelp_base_content"),properties:{},initMsg:function(t){var e=this._super(t);n.textp(e,"effectName","help_list1."+t.id),n.textp(e,"describe","help_list1.info"+t.id)}}),cc._RF.pop()},{GameTools:"GameTools",N7Resource:"N7Resource",UIHelp_base_content:"UIHelp_base_content"}],UIHelp_content2:[function(t,e,i){cc._RF.push(e,"1d57d2neHlOmZws7fCj/o9T","UIHelp_content2");var n=t("GameTools");cc.Class({"extends":t("UIHelp_base_content"),properties:{},initMsg:function(t){var e=this._super(t),i=n.cmpt(e,"itemName",cc.Label),o="en"==n.getLanguage();i.node.width=o?124:60,i.fontSize=o?28:35,n.textp(e,"itemName","help_list2."+t.id),n.textp(e,"describe","help_list2.info"+t.id)}}),cc._RF.pop()},{GameTools:"GameTools",UIHelp_base_content:"UIHelp_base_content"}],UIHelp_content3:[function(t,e,i){cc._RF.push(e,"bf4c4JwZOVI5o+J1JFi21bb","UIHelp_content3");var n=t("GameTools");t("N7Resource"),cc.Class({"extends":t("UIHelp_base_content"),properties:{},initMsg:function(t){var e=this._super(t),i=n.cmpt(e,"itemName",cc.Label),o="en"==n.getLanguage();i.node.width=o?120:60,i.fontSize=o?30:35,n.textp(e,"itemName","help_list3."+t.id),n.textp(e,"describe","help_list3.info"+t.id)}}),cc._RF.pop()},{GameTools:"GameTools",N7Resource:"N7Resource",UIHelp_base_content:"UIHelp_base_content"}],UIHelp_page:[function(t,e,i){cc._RF.push(e,"b57a04+aCdB8Icc8AQ3dtVd","UIHelp_page");var n=t("GameTools"),o=t("GameCommon"),a=t("GameEvent"),s=t("N7Resource");cc.Class({"extends":t("UIDialog"),properties:{OFF:{"default":null,type:cc.Node},ON:{"default":null,type:cc.Node},contents:{"default":null,type:cc.Node},fun:{"default":null,type:cc.Component.EventHandler},index:1},onLoad:function(){this._super(),s.loadJson("data/help_def",function(t){this.help_def=t.tableList,this.__init()},this)},__init:function(){var t,e,i;for(this.pageobjs=[],this.contobjs=[],e=1;e<10&&null!=(t=n.chd(this.OFF,"off"+e));e++)i=n.chd(this.ON,"on"+e),this.pageobjs[e-1]={node:t,off:t,on:i},this.__on(t,e);for(e=1;e<10&&null!=(t=n.chd(this.contents,"content"+e));e++)this.contobjs[e-1]=t;e=this.index,this.index=0,this.select(e)},__on:function(t,e){t.on(o.touchend,function(t){this.select(e)},this)},select:function(e){if(e!=this.index){t("N7Sound").playSound(90122),this.fun&&this.fun.emit([e]);var i=this.index-1;this.btnStatu(i,!1),this.btnStatu(e-1,!0),this.index=e}},left:function(){this.index>1&&this.select(this.index-1)},right:function(){this.index<this.pageobjs.length&&this.select(this.index+1)},btnStatu:function(t,e){if(!(t<0)){var i;t<this.pageobjs.length&&((i=this.pageobjs[t]).off.active=!e,i.on.active=e,i.on.getComponent(cc.Animation).play()),t<this.contobjs.length&&((i=this.contobjs[t]).active=e)}},onDestroy:function(){a.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",N7Resource:"N7Resource",N7Sound:"N7Sound",UIDialog:"UIDialog"}],UIHorse:[function(t,e,i){cc._RF.push(e,"8219c3MhLxO947kmstJbjtD","UIHorse");var n=cc.Class({"extends":t("UIDogBase"),statics:{fms_pool:{hit0:{name:"hit0",next:"idle1",anim:{list:["03_down","03_UP"],loop:!1,rand:!0}},idle1:{name:"idle1",loop:!0,anim:{name:"03_idle",loop:!1}},hitup1:{name:"hitup1",next:"idle1",anim:{name:"03_UP",loop:!1}},hitdown1:{name:"hitdown1",next:"idle1",anim:{name:"03_down",loop:!1}},hit1:{name:"hit1",next:"idle1",anim:{list:["03_down","03_UP"],loop:!1,rand:!0}},idle2:{name:"idle2",loop:!0,anim:{name:"02_idle",loop:!1}},hitup2:{name:"hitup2",next:"idle2",anim:{name:"02_UP",loop:!1}},hitdown2:{name:"hitdown2",next:"idle2",anim:{name:"02_down",loop:!1}},hit2:{name:"hit2",next:"idle2",anim:{list:["02_down","02_UP"],loop:!1,rand:!0}},idle3:{name:"idle3",loop:!0,anim:{name:"01_idle",loop:!1}},hitup3:{name:"hitup3",next:"idle3",anim:{name:"01_UP",loop:!1}},hitdown3:{name:"hitdown3",next:"idle3",anim:{name:"01_down",loop:!1}},hit3:{name:"hit3",next:"idle3",anim:{list:["01_down","01_UP"],loop:!1,rand:!0}}}},onLoad:function(){this._super(),this.setFmsPool(n.fms_pool)},start:function(){this.isStart=!0,this._super(),this.fms=this.waitFms,this.waitFms=null},idle:function(t){var e="idle"+t;this.isStart?this.fms=e:this.waitFms=e},hit:function(t,e){var i="hit"+t;this.isStart?this.fms=i:this.waitFms=i}});cc._RF.pop()},{UIDogBase:"UIDogBase"}],UIHotUpdate:[function(t,e,i){cc._RF.push(e,"79c92MBBlJCUZSTttHsUuhv","UIHotUpdate");var n=t("GameEvent"),o=t("GameTools"),a=t("N7HotUpdate"),s=t("n7");cc.Class({"extends":cc.Component,properties:{bk:{type:cc.Node,"default":null},verInfo:{type:t("UIHUVerInfo"),"default":null},progress:{type:t("UIHUProgress"),"default":null},btn:{type:cc.Node,"default":null},btnBk:{type:cc.Node,"default":null},labBtn:{type:cc.Label,"default":null}},onLoad:function(){},onDestroy:function(){n.off(this)},initUI:function(){this.state=-1,this.node.active=!1,this.verInfo.node.active=!0,this.progress.node.active=!1},initEvent:function(){o.btn(this.btn,o.makef(this.clickBtn,this),1),n.on(n.EVENT_ASSETSUPDATE_STATE,this.stateAndMsg,this)},start:function(){},checkUpdate:function(){this.showBtn(!1,0),this.verInfo.initAll(),this.progress.initAll(),this.initUI(),this.initEvent(),this.verInfo.startCheck()},isShow:function(){return this.node.active},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},showBtn:function(t,e){if(this._showBtn!=t){this._showBtn=t;var i=t?770:600;if(0==e)return this.bk.height=i,void this.btnBk.runAction(t?cc.fadeIn(0):cc.fadeOut(0));e=.25,this.bkToHeight=i,this.step=(i-(t?600:770))/(1E3*e);var n=null;n=t?cc.sequence(cc.delayTime(e),cc.fadeIn(0)):cc.fadeOut(0),this.btnBk.runAction(n)}},update:function(t){if(this.step){this.bk.height+=this.step*(1E3*t);var e=this.bkToHeight-this.bk.height;(e>=0&&this.step<0||e<=0&&this.step>0)&&(this.step=0,this.bk.height=this.bkToHeight)}},stateAndMsg:function(t){var e=t.getUserData();this.state=e.state;var i=!1;switch(!this.isShow()&&e.state>=0&&(i=!0),e.state){case a.STATE_ROOTGAME:s.gameVer=e.verCur,n.EVENT_ROOTGAME(),i=!1;break;case a.STATE_NEEDUPDATE:this.startHotupdate();break;case a.STATE_SUCCESS:case a.STATE_RESTART:this.labBtn.string=o.i18ns("into_game"),this.scheduleOnce(this.startRestart,1),this.showBtn(!0);break;case a.STATE_FAILED:this.labBtn.string=o.i18ns("restart_game"),this.showBtn(!0);break;case a.STATE_RETRY:this.labBtn.string=o.i18ns("retry"),this.showBtn(!0)}!this.isShow()&&i&&this.show()},startHotupdate:function(){this.verInfo.node.active=!1,this.progress.node.active=!0,a.instance().hotUpdate()},clickBtn:function(){if(this.state>=0){switch(this.state){case a.STATE_RETRY:this.verInfo.node.active=!1,this.progress.node.active=!0,a.instance().retry(),this.startRestart();break;case a.STATE_FAILED:case a.STATE_NEEDUPDATE:this.verInfo.node.active=!1,this.progress.node.active=!0,this.startRestart();break;case a.STATE_SUCCESS:case a.STATE_RESTART:this.startRestart()}this.state=-1,this.showBtn(!1)}},startRestart:function(){this.unschedule(this.startRestart),n.EVENT_RESTARTGAME()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7HotUpdate:"N7HotUpdate",UIHUProgress:"UIHUProgress",UIHUVerInfo:"UIHUVerInfo",n7:"n7"}],UIInstantBot:[function(t,e,i){cc._RF.push(e,"e57abbweslOqYn+B2DqWHYr","UIInstantBot");var n=t("GameTools"),o=t("GameEvent");cc.Class({"extends":t("UIDialog"),properties:{btn_sub:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btnc(this.btn_sub,"icon",n.makef(this._subscribe,this),1)},_subscribe:function(){var e=t("SdkIns").instance();if(e.hasf("subscribe")){var i=this;e.runf("subscribe",function(e){if(0!=e.code)return o.EVENT_MESSAGEBOX("Subscribe Fail"),void i.closeDialog();var a=t("UserLogic"),s=t("WorkData");if(s.geti(s.WKD_SUBSCRIBE)<1){var c=[{k:"PreWar_Rotor",v:1},{k:"PreWar_Cube",v:1},{k:"PreWar_Tnt",v:1}];a.award(c,"AWD_SUBSCRIBE"),s.set(s.WKD_SUBSCRIBE,n.today());for(var r=t("UIFlyGold"),l=0;l<3;l++)(new r).__showed({name:c[l].k,count:c[l].v,posn:n.chd(i.content,"prop"+(l+1))})}o.EVENT_MESSAGEBOX("subscribe_success"),i.closeDialog()})}else this.closeDialog()}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",SdkIns:"SdkIns",UIDialog:"UIDialog",UIFlyGold:"UIFlyGold",UserLogic:"UserLogic",WorkData:"WorkData"}],UIInviteGift:[function(t,e,i){cc._RF.push(e,"862452WJb9OnIlPRBqxaXx2","UIInviteGift");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("ShareLogic"),c=t("N7Resource"),r=t("GameLogic"),l=cc.Class({"extends":t("UIDialog"),properties:{btn_invite:{type:cc.Node,"default":null},progress:{type:cc.Node,"default":null},pages:{"default":null,type:cc.Node},itemn:{"default":null,type:cc.Node},sign_flyn:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.initEvent()},initEvent:function(){n.btn(this.btn_invite,n.makef(this.inviteSome,this),1),n.btnc(this.pages,"btn_left",n.makef(this.initPages,this,-1),1),n.btnc(this.pages,"btn_right",n.makef(this.initPages,this,1),1),this.prow=n.chd(this.progress,"mask").width},showed:function(){this.init()},init:function(){var t=s.getInviteData();this.data=t;var e=t.awd;for(var i in this.list=[],e)this.list.push(e[i][0][0]);this.page_index=Math.ceil((t.hasGetInvAwdNum+1)/l.PAGE_NUM),this.max_pages=Math.ceil(t.maxInvNum/l.PAGE_NUM),n.text(this.pages,"num",this.page_index+"/"+this.max_pages),n.chd(this.progress,"mask").width=this.prow*(t.hasInvNum/t.maxInvNum),n.text(this.progress,"label",t.hasInvNum+"/"+t.maxInvNum),this.initData()},initData:function(){for(var t=this.list,e=this.data.hasGetInvAwdNum,i=0;i<l.PAGE_NUM;i++){var o=n.chd(this.itemn,"item"+(i+1)),s=l.PAGE_NUM*(this.page_index-1)+i;n.sh(o,"sign",s<e);var c=t[s];!c&&s<this.data.maxInvNum&&(c=t[t.length-1]);var r=n.sh(o,"content",c);if(c){var h=s==e&&e<this.data.hasInvNum;n.sh(r,"light",h),h&&(this.indexn=o,n.btn(o,n.makef(this.getAward,this,o)));var u=h?n.i18ns("click_rcv"):n.i18ns("invite_gift.friend",[s+1]);n.text(r,"title",u);var d=a.itemn(c.k);n.imgs(r,d.icon,"icon"),n.text(r,"num",c.v)}}},initPages:function(t){this.page_index+t<=this.max_pages&&this.page_index+t>0&&(this.page_index+=t,n.text(this.pages,"num",this.page_index+"/"+this.max_pages),this.initData())},dialogResume:function(){var t=this,e=this.sign_flyn.getComponent(cc.Animation),i=null;e.onFlyMove=function(){var e=n.chd(t.indexn,"sign"),i=n.nodeToNodePos(e,t.content);t.sign_flyn.runAction(cc.moveTo(.4,i.x,i.y))},e.once("finished",function(){this.sign_flyn.active=!1;var t=i.node;t.scale=1.4,t.parent=this.sign_flyn.parent,t.position=this.sign_flyn.position,i.playEffect(),this.init()},this),c.loadRes(5600,function(t){i=t,e.node.active=!0,e.play()},this)},getAward:function(t){var e=s.getInviteAward();if(!e)return n.unbtn(t),void r.refreshInviteGiftTips();o.EVENT_MESSAGEBOX("invite_gift.err"+e)},inviteSome:function(){s.checkShare(11)}});l.PAGE_NUM=9,cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",ShareLogic:"ShareLogic",UIDialog:"UIDialog"}],UIInvite:[function(t,e,i){cc._RF.push(e,"f3933Wd9YJBurGtkH6I+VcR","UIInvite");var n=t("GameTools"),o=t("GameEvent"),a=t("ShareLogic"),s=t("JsonMetaCache");cc.Class({"extends":t("UIDialog"),properties:{itemList:{type:cc.Node,"default":[]},btn_invite:{type:cc.Node,"default":null},label_get:{type:cc.Node,"default":null},label_end:{type:cc.Node,"default":null},view_box:{type:cc.Node,"default":null}},onLoad:function(){this._super(),this.initUI(),this.initEvent()},initUI:function(){},initEvent:function(){n.btn(this.btn_invite,n.makef(this.inviteSome,this),1)},inviteSome:function(){var e=a.getShareState(8);if(e.cd>0)o.EVENT_MESSAGEBOX("invite6");else{var i=!(e.condition&&!e.hasShare);a.checkShare(8,null,function(e){e&&e.dt&&0==e.dt.code&&(this.showed(i),t("GameLogic").refreshInviteTips())},this)}},showed:function(t){var e=a.getShareState(8);e.condition&&!e.hasShare?(this.initAwards(e.award[0]),this.label_get.active=!0,this.label_end.active=!1):(this.initAwards(null),this.label_get.active=!1,this.label_end.active=!1,this.view_box.active=!1,t&&o.EVENT_MESSAGEBOX("invite5")),this.showCd(e.cd)},showCd:function(t){var e=n.chd(this.btn_invite,"label");t>0?n.cd2(e,null,t,n.makef(function(){this.showed()},this),1):(n.uncd2(e,null),n.textp(this.btn_invite,"label","invite3"))},initAwards:function(t){var e={};if(t&&t[0])for(var i in t){var o=t[i];null!=o.k&&(e[o.k]=o.v)}else e=t;var a=0;for(var c in e){var r=this.itemList[a++],l=s.itemn(c);if(l){var h=n.chd(r,"icon"),u=n.chd(r,"num");n.imgs(h,l.icon),n.text(u,void 0,e[c]),r.active=!0}}for(var d=a;d<this.itemList.length;d++)this.itemList[d].active=!1}}),cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog"}],UIItemHint:[function(t,e,i){cc._RF.push(e,"2bbecrEzytIkLUhGrejIO9C","UIItemHint");var n=t("GameTools"),o=(t("GameEvent"),t("JsonMetaCache")),a=cc.Class({"extends":t("UIDialog"),properties:{bk:{type:cc.Node,"default":null}},statics:{instance:function(){return a.s_instance}},onLoad:function(){this._super(),a.s_instance=this},showed:function(t){var e=o.itemn(t);n.imgs(this.bk,e.icon,"item_icon"),n.textp(this.bk,"lab_name","item_list."+e.id),n.textp(this.bk,"lab_info","item_list.info"+e.id)}});cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",UIDialog:"UIDialog"}],UIJelly:[function(t,e,i){cc._RF.push(e,"3ab26HHYMpMVYAaP5e68rCO","UIJelly");var n=t("N7UIEffectLayer"),o=t("GameCommon"),a=cc.Class({"extends":t("UIBlock"),properties:{before:{type:cc.Sprite,"default":null},current:{type:cc.Sprite,"default":null},atlas:{type:cc.SpriteAtlas,"default":null}},statics:{destroy_effects:[5001,5002,5003,5004,5005,5021]},onLoad:function(){},init:function(t){this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.callPlayEnd,this)),this.play(1*t)},setData:function(t,e,i,n){e?(this.before.spriteFrame=this.current.spriteFrame,this.setCallPlayEnd(function(t){i&&i.call(n,o.CUBE_SETPARAM_END)},this),this.anim.play("jelly_chg"),this.sound(0)):this.before.node.active=!1,this.play(1*t.chgc),i&&i.call(n,e?o.CUBE_SETPARAM_STARTNEXT:o.CUBE_SETPARAM_ALL)},play:function(t){this.color=t;var e=this.atlas.getSpriteFrame("color_change_cube_"+o.colors_def[t]);e&&(this.current.spriteFrame=e)},destroyMe:function(t,e,i){var o=a.destroy_effects[this.color],s=this.tile;n.addInCube(s,o,void 0,function(e){e.play(t,s.grid,null,function(){},this)},this),e&&e.call(i)}});cc._RF.pop()},{GameCommon:"GameCommon",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock"}],UILayer:[function(t,e,i){cc._RF.push(e,"ce37dWJBABIR61MrCiiFJR4","UILayer");var n=t("GameConfig"),o=t("GameEvent");cc.Class({"extends":cc.Component,properties:{fullscreen:{"default":!0,notify:function(){this.resetSize()}},preserveRatio:!1,targetScreen:{"default":null,type:cc.Node}},onLoad:function(){this.smallWidth=n.get("canvas_small_width",1080),this.smallHeight=n.get("canvas_small_height",1680),o.on(o.EVENT_CANVAS_RESIZE,this.resetSize,this),this.resetSize()},onDestroy:function(){o.off(this)},resetSize:function(){if(this.fullscreen){this.node.setPosition(0,0);var t=this.targetScreen||cc.Canvas.instance.node;if(this.node.setContentSize(t.getContentSize()),this.preserveRatio){var e=t.getContentSize(),i=(e.width,e.height,this.smallHeight/this.smallWidth),n=e.width*i;n>e.height?(this.node.scale=e.height/n,this.node.height=n):this.node.scale=1}}}}),cc._RF.pop()},{GameConfig:"GameConfig",GameEvent:"GameEvent"}],UILego:[function(t,e,i){cc._RF.push(e,"f93fbBPjc5Mrbns2AWSEekU","UILego");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{horse:{type:t("UIHorse"),"default":null}},onLoad:function(){},start:function(){},init:function(t){this.index=t,this.horse.idle(this.index)},setData:function(t,e,i,o,a){this.index=t.count,e?(i.call(o,n.CUBE_SETPARAM_ALL),this.horse.hit(this.index),this.createEffect(this.index)):(i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.count&&(this.index=t.count,this.horse.idle(this.index)))}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock",UIHorse:"UIHorse"}],UILight:[function(t,e,i){cc._RF.push(e,"2a906BGS+9IGK3fVZaR4Zta","UILight");var n=t("GameCommon"),o=t("GameTools"),a=t("UIGameV2"),s=t("GameEvent"),c=cc.Class({"extends":t("UIBlock"),properties:{directList:{type:cc.Node,"default":[]},altas:{type:cc.SpriteAtlas,"default":null}},statics:{baseName:"base",lightName:"light",edgeName:["left","right","up","down"],fillValue:{0:[.3,.7],1:[0,.7],"01":[.3,.3],2:[0,.7],3:[.3,.7],23:[.3,.3]}},onLoad:function(){},start:function(){},onDestroy:function(){s.off(this)},isLight:function(t){return t&&t.cube&&t.cube instanceof c},showEdge:function(t,e){for(var i=0;i<t.length;i++){var n=o.chd(this.curNode,c.edgeName[t[i]]);n&&(n.active=e)}},fillBase:function(t){var e=c.fillValue[t];e||(e=[0,1]);var i=o.chd(this.curNode,c.baseName),n=i&&i.getComponent(cc.Sprite);n&&(n.fillStart=e[0],n.fillRange=e[1])},initEdge:function(){var t=a.instance().gameMap;if(this.fillBase(-1),4==this.direct||6==this.direct){var e="",i=this.tile.grid.x,o=this.tile.grid.y,s=t.getCubeLayer(i-1,o,n.TILE_LAYER_NORMAL),c=t.getCubeLayer(i+1,o,n.TILE_LAYER_NORMAL);s&&this.isLight(s)||(e+="0"),c&&this.isLight(c)||(e+="1"),""!=e&&(this.showEdge(e,!0),this.fillBase(e))}else if(5==this.direct||7==this.direct){var r="",l=this.tile.grid.x,h=this.tile.grid.y,u=t.getCubeLayer(l,h+1,n.TILE_LAYER_NORMAL),d=t.getCubeLayer(l,h-1,n.TILE_LAYER_NORMAL);u&&this.isLight(u)||(r+="2"),d&&this.isLight(d)||(r+="3"),""!=r&&(this.showEdge(r,!0),this.fillBase(r))}},init:function(t,e,i){for(var n=0;n<this.directList.length;n++){var o=this.directList[n];o.active=t==n,o.active&&(o.x=o.y=0,this.direct=t,this.curNode=o,this.baseColor=e,this.lightColor=i)}this.showEdge("0123",!1)},initCube:function(){s.once(s.EVENT_GAME_TILE_EDGE,function(){this.initEdge()},this)},clear:function(){s.off(this)},setData:function(t,e,i,a,s){if(e?i.call(a,n.CUBE_SETPARAM_ALL):i&&i.call(a,n.CUBE_SETPARAM_ALL),null!=t.light){var r=t.light?c.lightName+this.lightColor:c.lightName;o.chd(this.curNode,"light").getComponent(cc.Sprite).spriteFrame=this.altas.getSpriteFrame(r),e&&0==t.light&&this.createEffect(0)}}});cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",UIBlock:"UIBlock",UIGameV2:"UIGameV2"}],UILoadProgress:[function(t,e,i){cc._RF.push(e,"a99b1xoH65IgrB64ZGGgOfb","UILoadProgress"),cc.Class({"extends":cc.Component,properties:{bg:{"default":null,type:cc.Node},per_centum:{"default":null,type:cc.Node}},onLoad:function(){this._width_=this.node.width,this.progressTo(0)},progressTo:function(t){this.bg.width=parseInt(this._width_*t),this.per_centum&&(this.per_centum.getComponent(cc.Label).string=parseInt(100*t)+"%")}}),cc._RF.pop()},{}],UILoadingTips:[function(t,e,i){cc._RF.push(e,"4f4a4wPtHBGc7kGJxVgxyIl","UILoadingTips");var n=t("GameTools"),o=t("MathUtils"),a=cc.Class({"extends":cc.Component,__init:function(t){var e=t.t;n.imgs(this.node,t.icon1,"icon");var i=n.sh(this.node,"item1",e),o=n.sh(this.node,"item2",!e);n.sh(this.node,"1",1==t.m),n.sh(this.node,"2",2==t.m),n.sh(this.node,"label",e),e?(n.sh(i,"icon1",1==t.icon2),n.sh(i,"icon2",2==t.icon2),n.sh(i,"icon3",3==t.icon2),n.text(i,"num",t.cnt),n.textp(this.node,"label",t.label)):(n.imgs(o,t.icon2,"icon1"),n.imgs(o,t.icon3,"icon2"))},tips:function(){this.__init(o.randArray(a.TIPS)),this.node.active=!0}});a.TIPS=[{t:1,icon1:20020,icon2:1,cnt:"5~6",label:"item_list.9"},{t:1,icon1:20022,icon2:2,cnt:"7~8",label:"item_list.11"},{t:1,icon1:20021,icon2:3,cnt:"9",label:"item_list.10"},{icon1:20020,icon2:20020,icon3:20020,m:1,r:1},{icon1:20020,icon2:20020,icon3:20022,m:2},{icon1:20022,icon2:20022,icon3:20022,m:3}],cc._RF.pop()},{GameTools:"GameTools",MathUtils:"MathUtils"}],UILogin:[function(t,e,i){cc._RF.push(e,"edff4TV9+tDbqSZb0HVPzLb","UILogin");var n=t("GameTools"),o=t("GameEvent"),a=t("JMD5");cc.Class({"extends":t("UIDialog"),properties:{btn_login:{"default":null,type:cc.Node},btn_sign_up:{"default":null,type:cc.Node},mail:{"default":null,type:cc.Node},password:{"default":null,type:cc.Node},errLab:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_login,n.makef(function(){this.login()||this.LoginErr()},this),1),n.btn(this.btn_sign_up,n.makef(this.gotoSignup,this),1),this.mail_lab=n.cmpt(this.mail,"edit_box",cc.EditBox),this.password_lab=n.cmpt(this.password,"edit_box",cc.EditBox),o.on(o.EVENT_LOGIN_ERROR,function(t){this.LoginErr()},this)},LoginErr:function(){this.errLab.active=!0},showed:function(t){t&&t.fo&&(this.fo=t.fo),this.mail_lab.string="",this.password_lab.string="",this.errLab.active=!1},gotoSignup:function(){this.closeDialog(),o.EVENT_OPEN_DIALOG({name:"dialog_sign_up",param:{fo:this.fo}})},login:function(){var t=this.mail_lab.string;if(!n.ischeckemail(t))return!1;var e=this.password_lab.string;return""!=e&&(e=a.b64_md5(e),this.fo&&this.fo(),!0)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JMD5:"JMD5",UIDialog:"UIDialog"}],UIMagicWater:[function(t,e,i){cc._RF.push(e,"aae11ltmvFJ5L5Wc1sHzchq","UIMagicWater");var n=t("n7"),o=t("GameCommon"),a=cc.Class({"extends":t("UIBlock"),properties:{altas:{type:cc.SpriteAtlas,"default":null},whiteBall:{type:cc.Sprite,"default":null}},statics:{COLORSATLAS:["magic_ye","magic_re","magic_bl","magic_gr","magic_pu","magic_or"]},onLoad:function(){},start:function(){},getCubeData:function(){return this.color},setData:function(t,e,i,n,a){this.data=t,this.playChg(e),i&&i.call(n,o.CUBE_SETPARAM_ALL),this.destroyCall&&this.playDestroyAnim()},playChg:function(t){var e=this.data;if(this.color=e.randColor,null!=e.randColor){var i=a.COLORSATLAS[e.randColor];this.whiteBall.spriteFrame=this.altas.getSpriteFrame(i)}},destroyMe:function(t,e,i){if(this.destroyCall)return e.call(i),void(n.isDebug&&n.log("UIMagicWater gid:"+this.tile.gid+" destroyMe 2"));this.destroyCall={cmd:t,callfun:e,caller:i},this.animState?n.isDebug&&n.log("UIMagicWater gid:"+this.tile.gid+" destroyMe 3"):this.playDestroyAnim()},playDestroyAnim:function(){this.animState?n.isDebug&&n.log("UIMagicWater gid:"+this.tile.gid+" playDestroyAnim out"):(n.isDebug&&n.log("UIMagicWater gid:"+this.tile.gid+" playDestroyAnim"),this.destroyCall&&(n.isDebug&&n.log("UIMagicWater gid:"+this.tile.gid+" playEnd destroy"),this.destroyCall.callfun.call(this.destroyCall.caller),this.destroyCall=null))}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock",n7:"n7"}],UIMailMsg:[function(t,e,i){cc._RF.push(e,"7388fCb+6NBnJC9wZ3ywpAL","UIMailMsg");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("UserLogic");cc.Class({"extends":t("UIDialog"),properties:{btn_confirm:{"default":null,type:cc.Node},item:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_confirm,n.makef(this.isConfirm,this),1)},showed:function(t){this.p=t,n.textp(this.content,"title/label",t.content),n.textp(this.content,"info/label",t.content);var e=t.exdt.split("|");this.award=[];for(var i=0;i<this.item.childrenCount;i++){var o=e[i],s=n.sh(this.item,"item"+i,o);if(o){var c=o.split(":"),r=a.item(c[0]);n.imgs(s,r.icon,"icon"),n.text(s,"num",c[1]),this.award.push({k:r.id_name,v:c[1]})}}},isConfirm:function(){var t=this.p.id;s.readMsg(t),s.award(this.award),this.closeDialog(),o.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:this.award})}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIMailbox_power:[function(t,e,i){cc._RF.push(e,"a9e851sb0JC7ZjhCXpNbH8A","UIMailbox_power");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("GuildLogic"),c=t("StringUtils"),r=t("GameCommon");cc.Class({"extends":cc.Component,properties:{obj:{"default":null,type:cc.Node},obj2:{"default":null,type:cc.Node},no:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){n.btnc(this.obj2,"btn",n.makef(this.joinclud,this),1),n.btnc(this.no,"btn",n.makef(this.joinclud,this),1),o.on(o.EVENT_MESSAGE,function(t){var e=t.getUserData().msg;e&&1*e.type==a.MAIL_HEART&&this.refrush(t.getUserData())},this),o.on(o.EVENT_GUILD,function(t){var e=t.getUserData();"init"!=e.oper&&"quit"!=e.oper||this.refrushHmsg()},this)},onDestroy:function(){o.off(this)},refrush:function(t){switch(t.oper){case "new":this.refrushHmsg();break;case "read":if(this.initHeartMsgs().length<=0)return void this.refrushHmsg();this.content.getChildByTag(t.msg.id).destroy()}},__showed:function(){this.refrushHmsg()},refrushHmsg:function(){this.content.removeAllChildren(!0);var t=this.initHeartMsgs(),e=t.length>0;e&&(t.sort(function(t,e){return t.create_time-e.create_time}),this.__list=t,this.indexK=0,this.istcend=!1);var i=!e&&!s.have();this.obj2.active=i,this.no.active=!e&&!i},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];t?(this.initMsg(t),this.indexK++):this.istcend=!0}},initHeartMsgs:function(){var t=a.allmsgs(),e=[];for(var i in t){var n=t[i];1*n.type==a.MAIL_HEART&&e.push(n)}return e},initMsg:function(t){var e=cc.instantiate(this.obj);e.parent=this.content,e.tag=t.id;var i=t.content.split("|");n.text(e,"nickname",c.cut(i[0],r.NAME_MAXL_LEN)),n.textp(e,"label","mail.give_hp",[3]),e.msgdata=t,n.btnc(e,"btn",n.makef(this.submitHeart,this,t.id),1)},submitHeart:function(t){a.isFullHeart()?o.EVENT_MESSAGEBOX("buy_heart.full"):a.readMsg(t)},joinclud:function(){o.EVENT_GOTO_SKIP_DIALOG(3)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UserLogic:"UserLogic"}],UIMailbox_private:[function(t,e,i){cc._RF.push(e,"9661as1VlhNW5lAGWpyVY7c","UIMailbox_private");var n=t("GameTools");t("UserDataV2"),cc.Class({"extends":cc.Component,properties:{obj:{"default":null,type:cc.Node},obj2:{"default":null,type:cc.Node},insobj:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},point:{"default":null,type:cc.Node},content3:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){},__showed:function(){var t=[{id:1,info:"123",read:"on"},{id:3,info:"456",read:"on"},{id:5,info:"789",read:"on"}];if(this.node.replys=[{id:1,reply:"123"}],this.node.Mail=t,t){this.point.active=!0,n.sh(this.insobj,"private/list/on",!0);for(var e=0;e<t.length;e++)this.initMsg(t[e])}else this.point.active=!1;n.btnc(this.insobj,"private/list",n.makef(this.openlist,this))},initMsg:function(t){var e=cc.instantiate(this.obj);e.parent=this.content,e.active=!0,"on"!=t.read&&(e.point.active=!1),n.text(e,"bk/lab",t.id),n.btnc(e,"bk",n.makef(this.openbut,this,{mail:t,node:e}))},openlist:function(){var t=this.node.Mail;0!=this.content.children.length&&this.content.removeAllChildren();for(var e=0;e<t.length;e++){var i=cc.instantiate(this.obj);i.parent=this.content,i.active=!0,"on"!=t[e].read&&(n.chd(this.content.children[e],"bk/poit").active=!1),n.text(i,"bk/lab",t[e].id),n.btnc(i,"bk",n.makef(this.openbut,this,{mail:t[e],node:i}))}n.sh(this.insobj,"private/list/on",!0),n.sh(this.insobj,"private/record/on"),this.refresh()},refresh:function(){for(var t=0,e=0;e<this.content.children.length;e++)0==n.chd(this.content.children[e],"bk/poit").active&&t++;t==this.content.children.length&&(this.point.active=!1),this.content3._parent.active=!1},openbut:function(t){this.content3._parent.active=!0,0!=this.content3.children.length&&this.content3.removeAllChildren();var e=t.mail,i=t.node;n.chd(i,"bk/poit").active=!1,0!=this.content.children.length&&this.content.removeAllChildren(),n.sh(this.insobj,"private/record/on",!0),n.sh(this.insobj,"private/list/on");var o=cc.instantiate(this.obj2);o.parent=this.content,o.active=!0,n.text(o,"titles/bottom_frame/lab",e.id);for(var a=0;a<this.node.Mail.length;a++){var s=n.cmpt(o,"titles/bottom_frame/lab",cc.Label);if(this.node.Mail[a].id==s._N$string){var c=n.chd(o,"info/bottom_frame/dialog_box/subfield/import"),r=cc.instantiate(c);r.parent=this.content3;var l=this.node.Mail[a].info.split("");n.chd(r,"kuang").width=40*(l.length+2),n.sh(r,"kuang",!0),n.text(r,"kuang/lab",this.node.Mail[a].info)}}n.btnc(o,"info/return",n.makef(this.openreturn,this)),n.btnc(o,"info/reply",n.makef(this.openreply,this,o)),n.btnc(o,"info/delete",n.makef(this.opendelete,this,e)),e.read="off";for(var h=0;h<this.node.Mail.length;h++)this.node.Mail[h].id==e.id&&(this.node.Mail[h].read="off");if(void 0!=this.node.replys)for(var u=0;u<this.node.replys.length;u++){var d=n.cmpt(o,"titles/bottom_frame/lab",cc.Label);if(this.node.replys[u].id==d._N$string){var f=n.chd(o,"info/bottom_frame/dialog_box/subfield/reply"),g=cc.instantiate(f);g.parent=this.content3;var p=this.node.replys[u].reply.split("");n.chd(g,"kuang").width=40*(p.length+2),n.sh(g,"kuang",!0),n.text(g,"kuang/lab",this.node.replys[u].reply)}}this.content3._parent.getComponent(cc.ScrollView).scrollToBottom(.1)},openreturn:function(){this.openlist()},openreply:function(t){var e=n.cmpt(t,"info/bottom_frame/print/input_box/Edit_Box",cc.EditBox);if(" "!=e.string&&""!=e.string){var i=n.chd(t,"info/bottom_frame/dialog_box/subfield/reply"),o=cc.instantiate(i),a=e.string.split("");n.chd(o,"kuang").width=45*(a.length+1),o.parent=this.content3,n.sh(o,"kuang",!0),n.text(o,"kuang/lab",e.string);var s=n.cmpt(t,"titles/bottom_frame/lab",cc.Label);this.node.replys.push({id:s._N$string,reply:e.string}),e.string="",this.content3._parent.getComponent(cc.ScrollView).scrollToBottom(.1)}},opendelete:function(t){for(var e=[],i=0,n=0;n<this.node.Mail.length;n++)this.node.Mail[n].id!=t.id&&(e[i++]=this.node.Mail[n]);this.node.Mail=e,this.openlist()}}),cc._RF.pop()},{GameTools:"GameTools",UserDataV2:"UserDataV2"}],UIMailbox_system:[function(t,e,i){cc._RF.push(e,"5e955IqolRF5qAV8do+ljue","UIMailbox_system");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic");cc.Class({"extends":cc.Component,properties:{obj:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},tips:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){o.on(o.EVENT_MESSAGE,function(t){var e=t.getUserData().msg;e&&1*e.type==a.MAIL_SYSTEM&&this.refrush(t.getUserData())},this),n.hide(t("UIMainV2").instance().btn_mail_box,"tips"),this.tips.active=!1},refrush:function(t){switch(t.oper){case "new":this.initMsg(t.msg);break;case "read":this.content.getChildByTag(t.msg.id).destroy()}},__showed:function(){var t=this.initHeartMsgs();t.length>0&&(t.sort(function(t,e){return t.create_time-e.create_time}),this.__list=t,this.indexK=0,this.istcend=!1)},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];t?(this.initMsg(t),this.indexK++):this.istcend=!0}},initHeartMsgs:function(){var t=a.allmsgs(),e=[];for(var i in t){var n=t[i];1*n.type==a.MAIL_SYSTEM&&e.push(n)}return e},initMsg:function(t){var e=cc.instantiate(this.obj);e.parent=this.content,e.tag=t.id,n.textp(e,"label",t.content),n.text(e,"time",n.fmtDate(1E3*t.create_time)),n.btnc(e,"bk",n.makef(this.OpenMsg,this,{d:t,n:e}))},OpenMsg:function(t){n.hide(t.n,"tip"),o.EVENT_OPEN_DIALOG({name:"dialog_mail_msg",param:t.d})},onDestroy:function(){o.off(this)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",UIMainV2:"UIMainV2",UserLogic:"UserLogic"}],UIMailbox:[function(t,e,i){cc._RF.push(e,"dfee5WqyvZGc6jUJ9chSbaJ","UIMailbox");var n=t("FamNet"),o=t("GameEvent"),a=t("GameTools");cc.Class({"extends":cc.Component,properties:{nonet:{"default":null,type:cc.Node},page_titles:{"default":null,type:cc.Node},page_content:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){o.on(o.EVENT_NET_STATU,function(t){this.checkNet(t.getUserData())},this)},onDestroy:function(){o.off(this)},__showed:function(){if(this.checkNet()){var e=a.chd(t("UIMainV2").instance().btn_mail_box,"tips");a.sh(this.page_titles,"off/page2/icon/tips",e.active)}},checkNet:function(t){var e=void 0!=t?t:n.isNet();return this.nonet.active=!e,this.page_titles.active=e,this.page_content.active=e,e},selectPage:function(t){}}),cc._RF.pop()},{FamNet:"FamNet",GameEvent:"GameEvent",GameTools:"GameTools",UIMainV2:"UIMainV2"}],UIMainPageBtn:[function(t,e,i){cc._RF.push(e,"e9ed7kabItCa74LTtRG1Org","UIMainPageBtn");var n=cc.Class({"extends":cc.Component,properties:{selected:!1},statics:{CHANGE_TIME:200},start:function(){},update:function(t){this.step&&(this.node.width+=this.step*(1E3*t),(this.step>0&&this.node.width>=this.targetWidth||this.step<0&&this.node.width<=this.targetWidth)&&(this.step=0,this.node.width=this.targetWidth))},select:function(t,e,i){this.callFunc=e,this.caller=i,this.selected!=t&&(this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this)),t?this.anim.play():this.anim.play("main_page_btn_un"),this.targetWidth=t?360:180,this.step=(this.targetWidth-this.node.width)/n.CHANGE_TIME,this.selected=t)},playEnd:function(){this.callFunc&&this.callFunc.call(this.caller),this.caller=this.callFunc=null}});cc._RF.pop()},{}],UIMainPage:[function(t,e,i){cc._RF.push(e,"abaf4agkoFAZYxm3hd0Eqc7","UIMainPage"),cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null}},onLoad:function(){},start:function(){if(this.content.children){this.pageCount=this.content.children.length,this.content.width,this.pageCount,this.pageAnchorX=[];for(var t=1/(2*this.pageCount),e=t,i=0;i<this.pageCount;i++)this.pageAnchorX.push(e),e+=2*t}},update:function(t){this.gotoPage(t)},gotoPage:function(t){this.step&&(this.content.anchorX+=this.step*(1E3*t),(this.step>0&&this.node.width>=this.targetWidth||this.step<0&&this.node.width<=this.targetWidth)&&(this.step=0,this.node.width=this.targetWidth))},isPageVaild:function(t){return!(t<0||t>=this.pageCount)},setPage:function(t){this.isPageVaild(t)||(this.content.anchorX=this.pageAnchorX[t],this.page=t,this.step=0,this.callInPage(t))},callInPage:function(t){this.callFunc&&this.callFunc.call(this.caller,t)},scrollToPage:function(t,e){this.page!=t&&(this.isPageVaild(t)||(this.targetAnchorX=this.pageAnchorX[t],this.step=(this.targetAnchorX-this.content.anchorX)/(1E3*e)))}}),cc._RF.pop()},{}],UIMainV2:[function(t,e,i){cc._RF.push(e,"508688P2SVI0aeUfBWeICvC","UIMainV2");var n=t("GameTools"),o=t("GameEvent"),a=t("GameCommon"),s=t("UserLogic"),c=t("n7"),r=t("JsonMetaCache"),l=t("UserDataV2"),h=t("SdkIns"),u=t("N7Resource"),d=t("GameLogic"),f=t("ActivityLogic"),g=t("LogicActiveSale"),p=t("GuildLogic"),_=t("StringUtils"),m=t("WorkData"),v=t("GameConfig"),E=cc.Class({"extends":cc.Component,properties:{gameBk:{"default":null,type:cc.Sprite},pages:{"default":null,type:cc.PageView},btn_game:{"default":null,type:cc.Node},btn_menu:{"default":null,type:cc.Node},btn_chat:{"default":null,type:cc.Node},btn_setting:{"default":null,type:cc.Node},btn_help:{"default":null,type:cc.Node},extend_box:{"default":null,type:cc.Node},btn_news:{"default":null,type:cc.Node},btn_backpack:{"default":null,type:cc.Node},btn_achievement:{"default":null,type:cc.Node},btn_assault:{"default":null,type:cc.Node},btn_sign_in:{"default":null,type:cc.Node},btn_tournament:{"default":null,type:cc.Node},btn_contend:{"default":null,type:cc.Node},btn_club_treasure:{"default":null,type:cc.Node},btn_level_gift:{"default":null,type:cc.Node},btn_xing_box:{"default":null,type:cc.Node},btn_ads:{"default":null,type:cc.Node},btn_invite:{"default":null,type:cc.Node},btn_invite_gift:{"default":null,type:cc.Node},btn_limited:{"default":null,type:cc.Node},btn_activity:{"default":null,type:cc.Node},btn_trigger:{"default":null,type:cc.Node},btn_shop:{"default":null,type:cc.Node},btn_dial:{"default":null,type:cc.Node},btn_newYearWatch:{"default":null,type:cc.Node},btn_shareUnheart:{"default":null,type:cc.Node},btn_hortor_p:{"default":null,type:cc.Node},btn_hortor_try:{"default":null,type:cc.Node},box_get_bone:{"default":null,type:cc.Prefab},eff_next_level:{"default":null,type:cc.Prefab},background:{type:cc.Sprite,"default":null},button:{"default":null,type:cc.Node},pageBtns:[t("UIMainPageBtn")],topbar:{type:t("UITopBar"),"default":null},treasure_star:{"default":null,type:cc.Node},complete:{"default":null,type:cc.Node},seven_days:{"default":null,type:cc.Node},info_bar:{"default":null,type:cc.Node},bk_btn:{"default":null,type:cc.Node},assaultLevel:{type:cc.SpriteFrame,"default":[]},btn_mail_box:{"default":null,type:cc.Node},btn_guild:{"default":null,type:cc.Node},box_info:{"default":null,type:cc.Node}},statics:{instance:function(){return E.s_instance},PAGE_BUTTON_POS:[-360,-180,0,180,360],PAGES_PREFAB:["dialog_shop","dialog_mailbox",null,"dialog_club","dialog_rankingList"]},onLoad:function(){window.UIMainV2=E.s_instance=this,this.initUI(),this.initEvent()},start:function(){this.preload(this.initMap),t("TDLog").Event("MainUI",{count:1})},addResList:function(t,e,i,n){var o=t.id||t;n[o]||(i.push(t),e&&(e.effectDestroy&&i.push(e.effectDestroy),e.effectChgTo&&i.push(e.effectChgTo)),n[o]=!0)},preload:function(t){var e=r.preloadRes(),i=[],n={};for(var a in e){var s=e[a];-1==s.preload.lv&&this.addResList(s,null,i,n)}var c=i.length;o.EVENT_GAME_LOADDATA(i.length,0,"UIMainV2"),u.preloadResList(i,function(e,i,n){if(!e)return o.EVENT_GAME_LOADDATA(n.count,n.finish,"UIMainV2"),void(--c<=0&&n.allFinish&&t.call(this));var a,s=[];if(e.component){var l=e.component;if(l.soundId&&s.push(l.soundId),l.soundList&&l.soundList.length)for(var h in l.soundList)l.soundList[h]&&s.push(l.soundList[h]);if(l.effectList&&l.effectList.length)for(var d in l.effectList)l.effectList[d]&&s.push(l.effectList[d])}if(e.meta){var f=r.getTileFormResId(e.meta.id);if(f)for(var g in f){var p=f[g];if(p.goalAnim){var _=p.goalAnim;_.soundId&&s.push(_.soundId),_.effectId&&s.push(_.effectId)}}}a=e.prefab||e,u.preloadResList(s,function(e,s,r){r.allFinish&&(o.EVENT_GAME_LOADDATA(n.count,n.finish,"UIMainV2"),i.preload&&i.preload.c>0&&u.preloadPrefab(a,i.preload.c),--c<=0&&n.allFinish&&t.call(this))},this)},this)},onDestroy:function(){t("GameEvent").off(this),window.UIMainV2=E.s_instance=null},loadRes:function(){},loadBk:function(e){var i=r.findMapChapter(e||s.geti("lev"));if(null!=i){var n="main/gmap/m"+i.chapter;n!=this.gmapUrl&&(this.gmapUrl=n,u.textureFromPath(n,function(t){t&&(this.gameBk.spriteFrame=t,this.gameBackAndChapter()&&this.showShare(t))},this))}1==s.geti("lev")&&t("GuideLogic").checkPointGuide(24511)},gameBackAndChapter:function(){return this.gameBack&&this.gameBack.cmp&&d.isNextChapter()},initUI:function(){var t=n.chd(this.node,"background");for(var e in t.on(a.touchend,function(){c.log("click:background")},this),this.btn_setting.active="tb"!=v.get("pf"),v.get("gm")&&n.show(this.info_bar,"test"),this.pageBtnIdx=2,this.pages.setCurrentPageIndex(this.pageBtnIdx),this.mainBtnchecked=n.chd(this.node,"bottom/bottom/checked"),n.btn(this.btn_game,n.makef(this.toGame,this),1),n.btn(this.btn_menu,n.makef(this.openMenu,this),1),n.btn(this.btn_chat,n.makef(this.openNews,this),1),n.btn(this.btn_news,n.makef(this.openNews,this)),n.btn(this.btn_setting,n.makef(function(){o.EVENT_OPEN_DIALOG("dialog_setup")},this),1),n.btnc(this.btn_lev_box,"bk",n.makef(this.getLev_box,this.btn_lev_box)),n.btn(this.btn_xing_box,n.makef(this.getXingGift,this),1),this.pageBtns)n.btn(this.pageBtns[e].node,n.makef(this.openbutton,this,1*e));n.btn(this.btn_shop,n.makef(function(){o.EVENT_OPEN_DIALOG({name:"dialog_item_shop"})},this),1),n.btn(this.btn_dial,n.makef(this.openDial,this),1),n.btn(this.btn_backpack,n.makef(this.openBackpack,this),1),n.btn(this.btn_help,n.makef(this.openHelpDialog,this),1),n.btn(this.btn_sign_in,n.makef(this.Openthirty_days,this),1),n.btn(this.btn_tournament,n.makef(this.OpenTournament,this),1),n.btn(this.btn_contend,n.makef(this.OpenContend,this),1),n.btn(this.btn_club_treasure,n.makef(this.OpenClubTreasure,this),1),n.btn(this.btn_achievement,n.makef(this.Openachievement,this),1),n.btn(this.btn_assault,n.makef(this.openAssault,this),1),n.btnc(this.btn_task,"icon",n.makef(this.openTask,this)),n.btn(this.btn_level_gift,n.makef(this.getLevelGift,this),1),n.btnc(this.btn_sale,"icon",n.makef(this.getLoginSale,this)),n.btn(this.seven_days,n.makef(this.Openseven_days,this),1),n.btn(this.btn_ads,n.makef(this.openAds,this),1),this.btn_ads.active=!0,n.btn(this.btn_invite,n.makef(this.openInvite,this),1),n.btn(this.btn_invite_gift,n.makef(this.openInviteGift,this),1),n.btn(this.btn_limited,n.makef(this.openCharge,this,this.btn_limited),1),n.btn(this.btn_activity,n.makef(this.openCharge,this,this.btn_activity),1),n.btn(this.btn_trigger,n.makef(this.openChargeTrigger,this,this.btn_trigger),1),n.btn(this.btn_newYearWatch,n.makef(this.openNewYearWatch,this,this.btn_newYearWatch),1),this.btn_newYearWatch.active=!0,n.btn(this.btn_shareUnheart,n.makef(this.shareUnheart,this,this.btn_shareUnheart),1),this.btn_hortor_p&&n.btn(this.btn_hortor_p,n.makef(this.openHortorP,this,this.btn_hortor_p),1),this.btn_hortor_try&&n.btn(this.btn_hortor_try,n.makef(this.openHortorTry,this,this.btn_hortor_try),1),c.BS&&(this.btn_news.active=!1)},initEvent:function(){this.dialogn=n.chd(this.node,"dialog"),o.on(o.EVENT_UDATA_CHG,function(t){this.refush(t.getUserData())},this),o.on(o.EVENT_OPEN_DIALOG,function(t){this.extend_box.active&&this.extend_box.getComponent("UIPopBase").close(),this.box_info.active&&this.box_info.getComponent("UIPopBase").close()},this),o.on(o.EVENT_BIGMAP_COMMAND,function(t){this.__bigmapCommand(t.getUserData())},this),o.on(o.EVENT_GOTO_SKIP_DIALOG,function(t){var e=t.getUserData();this.openbutton(e.id,!!e.p&&e.p)},this),o.on(o.EVENT_GUILD,function(t){var e=t.getUserData();"init"!=e.oper&&"mod"!=e.oper||this.setGuildInfo(),"quit"==e.oper&&(n.hide(this.btn_guild,"tips"),n.hide(this.btn_guild,"tipg"),this.setGuildInfo({gname:n.i18ns("no_club"),gicon:0}))},this),o.on(o.EVENT_ACHIEVE_FINISH,function(){d.refreshAchievementTips()},this),o.on(o.EVENT_MESSAGE,function(t){1!=this.pageBtnIdx&&"all"==t.getUserData().oper&&d.refreshMailTips()},this),o.on(o.EVENT_GUILD_MESSAGE,function(t){var e=t.getUserData();3!=this.pageBtnIdx&&"new"==e.oper&&e.msg.type==p.MSGTP_NOR&&(this.redTip=!0),"update"!=e.oper&&"del"!=e.oper||e.msg.type!=p.MSGTP_HELP||d.refreshGuildTipg(),"all"==e.oper&&(this.redTip&&(this.redTip=!1,d.refreshGuildTips()),d.refreshGuildTipg())},this),o.on(o.EVENT_MAIN_LOADBACKGROUND,function(){this.loadBk()},this),o.on(o.EVENT_ADS_CHG,function(t){t.getUserData()&&this.showAds()},this),this.schedule(this.update1s,1);var t=n.chd(this.btn_game,"ass_frame");this.assaultAni=t.getComponent(cc.Animation),this.assaultAni.changeHard=function(){this.chgAssaultIcon()}.bind(this)},__flyStar:function(t){this.__levelGift(t.mid);var e=d.getStarBox();e.star-=t.star,this.__starGift(e),t.star?this.complete.getComponent("UIGameComplete").showedGoals(t.star,this):this.__bigmapCommand({mainui:{nextlevel:s.geti("lev")}}),this.exSetAssaultIcon(f.getAssaultLevel(),!1)},initMap:function(){this._FRISTIN_||(this._FRISTIN_=!0,p.get()),this.initSelfInfo();var t=o.GET_BIGMAP_PARAM();if(!t)return this.refush(),this.isFrist=!0,void this.__mapShowEnd();this.refush(t),t.cmp=1==t.ret&&1==t.stu,this.gameBack=t;var e=this;o.EVENT_BIGMAP_SHOWED(function(){t.cmp?e.__flyStar(t):e.__mapShowEnd()})},__mapShowEnd:function(){this.__levelGift(),this.__starGift(),this.__mapShowEnd2()},__mapShowEnd2:function(){t("GuideLogic").mainUIGuide(),this.__checkGuideLock(),this.startBtnLight();var e=this.gameBack;h.instance().onMainShowed(e),d.mainui_showed(e)},__openSeven_days:function(){return!(!this.isFrist||!n.chd(this.seven_days,"tips").active||(this.Openseven_days(),0))},__openDial:function(){return!(!this.isFrist||!n.chd(this.btn_dial,"tips").active||(this.openDial(),0))},__checkGuideLock:function(){t("GuideLogic").hasNextGuide()?c.isDebug&&c.log("GuideLogic.__checkGuideLock: \u6709\u5f15\u5bfc\uff0c\u7ee7\u7eed\u9501\u5b9a"):(n.hide(this.node,"background"),c.isDebug&&c.log("GuideLogic.__checkGuideLock: \u6ca1\u6709\u5f15\u5bfc\uff0c\u89e3\u9664\u9501\u5b9a"))},__bigmapCommand:function(e){if(e.mainui){if((e=e.mainui).btn&&this[e.btn]){var i=null;if(void 0!=e.sh)if(void 0!=e.level&&e.level<1)this[e.btn].active=!1;else{this[e.btn].active=!0;var a=n.sh(this[e.btn],"lock",!e.sh);a&&a.active&&void 0!=e.level?(n.textp(a,"label","ulev",[e.level]),this[e.btn].lock=e.level):this[e.btn].lock=void 0}if(void 0!=e.tips&&(i=n.sh(this[e.btn],"tips",e.tips&&!this[e.btn].lock)),void 0!=e.tipg&&(i=n.sh(this[e.btn],"tipg",e.tipg)),void 0!=e.num&&i&&i.active&&n.text(i,"num",e.num),e.cd&&this.setIconCD(this[e.btn],e.cd),void 0!=e.rank){var s=isNaN(parseInt(e.rank));n.text(this[e.btn],"num",s?"-":e.rank+1)}var c=n.sh(this[e.btn],"info",e.info);c&&c.active&&n.text(c,"label",e.info)}null!=e.assault&&this.setAssaultIcon(e.assault),e.nextlevel&&(this.__starGift(),this.scheduleOnce(function(){var i=this.btn_game.getComponent(cc.Animation);i.on("finished",function(){this.__mapShowEnd2()},this),i.play("UP_checkpoint"),cc.instantiate(this.eff_next_level).parent=this.btn_game,n.show(this.btn_game,"eff_icon");var a=this;i.changeLv=function(){if(a.__levelGift(),a.refushBeginBtn(e.nextlevel)){n.hide(a.node,"background"),d.mainui_showed();var i={title:"hintt",lab:"reconfirm_hint.pass_all",yes:"confirm",labp:[n.i18ns("g_name."+v.get("package"))]};o.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:i})}else t("N7Sound").playSound(90156),n.textp(a.btn_game,"label","level",[e.nextlevel])},this.setAssaultIcon(f.getAssaultLevel(),!0)},.8))}},refush:function(t){if(t&&"nkname"==t.n)n.text(this.info_bar,"left/name",_.cut(t.v,a.NAME_MAXL_LEN));else{var e=t&&1==t.ret&&1==t.stu?t.mid:s.geti("lev");n.textp(this.btn_game,"label","level",[e]),this.refushBeginBtn(e)}},refushBeginBtn:function(t){var e=t>=s._GETMAXLEV_();return this.btn_game.active=!e,n.sh(this.btn_game.parent,"btn_begin_gray",e),e},levelGiftIsFull:function(t){return!(t<0)&&s.geti("lev")>=t},__levelGift:function(t){var e=s.geti("lev");this.gameBackAndChapter()&&e--,this.loadBk(e);var i=d.canLevelGift(t);if(0!=i){var o=this.levelGiftIsFull(i);n.sh(this.btn_level_gift,"iconfull",o),n.sh(this.btn_level_gift,"icon",!o),n.sh(this.btn_level_gift,"lev",!o),n.sh(this.btn_level_gift,"name",!o),n.textp(this.btn_level_gift,"lev","levelgift",[Math.abs(i)]),this.getHaveHeart(i),this.boxFullAction(this.btn_level_gift,o)}else n.hide(this.btn_level_gift)},showShare:function(t){var e={title:"share.chapterTitle",btnc:!0,txt:"share.chapterDesc",greentxt:"share.chapterGreen"};e.chapter=t,e.callFunc=function(){},o.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:e})},getHaveHeart:function(t){var e=d.getLevelBoxDetail(),i=!1,o=0;for(var a in e)if("unheart"==e[a].k){i=!0,o=e[a].v;break}var s=n.sh(this.btn_level_gift,"info",i);i&&n.textp(s,"label","box_unheart",[Math.abs(t),o])},getLevelGift:function(){d.getLevelGift(function(t,e){if(0==t)this.__levelGift();else{var i=d.getLevelBoxDetail();this.openBoxInfo({n:this.btn_level_gift,p:i,t:n.i18ns("lv_box_info",[Math.abs(e)])})}},this)},__starGift:function(t){t||(t=d.getStarBox());var e=t.star>=t.max;n.sh(this.btn_xing_box,"iconfull",e),n.sh(this.btn_xing_box,"icon",!e),n.sh(this.btn_xing_box,"xing_name",!e);var i=t.star,o=n.chd(this.btn_xing_box,"xing_name/progresskong");n.text(o,"num",i+"/"+t.max),o.getComponent("JProgressBar").progress(0,t.star,t.max),this.boxFullAction(this.btn_xing_box,e)},getXingGift:function(){d.openStarBox(function(t,e){if(0==t){this.__starGift();var i=d.getStarBox(),o=i.star>=i.max;this.boxFullAction(this.btn_xing_box,o)}else{var a=d.getStarBoxDetail();this.openBoxInfo({n:this.btn_xing_box,p:a,t:n.i18ns("star_box_info",[e])})}},this)},openBoxInfo:function(t){var e=t.n,i=t.p,o=void 0,a=void 0,s=void 0;if(i){var c=n.nodeToNodePos(e,e.parent.parent);this.box_info.x=c.x,this.box_info.y=c.y-e.height/2;var l=n.chd(this.box_info,"tar");for(var h in n.text(l,"label",t.t),i)s=i[h],o=n.chd(l,"tar"+h),a=r.itemn(s.k),n.imgs(o,a.icon,"icon"),n.text(o,"num","x "+s.v);this.box_info.getComponent("UIPopBase").show()}},update1s:function(t){var e=l.cutm();l.update(e),c.CS&&(p.update(e),s.update(e))},startBtnLight:function(){n.play(this.btn_game,"btn_Sweeplight");var t=r.map(s.geti("lev"));n.sh(this.btn_game,"hard",t.hard)},toGame:function(){f.assaultNotice(function(){this.openGateEntrance()},this)},openGateEntrance:function(){o.EVENT_OPEN_DIALOG({name:"dialog_gateEntrance",param:{lv:s.geti("lev")}})},openMenu:function(){this.extend_box.active||(this.extend_box.getComponent("UIPopBase").show(null,{ani:1}),this.extend_box.parent.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal)},openNews:function(){this.btn_chat.active=!1,o.EVENT_OPEN_DIALOG("dialog_chat")},openBackpack:function(){o.EVENT_OPEN_DIALOG({name:"dialog_backpack"})},openHelpDialog:function(){o.EVENT_OPEN_DIALOG({name:"dialog_help"})},Openseven_days:function(){this.seven_days.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.seven_days.lock):o.EVENT_OPEN_DIALOG({name:"dialog_seven_sign"})},showAds:function(){d.refreshAdsTips(),t("GuideLogic").hasNextGuide()||d._FRISTIN_||(d._FRISTIN_=1,t("ShareLogic").getAdState(100)==a.SHARE_AD_0&&o.EVENT_OPEN_DIALOG("dialog_ads"))},Openthirty_days:function(){this.btn_sign_in.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_sign_in.lock):o.EVENT_OPEN_DIALOG({name:"dialog_thirty_sign"})},openDial:function(){this.btn_dial.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_dial.lock):o.EVENT_OPEN_DIALOG({name:"dialog_dial"})},OpenTournament:function(){if(this.btn_tournament.lock)o.EVENT_MESSAGEBOX("unopen_atv",this.btn_tournament.lock);else if(t("FamNet").isNet()){var e=m.get(m.WKD_CHP_STAR);o.EVENT_OPEN_DIALOG({name:e?"dialog_tournament":"dialog_active_open"})}else o.EVENT_MESSAGEBOX("msg_hint.need_net")},OpenContend:function(){if(this.btn_contend.lock)o.EVENT_MESSAGEBOX("unopen_atv",this.btn_contend.lock);else if(t("FamNet").isNet()){var e=p.have()?{name:"dialog_club_contend"}:{name:"dialog_unhave_club",param:{id:1}};o.EVENT_OPEN_DIALOG(e)}else o.EVENT_MESSAGEBOX("msg_hint.need_net")},OpenClubTreasure:function(){if(this.btn_club_treasure.lock)o.EVENT_MESSAGEBOX("unopen_atv",this.btn_club_treasure.lock);else if(t("FamNet").isNet()){var e=p.have()?{name:"dialog_club_treasure"}:{name:"dialog_unhave_club",param:{id:2}};o.EVENT_OPEN_DIALOG(e)}else o.EVENT_MESSAGEBOX("msg_hint.need_net")},Openachievement:function(){this.btn_achievement.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_achievement.lock):o.EVENT_OPEN_DIALOG({name:"dialog_achieve"})},openAssault:function(){this.btn_assault.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_assault.lock):o.EVENT_OPEN_DIALOG({name:"dialog_assault"})},openAds:function(){this.btn_ads.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_ads.lock):o.EVENT_OPEN_DIALOG({name:"dialog_ads"})},openInvite:function(){this.btn_invite.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_invite.lock):o.EVENT_OPEN_DIALOG({name:"dialog_invite"})},openInviteGift:function(){this.btn_invite_gift.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_invite_gift.lock):o.EVENT_OPEN_DIALOG({name:"dialog_invite_gift"})},openCharge:function(t){t.lock?o.EVENT_MESSAGEBOX("unopen_atv",t.lock):o.EVENT_OPEN_DIALOG({name:"dialog_recharge",param:t.chargeId})},openChargeTrigger:function(t){t.lock?o.EVENT_MESSAGEBOX("unopen_atv",t.lock):o.EVENT_OPEN_DIALOG({name:"dialog_recharge_trigger",param:t.chargeId})},openNewYearWatch:function(t){t.lock?o.EVENT_MESSAGEBOX("unopen_atv",t.lock):o.EVENT_OPEN_DIALOG({name:"dialog_total_ads",param:{titleKey:t.titleKey}})},shareUnheart:function(){var e=this,i=t("ShareLogic"),n=i.getAward(13)[0];(n=n.slice()).title="share.unheartTitle",n.btnc=!0,n.txt="share.unheartDesc",n.greentxt="share.unheartGreen",n.callFunc=function(){i.showAndWatchOrShare(13,null,function(t){t&&t.dt&&0==t.dt.code&&(e.btn_shareUnheart.active=!1)},this)},o.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:n})},openHortorP:function(t){o.EVENT_OPEN_DIALOG({name:"dialog_hortor",param:t.chargeId})},openHortorTry:function(t){o.EVENT_OPEN_DIALOG({name:"dialog_tryplay",param:t.chargeId})},openDesktop:function(){this.btn_desktop.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_desktop.lock):o.EVENT_OPEN_DIALOG({name:"dialog_add_desktop"})},openRankList:function(){this.btn_rank_list.lock?o.EVENT_MESSAGEBOX("unopen_atv",this.btn_rank_list.lock):o.EVENT_OPEN_DIALOG({name:"dialog_rank_list"})},openClubActive:function(){o.EVENT_OPEN_DIALOG("dialog_shop")},openShipping:function(){this.but(1),o.EVENT_OPEN_DIALOG("dialog_order")},openSignIn:function(){},openTask:function(){o.EVENT_OPEN_DIALOG("dialog_daily_task")},initSelfInfo:function(){n.text(this.info_bar,"left/name",_.cut(s.get("nkname"),a.NAME_MAXL_LEN));var t=s.get("icon");if(t&&t.indexOf("http")>=0){var e=this;h.instance().icon(t,function(t){n.cmpt(e.info_bar,"left/icon",cc.Sprite).spriteFrame=t})}},getLoginSale:function(){n.hide(this.btn_sale,"tips"),o.EVENT_OPEN_DIALOG({name:"dialog_activesale",param:{id:g.id()}})},setActiveSaleIcon:function(t){this.btn_sale.active=t>0;var e=r.active(t);e&&(n.i18ns("active.tile_"+e.type),n.text(this.btn_sale,"label",n.i18ns("active.tile_"+e.type)))},openStarIntroduce:function(){u.prefabFromURL("gameres/basev2/ui/dialog/starIntroduce",null,null,function(t){n.btnc(t,"clickbk",n.makef(function(){t.active=!1},this)),t.parent=this.dialogn,t.setPosition(cc.p(0,0)),t.active=!0,t.getComponent(cc.Animation).play()},this)},setprogress_bar:function(){n.chd(this.progress_bar,"mask/progressMan").x=5640},setPageTouch:function(t,e){this.pageTouch=t,this.pageTouch||this.pageAc||(this.mainBtnchecked.x=E.PAGE_BUTTON_POS[this.pages.getCurrentPageIndex()])},inPage:function(t){},openbutton:function(e,i){if(!this.isPageChanging)if(this.pageBtnIdx!=e){3==e&&(n.hide(this.btn_guild,"tips"),o.EVENT_SHOW_GUILD()),this.isPageChanging=!0,this.pageBtns[this.pageBtnIdx].select(!1),this.pageBtns[e].select(!0,function(){this.isPageChanging=!1},this);var s=Math.abs(this.pageBtnIdx-e),c=a.MAIN_PAGE_SCROLL_TIME*s,r=this.mainBtnchecked;r.stopAllActions();var l=[cc.moveTo(c,E.PAGE_BUTTON_POS[e],r.y).easing(cc.easeOut(8)),cc.callFunc(function(){this.pageAc=null},this)];this.pageAc=r.runAction(cc.sequence(l)),this.pageBtnIdx=e,this.pages.scrollToPage(this.pageBtnIdx,c);var h=this.pages.content.children[e],u=E.PAGES_PREFAB[e];this.pagePre&&this.pagePre.unsetCenter();var d=h.getComponent(t("UIPage"));d.setCenter(u,c,function(t){i&&t.getComponent("UIChoosePages").select(i)},this),this.pagePre=d}else if(i){var f=this.pages.content.children[e].getComponent(t("UIPage"));f.dialog&&f.dialog.getComponent("UIChoosePages").select(i)}},boxFullAction:function(t,e){var i=t.getComponent(cc.Animation);n.sh(t,"full_icon",e),e?i.play("stars_ing"):i.stop("stars_ing")},exSetAssaultIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(f.assaultIsIn()){var i=f.lastStage,n=f.assaultSaveData.currStage;0!=i&&i!=n?this.setAssaultIcon(t-1,e):1!=n&&this.setAssaultIcon(t,e)}},setAssaultIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.chd(this.btn_game,"ass_frame");if(null!=this.assaultLevel[t]){i.active=!0;var o=f.lastStage,a=f.assaultSaveData.currStage;e?0==o&&1==a?this.assaultAni.play("btn_begin_activity_start"):this.assaultAni.play("btn_begin_activity"):this.chgAssaultIcon(t)}else i.active=!1},chgAssaultIcon:function(t){var e=null!=t?t:f.getAssaultLevel(),i=n.chd(this.btn_game,"ass_frame/icon/assaultIcon/333");null!=this.assaultLevel[e]&&(i.getComponent(cc.Sprite).spriteFrame=this.assaultLevel[e],i.active=!0,i.position=0==e?cc.p(30,-12):cc.p(24,-3))},setIconCD:function(t,e){var i=n.chd(t,"time");if(i){var o=n.chd(t,"time/label");e>0?(i.active=!0,n.cd(o,parseInt(e/1E3),n.makef(function(){i.active=!1},this))):i.active=!1}}});cc._RF.pop()},{ActivityLogic:"ActivityLogic",FamNet:"FamNet",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",GuideLogic:"GuideLogic",GuildLogic:"GuildLogic",JsonMetaCache:"JsonMetaCache",LogicActiveSale:"LogicActiveSale",N7Resource:"N7Resource",N7Sound:"N7Sound",SdkIns:"SdkIns",ShareLogic:"ShareLogic",StringUtils:"StringUtils",TDLog:"TDLog",UIMainPageBtn:"UIMainPageBtn",UIPage:"UIPage",UITopBar:"UITopBar",UserDataV2:"UserDataV2",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],UIMapEdge_dd:[function(t,e,i){cc._RF.push(e,"fbda2iGVThL2pEBwyGbk9ky","UIMapEdge_dd"),cc.Class({"extends":cc.Component,properties:{atlas:{type:cc.SpriteAtlas,"default":null}},onLoad:function(){this._EDGE=[-1,0,0,1,1,0,0,-1],this._EDGEANG=[-1,1,1,1,1,-1,-1,-1]},findEdge:function(t){var e,i,n,o=[];for(i=t.ycount;i>=-1;i--)for(e=-1;e<=t.xcount;e++)t.invalid(e,i)||(n=this.__same(t,e,i)).length>0&&o.push({x:e,y:i,list:n});return o},__same:function(t,e,i){for(var n,o,a=[],s=0;s<this._EDGE.length;s+=2)n=e+this._EDGE[s],o=i+this._EDGE[s+1],t.invalid(n,o)&&a.push(s/2+1);var c=a.length;if(c>1){var r,l=a[0];for(s=1;s<=c;s++)1!=(r=a[s%c]-l)&&-3!=r||a.push(14+l),l=a[s%c]}if(!t.invalid(e,i))for(s=0;s<this._EDGEANG.length;s+=2)n=e+this._EDGEANG[s],o=i+this._EDGEANG[s+1],t.invalid(n,o)&&(t.invalid(n-this._EDGEANG[s],o)||t.invalid(n,o-this._EDGEANG[s+1])||a.push(s/2+5));return a},show:function(t,e){var i,n,o,a,s=e.width,c=e.height,r=s/2,l=c/2,h=this.findEdge(t);for(this.node.removeAllChildren(),n=0;n<h.length;n++){i=h[n];for(var u=0;u<i.list.length;u++)this.__crFrame("borders_"+i.list[u],i.x*s+r,i.y*c+l)}for(o=0;o<t.xcount;o++)for(a=0;a<t.ycount;a++)t.invalid(o,a)&&this.__crFrame("borders_9",o*s+r,a*c+l)},__crFrame:function(t,e,i){var n=new cc.Node;return n.addComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame(t),n.parent=this.node,n.setPosition(e,i),n}}),cc._RF.pop()},{}],UIMapEdge:[function(t,e,i){cc._RF.push(e,"5dde8r/ThtGY4zxNNaLI4GC","UIMapEdge");var n=t("MathUtils"),o=t("GameCommon"),a=cc.Class({"extends":cc.Component,properties:{atlas:{type:cc.SpriteAtlas,"default":null}},statics:{EDGE:[-1,0,0,1,1,0,0,-1],EDGEANG:[-1,1,1,1,1,-1,-1,-1],_ID_:{12:{id:21,r:0},23:{id:21,r:1},34:{id:21,r:2},14:{id:21,r:3},123:{id:22,r:0},234:{id:22,r:1},134:{id:22,r:2},124:{id:22,r:3},1234:{id:23,r:0}}},onLoad:function(){for(var t in a._ID_)a._ID_[t].key=t},check:function(){for(var t in cc.log("UIMapEdge check 1 "+this.node.active),cc.log("UIMapEdge check 2 "+this.node.childrenCount),cc.log("UIMapEdge check 3 "+this.node.position),cc.log("UIMapEdge check 4 "+this.node.parent.name),this.node.children)cc.log("UIMapEdge check child name "+this.node.children[t].name),cc.log("UIMapEdge check child pos "+this.node.children[t].position)},findEdge:function(t){var e,i,n,o=[];for(i=t.ycount;i>=-1;i--)for(e=-1;e<=t.xcount;e++)t.invalid(e,i)||(n=this.__samev2(t,e,i)).length>0&&o.push({x:e,y:i,list:n});return o},__samev2:function(t,e,i){for(var n,o,s=[],c=void 0,r=void 0,l=0;l<a.EDGE.length;l+=2)n=e+a.EDGE[l],o=i+a.EDGE[l+1],t.invalid(n,o)&&(r={idata:l/2+1},s.push(r),6==l&&(c=!0));var h=s.length,u=h>1;if(u){s.sort(function(t,e){return t.idata-e.idata});var d="";for(l=0;l<h;l++)d+=s[l].idata;(u=void 0!=a._ID_[d])&&(s=[a._ID_[d]])}if(!u)for(l=0;l<h;l++)r={id:1,r:s[l].idata-1,key:1},s[l]=r,this.__offsetOrChg1(r);if(!t.invalid(e,i))for(l=0;l<a.EDGEANG.length;l+=2)n=e+a.EDGEANG[l],o=i+a.EDGEANG[l+1],t.invalid(n,o)&&(t.invalid(n-a.EDGEANG[l],o)||t.invalid(n,o-a.EDGEANG[l+1])||(r={id:5,r:l/2,key:5},s.push(r),this.__offsetOrChg5(r)));return c&&this.__offsetOrChg(s),s},__getKey:function(t,e,i){return null==i?t+"_"+e:t+"_"+e+"_"+i},__getOutObj:function(t,e,i){var n=this.__getKey(t,e),o=i[n];return o||(i[n]=o={}),o.offw=0|o.offw,o.offh=0|o.offh,o.offx=0|o.offx,o.offy=0|o.offy,o},__offsetOrChg1:function(t){0==t.r||2==t.r?(t.offh=2*o.EDGE_WIDTH,t.offy=o.EDGE_POS):3==t.r&&(t.offy=2*o.EDGE_POS)},__offsetOrChg5:function(t){var e=o.EDGE_CIRCLEANGLE;switch(isNaN(t.offx)&&(t.offx=0),isNaN(t.offy)&&(t.offy=0),2!=t.r&&3!=t.r||(t.offy=2*o.EDGE_POS),t.r){case 0:t.offx-=e,t.offy+=e;break;case 1:t.offx+=e,t.offy+=e;break;case 2:t.offx+=e,t.offy-=e;break;case 3:t.offx-=e,t.offy-=e}},__offsetOrChg:function(t){for(var e=void 0,i=0;i<t.length;i++)if(1!=(e=t[i]).id&&5!=e.id)switch(e.key){case "234":case "124":e.offw=2*-o.EDGE_WIDTH,e.offy=o.EDGE_POS;break;case "1234":e.offh=2*-o.EDGE_WIDTH,e.offy=o.EDGE_POS;break;default:e.offy=2*o.EDGE_POS}},__same:function(t,e,i){for(var n,o,s=[],c=0;c<a.EDGE.length;c+=2)n=e+a.EDGE[c],o=i+a.EDGE[c+1],t.invalid(n,o)&&s.push(c/2+1);var r=s.length;if(r>1){var l,h=s[0];for(c=1;c<=r;c++)1!=(l=s[c%r]-h)&&-3!=l||s.push(14+h),h=s[c%r]}if(!t.invalid(e,i))for(c=0;c<a.EDGEANG.length;c+=2)n=e+a.EDGEANG[c],o=i+a.EDGEANG[c+1],t.invalid(n,o)&&(t.invalid(n-a.EDGEANG[c],o)||t.invalid(n,o-a.EDGEANG[c+1])||s.push(c/2+5));return s},show:function(t,e){var i,a,s,c=e.width,r=e.height,l=c/2,h=r/2,u=this.findEdge(t);this.node.removeAllChildren(!0);var d=0,f=0,g=0,p=0,_=void 0;this.borderList=[];var m,v,E=n.randInt(0,100)>50;for(E?this.cx=this.cy=!1:(this.cx=n.randInt(0,100)>50,this.cy=n.randInt(0,100)>50),this.pos=cc.p(0,0),this.isInit=!0,a=0;a<u.length;a++){i=u[a];for(var y=0;y<i.list.length;y++){this.setPos(i.x,i.y),s=i.list[y];var b=i[this.__getKey(s.key,s.r)];d=i.x*c+l+(0|s.offx)+(b?0|b.offx:0),f=i.y*r+h+(0|s.offy)+(b?0|b.offy:0),g=(0|s.offw)+(b?0|b.offw:0),p=(0|s.offh)+(b?0|b.offh:0),_=this.__crFrame("borders_"+s.id,d,f,90*s.r,g,p),this.addList(_,i.x,i.y)}}for(m=0;m<t.xcount;m++)for(v=0;v<t.ycount;v++)if(t.invalid(m,v)){this.setPos(m,v);var I=0,T=0;t.invalid(m,v+1)||(I=2*o.EDGE_WIDTH,T=o.EDGE_POS),_=this.__crFrame("borders_9",m*c+l,v*r+h+T,void 0,0,I),this.addList(_,m,v)}E&&(this.pos.x=parseInt(this.pos.x/2),this.pos.y=parseInt(this.pos.y/2))},setPos:function(t,e){this.pos.x=(this.cx?this.pos.x>t:this.pos.x<t)||this.isInit?t:this.pos.x,this.pos.y=(this.cy?this.pos.y>e:this.pos.y<e)||this.isInit?e:this.pos.y,this.isInit=!1},addList:function(t,e,i){this.borderList.push({node:t,grid:cc.p(e,i)})},__crFrame:function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=new cc.Node,r=c.addComponent(cc.Sprite);return r.spriteFrame=this.atlas.getSpriteFrame(t),r.type=cc.Sprite.Type.SLICED,c.zIndex="borders_5"==t?1:0,c.parent=this.node,c.width=o.CUBE_SIZE+(0|a),c.height=o.CUBE_SIZE+(0|s),c.setPosition(e,i),c.rotation=n,c},disappear:function(e){var i=e/12,o=t("UIGameV2").instance();for(var a in this.borderList){var s=this.borderList[a];if(s){var c=n.distance(this.pos,s.grid)*i;s.node.runAction(cc.sequence([cc.delayTime(c),cc.fadeOut(.1)])),o.gameMap.disappear(s.grid,c)}}}});cc._RF.pop()},{GameCommon:"GameCommon",MathUtils:"MathUtils",UIGameV2:"UIGameV2"}],UIMartlight:[function(t,e,i){cc._RF.push(e,"cf530CjROlL3qX6dM/Jdp7r","UIMartlight");var n=t("GameCommon"),o=cc.Class({"extends":t("UIBlock"),properties:{count:1,state:0},statics:{IDLE:0,CANT:1,ANIMATIONLIST:["Bulb_off_light","Bulb_on_light"]},start:function(){},onLoad:function(){},init:function(t){this.anim||(this.anim=this.getComponent(cc.Animation))},setData:function(t,e,i,o){e&&(this.play(t.count),this.sound(0==t.count?0:1),1==t.count&&this.createEffect()),i&&i.call(o,n.CUBE_SETPARAM_ALL),t.count&&this.play(t.count)},play:function(t){var e=o.ANIMATIONLIST[t];e||(e=o.ANIMATIONLIST[0]),this.anim.play(e)}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIMessageBox:[function(t,e,i){cc._RF.push(e,"41ff8M1hgRHKpo/Re0/6SMz","UIMessageBox");var n=t("GameTools");cc.Class({"extends":t("UIDialog"),properties:{},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){},showed:function(t){void 0==t.t&&(t.t=3),void 0==t.i&&(t.i=""),n.textp(this.content,"label",t.s,[t.i]),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){var e=t.fo;e&&("function"==typeof e?e():n.runf(e)),t.fo=void 0,this.closeDialog()},t.t-.25)}}),cc._RF.pop()},{GameTools:"GameTools",UIDialog:"UIDialog"}],UIMole:[function(t,e,i){cc._RF.push(e,"2ae27SoDgJKca/aqvZ0vo8k","UIMole");var n=t("GameCommon"),o=t("N7Resource"),a=t("N7UIEffectLayer"),s=cc.Class({"extends":t("UIBlock"),properties:{dog:{type:cc.Node,"default":null},altas:{type:cc.SpriteAtlas,"default":null},flyPrefab:{type:cc.Prefab,"default":null}},statics:{amplay:["Helicopter_idle","Helicopter_run"]},onLoad:function(){},start:function(){this.playAni(0)},init:function(t){},getGoal:function(){return{node:o.createPrefab(this.flyPrefab,"goal_base"),pos:a.getPos(this.dog),isDown:!1}},setData:function(t,e,i,o,a){e?(this.sound(0),this.playAni(t.copter),i.call(o,n.CUBE_SETPARAM_ALL)):(i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.copter&&this.playAni(t.copter))},playAni:function(t){var e=s.amplay[t];null==e&&(e=s.amplay[0]),this.dog.getComponent(cc.Animation).play(e)},destroyMe:function(t,e,i){this.destroyCall={callFunc:e,caller:i,params:t},this.playing||this.playEndDestroyAnim()},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i)}}});cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock"}],UIMoveBomb:[function(t,e,i){cc._RF.push(e,"f55bcEht9dI74gO15Pn9g8G","UIMoveBomb"),t("N7Sound");var n=t("GameCommon"),o=(t("N7Resource"),cc.Class({"extends":t("UIBlock"),properties:{labelMove:{type:cc.Label,"default":null},cubes:[cc.Sprite],cubeColors:[cc.Color],index:{"default":0,notify:function(t){this.setCubeColor(this.index)}},move:{"default":0,notify:function(t){this.labelMove.string=this.move}}},statics:{destory_effect:[5576,5577,5578,5579,5580,5581,5054]},onLoad:function(){},init:function(t){this.index=1*t},setData:function(t,e,i,o){var a=1*t.movesLeftToLost;this.move=a,a<1||a<=5&&this.sound(),i&&i.call(o,n.CUBE_SETPARAM_ALL)},setCubeColor:function(t){if(!(t<0||t>=this.cubeColors.length||t>=this.cubes.length))for(var e in this.labelMove.node.color=this.cubeColors[t],this.cubes)this.cubes[e].node.active=1*e===t},destroyMe:function(t,e,i){var n={};this.move<=0&&(n.playeff=o.destory_effect[this.index]),e&&e.call(i,n)}}));cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7Sound:"N7Sound",UIBlock:"UIBlock"}],UIMsgBox:[function(t,e,i){cc._RF.push(e,"52fbeOCgZxLF6lJWNmy+TqU","UIMsgBox");var n=t("GameTools"),o=(t("JsonMetaCache"),t("UIDialog"));cc.Class({"extends":o,properties:{},onLoad:function(){this._super(),n.btnc(this.content,"btn_ok",n.makef(this.colse,this))},showed:function(t){t.id&&(t.msg=n.i18ns(t.id,t.pars)),this.fo=t.fo,this.btn=t.btn,n.cmpt(this.content,"message",cc.RichText).string=t.msg},flyend:function(){this.closeDialog_notfly()},colse:function(){this.closeDialog_notfly(),this.fo&&this.fo(),this.fo=null,this.btn=!1}}),cc._RF.pop()},{GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",UIDialog:"UIDialog"}],UIMussel:[function(t,e,i){cc._RF.push(e,"45667b23RRBDpgkBgAq0Q13","UIMussel");var n=t("GameCommon"),o=cc.Class({"extends":t("UIBlock"),properties:{dog:{type:cc.Node,"default":null},altas:{type:cc.SpriteAtlas,"default":null}},statics:{amplay:["shell","shell_1"]},onLoad:function(){},start:function(){},init:function(t){this.index=-1},setData:function(t,e,i,o,a){e?(this.playAni(2-t.mussel),i.call(o,n.CUBE_SETPARAM_ALL)):(i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.mussel&&!isNaN(this.index)&&this.playAni(2-t.mussel))},playAni:function(t){if(this.index!=t){this.index=t;var e=o.amplay[this.index];null==e&&(this.index=0,e=o.amplay[0]),this.dog.getComponent(cc.Sprite).spriteFrame=this.altas.getSpriteFrame(e)}},destroyMe:function(t,e,i){this.destroyCall={callFunc:e,caller:i,params:t},this.playing||this.playEndDestroyAnim()},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i)}}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIMyClubMb:[function(t,e,i){cc._RF.push(e,"02d0evt9dNOZIFxRLSgHiOP","UIMyClubMb"),t("n7");var n=t("GameTools"),o=t("GameEvent"),a=t("GuildLogic"),s=t("GameCommon"),c=t("StringUtils"),r=t("UserLogic");cc.Class({"extends":cc.Component,properties:{content:{"default":null,type:cc.Node},membern:{"default":null,type:cc.Node},selfn:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){o.on(o.EVENT_GUILD_MEMEBER,function(t){this.refrush(t.getUserData())},this),o.on(o.EVENT_GUILD,function(t){var e=t.getUserData();"quit"==e.oper?this.content.removeAllChildren(!0):"init"!=e.oper&&"help"!=e.oper||this.__showed()},this),this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox")},refrush:function(t){switch(t.oper){case "update":case "del":this.menu.active=!1,this.__showed()}},__showed:function(){this.selfid=r.pid(),this.content.removeAllChildren(!0),this.rankMember()},rankMember:function(){var t=a.instance().members;for(var e in t)if(t[e].id==this.selfid){t[e].l=r.geti("lev");break}var i=Object.keys(t).sort(function(e,i){return t[i].l-t[e].l}),n=[],o=[],s=[],c=null,l=0;for(var h in t)(c=t[i[l++]]).a==a.PWR_CAPTAIN?s.push(c):c.a==a.PWR_VICEC?o.push(c):n.push(c),c.r=l,c.id==this.selfid&&this.initMemberList(this.self,c,l);this.__list=s.concat(o).concat(n),this.indexK=0,this.istcend=!1},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];t?(this.popUI(t),this.indexK++):this.istcend=!0}},popUI:function(t){var e=this.popMemberUI(t.id);this.initMemberList(e,t)},initMemberList:function(t,e){t.tag=1*e.id;var i=1*e.r,o=n.chd(t,"ranking");n.sh(o,"1",1==i),n.sh(o,"2",2==i),n.sh(o,"3",3==i),n.sh(o,"num",i>3),i>3&&n.text(o,"num",i);var r=n.chd(t,"name");n.text(r,"nickname",c.cut(e.n,s.NAME_MAXS_LEN)),n.sh(r,"1",e.a==a.PWR_CAPTAIN),n.sh(r,"2",e.a==a.PWR_VICEC);var l=e.aid;n.text(t,"help/num",l||0),n.text(t,"level/num",e.l)},popMemberUI:function(t){var e=this.selfid==t?this.selfn:this.membern,i=cc.instantiate(e);return i.parent=this.content,n.btnc(i,"bk",n.makef(this.openMenu,this,i)),i},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"member"})},onDestroy:function(){o.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],UINest:[function(t,e,i){cc._RF.push(e,"e7916MKsNhK8490rf7mAvyZ","UINest");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{light:{type:cc.Node,"default":null}},statics:{},onLoad:function(){},start:function(){},setData:function(t,e,i,o,a){e?i.call(o,n.CUBE_SETPARAM_ALL):i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.light&&this.light&&(this.light.active=!!t.light)}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIOption:[function(t,e,i){cc._RF.push(e,"f15beCanABB1JwNnMB9o+eT","UIOption");var n=t("GameTools"),o=t("GameEvent"),a=t("N7UIManager"),s=t("n7");cc.Class({"extends":t("UIDialog"),properties:{btn_confirm:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_confirm,n.makef(this.isConfirm,this),1),this.__inputd=n.cmpt(this.content,"editbox",cc.EditBox),n.editPchd(this.__inputd,"option.input")},showed:function(){},isConfirm:function(){this.closeDialog();var e=this.__inputd.string;if(e){var i=parseInt(e);if(i>0?e="lev\x3d"+e:0==i&&a.loadScene("preview"),"logout"==e)return t("N7UIManager").loadScene("debug_wait_h5"),void(t("N7UIManager")._FLOADING_=void 0);if("ad"!=e)if("lad"!=e)if("pay"!=e){if(e.indexOf(".")<1){var n=e.split("\x3d");return t("UserLogic").set(n[0],1*n[1]),void o.EVENT_UDATA_CHG(n[0])}var c=e.split("."),r=c[1].split("\x3d");switch(c[0]){case "item":t("ItemsLogic").add(r[0],1*r[1],"GMOPER");break;case "workdata":t("WorkData").set(1*r[0],r[1]);break;case "chest1":t("ChestRandLogic").test1(1*r[0],1*r[1]);break;case "chest2":t("ChestRandLogic").test2(1*r[0],1*r[1]);break;case "testDelayed":t("SignLogic").testDelayed(1*r[0]);break;case "testActivity":t("ActivityLogic").testActivity(r[0]);break;case "levelup":t("UserLogic").levelup();break;case "share":t("ShareLogic").checkShare(c[1],null,null,null,!0);break;case "testPay":t("SdkIns").instance().testPay(r[0]);break;case "testShare":t("SdkIns").instance().__sdk.tmpShare({pid:r[0],templateId:r[1]})}}else t("UserLogic").pay("shop_cp_gold_1",function(){});else t("SdkIns").instance().scoreUpdate({});else t("SdkIns").instance().ad(0,function(t){s.log("ad:"+JSON.stringify(t))})}}}),cc._RF.pop()},{ActivityLogic:"ActivityLogic",ChestRandLogic:"ChestRandLogic",GameEvent:"GameEvent",GameTools:"GameTools",ItemsLogic:"ItemsLogic",N7UIManager:"N7UIManager",SdkIns:"SdkIns",ShareLogic:"ShareLogic",SignLogic:"SignLogic",UIDialog:"UIDialog",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],UIPackCube:[function(t,e,i){cc._RF.push(e,"49c2dlwN/9OJJszYDWaPVuF","UIPackCube");var n=t("UIGameCube"),o=cc.Class({"extends":cc.Component,properties:{},statics:{createPack:function(t,e){var i=(new cc.Node).addComponent(o);return i.position=t,i.worldPosition=e,i}},put:function(t,e){this.list||(this.list={}),this.list[t]=e,e.removeFromParent(!1),e.parent=this.node,e.position=cc.p(0,0)},unpack:function(t){var e=this.list;for(var i in this.list=null,e){var o=e[i];o.removeFromParent(!1),o.parent=t,o.getComponent(n).setPosition(this.position,"unpack")}}});cc._RF.pop()},{UIGameCube:"UIGameCube"}],UIPageBg:[function(t,e,i){cc._RF.push(e,"6c388OPqopFsZyR1jlEnFLu","UIPageBg"),cc.Class({"extends":t("N7SpriteShader"),properties:{},start:function(){this.needBlur=!1,this.setBlur(!1)},setBlur:function(t){this.needBlur!=t&&(this.needBlur=t,this.params={bluramount:t?.03:0},this.setShader(1))}}),cc._RF.pop()},{N7SpriteShader:"N7SpriteShader"}],UIPageContentSize:[function(t,e,i){cc._RF.push(e,"1127aZVsRJCo54BTcdO0D6D","UIPageContentSize"),t("GameEvent"),cc.Class({"extends":cc.Component,properties:{contents:[cc.Node]},onLoad:function(){},start:function(){this.fit()},initContent:function(){if(!this.contentSizeOdds){this.contentSizeOdds=[];for(var t=0;t<this.contents.length;t++){var e=this.contents[t].height/this.node.height;this.contentSizeOdds.push(e)}}},fit:function(){this.initContent();for(var t=void 0,e=this.node.height,i=0;i<this.contents.length;i++)(t=this.contents[i])&&(t.height=e*this.contentSizeOdds[i])}}),cc._RF.pop()},{GameEvent:"GameEvent"}],UIPage:[function(t,e,i){cc._RF.push(e,"5f47br0czxDrJAeI76VHXH+","UIPage");var n=t("n7"),o=t("GameEvent"),a=t("TDLog"),s=t("GameTools"),c=t("N7FitScreen"),r=t("N7Resource"),l=t("UIPageContentSize");cc.Class({"extends":cc.Component,properties:{background:{type:cc.Node,"default":null},content:{type:cc.Node,"default":null},progress:{type:t("N7CircleBar"),"default":null}},onLoad:function(){o.on(o.EVENT_CANVAS_RESIZEEND,function(t){this.fit(t.getUserData())},this),this.init()},onDestroy:function(){o.off(this)},init:function(){this.progress&&(this.progress.setCallFunc(function(t,e,i){t>=i&&1==e&&this.scheduleOnce(this.setDialog,.1)},this),this.progress.init()),this.center=s.chd(this.content,"center"),this.center&&(this.centerHeightOdds=this.center.height/this.content.height)},playLoad:function(){this.progress&&(this.progress.progress(0),this.progress.progress(.9,1))},setCenter:function(t,e,i,n){this.showPage=!0,this.callFunc={func:i,caller:n},this.isLoadPage?this.callf(this.dialog):t&&(this.playLoad(),a.Event("dlg_"+t,{show:1}),this.dialogName=t,this.scheduleOnce(this.loadPage,e))},unsetCenter:function(){this.showPage=!1,this.callFunc=null,this.unschedule(this.loadPage)},loadPage:function(){this.isLoadPage=!0,r.loadDialog(this.dialogName,function(e){e.scale=this.center.scale,this.width=this.center.width,this.height=this.center.height,e.y=this.center.y,this.dialog=e,n.isDebug&&(new (t("N7CheckRes"))).start(e);var i=this.progress.time;this.progress.progress(1,(i>0?i:0)+.1)},this)},setDialog:function(){if(this.dialog){var t=this.dialog;this.progress=null,this.center.removeFromParent(),t.parent=this.content,this.center=t;var e=this.dialog.getComponent(l);e&&(e.initContent(),t.width=this.width,t.height=this.height,this.scheduleOnce(function(){e.fit()},0)),this.callf(t)}},callf:function(t){this.callFunc&&(this.callFunc.func.call(this.callFunc.caller,t),this.callFunc=null)},start:function(){this.init(),this.fit()},fit:function(){var t=c.instance(),e=cc.Canvas.instance.node;if(this.node.width=e.width,this.node.height=e.height,this.background&&(this.background.scale=t.backgroundScale/t.content.scale,this.backgroundOldY||(this.backgroundOldY=this.background.y),this.background.y=this.backgroundOldY+(t.isPhoneX?-t.content.y:0)),this.content&&(this.content.scale=t.content.scale,this.content.width=t.content.width,this.content.height=t.content.height,this.content.y=t.content.y),this.center){this.center.width=this.content.width,this.center.height=this.content.height*this.centerHeightOdds;var i=this.center.getComponent(l);i&&i.fit()}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7CheckRes:"N7CheckRes",N7CircleBar:"N7CircleBar",N7FitScreen:"N7FitScreen",N7Resource:"N7Resource",TDLog:"TDLog",UIPageContentSize:"UIPageContentSize",n7:"n7"}],UIPenguin:[function(t,e,i){cc._RF.push(e,"d5667LPnONJ4bbBXk5dj5jq","UIPenguin");var n=t("GameCommon"),o=cc.Class({"extends":t("UIBlock"),properties:{count:1,state:0},statics:{IDLE:0,CANT:1},start:function(){},onLoad:function(){this.scheduleOnce(function(){this.play(this.state)},0)},init:function(t){this.count=1*t,this.play(o.IDLE)},setData:function(t,e,i,a){this.count=1*t.count,this.play(o.IDLE),i&&i.call(a,n.CUBE_SETPARAM_ALL)},play:function(t){this.count,o.IDLE,this.state=t},playEnd:function(){this.state==o.CANT&&this.play(o.IDLE)}});cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIPinWheel:[function(t,e,i){cc._RF.push(e,"2e9e3YC0bxODIwjGewB1Gby","UIPinWheel");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{animation:{type:cc.Animation,"default":null},pin:{type:cc.Node,"default":null},atlas:{type:cc.SpriteAtlas,"default":null},pinCount:4},onLoad:function(){},test:function(){this.scheduleOnce(function(){this.addColor(2)},1),this.scheduleOnce(function(){this.addColor(4)},4)},initUI:function(){if(this.animation||(this.animation=this.node.getComponent(cc.Animation),this.animation.on("finished",this.playEnd,this)),!this._pinList){this._pinList=[];for(var t=1;t<=6;t++){var e=this.pin.getChildByName("fan"+t);this._pinList.push(e.getComponent(cc.Sprite))}}},init:function(t){this.pinCount=1*t,this.count=0,this.initUI(),this.setPinCount(this.pinCount)},setPinCount:function(t){for(var e=360/t,i=0,o=0;o<t;o++){var a=this._pinList[o];a.node.rotation=i,i+=e,a.node.active=!0,a.spriteFrame=this.atlas.getSpriteFrame("fan_"+n.colors_def[o])}for(var s=t,c=this._pinList.length;s<c;s++)this._pinList[s].node.active=!1},setData:function(t,e,i,o){if(e)this.callFunc=i,this.caller=o,this.addColor(t.color),this.callFunc.call(this.caller,n.CUBE_SETPARAM_NEXT);else if(i&&i.call(o,n.CUBE_SETPARAM_ALL),t.colors)for(var a=0;a<this.pinCount;a++)-1==t.colors[a]&&(this._pinList[a].spriteFrame=this.atlas.getSpriteFrame("fan_white"))},playEnd:function(){this.playing=!1,this.callFunc&&(this.callFunc.call(this.caller,n.CUBE_SETPARAM_END|n.CUBE_SETPARAM_START),this.callFunc=this.caller=null),this.playEndDestroyAnim()},addColor:function(t){this.count++,this.animation.play("anim_pinwheel_turn"),this._pinList[t].spriteFrame=this.atlas.getSpriteFrame("fan_white"),this.playing=!0,this.sound(0)},destroyMe:function(t,e,i){this.destroyCall={callFunc:e,caller:i,params:t},this.sound(1),this.playing||this.playEndDestroyAnim()},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i)}}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIPopBase:[function(t,e,i){cc._RF.push(e,"1e98c++zCVMcJeHwb5zpwCI","UIPopBase");var n=t("GameEvent");cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null}},onLoad:function(){this.initUI()},onDestroy:function(){n.off(this)},initUI:function(){this.content=this.content||this.node,this.anim||(this.anim=this.node.parent.getComponent(cc.Animation),this.anim&&this.anim.on("finished",this.callPlayEnd,this))},setCallPlayEnd:function(t,e){this.callEnd={callFunc:t,caller:e}},callPlayEnd:function(t){if(this.callEnd){var e=this.callEnd.callFunc,i=this.callEnd.caller;this.callEnd=null,e.call(i,t)}},initEvent:function(){n.on(n.EVENT_SYSTEM_TOUCH,function(t){if(this.isShowed){var e=t.getUserData();this.checkIsMe(e)||this.close()}},this)},checkIsMe:function(t){return this.content._hitTest(t.getLocation())},show:function(t,e){this.onwer=t,this.node.active=!0,this.initEvent(),this.isShowed=!0,this.ani=e&&e.ani},close:function(){n.off(this),this.ani?(this.anim.play().wrapMode=cc.WrapMode.Reverse,this.setCallPlayEnd(this.closeBox,this)):this.closeBox()},closeBox:function(){this.onwer=null,this.node.active=!1}}),cc._RF.pop()},{GameEvent:"GameEvent"}],UIPreloadData:[function(t,e,i){cc._RF.push(e,"e5164oB34BFyK9lMb+XD05m","UIPreloadData"),cc.Class({name:"UIPreloadData",properties:{resId:0,count:1}}),cc._RF.pop()},{}],UIPump:[function(t,e,i){cc._RF.push(e,"30e17iG2E5CeYQqkQuSkXxo","UIPump");var n=t("GameCommon"),o=t("N7UIEffectLayer"),a=t("N7Resource"),s=cc.Class({"extends":t("UICannonBase"),properties:{effect:{"default":null,type:cc.Prefab}},statics:{FLYTO_ENERGY_PARAMS:{scale1:.5,scale2:.3,p1:{offset:45},p2:{offset:-45},speed:.001,maxTime:.5}},onLoad:function(){this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this))},init:function(t){},fire:function(){this._super(),this.am.play(),this.shot()},shot:function(){var t=a.createPrefab(this.effect,"effect_base");o.addNodeInCube(this.tile,t,function(t){t.playEffect()},this),this._super(s.FLYTO_ENERGY_PARAMS),this.sound()},setData:function(t,e,i,o,a){this._super(t,e,i,o,a),i&&i.call(o,n.CUBE_SETPARAM_ALL)},checkFire:function(t){return t.cmd==n.com_create||t.cmd==n.com_chgto},playEnd:function(){}});cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UICannonBase:"UICannonBase"}],UIPuzzle:[function(t,e,i){cc._RF.push(e,"e87375QqlJG1IPZWDY5NN1d","UIPuzzle");var n=t("StringUtils"),o=t("AtlasAnimation");cc.Class({"extends":t("UIBlock"),properties:{_endFrame:0,_hasIdleCount:1,_color:null,_idle:0,_idleCount:1},onLoad:function(){},init:function(t,e,i,n){this._color=e,this._idleCount=i,this._endFrame=n,this.anim||(this.anim=this.getComponent(o)),this.playPuzzle()},playPuzzle:function(){++this._idle>=this._idleCount&&(this._idle=0);var t=n.formatStr("{0}_",this._color);this.anim.setAnimation(this.anim.atlas,t,0,15,this.anim.fill),this.anim.play(this.anim.duration,0)}}),cc._RF.pop()},{AtlasAnimation:"AtlasAnimation",StringUtils:"StringUtils",UIBlock:"UIBlock"}],UIRankList:[function(t,e,i){cc._RF.push(e,"a7e66BLKo5NW4Bt3JIzxPaf","UIRankList");var n=t("GameTools"),o=t("SdkIns"),a=t("UserLogic"),s=t("StringUtils"),c=t("GameCommon"),r=cc.Class({"extends":t("UIDialog"),properties:{self:{"default":null,type:cc.Node},obj1:{"default":null,type:cc.Node},obj2:{"default":null,type:cc.Node},layoutn:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent(),this.__showed2()},__initEvent:function(){this.layoutn.parent.on("scroll-to-bottom",function(){this.nextpage()},this);var t=r.GET();t.tm<n.cutm()?r.DEFAULT():(t.rank_index=0,t.isend=0)},__showed2:function(){this.selfid=a.pid(),this.nextpage()},nextpage:function(){var t=r.GET();t.arr.length>20*t.rank_index?this.__initList():this.getRankData()},getRankData:function(){if(!this.reading){var t=r.GET();if(!t.isend){t.tm=n.cutm()+6E5,this.reading=!0;var e=this;a.getRankList(t.rank_index,function(i){if(e.reading=!1,i.length<=0)t.isend=!0;else{for(var n in t.rank_index=i.rank_index,delete i.rank_index,delete i.length,i)t.arr.push(i[n]);e.__initList()}})}}},__initList:function(){var t=r.GET(),e=t.arr;if(!(e.length<=0)){t.rank_index=1*t.rank_index+1;var i=t.rank_index;this.__list=e,this.indexK=20*(i-1),this.nextIndex=this.indexK+20,this.istcend=!1}},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];!t||this.indexK>=this.nextIndex?this.istcend=!0:(this.indexK++,this.initPopUI(t))}},initPopUI:function(t){if(t.pid){var e=this.popPlayerUI(t.pid),i=n.chd(e,"ranking"),a=this.indexK;n.sh(i,"1",1==a),n.sh(i,"2",2==a),n.sh(i,"3",3==a),n.sh(i,"num",a>3),a>3&&n.text(i,"num",a),n.text(e,"name",s.cut(t.n,c.NAME_MAXS_LEN)),n.text(e,"level/num",t.l),o.instance().icon(t.i,function(t){n.cmpt(e,"icon",cc.Sprite).spriteFrame=t})}},popPlayerUI:function(t){var e=this.selfid==t?this.obj2:this.obj1,i=cc.instantiate(e);return i.parent=this.layoutn,i}});r.DEFAULT=function(){return r.RANKDATA={rank_index:0,arr:[],tm:0,isend:0},r.RANKDATA},r.GET=function(){return r.RANKDATA?r.RANKDATA:r.DEFAULT()},cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",SdkIns:"SdkIns",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIRankingList_friend:[function(t,e,i){cc._RF.push(e,"fcde2Z1W+xDHJeWZCZQBSta","UIRankingList_friend"),t("n7");var n=t("GameTools"),o=t("GameEvent");t("GuildLogic"),t("GameCommon"),t("JsonMetaCache"),cc.Class({"extends":cc.Component,properties:{insobj:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},content2:{"default":null,type:cc.Node},own_show:{"default":null,type:cc.Node}},start:function(){this.node.own={id:65},this.node.YES=!1;var t=cc.instantiate(this.own_show);t.parent=this.content2,n.sh(this.own_show,"ranking"),this.rankMember([{id:8,lev:100,trophy:35,aid:10,name:"OO"},{id:65,lev:32,trophy:12,aid:8,name:"QQ"},{id:35,lev:56,trophy:10,aid:9,name:"PP"},{id:100,lev:80,trophy:26,aid:4,name:"GG"},{id:21,lev:80,trophy:30,aid:10,name:"SS"}],t)},__init:function(t,e,i,o){i<=2?(i++,n.sh(t,"medal_"+i,!0)):n.sh(t,"num",!0).getComponent("AtlasText").setText(++i),n.text(t,"lab_name",e.name),n.text(t,"info_bk/lab_golds",e.lev),this.node.YES||this.OWN(e,--i,o)},rankMember:function(t,e){for(var i=t,n=0;n<i.length-1;n++)for(var o=0;o<i.length-1-n;o++)i[o].lev<i[o+1].lev&&this.Assignment(i,o),i[o].lev==i[o+1].lev&&(i[o].trophy<i[o+1].trophy&&this.Assignment(i,o),i[o].trophy==i[o+1].trophy&&i[o].aid<i[o+1].aid&&this.Assignment(i,o));var a=void 0;for(n=0;n<i.length;n++)(a=cc.instantiate(this.insobj)).parent=this.content,this.__init(a,i[n],n,e)},Assignment:function(t,e){var i;i=t[e],t[e]=t[e+1],t[e+1]=i},OWN:function(t,e,i){var o=n.chd(i,"ranking");n.sh(i,"ranking",!0),e>=100?(n.sh(o,"on"),n.sh(o,"off",!0)):t.id==this.node.own.id&&(this.node.YES=!0,n.text(o,"on/lab_name",t.name),n.textp(o,"on/lab","club.lv"),n.text(o,"on/info_bk/lab_golds",t.lev),e<=2?(e++,n.sh(o,"on/medal_"+e,!0)):n.sh(o,"on/num",!0).getComponent("AtlasText").setText(++e))},onDestroy:function(){o.off(this)}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",JsonMetaCache:"JsonMetaCache",n7:"n7"}],UIRankingList_guild:[function(t,e,i){cc._RF.push(e,"35ca3yOmhRFG4xUNmNYn3LL","UIRankingList_guild"),t("n7");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("StringUtils"),c=t("GameCommon"),r=t("GuildLogic"),l=cc.Class({"extends":cc.Component,properties:{insobj:{"default":null,type:cc.Node},insobj1:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.showed()},__initEvent:function(){o.on(o.EVENT_SHOW_GUILD_RANK,function(){l.GET().arr.length<=0&&(this.content.removeAllChildren(!0),this.showed())},this),o.on(o.EVENT_GUILD,function(t){var e=t.getUserData();"init"!=e.oper&&"quit"!=e.oper&&"mod"!=e.oper||(this.content.removeAllChildren(!0),l.DEFAULT(),this.showed())},this),o.on(o.EVENT_GUILD_MESSAGE,function(t){var e=t.getUserData();"update"!=e.oper&&"del"!=e.oper||e.msg.type!=r.MSGTP_HELP||l.DEFAULT()},this),this.node.on("scroll-to-bottom",function(){this.nextpage()},this),this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox");var t=l.GET();t.tm<n.cutm()?l.DEFAULT():(t.rank_index=0,t.isend=0)},showed:function(){this.initClubInfo(),this.nextpage()},nextpage:function(){var t=l.GET();t.arr.length>20*t.rank_index?this.__initList():this.getRankData()},getRankData:function(){if(!this.reading){var t=l.GET();if(!t.isend){t.tm=n.cutm()+6E5,this.reading=!0;var e=this;r.rlst(t.rank_index,function(i){if(e.reading=!1,i.length<=0)t.isend=!0;else{for(var n in t.rank_index=i.rank_index,void 0!=i.myrank&&(t.myrank=i.myrank),delete i.rank_index,delete i.myrank,delete i.length,i)t.arr.push(i[n]);e.__initList()}})}}},__initList:function(){var t=l.GET(),e=t.arr;if(!(e.length<=0)){t.rank_index=1*t.rank_index+1;var i=t.rank_index;this.selfgid=a.geti("guiid"),1==i&&this.initSelfInfo(t.myrank),this.__list=e,this.indexK=20*(i-1),this.nextIndex=this.indexK+20,this.istcend=!1}},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];!t||this.indexK>=this.nextIndex?this.istcend=!0:(this.indexK++,this.initPopUI(t))}},initPopUI:function(t){if(t.gid){var e=this.popPlayerUI(t.gid),i=n.chd(e,"ranking"),o=this.indexK;n.sh(i,"1",1==o),n.sh(i,"2",2==o),n.sh(i,"3",3==o);var a=n.sh(i,"num",o>3);o>3&&a.getComponent("AtlasText").setText(o),n.text(e,"name",s.cut(t.gname,c.NAME_MAXS_LEN)),n.text(e,"help/num",t.exp),n.initBadge(e,t.gicon)}},popPlayerUI:function(t){var e=this.selfgid==t?this.insobj1:this.insobj,i=cc.instantiate(e);return i.parent=this.content,i.tag=1*t,n.btnc(i,"bk",n.makef(this.openMenu,this,i)),i},initSelfInfo:function(t){var e=isNaN(parseInt(t));e||(t+=1);var i=n.chd(this.self,"ranking");n.sh(i,"1",1==t),n.sh(i,"2",2==t),n.sh(i,"3",3==t);var o=n.sh(i,"num",t>3);t>3&&o.getComponent("AtlasText").setText(t),n.sh(i,"no",e)},initClubInfo:function(){var t=r.instance().guild;t||(t={gname:n.i18ns("no_club"),gicon:0,exp:0}),n.text(this.self,"name",s.cut(t.gname,c.NAME_MAXS_LEN)),n.text(this.self,"help/num",t.exp?t.exp:0),n.initBadge(this.self,t.gicon)},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"player"})},onDestroy:function(){o.off(this)}});l.DEFAULT=function(){return l.RANKDATA={rank_index:0,arr:[],tm:0,isend:0},l.RANKDATA},l.GET=function(){return l.RANKDATA?l.RANKDATA:l.DEFAULT()},cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],UIRankingList_palyer:[function(t,e,i){cc._RF.push(e,"83c29euqmpEsp5ApzU5ZFCo","UIRankingList_palyer"),t("n7");var n=t("GameTools"),o=t("GameEvent"),a=t("UserLogic"),s=t("StringUtils"),c=t("GameCommon"),r=t("GuildLogic"),l=cc.Class({"extends":cc.Component,properties:{insobj:{"default":null,type:cc.Node},insobj1:{"default":null,type:cc.Node},content:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.showed()},__initEvent:function(){o.on(o.EVENT_GUILD,function(t){var e=t.getUserData();"init"!=e.oper&&"mod"!=e.oper||this.initClubInfo(),"quit"==e.oper&&this.initClubInfo({gicon:0})},this),this.node.on("scroll-to-bottom",function(){this.nextpage()},this),this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox");var t=l.GET();t.tm<n.cutm()?l.DEFAULT():(t.rank_index=0,t.isend=0)},showed:function(){this.selfid=a.pid(),this.nextpage()},nextpage:function(){var t=l.GET();t.arr.length>20*t.rank_index?this.__initList():this.getRankData()},getRankData:function(){if(!this.reading){var t=l.GET();if(!t.isend){t.tm=n.cutm()+6E5,this.reading=!0;var e=this;a.getRankList(t.rank_index,function(i){if(e.reading=!1,i.length<=0)t.isend=!0;else{for(var n in t.rank_index=i.rank_index,void 0!=i.myrank&&(t.myrank=i.myrank),delete i.rank_index,delete i.myrank,delete i.length,i)t.arr.push(i[n]);e.__initList()}})}}},__initList:function(){var t=l.GET(),e=t.arr;if(!(e.length<=0)){t.rank_index=1*t.rank_index+1;var i=t.rank_index;1==i&&this.initSelfInfo(t.myrank),this.__list=e,this.indexK=20*(i-1),this.nextIndex=this.indexK+20,this.istcend=!1}},update:function(){if(!this.istcend&&this.__list){var t=this.__list[this.indexK];!t||this.indexK>=this.nextIndex?this.istcend=!0:(this.indexK++,this.initPopUI(t))}},initPopUI:function(t){if(t.pid){var e=this.popPlayerUI(t.pid),i=n.chd(e,"ranking"),o=this.indexK;n.sh(i,"1",1==o),n.sh(i,"2",2==o),n.sh(i,"3",3==o);var a=n.sh(i,"num",o>3);o>3&&a.getComponent("AtlasText").setText(o),n.text(e,"name/nickname",s.cut(t.n,c.NAME_MAXS_LEN)),n.text(e,"level/num",t.l),n.initBadge(e,t.gi);var r=n.sh(e,"name/clubname",t.gid);r.active&&(n.text(r,null,s.cut(t.gn,c.NAME_MAXS_LEN)),n.btnc(e,"bk",n.makef(this.openMenu,this,e)),e.tag=1*t.gid,e.tagp=1*t.pid)}},popPlayerUI:function(t){var e=this.selfid==t?this.insobj1:this.insobj,i=cc.instantiate(e);return i.parent=this.content,i},initSelfInfo:function(t){var e=isNaN(parseInt(t));e||(t+=1);var i=n.chd(this.self,"ranking");n.sh(i,"1",1==t),n.sh(i,"2",2==t),n.sh(i,"3",3==t);var o=n.sh(i,"num",t>3);t>3&&o.getComponent("AtlasText").setText(t),n.sh(i,"no",e),n.text(this.self,"name/nickname",s.cut(a.get("nkname"),c.NAME_MAXS_LEN)),n.text(this.self,"level/num",a.geti("lev")),this.initClubInfo()},initClubInfo:function(t){var e=void 0;e=t||r.instance().guild,n.sh(this.self,"name/clubname",e&&e.gname).active&&n.text(this.self,"name/clubname",s.cut(e.gname,c.NAME_MAXS_LEN)),n.initBadge(this.self,e?e.gicon:0)},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"player"})},onDestroy:function(){o.off(this)}});l.DEFAULT=function(){return l.RANKDATA={rank_index:0,arr:[],tm:0,isend:0},l.RANKDATA},l.GET=function(){return l.RANKDATA?l.RANKDATA:l.DEFAULT()},cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],UIRankingList:[function(t,e,i){cc._RF.push(e,"7b528DnJFJLbJK3r4JdM0Bd","UIRankingList");var n=t("FamNet"),o=t("GameEvent");cc.Class({"extends":cc.Component,properties:{nonet:{"default":null,type:cc.Node},page_titles:{"default":null,type:cc.Node},page_content:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node},self_guild:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){o.on(o.EVENT_NET_STATU,function(t){this.checkNet(t.getUserData())},this),o.on(o.EVENT_OPEN_DIALOG,function(){this.menu.active&&this.menu.getComponent("UIPopBase").close()},this)},onDestroy:function(){o.off(this)},__showed:function(){this.checkNet()},checkNet:function(t){this.menu.active=!1;var e=void 0!=t?t:n.isNet();this.nonet.active=!e,this.page_titles.active=e,this.page_content.active=e,e?this.node.getComponent("UIChoosePages").select(1):this.selectPage(!1)},selectPage:function(t){this.self.active=1==t,this.self_guild.active=2==t,2==t&&o.EVENT_SHOW_GUILD_RANK()}}),cc._RF.pop()},{FamNet:"FamNet",GameEvent:"GameEvent"}],UIRecharge:[function(t,e,i){cc._RF.push(e,"f4fbcuOQutAPo9O6pU9PmQ6","UIRecharge");var n=t("ReChargeLogic"),o=t("JsonMetaCache"),a=t("GameTools"),s=cc.Class({"extends":t("UIDialog"),properties:{title:{type:cc.Node,"default":null},time:{type:cc.Node,"default":null},discount:{type:cc.Node,"default":null},oldPrice:{type:cc.Node,"default":null},nowPrice:{type:cc.Node,"default":null},itemList:{type:cc.Node,"default":[]},btn_buy:{type:cc.Node,"default":null}},statics:{scale:{1:1.5,2:1.4,3:1.3,4:1.2,5:1},scale_trigger:{1:1,2:1,3:1,4:.7,5:.6},item_idx:[0,1,2,3,4],item_idx4:[0,1,3,4]},onLoad:function(){this.currency=t("SdkIns").instance().price("currency"),this._super(),a.btn(this.btn_buy,a.makef(function(){this.buy()},this),1)},start:function(){},buy:function(){null!=this.buyName&&t("UserLogic").pay(this.buyName,function(t){null!=t&&(n.buySuccess(this.buyType),this.showExpired())}.bind(this))},showed:function(t){this.buyName=null;var e=n.getChargeData(t);if(e&&e.remainTime>0){var i=e.sdata,o=e.gift;this.buyName=o.name,this.buyType=i.type,a.textp(this.title,"",i.title),a.textp(this.discount,"","recharge.discount",[a.discount(o.discount)]),a.currency(this.oldPrice,this.currency,o.oldprice),a.currency(this.nowPrice,this.currency,o.price),a.cd2(this.time,null,parseInt(e.remainTime/1E3),a.makef(function(){this.showExpired(t)},this),1);var c=this.initAwards(o.items);"btn_limited"!=i.btn&&"btn_newYearGift"!=i.btn||(this.itemList[0].scale=1==c?1.5:1,this.itemList[0].y=1==c?200:330),"btn_trigger"==i.btn&&(this.itemList[0].parent.scale=s.scale_trigger[c])}else this.showExpired(t)},showExpired:function(t){this.closeDialog(),n.init(),n.show()},initAwards:function(t){for(var e=0;e<this.itemList.length;e++)this.itemList[e].active=!1;var i=4==t.length?s.item_idx4:s.item_idx,n={};if(t&&t[0])for(var c in t){var r=t[c];null!=r.k&&(n[r.k]=r.v)}else n=t;var l=0;for(var h in n){var u=this.itemList[i[l++]],d=o.itemn(h);if(d){var f=a.chd(u,"icon"),g=a.chd(u,"num");a.imgs(f,d.icon),a.text(g,void 0,"x"+n[h]),u.active=!0}}return l}});cc._RF.pop()},{GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ReChargeLogic:"ReChargeLogic",SdkIns:"SdkIns",UIDialog:"UIDialog",UserLogic:"UserLogic"}],UIReconfirmBox:[function(t,e,i){cc._RF.push(e,"6b712Mb+4pGapw5LnPpEMSl","UIReconfirmBox"),t("n7");var n=t("GameTools");cc.Class({"extends":t("UIDialog"),properties:{title:{"default":null,type:cc.Node},btn_no:{"default":null,type:cc.Node},btn_yes:{"default":null,type:cc.Node},btn_close:{"default":null,type:cc.Node},labn:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btnc(this.btn_no,"btn",n.makef(this.no,this),1),n.btnc(this.btn_yes,"btn",n.makef(this.yes,this),1),n.btn(this.btn_close,n.makef(this.__close,this),1)},showed:function(t){this.p=t,this.node.zIndex=t.layer?t.layer:0,this.btn_no.active=t.no;var e=t.uni18?n.text:n.textp;this.btn_no.active&&e(this.btn_no,"btn/label",t.no),e(this.btn_yes,"btn/label",t.yes),e(this.title,null,t.title),e(this.labn,"lab_u",t.lab,t.labp?t.labp:void 0);var i=n.sh(this.labn,"lab_c",t.name);i.active&&n.text(i,null,t.name);var o=n.sh(this.labn,"lab_b",t.labc);o.active&&e(o,null,t.labc)},yes:function(){this.p.cbefore?this.owner=null:this.p.fo&&(this.p.caller?this.p.fo.call(this.p.caller):this.p.fo()),this.closeDialog()},no:function(){this.closeDialog()},__close:function(){this.p.closefo&&(this.p.caller?this.p.closefo.call(this.p.caller):this.p.closefo()),this.closeDialog()}}),cc._RF.pop()},{GameTools:"GameTools",UIDialog:"UIDialog",n7:"n7"}],UIRocker:[function(t,e,i){cc._RF.push(e,"59323I8JV9HhZjRGpd4dj1x","UIRocker");var n=t("GameCommon"),o=t("JsonMetaCache"),a=t("UIGameV2"),s=t("GameTools"),c=cc.Class({"extends":t("UIBlock"),properties:{basePic:{type:cc.Sprite,"default":null},altas:{type:cc.SpriteAtlas,"default":null},progressNode:{"default":null,type:cc.Node}},statics:{COLORBASEPIC:["rocker_y_up","rocker_r_up","rocker_b_up","rocker_g_up","rocker_p_up","rocker_o_up"]},onLoad:function(){},start:function(){},init:function(t){},setClick:function(t,e,i){i?this.content.on(n.touchstart,t,e):this.content.off(n.touchstart,t,e)},initBaseShow:function(t){var e=n.dir_to_rotation[t.dir],i=t.collectObj[0],a=o.tile(i).color;this.basePic.spriteFrame=this.altas.getSpriteFrame(c.COLORBASEPIC[a]),this.content.rotation=90*e,this.hasFlyCount=t.hasCollectCount,this.setProgress(this.hasFlyCount,t.collectObj[1])},setData:function(t,e,i,n,o){e||this.initBaseShow(t)},flyToEnd:function(t,e){if(null!=e.datas.tarData){++this.hasFlyCount;var i=e.datas.tarData.allCollectCount;this.hasFlyCount>=i&&a.instance().activeItem(t,this.tile),this.setProgress(this.hasFlyCount,i)}},setProgress:function(t,e){s.cmpt(this.progressNode,"","JProgressBar").progress(0,t,e)},getGoalNode:function(){return this.basePic.node}});cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",UIBlock:"UIBlock",UIGameV2:"UIGameV2"}],UISetup:[function(t,e,i){cc._RF.push(e,"3b1c07vBnRNLasH0gySEu8J","UISetup");var n=t("GameTools"),o=t("N7MusicV2"),a=t("N7Sound"),s=(t("n7"),t("GameEvent")),c=t("GameConfig"),r=t("SdkIns");cc.Class({"extends":t("UIDialog"),properties:{btn_eff:{"default":null,type:cc.Node},btn_bgm:{"default":null,type:cc.Node},btn_help:{"default":null,type:cc.Node},btn_push:{"default":null,type:cc.Node},btn_chat_switch:{"default":null,type:cc.Node},btn_logout:{"default":null,type:cc.Node},cdkey:{"default":null,type:cc.Node},info:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent();var t=c.get("ver")+"."+c.get("buildver");n.text(this.info,"lab_ver/num",t);var e=r.instance().setting_info(),i=n.sh(this.info,"lab_qq",e);i.active&&(n.textp(i,"name",e.msgn),n.text(i,"num",e.msg)),n.sh(this.info,"lab_tel",e.tel)},__initEvent:function(){n.btn(this.btn_eff,n.makef(this.switchEff,this)),n.btn(this.btn_bgm,n.makef(this.switchMusic,this)),n.btn(this.btn_help,n.makef(this.help,this),1),n.btn(this.btn_push,n.makef(this.pushMsg,this),1),n.btn(this.btn_chat_switch,n.makef(this.chatSwitch,this),1),n.btn(this.btn_logout,n.makef(this.logout,this),1),n.btnc(this.cdkey,"btn",n.makef(this.cdkeyOpen,this),1)},showed:function(){this.switchVoice(this.btn_bgm,o.bgmIsOpen()),this.switchVoice(this.btn_eff,a.bgsIsOpen())},help:function(){s.EVENT_OPEN_DIALOG({name:"dialog_help",owner:"dialog_setup"})},pushMsg:function(){c.get("gm")&&s.EVENT_OPEN_DIALOG({name:"dialog_change_name",owner:"dialog_setup"})},chatSwitch:function(){if(c.get("gm")){var t=n.getLanguage();t="cn"==t?"en":"cn",n.setLanguage(t),s.EVENT_BIGMAP_SHOW({ret:3})}},logout:function(){var e={fo:function(){t("FamNet").logout()},title:"reconfirm_hint.logout",name:t("UserLogic").get("nkname")+"["+t("FamNet").pid()+"]",lab:"reconfirm_hint.ynlogout",yes:"log_off",no:"cancel"};s.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:e,owner:"dialog_setup"})},switchEff:function(){this.switchVoice(this.btn_eff,a.switchBgs())},switchMusic:function(){this.switchVoice(this.btn_bgm,o.switchBgm())},switchVoice:function(t,e){n.sh(t,"off",!e)},cdkeyOpen:function(){s.EVENT_MESSAGEBOX("unopen")}}),cc._RF.pop()},{FamNet:"FamNet",GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",N7MusicV2:"N7MusicV2",N7Sound:"N7Sound",SdkIns:"SdkIns",UIDialog:"UIDialog",UserLogic:"UserLogic",n7:"n7"}],UISevenSign:[function(t,e,i){cc._RF.push(e,"e999c7hQhNFIZlG/xtf5HDy","UISevenSign");var n=t("GameLogic"),o=t("GameTools"),a=t("GameEvent"),s=t("SignLogic"),c=t("GameCommon"),r=t("JsonMetaCache"),l=t("N7Resource"),h=t("SdkIns");cc.Class({"extends":t("UIDialog"),properties:{item:{"default":null,type:cc.Node},btn_green:{"default":null,type:cc.Node},btn_gray:{"default":null,type:cc.Node},sign_flyn:{"default":null,type:cc.Node},info:{"default":null,type:cc.Node},eight:{"default":null,type:cc.Node},sign_item:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){o.btn(this.btn_green,o.makef(this.signIn,this),1),o.btnc(this.content,"help",o.makef(this.openHelp,this),1)},showed:function(t){this.sign_flyn.active=!1;var e=s.refreshSign("s1"),i=this.item.childrenCount,n=e.data;this.today_index=n.todayIndex+1;var a=n.signList,l=r.getAllSign().s1[n.id].dayList,u=8==this.today_index;this.buy_day=u,this.item.scale=u?.75:1,this.eight.active=u,o.textp(this.content,"lab_title",u?"sign.buy_day":"sign.title7");var d=s.getSignState("s1")==c.SIGN_HASSIGN;if(this.btn_green.active=!d,this.btn_gray.active=d,!d){var f=o.chd(this.btn_green,"p");if(u){var g=h.instance(),p=g.price("currency"),_=g.price(l[8].payName);o.currency(f,p,_.price),o.currency(o.chd(this.eight,"old_price"),p,_.oldprice)}}if(u){var m=o.getOneDayTime();o.cd2(this.info,"",m,o.makef(function(){},this),1),o.textp(this.eight,"mark/num","recharge.discount",[o.discount(1)])}else{var v=n.todayIndex;a[v]&&v++,o.textp(this.info,void 0,"sign.info7",[v])}for(var E=0;E<i;E++){var y=o.chd(this.item,"item"+(E+1)),b=E==n.todayIndex,I=!u&&b&&!a[E];o.sh(y,"sign",!u&&a[E]);var T=l[E+1].gift;this.initImgNum(y,T,I)}},initImgNum:function(t,e,i){var n=void 0;for(var a in e){if(e.length>1){for(var s in e){var c=1*s+1,l=o.chd(t,"item/item"+c);n=e[s];var h=r.itemn(n.k);o.imgs(l,h.icon,"icon"),o.text(l,"num","x "+n.v)}return}n=e[a];var u=r.itemn(n.k);o.imgs(t,u.icon,"icon"),o.text(t,"num","x "+n.v),o.sh(t,"light",i)}},signIn:function(){s.sign("s1",function(t){n.refreshSevenTips(),t.code&&a.EVENT_MESSAGEBOX("sign.sign_state_"+t.code)}),this.is_help=!1,this.buy_day&&this.closeDialog(),this.dialogResume()},dialogResume:function(){if(!this.is_help){var t=this,e=this.sign_flyn.getComponent(cc.Animation),i=null;e.onFlyMove=function(){var e=o.chd(t.item,"item"+t.today_index+"/sign"),i=o.nodeToNodePos(e,t.content);t.sign_flyn.runAction(cc.moveTo(.4,i.x,i.y))},e.once("finished",function(){this.sign_flyn.active=!1;var t=i.node;t.scale=1.4,t.parent=this.sign_flyn.parent,t.position=this.sign_flyn.position,i.playEffect(),this.showed()},this),l.loadRes(5600,function(t){i=t,e.node.active=!0,e.play()},this),a.EVENT_DIALOG_SHOWED(this)}},onUiFlyInEnd:function(t){a.EVENT_DIALOG_SHOWED(this)},onFlyMove:function(){var t=o.chd(this.item,"item"+this.today_index+"/sign"),e=o.nodeToNodePos(t,this.content);this.sign_flyn.runAction(cc.moveTo(.4,e.x,e.y))},openHelp:function(){this.is_help=!0,a.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_seven_sign",param:{text:"SignInActivity7"}})}}),cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",SdkIns:"SdkIns",SignLogic:"SignLogic",UIDialog:"UIDialog"}],UIShareSelect:[function(t,e,i){cc._RF.push(e,"ad8e07SqIZLX5wD3QQfPdec","UIShareSelect"),t("N7Resource"),t("GameConfig"),t("MathUtils");var n=t("GameTools");cc.Class({"extends":t("UIDialog"),properties:{share_btn:{type:t("ShareBtn"),"default":null}},onLoad:function(){this._super()},showed:function(e){var i=t("N7Resource").instance(),o=e.tmpData.sdata.img,a=t("ShareLogic").getShareUrl()+o,s=a.lastIndexOf("."),c=a.substring(0,s),r=this;i.textureFromPath(c,function(t){n.cmpt(r.content,"img",cc.Sprite).spriteFrame=t},this);var l=function(){this.closeDialog()}.bind(this);this.share_btn.__showed(e,l)},closeDialog:function(){this._super()}}),cc._RF.pop()},{GameConfig:"GameConfig",GameTools:"GameTools",MathUtils:"MathUtils",N7Resource:"N7Resource",ShareBtn:"ShareBtn",ShareLogic:"ShareLogic",UIDialog:"UIDialog"}],UISheep:[function(t,e,i){cc._RF.push(e,"db2aa3UPVVI0pTBOd6lqYTV","UISheep");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{dog:{type:cc.Node,"default":null},altas:{type:cc.SpriteAtlas,"default":null},lizi:{type:cc.Node,"default":null}},statics:{},onLoad:function(){},start:function(){},init:function(){this.anim=this.getComponent(cc.Animation)},setData:function(t,e,i,o,a){i&&i.call(o,n.CUBE_SETPARAM_ALL)},destroyMe:function(t,e,i){this.destroyCall={callFunc:e,caller:i,params:t},this.anim.play("sheep_anim"),this.anim.on("finished",function(){this.playEndDestroyAnim()},this)},playEndDestroyAnim:function(){if(this.destroyCall){var t=this.destroyCall.callFunc,e=this.destroyCall.caller,i=this.destroyCall.params;this.destroyCall=null,t&&e&&t.call(e,i)}}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIShell:[function(t,e,i){cc._RF.push(e,"5e12cFu/SFK74w5V4DVlCQA","UIShell");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{shellOpen:{type:cc.Node,"default":null},shellClose:{type:cc.Node,"default":null},ball:{type:cc.Node,"default":null}},onLoad:function(){},start:function(){},init:function(t){},setData:function(t,e,i,o,a){this.needPlayEff=e,e?(this.play(t.mussel),i.call(o,n.CUBE_SETPARAM_ALL)):(i&&i.call(o,n.CUBE_SETPARAM_ALL),null!=t.mussel&&this.play(t.mussel))},play:function(t){this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this)),this.state=t,this.anim.play(1==t?"shell_o":"shell_c"),this.sound(1==t?0:1)},playLizi:function(){this.needPlayEff&&this.createEffect()},playEnd:function(){},setState:function(t){1==t?(this.shellClose.active=!0,this.shellOpen.active=!1):(this.shellClose.active=!1,this.shellOpen.active=!0)}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UIShopGold:[function(t,e,i){cc._RF.push(e,"e1de7kY7ABE7bn/ZwwUa4xQ","UIShopGold");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("StringUtils"),c=t("n7"),r=t("SdkIns"),l=t("UserLogic"),h=cc.Class({"extends":cc.Component,properties:{itemobj:{"default":null,type:cc.Node},giftobj:{"default":null,type:cc.Node},moreobj:{"default":null,type:cc.Node},isd:!1},start:function(){this.indexK=0,this.isd&&n.btnc(this.moreobj,"btn",n.makef(function(){this.dataend=!0,this.istcend=!1,this.moreobj.removeFromParent(!0)},this),1),this.sdk=r.instance(),this.currency=this.sdk.price("currency")},__init:function(t,e){var i=a.itemn(t);if(i){var o=s.toKeyValue(i.exdt),c=void 0;if(o&&o.gift){(c=cc.instantiate(this.giftobj)).parent=this.node,c.pay_name=t;var r=n.chd(c,"down");o.mark&&(n.show(r,"mark"),n.show(r,"mark/"+o.mark)),n.imgs(r,69999+1*o.gift,"icon"),this.initGift(c,i.id,e)}else(c=cc.instantiate(this.itemobj)).parent=this.node,c.pay_name=t,this.initItem(c,e)}},initItem:function(t,e){n.text(t,"num","x"+e.awd[12]),this.initBtn(t,e.price)},initGift:function(t,e,i){n.textp(t,"up/name","item_list."+e);var o=n.chd(t,"item"),s=i.awd,c=0;for(var r in s)c++;var l=0;for(var h in s){var u=a.itemn(h);if(u){var d=++l;1==l&&c>2&&(d+="x");var f=n.show(o,"item"+d);n.imgs(f,u.icon,"icon");var g="unheart"==h?"h":"";n.text(f,"num","x"+s[h]+g)}}c<=2&&(n.chd(t,"down/mark").y-=200);var p=n.chd(t,"down");p.pay_name=t.pay_name,this.initBtn(p,i.price)},initBtn:function(t,e){var i=n.chd(t,"btn");n.btn(i,function(){c.BS?o.EVENT_MESSAGEBOX("unopen"):l.pay(t.pay_name,function(t){})},1);var a=n.chd(i,"p");n.currency(a,this.currency),n.text(a,"num",e)},update:function(){if(!this.istcend){this.isd&&2==this.indexK&&(this.indexK=6);var t=h._CPS_[this.indexK];if(!t||this.isd&&8==this.indexK&&!this.dataend)return this.istcend=!0,void(!this.dataend&&this.moreobj&&(this.moreobj.parent=this.node));this.indexK++;var e=this.sdk.price(t);e&&this.__init(t,e)}},onDestroy:function(){o.off(this)}});h._CPS_=["gift_gd_1","gift_gd_2","gift_gd_3","gift_gd_4","gift_gd_5","gift_gd_6","shop_cp_gold_1","shop_cp_gold_2","shop_cp_gold_3","shop_cp_gold_4","shop_cp_gold_5","shop_cp_gold_6","shop_cp_gold_7"],cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",SdkIns:"SdkIns",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],UIShopProp:[function(t,e,i){cc._RF.push(e,"dfefc2gOG5BVLwxlcq2OZaC","UIShopProp");var n=t("GameTools"),o=t("GameEvent"),a=t("JsonMetaCache"),s=t("StringUtils"),c=t("n7"),r=t("UserLogic"),l=cc.Class({"extends":cc.Component,properties:{itemobj:{"default":null,type:cc.Node},giftobj:{"default":null,type:cc.Node}},start:function(){this.indexK=0},__init:function(t,e){var i=a.item(t);if(i){var o=s.toKeyValue(i.exdt),c=void 0;o.c?((c=cc.instantiate(this.giftobj)).parent=this.node,o.mark&&(n.show(c,"mark"),n.show(c,"mark/"+o.mark)),this.initGift(c,i,o,e)):((c=cc.instantiate(this.itemobj)).parent=this.node,this.initItem(c,i,o))}},initItem:function(t,e,i){n.textp(t,"name","item_list."+e.id),n.text(t,"num","x"+(i.p?i.p:1)),n.imgs(t,e.icon,"icon"),this.initBtn(t,e)},initGift:function(t,e,i,o){n.textp(t,"name","item_list."+e.id);for(var s=n.chd(t,"item"),c=0,r=i.c,l=[],h=0;h<r.length;h++){var u=a.item(r[h]);if(h++,u){var d=n.show(s,"item"+ ++c);n.imgs(d,u.icon,"icon"),n.text(d,"num","x"+r[h]),l.push({k:u.id_name,v:r[h]})}}t.giftawd=l,this.initBtn(t,e,i.r)},initBtn:function(t,e,i){var a=n.chd(t,"btn");n.text(a,"rebate/num",i);var s=n.chd(a,"p"),l=e.silver,h=e.money;n.sh(s,"gold",h),n.sh(s,"silver",l);var u=h||l;n.text(s,"num",u);var d=t.giftawd;n.btn(a,function(){if(c.BS)o.EVENT_MESSAGEBOX("unopen");else if(i&&d){var t={fo:function(){r.buy({why:"shop_prop_gift",silver:l,gold:h},function(t){0==t?(r.award(d),o.EVENT_MESSAGEBOX("buyok")):l?o.EVENT_MESSAGEBOX("unsilver"):o.EVENT_MESSAGEBOX("ungold")})},caller:this,title:"item_list."+e.id,name:n.i18ns("item_list.12")+" "+u+" "+n.i18ns("buy"),lab:"use",labc:"item_list.info"+e.id,yes:"buy",no:"cancel"};o.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:t})}else o.EVENT_OPEN_DIALOG({name:"dialog_buy_prop",param:{name:e.id_name,why:"shop"}})},1)},update:function(){if(!this.istcend){var t=l._ITEMS_[this.indexK];t?(this.indexK++,this.__init(t,this.indexK)):this.istcend=!0}},onDestroy:function(){o.off(this)}});l._ITEMS_=[17,15,16,9,11,10,1,2,3,4,5,6,7,8,54],cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",StringUtils:"StringUtils",UserLogic:"UserLogic",n7:"n7"}],UIShop:[function(t,e,i){cc._RF.push(e,"aa07bDeuTBN26x33mWKOtvk","UIShop");var n=t("GameEvent"),o=t("GameTools");cc.Class({"extends":cc.Component,properties:{page_content:{"default":null,type:cc.Node}},start:function(){this.__initEvent(),this.__showed()},__initEvent:function(){},__showed:function(){var e=t("SdkIns").instance().isPay();o.sh(this.page_content,"content3/layout",e),o.sh(this.page_content,"content3/nonet",!e)},onDestroy:function(){n.off(this)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",SdkIns:"SdkIns"}],UISignUp:[function(t,e,i){cc._RF.push(e,"56ac0E/1D5E3pJi92rHQ2x4","UISignUp");var n=t("GameTools"),o=t("GameEvent"),a=t("JMD5");cc.Class({"extends":t("UIDialog"),properties:{btn_login:{"default":null,type:cc.Node},btn_sign_up:{"default":null,type:cc.Node},mail:{"default":null,type:cc.Node},password:{"default":null,type:cc.Node},verify:{"default":null,type:cc.Node},nickname:{"default":null,type:cc.Node},errLab:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_login,n.makef(this.gotoLogin,this),1),n.btn(this.btn_sign_up,n.makef(function(){this.signup()||this.signErr()},this),1),this.mail_lab=n.cmpt(this.mail,"edit_box",cc.EditBox),this.password_lab=n.cmpt(this.password,"edit_box",cc.EditBox),this.verify_lab=n.cmpt(this.verify,"edit_box",cc.EditBox),this.nickname=n.cmpt(this.nickname,"edit_box",cc.EditBox),o.on(o.EVENT_LOGIN_ERROR,function(t){this.signErr()},this)},signErr:function(){this.errLab.active=!0},showed:function(t){t&&t.fo&&(this.fo=t.fo),this.mail_lab.string="",this.password_lab.string="",this.verify_lab.string="",this.nickname.string="",n.hide(this.password,"lab_hint"),n.hide(this.verify,"lab_hint"),n.hide(this.verify,"tick"),this.errLab.active=!1},gotoLogin:function(){this.closeDialog(),o.EVENT_OPEN_DIALOG({name:"dialog_login",param:{fo:this.fo}})},nameChange:function(){this.nickname.string=n.stringMaxLength(this.nickname.string)},verifyChange:function(){var t=this.verify_lab.string,e=this.password_lab.string;if(n.sh(this.password,"lab_hint",e.length<3),""!=t||""!=e){var i=this.verify_lab.string==this.password_lab.string;n.sh(this.verify,"lab_hint",!i),n.sh(this.verify,"tick",i)}},signup:function(){var t=this.mail_lab.string;if(!n.ischeckemail(t))return!1;var e=this.password_lab.string;if(e.length<3)return!1;if(this.verify_lab.string!=e)return!1;var i=this.nickname.string;return!!n.ischeckname(i)&&(e=a.b64_md5(e),this.fo&&this.fo(),!0)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",JMD5:"JMD5",UIDialog:"UIDialog"}],UISoap:[function(t,e,i){cc._RF.push(e,"82aa6Ah2IlHR7QKH3Pbo/T9","UISoap");var n=t("GameCommon"),o=t("N7UIEffectLayer"),a=t("N7Resource"),s=cc.Class({"extends":t("UICannonBase"),properties:{effect:{"default":null,type:cc.Prefab}},statics:{FLYTO_ENERGY_PARAMS:{scale1:.5,scale2:.3,p1:{offset:45},p2:{offset:-45},speed:.001,maxTime:.5}},onLoad:function(){this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this))},init:function(t){},fire:function(){this._super(),this.am.play(),this.shot()},shot:function(){var t=a.createPrefab(this.effect,"effect_base");o.addNodeInCube(this.tile,t,function(t){t.playEffect()},this),this._super(s.FLYTO_ENERGY_PARAMS),this.sound()},setData:function(t,e,i,o,a){this._super(t,e,i,o,a),i&&i.call(o,n.CUBE_SETPARAM_ALL)},checkFire:function(t){return t.cmd==n.com_create||t.cmd==n.com_chgto},playEnd:function(){}});cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UICannonBase:"UICannonBase"}],UIStarLoading:[function(t,e,i){cc._RF.push(e,"69d83NwvvNFg6XS6qQoWHTY","UIStarLoading");var n=t("GameEvent"),o=cc.Class({"extends":cc.Component,properties:{what:1},onLoad:function(){n.on(n.EVENT_LOAD_ASYN_RES_PROCESSOR,function(t){var e=t.getUserData(),i=e.count,n=e.finish;this.progress(n/i)},this),1==this.what&&(this.bg=cc.find("bg",this.node),this.per_centum=cc.find("per_centum",this.node),this.particle=cc.find("particle",this.node),this.schedule(this.setLoadTime,1.5,o.TIME,1)),this.showed()},setLoadTime:function(){var t=cc.find("loading_num",this.node);t&&(t.getComponent(cc.Label).string=o.TIME--)},onDestroy:function(){this.unschedule(this.setLoadTime),n.off(this)},getStars:function(){if(!this.stars){this.stars=[];for(var t=1;t<=5;t++)this.stars.push(cc.find("star"+t,this.node))}return this.stars},showed:function(){1==this.what&&this.rotate_startLoading(0),2==this.what&&this.rotate_gameLoadling(0)},progress:function(t){1==this.what&&this.rotate_startLoading(parseFloat(t).toFixed(2)),2==this.what&&this.rotate_gameLoadling(parseInt(10*t/2))},rotate_gameLoadling:function(t){var e,i;void 0==this.index&&(this.index=-1),t!=this.index&&(t>4&&(t=4),this.getStars(),this.index>=0&&((i=(e=this.stars[this.index]).getComponent(cc.Animation))&&i.stop(),e.rotation=0),this.index=t,i=(e=this.stars[this.index]).getComponent(cc.Animation),e.scaleX=e.scaleY=1.2,i&&i.play())},rotate_startLoading:function(t){if(t<=0)this.particle.active=!0;else{t>=1&&(this.particle.active=!1,t=1),this.bg.width=parseInt(622*t);var e=this.bg.width-328;this.particle.x=e>=288?288:e,this.per_centum.getComponent(cc.Label).string=parseInt(100*t)+"%"}}});o.TIME=5,cc._RF.pop()},{GameEvent:"GameEvent"}],UISuger:[function(t,e,i){cc._RF.push(e,"3e6fcdAPA1E76DkfXylS8bw","UISuger");var n=t("GameCommon");cc.Class({"extends":t("UIBlock"),properties:{},start:function(){},onLoad:function(){},init:function(t){this.count=1*t,this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",function(){this.playEnd()},this)),this.play()},setData:function(t,e,i,o){this.count=1*t.count,e?(this.play(),this.createEffect(this.count)):this.play(),i&&i.call(o,n.CUBE_SETPARAM_ALL)},play:function(){1==this.count&&this.anim.play()},playEnd:function(){}}),cc._RF.pop()},{GameCommon:"GameCommon",UIBlock:"UIBlock"}],UITabPage:[function(t,e,i){cc._RF.push(e,"b4df3GA8RhLk6DThepD9IMI","UITabPage");var n=t("GameTools");cc.Class({"extends":cc.Component,properties:{btnOn:{type:cc.Node,"default":null},btnOff:{type:cc.Node,"default":null},content:{type:cc.Node,"default":null},tips:{type:cc.Node,"default":null},tipsLabel:{type:cc.Label,"default":null},tab:{type:t("UITab"),"default":null},index:0},onLoad:function(){n.btn(this.btnOn,n.makef(this.onClick,this,0)),n.btn(this.btnOff,n.makef(this.onClick,this,1))},tabState:function(t){this.btnOn.active=1===t,this.btnOff.active=0===t,this.content.active=1===t},onClick:function(t){this.tab.selected(this.index)}}),cc._RF.pop()},{GameTools:"GameTools",UITab:"UITab"}],UITab:[function(t,e,i){cc._RF.push(e,"eed80bFrb1DW7opOfJo5Wf3","UITab"),cc.Class({"extends":cc.Component,properties:{tabPage:{type:cc.Node,"default":null}}}),cc._RF.pop()},{}],UITeleport:[function(t,e,i){cc._RF.push(e,"ce01dJycMdKepNN8T8QR8CH","UITeleport"),cc.Class({"extends":t("UIBlock"),properties:{layerIn:{type:cc.Node,"default":null},layerOut:{type:cc.Node,"default":null},nodeIn:{type:cc.Node,"default":null},nodeOut:{type:cc.Node,"default":null}},onLoad:function(){},init:function(t){var e=1*t==1;this.layerIn.active=e,this.layerOut.active=!e},play:function(){this.anim||(this.anim=this.getComponent(cc.Animation)),this.anim.play()},playCantClick:function(){}}),cc._RF.pop()},{UIBlock:"UIBlock"}],UITennis:[function(t,e,i){cc._RF.push(e,"e80a04VjY9I84fCwXH8LcdV","UITennis"),cc.Class({"extends":t("UIBlock"),properties:{},onLoad:function(){},start:function(){},setFrame:function(t){this.sprite||(this.sprite=this.getComponent(cc.Sprite)),this.sprite.spriteFrame=t},getFrame:function(){return this.sprite.spriteFrame}}),cc._RF.pop()},{UIBlock:"UIBlock"}],UIThirty_days_box:[function(t,e,i){cc._RF.push(e,"12f39r5AgNBFJZrKZD/KJV8","UIThirty_days_box");var n=t("GameLogic"),o=t("GameTools"),a=t("GameEvent"),s=(t("WorkData"),t("UserLogic"),t("SignLogic")),c=t("GameCommon"),r=t("JsonMetaCache"),l=t("n7"),h=(t("N7Resource"),cc.Class({"extends":t("UIDialog"),properties:{layer:{"default":null,type:cc.Node},boj:{"default":null,type:cc.Node},btn_play:{"default":null,type:cc.Node},btn:{"default":null,type:cc.Node},annotation:{"default":null,type:cc.Node},item:{"default":null,type:cc.Node},time:{"default":null,type:cc.Node},scroll:{type:cc.ScrollView,"default":null}},statics:{TIME:"00:00",PREFERENCE:[8,15,22,30],REPLENISHIGN:0,ZIGZAG:[13,27],DAY:32},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){var t=this;o.btnc(this.btn_play,"btn",o.makef(this.Sign,this),1);var e=o.chd(this.node,"background");e.on("mousedown",function(e){t.annotation.active=!1},e)},showed:function(){var t=s.refreshSign("s2");if(t.code!=c.SIGN_NOTSTART){0!=this.layer.children.length&&this.layer.removeAllChildren(),o.sh(this.btn_play,"btn/icon",!0),o.sh(this.btn_play,"btn/lab",!0),o.sh(this.btn_play,"btn/btn",!1),o.sh(this.btn_play,"btn/unicon",!1),o.sh(this.btn_play,"btn/unlab",!1);for(var e=!0,i=0,n=1,a=4,r={},u=1,d=!0,f=0;u<=h.DAY;u++){var g=cc.instantiate(this.item);g.parent=this.layer,g.active=!0,e=d?3==f:0==f,l.log("UIThirty_days_box showed "+u+" rotation:"+e+" col:"+f+" row:"+d),e?(o.chd(g,"way").rotation=90,o.text(g,"orange_floor/lab",a),r=this.__showBox(a),this.articleIcon(g,a),a-1==t.data.todayIndex&&(o.sh(g,"light_icon",!0),i=n-1,this.layer.y=160*i+500),this.__signshow(g,a)):d?(o.text(g,"orange_floor/lab",u),r=this.__showBox(u),this.articleIcon(g,u),u-1==t.data.todayIndex&&(o.sh(g,"light_icon",!0),i=n-1,this.layer.y=160*i+500),this.__signshow(g,u)):(o.chd(g,"way").rotation=180,o.text(g,"orange_floor/lab",a-f),r=this.__showBox(a-f),this.articleIcon(g,a-f),a-f-1==t.data.todayIndex&&(o.sh(g,"light_icon",!0),i=n-1,this.layer.y=160*i+500),this.__signshow(g,a-f)),++f>3&&(f=0,d=!d,a=4*++n,l.log("UIThirty_days_box showed "+u+" rotation:"+e+" col:"+f+" row:"+d+" maxIndex:"+a)),r.YES&&(o.sh(g,"icon/item",!1),o.sh(g,"icon/box/"+r.index,!0),o.sh(g,"bk",!1),o.sh(g,"orange_floor",!1),o.sh(g,"icon/lab",!1),o.btnc(g,"icon",o.makef(this.Annotation,this,{node:g,index:h.PREFERENCE[r.index-1]}),1))}o.sh(this.layer.children[h.DAY-2],"way",!1),this.layer.children[h.DAY-3].opacity=0,this.layer.children[h.DAY-4].opacity=0;var p=this.Retroactive(t);o.text(this.btn_play,"lab/top_lab",p),0!=s.getNextSignLeftTime("s2")&&(t.data.replenishIndex>=0?(o.sh(this.btn_play,"btn/btn",!0),o.sh(this.btn_play,"btn/unicon",!1),o.sh(this.btn_play,"btn/lab",!1),o.sh(this.btn_play,"btn/unlab",!1),o.text(this.btn_play,"btn/btn/gold/lab",s.getReplenishMoney("s2"))):(o.sh(this.btn_play,"btn/btn",!1),o.sh(this.btn_play,"btn/unicon",!0),o.sh(this.btn_play,"btn/icon",!1),o.sh(this.btn_play,"btn/lab",!1),o.sh(this.btn_play,"btn/unlab",!0)))}else this.node.active=!1},__showBox:function(t){var e=!1,i=h.PREFERENCE,n=void 0;for(n=0;n<i.length;n++)if(t==i[n]){e=!0;break}return{YES:e,index:n+1}},__signshow:function(t,e){var i=s.refreshSign("s2");if(1==i.data.signList[e-1]){var n=!1,a=h.PREFERENCE,c=void 0;for(c=0;c<a.length;c++)if(e==a[c]){n=!0;break}n?(o.sh(t,"icon/box",!1),o.sh(t,"icon/unbox/"+(c+1),!0),o.sh(t,"light_icon",!1),1!=i.data.signList[e]&&e!=i.data.todayIndex||(o.sh(t,"way/line",!1),o.sh(t,"way/unline",!0))):(o.sh(t,"bk/icon",!1),o.sh(t,"bk/unicon",!0),o.sh(t,"orange_floor/icon",!1),o.sh(t,"orange_floor/unicon",!0),o.sh(t,"light_icon",!1),1!=i.data.signList[e]&&e!=i.data.todayIndex||(o.sh(t,"way/line",!1),o.sh(t,"way/unline",!0)))}},Sign:function(){if(s.refreshSign("s2").data.replenishIndex>=0){var t=s.replenishSign("s2");t.code==c.SIGN_END?a.EVENT_MESSAGEBOX("sign.sign_in_end"):t.code==c.RSIGN_LACKGOLD?a.EVENT_MESSAGEBOX("sign.rsign_lackgold"):t.code==c.RSIGN_NOSIGNCOUNT?a.EVENT_MESSAGEBOX("sign.rsign_nosigncount"):t.code==c.RSIGN_TODAYNOSIGN&&a.EVENT_MESSAGEBOX("sign.rsign_todaynosign"),this.showed()}else{var e=s.sign("s2");if(e.code==c.SIGN_HASSIGN)return void a.EVENT_MESSAGEBOX("sign.sign_in_non");if(e.code==c.SIGN_NOTSTART)return void a.EVENT_MESSAGEBOX("sign.sign_DNS");if(e.code==c.SIGN_END)return void a.EVENT_MESSAGEBOX("sign.sign_in_end");n.refreshThirtyTips(),this.showed()}},Annotation:function(t){var e=h.PREFERENCE,i=void 0,n=!1;for(i=0;i<e.length;i++)if(t.index==e[i]){n=!0;break}if(n){0!=this.annotation.children.length&&this.annotation.removeAllChildren(),this.annotation.active=!0;var a=r.getAllSign().s2[1].dayList,s=[];for(var c in a)if(t.index==c){s=a[c].gift;break}var l=[];if(s[0])for(var u in s){var d=s[u];l[d.k]=d.v}else l=s;for(var f in l){var g=cc.instantiate(this.boj);g.parent=this.annotation,g.active=!0;var p=r.itemn(f);o.imgs(g,p.icon,"tu/tu"),o.text(g,"lab",l[f])}this.annotation.position=o.nodeToNodePos(t.node,this.item),this.annotation.x-=80,this.annotation.y+=50}},articleIcon:function(t,e){var i=r.getAllSign().s2[1].dayList,n=[];for(var a in i)if(e==a){n=i[a].gift;break}var s=[];if(n[0])for(var c in n){var l=n[c];s[l.k]=l.v}else s=n;for(var h in s){var u=r.itemn(h);o.imgs(t,u.icon,"icon/item/gold"),o.text(t,"icon/lab",s[h]),o.sh(t,"icon/lab",!0)}},Retroactive:function(t){for(var e=0,i=0,n=0;n<t.data.signList.length;n++)1==t.data.signList[n]&&(e=n);e++;for(var o=1;o<=30;o++)o<=e&&0==t.data.signList[o-1]&&i++;return e-i},Slide:function(){this.annotation.active&&(this.annotation.active=!1)}}));cc._RF.pop()},{GameCommon:"GameCommon",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",SignLogic:"SignLogic",UIDialog:"UIDialog",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],UIToaster:[function(t,e,i){cc._RF.push(e,"a33284wShBPS7N/uE5wg2HJ","UIToaster");var n=t("GameCommon"),o=t("N7UIEffectLayer"),a=t("N7Resource");cc.Class({"extends":t("UIBlock"),properties:{dog:{type:cc.Node,"default":null},firePos:{type:cc.Node,"default":null},bone:{type:cc.Prefab,"default":null}},statics:{},onLoad:function(){},start:function(){},init:function(t){this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this))},playEnd:function(){},setData:function(t,e,i,s,c){var r=n.CUBE_SETPARAM_ALL,l=null;e&&(this.sound(),this.am.play("toaster"),l={node:a.createPrefab(this.bone,"goal_toast"),pos:o.getPos(this.firePos),isDown:!1}),i&&i.call(s,r,l)}}),cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UIBlock:"UIBlock"}],UITopBar:[function(t,e,i){cc._RF.push(e,"41fb7vSbipGAYo/RltfvI7d","UITopBar");var n=t("GameTools"),o=t("GameEvent"),a=(t("n7"),t("UserLogic")),s=t("N7Sound"),c=(t("N7UIFlyLayer"),t("GameConfig"));cc.Class({"extends":cc.Component,properties:{btn_add_life:{"default":null,type:cc.Node},btn_add_gold:{"default":null,type:cc.Node},btn_add_coin:{"default":null,type:cc.Node},time:{"default":null,type:cc.Node},lab_hp:{"default":null,type:cc.Label},lab_gold:{"default":null,type:cc.Label},lab_silver:{"default":null,type:cc.Label},goldIcon:{type:cc.Node,"default":null},heartIcon:{type:cc.Node,"default":null},silverIcon:{type:cc.Node,"default":null},ambient:0},onLoad:function(){this.__initEvent(),this.showed()},onDestroy:function(){o.off(this)},showed:function(){this.refush({n:"silver",v:a.geti("silver")}),this.refush({n:"gold",v:a.geti("gold")}),this.refush({n:"heart",v:a.heart()})},__initEvent:function(){n.btn(this.btn_add_life,n.makef(this.openAddLife,this),2),n.btn(this.btn_add_gold,n.makef(this.openAddGold,this),2),n.btn(this.btn_add_coin,n.makef(this.openAddSilver,this),2);var t=o.EVENT_UDATA_CHG;o.on(t,function(t){this.refush(t.getUserData())},this)},refush:function(t){switch(t.n){case "silver":this.lab_silver.string=n.kmb(t.v),t.add&&(this.silverIcon.getComponent(cc.Animation).play(),s.playSound(90158));break;case "gold":this.lab_gold.string=n.kmb(t.v),t.add&&(this.goldIcon.getComponent(cc.Animation).play(),s.playSound(90158));break;case "heart":var e=t.v,i=e.h;n.sh(this.node,"heart/unheart",i==a._UNLIMITED_),n.sh(this.node,"heart/icon",i!=a._UNLIMITED_),n.sh(this.node,"heart/lab_heart",i!=a._UNLIMITED_),i==a._MAX_?(n.textp(this.time,void 0,"buy_heart.showfull"),this.time.getComponent(cc.Label).unscheduleAllCallbacks()):n.cd(this.time,e.tm,n.makef(function(){this.refush({n:"heart",v:a.heart()})},this)),this.lab_hp.string=e.h,t.add&&this.heartIcon.getComponent(cc.Animation).play()}},openAddSilver:function(){c.get("gm")&&o.EVENT_OPEN_DIALOG("dialog_option")},openAddLife:function(){a.heart().h>=a._MAX_?o.EVENT_MESSAGEBOX("buy_heart.full"):c.get("gm")?a.addHeart(a._MAX_):o.EVENT_OPEN_DIALOG({name:"dialog_buy_heart"})},openAddGold:function(){c.get("gm")?a.addGold(1E4):o.EVENT_OPEN_DIALOG({name:"dialog_item_shop"})}}),cc._RF.pop()},{GameConfig:"GameConfig",GameEvent:"GameEvent",GameTools:"GameTools",N7Sound:"N7Sound",N7UIFlyLayer:"N7UIFlyLayer",UserLogic:"UserLogic",n7:"n7"}],UITopGold:[function(t,e,i){cc._RF.push(e,"d900eup4CpA25JYFAkDRzur","UITopGold"),cc.Class({"extends":cc.Component,properties:{icon:{type:cc.Node,"default":null},num:{type:t("AtlasText"),"default":null}},start:function(){},setGold:function(t){this.num.setText(t)}}),cc._RF.pop()},{AtlasText:"AtlasText"}],UITopbarFly:[function(t,e,i){cc._RF.push(e,"46f6ejFPYRGYptG/7bZTpsR","UITopbarFly");var n=t("GameEvent");cc.Class({"extends":cc.Component,properties:{},onDestroy:function(){n.off(this)},onLoad:function(){n.on(n.EVENT_TOPBAR_FLY,function(t){this.flyinout(t.getUserData())},this)},flyinout:function(t){var e=this.node.getComponent(cc.Animation);e&&(e.play().wrapMode=0==t?cc.WrapMode.Reverse:cc.WrapMode.Normal)}}),cc._RF.pop()},{GameEvent:"GameEvent"}],UITotalAds:[function(t,e,i){cc._RF.push(e,"a45a7EnrBVLeKXAL+rag+q4","UITotalAds");var n=t("ActivityLogic"),o=t("JsonMetaCache"),a=t("GameTools"),s=t("ShareLogic"),c=t("GameEvent"),r=cc.Class({"extends":t("UIDialog"),properties:{time:{type:cc.Node,"default":null},itemList:{type:cc.Node,"default":[]},btn_ads:{type:cc.Node,"default":null},btn_grey:{type:cc.Node,"default":null},tempNode:{type:cc.Node,"default":null},help:{type:cc.Node,"default":null},boxPicList:{type:cc.SpriteFrame,"default":[]},boxOpenPicList:{type:cc.SpriteFrame,"default":[]}},statics:{item_idx:[0,1,2,3,4],item_idx4:[0,1,3,4]},onLoad:function(){if(this._super(),a.btn(this.btn_ads,a.makef(this.watchAd,this),1),a.btnc(this.help,null,a.makef(this.OpenHelp,this),1),!this.jpros){var t=a.chd(this.node,"center/progresskong");this.jpros=t.getComponent("JProgressBar")}this.tempObj={},this.tempNode.active=!1,this.countList=[],this.chgGiftDay=[1,5,10],this.exGift=null,this.lastGift=[{k:"unheart",v:"1"}]},OpenHelp:function(){c.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_total_ads",param:{text:"TotalAdsRule",arr:this.countList}})},showed:function(t){var e=s.getWatchOrShare(107),i=n.getNewYearRemain();i>0?this.refreshData(e):(c.EVENT_MESSAGEBOX("active_over"),this.schedule(function(){this.closeDialog()},0,0)),i>0?a.cd2(this.time,null,parseInt(i/1E3),a.makef(function(){this.closeDialog()},this),1):a.uncd2(this.time,null);for(var o=n.getNewYearTable(),r=a.getMonthDate(o.start,o.end),l=0;l<r.length;l++){var h=r[l];-1==this.countList.indexOf(h)&&this.countList.push(h)}n.refreshNewYearAds();var u=t.titleKey;u&&a.textp(this.node,"center/lab_title",u)},refreshData:function(t){null==t&&(t=s.getWatchOrShare(107));var e=0,i=t.hasWatchCount,n=t.sdata.pf,o=null,c=0,r=void 0;for(r in this.canGetAward=!1,n)""!=n[r][0]&&(e=Math.max(e,r),null==o&&r>i&&(o=r),t.hasGetAward||(this.canGetAward=this.canGetAward||i==r),r>1&&-1==this.countList.indexOf(r)&&this.countList.push(r));this.canGetAward&&(o=i),null==o&&(o=e),this.todayGetEnd=!this.canGetAward&&i>=e;var l=!1;for(r in n)if(""!=n[r][0]){l=this.canGetAward&&i==r;var h=null;if(this.tempObj[r])h=this.tempObj[r];else{(h=cc.instantiate(this.tempNode)).active=!0;var u=a.chd(h,"icon");a.btn(u,a.makef(function(t){this.initAwards(n[t.showKey][0],t.tick)},this,h),1)}this.tempObj[r]=h,h.parent=this.content;var d=this.getOffx(this.jpros.node.x,this.jpros.node.width,r/e);h.setPosition(d,h.y),a.text(h,"num",r+"s");var f=i>=r?this.boxOpenPicList[c]:this.boxPicList[c];f=l?this.boxPicList[c]:f,a.chd(h,"icon").getComponent(cc.Sprite).spriteFrame=f,a.sh(h,"guang",l),h.tick=i>=r&&!l,h.showKey=r,++c}this.chgGift(n,e);var g=this.tempObj[o];this.initAwards(n[o][0],g.tick),this.jpros.progress(0,i,e),this.showCd(t.cd);var p=i>=e&&!this.canGetAward;this.btn_ads.active=!p,this.btn_grey.active=p},getOffx:function(t,e,i){return t+e*i-e/2},showCd:function(t){if(this.canGetAward)a.textp(this.btn_ads,"label","receive");else{var e=a.chd(this.btn_ads,"label");t>0?a.cd2(e,null,t,a.makef(function(){this.showCd(null)},this),1):(a.textp(this.btn_ads,"label","newyear_sign.watchAds"),a.uncd2(e,null))}},watchAd:function(){var t=s.getWatchOrShare(107);if(this.canGetAward)return s.openWatchOrShareAward(t.sdata.id),void this.refreshData();t.cd>0?c.EVENT_MESSAGEBOX("ads_notice.no3"):s.showAndWatchOrShare(107,null,function(t){t&&t.dt&&0==t.dt.code&&(this.refreshData(),n.refreshNewYearAds())},this)},initAwards:function(t,e){for(var i=0;i<this.itemList.length;i++)this.itemList[i].active=!1;if(t){var n=4==t.length?r.item_idx4:r.item_idx,s={};if(t&&t[0])for(var c in t){var l=t[c];null!=l.k&&(s[l.k]=l.v)}else s=t;var h=0;for(var u in s){var d=this.itemList[n[h++]],f=o.itemn(u);if(f){var g=a.chd(d,"icon"),p=a.chd(d,"num");a.imgs(g,f.icon),a.text(p,void 0,"x"+s[u]),d.active=!0,a.sh(d,"tick",e)}}return h}},chgGift:function(t,e){null==this.exGift&&(this.exGift=t[e][0]),this.exGift!=t[e][0]&&(t[e][0]=this.exGift);for(var i=n.getNewYearTable(),o=0;o<this.chgGiftDay.length;o++){var s=this.chgGiftDay[o]-1;a.getTimeRemaining1(1E3*i.start,s,1)>0&&(t[e][0]=this.lastGift)}}});cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameEvent:"GameEvent",GameTools:"GameTools",JsonMetaCache:"JsonMetaCache",ShareLogic:"ShareLogic",UIDialog:"UIDialog"}],UITournament:[function(t,e,i){cc._RF.push(e,"7e35fdj7+dGd55pze5gLpLe","UITournament");var n=t("GameTools"),o=t("WorkData"),a=t("UserLogic"),s=t("GameCommon"),c=t("StringUtils"),r=t("GameEvent"),l=t("GuildLogic"),h=t("JsonMetaCache"),u=cc.Class({"extends":t("UIDialog"),properties:{btn_help:{"default":null,type:cc.Node},rsinfo:{"default":null,type:cc.Node},refrushn:{"default":null,type:cc.Node},time:{"default":null,type:cc.Node},player_lay:{"default":null,type:cc.Node},obj1:{"default":null,type:cc.Node},obj2:{"default":null,type:cc.Node},self:{"default":null,type:cc.Node},menu:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent(),u.GET().score!=o.get(o.WKD_CHP_STAR)&&u.DEFAULT(),this.init()},__initEvent:function(){n.btn(this.btn_help,n.makef(this.openHelp,this),1),n.btn(this.refrushn,n.makef(this.clickRefrush,this),1),this.player_lay.parent.on("scroll-to-bottom",function(){this.__nextpage()},this),r.on(r.EVENT_GUILD,function(t){var e=t.getUserData();"init"!=e.oper&&"mod"!=e.oper||this.initClubInfo(),"quit"==e.oper&&this.initClubInfo({gicon:0})},this),this.UIViewMenuBox=this.menu.getComponent("UIViewMenuBox"),this.mask=n.cmpt(this.refrushn,"mask",cc.Mask)},showed:function(){var e=u.GET();if(e.tm){var i=(e.tm-n.cutm())/1E3;i>0?this.initRefrushBtn(i):this.mask.node.active=!1}var o=t("ActivityLogic").get("chp"),a=0;o&&o.start_tm&&(a=n.getTmrByDay(o.start_tm,o.day,!0)),n.cd2(this.time,"label",parseInt(a/1E3),n.makef(function(){},this),1)},init:function(){this.selfid=a.pid(),this.initSelfInfo(),this.index=0,this.__nextpage()},__nextpage:function(){var t=this;u.getRLst(this.index,function(e){t.reading=!1,t.__initList(e,t.index),t.index++})},__initList:function(e,i){var o=e.arr;if(!(o.length<=0)){var a=void 0,r=void 0,l=t("ActivityLogic").get("chp").award;void 0!=e.myrank&&this.initSelfRank(e.myrank,l[e.myrank]);var h=25*i+1,u=25*i,d=u+25;d=d<o.length?d:o.length;for(var f=u;f<d;f++)if((a=o[f]).pid){r=this.popPlayerUI(a.pid);var g=n.chd(r,"ranking");n.sh(g,"1",1==h),n.sh(g,"2",2==h),n.sh(g,"3",3==h),n.sh(g,"num",h>3),h>3&&n.text(g,"num",h),n.initBadge(r,a.gi),n.text(r,"name/nickname",c.cut(a.n,s.NAME_MAXS_LEN)),n.text(r,"star/num",a.score?a.score:0);var p=l[f],_=n.sh(r,"awd",p);_.active&&this.initAwdData(_,p);var m=n.sh(r,"name/clubname",a.gid);m.active&&(n.text(m,null,c.cut(a.gn,s.NAME_MAXS_LEN)),n.btnc(r,"bk",n.makef(this.openMenu,this,r)),r.tag=1*a.gid,r.tagp=1*a.pid),h++}}},popPlayerUI:function(t){var e=this.selfid==t?this.obj2:this.obj1,i=cc.instantiate(e);return i.parent=this.player_lay,i},initSelfInfo:function(){n.text(this.self,"name/nickname",c.cut(a.get("nkname"),s.NAME_MAXS_LEN));var t=o.get(o.WKD_CHP_STAR);n.text(this.self,"star/num",t),n.text(this.rsinfo,"score/num",t),this.initClubInfo()},initSelfRank:function(t,e){r.EVENT_BIGMAP_COMMAND({mainui:{btn:"btn_tournament",rank:t}});var i=isNaN(parseInt(t));i||(t+=1);var o=n.chd(this.self,"ranking");n.sh(o,"1",1==t),n.sh(o,"2",2==t),n.sh(o,"3",3==t),n.sh(o,"num",t>3),t>3&&n.text(o,"num",t),n.sh(o,"no",i),n.text(this.rsinfo,"rank/num",i?"-":t);var a=n.sh(this.self,"awd",e);a.active&&this.initAwdData(a,e)},initClubInfo:function(t){var e=void 0;e=t||l.instance().guild,n.sh(this.self,"name/clubname",e&&e.gname).active&&n.text(this.self,"name/clubname",c.cut(e.gname,s.NAME_MAXS_LEN)),n.initBadge(this.self,e?e.gicon:0)},openMenu:function(t){this.menu.getComponent("UIPopBase").show(),this.UIViewMenuBox.__showed({n:t,p:this.node,who:"player",owner:"dialog_tournament"})},clickRefrush:function(){var t=u.GET();if(t.tm<n.cutm())return u.DEFAULT(),this.player_lay.removeAllChildren(!0),this.init(),this.initRefrushBtn(),void r.EVENT_MESSAGEBOX("refresh_ok");var e=Math.ceil((t.tm-n.cutm())/1E3);r.EVENT_MESSAGEBOX("refresh_time",e)},update:function(t){this.waitTime>0&&(this.waitTime-=t,this.waitTime<=0?(this.mask.node.active=!1,this.waitTime=0):this.mask.alphaThreshold=1-this.waitTime/5)},initRefrushBtn:function(t){this.mask.node.active=!0,this.waitTime=t||5},openHelp:function(){r.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_tournament",param:{text:"tournamentRule"}})},initAwdData:function(t,e){for(var i in e){var o=n.show(t,"tar"+(1*i+1)),a=h.itemn(e[i].k);n.imgs(o,a.icon,"icon"),n.text(o,"num",e[i].v)}},onUiFlyInEnd:function(t){r.EVENT_DIALOG_SHOWED(this)}});u._SCORE_=0,u.DEFAULT=function(){return u.RANKDATA={showedIndex:-1,arr:[],tm:n.cutm()+5E3,isend:0,score:0},u.RANKDATA},u.GET=function(){return u.RANKDATA?u.RANKDATA:u.DEFAULT()},u._reading_=!1,u.getRLst=function(e,i){var n=u.GET();e<=n.showedIndex?i(n):n.isend||u._reading_||(u._reading_=!0,t("ActivityLogic").chprlst(e,function(t){if(u._reading_=!1,t.length<=0)return n.isend=!0,void i(n);for(var e in void 0!=t.myrank&&(n.myrank=t.myrank),void 0!=t.rank_index&&(n.showedIndex=1*t.rank_index),n.score=o.get(o.WKD_CHP_STAR),delete t.rank_index,delete t.myrank,delete t.length,t)n.arr.push(t[e]);i(n)}))},cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameCommon:"GameCommon",GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",JsonMetaCache:"JsonMetaCache",StringUtils:"StringUtils",UIDialog:"UIDialog",UserLogic:"UserLogic",WorkData:"WorkData"}],UIToys:[function(t,e,i){cc._RF.push(e,"8303c6hmeVAeoRjtTxFDKDm","UIToys"),cc.Class({"extends":t("UIBlock"),properties:{},onLoad:function(){cc.log("UIToys")},start:function(){}}),cc._RF.pop()},{UIBlock:"UIBlock"}],UITryPlayItem:[function(t,e,i){cc._RF.push(e,"c30f4o8iWJCKL7DYLIYxkUc","UITryPlayItem");var n=t("N7Resource"),o=cc.Class({"extends":cc.Component,properties:{bk:{type:cc.Sprite,"default":null},tile:{type:cc.Label,"default":null},desc:{type:cc.Label,"default":null},icon:{type:cc.Sprite,"default":null},btnLabel:{type:cc.Label,"default":null},btn:{type:cc.Node,"default":null},btnBk:{type:cc.Sprite,"default":null},btnBkL:{type:cc.Sprite,"default":null},bkTextures:{type:cc.SpriteFrame,"default":[]},btnTextures:{type:cc.SpriteFrame,"default":[]},btnLTextures:{type:cc.SpriteFrame,"default":[]}},statics:{btn_name:["\u8bd5\u73a9","\u9886\u53d6","\u53bb\u73a9"]},start:function(){},setData:function(t){this.id=t.taskId,this.tile.string=t.name,this.desc.string=t.desc,this.bk.spriteFrame=this.bkTextures[t.status<=1?0:1];var e=0;t.status>=2&&(e=0==t.awareAccpetStatus?1:2),this.btnLable.string=o.btn_name[e],this.btnBk.spriteFrame=this.btnTextures[e],this.btnBkL.spriteFrame=this.btnLTextures[e],n.textureFromURL(t.icon,"png",function(t){this.icon.spriteFrame=t},this)}});cc._RF.pop()},{N7Resource:"N7Resource"}],UITryPlay:[function(t,e,i){cc._RF.push(e,"5d849c7vydLKZQXYXRz/Je8","UITryPlay"),t("UITryPlayItem");var n=t("GameTools"),o=t("GameEvent");cc.Class({"extends":t("UIDialog"),properties:{list:{"default":null,type:t("N7AsynchList")},mask:{"default":null,type:cc.Node}},statics:{},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){},showed:function(){this.refreshData(),n.cmpt(this.node,"center/concent",cc.ScrollView).scrollToTop(0)},refreshData:function(){this.list.onAddNode=function(t,e){t.getComponent("UITryPlayItem").setData(e)},this.list.setList(sdk_hortor.wallTasks,0,!1)},onUiFlyInEnd:function(t){o.EVENT_DIALOG_SHOWED(this)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7AsynchList:"N7AsynchList",UIDialog:"UIDialog",UITryPlayItem:"UITryPlayItem"}],UIUnhaveClub:[function(t,e,i){cc._RF.push(e,"bda44y+ZppNyocVUhxb3K/v","UIUnhaveClub");var n=t("GameTools"),o=t("GameEvent");cc.Class({"extends":t("UIDialog"),properties:{btn_join:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btnc(this.content,"help",n.makef(this.openHelp,this),1),n.btn(this.btn_join,n.makef(this.turnClub,this),1)},showed:function(t){this.p=t},turnClub:function(){this.closeDialog(),o.EVENT_GOTO_SKIP_DIALOG(3)},openHelp:function(){var t="";if(this.p&&this.p.id){var e=this.p.id;1==e?t="contendRule":2==e&&(t="treasureRule")}o.EVENT_OPEN_DIALOG({name:"dialog_general_rule",owner:"dialog_unhave_club",param:{text:t}})}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",UIDialog:"UIDialog"}],UIViewMenuBox:[function(t,e,i){cc._RF.push(e,"ceb17z4n5BJfbKhKcwp5piW","UIViewMenuBox");var n=t("GameTools"),o=t("GameEvent"),a=t("GuildLogic"),s=t("UserLogic");cc.Class({"extends":cc.Component,properties:{content:{"default":null,type:cc.Node}},onLoad:function(){this.__initEvent()},__initEvent:function(){n.btnc(this.node,"btn_kick",n.makef(this.kick,this),1),n.btnc(this.node,"btn_p",n.makef(this.appo,this,a.PWR_CAPTAIN),1),n.btnc(this.node,"btn_dp",n.makef(this.appo,this,a.PWR_VICEC),1),n.btnc(this.node,"btn_m",n.makef(this.appo,this,a.PWR_MEMBER),1),n.btnc(this.node,"btn_view",n.makef(function(){o.EVENT_OPEN_DIALOG({name:"dialog_club_information",param:this.pid,owner:this.owner})},this),1),n.btnc(this.node,"btn_chat",n.makef(this.mailChat,this),1)},__showed:function(t){var e=t.n,i=t.who,o=t.p;this.owner=t.owner;var c=o.getContentSize(),r=n.nodeToNodePos(e,this.content),l=o.y,h=n.cmpt(this.node,null,cc.Layout);if(r.y<-(c.height-l-this.node.height)){this.node.rotation=180;for(var u=0;u<this.node.childrenCount;u++)this.node.children[u].rotation=180;h.verticalDirection&&(h.verticalDirection=0)}else if(!h.verticalDirection){this.node.rotation=0;for(var d=0;d<this.node.childrenCount;d++)this.node.children[d].rotation=0;h.verticalDirection=1}for(var f=0;f<this.node.childrenCount;f++)this.node.children[f].active=!1;if(this.pid=e.tag,this.node.position=r,"club"!=i){if("msg"==i)return this.node.x+=200,void n.show(this.node,"btn_chat");if("member"==i){var g=a.instance().members[e.tag],p=a.instance().self,_=1*p.a,m=1*g.a,v=_>m;if(!v||g.id==p.id)return void(this.node.active=!1);this.node.x+=200,n.play(this.node.parent),v&&n.show(this.node,"btn_kick"),_==a.PWR_CAPTAIN&&(m!=a.PWR_CAPTAIN&&n.show(this.node,"btn_p"),m!=a.PWR_VICEC&&n.show(this.node,"btn_dp"),m!=a.PWR_MEMBER&&n.show(this.node,"btn_m"))}else if("player"==i){if(s.pid()==e.tagp)return void(this.node.active=!1);n.show(this.node,"btn_view"),this.node.x+=200}}else n.show(this.node,"btn_view")},kick:function(){var t=this,e={fo:function(){a.leave(t.pid,function(t){t.code?t.code>0?o.EVENT_MESSAGEBOX("Guild.quit"+t.code):o.EVENT_MESSAGEBOX("Guild.error",t.code):o.EVENT_MESSAGEBOX("Guild.quitok")})},title:"club.kick",lab:"club.whether",name:a.getMember(this.pid).n,labc:"club.kickclub",yes:"confirm",no:"cancel"};o.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:e})},appo:function(t){var e={mid:this.pid,auth:t},i=this,s=a.getMember(this.pid).n,c={fo:function(){a.appo(e,function(e){if(e.code)e.code>0?o.EVENT_MESSAGEBOX("Guild.appo"+e.code):o.EVENT_MESSAGEBOX("Guild.error",e.code);else{var s=a.getMember(i.pid).n,c=n.i18ns("Guild.appoto"),r=n.i18ns("Guild.auth_"+t);o.EVENT_MESSAGEBOX(s+c+r)}})},title:"Guild.appo",lab:"club.whether",labc:"Guild.appo_"+t,name:s,yes:"confirm",no:"cancel"};o.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:c})},mailChat:function(){o.EVENT_MESSAGEBOX("unopen")}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",GuildLogic:"GuildLogic",UserLogic:"UserLogic"}],UIVirus:[function(t,e,i){cc._RF.push(e,"31c33g1rfBJa5ujcKV8LuwW","UIVirus");var n=t("GameTools"),o=cc.Class({"extends":t("UIBlock"),properties:{jelly:{type:cc.Node,"default":null}},statics:{anims:["left","right","down","up"]},start:function(){},init:function(){if(!this.sk){this.sk=n.cmpt(this.node,"virus/jelly",sp.Skeleton);var t=this;this.sk.setCompleteListener(function(e){t.playEnd()})}this.sp||(this.sp=n.cmpt(this.node,"virus",cc.Sprite)),this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this))},setParams:function(t){this.init(),this.params=t},playCreateAnim:function(t,e,i){this.callFunc=e,this.caller=i,this.params?(this.sk.node.active=!0,this.sp.enabled=!1,this.jelly.position=this.node.convertToNodeSpaceAR(this.params.pos),this.sk.setAnimation(0,o.anims[this.params.dir],!1),this.params=null):(this.am.play("jelly_add"),this.sp.enabled=!0),this.sound(0)},playEnd:function(){this.jelly.position=cc.p(0,0),this.sp.enabled=!0,this.sk.node.active=!1,this.callFunc&&this.callFunc.call(this.caller),this.callFunc=this.caller=null},clear:function(){}});cc._RF.pop()},{GameTools:"GameTools",UIBlock:"UIBlock"}],UIWashing:[function(t,e,i){cc._RF.push(e,"5a3d8hAqUdJia8nDngX55xq","UIWashing");var n=t("GameCommon"),o=t("N7UIEffectLayer"),a=t("N7Resource"),s=cc.Class({"extends":t("UICannonBase"),properties:{},statics:{FLYTO_ENERGY_PARAMS:{scale1:.5,scale2:.3,p1:{offset:45},p2:{offset:-45},speed:.001,maxTime:.5}},onLoad:function(){this.am||(this.am=this.getComponent(cc.Animation),this.am.on("finished",this.playEnd,this))},init:function(t){},fire:function(){this._super(),this.am.play(),this.shot()},shot:function(){var t=a.createNodeFromId(5024,"effect_base");o.addNodeInCube(this.tile,t,function(t){t.playEffect()},this),this._super(s.FLYTO_ENERGY_PARAMS),this.sound()},setData:function(t,e,i,o,a){this._super(t,e,i,o,a),i&&i.call(o,n.CUBE_SETPARAM_ALL)},checkFire:function(t){return t.cmd==n.com_create||t.cmd==n.com_chgto},playEnd:function(){}});cc._RF.pop()},{GameCommon:"GameCommon",N7Resource:"N7Resource",N7UIEffectLayer:"N7UIEffectLayer",UICannonBase:"UICannonBase"}],UIWhetherExitGame:[function(t,e,i){cc._RF.push(e,"5cc2101V55Kval3ty2eJhL2","UIWhetherExitGame");var n=t("GameTools"),o=t("GameEvent");t("UserLogic"),cc.Class({"extends":t("UIDialog"),properties:{btn_leave:{"default":null,type:cc.Node}},onLoad:function(){this._super(),this.__initEvent()},__initEvent:function(){n.btn(this.btn_leave,n.makef(this.leaveGame,this),1)},showed:function(){this.is_touch=!1},closeDialog:function(){this._super()},leaveGame:function(){this.is_touch||(this.is_touch=!0,t("ActivityLogic").canAssaultNotice()?o.EVENT_OPEN_DIALOG({name:"dialog_assault_notice",param:{leave:1,funcLeave:this.openGateEntrance}}):this.openGateEntrance())},touchBackground:function(){this.closeDialog()},openGateEntrance:function(){t("UIGameV2").instance().showGateEntrance()}}),cc._RF.pop()},{ActivityLogic:"ActivityLogic",GameEvent:"GameEvent",GameTools:"GameTools",UIDialog:"UIDialog",UIGameV2:"UIGameV2",UserLogic:"UserLogic"}],UserDataV2:[function(t,e,i){cc._RF.push(e,"0f4c2l/6V5ITL054fJPTnw6","UserDataV2");var n=t("GameTools"),o=t("AccessUD"),a=t("FamNet"),s=t("TDLog"),c=t("n7"),r=t("GameEvent"),l=function(t){this._pid_=t,this._NSAVE_=null,this._SAVEING_=!1,this._SAVEFIELD_=0,this._SAVEID_=0,this._CHKSV_=0};e.exports=l,l.instance=function(){return l.__ins},l.update=function(){s.update();var t=l.instance();t._CHKSV_<=0?(l.savev2(),t._CHKSV_=t._SAVEFIELD_,t._CHKSV_>60&&(t._CHKSV_=60)):t._CHKSV_--},l.get=function(t,e){if(void 0==t)return l.__ins;var i=l.__ins;return e?i[e][t]:i[t]},l.add=function(t,e,i){if(void 0==i&&(i=1),!(i<1)){var n=l.geti(t,e)+i;return l.set(t,n,e),n}},l.geti=function(t,e){var i=l.get(t,e);return i=parseInt(i),isNaN(i)?0:i},l._set_=function(t,e,i){var n=l.__ins;return i?n[i][t]=e:n[t]=e,e},l.set=function(t,e,i){return i||(i="user"),l._set_(t,e,i),c.log("UsetDataV2:set:"+t),"user"==i&&l.nsave(t,i),e},l.init=function(e,i,n){l.__ins=new l(i),void 0==e.nkname&&(e.nkname="n7test");var o=t("UserLogic").init(e);s.login(i,o.get("nkname"),o.geti("lev"),n),l._set_("pid",i,"user"),t("GameLogic").resetDataFromSdk(),t("ItemsLogic").init(e.items),t("WorkData").init(e.workdata),t("AchieveLogic").init(e.build),t("SignLogic").init(e.sign),t("ActivityLogic").init(),t("ShareLogic").init(),e.time&&l.time(e.time),t("GameLogic").init()},l.time=function(t,e){var i=l.get();i.sv_time=t,i.sv_tzone=e,i.cl_time=n.timestamp()},l.cutm=function(){var t=l.get();return t.sv_time?t.sv_time+n.timestamp()-t.cl_time:n.timestamp()},l.SVFD="order",l.nsave=function(t,e){var i=l.instance();if(i._NSAVE_||(i._NSAVE_={}),!i._SAVEID_){var n=l.SVFD;i._SAVEID_=l.geti(n,"user")+1,l._set_(n,i._SAVEID_,"user")}i._NSAVE_[t]=1},l.getSave=function(e,i){var n=l.UserLogic;return n||(n=l.UserLogic=t("UserLogic")),n.isMyField(e)?l.get(e,"user"):l.get(e).toString()},l.savev2=function(){var t=l.instance();if(t._NSAVE_&&!t._SAVEING_){var e=t._NSAVE_;t._NSAVE_=void 0;var i={};for(var n in e)void 0==i[n]&&(i[n]=l.getSave(n));var s=l.SVFD;if(i[s]=l.geti(s,"user"),o.JSave(i,t._pid_),c.log("savev2 data:"+i[s]),!c.CS)return t._SAVEFIELD_=0,void(t._SAVEID_=0);t._SAVEING_=!0,a.user_set(i,function(e){if(t._SAVEING_=!1,e&&e.code){for(var n in i)l.nsave(n);t._SAVEFIELD_++}else t._SAVEFIELD_=0,t._SAVEID_=0})}},l.saveAll=function(t,e){delete t.nkname,delete t.icon,delete t.sex;var i={};for(var n in t)void 0!=t[n]&&null!=t[n]&&"null"!=t[n]&&t[n]!=e[n]&&(i[n]=t[n]);l._SAVEING_=!0,a.user_set(i,function(t){l._SAVEING_=!1})},l.save=function(){if(l._NSAVE_&&!l._SAVEING_){l._SAVEING_=!0;var t=l._NSAVE_;l._NSAVE_=null;var e={};for(var i in t)i&&!e[i]&&(e[i]=l.getSave(i));c.CS?a.user_set(e,function(e){if(l._SAVEING_=!1,e&&e.code){for(var i in t)l.nsave(i);if(++l.SAVEFAILD>5){var n={fo:a.logout,closefo:a.logout,title:"hintt",lab:"login.neterr",yes:"login.again"};r.EVENT_OPEN_DIALOG({name:"dialog_reconfirm_box",param:n})}}else l.SAVEFAILD=0}):o.JSave(e)}},cc._RF.pop()},{AccessUD:"AccessUD",AchieveLogic:"AchieveLogic",ActivityLogic:"ActivityLogic",FamNet:"FamNet",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",ItemsLogic:"ItemsLogic",ShareLogic:"ShareLogic",SignLogic:"SignLogic",TDLog:"TDLog",UserLogic:"UserLogic",WorkData:"WorkData",n7:"n7"}],UserLogic:[function(t,e,i){cc._RF.push(e,"d3e08KYutBPBYAuFH3o4kpZ","UserLogic");var n=t("GameTools"),o=t("UserDataV2"),a=t("GameEvent"),s=t("GameCommon"),c=t("ItemsLogic"),r=t("TDLog"),l=t("n7"),h=t("FamNet"),u=t("JsonMetaCache"),d=function(){};d.fields=["nkname","sex","icon","lev","gold","order","heart","heart_tm","star","music","sound","share","guiid","silver","ad"],d.prototype.__init=function(t){t.lev>d._GETMAXLEV_()&&(t.lev=d._GETMAXLEV_()),n.copy_keys(this,t,d.fields),t.createtm?this.createtm=new Date(t.createtm):this.createtm=new Date},d.prototype._set_=function(t,e){return this[t]=e,e},d.prototype.set=function(t,e){return this._set_(t,e),o.nsave(t,"user"),e},d.prototype.get=function(t){return this[t]},d.prototype.geti=function(t){var e=this.get(t);return e?1*e:0},d._MAX_=30,d._SUMTM_=360,d._SUB_=6,d._UNLIMITED_=9999,d.MAIL_SYSTEM=1,d.MAIL_HEART=2,d.get=function(t){return o.get(t,"user")},d.geti=function(t){return o.geti(t,"user")},d.set=function(t,e){return"lev"==t&&e>d._GETMAXLEV_()&&(e=d._GETMAXLEV_()),o.get("user").set(t,e)},d.isMyField=function(t){if(!d.fields_obj){var e=d.fields;d.fields_obj={};for(var i=0;i<e.length;i++)d.fields_obj[e[i]]=1}return void 0!=d.fields_obj[t]},d.add=function(t,e,i){void 0==e&&(e=1);var n=o.geti(t,"user");return e<1?n:(n=d.set(t,n+1*e),i||a.EVENT_UDATA_CHG({n:t,v:n,add:!0}),n)},d.sub=function(t,e){void 0==e&&(e=1);var i=o.geti(t,"user");return!(e<1)&&!(i-1*e<0)&&(i=d.set(t,i-1*e),a.EVENT_UDATA_CHG({n:t,v:i}),i)},d._GETMAXLEV_=function(){return l.BS?80:s.MAX_LEVEL},d.addStar=function(e){var i=t("GameLogic").getStarBox();i.star>=i.max||e&&d.add("star",e)},d.pid=function(){return 1*h.pid()},d.levelup=function(e,i){null==e&&(e=1);var n=d.geti("lev");if(!(n>=d._GETMAXLEV_())){d.add("lev"),d.addStar(e),d.addHeart(d._SUB_),r.levelup(n);var o=t("AchieveLogic");if(o.updateAchieve(s.ACHIEVE_STAR,e),o.updateAchieve(s.ACHIEVE_LEVEL,n),e>=3&&o.updateAchieve(s.ACHIEVE_14,1),t("GameLogic").crossSuccess(d.geti("lev"),e,i),t("SdkIns").instance().canShare()){var a=d.getsh(d.SHDT_NOR);1==u.map(n).hard&&parseInt(a%100/10)<1?d.setsh(a+10,d.SHDT_NOR):a%10<4&&(a=d.setsh(a+1,d.SHDT_NOR))}}},d.getLevel=function(){return d.geti("lev")},d.sup_sum_tm=function(){return d._HEART_(),o.get("sup_sum_tm","user")},d.heart=function(){var t={h:d._HEART_()};return t.tm=o.get("sup_sum_tm","user"),t},d._HEART_=function(){if(d.isInuUnlimitedHeartState())return d._UNLIMITED_;var t=o.get("user"),e=1*t.heart;if(void 0==e||e>=d._MAX_)return d.FULLHEART(t);if(e==d._MAX_)return e;var i=t.heart_tm,n=o.cutm(),a=n-i;t._set_("sup_sum_tm",d._SUMTM_-a);var s=parseInt(a/d._SUMTM_);return s<1?e:(e+=s)>=d._MAX_?d.FULLHEART(t):(i=t.set("heart_tm",n-a%d._SUMTM_),t._set_("sup_sum_tm",d._SUMTM_-(n-i)),t.set("heart",e))},d.FULLHEART=function(t){return t.set("heart_tm",0),t._set_("sup_sum_tm",0),t.set("heart",d._MAX_)},d.addHeart=function(t){if(!d.isInuUnlimitedHeartState()){void 0==t&&(t=1);var e=o.geti("heart","user");o.set("heart",e+t,"user"),a.EVENT_UDATA_CHG({n:"heart",v:d.heart(),add:!0})}},d.subHeart=function(t){if(!d.isInuUnlimitedHeartState()){void 0==t&&(t=d._SUB_);var e=d._HEART_();if(e<t)l.log("sub heart error!");else{var i=o.get("user");i.set("heart",e-t),i.get("heart_tm")||i.set("heart_tm",o.cutm()),a.EVENT_UDATA_CHG({n:"heart",v:d.heart()})}}},d.unlimitedHeart=function(t){var e=o.get("user");if(e&&!(t<0)){var i=0|3600*t,n=o.cutm(),s=0;d.isInuUnlimitedHeartState()&&(n=parseInt(e.get("heart_tm")),s=parseInt(o.get("sup_sum_tm","user"))),e.set("heart",d._UNLIMITED_),e.set("heart_tm",n+i),e._set_("sup_sum_tm",s+i),a.EVENT_UDATA_CHG({n:"heart",v:d.heart()})}},d.isInuUnlimitedHeartState=function(){var t=!1,e=0,i=o.get("user");return i&&i.heart==d._UNLIMITED_&&((e=o.cutm()-i.heart_tm)>=0?d.FULLHEART(i):(t=!0,i._set_("sup_sum_tm",Math.abs(e)))),t},d.isFullHeart=function(){return d.isInuUnlimitedHeartState()||d.geti("heart")>=d._MAX_},d.init=function(e){var i=o._set_("user",new d);if(i.__init(e),e.GM&&t("GameConfig").set("gm",1),0==i.geti("lev")&&(i.set("lev",1),i.set("heart",d._MAX_),r.levelup(1),l.BS)){var n=t("MathUtils").randArray([1,20,40,60]);i.set("lev",n),i.set("star",3*n),i.set("gold",1E3*n),i.set("silver",1E3*n)}return o._set_("music",1,"user"),o._set_("sound",1,"user"),i},d.awdidton=function(t){var e=[],i=void 0;for(var n in t)i=u.item(n),e.push({k:i.id_name,v:t[n]});return e},d.award=function(t,e,i){void 0==t[0]&&(t=[t]),l.log("award:"+JSON.stringify(t)),r.Event("award_"+e,{count:1});for(var n=0;n<t.length;n++)switch(t[n].k){case "silver":d.addSilver(1*t[n].v,e,t[n].u);break;case "gold":d.addGold(1*t[n].v,e,t[n].u);break;case "star":d.add("star",t[n].v);break;case "heart":d.addHeart(1*t[n].v);break;case "FullPower":d.addHeart(d._MAX_);break;case "unheart":d.unlimitedHeart(1*t[n].v);break;default:c.add(t[n].k,1*t[n].v,e)}},d.useItem=function(t,e,i){if(c.get(t)<1)i&&i(s.USEITEM_RESULT1);else{var n=u.itemn(t);if(n){var o=n.useItems_obj;if(o){null==e&&(e="useItem");for(var a=0,r=void 0,l=void 0,h=!1,f=0;f<o.length;f++)switch(r=o[f].name,l=o[f].num,r){case "silver":d.addSilver(1*l,e);break;case "gold":d.addGold(1*l,e);break;case "star":d.add("star",l);break;case "heart":d.isFullHeart()?h=!0:d.addHeart(1*l);break;case "FullPower":d.isFullHeart()?h=!0:d.addHeart(d._MAX_);break;case "unheart":d.unlimitedHeart(1*l);break;default:a++}return a>=o.length?void(i&&i(s.USEITEM_RESULT4)):h?void(i&&i(s.USEITEM_RESULT5)):(c.sub(t,1,e),void(i&&i(s.USEITEM_RESULT0)))}i&&i(s.USEITEM_RESULT3)}else i&&i(s.USEITEM_RESULT2)}},d.addGold=function(e,i,n){var o=0|d.get("gold");o+e>99999999&&(e=99999999-o)<0&&(e=0);var a=d.add("gold",e,n);r.reward(e,a,"gold_"+i),t("AchieveLogic").updateAchieve(s.ACHIEVE_15,a)},d.addSilver=function(t,e,i){var n=d.add("silver",t,i);r.reward(t,n,"silver_"+e)},d.buy=function(t,e){if(t.why||l.error("UserLogic:buy:not why! gold:"+t.gold+":star:"+t.star),void 0==e&&(e=t.fo),t.gold>0){var i=d.sub("gold",t.gold);return!1===i?(l.log("UserLogic:buy:"+t.why+":gold:"+t.gold+":error:-1002"),e&&e(-1002),-1002):(r.purchase("gold:"+t.why,t.gold,i),e&&e(0),0)}if(t.silver>0){var n=d.sub("silver",t.silver);return!1===n?(l.log("UserLogic:buy:"+t.why+":silver:"+t.silver+":error:-1002"),e&&e(-1003),-1003):(r.purchase("silver:"+t.why,t.silver,n),e&&e(0),0)}},d.getAd=function(){var t=d.geti("ad"),e=parseInt(t/1E3),i=n.today();return e!=i?(d.set("ad",1E3*i),0):t%1E3},d.watchAded=function(){return r.Event("watchaded",{count:1}),d.getAd(),d.add("ad")%1E3<=6},d.canAd=function(){return t("SdkIns").instance().isAd()&&d.getAd()<=6},d.SHDT_NOR=1,d.SHDT_DAY=2,d.getsh=function(e){var i=n.today(),o=d._SHARE_DATA_;if(!o){var a=d.get("share");(!a||a.length<1)&&(a=i+"|0|0"),o=d._SHARE_DATA_=t("StringUtils").atois(a,"|")}if(o[0]!=i){var s=parseInt(o[2]/10);0==s&&(s=o[0],o[2]=10*s+o[2]%10),s!=i&&n.dayDifference(s)>1&&(o[2]=0),o[0]=i,o[1]=0,d.set("share",o[0]+"|0|"+o[2])}return void 0==e?o:o[e]},d.setsh=function(t,e){var i=d._SHARE_DATA_;return i?(i[e]=t,d.set("share",i[0]+"|"+i[1]+"|"+i[2]),t):-1},d._UPCNT_=0,d.update=function(t){d._UPCNT_%30==0&&d.getMsgs(),d._UPCNT_++},d._MSGOPER_=!1,d.getMsgs=function(){var t={lastid:d._MSGOPER_?1:0};h.unified_send("UMsgs/get2",t,function(t){var e=d._MSGOPER_;d._MSGOPER_=!0,void 0==t.code||1*t.code==0?d.updateMsgs(t,e):l.info("get:msgs:"+t.code+":"+t.msg)})},d.allmsgs=function(){return d._msgs_},d._msgs_={},d.updateMsgs=function(t,e){var i=void 0,n=void 0,o=[],s=void 0;for(s in t)o.push(JSON.parse(t[s]));for(s in o.sort(function(t,e){return t.create_time-e.create_time}),o)i=(n=o[s]).id,d._msgs_[i]=n,a.EVENT_MESSAGE({oper:"new",msg:n}),e&&n.exdt&&d.autoOperMsgCmd(n);o.length>0&&a.EVENT_MESSAGE({oper:"all"})},d.autoOperMsgCmd=function(e){var i=e.exdt;if(!(i.length<1||i.indexOf("|")<0)){var n=i.split("|");switch(n[0]){case "quit":t("GuildLogic").quitTo();break;case "join":t("GuildLogic").joinTo(n[1]);break;case "refuse":a.EVENT_MESSAGEBOX("Guild.applyno",n[1])}}},d.readOperMsgCmd=function(t){var e=t.exdt;if(!(e.length<1||e.indexOf("|")<0))switch(e.split("|")[0]){case "help":d.addHeart(3)}},d.readMsg=function(t,e){var i={msgid:t};h.unified_send("UMsgs/read",i,function(i){if(i.code)l.info("read:msgs:"+i.code+":"+i.msg);else{var n=d._msgs_[t];n&&(d.readOperMsgCmd(JSON.parse(i)),e&&e(n),delete d._msgs_[t],a.EVENT_MESSAGE({oper:"read",msg:n}))}})},d.getRankList=function(e,i){if(!t("SdkIns").instance().getRankList(e,i)){var o=e?{page:e}:{};h.unified_send("user/rlst",o,function(t){i&&i(n.parse_rlst(t))})}},d.pay=function(e,i){t("FamNet").pay(e,function(e){var n={title:"pay_ok"},o="PAY_"+e.orderid,s=!1;if(e.gold){var r=1*e.gold;e.gift&&(r+=1*e.gift),n.gold=r,d.addGold(r,o),s=!0}if(e.item)for(var l in e.item){var h=u.item(l);if(h||(h=u.itemn(l)),h){n[h.id_name]=e.item[l],s=!0;var f=h.id_name,g=1*e.item[l];switch(f){case "silver":d.addSilver(g,o);break;case "gold":d.addGold(g,o);break;case "star":d.add("star",g);break;case "heart":d.addHeart(g);break;case "FullPower":d.addHeart(d._MAX_);break;case "unheart":d.unlimitedHeart(g);break;default:c.add(f,g,o)}}}t("ReChargeLogic").recharge(0|e.price),s&&a.EVENT_OPEN_DIALOG({name:"dialog_achieve_notice",param:n}),i&&i(e)})},e.exports=d,cc._RF.pop()},{AchieveLogic:"AchieveLogic",FamNet:"FamNet",GameCommon:"GameCommon",GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",GuildLogic:"GuildLogic",ItemsLogic:"ItemsLogic",JsonMetaCache:"JsonMetaCache",MathUtils:"MathUtils",ReChargeLogic:"ReChargeLogic",SdkIns:"SdkIns",StringUtils:"StringUtils",TDLog:"TDLog",UserDataV2:"UserDataV2",n7:"n7"}],WorkData:[function(t,e,i){cc._RF.push(e,"991bcBXOylIuarf1XO2ZKtQ","WorkData");var n=t("StringBuilder"),o=t("UserDataV2"),a=function(){this.wdarr=[]};e.exports=a,a.VER="A",a.MARK="z",a.STR="s",a.SP="|",a.field="workdata",a.prototype.get=function(t){return this.wdarr[t]?this.wdarr[t]:0},a.prototype.set=function(t,e){return this.wdarr[t]=e,o.nsave(a.field),e},a.prototype.toString=function(){for(var t=new n(a.SP),e=0,i=0,o=this.wdarr.length,s=0;s<o;s++)void 0!=(i=this.wdarr[s])&&0!=i?(e>0&&(t.Append(a.MARK+e),e=0),t.Append(i)):e++;return a.VER+t.toString()},a.prototype.__init=function(t){if(t&&!(t.length<1)&&t.charAt(0)==a.VER){for(var e=[],i=0,n=(t=t.substring(1)).split(a.SP),o=0;o<n.length;o++)n[o][0]==a.MARK?i+=parseInt(n[o].substring(1)):n[o][0]==a.STR?e[i++]=n[o]:e[i++]=parseInt(n[o]);this.wdarr=e}},a.init=function(t){o._set_("workdata",new a).__init(t)},a.get=function(t){var e=o.get("workdata");return e?e.get(t):0},a.geti=function(t){return 1*a.get(t)},a.set=function(t,e){return o.get("workdata").set(t,e)},a.add=function(t,e){var i=o.get("workdata"),n=i.get(t);return void 0==e&&(e=1),0==e?n:i.set(t,n+e)},a.WKD_LEV_GIFT=0,a.WKD_GUIDE=1,a.WKD_WELCOME_GF=2,a.WKD_ASSAULT=3,a.WKD_FAILEDCOUNT=4,a.WKD_LASTSIGNTM=5,a.WKD_CHP=6,a.WKD_CHP_STAR=7,a.WKD_STAR_BOX=8,a.WKD_ASSAULT_STARLV=9,a.WKD_BACK_GIFT=10,a.WKD_BACK_SHARE=11,a.WKD_RECHARGE=12,a.WKD_ADD_DESKTOP=13,a.WKD_SUBSCRIBE=14,a.WKD_TOWER_LEVEL=15,a.WKD_GIFT=16,a.WKD_BATTLE_GIFT=17,a.WKD_DIAL_GIFT=18,cc._RF.pop()},{StringBuilder:"StringBuilder",UserDataV2:"UserDataV2"}],allcolor:[function(t,e,i){cc._RF.push(e,"045528uNTVAipFgoTFJ1Y7Z","allcolor"),cc.Class({"extends":cc.Component,properties:{color:{type:cc.Color,"default":null,notify:function(){this.setAllColor(this.color)}},findAllSprite:{type:cc.SpriteFrame,"default":null,notify:function(){null!=this.findAllSprite&&this._findAllSprite()}},findAllLabel:{"default":!1,notify:function(){this._findAllLabel()}},findComp:{"default":"",notify:function(){this._findComp(this.node,"",this.findComp)}}},onLoad:function(){},setAllColor:function(){var t=this.node.children;for(var e in t)t[e].color=this.color},_findAllLabel:function(t,e){void 0==t&&(t=this.node),t.getComponent(cc.Label)&&cc.log("findLabel find path:"+e);var i=t.children;for(var n in i)this._findAllLabel(i[n],e+"/"+i[n].name)},_findAllSprite:function(t,e,i){void 0==t&&(t=this.node);var n=t.getComponent(cc.Sprite);n&&n.spriteFrame&&n.spriteFrame._uuid==this.findAllSprite._uuid&&cc.log("findSprite find path:"+e),(n=t.getComponent(cc.Mask))&&n.spriteFrame&&n.spriteFrame._uuid==this.findAllSprite._uuid&&cc.log("findSprite find path:"+e);var o=t.children;for(var a in o)this._findAllSprite(o[a],e+"/"+o[a].name,i)},_findComp:function(t,e,i){t.getComponent(i)&&cc.log("findComp path:"+e);var n=t.children;for(var o in n)this._findComp(n[o],e+"/"+n[o].name,i)}}),cc._RF.pop()},{}],"blur.frag.bak":[function(t,e,i){cc._RF.push(e,"2a5baPIn2xCEY0WVPJEsIhN","blur.frag.bak"),e.exports="\n#ifdef GL_ES\n    precision mediump float;\n    #endif\n    uniform float bluramount;\n    varying vec2 v_texCoord;\n    vec4 draw(vec2 uv) {\n        return texture2D(CC_Texture0,uv).rgba; \n    }\n    float grid(float var, float size) {\n        return floor(var*size)/size;\n    }\n    float rand(vec2 co){\n        return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void mainImage( out vec4 fragColor, in vec2 fragCoord )\n    {\n        vec2 uv \x3d v_texCoord.xy;\n        vec4 blurred_image \x3d vec4(0.);\n        #define repeats 5.\n        for (float i \x3d 0.; i \x3c repeats; i++) { \n            vec2 q \x3d vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i,uv.x+uv.y))+bluramount); \n            vec2 uv2 \x3d uv+(q*bluramount);\n            blurred_image +\x3d draw(uv2)/2.;\n            q \x3d vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i+2.,uv.x+uv.y+24.))+bluramount); \n            uv2 \x3d uv+(q*bluramount);\n            blurred_image +\x3d draw(uv2)/2.;\n        }\n        blurred_image /\x3d repeats;\n        fragColor \x3d vec4(blurred_image);\n    }\n    void main()\n    {\n        mainImage(gl_FragColor, gl_FragCoord.xy);\n    }\n\n",cc._RF.pop()},{}],"blur.frag":[function(t,e,i){cc._RF.push(e,"09349Y0yYdJgKSQo5pOln6q","blur.frag"),e.exports="\n#ifdef GL_ES\n    precision mediump float;\n    #endif\n    uniform float bluramount;\n    varying vec2 v_texCoord;\n    vec4 draw(vec2 uv) {\n    return texture2D(CC_Texture0,uv).rgba; \n    }\n    float grid(float var, float size) {\n    return floor(var*size)/size;\n    }\n    float rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void mainImage( out vec4 fragColor, in vec2 fragCoord )\n    {\n    vec2 uv \x3d v_texCoord.xy;\n    vec4 blurred_image \x3d vec4(0.);\n    #define repeats 10.\n    for (float i \x3d 0.; i \x3c repeats; i++) { \n    vec2 q \x3d vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i,uv.x+uv.y))+bluramount); \n    vec2 uv2 \x3d uv+(q*bluramount);\n    blurred_image +\x3d draw(uv2)/2.;\n    q \x3d vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i+2.,uv.x+uv.y+24.))+bluramount); \n    uv2 \x3d uv+(q*bluramount);\n    blurred_image +\x3d draw(uv2)/2.;\n    }\n    blurred_image /\x3d repeats;\n    fragColor \x3d vec4(blurred_image);\n    }\n    void main()\n    {\n    mainImage(gl_FragColor, gl_FragCoord.xy);\n    }\n\n",cc._RF.pop()},{}],"blur.vert":[function(t,e,i){cc._RF.push(e,"fa96bcWJjhLTKg+QfUDrNou","blur.vert"),e.exports="\nattribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color; \n#ifdef GL_ES  \nvarying lowp vec4 v_fragmentColor;\nvarying mediump vec2 v_texCoord;\n#else                      \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord;  \n#endif    \nvoid main() \n{\n    gl_Position \x3d CC_PMatrix * a_position; \n    v_fragmentColor \x3d a_color;\n    v_texCoord \x3d a_texCoord;\n}\n\n",cc._RF.pop()},{}],cake_mix_highlight:[function(t,e,i){cc._RF.push(e,"9d8cbcu+RtE2rYuubTJe/kL","cake_mix_highlight");var n=t("N7Resource");cc.Class({"extends":t("effect_base"),properties:{boom:{type:cc.Node,"default":null}},init:function(t){this.cube=t;var e=t.node;if(this.zIndex=e.zIndex,e.zIndex=9999,this.block=t.popBlock(),!this.anima){var i=this;this.anima=this.getComponent(cc.Animation),this.anima.popCube=function(){i.popCube()}}this.block&&(this.block.node.parent=this.boom)},popCube:function(){if(this.cube){var t=this.block,e=this.cube;this.cube=this.block=null,t&&n.backPrefab(t.node),e.clearMix(),e.pushBlock(t),e.node.zIndex=this.zIndex}},removeSelf:function(){this.popCube(),this._super()}}),cc._RF.pop()},{N7Resource:"N7Resource",effect_base:"effect_base"}],cn:[function(t,e,i){cc._RF.push(e,"95e86UrBbtKXpbjH45aIis4","cn"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.cn={lang:"\u8bed\u8a00\u5305\u4e3a\u7b80\u4f53\u4e2d\u6587",login_bye:"\u518d\u89c1",game_copy:"\u9002\u9f84\u63d0\u793a\uff1a\u672c\u6e38\u620f\u9002\u540812\u5c81\u4ee5\u4e0a\u73a9\u5bb6\u53c2\u4e0e",advice:"\u62b5\u5236\u4e0d\u826f\u6e38\u620f\uff0c\u62d2\u7edd\u76d7\u7248\u6e38\u620f\u3002\u6ce8\u610f\u81ea\u6211\u4fdd\u62a4\uff0c\u8c28\u9632\u53d7\u9a97\u4e0a\u5f53\n\u9002\u5ea6\u6e38\u620f\u76ca\u8111\uff0c\u6c89\u8ff7\u6e38\u620f\u4f24\u8eab\u3002\u5408\u7406\u5b89\u6392\u65f6\u95f4\uff0c\u4eab\u53d7\u5065\u5eb7\u751f\u6d3b",load:"\u52a0\u8f7d\u4e2d",loading:"\u52a0\u8f7d\u4e2d%1",into_game:"\u8fdb\u5165\u6e38\u620f",restart_game:"\u91cd\u542f\u6e38\u620f",lv_box:"\u95ef\u5173\u5b9d\u7bb1",star_box:"\u7e41\u661f\u5b9d\u7bb1",levelgift:"\u5230\u8fbe%1\u5173\u9886\u53d6",box_unheart:"%1\u5173\u53ef\u83b7\u5f97\u65e0\u9650\u4f53\u529b%2\u5c0f\u65f6",open_box:"\u6253\u5f00\u5b9d\u7bb1",bag:"\u80cc\u5305",set:"\u8bbe\u7f6e",help:"\u5e2e\u52a9",level:"\u7b2c %1 \u5173",towerlevel:"\u6311\u6218%1\u5173",hard_lv:"\u96be\u5ea6\u5173\u5361",coming_soon:"\u656c\u8bf7\u671f\u5f85",unopen:"\u6b64\u529f\u80fd\u6682\u672a\u5f00\u653e",m_shop:"\u5546 \u5e97",m_mail:"\u90ae \u4ef6",m_main:"\u4e3b \u9875",m_club:"\u516c \u4f1a",m_rank:"\u6392\u884c\u699c",confirm:"\u786e\u5b9a",receive:"\u9886\u53d6","goto":"\u524d\u5f80",contiune:"\u7ee7\u7eed",quit:"\u9000\u51fa",begin:"\u5f00\u59cb",use:"\u4f7f\u7528",cancel:"\u53d6\u6d88",buy:"\u8d2d\u4e70",close:"\u5173\u95ed",browse:"\u6d4f\u89c8",send:"\u53d1\u9001",see:"\u67e5\u770b",agree:"\u540c\u610f",refuse:"\u62d2\u7edd",back:"\u8fd4\u56de",retry:"\u91cd\u8bd5",finish:"\u5b8c\u6210",log_off:"\u6ce8\u9500",ungold:"\u91d1\u5e01\u4e0d\u8db3",unsilver:"\u94f6\u5e01\u4e0d\u8db3",unstar:"\u661f\u661f\u4e0d\u8db3",unitem:"\u7269\u54c1\u4e0d\u8db3",keep_trying:"\u7ee7\u7eed\u52aa\u529b\uff01",hintt:"\u63d0\u793a",defaultInfo:"\u606d\u559c\u60a8\u83b7\u5f97",unlock_play:"\u89e3\u9501\u73a9\u6cd5",unnet:"\u65e0\u7f51\u7edc",player:"\u73a9\u5bb6",friend:"\u597d\u53cb",p_club:"\u516c\u4f1a",create:"\u521b\u5efa",lookup:"\u641c\u7d22",chat:"\u804a\u5929",myclub:"\u6211\u7684\u516c\u4f1a",lv:"\u5173\u5361",net_bad:"\u7f51\u7edc\u72b6\u51b5\u4e0d\u4f73,\u8bf7\u91cd\u8fde\u518d\u8bd5",ulev:"%1\u5173",lv_unlock:"\u5230\u8fbe%1\u5173\u89e3\u9501\u6b64\u9053\u5177",sbp:"\u9009\u62e9\u5f00\u573a\u9053\u5177",lv_fail:"\u5173\u5361\u5931\u8d25",gate_failt:"\u4f7f\u7528\u9053\u5177\u66f4\u5bb9\u6613\u901a\u5173\u54e6",rule:"\u89c4\u5219\u8bf4\u660e",get_awd:"\u83b7\u53d6\u5956\u52b1",join_club:"\u52a0\u5165\u516c\u4f1a",no_rank:"\u672a\u4e0a\u699c",no_club:"\u6682\u65e0\u516c\u4f1a",affiche:"\u516c\u544a",know:"\u77e5\u9053\u4e86",refresh_ok:"\u5237\u65b0\u6210\u529f",refresh_time:"%1\u79d2\u540e\u624d\u53ef\u5237\u65b0",unlock_item:"\u83b7\u5f97\u65b0\u9053\u5177",buyok:"\u8d2d\u4e70\u6210\u529f",only_back:"\u6bcf\u5173\u53ea\u80fd\u4f7f\u75281\u6b21[\u540e\u9000\u4e00\u6b65]\u9053\u5177\u54e6",only_ads:"\u6bcf\u5173\u53ea\u80fd\u89c2\u770b1\u6b21\u54e6",goal:"\u76ee\u6807",time:"\u65f6\u95f4",steps:"\u6b65\u6570",only_step:"\u53ea\u5269%1\u6b65\u5566\uff01",notice_item:"\u4f7f\u7528\u9053\u5177\u66f4\u5bb9\u6613\u901a\u5173\u54e6\uff01",notice_guide:"\u70b9\u51fb\u4efb\u610f\u4f4d\u7f6e\uff0c\u7ee7\u7eed\u6e38\u620f",notlev:"\u8fd8\u672a\u5230\u8fbe\u53ef\u5f00\u542f\u7684\u5173\u5361,\u52a0\u6cb9\u5594\uff01",unopen_atv:"%1\u5173\u5f00\u542f\u6b64\u6d3b\u52a8",ago:"\u524d",day:"\u5929",hour:"\u5c0f\u65f6",min:"\u5206\u949f",look_goal:"\u8bf7\u6ce8\u610f\u641c\u96c6\u76ee\u6807\u54e6\uff01",pay_ok:"\u8d2d\u4e70\u6210\u529f",join_open:"\u52a0\u5165\u516c\u4f1a\u53ef\u5f00\u542f\u6d3b\u52a8",invite:"\u5206\u4eab\u793c\u5305",invite1:"\u8d85\u8c6a\u534e\u793c\u5305",invite2:"\u53d1\u9001\u9080\u8bf7\u5373\u53ef\u62ff\u5956\uff0c\u6210\u529f\u9080\u8bf7\u5956\u52b1\u66f4\u4e30\u539a",invite3:"\u7acb\u5373\u9080\u8bf7",invite4:"\u672c\u6b21\u9080\u8bf7\u53ef\u83b7\u5f97",invite5:"\u4eca\u65e5\u53d1\u9001\u9080\u8bf7\u5956\u52b1\u5df2\u7ecf\u9886\u53d6\u5b8c\u4e86\u5466",invite6:"\u73b0\u5728\u8fd8\u4e0d\u80fd\u5206\u4eab\u54e6",payAuth:"\u7528\u6237\u672a\u6388\u6743",payNot:"\u6dd8\u91d1\u5e01\u4e0d\u8db3",payOver:"\u5546\u54c1\u8d2d\u4e70\u8d85\u9650",payClose:"\u60a8\u5df2\u53d6\u6d88\u652f\u4ed8",payError:"\u5145\u503c\u9519\u8bef%1",paySuccess:"\u5145\u503c\u6210\u529f%1",payFailed:"\u5145\u503c\u5f02\u5e38%1",click_balance:"\u70b9\u51fb\u7acb\u5373\u7ed3\u7b97",desktop:"\u6536\u85cf",guild_msg_hell:"\u5927\u5bb6\u597d\uff01\u6211\u662f[%1]\uff0c\u8bf7\u591a\u5173\u7167\u3002",author_cancel:"\u767b\u5f55\u53d6\u6d88",author_error:"\u767b\u5f55\u5931\u8d25[%1]",active_over:"\u6d3b\u52a8\u7ed3\u675f",icon_sign:"7\u65e5\u7b7e\u5230",icon_desktop:"\u6536\u85cf\u6709\u793c",icon_first:"\u9996\u5145\u793c\u5305",icon_recharge1:"\u9650\u65f6\u6253\u6298",icon_hortor:"\u516c\u4f17\u53f7",icon_tryplay:"\u79ef\u5206\u5899",jump:"\u8df3\u8fc7",click_rcv:"\u70b9\u51fb\u9886\u53d6",title:"\u6807\u9898",content:"\u5185\u5bb9",no_attend:"\u672a\u53c2\u52a0",mail_join_title:"\u52a0\u5165\u516c\u4f1a\uff0c\u5956\u52b1\u591a\u591a",mail_join_info:"\u9996\u6b21\u52a0\u5165\u516c\u4f1a\u53ef\u83b7\u5f972000\u91d1\u5e01",spring_ad:"\u5e7f\u544a\u5899",newyear_sign:{title:"\u65b0\u6625\u767b\u9646\u4eab\u597d\u793c",desc:"%1-%2\n\u6bcf\u65e5\u767b\u9646\u5373\u53ef\u9886\u53d6\u65b0\u6625\u52a9\u529b\u597d\u793c",day:"\u7b2c%1\u5929",tomorrow:"\u660e\u65e5\u53ef\u9886",shareGet:"\u5206\u4eab\u9886\u53d6",watchGet:"\u89c2\u770b\u9886\u53d6",hasGet:"\u5df2\u9886\u53d6",notGet:"\u5f85\u9886\u53d6",year:"\u5e74",month:"\u6708",date:"\u65e5",watchAds:"\u89c2\u770b\u89c6\u9891",desc1:"\u7d2f\u79ef\u89c2\u770b\u89c6\u9891 \u83b7\u5f97\u4e30\u539a\u5956\u52b1",desc2:"\u4ec5\u5728\u672c\u9875\u9762\u89c2\u770b\u89c6\u9891\u624d\u6709\u6548",count:"\u6b21",sign:"\u65b0\u6625\u7b7e\u5230",gift:"\u65b0\u6625\u793c\u5305",watch:"\u65b0\u6625\u5e7f\u544a",tower:"\u6811\u5c4b",ps:"\u6d3b\u52a8\u671f\u95f4\u4e2d\u65ad\u767b\u5f55\u53ef\u5c31\u9886\u53d6\u4e0d\u5230\u6700\u540e\u5927\u5956\u4e86\u54e6"},tower_a:{title0:"\u82b1\u56ed\u5bfb\u5b9d",title1:"\u6311\u6218\u6210\u529f",title2:"\u95ef\u5173\u6210\u529f",info0:"1. \u6d3b\u52a8\u5171\u6709\u4e24\u8f6e\uff0c\u4e00\u517110\u4e2a\u6d3b\u52a8\u5173\u5361\u3002\u6bcf\u8f6e5\u4e2a\u5173\u5361\u3002\n2. \u8fde\u7eed\u95ef\u5173\u6210\u529f\u53ef\u83b7\u5f97\u4e30\u539a\u5956\u52b1\uff0c\u5956\u52b1\u53ef\u9886\u53d62\u6b21\u54e6~\n3. \u82e5\u8fde\u7eed\u95ef\u5173\u5931\u8d25\uff0c\u9700\u4ece\u6bcf\u8f6e\u7684\u7b2c1\u5173\u91cd\u65b0\u6311\u6218\uff0c\u52a0\u6cb9\uff01",info1:"\u606d\u559c\u4f60\u95ef\u8fc7\u4e86\u7b2c%1\u5173\uff0c\n\u5b9d\u85cf\u79bb\u4f60\u4e0d\u8fdc\u4e86\uff0c\u7ee7\u7eed\u52aa\u529b\u5427\uff01",info2:"\u606d\u559c\u60a8\u53d1\u73b0\u4e86\u5b9d\u85cf\uff01",get0:"\u6211\u8981\u8bd5\u8bd5",get1:"\u7ee7\u7eed\u6311\u6218",get2:"\u9886\u53d6\u5956\u52b1",fail:"\u6ca1\u5173\u7cfb\uff0c\u518d\u8bd5\u4e00\u6b21\uff01\n\u6211\u4eec\u4e00\u5b9a\u4f1a\u6210\u529f\u7684\uff01",towerlevel:"\u6311\u6218%1\u5173"},ads_notice:{ads1:"\u514d\u8d39\u52a05\u6b65",ads2:"\u514d\u8d39",ads3:"\u5e7f\u544a\u5956\u52b1",ads4:"\u518d\u6b21\u83b7\u5f97",freeGift:"\u514d\u8d39\u793c\u7269",watch:"\u89c2\u770b\u4e00\u5c0f\u6bb5\u89c6\u9891\uff0c\u83b7\u5f97\u514d\u8d39\u793c\u76d2\uff01",next:"\u4e0b\u4e00\u4e2a\u793c\u7269\u51c6\u5907\u4e2d...",watchNow:"\u7acb\u5373\u89c2\u770b",no1:"\u4eca\u5929\u5df2\u8fbe\u5230\u89c2\u770b\u4e0a\u9650",no2:"\u8fd8\u672a\u5230\u53ef\u89c2\u770b\u65f6\u95f4",no3:"\u51b7\u5374\u65f6\u95f4\u672a\u5230",no4:"\u660e\u65e5\u518d\u6765",fast:"\u70b9\u51fb\u592a\u5feb",failed:"\u89c2\u770b\u5931\u8d25",ads5:"\u514d\u8d39+3\u6b65",ads6:"\u514d\u8d39\u5f53\u524d\u5173\u52a03\u6b65",ads8:"\u73b0\u5728\u6ca1\u6709\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u54e6\uff01",ads7:"\u5982\u65e0\u6cd5\u9886\u53d6\u5956\u52b1\uff0c\u9700\u91cd\u65b0\u767b\u5f55\u6e38\u620f\u8bd5\u8bd5\u54e6\uff01",btn:"\u64ad\u653e\u89c6\u9891",no_ads:"\u6682\u65e0\u5e7f\u544a"},dial:{title:"\u62bd\u5956",free:"\u514d\u8d39\u62bd\u5956",ads:"\u518d\u6b21\u62bd\u53d6",end:"\u6b21\u6570\u5df2\u7528\u5b8c"},recharge:{first:"\u9996\u5145\u5927\u793c\u5305",time1:"\u9650\u65f6\u6253\u6298",time2:"\u8d85\u503c\u6d3b\u52a8",time3:"\u7279\u60e0\u793c\u5305",buy:"\u7acb\u5373\u8d2d\u4e70",discount:"%1\u6298"},awd_hint:{jbs_awd:"\u606d\u559c\u60a8\u6392\u540d \x3ccolor\x3d#ff0000\x3e%1\x3c/c\x3e ,\u9886\u53d6\u60a8\u7684\u5956\u52b1\uff01",jbs_noawd:"\u60a8\u6392\u540d \x3ccolor\x3d#ff0000\x3e%1\x3c/c\x3e ,\u65e0\u5956\u52b1\uff01"},reconfirm_hint:{pass_all:"\u54c7,\u592a\u5389\u5bb3\u4e86\uff01\u4f60\u5df2\u7ecf\u5b8c\u6210\u4e86%1\u6240\u6709\u7684\u5173\u5361,\u6211\u4eec\u4f1a\u5c3d\u5feb\u63a8\u51fa\u65b0\u7684\u5173\u5361,\u656c\u8bf7\u671f\u5f85\uff01",logout:"\u6ce8\u9500\u8d26\u53f7",ynlogout:"\u786e\u8ba4\u662f\u5426\u6ce8\u9500\u8d26\u53f7"},msg_hint:{lab_length:"\u53d1\u9001\u6d88\u606f\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e2\u6216\u591a\u4e8e50",need_net:"\u9700\u8fde\u63a5\u7f51\u7edc\u624d\u53ef\u5f00\u542f"},achieve:{title:"\u6210 \u5c31",info:"\u8fbe\u6210\u6210\u5c31\u53ef\u4ee5\u9886\u53d6\u5956\u52b1,\u5feb\u53bb\u95ef\u5173\u5427\uff01"},add_step:{title:"\u6b65\u6570\u4e0d\u8db3",info1:"\u589e\u52a05\u6b65\u7ee7\u7eed\u6e38\u620f",info2:"\u589e\u52a0%1\u6b65\u5e76\u589e\u52a0%2\u4e2a\u9053\u5177\u7ee7\u7eed\u6e38\u620f"},add_desktop:{title:"\u6536\u85cf\u6709\u793c",info:"1.\u5c06\u6e38\u620f\u5feb\u6377\u65b9\u5f0f\u6dfb\u52a0\u5230\u684c\u9762\u3002\n2.\u4e0b\u6b21\u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u8fdb\u5165\u6e38\u620f\u54e6\uff01\n3.\u9996\u6b21\u6dfb\u52a0\u5956\u52b11000\u91d1\u5e01\uff01",add:"\u6dfb\u52a0\u5230\u684c\u9762",ok:"\u6dfb\u52a0\u684c\u9762\u5feb\u6377\u65b9\u5f0f\u6210\u529f",no:"\u6dfb\u52a0\u684c\u9762\u5feb\u6377\u65b9\u5f0f\u5931\u8d25"},assault:{title:"\u51b2\u5173\u6d3b\u52a8",title_fail:"\u51b2\u5173\u5931\u8d25\uff1f",fail_info:"\u653e\u5f03\u5173\u5361\u4f1a\u4e22\u5931\u4f60\u7684\u51b2\u5173\u5956\u52b1\u54e6\uff01",info:"\u4e0d\u4e22\u5931\u4f53\u529b\u8fc7\u5173\u53ef\u83b7\u5f97\u5f00\u5c40\u9053\u5177\u54e6\uff01"},buy_heart:{more:"\u66f4\u591a\u4f53\u529b",buy:"\u8865\u6ee1",full:"\u4f53\u529b\u5df2\u6ee1",time:"\u4e0b\u4e00\u70b9\u4f53\u529b\u6062\u590d",showfull:"\u5df2\u6ee1",use:"\u662f\u5426\u4f7f\u7528",free:"\u63d0\u53d6\u4f53\u529b"},chg_name:{title:"\u8bbe\u7f6e\u6635\u79f0",hint:"\u6635\u79f0\u4ec5\u53ef\u8f93\u5165\u4e2d\u6587,\u6570\u5b57,\u5b57\u6bcd\u548c\u4e0b\u5212\u7ebf",error:"\u6635\u79f0\u542b\u6709\u975e\u6cd5\u5b57\u7b26,\u8bf7\u91cd\u65b0\u8f93\u5165",ok:"\u8bbe\u7f6e\u6210\u529f","no-1000":"\u6635\u79f0\u957f\u5ea6\u592a\u77ed\u6216\u8fc7\u957f","no-1001":"\u6635\u79f0\u4e0d\u53ef\u542b\u6709\u7a7a\u683c,\u8bf7\u91cd\u65b0\u8f93\u5165","no-1010":"\u6635\u79f0\u542b\u6709\u975e\u6cd5\u5b57\u7b26,\u8bf7\u91cd\u65b0\u8f93\u5165"},helpd:{title:"\u5e2e \u52a9",p1:"\u7279\u6548\u8bf4\u660e",p2:"\u7ae0\u8282\u5143\u7d20",p3:"\u9053\u5177\u8bf4\u660e"},hot_update:{title:"\u68c0\u67e5\u7248\u672c\u66f4\u65b0",query_ver:"\u6b63\u5728\u67e5\u8be2\u8fdc\u7aef\u7248\u672c\u670d\u52a1\u5668",load_fail:"\u52a0\u8f7d\u672c\u5730\u7248\u672c\u4fe1\u606f\u5931\u8d25,\u8bf7\u91cd\u65b0\u5c1d\u8bd5",query_fail:"\u67e5\u8be2\u8fdc\u7a0b\u7248\u672c\u5931\u8d25,\u8bf7\u91cd\u65b0\u5c1d\u8bd5",ok:"\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\u5373\u5c06\u5f00\u59cb\u6e38\u620f",info:"\u8bf7\u5728\u7f51\u7edc\u826f\u597d\u7684\u73af\u5883\u4e0b\u66f4\u65b0,\u5931\u8d25\u8bf7\u91cd\u65b0\u5c1d\u8bd5",find_new:"\u53d1\u73b0\u6700\u65b0\u7248\u672c,\u5373\u5c06\u5f00\u59cb\u66f4\u65b0",update_ok:"\u5df2\u66f4\u65b0\u81f3\u6700\u65b0\u7248\u672c,\u5373\u5c06\u5f00\u59cb\u6e38\u620f",update_fail:"\u66f4\u65b0\u5931\u8d25%1\u6b21,\u8bf7\u91cd\u65b0\u5c1d\u8bd5\u6216\u91cd\u65b0\u4e0b\u8f7d\u5b8c\u6574\u7248",update_ifail:"\u66f4\u65b0\u8d44\u6e90\u5931\u8d25,\u8bf7\u91cd\u65b0\u5c1d\u8bd5\u6216\u5173\u95ed\u540e\u91cd\u65b0\u8fdb\u5165",load_ifail:"\u52a0\u8f7d\u7248\u672c\u4fe1\u606f\u5931\u8d25",download_file:"\u4e0b\u8f7d\u6587\u4ef6\u6570:",download_byte:"\u4e0b\u8f7d\u5b57\u8282\u6570:",current_ver:"\u5f53\u524d\u7248\u672c:",new_ver:"\u6700\u65b0\u7248\u672c:"},mail:{p1:"\u4f53\u529b\u6d88\u606f",p2:"\u7cfb\u7edf\u6d88\u606f",p3:"\u79c1\u4eba\u6d88\u606f",p1_info:"\u8d60\u9001\u4f53\u529b\u6700\u591a\u4fdd\u755960\u6761\u54e6",p2_info:"\u7cfb\u7edf\u6d88\u606f\u6700\u591a\u4fdd\u5b5830\u5929\u54e6",p3_list:"\u6d88\u606f\u5217\u8868",p3_record:"\u6d88\u606f\u8bb0\u5f55",no_hp_lab:"\u6ca1\u6709\u4eba\u9001\u4f60\u4f53\u529b,\u5feb\u53bb\u516c\u4f1a\u8bf7\u6c42\u4f53\u529b\u5427",goto_club:"\u8df3\u8f6c\u516c\u4f1a",give_hp:"\u8d60\u9001\u4f60%1\u4e2a\u4f53\u529b",mailbox:"\u7cfb\u7edf\u90ae\u4ef6"},option:{title:"\u6570\u636e\u9009\u9879",input:"\u8bf7\u8f93\u5165"},rank:{p1_info:"\u53ea\u6709\u524d200\u540d\u73a9\u5bb6\u4f1a\u4e0a\u699c\u54e6",p2_info:"\u53ea\u6709\u524d50\u540d\u516c\u4f1a\u4f1a\u4e0a\u699c\u54e6",p3_info:"\u4e0e\u4f60\u7684\u597d\u53cb\u6bd4\u6bd4\u8c01\u66f4\u5389\u5bb3"},rgs_gift:{title:"\u56de\u5f52\u793c\u5305",info:"       \u53c8\u4e00\u6b21\u548c\u8001\u94c1\u4f60\u76f8\u9047\u4e86,\u80fd\u4e00\u8d77\u7ee7\u7eed\u6211\u4eec\u7684\u65c5\u7a0b,\u67da\u5b50\u771f\u7684\u975e\u5e38\u6fc0\u52a8\uff01\n\u8bf7\u6536\u4e0b\u67da\u5b50\u8fd9\u4efd\u4e13\u5c5e\u4e8e\u4f60\u7684\u56de\u5f52\u793c\u5305\u5427\uff01\u540e\u9762\u8fd8\u6709\u66f4\u591a\u795e\u79d8\u793c\u7269\u7b49\u7740\u8001\u94c1\u4f60\u5462\uff01"},setting:{push_on:"\u63a8\u9001:\u5141\u8bb8",push_off:"\u63a8\u9001:\u7981\u6b62",chat_on:"\u804a\u5929:\u5141\u8bb8",chat_off:"\u804a\u5929:\u7981\u6b62",ver:"\u7248\u672c\u53f7: ",qq:"QQ\u73a9\u5bb6\u7fa4\u53f7: ",tel:"\u5ba2\u670d\u7535\u8bdd: ",turn:" \u8f6c6\u53f7\u952e",qq_service:"\u5ba2\u670dQQ: ",id:"\u6e38\u620fID: "},shop:{p1:"\u9650\u65f6\u5546\u57ce",p2:"\u9053\u5177\u5546\u57ce",p3:"\u91d1\u5e01\u5546\u57ce",more:"\u67e5\u770b\u66f4\u591a\u5546\u54c1",rebate:"\u539f\u4ef7",now:"\u73b0\u4ef7",sale:"\u6253\u6298",value:"\u8d85\u503c",p1_info:"\u9650\u65f6\u6253\u6298\uff0c\u901f\u6765\u62a2\u8d2d\uff01",p2_info:"\u552e\u5356\u51b2\u5173\u6700\u4f73\u62cd\u6863",p3_info:"\u51b2\u5173\u9014\u4e2d\u5c11\u4e0d\u4e86\u91d1\u5e01\u54e6"},sign:{title7:"7\u65e5\u7b7e\u5230",info7:"\u60a8\u5df2\u7b7e\u5230%1\u5929",sign_in:"\u7b7e\u5230",share:"\u5206\u4eab\u5e76\u9886\u53d6",sign_state_1:"\u4eca\u5929\u5df2\u7ecf\u7b7e\u5230\u8fc7\u4e86",sign_state_4:"\u7b7e\u5230\u5df2\u7ecf\u7ed3\u675f",sign_state_5:"\u7b7e\u5230\u8fd8\u672a\u5f00\u59cb","sign_state_-5":"\u8865\u7b7e\u5931\u8d25\uff0c\u91d1\u5e01\u4e0d\u8db3","sign_state_-6":"\u8865\u7b7e\u5931\u8d25\uff0c\u60a8\u5df2\u5168\u90e8\u7b7e\u5230\u5b8c\u6210\u4e86","sign_state_-7":"\u8865\u7b7e\u5931\u8d25\uff0c\u4eca\u5929\u8fd8\u6ca1\u6709\u7b7e\u5230",day1:"\u7b2c\u4e00\u5929",day2:"\u7b2c\u4e8c\u5929",day3:"\u7b2c\u4e09\u5929",day4:"\u7b2c\u56db\u5929",day5:"\u7b2c\u4e94\u5929",day6:"\u7b2c\u516d\u5929",day7:"\u7b2c\u4e03\u5929",check_in:"\u5df2\u7b7e\u5230",info8:"\u6240\u6709\u7269\u54c1\u6253\u5305\u4e00\u6298\u51fa\u552e",buy_day:"\u4e03\u65e5\u8c6a\u793c\u4e00\u6298\u4e70"},contend:{title:"\u4e89\u9738\u8d5b"},tournament:{title:"\u9526\u6807\u8d5b",star_num:"\u6536\u96c6\u661f\u661f\u6570",info:"\u901a\u8fc71\u5173\u5373\u53ef\u52a0\u5165\u9526\u6807\u8d5b\u4e89\u593a\u60ca\u4eba\u5956\u52b1\uff01"},welcome_gift:{title:"\u67da\u5b50\u89c1\u9762\u793c",info:"\u4f60\u597d,\u6211\u662f\u67da\u5b50,\u8fd9\u662f\u9001\u4f60\u7684\u89c1\u9762\u793c\u3002\n\u8ba9\u6211\u966a\u4f60\u5f00\u5fc3\u6d88\u9664\uff01",hp_lab:"\u4e0d\u6d88\u8017\u4efb\u4f55\u4f53\u529b"},exit_game:{title:"\u786e\u5b9a\u9000\u51fa\uff1f",info:"\u60a8\u5c06\u4f1a\u5931\u53bb6\u70b9\u4f53\u529b\uff01",towerexit:"\u9000\u51fa\u5173\u5361\u53ea\u80fd\u91cd\u65b0\u5f00\u59cb\uff0c\u771f\u7684\u8981\u653e\u5f03\u5417\uff1f"},invite_gift:{title:"\u9080\u8bf7\u6709\u793c",info:"\u597d\u53cb\u901a\u8fc7\u94fe\u63a5\u8fdb\u5165\u6e38\u620f\uff0c\u60a8\u5c31\u53ef\u4ee5\u83b7\u5f97\u5bf9\u5e94\u5956\u52b1\u5466\uff01",invite:"\u9080\u8bf7",friend:"\u7b2c%1\u4f4d\u597d\u53cb","err-1":"\u5df2\u9886\u53d6\u7684\u5956\u52b1\u6570\u91cf\u8d85\u8fc7\u5df2\u9080\u8bf7\u7684\u6570\u91cf","err-2":"\u5df2\u9886\u53d6\u5956\u52b1\u7684\u6570\u91cf\u8d85\u8fc7\u6700\u5927\u53ef\u9080\u8bf7\u6570\u91cf","err-3":"\u672a\u5f00\u542f\u5206\u4eab"},share:{title:"\u5206\u4eab",ok:"\u5206\u4eab\u6210\u529f",fail:"\u5206\u4eab\u5931\u8d25",failGroup:"\u5206\u4eab\u5230\u7fa4\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",info1:"\u6211\u5c31\u662f\u8fd9\u4e48\u5389\u5bb3\uff01",info2:"\u5feb\u9080\u8bf7\u597d\u53cb\u4e00\u8d77\u52a0\u5165\u5427\uff01\u6bcf\u5929\u7b2c\u4e00\u6b21\u5206\u4eab\u6e38\u620f\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u54e6\uff01","double":"\u5206\u4eab\u53ef\u9886\u53d6\u53cc\u500d\u5956\u52b1"},treasure:{title:"\u516c\u4f1a\u5b9d\u85cf",info1:"\u5feb\u53bb\u5b8c\u6210\u516c\u4f1a\u76ee\u6807\u9886\u53d6\u5956\u52b1\u5427",info2:"\u592a\u68d2\u4e86\uff01,\u4f60\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u5168\u90e8\u516c\u4f1a\u76ee\u6807",info3:"\u60a8\u6682\u65e0\u53c2\u52a0\u8d44\u683c"},club:{change_badge:"\u9009\u62e9\u5fbd\u7ae0",info_title:"\u516c\u4f1a\u4fe1\u606f",member:"\u6210\u5458",c_score:"\u516c\u4f1a\u5206\u6570",c_help:"\u5468\u5e2e\u52a9\u6570",c_type:"\u516c\u4f1a\u7c7b\u578b",c_level:"\u5173\u5361\u8981\u6c42","public":"\u516c\u5f00","private":"\u79c1\u6709",save:"\u4fdd\u5b58",alter:"\u4fee\u6539",join:"\u52a0\u5165",apply:"\u7533\u8bf7",unlv_hint:"\u5173\u5361\u9650\u5236\u4e0d\u80fd\u5c0f\u4e8e%1\u6216\u5927\u4e8e\u4f1a\u957f\u81ea\u8eab\u7684\u5173\u5361",quit:"\u9000\u51fa\u516c\u4f1a",unopen_reach:"\u5230\u8fbe ",unopen_get:" \u5173\u89e3\u9501\u516c\u4f1a",unopen_coj:"\u521b\u5efa\u6216\u52a0\u5165\u516c\u4f1a\u53ef\u4ee5:",unopen_h:"\u83b7\u5f97\u514d\u8d39\u7684\u4f53\u529b",unopen_g:"\u83b7\u5f97\u514d\u8d39\u7684\u91d1\u5e01",unopen_c:"\u4e0e\u5176\u4ed6\u73a9\u5bb6\u4ea4\u6d41",p1_info:"\u52a0\u5165\u516c\u4f1a\u53ef\u4ee5\u83b7\u53d6\u5230\u514d\u8d39\u4f53\u529b",p2_info:"\u521b\u5efa\u5e76\u9886\u5bfc\u4f60\u81ea\u5df1\u7684\u516c\u4f1a",p5_info:"\u8f93\u5165\u8981\u641c\u7d22\u7684\u516c\u4f1a\u540d\u79f0",people_num:"\u4eba\u6570",information:"\u4fe1\u606f",describe:"\u63cf\u8ff0",badge:"\u5fbd\u7ae0",clubname:"\u516c\u4f1a\u540d\u79f0",ask_heart:"\u8bf7\u6c42\u4f53\u529b",kick:"\u8e22\u51fa",s_leader:"\u8bbe\u4e3a\u4f1a\u957f",s_vice_leader:"\u8bbe\u4e3a\u526f\u4f1a\u957f",c_leader:"\u53d6\u6d88\u526f\u4f1a\u957f",s_mail:"\u53d1\u9001\u90ae\u4ef6",member_num:"\u6210\u5458\u6570",get_heart:"\u6536\u5230\u4f53\u529b",ask_join:"\u8bf7\u6c42\u52a0\u5165",ask_time:"\u5012\u8ba1\u65f6\u7ed3\u675f\u540e\u624d\u53ef\u4ee5\u8bf7\u6c42\u4f53\u529b",msg_time:"%1\u79d2\u540e\u624d\u53ef\u53d1\u9001",ifsave:"\u662f\u5426\u4fdd\u5b58",issaveto:"\u60a8\u5df2\u66f4\u6539\u4e86\u4fe1\u606f\u662f\u5426\u4fdd\u5b58",nosave:"\u4e0d\u4fdd\u5b58",whether_quit:"\u60a8\u771f\u7684\u51c6\u5907\u9000\u51fa\u516c\u4f1a\u5417",pass_on:"\u8bf7\u60a8\u5148\u5c06\u4f1a\u957f\u8f6c\u4ea4\u7ed9\u5176\u4ed6\u6210\u5458",break_up:"\u60a8\u9000\u51fa\u516c\u4f1a\u540e\u6b64\u516c\u4f1a\u5c06\u4f1a\u88ab\u89e3\u6563",whether:"\u4f60\u786e\u5b9a\u8981\u628a",kickclub:"\u8e22\u51fa\u516c\u4f1a\u5417"},login:{again:"\u91cd\u65b0\u767b\u5f55",elselogin:"\u8be5\u8d26\u53f7\u5728\u5176\u5b83\u5730\u65b9\u767b\u5f55\uff01 \u8bf7\u91cd\u65b0\u767b\u5f55",neterr:"\u7f51\u7edc\u5f02\u5e38,\u8bf7\u68c0\u67e5\u7f51\u7edc\uff01",invalid:"\u767b\u5f55\u5931\u6548,\u8bf7\u91cd\u65b0\u767b\u5f55",fb_login:"Facebook \u767b\u5f55",gp_login:"Google \u767b\u5f55",n7_login:"\u90ae\u7bb1\u767b\u5f55",sign_err:"\u60a8\u8f93\u5165\u7684\u90ae\u7bb1\u4e0d\u5b58\u5728\u6216\u6635\u79f0\u5df2\u88ab\u5360\u7528",login_err:"\u60a8\u8f93\u5165\u7684\u90ae\u7bb1\u4e0d\u5b58\u5728\u6216\u5bc6\u7801\u8f93\u5165\u6709\u8bef",verify_hint:"\u8f93\u5165\u7684\u4e0e\u7b2c\u4e00\u6b21\u8f93\u5165\u7684\u4e0d\u76f8\u7b26",password_hint:"\u5bc6\u7801\u81f3\u5c11\u4e3a\u4e09\u4e2a\u5b57\u7b26",mail:"\u90ae\u7bb1",password:"\u5bc6\u7801",nickname:"\u6635\u79f0",verify:"\u786e\u8ba4\u5bc6\u7801",goto_login:"\u5df2\u6709\u8d26\u53f7\uff1f\u524d\u5f80\u767b\u5f55",goto_sign:"\u6ca1\u6709\u8d26\u53f7\uff1f\u524d\u5f80\u6ce8\u518c",login:"\u767b\u5f55",sign_up:"\u6ce8\u518c"},Guild:{join:"[%3]\u52a0\u5165\u516c\u4f1a",quit:"[%1]\u79bb\u5f00\u4e86\u516c\u4f1a",auth:"[%1]\u88ab\u8bbe\u7f6e\u4e3a[%2]",selfjoin:"\u60a8\u5df2\u52a0\u5165\u516c\u4f1a[%1]",selfquit:"\u60a8\u5df2\u79bb\u5f00\u516c\u4f1a[%1]",auth_100:"\u4f1a\u957f",auth_50:"\u526f\u4f1a\u957f",auth_0:"\u6210\u5458",appo:"\u4efb\u547d",appo_100:"\u4efb\u547d\u4e3a\u4f1a\u957f\u5417",appo_50:"\u4efb\u547d\u4e3a\u526f\u4f1a\u957f\u5417",appo_0:"\u4efb\u547d\u4e3a\u6210\u5458\u5417",applylv:"\u5173\u5361:%1",memcnt:"%1/100",notice:"\u4f1a\u957f\u5f88\u795e\u79d8,\u6ca1\u6709\u7559\u4e0b\u4efb\u4f55\u4fe1\u606f~",gnerr:"\u516c\u4f1a\u540d\u79f0\u6700\u5c11\u4e3a\u4e24\u4e2a\u5b57\u7b26\u6216\u4ee5\u4e0a",crerr:"\u521b\u5efa\u5931\u8d25%1",notfind:"\u6ca1\u6709\u641c\u7d22\u7ed3\u679c\uff01",later:"\u64cd\u4f5c\u9891\u7e41",applyerr:"\u7533\u8bf7\u5931\u8d25%1",applyok:"\u7533\u8bf7\u6210\u529f",operaperr:"\u64cd\u4f5c\u5931\u8d25%1",operapno:"\u5df2\u62d2\u7edd",operapok:"\u5df2\u540c\u610f",apply1000:"\u7533\u8bf7\u5931\u8d25,\u8be5\u516c\u4f1a\u4e0d\u5b58\u5728\uff01",apply1001:"\u7533\u8bf7\u5931\u8d25,\u8be5\u516c\u4f1a\u5df2\u6ee1\u5458\uff01",apply1002:"\u7533\u8bf7\u5931\u8d25,\u60a8\u4e0d\u6ee1\u8db3\u8be5\u516c\u4f1a\u7684\u5173\u5361\u9650\u5236\uff01",apply1009:"\u7533\u8bf7\u5931\u8d25,\u60a8\u5df2\u5728\u8be5\u516c\u4f1a\uff01",apply1010:"\u7533\u8bf7\u5931\u8d25,\u60a8\u5f53\u524d\u7684\u516c\u4f1a\u8fd8\u6709\u5176\u4ed6\u6210\u5458\uff01",apply1003:"\u60a8\u5df2\u7533\u8bf7\u8fc7\uff01",apply1008:"\u60a8\u5df2\u7533\u8bf7\u8fc7\uff01",apply1013:"\u9000\u51fa\u516c\u4f1a12\u5c0f\u65f6\u540e\u624d\u53ef\u52a0\u5165\u516c\u4f1a\uff01",apply1004:"\u7533\u8bf7\u5931\u8d25,\u60a8\u9700\u8981\u9000\u51fa\u5f53\u524d\u516c\u4f1a\u624d\u53ef\u4ee5\u7533\u8bf7\uff01",join1001:"\u60a8\u5df2\u5728\u8be5\u516c\u4f1a",create1006:"\u521b\u5efa\u5931\u8d25,\u4f60\u5df2\u7ecf\u6709\u516c\u4f1a",create1000:"\u521b\u5efa\u5931\u8d25,\u516c\u4f1a\u540d\u5df2\u88ab\u5360\u7528",create1013:"\u9000\u51fa\u516c\u4f1a12\u5c0f\u65f6\u540e\u624d\u53ef\u521b\u5efa\u516c\u4f1a\uff01",create2000:"\u91d1\u5e01\u4e0d\u8db3",createnameerr:"\u516c\u4f1a\u540d\u79f0\u542b\u6709\u975e\u6cd5\u5b57\u7b26,\u8bf7\u91cd\u65b0\u8f93\u5165",quit1001:"\u9000\u51fa\u5931\u8d25,\u4f60\u5df2\u4e0d\u5728\u516c\u4f1a",quit1003:"\u8e22\u51fa\u5931\u8d25,\u6743\u9650\u4e0d\u8db3",quit1004:"\u8e22\u51fa\u5931\u8d25,\u6743\u9650\u4e0d\u8db3",jaq1001:"\u52a0\u5165\u5931\u8d25,\u8be5\u516c\u4f1a\u5df2\u6ee1\u5458",jaq1002:"\u52a0\u5165\u5931\u8d25,\u8be5\u516c\u4f1a\u9700\u8981\u7533\u8bf7",jaq1009:"\u60a8\u5df2\u5728\u8be5\u516c\u4f1a",chat1001:"\u53d1\u9001\u5931\u8d25,\u60a8\u5df2\u4e0d\u5728\u8be5\u516c\u4f1a",error:"\u5185\u90e8\u9519\u8bef%1",createok:"\u521b\u5efa\u6210\u529f",quitok:"\u9000\u51fa\u6210\u529f",appoto:"\u88ab\u4efb\u547d\u4e3a",applyyes:"\u516c\u4f1a[%1]\u540c\u610f\u4e86\u4f60\u7684\u7533\u8bf7",applyno:"\u516c\u4f1a[%1]\u62d2\u7edd\u4e86\u4f60\u7684\u7533\u8bf7",appo993:"\u526f\u4f1a\u957f\u4eba\u6570\u4e0a\u9650\u4e3a5\u4eba",appo995:"\u8be5\u6210\u5458\u5df2\u662f\u8be5\u804c\u4f4d",appo996:"\u6743\u9650\u4e0d\u8db3",setting993:"\u6743\u9650\u4e0d\u8db3",settingok:"\u4fee\u6539\u6210\u529f"},item_list:{user_item:"\u4f7f\u7528\u9053\u5177",user_ok:"\u4f7f\u7528\u6210\u529f",user_no:"\u4f7f\u7528\u5931\u8d25",1:"\u9b54\u6cd5\u9524",2:"\u5c0f\u6c7d\u8f66",3:"\u98de\u789f",4:"\u9ab0\u5b50",5:"\u540e\u9000\u4e00\u6b65",6:"\u5c0f\u4f53\u529b",7:"\u4e2d\u4f53\u529b",8:"\u5927\u4f53\u529b",9:"\u5bfc\u5f39",10:"\u9b54\u65b9",11:"\u70b8\u5f39",12:"\u91d1\u5e01",53:"\u94f6\u5e01",13:"\u65e0\u9650\u4f53\u529b",14:"\u4f53\u529b",15:"\u9053\u5177\u5927\u793c\u5305",16:"\u7cbe\u54c1\u5927\u793c\u5305",17:"\u4f53\u529b\u5927\u793c\u5305",18:"\u5927\u793c\u5305",19:"\u8865\u6ee1\u4f53\u529b",29:"\u661f\u661f",30:"\u65e0\u9650\u4f53\u529b",31:"\u9996\u5145",54:"\u52a0\u4e94\u6b65",55:"\u65b0\u624b\u793c\u5305",56:"\u8fdb\u9636\u793c\u5305",57:"\u9ad8\u624b\u793c\u5305",58:"\u7cbe\u82f1\u793c\u5305",59:"\u4e13\u5bb6\u793c\u5305",60:"\u51a0\u519b\u793c\u5305",info1:"\u5728\u5173\u5361\u4e2d\u6d88\u9664\u4efb\u610f\u65b9\u5757\u6216\u969c\u788d",info2:"\u6e38\u620f\u5173\u5361\u5185,\u6d88\u9664\u4e00\u6574\u884c\u65b9\u5757",info3:"\u6e38\u620f\u5173\u5361\u5185,\u6d88\u9664\u4e00\u6574\u5217\u65b9\u5757",info4:"\u91cd\u65b0\u6392\u5217\u6240\u6709\u65b9\u5757",info5:"\u8fd4\u56de\u5230\u4e0a\u4e00\u6b65",info6:"\u53ef\u6062\u590d\u4e00\u70b9\u4f53\u529b",info7:"\u53ef\u6062\u590d\u516d\u70b9\u4f53\u529b",info8:"\u53ef\u6062\u590d\u4e09\u5341\u70b9\u4f53\u529b",info9:"\u5728\u5173\u5361\u4e2d\u968f\u673a\u4ea7\u751f\u4e00\u4e2a\u5bfc\u5f39",info10:"\u5728\u5173\u5361\u4e2d\u968f\u673a\u4ea7\u751f\u4e00\u4e2a\u9b54\u65b9",info11:"\u5728\u5173\u5361\u4e2d\u968f\u673a\u4ea7\u751f\u4e00\u4e2a\u70b8\u5f39",info15:"\u9b54\u6cd5\u95244\u4e2a\uff0c\u9ab0\u5b504\u4e2a",info16:"\u9b54\u6cd5\u95245\u4e2a\uff0c\u5c0f\u6c7d\u8f663\u4e2a\uff0c\u9ab0\u5b505\u4e2a",info17:"\u5c0f\u4f53\u529b25\u4e2a\uff0c\u4e2d\u4f53\u529b4\u4e2a\uff0c\u5927\u4f53\u529b2\u4e2a",info54:"\u52a0\u4e94\u6b65"},help_list1:{1:"\u5bfc\u5f39",2:"\u70b8\u5f39",3:"\u9b54\u65b9",4:"  \u5bfc\u5f39    +     \u5bfc\u5f39",5:"  \u5bfc\u5f39    +     \u70b8\u5f39",6:"  \u70b8\u5f39    +     \u70b8\u5f39",7:"  \u5bfc\u5f39    +     \u9b54\u65b9",8:"  \u70b8\u5f39    +     \u9b54\u65b9",9:"  \u9b54\u65b9    +     \u9b54\u65b9",info1:"5\uff086\uff09\u4e2a\u65b9\u5757\u53ef\u5408\u6210\u968f\u673a\u65b9\u5411\u7684\u5bfc\u5f39\uff0c\u70b9\u51fb\u5bfc\u5f39\u53ef\u4ee5\u6d88\u96641\u6574\u884c\u62161\u6574\u5217\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info2:"7\u4e2a/8\u4e2a\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u5408\u6210\u70b8\u5f39\uff0c\u70b9\u51fb\u70b8\u5f39\u53ef\u4ee5\u6d88\u96643*3\u8303\u56f4\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info3:"9\u4e2a\u53ca\u4ee5\u4e0a\u7684\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u5408\u6210\u9b54\u65b9\uff0c\u70b9\u51fb\u9b54\u65b9\u53ef\u4ee5\u6e05\u9664\u5168\u5c4f\u6240\u6709\u7684\u540c\u8272\u65b9\u5757\u3002",info4:"\u6d88\u96641\u6574\u884c\u548c1\u6574\u5217\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info5:"\u6d88\u96643\u884c3\u5217\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info6:"\u6d88\u9664\u63897*7\u8303\u56f4\u5185\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info7:"\u9b54\u65b9\u5bf9\u5e94\u989c\u8272\u65b9\u5757\u5168\u90e8\u53d8\u6210\u968f\u673a\u65b9\u5411\u7684\u5bfc\u5f39\u3002",info8:"\u9b54\u65b9\u5bf9\u5e94\u989c\u8272\u65b9\u5757\u5168\u90e8\u53d8\u6210\u70b8\u5f39\u3002",info9:"\u6e05\u9664\u5168\u5c4f\u7684\u6240\u6709\u65b9\u5757\u548c\u969c\u788d\u3002"},help_list2:{1:"\u6c14\u7403",2:"\u7f51\u7403",3:"\u5706\u5c0f\u9e21",4:"\u6ce1\u6ce1",5:"\u7bb1\u5b50",6:"\u9b54\u6cd5\u7bb1",7:"\u52a0\u56fa\u7bb1\u5b50",8:"\u5f69\u8272\u6c14\u7403",9:"\u706f\u6ce1",10:"\u679c\u51bb",11:"\u5f69\u8272\u7bb1\u5b50",12:"\u7ef5\u7f8a",13:"\u53f0\u7403\u684c",14:"\u5c0f\u72d7\u73a9\u5177",15:"\u7b3c\u5b50",16:"\u4e50\u9ad8\u6728\u9a6c",17:"\u76f4\u5347\u673a",18:"\u5f69\u8272\u8721\u7b14",19:"\u5957\u5a03",20:"\u94a2\u7bb1\u5b50",21:"\u6d17\u8863\u673a",22:"\u7cd6\u7f50\u5b50",23:"\u868c",24:"\u5f69\u706f\u94fe",info1:"\u6d88\u9664\u6c14\u7403\u5468\u56f4\u7684\u65b9\u5757\u53ef\u4ee5\u6d88\u9664\u6c14\u7403\u3002",info2:"\u6d88\u9664\u65b9\u5757\u4f7f\u7f51\u7403\u6389\u843d\u5230\u6700\u4e0b\u9762\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u76ee\u6807\u6536\u96c6\u3002",info3:"\u6d88\u9664\u65b9\u5757\u4f7f\u5706\u5c0f\u9e21\u6389\u843d\u5230\u6700\u4e0b\u9762\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u76ee\u6807\u6536\u96c6\u3002",info4:"\u6d88\u9664\u5e26\u6709\u6ce1\u6ce1\u7684\u65b9\u5757\uff0c\u53ef\u6d88\u9664\u6ce1\u6ce1\u3002",info5:"\u6d88\u9664\u7bb1\u5b50\u5468\u56f4\u7684\u65b9\u5757\u53ef\u4ee5\u79fb\u9664\u7bb1\u5b50\u3002",info6:"\u6d88\u9664\u9b54\u6cd5\u7bb1\u5468\u56f4\u7684\u65b9\u5757\u5c31\u53ef\u4ee5\u6536\u96c6\u5230\u72d7\u997c\u5e72\u3002",info7:"\u6d88\u9664\u52a0\u56fa\u7bb1\u5b50\u5468\u56f4\u7684\u65b9\u5757\u5c31\u53ef\u4ee5\u6d88\u9664\u7bb1\u5b50\uff0c\u6700\u591a\u9700\u8981\u6d88\u96644\u6b21\u3002",info8:"\u6d88\u9664\u5f69\u8272\u6c14\u7403\u5468\u56f4\u7684\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u6d88\u9664\u5f69\u8272\u6c14\u7403\u3002",info9:"\u6d88\u9664\u706f\u6ce1\u5468\u56f4\u7684\u65b9\u57572\u6b21\u53ef\u4ee5\u6d88\u9664\u706f\u6ce1\u3002\u7b2c1\u6b21\u6d88\u9664\u70b9\u4eae\u706f\u6ce1\uff0c\u7b2c2\u6b21\u53ef\u4ee5\u5b8c\u5168\u6d88\u9664\u3002",info10:"\u6d88\u9664\u679c\u51bb\u5468\u56f4\u7684\u65b9\u5757\u53ef\u4ee5\u6d88\u9664\u679c\u51bb\u3002\u82e5\u5f53\u524d\u6ca1\u6709\u679c\u51bb\u88ab\u6d88\u9664\uff0c\u679c\u51bb\u4f1a\u8513\u5ef6\u3002",info11:"\u6d88\u9664\u5f69\u8272\u7bb1\u5b50\u5468\u56f4\u7684\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u6d88\u9664\u5f69\u8272\u7bb1\u5b50\u3002\u5177\u6709\u52a0\u56fa\u72b6\u6001\uff0c\u6700\u591a\u9700\u8981\u6d88\u96644\u6b21\u3002",info12:"\u7ef5\u7f8a\u9700\u8981\u88ab\u5bfc\u5f39\u548c\u70b8\u5f39\u6253\u51fb1\u6b21\u6d88\u9664\u3002",info13:"\u6d88\u9664\u53f0\u7403\u684c\u5468\u56f4\u7684\u65b9\u5757\u53ef\u4ee5\u6536\u96c6\u53f0\u7403\uff0c\u53f0\u7403\u6536\u96c6\u5b8c\u540e\u6d88\u9664\u53f0\u7403\u684c\u3002",info14:"\u6d88\u9664\u5c0f\u72d7\u73a9\u5177\u5468\u56f4\u7684\u65b9\u57571\u6b21\u53ef\u4ee5\u5c06\u73a9\u5177\u67d3\u8272\uff0c\u518d\u7528\u540c\u8272\u65b9\u5757\u6d88\u96641\u6b21\u53ef\u4ee5\u6d88\u9664\u73a9\u5177\u3002",info15:"\u6d88\u9664\u7b3c\u5b50\u5468\u56f4\u65b9\u5757\u53ef\u4ee5\u79fb\u9664\u7b3c\u5b50\u3002",info16:"\u4e50\u9ad8\u6728\u9a6c\u9700\u8981\u88ab\u5bfc\u5f39\u548c\u70b8\u5f39\u6253\u51fb3\u6b21\u6d88\u9664\u3002",info17:"\u8fde\u7eed\u6d88\u9664\u76f4\u5347\u673a\u5468\u56f4\u7684\u65b9\u57572\u6b21\u53ef\u4ee5\u6d88\u9664\u76f4\u5347\u673a\u3002",info18:"\u6d88\u9664\u8721\u7b14\u5468\u56f4\u7684\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u6536\u96c6\u5bf9\u5e94\u8721\u7b14\uff0c\u8721\u7b14\u6536\u96c6\u5b8c\u540e\u6d88\u9664\u5f69\u8272\u8721\u7b14\u3002",info19:"\u6d88\u9664\u5957\u5a03\u5468\u56f4\u7684\u65b9\u57573\u6b21\u53ef\u4ee5\u6536\u96c6\u5957\u5a03\u3002",info20:"\u94a2\u7bb1\u5b50\u9700\u8981\u88ab\u5bfc\u5f39\u548c\u70b8\u5f39\u6253\u51fb\u6d88\u9664\u3002\u5177\u6709\u52a0\u56fa\u72b6\u6001\uff0c\u6700\u591a\u9700\u8981\u6d88\u96644\u6b21\u3002",info21:"\u5728\u6d17\u8863\u673a\u5468\u56f4\u6d88\u9664\u65b9\u5757\u4f1a\u4ea7\u751f1\u4e2a\u6ce1\u6ce1\u5e76\u98de\u5230\u968f\u673a\u4f4d\u7f6e\u3002\u6d17\u8863\u673a\u4e0d\u53ef\u88ab\u6d88\u9664\u3002",info22:"\u6d88\u9664\u7cd6\u7f50\u5b50\u5468\u56f4\u7684\u65b9\u57572\u6b21\u53ef\u4ee5\u6d88\u9664\u7cd6\u7f50\u5b50\u3002",info23:"\u5728\u6253\u5f00\u7684\u868c\u5728\u5468\u56f4\u6d88\u9664\u65b9\u5757\u53ef\u4ee5\u6d88\u9664\u868c\uff0c\u5173\u95ed\u7684\u868c\u4e0d\u53ef\u88ab\u6d88\u9664\u3002\u6d88\u96641\u6b21\uff0c\u868c\u7684\u72b6\u6001\u6539\u53d81\u6b21\u3002",info24:"\u6d88\u9664\u5f69\u706f\u94fe\u5468\u56f4\u7684\u65b9\u5757\u53ef\u4ee5\u6d88\u9664\u5f69\u706f\u94fe\u4e0a\u7684\u706f\u6ce1\u3002\u706f\u6ce1\u6d88\u9664\u5b8c\u540e\u6d88\u9664\u5f69\u706f\u94fe\u3002"},help_list3:{1:"\u9b54\u6cd5\u9524",2:"\u5c0f\u6c7d\u8f66",3:"\u98de\u789f",4:"\u9ab0\u5b50",5:"\u540e\u9000\u4e00\u6b65",6:"\u5bfc\u5f39",7:"\u70b8\u5f39",8:"\u9b54\u65b9",info1:"\u6e38\u620f\u5173\u5361\u5185\uff0c\u6d88\u9664\u4efb\u610f1\u4e2a\u65b9\u5757\u6216\u969c\u788d\u3002",info2:"\u6e38\u620f\u5173\u5361\u5185\uff0c\u6d88\u96641\u6574\u884c\u65b9\u5757\u3002",info3:"\u6e38\u620f\u5173\u5361\u5185\uff0c\u6d88\u96641\u6574\u5217\u65b9\u5757\u3002",info4:"\u6e38\u620f\u5173\u5361\u5185\uff0c\u4f7f\u5f53\u524d\u7684\u6240\u6709\u65b9\u5757\u91cd\u65b0\u7ec4\u5408\u3002",info5:"\u6e38\u620f\u5173\u5361\u5185\uff0c\u4f7f\u7528\u540e\u8fd4\u56de\u4e0a\u4e00\u6b65\u64cd\u4f5c\u3002",info6:"\u6e38\u620f\u5f00\u573a\u524d\uff0c\u9009\u62e9\u5bfc\u5f39\u4f7f\u7528\u540e\u5728\u5173\u5361\u5185\u968f\u673a\u628a1\u4e2a\u65b9\u5757\u53d8\u4e3a\u5bfc\u5f39\u3002\u80fd\u6d88\u9664\u6574\u884c\u6216\u6574\u5217\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info7:"\u6e38\u620f\u5f00\u573a\u524d\uff0c\u9009\u62e9\u70b8\u5f39\u4f7f\u7528\u540e\u5728\u5173\u5361\u5185\u968f\u673a\u628a1\u4e2a\u65b9\u5757\u53d8\u4e3a\u70b8\u5f39\u3002\u80fd\u6d88\u96643*3\u8303\u56f4\u5185\u7684\u65b9\u5757\u6216\u969c\u788d\u3002",info8:"\u6e38\u620f\u5f00\u573a\u524d\uff0c\u9009\u62e9\u9b54\u65b9\u4f7f\u7528\u540e\u5728\u5173\u5361\u5185\u968f\u673a\u628a1\u4e2a\u65b9\u5757\u53d8\u4e3a\u9b54\u65b9\u3002\u80fd\u6d88\u9664\u9b54\u65b9\u5bf9\u5e94\u989c\u8272\u7684\u65b9\u5757\u3002"},achieve_list:{1:"\u661f\u661f\u6536\u85cf\u5bb6",2:"\u73af\u7403\u65c5\u884c\u5bb6",3:"\u593a\u5b9d\u5947\u5175",4:"\u54cd\u5f7b\u4e91\u9704",5:"\u72c2\u8f70\u6ee5\u70b8",6:"\u8272\u5f69\u6591\u6593",7:"\u6709\u5907\u65e0\u60a3",8:"\u5343\u9524\u767e\u70bc",9:"\u8f66\u6c34\u9a6c\u9f99",10:"\u5929\u5916\u6765\u5ba2",11:"\u53d8\u5e7b\u83ab\u6d4b",12:"\u4e00\u63b7\u5343\u91d1",13:"\u4e50\u4e8e\u52a9\u4eba",14:"\u5b8c\u7f8e\u65e0\u7f3a",15:"\u8170\u7f20\u4e07\u8d2f",16:"\u575a\u6301\u4e0d\u61c8",17:"\u79ef\u5c11\u6210\u591a",18:"\u7cbe\u529b\u5145\u6c9b",19:"\u72ec\u5360\u9ccc\u5934",20:"\u98ce\u751f\u6c34\u8d77",21:"\u58f0\u540d\u9e4a\u8d77",22:"\u4ea1\u7f8a\u8865\u7262",23:"\u8e0a\u8dc3\u53c2\u52a0",24:"\u4eba\u624d\u6d4e\u6d4e",25:"\u6b65\u6b65\u9ad8\u5347",26:"\u521d\u6765\u4e4d\u5230",1E3:"\u5206\u4eab\u5230\u7fa4",info1:"\u7d2f\u8ba1\u6536\u96c6%1\u9897\u661f\u661f",info2:"\u901a\u8fc7\u7b2c%1\u5173",info3:"\u5f00\u542f%1\u6b21\u661f\u661f\u5b9d\u7bb1",info4:"\u5408\u6210%1\u6b21\u5bfc\u5f39\u7206\u70b8\u7279\u6548",info5:"\u5408\u6210%1\u6b21\u70b8\u5f39\u7206\u70b8\u7279\u6548",info6:"\u5408\u6210%1\u6b21\u9b54\u65b9\u7206\u70b8\u7279\u6548",info7:"\u4f7f\u7528%1\u6b21\u6218\u524d\u9053\u5177",info8:"\u4f7f\u7528%1\u6b21\u9524\u5b50",info9:"\u4f7f\u7528%1\u6b21\u5c0f\u6c7d\u8f66",info10:"\u4f7f\u7528%1\u6b21\u98de\u789f",info11:"\u4f7f\u7528%1\u6b21\u9ab0\u5b50",info12:"\u7d2f\u8ba1\u5145\u503c\u91d1\u989d%1\u5143",info13:"\u5e2e\u52a9\u516c\u4f1a\u6210\u5458%1\u6b21",info14:"%1\u6b21\u4e09\u661f\u8fc7\u5173",info15:"\u62e5\u6709%1\u91d1\u5e01",info16:"\u8fde\u7eed\u7b7e\u5230%1\u5929",info17:"\u7d2f\u8ba1\u7b7e\u5230%1\u5929",info18:"\u8d2d\u4e70\u586b\u6ee1\u4f53\u529b%1\u6b21",info19:"\u4e2a\u4eba\u6392\u884c\u699c\u7b2c\u4e00\u540d",info20:"\u4e2a\u4eba\u6392\u884c\u699c\u7b2c\u4e8c\u540d",info21:"\u4e2a\u4eba\u6392\u884c\u699c\u7b2c\u4e09\u540d",info22:"\u4f7f\u7528%1\u6b21\u52a0\u4e94\u6b65",info23:"\u53c2\u52a0\u6d3b\u52a8\u6b21\u6570\u603b\u8ba1%1\u6b21",info24:"\u6240\u5728\u516c\u4f1a\u8fbe\u5230%1\u7ea7",info26:"\u7b2c\u4e00\u6b21\u521b\u5efa\u516c\u4f1a",info1000:"\u6bcf\u65e5\u5206\u4eab\u5230\u7fa4\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1"},chapter_list:{1:"\u8e0f\u4e0a\u5f81\u7a0b",2:"\u795e\u5947\u9a6c\u620f\u56e2",3:"\u5c0f\u6865\u6d41\u6c34\u70e4\u4e32",4:"\u718a\u5b69\u5b50\u7684\u72c2\u6b22",5:"\u8349\u539f\u4e4b\u65c5",6:"\u7ec8\u6781\u5355\u8eab\u591c\u6d3e\u5bf9",7:"\u73a9\u5177\u7684\u8bf1\u60d1",8:"\u60ca\u9669\u7684\u4f53\u9a8c",9:"\u4f11\u95f2\u7684\u5348\u540e",10:"\u673a\u957f\u5c31\u4f4d",11:"\u62bd\u8c61\u7684\u827a\u672f"},fuitips:{t1:"\u9996\u6b21\u52a0\u8f7d\u8d44\u6e90\u65f6\u95f4\u4f1a\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85",t2:"5-6\u4e2a\u540c\u6837\u989c\u8272\u7684\u65b9\u5757\u53ef\u4ee5\u5408\u6210\u5bfc\u5f39",t3:"7-8\u4e2a\u540c\u6837\u989c\u8272\u7684\u65b9\u5757\u53ef\u4ee5\u5408\u6210\u70b8\u5f39",t4:"9\u4e2a\u540c\u6837\u989c\u8272\u7684\u65b9\u5757\u53ef\u4ee5\u5408\u6210\u9b54\u65b9",t5:"\u9053\u5177\u4e4b\u95f4\u7ec4\u5408\u53ef\u4ee5\u4ea7\u751f\u5f3a\u529b\u7684\u6e05\u9664\u6548\u679c\u54e6\uff01"},guide:{1E4:"\u55e8\uff0c\u6211\u662f\x3ccolor\x3d#ff0000\x3e\u6770\u745e\x3c/c\x3e\uff01\u8ba9\u6211\u966a\u4f60\u5f00\u5fc3\u6d88\u9664\uff01",10001:"\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e 2\u4e2a\u4ee5\u4e0a \x3c/c\x3e\u540c\u8272\u65b9\u5757\uff0c\u5c31\u80fd\u6d88\u9664\u5b83\u4eec\uff01",10002:"\u518d\u6d88\u9664\x3ccolor\x3d#ff0000\x3e10\u4e2a\u84dd\u8272\u65b9\u5757\x3c/c\x3e\u5c31\u53ef\u4ee5\u5b8c\u6210\u76ee\u6807\u5466\uff01",10020:"\u70b9\u70b9\u770b\u76f8\u90bb\u7684\x3ccolor\x3d#ff0000\x3e 5\u4e2a \x3c/c\x3e\u540c\u8272\u65b9\u5757\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1f",10021:"\u5e72\u7684\u6f02\u4eae\uff01\u6765\u8bd5\u8bd5\x3ccolor\x3d#ff0000\x3e\u5bfc\u5f39\x3c/c\x3e\u7684\u5a01\u529b\u5427\uff01",10022:"\x3ccolor\x3d#ff0000\x3e 5\u4e2a\uff086\u4e2a\uff09\x3c/c\x3e\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u5408\u6210\x3ccolor\x3d#ff0000\x3e\u5bfc\u5f39\x3c/c\x3e\u3002",10023:"\u5bfc\u5f39\u53ef\u4ee5\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u4e00\u6a2a\u6392\x3c/c\x3e\u6216\x3ccolor\x3d#ff0000\x3e\u4e00\u7ad6\u6392\x3c/c\x3e\u7684\u65b9\u5757\uff01",10030:"\u8fd9\u6b21\u8bd5\u7740\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e 7\u4e2a \x3c/c\x3e\u540c\u8272\u65b9\u5757\uff01",10031:"\u975e\u5e38\u68d2\uff0c\u5408\u6210\u4e86\x3ccolor\x3d#ff0000\x3e\u70b8\u5f39\x3c/c\x3e\uff01\u70b9\u51fb\u5c31\u53ef\u4ee5\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u9644\u8fd1\u65b9\u5757\x3c/c\x3e\uff01",10032:"\x3ccolor\x3d#ff0000\x3e 7\u4e2a\uff088\u4e2a\uff09\x3c/c\x3e\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u5408\u6210\x3ccolor\x3d#ff0000\x3e\u70b8\u5f39\x3c/c\x3e\u3002",10033:"\u70b9\u51fb\u70b8\u5f39\u53ef\u4ee5\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u5468\u56f4\u65b9\u5757\x3c/c\x3e\uff01",10041:"\u73b0\u5728\u6765\u8bd5\u8bd5\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e 9\u4e2a \x3c/c\x3e\u65b9\u5757\u5427\uff01",10042:"\u751f\u6210\u4e86\x3ccolor\x3d#ff0000\x3e\u9b54\u65b9\x3c/c\x3e\uff01\u70b9\u51fb\u5b83\u53ef\u4ee5\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u540c\u6837\u989c\u8272\x3c/c\x3e\u7684\u6240\u6709\u65b9\u5757\uff01",10043:"\x3ccolor\x3d#ff0000\x3e 9\u4e2a\uff08\u53ca\u4ee5\u4e0a\uff09 \x3c/c\x3e\u540c\u8272\u65b9\u5757\u53ef\u4ee5\u5408\u6210\x3ccolor\x3d#ff0000\x3e\u9b54\u65b9\x3c/c\x3e\u3002",10044:"\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e\u9b54\u65b9\x3c/c\x3e\u53ef\u4ee5\u6d88\u9664\u5168\u5c4f\u6240\u6709\x3ccolor\x3d#ff0000\x3e\u540c\u8272\u65b9\u5757\x3c/c\x3e\u5466\uff01",10050:"\u70b9\u51fb\u4e0b\u9762\u7684\x3ccolor\x3d#ff0000\x3e\u9053\u5177\u7ec4\u5408\x3c/c\x3e\uff0c\u770b\u770b\u4f1a\u7206\u53d1\u4ec0\u4e48\u6837\u7684\u5a01\u529b\u5427\uff01",10051:"\u4efb\u610f\x3ccolor\x3d#ff0000\x3e 2\u4e2a\x3c/c\x3e\u9053\u5177\u7ec4\u5408\u90fd\u53ef\u4ee5\u54e6~",10052:"\u9053\u5177\u7ec4\u5408\u53ef\u662f\x3ccolor\x3d#ff0000\x3e\u5feb\u901f\u901a\u5173\x3c/c\x3e\u7684\u79d8\u8bc0\u54df~",10060:"\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e \u6c14\u7403\u5468\u56f4 \x3c/c\x3e\u7684\u65b9\u5757\uff0c\u53ef\u4ee5\u6d88\u9664\u6c14\u7403\uff01",10070:"\u6d88\u9664\u7f51\u7403\x3ccolor\x3d#ff0000\x3e \u4e0b\u9762 \x3c/c\x3e\u7684\u65b9\u5757\uff0c\u7f51\u7403\u5c31\u4f1a\u6389\u4e0b\u6765\u4e86\u5462\uff01",10071:"\u843d\u5230\x3ccolor\x3d#ff0000\x3e\u68cb\u76d8\u5e95\u90e8\x3c/c\x3e\uff0c\u7f51\u7403\u5c31\u4f1a\u88ab\u6536\u96c6\u5566\uff01",10080:"\u8fd9\u4e2a\u65b9\u5757\u771f\u8ba8\u538c\uff0c\u6d88\u9664\u5b83\u7f51\u7403\u5c31\u53ef\u4ee5\u88ab\u6536\u96c6\u5566\uff01",10081:"\u7528\x3ccolor\x3d#ff0000\x3e\u9b54\u6cd5\u9524\x3c/c\x3e\u6765\u6d88\u9664\u8fd9\u4e2a\u65b9\u5757\u5427\u3002",10082:"\u4e0d\u8981\u5fd8\u8bb0\x3ccolor\x3d#ff0000\x3e\u9b54\u6cd5\u9524\x3c/c\x3e\u53ef\u4ee5\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u4efb\u610f\x3c/c\x3e\u7684\u65b9\u5757\u6216\u969c\u788d\uff0c\u9047\u5230\u96be\u5173\u8bb0\u5f97\u4f7f\u7528\u54df\uff01",10090:"\x3ccolor\x3d#ff0000\x3e\u6d88\u9664\x3c/c\x3e\u5706\u5c0f\u9e21\x3ccolor\x3d#ff0000\x3e \u4e0b\u9762 \x3c/c\x3e\u7684\u65b9\u5757\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6536\u96c6\u5b83\u5566\uff01",10091:"\x3ccolor\x3d#ff0000\x3e\u53cc\u70b8\u5f39\x3c/c\x3e\u5408\u6210\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u6d88\u9664 7*7 \u7684\u65b9\u5757\x3c/c\x3e\uff0c\u70b9\u51fb\u5b83\u4eec\u5feb\u901f\u6536\u96c6\u5706\u5c0f\u9e21\uff01",10010:"\u8fd8\u8bb0\u5f97\u5408\u6210\u89c4\u5219\u5417\uff1f\x3ccolor\x3d#ff0000\x3e\u5bfc\u5f39+\u70b8\u5f39\x3c/c\x3e\u5408\u6210\u53ef\u4ee5\u6d88\u9664\x3ccolor\x3d#ff0000\x3e 3*3\u6a2a\u7eb5\u8303\u56f4 \x3c/c\x3e\u7684\u65b9\u5757\u5466\uff01",10100:"\u597d\u591a\u6ce1\u6ce1\u554a\uff0c\u60f3\u60f3\u529e\u6cd5\u6765\u5feb\u901f\u6536\u96c6\u5b83\u4eec\u5427\uff01",10101:"\u7528\x3ccolor\x3d#ff0000\x3e\u5c0f\u6c7d\u8f66\x3c/c\x3e\u6765\u6536\u96c6\u8fd9\u4e00\u6a2a\u6392\u7684\u6ce1\u6ce1\u5427\u3002",10102:"\x3ccolor\x3d#ff0000\x3e\u5c0f\u6c7d\u8f66\x3c/c\x3e\u53ef\u4ee5\u6d88\u9664\u4e00\u6a2a\u6392\u7684\u65b9\u5757\u6216\u969c\u788d\u54e6\uff01",10110:"\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e \u6ce1\u6ce1\u5185\u7684\u65b9\u5757 \x3c/c\x3e\u5c31\u80fd\u6536\u96c6\u6ce1\u6ce1\u5566\uff01",10111:"\u518d\u8bd5\u7740\u6536\u96c6\x3ccolor\x3d#ff0000\x3e2\u4e2a\u6ce1\u6ce1\x3c/c\x3e\u3002",10130:"\u53c8\u6709\u597d\u591a\u6ce1\u6ce1\u554a\uff0c\u73b0\u5728\u6362\u4e00\u79cd\u65b9\u6cd5\u6765\u6536\u96c6\u5b83\u4eec\u5427\uff01",10131:"\u7528\x3ccolor\x3d#ff0000\x3e\u98de\u789f\x3c/c\x3e\u6765\u6536\u96c6\u8fd9\u4e00\u7ad6\u6392\u7684\u6ce1\u6ce1\u5427\u3002",10132:"\x3ccolor\x3d#ff0000\x3e\u98de\u789f\x3c/c\x3e\u53ef\u4ee5\u6d88\u9664\u4e00\u7ad6\u6392\u7684\u65b9\u5757\u6216\u969c\u788d\u54e6\uff01",10141:"\x3ccolor\x3d#ff0000\x3e\u4e24\u4e2a\u9b54\u65b9\x3c/c\x3e\u5408\u6210\uff0c\u4f1a\u5c06\x3ccolor\x3d#ff0000\x3e \u5168\u5c4f\u6e05\u9664 \u4e00\u6b21\x3c/c\x3e\uff0c\u4e0d\u4fe1\u4f60\u8bd5\u8bd5\u770b\uff01",10160:"\u53cc\u5bfc\u5f39\u4f1a\u6e05\u9664\x3ccolor\x3d#ff0000\x3e \u4e00\u6a2a\u6392\u548c\u4e00\u7ad6\u6392 \x3c/c\x3e\u7684\u65b9\u5757\uff0c\u4f1a\u5728\x3ccolor\x3d#ff0000\x3e \u70b9\u51fb\u4f4d\u7f6e \x3c/c\x3e\u5408\u6210\u5466\uff01",10170:"\u9ab0\u5b50\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u91cd\u65b0\u6392\u5217\x3c/c\x3e\u65b9\u5757\u3002",10171:"\u70b9\u51fb\u8fd9\u4e2a\u65b9\u5757\u8bd5\u4e00\u4e0b\u5427\uff01",13171:"\u606d\u559c\u4f60\u5b8c\u6210\u4e86\u4e00\u9879\x3ccolor\x3d#ff0000\x3e\u6210\u5c31\x3c/c\x3e\uff0c\u5feb\u6765\u9886\u53d6\u5956\u52b1\u5427",10172:"\u5b8c\u6210\x3ccolor\x3d#ff0000\x3e\u66f4\u591a\u6210\u5c31\x3c/c\x3e\u53ef\u4ee5\u83b7\u5f97\x3ccolor\x3d#ff0000\x3e\u4e30\u539a\u5956\u52b1\x3c/c\x3e\uff0c\u6211\u4eec\u53bb\u627e\u67da\u5b50\x3ccolor\x3d#ff0000\x3e\u95ef\u5173\x3c/c\x3e\u53bb\u5427\uff01",10173:"\u606d\u559c\u4f60\u83b7\u5f97\x3ccolor\x3d#ff0000\x3e\u7e41\u661f\u5b9d\u7bb1\x3c/c\x3e\uff0c\u91cc\u9762\u6709\u8d85\u591a\x3ccolor\x3d#ff0000\x3e\u91d1\u5e01\x3c/c\x3e\u548c\x3ccolor\x3d#ff0000\x3e\u9053\u5177\x3c/c\x3e\uff0c\u73b0\u5728\u6253\u5f00\u770b\u770b\u5427\uff01",11342:"\u60f3\u8981\u83b7\u5f97\u66f4\u591a\x3ccolor\x3d#ff0000\x3e\u5956\u52b1\x3c/c\x3e\uff0c\u8bb0\u5f97\u5728\u5173\u5361\u5185\u83b7\u5f97\x3ccolor\x3d#ff0000\x3e3\u661f\x3c/c\x3e\u54e6\uff01",10174:"\u5173\u5361\u603b\u662f\u95ef\u4e0d\u8fc7\uff1f\u8bb0\u5f97\u4f7f\u7528\x3ccolor\x3d#ff0000\x3e\u589e\u5f3a\u9053\u5177\x3c/c\x3e\u5466\uff01",10175:"\u7528\u9b54\u6cd5\u9524\u53ef\x3ccolor\x3d#ff0000\x3e\u6d88\u9664\u6307\u5b9a\u969c\u788d\x3c/c\x3e",10176:"\u7528\u5c0f\u6c7d\u8f66\u53ef\x3ccolor\x3d#ff0000\x3e\u6e05\u9664\u4e00\u6574\u884c\u969c\u788d\x3c/c\x3e",10177:"\u7528\u98de\u789f\u53ef\x3ccolor\x3d#ff0000\x3e\u6e05\u9664\u4e00\u6574\u5217\u969c\u788d\x3c/c\x3e",10178:"\u7528\u9ab0\u5b50\u53ef\x3ccolor\x3d#ff0000\x3e\u91cd\u65b0\u6392\u5217\u65b9\u5757\x3c/c\x3e",10179:"\u7528\u540e\u9000\u4e00\u6b65\u53ef\x3ccolor\x3d#ff0000\x3e\u8fd4\u56de\u4e0a\u4e00\u6b65\u64cd\u4f5c\x3c/c\x3e",10180:"\u606d\u559c\u4f60\u83b7\u5f97\x3ccolor\x3d#ff0000\x3e\u95ef\u5173\u5b9d\u7bb1\x3c/c\x3e\uff0c\u6bcf\u95ef\u8fc7\x3ccolor\x3d#ff0000\x3e10\u5173\x3c/c\x3e\u5c31\u53ef\u4ee5\u6253\u5f00\u4e00\u6b21\uff0c\u91cc\u9762\u6709\u8d85\u591a\x3ccolor\x3d#ff0000\x3e\u91d1\u5e01\u3001\u94f6\u5e01\u3001\u9053\u5177\x3c/c\x3e\uff0c\u73b0\u5728\u6253\u5f00\u770b\u770b\u5427\uff01",10181:"\x3ccolor\x3d#ff0000\x3e\u606d\u559c\u4f60\u5b8c\u6210\u4e86\u65b0\u624b\u9636\u6bb5\u3002\x3c/c\x3e\u516c\u4f1a\u7cfb\u7edf\u5f00\u542f\u4e86\uff01\u662f\u65f6\u5019\u627e\u4e00\u4e9b\u5fd7\u540c\u9053\u5408\u7684\u5c0f\u4f19\u4f34\u5566\uff0c\x3ccolor\x3d#ff0000\x3e\u70b9\u8fd9\u91cc\x3c/c\x3e\uff01",10182:"\u522b\u5fd8\u4e86\u6bcf\u5929\u90fd\u6765\u7b7e\u5230\u54e6\uff0c\u7b7e\u6ee17\u65e5\u66f4\u662f\u6709\u7ec8\u6781\u5927\u5956\u5728\u7b49\u7740\u4f60\uff01",10183:"\u51b2\u5173\u6d3b\u52a8\u5f00\u542f\u4e86\uff0c\u70b9\u51fb\u201c\u5f00\u59cb\u201d\u540e\uff0c\u901a\u8fc7\u4efb\u610f\u4e00\u5173\u5c31\u53ef\u4ee5\u53c2\u52a0\uff01",10184:"\u9526\u6807\u8d5b\u5f00\u542f\u4e86\uff0c\u9a6c\u4e0a\u95ef\u5173\u6536\u96c6\u661f\u661f\uff0c\u548c\u5176\u4ed6\u73a9\u5bb6\u4e00\u4e89\u9ad8\u4e0b\u5427\uff01",10200:"\u54ce\u5440\uff0c\u597d\u50cf\x3ccolor\x3d#ff0000\x3e\u70b9\u9519\u4e86\x3c/c\x3e\uff01\u521a\u521a\u9001\u4f60\u7684\x3ccolor\x3d#ff0000\x3e\u201c\u540e\u9000\u4e00\u6b65\u201d\x3c/c\x3e\uff0c\u53ef\u4ee5\u4e0a\u573a\u4e86\uff01",10201:"\u540e\u9000\u4e00\u6b65\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u8fd4\u56de \u4e0a\u4e00\u6b65\u64cd\u4f5c \x3c/c\x3e\uff0c\u6765\u8bd5\u4e00\u4e0b\u5427\uff01",10210:"\u70b9\u51fb\u7bb1\u5b50\x3ccolor\x3d#ff0000\x3e \u9644\u8fd1 \x3c/c\x3e\u65b9\u5757\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u7bb1\u5b50\x3c/c\x3e\u3002",10211:"\u8fd9\u4e48\u5389\u5bb3\uff0c\u90a3\u628a\x3ccolor\x3d#ff0000\x3e\u8fd9\u4e9b\u7bb1\u5b50\u90fd\u6e05\u9664\x3c/c\x3e\u5427\uff01",10310:"\u9b54\u6cd5\u7bb1\x3ccolor\x3d#ff0000\x3e\u5185\u6709\u5c0f\u72d7\u997c\u5e72\x3c/c\x3e\uff0c\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e \u5468\u56f4\u65b9\u5757 \x3c/c\x3e\u5c31\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u997c\u5e72\x3c/c\x3e\u54e6\uff01",10410:"\u8fd9\u662f\u5f69\u8272\u6c14\u7403\uff0c\u9700\u8981\u70b9\u51fb\x3ccolor\x3d#ff0000\x3e \u5468\u56f4\u540c\u8272\u65b9\u5757 \x3c/c\x3e\u624d\u80fd\x3ccolor\x3d#ff0000\x3e\u6d88\u9664\x3c/c\x3e\u5466~",10510:"\u8fd9\u91cc\u662f\u706f\u6ce1\uff0c\x3ccolor\x3d#ff0000\x3e\u70b9\u4eae\u540e\u6e05\u9664\x3c/c\x3e\uff0c\u9700\u8981\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u5468\u56f4\u65b9\u5757 2\u6b21 \x3c/c\x3e\u54e6\uff01",10610:"\u679c\u51bb\u51fa\u73b0\u4e86\uff01\u5b83\u4eec\u4f1a\x3ccolor\x3d#ff0000\x3e\u6162\u6162\u5403\u6389\u65b9\u5757\x3c/c\x3e\uff0c\u5c06\u5b83\u4eec\x3ccolor\x3d#ff0000\x3e \u53ca\u65f6 \x3c/c\x3e\u6e05\u9664\u6389\u5427\uff01",10710:"\u8bd5\u7740\u70b9\u51fb\u4e00\u4e0b\x3ccolor\x3d#ff0000\x3e \u540c\u8272\u65b9\u5757 \x3c/c\x3e\uff0c\u8fd9\u6837\u5c31\u80fd\x3ccolor\x3d#ff0000\x3e\u6d88\u9664\u5f69\u8272\u7bb1\u5b50\x3c/c\x3e\u4e86\u5466\uff01",10810:"\u5c0f\u7ef5\u7f8a\u53ef\u662f\u5f88\u575a\u5f3a\u7684\uff0c\u53ea\u80fd\u7528\x3ccolor\x3d#ff0000\x3e \u5bfc\u5f39\u548c\u70b8\u5f39 \x3c/c\x3e\u6d88\u9664\u54e6\uff01",11010:"\u6bcf\u4e2a\u53f0\u7403\u684c\u4e0a\u6709\x3ccolor\x3d#ff0000\x3e 10\u4e2a \u53f0\u7403\x3c/c\x3e\uff0c\u6d88\u9664\u5468\u56f4\u65b9\u5757\u53ef\u4ee5\u6536\u96c6\u53f0\u7403\u3002",21210:"\u70b9\u51fb\u5c0f\u72d7\u73a9\u5177\u5468\u56f4\u7684\u65b9\u5757\u53ef\u628a\x3ccolor\x3d#ff0000\x3e \u73a9\u5177\u67d3\u8272 \x3c/c\x3e\uff01\u518d\u6b21\u6d88\u9664\u67d3\u8272\u73a9\u5177\x3ccolor\x3d#ff0000\x3e\u5468\u56f4\u540c\u8272\x3c/c\x3e\u7684\u65b9\u5757\u6765\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u73a9\u5177\x3c/c\x3e\u3002",21410:"\u6d88\u9664\u7b3c\u5b50\x3ccolor\x3d#ff0000\x3e \u9644\u8fd1\u65b9\u5757 \x3c/c\x3e\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u7b3c\u5b50\x3c/c\x3e\u54e6\uff01",21610:"\u4e50\u9ad8\u6728\u9a6c\u9700\u8981\u7528\x3ccolor\x3d#ff0000\x3e \u5bfc\u5f39\u6216\u70b8\u5f39 \x3c/c\x3e\u6253\u51fb\x3ccolor\x3d#ff0000\x3e 3\u6b21 \x3c/c\x3e\u624d\u80fd\u6d88\u9664\u3002",21810:"\u76f4\u5347\u673a\u9700\u8981\x3ccolor\x3d#ff0000\x3e\u8fde\u7eed\u6d88\u9664 2\u6b21 \x3c/c\x3e\u624d\u80fd\u6536\u96c6\u54e6\u3002",22010:"\u6d88\u9664\u4e0e\u8721\u7b14\x3ccolor\x3d#ff0000\x3e\u989c\u8272\u76f8\u540c\x3c/c\x3e\u7684\u65b9\u5757\uff0c\u5c31\u53ef\u4ee5\u6536\u96c6\u8721\u7b14\u5566\u3002",22410:"\u6d88\u9664\u5957\u5a03\u5468\u56f4\u65b9\u5757\x3ccolor\x3d#ff0000\x3e 3\u6b21 \x3c/c\x3e\uff0c\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u5957\u5a03\x3c/c\x3e\uff01",22810:"\u94a2\u7bb1\u5b50\u9700\u8981\x3ccolor\x3d#ff0000\x3e \u5bfc\u5f39\u6216\u70b8\u5f39 \x3c/c\x3e\u6253\u51fb\u624d\u80fd\u6d88\u9664\uff01",23210:"\u6d88\u9664\u6d17\u8863\u673a\x3ccolor\x3d#ff0000\x3e\u5468\u56f4\u65b9\u5757\x3c/c\x3e\u4f1a\u968f\u673a\u4ea7\u751f\x3ccolor\x3d#ff0000\x3e 1\u4e2a \u6ce1\u6ce1\x3c/c\x3e\u54e6\uff01",23510:"\x3ccolor\x3d#ff0000\x3e\u6253\u7834\u7cd6\u7f50\x3c/c\x3e\u624d\u80fd\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u7cd6\u679c\x3c/c\x3e\u5466\uff01",24010:"\u5728\x3ccolor\x3d#ff0000\x3e\u6253\u5f00\u7684\u868c\x3c/c\x3e\u5468\u56f4\u6d88\u9664\u65b9\u5757\u5c31\u53ef\u4ee5\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u868c\x3c/c\x3e\u4e86\uff01\u6ce8\u610f\x3ccolor\x3d#ff0000\x3e\u5173\u95ed\u7684\u868c\x3c/c\x3e\u662f\u4e0d\u80fd\u88ab\u6d88\u9664\u7684\u54e6\uff01",24510:"\u6d88\u9664\u5f69\u706f\u94fe\x3ccolor\x3d#ff0000\x3e\u5468\u56f4\u65b9\u5757\x3c/c\x3e\u5c31\u80fd\x3ccolor\x3d#ff0000\x3e\u6536\u96c6\u706f\u6ce1\x3c/c\x3e\u5566\u3002\u6d88\u9664\x3ccolor\x3d#ff0000\x3e\u6240\u6709\u706f\u6ce1\x3c/c\x3e\u624d\u80fd\x3ccolor\x3d#ff0000\x3e\u6d88\u9664\u5f69\u706f\u94fe\x3c/c\x3e\u54e6\uff01"},assaultRule:["\n1. \u6d3b\u52a8\u65f6\u95f4\uff1a\x3ccolor\x3d#ff0000\x3e3\u5929\x3c/c\x3e\n","2. \u6d3b\u52a8\x3ccolor\x3d#ff0000\x3e32\u5173\x3c/c\x3e\u5f00\u542f\uff01\n","3. \u6d3b\u52a8\u89c4\u5219\uff1a","      A. \u6d3b\u52a8\u671f\u95f4,\u6bcf\u8fc71\u5173\u5373\u53ef\u83b7\u5f97\x3ccolor\x3d#ff0000\x3e\u589e\u5f3a\u9053\u5177\x3c/c\x3e,\u53ef\u76f4\u63a5\u5e26\u5165\u4e0b\u4e00\u5173\u5185\u4f7f\u7528\u3002","      B. \u8fde\u7eed\u8fc7\x3ccolor\x3d#ff0000\x3e3\u5173\u4ee5\u4e0a\x3c/c\x3e\u53ef\u4e00\u76f4\u7ef4\u6301\x3ccolor\x3d#ff0000\x3e\u6700\u9ad8\u7ea7\u5956\u52b1\x3c/c\x3e\u3002","      C. \x3ccolor\x3d#ff0000\x3e\u5931\u8d251\u6b21\x3c/c\x3e\u4f1a\u5931\u53bb\u5f53\u524d\u53ef\u5e26\u5165\u5956\u52b1,\u9700\u91cd\u65b0\u95ef\u8fc71\u5173\u518d\u6b21\u83b7\u5f97\u589e\u5f3a\u9053\u5177\u3002\n","4. \u8bf7\u4fdd\u6301\u60a8\u7684\u8bbe\u5907\u5904\u4e8e\u8054\u7f51\u72b6\u6001,\u5426\u5219\u4e0d\u80fd\u8bb0\u5f55\u8fdb\u5ea6\u3002\n","5. \u8bf7\u60a8\x3ccolor\x3d#ff0000\x3e\u4e0d\u8981\u4f5c\u5f0a\x3c/c\x3e,\u4e00\u7ecf\u53d1\u73b0,\u4f1a\u6263\u9664\u60a8\u7684\u6240\u6709\u5956\u52b1\u5185\u5bb9\u3002"],achievetRule:["\n1. \u8fbe\u6210\u6e38\u620f\u4e2d\u7684\u4e00\u4e9b\u76ee\u6807,\u5c31\u53ef\u4ee5\u83b7\u5f97\x3ccolor\x3d#ff0000\x3e\u6210\u5c31\u5956\u52b1\x3c/c\x3e\uff01\n","2. \u60a8\u7684\u8bbe\u5907\u5fc5\u987b\u5904\u4e8e\u8054\u7f51\u72b6\u6001\u4e0b\u624d\u80fd\u9886\u53d6\u5956\u52b1\u3002\n","3. \u4e00\u65e6\u53d1\u73b0\u4f5c\u5f0a\u5c06\u6263\u9664\u83b7\u5f97\u7684\u5956\u52b1\u54e6\uff01"],tournamentRule:["\n1. \u6d3b\u52a8\u65f6\u95f4\uff1a\x3ccolor\x3d#ff0000\x3e3\u5929\x3c/c\x3e\n","2. \u6d3b\u52a8\x3ccolor\x3d#ff0000\x3e19\u5173\x3c/c\x3e\u5f00\u542f\uff01\n","3. \u6d3b\u52a8\u671f\u95f4,\u95ef\u8fc71\u5173\u5373\u53ef\u53c2\u52a0\u6d3b\u52a8\u3002\n","4. \u6392\u540d\x3ccolor\x3d#ff0000\x3e\u524d10\u540d\x3c/c\x3e\u73a9\u5bb6\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u3002\n","5. \u6d3b\u52a8\u7ed3\u675f\u540e\x3ccolor\x3d#ff0000\x3e\u7b2c\u4e8c\u59290\u70b9\x3c/c\x3e\u53ef\u9886\u53d6\u5956\u52b1,\u6d3b\u52a8\u8fdb\u5ea6\u5237\u65b0\u3002\n","6. \u8bf7\u4fdd\u6301\u60a8\u7684\u8bbe\u5907\u5904\u4e8e\u8054\u7f51\u72b6\u6001,\u5426\u5219\u4e0d\u80fd\u8bb0\u5f55\u8fdb\u5ea6\u3002\n","7. \u8bf7\u60a8\x3ccolor\x3d#ff0000\x3e\u4e0d\u8981\u4f5c\u5f0a\x3c/c\x3e,\u4e00\u7ecf\u53d1\u73b0,\u4f1a\u6263\u9664\u60a8\u7684\u6240\u6709\u5956\u52b1\u5185\u5bb9\u3002"],SignInActivity7:["\n1. \u6d3b\u52a8\u65f6\u95f4\uff1a\x3ccolor\x3d#ff0000\x3e7\u65e5\x3c/c\x3e\n","2. \u6d3b\u52a8\x3ccolor\x3d#ff0000\x3e4\u5173\x3c/c\x3e\u5f00\u542f\uff01\n","3. \u6d3b\u52a8\u89c4\u5219\uff1a\u7d2f\u8ba1\x3ccolor\x3d#ff0000\x3e\u6bcf\u65e5\u7b7e\u5230\x3c/c\x3e,\u6bcf\u65e5\u4ec5\u53ef\u7b7e\u5230\x3ccolor\x3d#ff0000\x3e1\u6b21\x3c/c\x3e,\u5956\u52b1\u4f9d\u6b21\u9886\u53d6\u3002\x3ccolor\x3d#ff0000\x3e\u7b7e\u6ee17\u6b21\x3c/c\x3e\u624d\u80fd\u9886\u53d6\u5230\u6700\u540e\u5927\u5956\u3002\uff08\u4f8b\uff1a\u4e00\u65e5\u7b7e\u5230\u5b8c\u6210,\u4e8c\u65e5\u672a\u7b7e\u5230,\u4e09\u65e5\u7b7e\u5230\u53ef\u83b7\u5f97\u7b2c2\u6b21\u5956\u52b1\u3002\uff09\n","4. \u5956\u52b1\u5185\u5bb9\uff1a\u7b2c1\u5929\uff1a\u91d1\u5e01*200\uff0c\u7b2c2\u5929\uff1a\u6c7d\u8f66*1\uff0c\u7b2c3\u5929\uff1a\u91d1\u5e01*400\uff0c\u7b2c4\u5929\uff1a\u4e2d\u4f53\u529b*1\uff0c\u7b2c5\u5929\uff1a\u94f6\u5e01*2000\uff0c\u7b2c6\u5929\uff1a\u91d1\u5e01*500\uff0c\u7b2c7\u5929\uff1a\u9ab0\u5b50*1\uff0c\u7b2c8\u5929\uff1a\u65e0\u9650\u4f53\u529b*1h\uff0c\u7b2c9\u5929\uff1a\u91d1\u5e01*600\uff0c\u7b2c10\u5929\uff1a\u9b54\u6cd5\u9524*1\uff0c\u7b2c11\u5929\uff1a\u94f6\u5e01*3000\uff0c\u7b2c12\u5929\uff1a\u91d1\u5e01*1000\uff0c\u7b2c13\u5929\uff1a\u65e0\u9650\u4f53\u529b*2h\uff0c\u7b2c14\u5929\uff1a\u91d1\u5e01*2000\u3002\n","5. \u8bf7\u4fdd\u6301\u60a8\u7684\u8bbe\u5907\u5904\u4e8e\u8054\u7f51\u72b6\u6001,\u5426\u5219\u4e0d\u80fd\u8bb0\u5f55\u8fdb\u5ea6\u3002\n","6. \u8bf7\u60a8\x3ccolor\x3d#ff0000\x3e\u4e0d\u8981\u4f5c\u5f0a\x3c/c\x3e,\u4e00\u7ecf\u53d1\u73b0,\u4f1a\u6263\u9664\u60a8\u7684\u6240\u6709\u5956\u52b1\u5185\u5bb9\u3002"],treasureRule:["\u516c\u4f1a\u5b9d\u85cf\u89c4\u5219"],contendRule:["\u516c\u4f1a\u4e89\u9738\u8d5b\u89c4\u5219"],TotalAdsRule:["\n1. \u7d2f\u79ef\u89c2\u770b\u89c6\u9891\u8fbe\x3ccolor\x3d#ff0000\x3e%1\u6b21\uff0c%2\u6b21\uff0c%3\u6b21\x3c/c\x3e\u53ef\u5206\u522b\u83b7\u5f97\u5bf9\u5e94\u5956\u52b1\u3002\n","2. \u6d3b\u52a8\u65f6\u95f4\u4e3a\x3ccolor\x3d#ff0000\x3e%4\x3c/c\x3e\u81f3\x3ccolor\x3d#ff0000\x3e%5\x3c/c\x3e\u3002\n","3. \u4ec5\u9650\u5728\u672c\u6d3b\u52a8\u754c\u9762\u5185\u89c2\u770b\u6210\u529f\u7684\u89c6\u9891\u53ef\u4ee5\u8bb0\u5f55\u6b21\u6570\u3002\n","4. \u89c6\u9891\u89c2\u770b\u5012\u8ba1\u65f6\uff1a\x3ccolor\x3d#ff0000\x3e5\u5206\u949f\x3c/c\x3e\uff0c\u6bcf\u65e5\x3ccolor\x3d#ff0000\x3e0\u70b9\x3c/c\x3e\u5237\u65b0\u3002\n","5. \u8bf7\u4fdd\u6301\u60a8\u7684\u8bbe\u5907\u5904\u4e8e\u8054\u7f51\u72b6\u6001,\u5426\u5219\u4e0d\u80fd\u8bb0\u5f55\u8fdb\u5ea6\u3002\n","6. \u8bf7\u60a8\x3ccolor\x3d#ff0000\x3e\u4e0d\u8981\u4f5c\u5f0a\x3c/c\x3e,\u4e00\u7ecf\u53d1\u73b0,\u4f1a\u6263\u9664\u60a8\u7684\u6240\u6709\u5956\u52b1\u5185\u5bb9\u3002"],NewYearRule:["\n1. \u8fce\u65b0\u6625\uff0c\u8fc7\u4f73\u8282\u3002\u6625\u8282\u671f\u95f4\u6bcf\u65e5\u767b\u5f55\u5373\u53ef\u9886\u53d6\u989d\u5916\u5956\u52b1\u3002\n","2. \u6d3b\u52a8\u65f6\u95f4\u4e3a\x3ccolor\x3d#ff0000\x3e%1\x3c/c\x3e\u81f3\x3ccolor\x3d#ff0000\x3e%2\x3c/c\x3e\u3002\n","3. \u6bcf\u65e5\u4ec5\u53ef\u9886\u53d6\x3ccolor\x3d#ff0000\x3e1\u6b21\x3c/c\x3e\u5956\u52b1\uff0c\u6b21\u65e5\x3ccolor\x3d#ff0000\x3e0\u70b9\x3c/c\x3e\u5237\u65b0\u3002\n","4. \u8bf7\u4fdd\u6301\u60a8\u7684\u8bbe\u5907\u5904\u4e8e\u8054\u7f51\u72b6\u6001,\u5426\u5219\u4e0d\u80fd\u8bb0\u5f55\u8fdb\u5ea6\u3002\n","5. \u8bf7\u60a8\x3ccolor\x3d#ff0000\x3e\u4e0d\u8981\u4f5c\u5f0a\x3c/c\x3e,\u4e00\u7ecf\u53d1\u73b0,\u4f1a\u6263\u9664\u60a8\u7684\u6240\u6709\u5956\u52b1\u5185\u5bb9\u3002"],towerActiveRule:["\n1.\u6d3b\u52a8\u5171\u6709\u4e24\u8f6e\uff0c\u4e00\u517110\u4e2a\u6d3b\u52a8\u5173\u5361\u3002\u6bcf\u8f6e5\u4e2a\u5173\u5361\u3002\n","2. \u8fde\u7eed\u95ef\u5173\u6210\u529f\u53ef\u83b7\u5f97\u4e30\u539a\u5956\u52b1\uff0c\u5956\u52b1\u53ef\u9886\u53d62\u6b21\u54e6~\n","3. \u82e5\u8fde\u7eed\u95ef\u5173\u5931\u8d25\uff0c\u9700\u4ece\u6bcf\u8f6e\u7684\u7b2c1\u5173\u91cd\u65b0\u6311\u6218\u3002\n","4. \u7b2c\u4e00\u8f6e\u5956\u52b1\uff1a\u91d1\u5e01*2000\u3001\u94f6\u5e01*8000\u3001\u65e0\u9650\u4f53\u529b*1h\u3001\u9b54\u6cd5\u9524*3\u3001\u9ab0\u5b50*3\n\u7b2c\u4e8c\u8f6e\u5956\u52b1\uff1a\u91d1\u5e01*4000\u3001\u94f6\u5e01*12000\u3001\u65e0\u9650\u4f53\u529b*2h\u3001\u6c7d\u8f66*3\u3001\u9b54\u6cd5\u9524*3\u3001\u9ab0\u5b50*3","5. \u8bf7\u4fdd\u6301\u60a8\u7684\u8bbe\u5907\u5904\u4e8e\u8054\u7f51\u72b6\u6001,\u5426\u5219\u4e0d\u80fd\u8bb0\u5f55\u8fdb\u5ea6\u3002\n","6. \u8bf7\u60a8\x3ccolor\x3d#ff0000\x3e\u4e0d\u8981\u4f5c\u5f0a\x3c/c\x3e,\u4e00\u7ecf\u53d1\u73b0,\u4f1a\u6263\u9664\u60a8\u7684\u6240\u6709\u5956\u52b1\u5185\u5bb9\u3002"],dialRule:["\u62bd\u5956\u89c4\u5219"],g_name:{0:"\u68a6\u5e7b\u6d88\u6d88\u4e50",1:"\u7231\u73a9\u70b9\u70b9\u6d88"},badge_list:{0:"\u65e0",1:"\u4eac",2:"\u8c6b",3:"\u9655",4:"\u5ddd",5:"\u6caa",6:"\u7ca4",7:"\u5409",8:"\u9102",9:"\u7518",10:"\u8d35",11:"\u53f0",12:"\u6842",13:"\u6d25",14:"\u6e58",15:"\u9752",16:"\u4e91",17:"\u9c81",18:"\u743c",19:"\u5180",20:"\u65b0",21:"\u6e1d",22:"\u82cf",23:"\u6e2f",24:"\u664b",25:"\u5b81",26:"\u85cf",27:"\u6d59",28:"\u6fb3",29:"\u8499",30:"\u7696",31:"\u8fbd",32:"\u95fd",33:"\u9ed1",34:"\u8d63"},invite_title:{1:"\u6d88\u9664\u7684\u4e0d\u662f\u969c\u788d\uff0c\u662f\u70e6\u607c",2:"\u5468\u672b\u6d88\u9664\u4e00\u4e0b\uff0c\u5f88\u5f00\u5fc3",3:"\u8fde\u80dc5\u5173",4:"666",5:"\u4e8b\u534a\u529f\u500d",6:"\u60ca\u5fc3\u52a8\u9b44",7:"\u5929\u8d4b\u5f02\u7980",8:"\u8c01\u8bf4\u59b9\u5b50\u4e0d\u80fd\u6765\u4e00\u53d1",9:"\u5389\u5bb3\u4e86\u6211\u7684\u59b9",10:"\u4f53\u529b\u90fd\u662f\u6d6e\u4e91",11:"\u6d88\u9664\u65e0\u5c3f\u70b9",12:"\u68a6\u5e7b\u6d88\u6d88\u4e50",13:"\u6700\u8fc7\u763e\u7684\u6d88\u9664\u6e38\u620f",14:"\u57fa\u53cb\u6d88\u6d88\u6d88"},invite_desc:{0:"\u6700\u8fc7\u763e\u7684\u6d88\u9664\u6e38\u620f\uff01",1:"\u5927\u5409\u5927\u5229\uff0c\u6211\u4eec\u80fd\u8d62",2:"\u522b\u4ee5\u4e3a\u5b85\u5728\u5bb6\u6211\u5c31\u627e\u4e0d\u5230\u4f60",3:"\u65e0\u654c\u662f\u591a\u4e48\u5bc2\u5bde~",4:"\u8fd9\u5173\u7ec8\u4e8e\u8fc7\u53bb\u4e86\uff01",5:"\u6b65\u6570\u6211\u53ea\u7528\u4e86\u4e00\u534a\u5c31\u8fc7\u5173\u4e86\uff01",6:"\u6700\u540e\u4e00\u6b65\u529b\u633d\u72c2\u6f9c\uff01",7:"\u96be\u5ea6\u5173\u5361\u4e00\u6b21\u8fc7\u5173\uff01",8:"\u672c\u6765\u6211\u662f\u62d2\u7edd\u7684\uff0c\u4f46\u662f\u8fd9\u4e48\u591a\u597d\u73a9\u7684\u6d88\u9664\u5173\u5361\uff0c\u6211\u53ea\u80fd\u9ed8\u9ed8\u7684\u6765\u4e00\u53d1\uff01",9:"\u539f\u6765\u5728\u5e8a\u4e0a\u73a9\u6d88\u6d88\u6d88\uff0c\u624d\u662f\u4e00\u5929\u5f53\u4e2d\u6700\u8212\u670d\u7684\u65f6\u5149\uff01",10:"\u59b9\u5b50\uff0c\u522b\u95f9\uff0c\u6211\u662f\u4e00\u4e2a\u6b63\u7ecf\u7684\u6d88\u9664\u6e38\u620f\uff01",11:"\u6233\u6211\u6233\u6211\uff01\u4fe1\u4e0d\u4fe1\u6233\u6211\u5c31\u7ed9\u4f60\u7206\u4f53\u529b\uff01",12:"\u5931\u8d25\u4e0d\u4e00\u5b9a\u662f\u6210\u529f\u7684\u5988\u5988\uff0c\u5206\u4eab\u624d\u662f\u6d88\u9664\u901a\u5173\u7684\u6377\u5f84\uff01",13:"\u6700geilivable\u7684\u6d88\u9664\u6e38\u620f\uff0c\u5c11\u5973\u6700\u7231\uff01",14:"\u5c0f\u59d0\u59d0\u4eec\u75af\u72c2\u6253call\u7684\u6d88\u9664\u6e38\u620f\uff01",15:"\u5c31\u5dee\u4f60\u4e86\uff0c\u5feb\u6765\u8ddf\u6211\u4e00\u8d77\u6d88\u9664\uff01"},battle_share:{title1:"\u606d\u559c\u83b7\u5f97",title2:"\u8d85\u7ea7\u6d88\u9664",info1:"\u91d1\u5e01*100",info2:"\u672c\u6b21\u6d88\u9664\u5927\u4e8e%1\u5757",ignoreGet:"\u653e\u5f03\u5956\u52b1\x3e",welcomeNotice:"\u5206\u4eab\u5230\u7fa4\u624d\u80fd\u83b7\u5f97\u8d85\u591a\u5956\u52b1\uff01"}},cc._RF.pop()},{}],"color.frag":[function(t,e,i){cc._RF.push(e,"054bb9DVeJNNIPDQog8dZhR","color.frag"),e.exports="\n#ifdef GL_ES\nprecision lowp float;\n#endif\nuniform float r;\nuniform float g;\nuniform float b;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\n    vec4 c \x3d texture2D(CC_Texture0, v_texCoord);\n    float dis \x3d (c.r + c.g + c.b) / 3.;\n    gl_FragColor \x3d vec4(r * dis, g * dis, b * dis, c.a);\n}\n",cc._RF.pop()},{}],"color.vert":[function(t,e,i){cc._RF.push(e,"be7420YAcdEq7Fo1n6AVBw5","color.vert"),e.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d CC_PMatrix * a_position;\n    v_fragmentColor \x3d a_color; \n    v_texCoord \x3d a_texCoord; \n}\n",cc._RF.pop()},{}],dialog_balancefirework:[function(t,e,i){cc._RF.push(e,"428bdWktl1Gy77EmxIZTIk+","dialog_balancefirework");var n=t("MathUtils"),o=t("N7Resource"),a=t("GameConfig"),s=t("N7Sound");cc.Class({"extends":cc.Component,properties:{dog:{type:sp.Skeleton,"default":null},text:{type:cc.Node,"default":null},displayTime:1.5,delay:.2,interval:.1,count:10,fireworkTime:0,fireworkDelayDelete:1},statics:{fireworkPrefab:[5608,5609,5610,5612]},onDestroy:function(){this.unschedule(this.firework),this.unschedule(this.stopFirework)},start:function(){this.dog.setAnimation(0,"jieshu",!1)},startFirework:function(e,i){this.dog.node.scale=0,this.width=this.node.width-150,this.height=this.node.height/2-100,this.widthHalf=this.width/2,this.heightHalf=this.height/2,this.dog.node.active=!0;var n=this;this.dog.setStartListener(function(){t("N7MusicV2").switchVol(0),s.playSound(90160);var e=n.getComponent(cc.Animation).play("balance");n.scheduleOnce(n.stopFirework,.9*e.duration*e.speed),n.dog.node.scale=.75}),this.dog.setEndListener(function(){n.dog.node.scale=0}),this.getComponent(cc.Animation).on("finished",function(){e.call(i)},this),a.get("h5")||this.schedule(this.firework,this.interval,cc.macro.REPEAT_FOREVER,this.delay)},firework:function(){o.loadRes(5608,function(t){t.node.zIndex=-1,t.node.x=0,t.node.y=-this.height,t.node.scale=.7+n.randInt(0,10)/10;var e=cc.p(this.widthHalf-n.randInt(0,this.width),n.randInt(0,this.height));t.playEffect(),t.moveTo(e),t.node.parent=this.node},this)},stopFirework:function(){this.unschedule(this.firework)}}),cc._RF.pop()},{GameConfig:"GameConfig",MathUtils:"MathUtils",N7MusicV2:"N7MusicV2",N7Resource:"N7Resource",N7Sound:"N7Sound"}],dialog_balance:[function(t,e,i){cc._RF.push(e,"20a18yA1tVO2II9y6h5nGlh","dialog_balance");var n=t("GameTools"),o=t("GameEvent"),a=t("N7UIFlyLayer"),s=t("N7Resource"),c=t("UserLogic"),r=t("n7"),l=t("N7Sound"),h=t("MathUtils"),u=t("GameLogic"),d=cc.Class({"extends":cc.Component,properties:{firework:{type:t("dialog_balancefirework"),"default":null},balanceContent:{type:cc.Node,"default":null},background:{type:cc.Node,"default":null},game_balance:{type:t("UIGameBalance"),"default":null}},statics:{FLYTO_GOLD_PARAMS:{scale1:.4,scale2:.5,p1:{offset:-100},p2:{min:10,max:20},time:.4},FLYTO_GOLD_COUNT:8,_WATCHADED_:!1,STATE_FIREWORK:10,STATE_FIREWORKEND:11,STATE_FRIST:0,STATE_IDLE:1,STATE_END:2,START_FLY:{scale1:.4,scale2:.4,p1:{offset:-110},p2:{offset:30},time:1},ANIM_LIST:["balance_page_start","balance_page_idle","balance_page_hit"]},onLoad:function(){this.background&&n.capture(this.background,this.touchBackground,this),n.btnc(this.bottom,"btn_watch/icon",n.makef(this.watchAd,this))},onEnable:function(){this.state=-1,this.nextState=-1},setGold:function(t){this.gold=t,this.goldNum.setText(t)},setParam:function(t){this.p=t;var e=u.getStarBox();this.p.org_star=t.star,e.star>=e.max&&(this.p.star=0)},enterState:function(t,e,i,n,o){if(t==d.STATE_FIREWORK)return this.background.active=!0,this.balanceContent.active=!1,this.firework.node.active=!1,this.showBackground(0,function(){this.firework.node.active=!0,this.firework.startFirework(function(){this.callFunc=null,this.skipBalance||(this.scheduleOnce(function(){e.call(i,d.STATE_FIREWORK,!1)},1),this.firework.node.runAction(cc.fadeOut(1)),this.background.runAction(cc.fadeOut(1)))},this)}),this.callFunc={callFunc:e,caller:i},void(this.state=d.STATE_FIREWORKEND);t==d.STATE_FRIST&&(l.playSound(90231),this.game_balance.__showed(this,n,o))},showBackground:function(t,e){this.background.runAction(cc.fadeIn(t)),this.scheduleOnce(e,t)},playFirework:function(){},watchAd:function(){n.hide(this.bottom);var e=this;t("SdkIns").instance().ad(104,function(t){0==t.code&&(c.watchAded(),o.EVENT_OPEN_DIALOG({name:"dialog_watchad_awd",param:{awd:e.gold,type:"balance",topbar:e.topbar}}))}),d._WATCHADED_=!0},touchBackground:function(){this.callFunc&&this.state==d.STATE_FIREWORKEND&&(this.firework.node.active=!1,this.background.active=!1,this.callFunc.callFunc.call(this.callFunc.caller,d.STATE_FIREWORK,!0),this.callFunc=null,this.skipBalance=!0)},playAnim:function(){this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playAnimEnd,this)),this.anim.stop(),this.nextState==d.STATE_FRIST&&(this.state=this.nextState=d.STATE_IDLE,this.state=this.nextState,n.sh(this.bottom,null,c.canAd()&&!d._WATCHADED_)),this.anim.play(d.ANIM_LIST[this.nextState])},playAnimEnd:function(){switch(this.state=this.nextState,this.state){case d.STATE_FRIST:this.scheduleOnce(function(){this.enterState(d.STATE_IDLE),this.state=this.nextState},0);break;case d.STATE_IDLE:case d.STATE_END:}},balanceEnd:function(t){this.scheduleOnce(function(){1==this.p.mid?o.EVENT_OPEN_DIALOG({name:"dialog_gateEntrance",param:{lv:c.geti("lev"),btnc:!0}}):o.EVENT_BIGMAP_SHOW(this.p)},t)},startFlyGold:function(){n.hide(this.bottom);var t=parseInt(this.gold/d.FLYTO_GOLD_COUNT+.5),e=this.gold-(d.FLYTO_GOLD_COUNT-1)*t,i=.2,o=0;this.gold=c.geti("gold")-this.gold;for(var a=0;a<d.FLYTO_GOLD_COUNT;a++)o=0==a?e:t,this.flyGold(o,i),i+=.14;this.enterState(d.STATE_END),this.balanceEnd(i+1)},getTopGoldPos:function(){return this.topStarPos||(this.topStarPos=a.getPos(this.topbar.goldIcon)),this.topStarPos},getGoldPos:function(){return this.goldPos||(this.goldPos=a.getPos(this.goldIcon)),this.goldPos},flyGold:function(t,e){var i=this.getGoldPos(),n=this.getTopGoldPos();d.FLYTO_GOLD_PARAMS.time=e;var c=h.randRadian(),l=h.randInt(100,200),u=h.getAimPointOffset(i.x,i.y,c,l,l);s.loadRes(5612,function(s){var c=[cc.moveTo(.2,u.x,u.y),cc.delayTime(.1),cc.moveTo(e,n.x,n.y).easing(cc.easeIn(2)),cc.callFunc(function(e){r.log("dialog_balance flyGold gold:"+this.gold+" add:"+t+" sum:"+(this.gold+t)),o.EVENT_UDATA_CAMOUFLAGE({n:"gold",v:this.gold+=t,add:!0}),this.scheduleOnce(function(){s.removeSelf()},0)},this)];a.flyNodeTo(s.node,cc.sequence(c),i)},this)},starFly:function(){var t=this.star.position,e=n.nodeToNodePos(this.topbar.starIcon,this.star.parent),i=n.createBrizer(t,e,d.START_FLY),a=cc.sequence([i,cc.hide(),cc.callFunc(function(){o.EVENT_UDATA_CAMOUFLAGE({n:"star",v:c.geti("star"),add:!0})},this)]);l.playSound(90164),this.star.runAction(a)}});cc._RF.pop()},{GameEvent:"GameEvent",GameLogic:"GameLogic",GameTools:"GameTools",MathUtils:"MathUtils",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIFlyLayer:"N7UIFlyLayer",SdkIns:"SdkIns",UIGameBalance:"UIGameBalance",UserLogic:"UserLogic",dialog_balancefirework:"dialog_balancefirework",n7:"n7"}],dialog_disconnet:[function(t,e,i){cc._RF.push(e,"d5f61kWNClLaYs4+PlNw07P","dialog_disconnet");var n=t("GameTools");cc.Class({"extends":t("UIDialog"),properties:{},onLoad:function(){this.node.zIndex=1E4,n.btn(this.closeButton,n.makef(this.hide,this),1)},onDestroy:function(){},show:function(){this.node&&(this.node.active=!0)},hide:function(){this.node&&(this.node.active=!1,t("SdkIns").instance().logout(),cc.game.restart())},closeDialog:function(){this._super(),cc.game.restart()}}),cc._RF.pop()},{GameTools:"GameTools",SdkIns:"SdkIns",UIDialog:"UIDialog"}],dialog_log:[function(t,e,i){cc._RF.push(e,"e7fcdkEtLZCfI1Z+tT0OBR+","dialog_log");var n=t("n7"),o=t("GameEvent"),a=cc.Class({"extends":cc.Component,properties:{butShow:{type:cc.Node,"default":null},butHide:{type:cc.Node,"default":null},butPause:{type:cc.Label,"default":null},editFilter:{type:cc.EditBox,"default":null},log:{type:cc.Label,"default":null},content:{type:cc.Node,"default":null}},onLoad:function(){n.showLog?(this.isPause=!1,this.butShow.active=!1,this.editFilter.string=n.msgFilter,this.addLog(),o.on(o.EVENT_LOG,function(t){this.addLog(t.getUserData())},this)):this.node.active=!1},onDestroy:function(){o.off(this)},start:function(){},addLog:function(t){n.showLog&&this.content.active&&!this.isPause&&(this.log.string=n.msg)},showLog:function(){a.hide=!1,this.node.y+=1050,this.content.active=!0,this.butShow.active=!1,this.butHide.active=!0,this.addLog()},hideLog:function(){a.hide=!0,this.node.y+=-1050,this.content.active=!1,this.butShow.active=!0,this.butHide.active=!1},clearAll:function(){this.log.string="",n.clearMsg()},pauseLog:function(){this.isPause=!this.isPause,this.butPause.string=this.isPause?"\u7ee7\u7eed":"\u6682\u505c"},filterChange:function(){n.setMsgFilter(this.editFilter.string)}});cc._RF.pop()},{GameEvent:"GameEvent",n7:"n7"}],dialog_nowloading:[function(t,e,i){cc._RF.push(e,"18513vEIQpEBprHlgQkl6Rd","dialog_nowloading");var n=t("GameTools"),o=t("GameEvent"),a=cc.Class({"extends":t("UIDialog"),properties:{labLoading:{type:cc.Label,"default":null},loadingProgress:{type:cc.Node,"default":null},loadingMask:{type:cc.Node,"default":null},loadingBk:{type:cc.Node,"default":null},tips:{type:cc.Node,"default":null}},statics:{WAITS:[".....",".","..","...","...."]},onLoad:function(){this.initUI(),this.initEvent(),this.resetSize()},resetSize:function(){var e=t("N7FitScreen").instance();this.background&&(this.background.scale=e.backgroundScale),this.content.scale=e.content.scale,this.content.width=e.content.width,this.content.height=e.content.height},onDestroy:function(){o.off(this)},initEvent:function(){o.on(o.EVENT_GAME_LOADDATA,function(t){var e=t.getUserData();this.loadProgress(e.finish,e.count)},this),o.on(o.EVENT_GAME_LOADED,function(t){var e=t.getUserData();this.__loaded(e.fo)},this),o.on(o.EVENT_BIGMAP_SHOWED,function(t){this.__loaded(t.getUserData())},this),this.background.on("touchstart",function(t){n.cmpt(this.tips,null,"UILoadingTips").tips()},this)},initUI:function(){this.pload=0,this.pcount=0,this.node.zIndex=9999,this.labLoading&&(this.wait=0,this.schedule(function(){n.textp(this.labLoading,null,"loading",a.WAITS[++this.wait%4])},.25)),this.progress=n.cmpt(this.content,"bottom/progress","UILoadProgress"),this.tips.getComponent("UILoadingTips").tips()},__loaded:function(t){this.node&&(this.node.active?(this._loaded_=!0,this._fo_=t,this._force_||this.__trueLoaded()):t&&t())},__trueLoaded:function(){if(this._force_=!1,this._loaded_){var t=this._fo_;this._fo_=null,this.isLoadFinish||this.loadProgress(100,100),this.scheduleOnce(function(){this.node.active=!1,t&&t()},.3)}},loadingShowed:function(e){this.node.active=!0,n.sh(this.content,null,1==e),n.sh(this.tips,null,1==e),this._force_=!0,this._loaded_=!1,this.loadProgress(0,100,!0),this.scheduleOnce(this.__trueLoaded,2),t("SdkIns").instance().runf("loadingui_showed")},loadProgress:function(t,e,i){if(this.pcount=e,i)return this.pstep=0,void this.setProgress(t,e);this.pstep=(t-this.pload)/200,this.pstep,this.ptoLoad=t,this.setProgress(t,e)},setProgress:function(t,e){var i=t/e;this.progress.progressTo(i)},update:function(t){this.pstep&&(this.pload+=1E3*t*this.pstep,this.pload>=this.ptoLoad&&(this.pstep=0,this.pload=this.ptoLoad),this.pload>=this.pcount&&(this.pload=this.pcount,this.isLoadFinish=!0),this.setProgress(this.pload,this.pcount))}});cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7FitScreen:"N7FitScreen",SdkIns:"SdkIns",UIDialog:"UIDialog"}],effect_Doublebomb:[function(t,e,i){cc._RF.push(e,"b675dzFQ7FLiLd4G5oubket","effect_Doublebomb");var n=t("GameEvent"),o=t("GameTools");cc.Class({"extends":t("effect_hitbase"),properties:{tnt:{type:cc.Animation,"default":null},fire:{type:cc.Node,"default":null},light:{type:cc.Animation,"default":null}},onLoad:function(){this.fire.active=!1,this.isInited||(this.tnt.on("finished",function(){this.startHit(),this.tnt.node.active=!1},this),this.light.on("finished",function(){this.tnt.node.active=!0,this.playEnd()},this),this.isInited=!0)},play:function(t,e,i,n,o){this._super(t,e,i,n,o),this.fire.active=!1,this.light.node.active=!1,this.tnt.node.active=!0,this.tnt.play();var a=this;this.tnt.startFire=function(){a.showFire()}},showFire:function(){o.resetParticle(this.fire)},startHit:function(){this._super(),this.light.node.active=!0,this.tnt.node.active=!1,this.light.play(),n.EVENT_GAME_ZHEN(1,!0)}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",effect_hitbase:"effect_hitbase"}],effect_back:[function(t,e,i){cc._RF.push(e,"ea0a4RO+EBAfpmj9RwFLLcI","effect_back"),t("n7");var n=t("N7UIManager");cc.Class({"extends":t("effect_base"),properties:{content:{type:cc.Node,"default":null},dog:{type:sp.Skeleton,"default":null}},onLoad:function(){var t=this;this.dog&&(this.dog.setCompleteListener(function(e){t.animation.play("transition_out")}),this.dog.setStartListener(function(e){t.dog.node.x=0}))},playEffect:function(){this._super(),this.dog&&(this.dog.node.x=1080);var t=n.instance().node;this.node.height>t.height?this.node.scale=t.height/this.node.height:this.node.scale=1;var e=this.node.parent,i=cc.p(t.width/2,t.height/2);i=e.convertToNodeSpaceAR(i),this.node.position=i,this.state=1,this.animation.play("transition")},playEffectEnd:function(t,e){this.dog&&this.dog.addAnimation(0,"go",!1),this.state=2,this.callFunc=t,this.caller=e},playEnd:function(t){var e=t.currentTarget.name;this.callFunc.call(this.caller,this.state),"transition"!=e||this.dog||this.animation.play("transition_out"),"transition_out"==e&&this.removeSelf()}}),cc._RF.pop()},{N7UIManager:"N7UIManager",effect_base:"effect_base",n7:"n7"}],effect_balloon:[function(t,e,i){cc._RF.push(e,"b792cUqW0RJFaIsLabzTFdd","effect_balloon"),t("GameCommon"),t("effect_brick");var n=t("AtlasAnimation"),o=cc.Class({"extends":t("effect_base"),properties:{Texture2D1:{type:cc.Texture2D,"default":[]},Texture2D2:{type:cc.Texture2D,"default":[]},Texture2D3:{type:cc.Texture2D,"default":[]},Texture2D4:{type:cc.Texture2D,"default":[]},particList:{type:cc.ParticleSystem,"default":[]}},statics:{BALLON_COLOR:[{r:253/255,g:202/255,b:39/255},{r:243/255,g:69/255,b:62/255},{r:72/255,g:172/255,b:250/255},{r:126/255,g:236/255,b:65/255},{r:203/255,g:72/255,b:245/255},{r:1,g:163/255,b:62/255},{r:251/255,g:98/255,b:158/255}]},onLoad:function(){},preload:function(){if(this.atlasAnim&&!(this.atlasAnim.length<=0)&&!o.isInited){var t=o.BALLON_COLOR;for(var e in t)this.setShader(e);o.isInited=!0}},init:function(t){this.setTexture(t)},playEffect:function(){this.hasAtlasAnim()&&(this.atlasAnim[0].node.active=!0),this._super()},setShader:function(t){var e=o.BALLON_COLOR[t];this.shader||(this.shader=this.atlasAnim[0].getComponent("N7SpriteShader")),this.shader&&(this.shader.setOtherName("balloon_"+t),this.shader.setParams(e),this.shader.setShader())},setTexture:function(t){if(t>=0){if(this.hasAtlasAnim())return this.atlasAnim[0].setCallFunc(function(t,e){t==n.PLAYING?this.mask&&(this.mask.spriteFrame=e):t==n.PLAY_END&&(this.atlasAnim[0].node.active=!1)},this),void this.setShader(t);for(var e=0;e<4;e++){var i=this.particList[e];i&&(i.texture=this["Texture2D"+(e+1)][t])}}}});cc._RF.pop()},{AtlasAnimation:"AtlasAnimation",GameCommon:"GameCommon",effect_base:"effect_base",effect_brick:"effect_brick"}],effect_base:[function(t,e,i){cc._RF.push(e,"84225nwKVBOObJs9GWNeUzm","effect_base");var n=t("N7Sound"),o=t("N7Resource"),a=t("GameCommon"),s=t("GameTools"),c=(t("n7"),cc.Class({"extends":cc.Component,properties:{autoPlay:!0,playEndDelete:!0,delayDelete:0,soundId:0,soundList:[cc.Integer],onPlaySound:!0,recovery:!1,resetParticle:!1,particleNode:{"default":null,type:cc.Node},animationNode:{"default":null,type:cc.Node},atlasAnim:{"default":[],type:t("AtlasAnimation")}},onLoad:function(){},onDestroy:function(){},hasAtlasAnim:function(){return this.atlasAnim&&this.atlasAnim.length},initEffect:function(){if(cc.isValid(this.node)){if(!this._frist)return this.motionStreakNode||(this.motionStreakNode=this.getComponent(cc.MotionStreak)),void(this._frist=!0);if(this.motionStreakNode&&this.motionStreakNode.reset(),this.resetParticle&&s.resetParticle(this.particleNode||this.node),this.hasAtlasAnim())for(var t in this.atlasAnim){var e=this.atlasAnim[t];e&&(e.node.active=!0,e.play(void 0,void 0,function(t,e){3==t&&(e.active=!1)},this))}}},setCubeInfo:function(t,e){this.gid=t,this.meta=e},setDatas:function(t){this.datas=t},play:function(t,e,i,n,o){t&&(this.cmd=t,this.group=t.group()),this.grid=e,this.com=i,this.setCallFunc(n,o),this.playEffect()},setCallFunc:function(t,e){this.callFunc=t,this.caller=e},playEffect:function(){if(this.delayDelete&&this.scheduleOnce(this.removeSelf,this.delayDelete),!this.animation){var t=this.animationNode||this.node;this.animation=t.getComponent(cc.Animation),this.animation&&this.animation.on("finished",this.playEnd,this)}this.animation&&this.autoPlay&&this.animation.play(),this.onPlaySound&&this.soundId&&this.playSound(),this.initEffect()},playAnimation:function(t){this.animation&&this.animation.play(t)},playSound:function(t){n.playSound(t||this.soundId)},sound:function(t){t>=0&&t<=this.soundList.length&&this.playSound(this.soundList[t])},playEnd:function(t){this.playEndDelete&&!this.delayDelete&&this.removeSelf()},removeSelf:function(){this.delayDelete&&this.unschedule(this.removeSelf),this.doCallFunc([a.STATE_PLAYEND]),this.callFunc=this.caller=null,this.cmd=this.com=this.group=this.grid=null,this.recovery&&a.effect_recovery?o.backPrefab(this.node):this.node.destroy()},doCallFunc:function(t){this.callFunc&&this.caller&&this.callFunc.apply(this.caller,t)}}));e.exports=c,cc._RF.pop()},{AtlasAnimation:"AtlasAnimation",GameCommon:"GameCommon",GameTools:"GameTools",N7Resource:"N7Resource",N7Sound:"N7Sound",n7:"n7"}],effect_bomb:[function(t,e,i){cc._RF.push(e,"625b4q/ZY9J+bHKAj9r/i82","effect_bomb"),cc.Class({"extends":t("effect_hitbase"),properties:{tnt:{type:cc.Animation,"default":null},light:{type:cc.Node,"default":null}},onLoad:function(){this.isInited||(this.tnt&&this.tnt.on("finished",function(){this.playEnd()},this),this.isInited=!0)},play:function(t,e,i,n,o){this._super(t,e,i,n,o),3==this.lv?this.light&&(this.light.scale=2.8):this.light&&(this.light.scale=1.4),this.tnt&&this.tnt.play()}}),cc._RF.pop()},{effect_hitbase:"effect_hitbase"}],effect_bowlingball:[function(t,e,i){cc._RF.push(e,"21016cc5SNGYLsGxXNL0llh","effect_bowlingball"),t("GameTools"),cc.Class({"extends":t("effect_base"),properties:{ball:{type:cc.ParticleSystem,"default":null},spBall:{type:cc.Sprite,"default":null}},setDatas:function(t){if(this.spBall){this.spBall.spriteFrame=t;var e=this.spBall.node;e.y=0,e.opacity=255;var i=cc.sequence(cc.delayTime(.6),cc.fadeOut(.2)),n=cc.spawn(cc.moveBy(.8,0,-1500),i);e.runAction(n)}else this.ball.texture=t.getTexture()}}),cc._RF.pop()},{GameTools:"GameTools",effect_base:"effect_base"}],effect_brick:[function(t,e,i){cc._RF.push(e,"90407TcFU5HF4LYc+jTYPeD","effect_brick");var n=t("MathUtils"),o=cc.Class({"extends":t("effect_base"),properties:{spriteFrames:{type:cc.Sprite,"default":[]},exp:[cc.ParticleSystem]},statics:{COLORS:[[new cc.Color(255,232,172,255),new cc.Color(253,202,39,255)],[new cc.Color(255,117,117,255),new cc.Color(243,69,62,255)],[new cc.Color(89,207,253,255),new cc.Color(72,172,250,255)],[new cc.Color(167,248,104,255),new cc.Color(126,236,65,255)],[new cc.Color(244,149,255,255),new cc.Color(203,72,245,255)],[new cc.Color(255,171,65,255),new cc.Color(255,163,62,255)],[new cc.Color(255,255,255,255),new cc.Color(255,255,255,255)]],COLORS_DEF:[new cc.Color(255,245,0,255),new cc.Color(255,0,0,255),new cc.Color(0,112,255,255),new cc.Color(31,255,0,255),new cc.Color(173,0,255,255),new cc.Color(255,112,0,255)],BRICK_COLORS:[{r:209/255,g:166/255,b:14/255},{r:219/255,g:28/255,b:27/255},{r:73/255,g:161/255,b:221/255},{r:124/255,g:191/255,b:53/255},{r:171/255,g:43/255,b:170/255},{r:226/255,g:124/255,b:35/255}]},playEffect:function(){this._super(),this.animation&&this.animation.play("R_DropX"+n.randInt(1,4))},init:function(t){if(this.hasAtlasAnim()){var e=o.COLORS[1*t];this.atlasAnim[1].node.color=e[1]}else{var i=o.COLORS[1*t];for(var n in this.exp){var a=this.exp[n];a.startColor=i[0],a.endColor=i[1],a.resetSystem()}}}});cc._RF.pop()},{MathUtils:"MathUtils",effect_base:"effect_base"}],effect_cake_particle:[function(t,e,i){cc._RF.push(e,"e3a5fBty2RIP490bg9ZG0Jj","effect_cake_particle");var n=t("AtlasAnimation"),o=cc.Class({"extends":t("effect_base"),properties:{exp:[cc.ParticleSystem],light:{type:n,"default":null}},statics:{COLORS:[new cc.Color(252,212,84,255),new cc.Color(252,84,84,255),new cc.Color(68,151,240,255),new cc.Color(67,184,21,255),new cc.Color(140,47,240,255),new cc.Color(250,115,25,255)],COLORS_DEF:[new cc.Color(255,245,0,255),new cc.Color(255,0,0,255),new cc.Color(0,112,255,255),new cc.Color(31,255,0,255),new cc.Color(173,0,255,255),new cc.Color(255,112,0,255)]},onDestroy:function(){this._super(),this.anim||this.anim.setCallFunc(null,null)},init:function(e){this.light&&(this.anim||(this.anim=this.getComponent(t("AtlasAnimation")),this.anim.setCallFunc(function(t){this.node.opacity=0,this.light.opacity=0},this)),this.anim.node.color=o.COLORS[e],this.node.opacity=255,this.light.opacity=255,this.anim.play(),this.light.play());var i=o.COLORS[1*e];for(var n in this.exp){var a=this.exp[n];a.startColor=i,a.endColor=i,a.resetSystem()}}});cc._RF.pop()},{AtlasAnimation:"AtlasAnimation",effect_base:"effect_base"}],effect_crayon:[function(t,e,i){cc._RF.push(e,"75f62Hx/PJHYpCkqIEPjFB4","effect_crayon");var n=t("MathUtils");cc.Class({"extends":t("effect_base"),properties:{textures:{type:cc.Texture2D,"default":[]},par:{type:cc.ParticleSystem,"default":null},pen:{type:cc.Sprite,"default":null}},start:function(){},init:function(t){},setTexture:function(t,e){if(this.pen){this.pen.spriteFrame=e;var i=this.pen.node;i.y=0,i.rotation=n.randInt(0,360),i.opacity=255;var o=cc.sequence(cc.delayTime(.6),cc.fadeOut(.2)),a=cc.spawn(cc.moveBy(.8,0,-1500),o,cc.rotateBy(.8,n.randInt(0,100)<50?-90:90));i.runAction(a)}else this.par.texture=this.textures[t]}}),cc._RF.pop()},{MathUtils:"MathUtils",effect_base:"effect_base"}],effect_doublecube:[function(t,e,i){cc._RF.push(e,"4d78bqRk5NDkaHoGvzomUuM","effect_doublecube"),t("ActionCommand");var n=t("MathUtils"),o=t("UIGameV2");cc.Class({"extends":t("effect_hitbase"),properties:{background:{type:cc.Node,"default":null},magicCube:{type:cc.Animation,"default":null},bomb:{type:cc.Animation,"default":null}},onLoad:function(){this.isInited||(this.bomb.on("finished",function(){this.removeSelf()},this),this.isInited=!0)},play:function(t,e,i,n,a){this.bomb.node.active=!1,this.background.active=!0,this.magicCube.play(),this.permission=t.permission,this.mageicId=o.lockDown(this.node.name),this._super(t,e,i,n,a),this.sound(1)},playEnd:function(){},calcDelay:function(t,e,i,o){if(this.commandDelay){var a=n.distance(i,o)*this.commandDelay;t.delay=a,t.next=t.delay>0}return!0},startHit:function(){this._super(),this.bomb.node.active=!0,this.bomb.play(),this.background.active=!1,this.sound(0)},callCmdFinish:function(){this._super(),o.unlockDown(this.mageicId),this.cmd.setPermission(this.permission)}}),cc._RF.pop()},{ActionCommand:"ActionCommand",MathUtils:"MathUtils",UIGameV2:"UIGameV2",effect_hitbase:"effect_hitbase"}],effect_firework:[function(t,e,i){cc._RF.push(e,"90360gCRRZOm6EwA9E77euy","effect_firework"),cc.Class({"extends":t("effect_base"),properties:{trail:{type:cc.Node,"default":null},firework:{type:cc.Node,"default":null}},moveTo:function(t){this.trail.active=!0,this.firework.active=!1;var e=[cc.moveTo(.25,t).easing(cc.easeOut(3)),cc.callFunc(this.fire,this)];this.node.runAction(cc.sequence(e))},fire:function(){this.firework.active=!0,this.scheduleOnce(function(){this.trail.active=!1},.2),this.scheduleOnce(this.removeSelf,1.5)}}),cc._RF.pop()},{effect_base:"effect_base"}],effect_freeze:[function(t,e,i){cc._RF.push(e,"1a738G9AhdB8Z0/qQ/F0r5w","effect_freeze");var n=t("GameTools"),o=t("N7Resource"),a=cc.Class({"extends":t("effect_base"),properties:{content:{type:cc.Node,"default":null},precube:{type:cc.Sprite,"default":null},jelly:{type:cc.Node,"default":null},effect:{type:cc.Node,"default":null}},statics:{anims:["left","right","down","up"]},hide:function(t){this._hide=t},play:function(t,e,i,o,s){if(this._super(null,t.grid,null,o,s),i){if(!this.sk){this.sk=n.cmpt(this.jelly,"jelly",sp.Skeleton);var c=this;this.sk.setCompleteListener(function(t){c.playEnd()})}this.sk.setAnimation(0,a.anims[i.dir],!1),this.content.position=this.node.convertToNodeSpaceAR(i.pos)}else this.content.position=cc.p(0,0),this.playAnimation();this.precube.node.active=!1,this.cbnode=t,this.block=t.popBlock()},playAnimation:function(){this.jelly.active=!0,this._super()},playEnd:function(){this._super(),this.removeSelf()},removeSelf:function(){o.backPrefab(this.block),this._super()}});cc._RF.pop()},{GameTools:"GameTools",N7Resource:"N7Resource",effect_base:"effect_base"}],effect_goal_fly:[function(t,e,i){cc._RF.push(e,"84fc69G1SFL76fTtIpbqeg9","effect_goal_fly");var n=cc.Class({"extends":t("effect_base"),properties:{content:{type:cc.Node,"default":null},lizi:{type:cc.Node,"default":null},gold:{type:cc.Node,"default":null}},statics:{icon_anims:["gold_{0}","silver_{0}"]},setIcon:function(t){this.content.removeAllChildren(),t.parent=this.content},showLizi:function(t){this.lizi.active=t},showgs:function(e){this.gold.active=!0;var i=this.gold.getComponent("AtlasAnimation");i.animationName=n.icon_anims[e?0:1],i.play(),i.idx=t("MathUtils").randInt(0,6)}});cc._RF.pop()},{MathUtils:"MathUtils",effect_base:"effect_base"}],effect_hitbase:[function(t,e,i){cc._RF.push(e,"7f5ccbTAHlFpJiAP3zOd2/m","effect_hitbase");var n=t("GameCommon"),o=t("UIGameV2"),a=t("n7");cc.Class({"extends":t("effect_base"),properties:{delayStartHit:0,commandDelay:0,lockTime:0,autoDownLock:!1,hitFin:!1,delayCallFin:0},onLoad:function(){},initData:function(){},playEffect:function(){this._super(),this.lockTime>0&&this.scheduleOnce(this.effectUnlock,this.lockTime),this.delayCallFin>0&&this.scheduleOnce(this.callCmdFinish,this.delayCallFin)},effectUnlock:function(){this.lockId&&(a.isDebug&&a.log("hitbase effectUnlock "+this.node.name),o.effectUnlock(this.lockId))},play:function(t,e,i,n,a){this.isCalledFin=!1,this.lockId=o.effectLock(this.node.name),this._super(t,e,i,n,a);var s=o.instance();this.gameMap=s.gameMap,i.datas.exdt&&(this.lv=i.datas.exdt.lv,this.len=i.datas.exdt.len),this.autoDownLock&&(this.downLock=o.lockDown(this.node.name)),this.createList(),this.startHitCalled=!1,this.delayStartHit&&this.scheduleOnce(this.startHit,this.delayStartHit)},callCmdFinish:function(){!this.isCalledFin&&this.cmd&&(this.cmd.finish(this.com),this.isCalledFin=!0,a.isDebug&&a.log("hitbase  callCmdFinish uuid:"+this.cmd.uuid+" name:"+this.node.name)),this.unschedule(this.callCmdFinish)},removeSelf:function(){this.callCmdFinish(),this.startHitCalled||this.startHit(),this.hitList&&(this.hitList=null),this.gameMap=null,this._super(),this.effectUnlock()},startHit:function(){this.autoDownLock&&this.downLock&&o.unlockDown(this.downLock),this.startHitCalled||(this.cmd&&this.com&&(this.hitFin&&this.callCmdFinish(),this.group.next()),this.doCallFunc([n.STATE_STARTHIT]),this.startHitCalled=!0)},update:function(t){},eachCommand:function(t){},createList:function(){var t=[];this.hitCount=0;var e=[];for(var i in this.listWaitTime=0,this.cmd.each(function(i,o){var a=this.findGrid(o);switch(o.cmd){case n.com_chgto:case n.com_dtchg:case n.com_create:case n.com_activeprop:case n.com_destroy:o.meta&&35==o.meta.type&&n.com_destroy==o.cmd&&e.push(o);var s=this.calcDis(a);if(this.calcDelay(o,s,this.grid,a)){var c=t[s];c||(c=[],t[s]=c),o.grid=a,c.push(o),this.hitCount++}}this.eachCommand(o,a)},this),this.hitList=t,this.listWaitTime+=this.commandDelay,e){var o=e[i];o.delay=this.listWaitTime,o.next=o.delay>0}},calcDelay:function(t,e,i,n){return this.commandDelay&&(t.delay=(e-1)*this.commandDelay,t.next=t.delay>0,this.listWaitTime=Math.max(t.delay,this.listWaitTime)),!0},calcDis:function(t){return t?Math.max(Math.abs(t.x-this.grid.x),Math.abs(t.y-this.grid.y)):0},findGrid:function(t){var e=t.datas;if(e.grid)return e.grid;var i=this.gameMap.getCubeFromUUID(e.gid);if(i)return i.grid;a.error("effect_hitbase findGrid no find gid:"+e.gid)}}),cc._RF.pop()},{GameCommon:"GameCommon",UIGameV2:"UIGameV2",effect_base:"effect_base",n7:"n7"}],effect_item_mix:[function(t,e,i){cc._RF.push(e,"c684d8SVlFHn7A/TKcBj/uq","effect_item_mix");var n=t("UIGameV2"),o=t("N7Resource"),a=t("JsonMetaCache");cc.Class({"extends":t("effect_base"),properties:{item01:{type:cc.Node,"default":null},item02:{type:cc.Node,"default":null}},init:function(t,e,i,o,a,s){this.cubes=[],this.loadCount=0,this.cmd=e,this.grid=i,this.com=o,this.callFunc=a,this.caller=s,this.downLock=n.lockDown(this.node.name),this.createCube(this.item01,t[0],0),this.createCube(this.item02,t[1],1)},removeSelf:function(){for(var t in this.cubes)o.backPrefab(this.cubes[t].node);this.cubes=null,n.unlockDown(this.downLock),this._super()},createCube:function(t,e,i){var n=a.tile(e);o.loadRes(n.res_id,function(e,n,a){var s=null;e instanceof cc.SpriteFrame?(s=o.createNodeFromId(5621,"UICube")).setFrame(e):s=e,s.node.parent=t,this.cubes[i]=s,++this.loadCount>=2&&this.playEffect()},this)}}),cc._RF.pop()},{JsonMetaCache:"JsonMetaCache",N7Resource:"N7Resource",UIGameV2:"UIGameV2",effect_base:"effect_base"}],effect_lantern:[function(t,e,i){cc._RF.push(e,"bb5efLXvg5NY7gVV41H5c5O","effect_lantern");var n=t("MathUtils");cc.Class({"extends":t("effect_base"),playEffect:function(){this._super(),this.animation&&this.animation.play("R_DropX"+n.randInt(1,4))}}),cc._RF.pop()},{MathUtils:"MathUtils",effect_base:"effect_base"}],effect_level_up:[function(t,e,i){cc._RF.push(e,"9326b42/j1Nl6hEPTS/JPLI","effect_level_up"),cc.Class({"extends":t("effect_base"),properties:{},playEffect:function(t,e){this._super(),this.isPlay=!0},playEnd:function(){this.node.active=!1,this.initEffect(),this._super(),this.isPlay=!1}}),cc._RF.pop()},{effect_base:"effect_base"}],effect_magiccube:[function(t,e,i){cc._RF.push(e,"6ffbeOrmvVM1YAsUk4XuNbM","effect_magiccube");var n=t("n7"),o=t("GameTools"),a=t("GameCommon"),s=t("MathUtils"),c=t("N7Resource"),r=t("ActionCommand"),l=t("UIGameV2"),h=cc.Class({"extends":t("effect_hitbase"),properties:{cube:{type:cc.Node,"default":null},light:{type:cc.Node,"default":null},rayLayer:{type:cc.Node,"default":null},delay:.2,delayAdd:.02,pause:!0},statics:{magiccube_uuid:1,magicube_linego_waittime:.4,magicube_changeto_waittime:.6,magicube_destroy_waittime:.8},resetMagicCube:function(){this.activeProps={},this.rayLayer.removeAllChildren(),this.rayList=null,this.delayList=null,this.activeIdx=0,this.rayFinish=0,this.rayCount=0},play:function(t,e,i,n,a){this._init||(this.resetMagicCube(),this._init=!0),this._super(t,e,i,n,a),0!=this.hitCount?(this.cmd.removePermission(r.PERMISSION_DOWN),this.gid=r.UUID(),l.downStop(!0,this.downUUID),this.mageicId=l.lockDown(this.node.name),o.resetParticle(this.cube),this.cube.getComponent(cc.Animation).play(),this.cube.active=!0,this.light.active=!1,this.node.zIndex=2,this.magiccube_uuid=h.magiccube_uuid++,this.startRayLine()):this.playCubeDestroy(!0)},calcDelay:function(t,e){return t.cmd!=a.com_activeprop&&(this.delayList||(this.delayList=[]),this.delayList[10*(9-t.datas.grid.y)+t.datas.grid.x]=t),!0},eachCommand:function(t){t.cmd==a.com_chgto&&(this.activeProps[t.datas.gid]=t)},update:function(t){this.startUpdateCheck&&this.startRayLine()},startRayLine:function(){t("UIGameV2").isDowning()?this.startUpdateCheck=!0:(this.startUpdateCheck=!1,this.sound(1),this.scheduleOnce(this.rayLine,this.delay))},rayLine:function(){var t=0;this.rayList=[];var e={},i=0,n=[];for(var o in this.delayList){var s=this.delayList[o];if(s){var c=s.datas.gid;if(e[c]||this.cmd.activeByItem&&!this.activeProps[c])continue;n.push(s),t=i*a.magiccube_delaytime,this.cmd.activeByItem&&(s.delay=t,s.next=s.delay>0),e[c]=!0;var r=this.createRayLine(s,t);i++,r&&(this.rayList.push(r),this.rayCount++)}}this.delayList=n,this.activeIdx=0,this.cmd.activeByItem&&this.scheduleOnce(this.startHit,h.magicube_linego_waittime),0==this.rayCount&&this.finish()},activeItem:function(){for(var t=l.instance(),e=this.activeIdx,i=this.delayList.length;e<i;e++){var n=this.delayList[e];if(n&&this.activeProps[n.datas.gid]){var o=t.gameMap.getCubeFromUUID(n.datas.gid);if(!t.checkCube(o)&&t.activeCube(o,!0,this.cmd)){e++;break}}}this.activeIdx=e,e>=i&&this.removeSelf()},createRayLine:function(t,e){if(t.cmd!=a.com_activeprop){var i=t.datas,r=this.gameMap.getCubeFromUUID(i.gid);if(r){var l=o.nodeToNodePos(r.node,this.rayLayer),h=c.createNodeFromId(5620,"magiccube_line"),u=s.distance(cc.Vec2.ZERO,l);h.node.rotation=-s.angle(this.rayLayer.position,l),h.node.active=!0;var d={node:h.node,cube:r,len:u};return h.play(e,d,function(t,e){!this.cmd.activeByItem&&t.cube.node.parent&&cc.isValid(t.cube.node)?(t.cube.playShake(),--this.rayCount<=0&&this.finish()):--this.rayCount<=0&&this.finish()},this),this.rayLayer.addChild(h.node),d}n.error("effect_magicube findGrid no find gid:"+i.gid)}else n.error("effect_magicube findGrid no find gid:"+t.datas.gid+" hasChangeTo:"+this.cmd.activeByItem+" cmd:"+t.cmd)},startHit:function(t,e){this._super(),this.sound(0),l.downStop(!1,this.downUUID),e&&this.removeMagicCube()},removeMagicCube:function(){l.unlockDown(this.mageicId),this.light.active=!0,this.cube.active=!1,o.resetParticle(this.light)},startActiveItem:function(){return this.cmd.activeByItem&&this.schedule(this.activeItem,a.auto_activeitem_delaytime),!0},removeSelf:function(e){if(this.cmd.activeByItem){var i=t("UIGameV2"),n=i.effectLock("magiccube");this.cmd.finishCallFunc(function(){i.effectUnlock(n)},this),this.unschedule(this.activeItem)}this.resetMagicCube(),this._super()},finish:function(){this.cmd.activeByItem?this.scheduleOnce(function(){this.clearRay(),this.removeMagicCube();var t=l.instance().doMakeDown(this.cmd,!0);t?t.finishCallFunc(this.startActiveItem,this):this.startActiveItem()},h.magicube_changeto_waittime):(this.cmd.addPermission(r.PERMISSION_DOWN),this.scheduleOnce(this.playCubeDestroy,h.magicube_destroy_waittime))},playCubeDestroy:function(){this.clearRay(),this.startHit(0,!0),this.scheduleOnce(this.removeSelf,.5)},clearRay:function(){for(var t in this.rayList){var e=this.rayList[t];e.cube.stopShake(),e.effect&&e.effect.removeSelf(),e.node&&c.backPrefab(e.node)}}});cc._RF.pop()},{ActionCommand:"ActionCommand",GameCommon:"GameCommon",GameTools:"GameTools",MathUtils:"MathUtils",N7Resource:"N7Resource",UIGameV2:"UIGameV2",effect_hitbase:"effect_hitbase",n7:"n7"}],effect_mergefly:[function(t,e,i){cc._RF.push(e,"60ca3Mz4kJD6ocM4TQrVmVQ","effect_mergefly"),cc.Class({"extends":t("effect_base"),properties:{mergeTex:{type:cc.Sprite,"default":null},altas:{type:cc.SpriteAtlas,"default":null}},onLoad:function(){this.node.zIndex=100},init:function(){},setTexture:function(t){this.scheduleOnce(function(){this.sound(t-1)},.25),this.mergeTex.spriteFrame=this.altas.getSpriteFrame(t)}}),cc._RF.pop()},{effect_base:"effect_base"}],effect_missile:[function(t,e,i){cc._RF.push(e,"efe9f8OegZImbwGkBo3Obv3","effect_missile");var n=t("n7"),o=t("GameTools"),a=t("N7Resource"),s=t("GameCommon"),c=cc.Class({"extends":t("effect_hitbase"),properties:{content:{type:cc.Node,"default":null},light:{type:cc.Node,"default":null},missileHit:{type:cc.Prefab,"default":null}},statics:{grids:[[[0,0],[0,1],[0,-1],[2,3]],[[0,0],[-1,0],[1,0],[0,1]]],VERTICAL:1,HORIZONTAL:2,ALL:3},onLoad:function(){},start:function(){},eachCommand:function(t){s.com_rotoroff==t.cmd&&this.missile_off.push(t)},playLight:function(){this.light&&(this.light.active=!0)},play:function(e,i,n,o,a){this.light&&(this.light.active=!1),this.missile_off=[],this._super(e,i,n,o,a),t("UIGameV2").addMissileCount(1),this.missiles||(this.missiles=[]);var s=1,r=c.ALL;n.datas.exdt&&(this.big=s=n.datas.exdt.lv||1,n.datas.exdt.all||(r=n.datas.exdt.rdir%2+1)),this.missileCount=0;for(var l=0,h=1;l<2;l++,h++)if((r&h)==h)for(var u=c.grids[l],d=0;d<s;d++)this.createMissile(u[3][0],d,u,i,0),this.createMissile(u[3][1],d,u,i,0);this.startHit(),r==c.ALL?this.big==r?this.sound(0):this.sound(1):this.sound(2)},startHit:function(){this.big>1&&this.playLight(),this._super()},createMissile:function(e,i,s,c,r){this.missileCount++;var l=a.createNodeFromId(5610,"missile");this.content.addChild(l.node),l.init(e,cc.p(c.x+s[i][0],c.y+s[i][1]),this.missile_off),l.play(r,function(e,i){n.H5||o.stopParticle(l.node),--this.missileCount<=0&&(t("UIGameV2").addMissileCount(-1),this.lockId&&UIGameV2.effectUnlock(this.lockId),this.lockId=0,this.scheduleOnce(this.removeSelf,2))},this),this.missiles.push(l.node)},removeSelf:function(){for(var t in this.missiles){var e=this.missiles[t];a.backPrefab(e)}this.light&&(this.light.active=!1),this.missiles=null,this._super()}});cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",N7Resource:"N7Resource",UIGameV2:"UIGameV2",effect_hitbase:"effect_hitbase",n7:"n7"}],effect_move:[function(t,e,i){cc._RF.push(e,"b0e1bHIoUdLmbKkC295Aol0","effect_move");var n=t("MathUtils");cc.Class({"extends":t("effect_base"),properties:{},statics:{time:.5},start:function(){},moveTo:function(t,e,i,o){this.playEffect();var a=n.distance(t,e)/112*.09,s=[cc.moveTo(a,e.x,e.y).easing(cc.easeIn(3)),cc.callFunc(function(){this.removeSelf(),i&&i.call(o)},this)];return cc.sequence(s)},playEnd:function(){this._super()}}),cc._RF.pop()},{MathUtils:"MathUtils",effect_base:"effect_base"}],effect_rubber:[function(t,e,i){cc._RF.push(e,"16ca12fmTlP74KLxce7mfQN","effect_rubber");var n=t("effect_brick");cc.Class({"extends":n,setDatas:function(t){this._super(t);var e=n.COLORS[1*this.datas];if(this.hasAtlasAnim())for(var i in this.atlasAnim)this.atlasAnim[i].node.color=e[0];else for(var o in this.exp){var a=this.exp[o];a.startColor=e[0],a.endColor=e[1],a.resetSystem()}}}),cc._RF.pop()},{effect_brick:"effect_brick"}],effect_scorefly:[function(t,e,i){cc._RF.push(e,"aa4e9uuR4ZIFIZ8hIRsHcBV","effect_scorefly");var n=cc.Class({"extends":t("effect_base"),properties:{score:{type:t("AtlasText"),"default":null}},onLoad:function(){this.node.zIndex=3},setScore:function(t,e){t>=n.color_def.length&&(t=0),this.score.setTextureName(n.color_def[t]),this.score.setText(e)}});n.color_def=["y","r","b","g","p","o"],cc._RF.pop()},{AtlasText:"AtlasText",effect_base:"effect_base"}],effect_shotgun:[function(t,e,i){cc._RF.push(e,"dea8aZRlQZKOaVHz6DsqV2p","effect_shotgun"),cc.Class({"extends":t("effect_hitbase"),properties:{},start:function(){},eachCommand:function(t,e){},play:function(t,e,i,n,o){this._super(t,e,i,n,o)}}),cc._RF.pop()},{effect_hitbase:"effect_hitbase"}],effect_sleeve:[function(t,e,i){cc._RF.push(e,"dc3e49IqP1Jh5v9LcEB4in1","effect_sleeve"),cc.Class({"extends":t("effect_base"),properties:{shuipian:{type:cc.ParticleSystem,"default":[]},textures:{type:cc.Texture2D,"default":[]},spNode:{type:cc.Sprite,"default":[]},atlas:{type:cc.SpriteAtlas,"default":null}},init:function(t){if(!(t<0||t>3)&&this.spNode.length){t*=1;for(var e=0,i=this.spNode.length;e<i;e++)this.spNode[e].spriteFrame=this.atlas.getSpriteFrame("sleeve_"+(t+1)+(0==e?1:0))}}}),cc._RF.pop()},{effect_base:"effect_base"}],effect_woodebox:[function(t,e,i){cc._RF.push(e,"872201y5dBMUb1EXXH8aEwp","effect_woodebox");var n=cc.Class({"extends":t("effect_base"),properties:{woodenbox:{type:cc.Texture2D,"default":[]},woodendebris:{type:cc.Texture2D,"default":[]},partic:{"default":null,type:cc.ParticleSystem},Boxsmash:{"default":null,type:cc.ParticleSystem}},statics:{BRICK_COLORS:[{r:231/255,g:148/255,b:60/255},{r:253/255,g:202/255,b:39/255},{r:243/255,g:69/255,b:62/255},{r:72/255,g:172/255,b:250/255},{r:126/255,g:236/255,b:65/255},{r:203/255,g:72/255,b:245/255},{r:209/255,g:125/255,b:42/255}]},onLoad:function(){},preload:function(){if(this.atlasAnim&&!(this.atlasAnim.length<=0)&&!n.isInited){var t=n.BRICK_COLORS;for(var e in t)this.setShader(e);n.isInited=!0}},setShader:function(t){var e=n.BRICK_COLORS[t];this.shader||(this.shader=this.atlasAnim[0].getComponent("N7SpriteShader")),this.shader.setOtherName("woodenbox_"+t),this.shader.setParams(e),this.shader.setShader()},init:function(t){this.hasAtlasAnim()&&this.setShader(t)},setTexture:function(t){this.hasAtlasAnim()?this.setShader(1*t+1):t>=0&&t<this.woodenbox.length&&(this.partic.texture=this.woodenbox[t],this.Boxsmash.texture=this.woodendebris[t])}});cc._RF.pop()},{effect_base:"effect_base"}],en:[function(t,e,i){cc._RF.push(e,"3c3385EsDBNsrJrLC0Dkim3","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={lang:"English Version",login_bye:"bye bye",game_copy:" ",advice:"Welcome",load:"Loading",loading:"Loading%1",into_game:"Play",restart_game:"Restart",lv_box:"Level Chest",star_box:"Star Chest",levelgift:"Unlock at Level %1",box_unheart:"Reach level %1 and get unlimited energy for 2h",open_box:"Unlock",bag:"Bagpack",set:"Settings",help:"Help",level:"Level %1",hard_lv:"Hard",coming_soon:"Coming soon",unopen:"Not available",m_shop:"Store",m_mail:"Mail",m_main:"Home",m_club:"Guild",m_rank:"My Friend",confirm:"OK",receive:"Collect","goto":"Go",contiune:"Continue",quit:"Leave",begin:"Start",use:"Use",cancel:"Cancel",buy:"Buy",close:"Close",browse:"Browse",send:"Send",see:"View",agree:"Accept",refuse:"Reject",back:"Back",retry:"Try Again",finish:"Complete",log_off:"Log Out",ungold:"Not enough gold",unsilver:"Not enough silver",unstar:"Not enough stars",unitem:"Not enough power-ups",keep_trying:"Keep Trying!",hintt:"Tips",defaultInfo:"Congratulation! You got",unlock_play:"Unlock Feature",unnet:"No Connection",player:"Player",friend:"Friend",p_club:"Guild",create:"Create",lookup:"Search",chat:"Chat",myclub:"My Guild",lv:"Level",net_bad:"Connection failed. Please try again.",ulev:"Level %1",lv_unlock:"Unlocked at Level %1",sbp:"Select Booster",lv_fail:"Failed",gate_failt:"Equipped yourself and get stronger.",rule:"Rules",get_awd:"Get Reward",join_club:"Join Guild",no_rank:"N/A",no_club:"No guild",affiche:"Notification",know:"Got it",refresh_ok:"Refreshed",refresh_time:"Refresh in %1 sec",unlock_item:"Get a new power-up.",buyok:"Purchase success",only_back:"Back chance used up.",only_ads:"Watch ad chance used up.",goal:"Target",time:"Time",steps:"Moves",only_step:"%1 step left!",notice_item:"Use equip to pass level easier!",notice_guide:"Tap anywhere to continue",notlev:"Locked",unopen_atv:"Clear dungeon %1 to unlock",ago:"ago",day:"d ",hour:"h ",min:"min ",look_goal:"Pay Attention to the Goal!",pay_ok:"payment successful",join_open:"Join guild to activate the activity",invite:"Lucky Gift",invite1:"Luxury Pack",invite2:"Invite friends to the game and get rewards.",invite3:"Invite now",invite4:"Invitation reward:",invite5:"Invite Max.",invite6:"Failed. Please try again later.",payAuth:"Unauthorized Account",payNot:"Insufficient Gold",payOver:"Purchase limit max",payClose:"Payment cancelled.",payError:"Recharge Error%1",paySuccess:"Recharge Successful%1",payFailed:"Recharge Failed%1",click_balance:"Tap to skip",desktop:"shortcut",guild_msg_hell:"Hi! I am [%1]",author_cancel:"Cancel",author_error:"Error [%1]",active_over:"Event ended",icon_sign:"Sign-in",icon_desktop:"Shortcut",icon_first:"1st Top-up",icon_recharge1:"Limited",icon_hortor:"Follow",icon_tryplay:"Play demo",jump:"jump",click_rcv:"Tap to collect",title:"Title",content:"Content",watch_double:"Watch Ads to get double rewards",star_box_info:"Collect %1 Star(s) to get",lv_box_info:"Reach Level %1 to get",mail_join_title:"Join a Team get more rewards",mail_join_info:"Join a Team and get 2000 coins now!",spring_ad:"Daily Ads",subscribe_success:"Subscribe Success",newyear_sign:{title:"Login to get fantastic rewards",desc:"Login during %1-%2 to get fantastic spring rewards",day:"Day %1",tomorrow:"Available tomorrow",shareGet:"Share to get",watchGet:"Watch to get",hasGet:"Already claimed",notGet:"Stay tuned",year:"Year",month:"Month",date:"Day",watchAds:"Watch Ads",desc1:"Simply watch ads to get rewards.",desc2:"only ads from this mission will be count.",count:"time(s)",sign:"Spring?Login",gift:"Spring?Packs",watch:"Daily Ads"},ads_notice:{ads1:"Get 5 steps for free",ads2:"Free",ads3:"Ad Rewards",ads4:"Double reward",freeGift:"Free Gift",watch:"Watch ads to get reward.",next:"The next gift is being prepared\u2026",watchNow:"Watch now",no1:"You have watch all the ads today. Please come back later.",no2:"You can not watch Ads yet",no3:"Cooling time is not up",no4:"Come back tomorrow",fast:"Tap too fast",failed:"Watching failed",ads5:"Free 3 steps",ads6:"Free 3 steps",ads7:" ",ads8:"Ads are not ready, please try again later.",btn:"Watch Ads","err-1":"Coming soon","err-2":"wait","err-4":"Time is up",no_ads:"No ads"},dial:{title:"\u62bd\u5956",free:"\u514d\u8d39\u62bd\u5956",ads:"\u518d\u6b21\u62bd\u53d6",end:"\u6b21\u6570\u5df2\u7528\u5b8c"},recharge:{first:"Frist-recharge Pack",time1:"Limited offer",time2:"Current price",time3:"Value Pack",buy:"Purchase now",discount:"%1% off"},awd_hint:{jbs_awd:"Congrats! You are No.\x3ccolor\x3d#ff0000\x3e%1\x3c/c\x3e, Collect your rewards.",jbs_noawd:"You rank No.\x3ccolor\x3d#ff0000\x3e%1\x3c/c\x3e, no reward!"},reconfirm_hint:{pass_all:"Awesome! You completed %1 all levels. We will launch new ones ASAP! Stay tuned!",logout:"Log Out",ynlogout:"Are you sure you want to log out?"},msg_hint:{lab_length:"Characters cannot be shorter than 2 or longer than 50.",need_net:"Network required"},achieve:{title:"Mission",info:"Get rewards by finishing tasks below."},add_step:{title:"Not enough moves",info1:"Add 5 moves to continue the game.",info2:"Add %1 moves and %2 power-up to continue the game."},add_desktop:{title:"Shortcut reward",info:"1.Add game to home screen.\n2.Get 1000 gold for first adding.",add:"Add Shortcut",ok:"Success",no:"Failed"},assault:{title:"Rush Challenge",title_fail:"Rush failed?",fail_info:"Give up will lose all the rewards.",info:"Clear level without losing life can get starter equipment."},buy_heart:{more:"More Life",buy:"Refill",full:"Full Life",time:"Next Life Gained",showfull:"Max",use:"Use Now?",free:"draw life"},chg_name:{title:"Character Name",hint:"Char should be enterd with 0-9,a-z(A-Z),_.",error:"Contains illegal characters",ok:"Successful","no-1000":"Nickname length is incorrect","no-1001":"Nickname cannot contain spaces","no-1010":"Nickname contains illegal characters"},helpd:{title:"Help",p1:"Props",p2:"Obstacle",p3:"Equipment"},hot_update:{title:"Checking Update",query_ver:"Checking the remote server",load_fail:"Failed to load the local version information. Try again.",query_fail:"Failed to check the remote version. Try again.",ok:"Updated to the latest version. Happy Playing.",info:"Please check the connection and try again.",find_new:"New version found. Preparing to update.",update_ok:"Updated to the latest version. Happy Playing.",update_fail:"Update Failed %1 time(s). Please check the connection and try again.",update_ifail:"Failed to update resources. Try again or restart the app.",load_ifail:"Failed to load the version information.",download_file:"Files downloaded:",download_byte:"Bytes downloaded:",current_ver:"Current version:",new_ver:"Latest version:"},mail:{p1:"Life",p2:"System",p3:"Private",p1_info:"Max amount of life messages:60",p2_info:"System messages can be kept for 30d.",p3_list:"List",p3_record:"Records",no_hp_lab:"No one sent you Life? Go to guild and request some life.",goto_club:"Go to Guild",give_hp:"Sent you %1 Life.",mailbox:"System mail"},option:{title:"Data Option",input:"Enter"},rank:{p1_info:"Top 200 players will be on the list.",p2_info:"Top 50 guilds will be on the list.",p3_info:"Play with your friends."},rgs_gift:{title:"Return Pack",info:"       Nice to see you again. Lets continue our journey.\n       Here is a Return Pack for you."},setting:{push_on:"Push: Enable",push_off:"Push: Disable",chat_on:"Chat: Enable",chat_off:"Chat: Disable",ver:"Ver: ",qq:"QQ Group: ",tel:"GM Tel: ",turn:" Punch Key 6",qq_service:"Custom Service: "},shop:{p1:"Limited Store",p2:"Item Store",p3:"Gold Store",more:"View More",rebate:"Original",now:"Now",sale:"Sale",value:"Value",p1_info:"Limited offer. Check it out.",p2_info:"Level-up pals for sale.",p3_info:"Prepare some gold for level-up."},sign:{title7:"7 days sign-in",info7:"Total signed in: %1 day(s).",sign_in:"Sign-in",share:"Sign-in",sign_state_1:"Signed in.",sign_state_4:"Sign-in event ended.",sign_state_5:"Sign-in event haven't start.","sign_state_-5":"Insufficient gold.","sign_state_-6":"You had signed in every day.","sign_state_-7":"You haven't sign-in today.",day1:"Day 1",day2:"Day 2",day3:"Day 3",day4:"Day 4",day5:"Day 5",day6:"Day 6",day7:"Day 7",check_in:"Signed-in",info8:"90% off giftpack.",buy_day:"7-days luxury giftpack"},contend:{title:"Competition"},tournament:{title:"Match",star_num:"Collect Stars",info:"Complete Level 1 to join tournament and win the rewards!"},welcome_gift:{title:"Greeting Gift",info:"I am Tyke. Here is a greeting gift for you.\nEnjoy the game!",hp_lab:"No Life consumed"},exit_game:{title:"Leave now?",info:"You will lose 6 Life!"},invite_gift:{title:"inviting rewards",info:"Will get rewards after invited friends login by entering the link.",invite:"Invite",friend:"%1 Friends","err-1":"More than the number of invitations","err-2":"Over the maximum number of invitations","err-3":"Not open"},share:{title:"Share",ok:"Success",fail:"Failed",failGroup:"Group share failed, please retry.",info1:"You are Genius!",info2:"Share it to your friends.","double":"Get Double Reward by Sharing",shareTo:"Share",awardnotice:"Share",returnTitle:"Equip Back",returnCenter:"Sharing can save the equipment by this level",returnDesc:"Sharing can save the equipment by this level",returnBtn:"Share",unheartTitle:"Free Live",unheartCenter:"unheartCenter",unheartDesc:"Activate 30 minutes unlimited live.",unheartGreen:"Share",chapterTitle:"Congratulation",chapterCenter:"chapterCenter",chapterDesc:"New stage unlocked!",chapterGreen:"OK"},treasure:{title:"Guild Treasure",info1:"Get reward by finishing guild goal.",info2:"Great! You have finished all the guild goal!"},club:{change_badge:"Select Emblem",info_title:"Guild Profile",member:"Members",c_score:"Guild Points",c_help:"Weekly Help",c_type:"Guild Type",c_level:"Level limit","public":"Open","private":"Private",save:"Save",alter:"Edit",join:"Join",apply:"Apply",unlv_hint:"Level Requirements: Your level cannot be lower than %1 or higher than that of the guild leader.",quit:"Leave",unopen_reach:"Reach ",unopen_get:" Unlocked at Level",unopen_coj:"Create or join a guild to:",unopen_h:"Get free Life",unopen_g:"Get free gold",unopen_c:"Make social",p1_info:"Join a guild to get free Life.",p2_info:"Create and lead your own guild.",p5_info:"Enter the guild name you want to find.",people_num:"Members",information:"Profile",describe:"Description",badge:"Emblem",clubname:"Name",ask_heart:"Request",kick:"Dismiss",s_leader:"Leader",s_vice_leader:"Vice Leader",c_leader:"Demotion",s_mail:"Mail",member_num:"Members",get_heart:"Received Life",ask_join:"Request",ask_timetime:"You cannot request for Life until the countdown hits 0.",msg_time:"Cannot be sent until %1 sec later.",ifsave:"Save?",issaveto:"Do you want to save the change?",nosave:"No",whether_quit:"Are you sure you want to leave the guild?",pass_on:"Please transfer your leadership first.",break_up:"After your leave, the guild will be disbanded.",whether:"Are you sure you want to dismiss",kickclub:"From the guild"},login:{again:"Log In",elselogin:"This account has logged in on another device. Try again.",neterr:"Connection error. Please check your network.",invalid:"Login expired. Try again.",fb_login:"Facebook Login",gp_login:"Google Login",n7_login:"Email Login",sign_err:"Email does not exist or used.",login_err:"Email does not exist or incorrect password.",verify_hint:"The password does not match.",password_hint:"Input at least three characters",mail:"Mail address",password:"Password",nickname:"Nickname",verify:"Confirm Password",goto_login:"Account Login",goto_sign:"Register here",login:"Login",sign_up:"Register"},Guild:{join:"[%3] joined the guild.",quit:"[%1] left the guild.",auth:"[%1] is set as the [%2]",selfjoin:"You have joined [%1].",selfquit:"You have left [%1].",auth_100:"Leader",auth_50:"Vice Leader",auth_0:"Member",appo:"Appoint",appo_100:"Appoint him/her as the leader?",appo_50:"Appoint him/her as the vice leader?",appo_0:"Appoint him/her as a member?",applylv:"Level: %1",memcnt:"%1/100",notice:"The leader is mysterious and left no message.",gnerr:"The guild name should include at least two characters.",crerr:"Creation failed %1",notfind:"No result!",later:"Too frequent",applyerr:"Application failed %1",applyok:"Application successful",operaperr:"Operation failed %1",operapno:"Rejected",operapok:"Accepted",apply1000:"Application failed: The guild is not found.",apply1001:"Application failed: The guild is full.",apply1002:"Application failed: You failed to meet the level requirements.",apply1009:"Application failed: You are in the guild.",apply1010:"Application failed: Your guild has other members.",apply1003:"You have applied!",apply1008:"You have applied!",apply1013:"You can join new guild in 12h after you quit the guild!",apply1004:"Application failed: You need to leave your guild first.",join1001:"You are in the guild.",create1006:"Creation failed: You have a guild.",create1000:"Creation failed: The guild name exists.",create1013:"You can create a new guild in 12h after you quit the guild",create2000:"Not enough gold",createnameerr:"Invalid characters included. Enter another name.",quit1001:"Leaving failed: You are not in the guild.",quit1003:"Dismissing failed: You have no permission.",quit1004:"Dismissing failed: You have no permission.",jaq1001:"Joining failed: The guild is full.",jaq1002:"Joining failed: You need to apply first.",jaq1009:"You are already in the guild.",chat1001:"Sending failed: You are not in the guild.",error:"Internal error %1",createok:"Created",quitok:"Left",appoto:"Appointed as the",applyyes:"Leader [%1] accepted your request.",applyno:"Leader [%1] rejected your request.",appo993:"No more than 5 vice leaders are allowed.",appo995:"The member has been appointed.",appo996:"No permission",setting993:"No permission",settingok:"Edited"},item_list:{user_item:"Use Equip",user_ok:"Used",user_no:"Failed",1:"Magic Hammer",2:"Car",3:"UFO",4:"Dice",5:"Back",6:"Life x1",7:"Life x2",8:"Life x3",9:"Missile",10:"Magic Cube",11:"Bomb",12:"Gold",53:"Silver",13:"bonus time",14:"Life",15:"Life Pack",16:"Power-up Pack",17:"Premium Pack",18:"Pack",19:"Full Life",29:"Star",30:"Unlimited Life",31:"1st Top-up",54:"+ 5 Moves",55:"Newbie Pack",56:"Level-up Pack",57:"Pro Pack",58:"Elite Pack",59:"Expert Pack",60:"Champion Pack",info1:"Remove any blocks or obstacles.",info2:"Remove a row of blocks.",info3:"Remove a column of blocks.",info4:"Rearrange all blocks.",info5:"Go back to the previous step.",info6:"Regain 1 Life.",info7:"Regain 6 Life.",info8:"Regain 30 Life.",info9:"Randomly produce 1 Missile.",info10:"Randomly produce 1 Magic Cube.",info11:"Randomly produce 1 Bomb.",info15:"4Magic Hammer, 4Dice",info16:"5Magic Hammer, 3Car, 5Dice",info17:"25Life 1, 4Life 2, 2Life 3",info54:"+ 5 Moves"},help_list1:{1:"Missile",2:"Bomb",3:"Magic Cube",4:"Missile+Missile",5:"Missile+ Bomb",6:" Bomb  +    Bomb",7:" Missile  +  Magic Cube",8:"  Bomb  + Magic Cube",9:"Magic Cube      +    Magic Cube",info1:"5 or 6 blocks can make a missile, tap it to clear blocks and barriers in a row or a column.",info2:"7 or 8 blocks in same color can make a bomb, tap it to clear 3x3 blocks and barriers around it.",info3:"9 or more blocks can make a magic cube, tap it to clear all blocks in same color.",info4:"Clear blocks and barriers in a row or a column.",info5:"Clear blocks and barriers in 3 rows and 3 columns.",info6:"Clear 7x7 blocks and barriers around.",info7:"All blocks in the same color with magic cube turn into missiles lunched to random direction.",info8:"All blocks in the same color with magic cube turn into bombs.",info9:"Clear all the blocks and barriers."},help_list2:{1:"Balloon",2:"Tennis",3:"Chicken",4:"Bubble",5:"Chest",6:" Magic Chest",7:"Enhanced Chest",8:" Colored Balloon",9:"Bulb",10:"Jelly",11:" Colored Chest",12:"Sheep",13:" Billiard Table",14:"Puppy Toy",15:"Cage",16:" Lego Horse",17:"Copter",18:"Crayon",19:" Russian Doll",20:" Steel Chest",21:" Washing Machine",22:" Candy Pot",23:"Mussel",24:" Bulb Chain",info1:"Remove the Balloon by removing near-by blocks.",info2:"Remove blocks to let the Tennis Ball fall and collect it.",info3:"Remove blocks to let the Chicken fall and collect it.",info4:"Remove Bubbles by removing blocks with bubbles.",info5:"Move the Chest by removing near-by blocks.",info6:"Collect Puppy Cookies by removing blocks near the chest.",info7:"Remove the Enhanced Chest by removing near-by blocks (no more than 4 times are required).",info8:"Remove the balloon by removing near-by same-color blocks.",info9:"Remove the Bulb by removing near-by blocks twice. Light the bulb the first time and remove the bulb the second time.",info10:"Remove the Jelly by removing near-by blocks. If not removed immediately, it will grow.",info11:"Remove the chest by removing near-by same-color blocks. Remove blocks 4 times if it is an enhanced chest.",info12:"Remove the Sheep using a Missile or Bomb 1 time.",info13:"Remove the table by removing near-by blocks and collecting balls.",info14:"Remove near-by blocks 1 time to color the toy and remove the toy by removing same-color blocks 1 time.",info15:"Remove the Cage by removing near-by blocks.",info16:"Remove the horse using Missiles and Bombs 3 times.",info17:"Remove the Helicopter by removing near-by blocks 2 times.",info18:"Remove the crayon by removing near-by same-color blocks.",info19:"Remove the doll by removing near-by blocks 3 times.",info20:"Remove the chest using Missiles and Bombs, 4 times if it is an enhanced chest.",info21:"Produce 1 bubble that flies to anywhere after removing near-by blocks. The Washing Machine cannot be removed.",info22:"Remove the pot by removing near-by blocks 2 times.",info23:"Remove an open Mussel by removing near-by blocks. A closed Mussel cannot be removed. The Mussel state changes after each removal.",info24:"Remove bulbs on the chain by removing near-by blocks. The chain can be removed after all Bulbs are removed."},help_list3:{1:" Magic Hammer",2:"Car",3:"UFO",4:"Dice",5:"Back",6:"Missile",7:"Bomb",8:" Magic Cube",info1:"Remove 1 random block or obstacle.",info2:"Remove a row of blocks.",info3:"Remove a column of blocks.",info4:"Rearrange all blocks.",info5:"Go back to the previous step.",info6:"Select the Missile before a level starts, turning a random block into a Missile. It can remove a row or column of blocks/obstacles.",info7:"Select the Bomb before a level starts, turning a random block into a Bomb. It can remove 3x3 near-by blocks/obstacles.",info8:"Select the magic cube before a level starts, turning a random block into a Magic Cube. It can remove same-color blocks."},achieve_list:{1:"Star Collector",2:"Global Traveler",3:"Treasure Hunter",4:"Sky Rocker",5:"Bombardment",6:"Colourful",7:"Ready Steady",8:"Iron Man",9:"Cool Driver",10:"Find the Alien",11:"Unpredictable",12:"The Boss",13:"Nice Help",14:"Perfection",15:"Be Rich",16:"Energetic",17:"Old Friend",18:"Top Player",19:"Top Player",20:"Excellent",21:"Popular",22:"Savior",23:"Up to Date",24:"A galaxy of talents",25:"Get Strong",26:"Begginer",1E3:"Share to the group",info1:"Collect %1 stars.",info2:"Complete Level %1.",info3:"Unlock Star Chest %1 times.",info4:"Explode Missile %1 times.",info5:"Explode Bomb %1 times.",info6:"Explode Magic Cube %1 times.",info7:"Equipped pre-battle power-up %1 times.",info8:"Swing Hammer %1 times.",info9:"Drive Car %1 times.",info10:"Drive UFO %1 times.",info11:"Throw Dice %1 times.",info12:"Accumulate recharge reach %1.",info13:"Helped guild members %1 times.",info14:"Complete level with 3 stars %1 times.",info15:"Own %1 gold.",info16:"Continuously signed-in in %1 days.",info17:"Accumulate sign-in reach %1 days.",info18:"Purchase full life %1 times.",info19:"Reach No.1 on individual ranking.",info20:"Reach No.2 on individual ranking.",info21:"Reach No.3 on individual ranking.",info22:"Apply + 5 Moves %1 times.",info23:"Participated in events %1 times.",info24:"Guild reaches Lv.%1",info26:"Created a guild for the first time.",info1000:"Share game to chat group everyday."},chapter_list:{1:"The Trip",2:"The Circus",3:"Riverside BBQ",4:"Naughty Kids Party",5:"The Prairie Journey",6:"Party of the Singles",7:"Temptation of Toy ",8:"A Thrilling Experience",9:"A Leisure Afternoon",10:"The Captain",11:"The Abstract Art"},fuitips:{t1:"First loading would takes a little time. Please wait...",t2:"Combine 5-6 same-color blocks into a Missile.",t3:"Combine 7-8 blocks into a Bomb.",t4:"Combine 9 blocks into a Magic Cube.",t5:"The Magic Cube will be charged every time when an effect is released and will be produced when fully charged."},guide:{1E4:"Hey, I am\x3ccolor\x3d#ff0000\x3e Jerry\x3c/c\x3e! Let me teach you how to play!",10001:"Tap\x3ccolor\x3d#ff0000\x3e at least 2 same-color \x3c/c\x3e blocks to remove them.",10002:"Remove\x3ccolor\x3d#ff0000\x3e 10 blue blocks\x3c/c\x3e to attain the target.",10020:"Tap\x3ccolor\x3d#ff0000\x3e 5 adjacent same-color blocks\x3c/c\x3e and see what will happen.",10021:"Nice! Try the power of\x3ccolor\x3d#ff0000\x3e Missile\x3c/c\x3e.",10022:"Combine\x3ccolor\x3d#ff0000\x3e 5 (or 6) same-color blocks\x3c/c\x3e into a\x3ccolor\x3d#ff0000\x3e Missile\x3c/c\x3e.",10023:"A Missile can remove\x3ccolor\x3d#ff0000\x3e a row\x3c/c\x3e or\x3ccolor\x3d#ff0000\x3ecolumn\x3c/c\x3e of blocks.",10030:"Try tapping\x3ccolor\x3d#ff0000\x3e 7 same-color \x3c/c\x3e blocks.",10031:"Great! A\x3ccolor\x3d#ff0000\x3e Bomb\x3c/c\x3e is made. Tap it to remove near-by blocks.",10032:"Combine\x3ccolor\x3d#ff0000\x3e 7 (or 8)\x3c/c\x3e same-color blocks into\x3ccolor\x3d#ff0000\x3e a Bomb\x3c/c\x3e.",10033:"Tap a Bomb to remove \x3ccolor\x3d#ff0000\x3enear-by\x3c/c\x3e blocks.",10041:"Now, tap \x3ccolor\x3d#ff0000\x3e9\x3c/c\x3e blocks.",10042:"A\x3ccolor\x3d#ff0000\x3e Magic Cube\x3c/c\x3e is created. Tap it to remove\x3ccolor\x3d#ff0000\x3e all same-color\x3c/c\x3e blocks.",10043:"Combine\x3ccolor\x3d#ff0000\x3e 9 and more same-color\x3c/c\x3e blocks into a \x3ccolor\x3d#ff0000\x3e Magic Cube\x3c/c\x3e.",10044:"Tap a\x3ccolor\x3d#ff0000\x3e Magic Cube\x3c/c\x3e to remove all same-color cubes on the screen.",10050:"Tap the\x3ccolor\x3d#ff0000\x3e power-up combination\x3c/c\x3e below to check their explosion power.",10051:"You only need to combine any \x3ccolor\x3d#ff0000\x3e2\x3c/c\x3e power-ups.",10052:"Power-up combinations are the secret to complete levels fast.",10060:"Remove the balloon by tapping\x3ccolor\x3d#ff0000\x3e near-by\x3c/c\x3e blocks.",10070:"Remove blocks \x3ccolor\x3d#ff0000\x3e under the tennis ball\x3c/c\x3e and it will fall.",10071:"The tennis ball will be collected when falls on the \x3ccolor\x3d#ff0000\x3e chess board\x3c/c\x3e.",10080:"Gross! Remove this block, and you can collect the tennis ball.",10081:"Remove the block with the \x3ccolor\x3d#ff0000\x3e Magic Hammer\x3c/c\x3e.",10082:"Do not forget the\x3ccolor\x3d#ff0000\x3e Magic Hammer\x3c/c\x3e can remove any block or obstacle. Use it when you are in trouble.",10090:"Collect the Chicken by \x3ccolor\x3d#ff0000\x3eremoving \x3c/c\x3eblocks\x3ccolor\x3d#ff0000\x3e under \x3c/c\x3eit.",10091:"\x3ccolor\x3d#ff0000\x3eTwin Bombs\x3c/c\x3e can \x3ccolor\x3d#ff0000\x3eremove 7x7  near-by blocks.\x3c/c\x3e Tap them to collect the Chicken fast.",10010:"Remember the combination rules?\x3ccolor\x3d#ff0000\x3e The combination of Missile and Bomb\x3c/c\x3e can remove \x3ccolor\x3d#ff0000\x3e 3x3\x3c/c\x3e near-by blocks.",10100:"So many bubbles. Let us figure out how to collect them fast.",10101:"Use a \x3ccolor\x3d#ff0000\x3e Car\x3c/c\x3e to collect a row of bubbles.",10102:"The \x3ccolor\x3d#ff0000\x3eCar\x3c/c\x3e can remove a row of blocks or obstacles.",10110:"Collect a\x3ccolor\x3d#ff0000\x3e bubble \x3c/c\x3eby tapping the bock in the bubble.",10111:"Try to collect \x3ccolor\x3d#ff0000\x3e2 bubbles\x3c/c\x3e.",10130:"Bubbles again. Try another method to collect them.",10131:"Use a UFO to collect a column of bubbles.",10132:"Use a\x3ccolor\x3d#ff0000\x3e UFO\x3c/c\x3e to collect a column of bubbles.",10141:"The combination of \x3ccolor\x3d#ff0000\x3etwo Magic Cubes\x3c/c\x3e can \x3ccolor\x3d#ff0000\x3eremove blocks on the whole screen one time.\x3c/c\x3e You doubt it? Have a try.",10160:"Twin Bombs can remove \x3ccolor\x3d#ff0000\x3ea row and a column \x3c/c\x3eof blocks. They are combined \x3ccolor\x3d#ff0000\x3ewhere they are tapped\x3c/c\x3e.",10170:"The Dice can \x3ccolor\x3d#ff0000\x3erearrange\x3c/c\x3e blocks.",10171:"Tap the block.",13171:"Congrats on obtaining an \x3ccolor\x3d#ff0000\x3eachievement\x3c/c\x3e. Go collect your rewards.",10172:"Obtain\x3ccolor\x3d#ff0000\x3e more achievements\x3c/c\x3e to get\x3ccolor\x3d#ff0000\x3e rich rewards\x3c/c\x3e, Let us clear levels with Tyke.",10173:"Congrats on receiving a\x3ccolor\x3d#ff0000\x3e Star Chest\x3c/c\x3e. Open it to get gold and power-ups.",11342:"Want more rewards, Remember to complete the level with\x3ccolor\x3d#ff0000\x3e 3 stars\x3c/c\x3e.",10174:"Failing all the time? Use your \x3ccolor\x3d#ff0000\x3e power-up\x3c/c\x3e!",10175:"The Magic Hammer can \x3ccolor\x3d#ff0000\x3e remove a specific obstacle\x3c/c\x3e.",10176:"The Car can \x3ccolor\x3d#ff0000\x3eremove a row of obstacles\x3c/c\x3e.",10177:"The UFO can \x3ccolor\x3d#ff0000\x3eremove a column of obstacles\x3c/c\x3e.",10178:"The Dice can \x3ccolor\x3d#ff0000\x3erearrange blocks\x3c/c\x3e.",10179:"Use Back to \x3ccolor\x3d#ff0000\x3ego back to the previous step\x3c/c\x3e.",10180:"Congrats on receiving\x3ccolor\x3d#ff0000\x3e the level chest\x3c/c\x3e. After completing 10 levels, you can open tons of gold, silver, and power-ups. Open it now!",10181:"\x3ccolor\x3d#ff0000\x3eThe guild system\x3c/c\x3e is on. Find some like-minded friends there.\x3ccolor\x3d#ff0000\x3e tap here\x3c/c\x3e.",10182:"Do not forget to sign in every day. Get a big reward after signing in 7 days consecutively.",10183:"The level-up event is available. Tap Play and complete any level to join the event.",10184:"After the Tournament starts, complete levels to collect stars and compete with other players.",10200:"Oops! Wrong move! You can use the newly-received power-up:\x3ccolor\x3d#ff0000\x3e Back\x3c/c\x3e.",10201:"Go back to\x3ccolor\x3d#ff0000\x3e the previous step\x3c/c\x3e. Try it now!",10210:"Collect the chest by tapping \x3ccolor\x3d#ff0000\x3enear-by\x3c/c\x3e blocks.",10211:"Awesome. Remove all the chests!",10310:"There is a \x3ccolor\x3d#ff0000\x3epuppy cookie\x3c/c\x3e in the magic chest. Collect the cookie by tapping the block near the chest.",10410:"The colored balloon cannot be removed until you tap\x3ccolor\x3d#ff0000\x3e near-by same-color blocks\x3c/c\x3e.",10510:"This is a Bulb. You need to remove\x3ccolor\x3d#ff0000\x3e near-by same-color blocks\x3c/c\x3e twice to remove a lit Bulb.",10610:"Here come the jellies. They will swallow blocks. Remove them \x3ccolor\x3d#ff0000\x3e ASAP!\x3c/c\x3e",10710:"Tap same-color blocks to remove the colored chest.",10810:"Sheep is tough. They can only be removed with \x3ccolor\x3d#ff0000\x3eMissiles and Bombs\x3c/c\x3e.",11010:"Each Billiard Table has\x3ccolor\x3d#ff0000\x3e10\x3c/c\x3eballs. Remove near-by blocks to collect the balls.",21210:"Tap blocks near the Puppy Toy to color the toy. Collect the toy by removing near-by same-color blocks.",21410:"Break cages by removing near-by blocks.",21610:"The Lego Horse cannot be removed unless being hit by Missiles or Bombs\x3ccolor\x3d#ff0000\x3e 3\x3c/c\x3e times.",21810:"Collect the Helicopter by removing near-by blocks twice Continuously.",22010:"Collect the Crayon by removing same-color blocks.",22410:"Collect the Matryoshka Doll by removing near-by blocks\x3ccolor\x3d#ff0000\x3e 3\x3c/c\x3e times.",22810:"Remove the Steel Chest using \x3ccolor\x3d#ff0000\x3eMissiles or Bombs\x3c/c\x3e.",23210:"Randomly produce 1 bubble by removing\x3ccolor\x3d#ff0000\x3e blocks near the Washing Machine\x3c/c\x3e.",23510:"Collect the Candy by \x3ccolor\x3d#ff0000\x3ebreaking the Candy Pot\x3c/c\x3e.",24010:"Collect the Mussel by removing blocks near an\x3ccolor\x3d#ff0000\x3e open Mussel\x3c/c\x3e. Note:\x3ccolor\x3d#ff0000\x3e Closed Mussels\x3c/c\x3e cannot be removed.",24510:"Collect Bulb by removing \x3ccolor\x3d#ff0000\x3eblocks near\x3c/c\x3e the Bulb Chain. Collect the chain after removing\x3ccolor\x3d#ff0000\x3e all Bulbs\x3c/c\x3e."},assaultRule:["\n1.Duration\uff1a\x3ccolor\x3d#ff0000\x3e3 days \x3c/c\x3e\n","2.Unlocked at level \x3ccolor\x3d#ff0000\x3e50\x3c/c\x3e.\n","3.Rule\uff1a","      A.During the event, you will get an enhanced \x3ccolor\x3d#ff0000\x3epower-up\x3c/c\x3e for every level completed, which can be used in the next level.","      B.After completing 3 levels in a row, you can keep the best rewards.","      C.If you \x3ccolor\x3d#ff0000\x3efail\x3c/c\x3e, you will lose the reward with you and need to complete the level again to get an enhanced power-up.\n","4.Keep your device connected to the network. Otherwise, your progress cannot be recorded.\n","5.Once you are found cheating, all rewards will be canceled."],achievetRule:["\n1.Attain some targets to get \x3ccolor\x3d#ff0000\x3eachievement rewards\x3c/c\x3e!\n","2.You can collect rewards only when your device is connected to the network.\n","3.Once you are found cheating, rewards will be canceled."],tournamentRule:["\n1.Duration\uff1a\x3ccolor\x3d#ff0000\x3e3 days \x3c/c\x3e\n","2.Unlocked at \x3ccolor\x3d#ff0000\x3eLevel 19\x3c/c\x3e.\n","3.You only need to complete one level to join the event.\n","4.\x3ccolor\x3d#ff0000\x3eTop 10\x3c/c\x3e players will be rewarded.\n","5.Rewards can be collected at 0:00 on Day 2 after the event.The progress will be updated.\n","6.Keep your device connected to the network. Otherwise, your progress cannot be recorded.\n","7.Once you are found cheating, all rewards will be canceled."],SignInActivity7:["\n1.Duration:\x3ccolor\x3d#ff0000\x3e7 days \x3c/c\x3e\n","2.Unlocked at \x3ccolor\x3d#ff0000\x3e Level 4\x3c/c\x3e.\n","3.Rules: Sign in one time per day to get rewards. Sign in 7 days to get the biggest reward. (Example: If you signed in on Day 1, but not on Day 2, you can only get the 2nd reward when you sign in on Day 3.) \n","4.Keep your device connected to the network. Otherwise, your progress cannot be recorded.\n","5.Once you are found cheating, all rewards will be canceled."],treasureRule:["RULE"],contendRule:["Rule"],TotalAdsRule:["\n1. Watching video for \x3ccolor\x3d#ff0000\x3e%1, %2, %3 times\x3c/c\x3e can get corresponding rewards.\n","2. Successfully watched video can be recorded only in this event.\n","3. Video countdown: \x3ccolor\x3d#ff0000\x3e5 mins\x3c/c\x3e, Refresh at \x3ccolor\x3d#ff0000\x3emidnight\x3c/c\x3e everyday.\n","4. Please keep your device online, otherwise the record will not be saved.\n","5. Please \x3ccolor\x3d#ff0000\x3edo not cheat\x3c/c\x3e, all the rewards will be took back once we find you cheat."],dialRule:["\u62bd\u5956\u89c4\u5219"],g_name:{0:"PUPPY BLAST",1:"PUPPY CRUSH"},badge_list:{0:"N/A",1:"CN",2:"US",3:"JP",4:"DE",5:"FR",6:"GB",7:"IN",8:"BR",9:"IT",10:"CA",11:"KR",12:"RU",13:"AU",14:"ES",15:"MX",16:"TR",17:"LU",18:"CH",19:"AR",20:"SE",21:"PL",22:"BE",23:"TH",24:"AT",25:"NO",26:"IL",27:"ZA",28:"DK",29:"MY",30:"SG",31:"FI",32:"CS",33:"GR",34:"UA",35:"LU",36:"RO"},invite_title:{1:"I've been playing this game everyday now. So addicting!! U must try it..",2:"Help! Please sent me a life T.T",3:"Haha.. 5 consecutive wins! Beat Me?",4:"Gal, you will love this game!",5:"Gal, you must try this game!",6:"Lets play together :D",7:"All my colleague play this game. You must try it!",8:"All my colleague play this game. You must try it!",9:"I've been playing this game everyday now. So addicting!! U must try it..",10:"Lets play together :D",11:"Gal, you will love this game!",12:"Help! Please sent me a life T.T",13:"Let's play this game with me!"},invite_desc:{1:"I've been playing this game everyday now. So addicting!! U must try it..",2:"Help! Please sent me a life T.T",3:"Haha.. 5 consecutive wins! Beat Me?",4:"Gal, you will love this game!",5:"Gal, you must try this game!",6:"Lets play together :D",7:"All my colleague play this game. You must try it!",8:"All my colleague play this game. You must try it!",9:"I've been playing this game everyday now. So addicting!! U must try it..",10:"Lets play together :D",11:"Gal, you will love this game!",12:"Help! Please sent me a life T.T",13:"Let's play this game with me!"},battle_share:{green1:"Double\nReward",title1:"Congratulation",title2:"Extra Bonus",title3:"Congratulation",info1:"Get %1",info2:"Cleared %1 blocks in a row",info3:"Watch ads for double rewards",ignoreGet:"No Thanks\x3e",ignore1:"No Thanks\x3e",welcomeNotice:"Share to get a lot of rewards\uff01"}},cc._RF.pop()},{}],fr:[function(t,e,i){cc._RF.push(e,"1029cK2nXRMh7iBbR0S1S7C","fr"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.fr={},cc._RF.pop()},{}],goal_ball:[function(t,e,i){cc._RF.push(e,"43eb1jJPgFDt6iQyJCmx26/","goal_ball"),cc.Class({"extends":t("goal_base"),properties:{},start:function(){},setBall:function(t){this.sprite||(this.sprite=this.getComponent(cc.Sprite)),this.sprite.spriteFrame=t.getComponent(cc.Sprite).spriteFrame}}),cc._RF.pop()},{goal_base:"goal_base"}],goal_base:[function(t,e,i){cc._RF.push(e,"91b5789y39NopuqkmqD6Bkk","goal_base");var n=t("GameCommon"),o=t("UIGameTopbarV2"),a=t("N7UIEffectLayer"),s=t("GameTools"),c=t("N7Resource"),r=t("N7Sound"),l=cc.Class({"extends":cc.Component,properties:{autoPlay:!1,soundId:0},statics:{FLYTO_GOAL_PARAMS:{scale1:.4,scale2:.7,p1:{offset:-135},p2:{offset:15},time:.5},FLYTO_GOAL_PARAMS2:{scale1:.4,scale2:.7,p1:{offset:135},p2:{offset:-15},time:.5},getPos:function(t){return a.getPos(t)}},start:function(){},removeSelf:function(){this.callFunc&&(this.callFunc.call(this.caller,n.STATE_PLAYEND),this.callFunc=this.caller=null),c.backPrefab(this.node)},init:function(t,e,i,n){this.params=e,this.meta=e&&e.meta||t.meta,this.callFunc=i,this.caller=n;var o=t.cube?t.cube.node:t.node;this.node.position=e.pos||s.nodeToNodePos(o,a.node()),this.autoPlay&&this.play()},play:function(){this.callFunc&&this.callFunc.call(this.caller,n.STATE_STARTHIT),this.flyTo()},getGoalNode:function(t){this.goalPos=a.getPos(t)},flyAction:function(t){return t},makeFlyAction:function(t,e,i,n){return s.createBrizer(t,e,i,n).easing(cc.easeIn(3))},flyTo:function(){var t=void 0;if(this.goalPos)t=this.goalPos;else{var e=o.getGoalIcon(this.meta.goalName);if(null==e)return;t=e.getPos()}var i=this.node,n=this.params,a=i.position,s=l.FLYTO_GOAL_PARAMS,c=a.x<=0;s.p1.offset=Math.abs(s.p1.offset)*(c?-1:1),s.p2.offset=Math.abs(s.p2.offset)*(c?1:-1);var r=n.isDown?cc.p(a.x,a.y-(n.downY?n.downY:0)):a,h=this.makeFlyAction(r,t,s);h=this.flyAction(h);var u=[];n.isDown?(i.zIndex=-1,u.push(cc.moveTo(n.y,r),cc.callFunc(function(t){t.zIndex=2}))):i.zIndex=2,u.push(h,cc.callFunc(function(t){this.goalPos||o.subGoal(this.meta),this.goalPos=null,this.removeSelf()},this));var d=cc.sequence(u);i.runAction(d),this.playSound()},playSound:function(){0!=this.soundId&&r.playSound(this.soundId)}});cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",N7Resource:"N7Resource",N7Sound:"N7Sound",N7UIEffectLayer:"N7UIEffectLayer",UIGameTopbarV2:"UIGameTopbarV2"}],goal_cube:[function(t,e,i){cc._RF.push(e,"f57bbimoqNDaYB8NzK1f1gr","goal_cube");var n=t("N7Resource");cc.Class({"extends":t("goal_base"),properties:{},start:function(){},removeSelf:function(){this.obj&&this.obj.removeSelf&&this.obj.removeSelf(),this.obj=null,this._super()},init:function(t,e,i,o){this._super(t,e,i,o),this.sprite||(this.sprite=this.getComponent(cc.Sprite));var a=this.node;a.removeAllChildren(),a.scale=1,n.loadRes(t.meta.goalIcon,function(t){t instanceof cc.SpriteFrame?(this.sprite.enabled=!0,this.sprite.spriteFrame=t,t.getRect().height<134&&(a.scale=1.4)):(this.obj=t,this.sprite.enabled=!1,t.node.parent=a),this.play()},this)}}),cc._RF.pop()},{N7Resource:"N7Resource",goal_base:"goal_base"}],goal_duck:[function(t,e,i){cc._RF.push(e,"ff7e66x7ahJ4K0yK4CqjSVG","goal_duck");var n=t("GameCommon");cc.Class({"extends":t("goal_base"),properties:{content:{type:cc.Node,"default":null}},start:function(){},makeFlyAction:function(t,e,i,n){return cc.moveTo(.5,e).easing(cc.easeIn(3))},flyAction:function(t){var e=[cc.scaleTo(.15,2.5,2.5).easing(cc.easeOut(4)),cc.delayTime(.2),cc.scaleTo(.15,1,1).easing(cc.easeIn(4))];return cc.spawn(t,cc.sequence(e))},play:function(){this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this)),this.anim.play()},playEnd:function(){this.callFunc&&this.callFunc.call(this.caller,n.STATE_STARTHIT),this.flyTo()}}),cc._RF.pop()},{GameCommon:"GameCommon",goal_base:"goal_base"}],goal_tennis:[function(t,e,i){cc._RF.push(e,"4acfd3OG7RPXJTL6K2c1pGH","goal_tennis"),cc.Class({"extends":t("goal_base"),properties:{},start:function(){}}),cc._RF.pop()},{goal_base:"goal_base"}],goal_toast:[function(t,e,i){cc._RF.push(e,"0ae8asMJFRFS4nejwNo2gZK","goal_toast");var n=t("N7UIEffectLayer"),o=t("GameCommon");cc.Class({"extends":t("goal_base"),properties:{bone:{type:cc.Node,"default":null}},statics:{FLYTO_GOAL_PARAMS:{scale1:.4,scale2:.7,p1:{offset:-135},p2:{offset:15},time:.5},FLYTO_GOAL_PARAMS2:{scale1:.4,scale2:.7,p1:{offset:135},p2:{offset:-15},time:.5}},start:function(){},init:function(t,e,i,n){this.anim||(this.anim=this.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this)),this.bone.position=cc.p(0,0),this._super(t,e,i,n)},play:function(){this.anim.play()},playEnd:function(){this.callFunc&&this.callFunc.call(this.caller,o.STATE_STARTHIT),this.node.position=n.getPos(this.bone),this.bone.position=cc.p(0,0),this.flyTo()}}),cc._RF.pop()},{GameCommon:"GameCommon",N7UIEffectLayer:"N7UIEffectLayer",goal_base:"goal_base"}],"gray.frag":[function(t,e,i){cc._RF.push(e,"fedd3NreupE87sQbTkrgm6B","gray.frag"),e.exports="\n#ifdef GL_ES\nprecision lowp float;\n#endif\n\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\n    vec4 c \x3d v_fragmentColor * texture2D(CC_Texture0, v_texCoord);\n    gl_FragColor.xyz \x3d vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b);\n    gl_FragColor.w \x3d c.w;\n}\n",cc._RF.pop()},{}],"gray.vert":[function(t,e,i){cc._RF.push(e,"fb29cfJbWlBJaTYNKbISiVd","gray.vert"),e.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d CC_PMatrix * a_position;\n    v_fragmentColor \x3d a_color; \n    v_texCoord \x3d a_texCoord; \n}\n",cc._RF.pop()},{}],item_car:[function(t,e,i){cc._RF.push(e,"fc362aj67NKMLIfJQvnjRbu","item_car");var n=t("UIGameV2"),o=t("N7UIManager"),a=t("GameEvent"),s=t("GameTools");cc.Class({"extends":t("effect_hitbase"),properties:{effect:{type:cc.Node,"default":null}},onLoad:function(){this.effect.active=!1},play:function(t,e,i,a,s){e=cc.p(0,e.y),this._super(t,e,i,a,s);var c=n.instance(),r=this.node.parent,l=c.gameMap.getGridPos(9,e.y,!0),h=r.convertToNodeSpaceAR(c.gameMap.getGridPos(0,e.y,!0));this.endPos=r.convertToNodeSpaceAR(l),this.outPos=r.convertToNodeSpaceAR(cc.p(o.instance().node.width+200,l.y));var u=cc.p(-100,l.y);u=this.node.parent.convertToNodeSpaceAR(u),this.node.position=u,this.effect.active=!1;var d=[cc.moveTo(.25,h).easing(cc.easeIn(3)),cc.callFunc(this.startHit,this)];this.node.runAction(cc.sequence(d))},start:function(){},startHit:function(){this.effect.active=!0,s.resetParticle(this.effect),a.EVENT_GAME_ZHEN(2,!1),this.animation.play(),this._super();var t=[cc.moveTo(.9,this.endPos),cc.moveTo(.1,this.outPos).easing(cc.easeIn(3)),cc.callFunc(this.removeSelf,this)];this.node.runAction(cc.sequence(t))}}),cc._RF.pop()},{GameEvent:"GameEvent",GameTools:"GameTools",N7UIManager:"N7UIManager",UIGameV2:"UIGameV2",effect_hitbase:"effect_hitbase"}],item_drill:[function(t,e,i){cc._RF.push(e,"5c62bDP8eJPpq0MBO8XoH+d","item_drill");var n=t("GameEvent");cc.Class({"extends":t("effect_hitbase"),properties:{hammer:{type:cc.Animation,"default":null},effect:{type:cc.Animation,"default":null}},onLoad:function(){this.hammer.on("finished",this.hammerEnd,this);var t=this;this.hammer.startHit=function(){t.startHit()},this.effect.on("finished",this.effectEnd,this)},play:function(t,e,i,n,o){this._super(t,e,i,n,o),this.finishCount=0,this.effect.node.active=!1,this.hammer.play()},startHit:function(){this._super(),n.EVENT_GAME_ZHEN(.5,!1),this.effect.node.active=!0,this.effect.play()},checkPlayEnd:function(){++this.finishCount>=2&&this.playEnd()},hammerEnd:function(){this.checkPlayEnd()},effectEnd:function(){this.checkPlayEnd()}}),cc._RF.pop()},{GameEvent:"GameEvent",effect_hitbase:"effect_hitbase"}],item_ufo:[function(t,e,i){cc._RF.push(e,"349efSdwJBO3pj5dGNM8+1D","item_ufo");var n=t("UIGameV2"),o=t("N7UIManager"),a=t("GameCommon"),s=t("UIGameUseItem"),c=t("GameTools"),r=cc.Class({"extends":t("effect_hitbase"),properties:{ufo:{type:cc.Animation,"default":null},effect:{type:cc.Node,"default":null},content:{type:cc.Node,"default":null}},statics:{CUBEMOVE_DELAY:.15,FLYTO_PARAMS:{scale1:.7,scale2:.4,p1:{offset:-15},p2:{offset:137},time:.8}},onLoad:function(){this.effect.active=!1},play:function(t,e,i,a,l){this.resetUFO(),this._super(t,cc.p(e.x,9),i,a,l);var h=n.instance(),u=s.getIcon(3),d=this.node.parent,f=o.instance().node;this.outPos=d.convertToNodeSpaceAR(cc.p(f.width+200,f.height+200));var g=c.nodeToNodePos(u.node,d),p=d.convertToNodeSpaceAR(h.gameMap.getGridPos(e.x,h.gameMap.ycount,!0)),_=c.createBrizer(g,cc.p(p.x,p.y+130),r.FLYTO_PARAMS).easing(cc.easeIn(2));this.node.scale=.5,this.node.position=g,this.ufo.play("Drill_Large_go");var m=[cc.spawn([_,cc.scaleTo(.6,1.08,1.08).easing(cc.easeIn(3))]),cc.spawn([cc.moveTo(1,p).easing(cc.easeIn(3)),cc.scaleTo(1,1,1).easing(cc.easeIn(3))]),cc.callFunc(this.startUFOHit,this)];this.node.runAction(cc.sequence(m))},calcDelay:function(t,e,i,n){if(this.commandDelay&&(t.delay=(e-1)*this.commandDelay,t.next=t.delay>0,this.listWaitTime=Math.max(t.delay,this.listWaitTime),t.delay+=r.CUBEMOVE_DELAY),t.cmd==a.com_destroy){if(t.meta&&35==t.meta.type)return!0;this.delayList.push(t)}return!0},start:function(){},resetUFO:function(){this.waitOtherTime=0,this.effect.active=!1,this.delayList=[]},startUFOHit:function(){this.ufo.play("Drill_Large_start"),c.resetParticle(this.effect),this.effect.active=!0;var t=r.CUBEMOVE_DELAY+this.listWaitTime,e=n.instance();for(var i in this.delayList){var o=this.delayList[i];if(o){var a=e.gameMap.getCubeFromUUID(o.datas.gid);if(!e.checkCube(a)){if(a.isG4)continue;this.playCubeHit(a,o,t)}}}this.scheduleOnce(this.endUFOHit,t),this.startHit()},endUFOHit:function(){this.ufo.play("Drill_Large_go"),this.effect.active=!1;var t=[cc.delayTime(r.CUBEMOVE_DELAY),cc.spawn([cc.moveTo(.7,this.outPos).easing(cc.easeIn(3)),cc.scaleTo(.7,.2,.2).easing(cc.easeIn(3))]),cc.callFunc(this.removeSelf,this)];this.node.runAction(cc.sequence(t))},playCubeHit:function(t,e,i){var o=n.instance().gameMap.getGridPos(this.grid.x,9);c.pushNode(t.node,this.content);var a=e.delay;e.delay=i;var s=[cc.delayTime(r.CUBEMOVE_DELAY),cc.callFunc(t.stopShake,t)];return s.push(cc.spawn(cc.scaleTo(a,.6,.6).easing(cc.easeIn(3)),cc.moveTo(a,0,0).easing(cc.easeIn(3))),cc.callFunc(function(){n.instance().gameMap.pushCubeNode(t.node),t.hide()},this)),t.playSeqAction(s,o),a}});cc._RF.pop()},{GameCommon:"GameCommon",GameTools:"GameTools",N7UIManager:"N7UIManager",UIGameUseItem:"UIGameUseItem",UIGameV2:"UIGameV2",effect_hitbase:"effect_hitbase"}],magiccube_cube:[function(t,e,i){cc._RF.push(e,"cfc67a1UxBNVYlZ0w7OfkeG","magiccube_cube");var n=t("GameTools"),o=t("N7UIEffectLayer"),a=t("UIGameV2");cc.Class({"extends":cc.Component,properties:{content:{type:cc.Node,"default":null}},onLoad:function(){this.anim||(this.anim=this.node.getComponent(cc.Animation),this.anim.on("finished",this.playEnd,this))},play:function(t,e,i){n.resetParticle(this.node),this.callFunc=e,this.caller=i,this.cubeNode=t;var o=a.instance().gameMap;this.cube=o.packupCube(t.grid.x,t.grid.y),this.content.addChild(this.cube.node),this.state=1,this.anim.play("puzzle_star_jitter")},clearCallFunc:function(){this.callFunc=this.caller=null},playEnd:function(){this.callFunc&&this.callFunc.call(this.caller,this,this.state),1==this.state&&(this.state=2,this.anim.play("puzzle_jitter"))},removeSelf:function(){this.anim.stop(),a.instance().gameMap.unpackCube(this.cube),this.cubeNode=this.cube=null,o.remove(this,this.recovery)}}),cc._RF.pop()},{GameTools:"GameTools",N7UIEffectLayer:"N7UIEffectLayer",UIGameV2:"UIGameV2"}],magiccube_line:[function(t,e,i){cc._RF.push(e,"f96edsKOypLp68wBH34AyzV","magiccube_line"),t("n7"),t("N7Resource");var n=t("GameTools"),o=cc.Class({"extends":cc.Component,properties:{xian:{type:cc.Node,"default":null},point:{type:cc.Node,"default":null}},statics:{COLORS:[new cc.Color(252,212,84,255),new cc.Color(252,84,84,255),new cc.Color(68,151,240,255),new cc.Color(67,184,21,255),new cc.Color(140,47,240,255),new cc.Color(250,115,25,255)],LEN:550},onLoad:function(){if(!this.anim){this.anim=this.xian.getComponent(cc.Animation);var t=this;this.anim.on("finished",function(e){"mofang_line_go"==e.target.clip.name&&t.rayEnd()})}},play:function(t,e,i,n){this.node.zIndex=0,this.xian.active=!1,this.point&&(this.point.active=!1),this.ray=e,this.callFunc=i,this.caller=n,this.xian.scaleX=0,this.scale=e.len/o.LEN,this.node.scaleX=this.scale,this.scheduleOnce(function(){this.xian.active=!0,this.anim.play("mofang_line"),this.anim.playAdditive("mofang_line_go")},t)},rayEnd:function(){this.point&&(this.point.active=!0,this.point.scaleX=this.point.scaleY/this.scale,n.resetParticle(this.point)),this.callFunc&&(this.callFunc.call(this.caller,this.ray,this),this.callFunc=this.caller=this.ray=null)}});cc._RF.pop()},{GameTools:"GameTools",N7Resource:"N7Resource",n7:"n7"}],missile:[function(t,e,i){cc._RF.push(e,"af9736f3yZOAo6ZM+IRLXN0","missile");var n=t("UIGameV2"),o=t("GameTools"),a=cc.Class({"extends":cc.Component,properties:{missile:{type:cc.Node,"default":null},fire:{type:cc.Node,"default":null},tail:{type:t("AtlasAnimation"),"default":null}},statics:{speed:.06,UP:0,DOWN:1,LEFT:2,RIGHT:3,STEP:[[0,1],[0,-1],[-1,0],[1,0]],ANGLE:[90,270,0,180]},onLoad:function(){},init:function(t,e,i){this.anim||(this.anim=this.node.getComponent(cc.Animation)),this.fire.active=!1,this.node.active=!0;var s=n.instance().gameMap,c=s.getGridPos(e.x,e.y,!0);this.node.position=this.node.parent.convertToNodeSpaceAR(c),this.node.rotation=a.ANGLE[t];var r=0,l=0,h=0,u=0,d=null,f=a.STEP[t];for(var g in i){var p=i[g].datas.grid;if(h=p.x-e.x,u=p.y-e.y,h&&(r=h>0?1:-1),u&&(l=u>0?1:-1),f[0]==r&&f[1]==l){d=p;break}r=0,l=0}var _=12;d?_=Math.abs(h||u):d=cc.p(e.x+f[0]*_,e.y+f[1]*_);var m=s.getGridPos(d.x,d.y,!0);m=this.node.parent.convertToNodeSpaceAR(m);var v=_*a.speed,E=[cc.moveTo(v,m.x,m.y),cc.callFunc(function(){this.missile.active=this.fire.active=!1,this.tail&&this.tail.node.runAction(cc.fadeOut(.2)),this.callFunc.call(this.caller,this,null!=d,d),this.callFunc=this.caller=null},this)];this.action=cc.sequence(E),this.initEnd&&o.resetParticle(this.node),this.initEnd=!0},play:function(t,e,i){this.callFunc=e,this.caller=i,this.missile.active=!0,this.scheduleOnce(function(){this.fire.active=!0,this.tail&&(this.tail.node.runAction(cc.fadeIn(.1)),this.tail.play()),this.anim&&this.anim.play(),this.node.runAction(this.action)},t)}});cc._RF.pop()},{AtlasAnimation:"AtlasAnimation",GameTools:"GameTools",UIGameV2:"UIGameV2"}],n7:[function(t,e,i){cc._RF.push(e,"feafehA7qxFB6NOo6Urv0b0","n7");var n=function(){};n.clearMsg=function(){n.msg="",n.msgList=[]},n.msgList=[],n.msgFilter="",n.appendMsg=function(t){(""==n.msgFilter||t.indexOf(n.msgFilter)>=0)&&(n.msg?n.msg+="\n"+t:n.msg=t)},n.addMsg=function(t){n.msgList.push(t),n.appendMsg(t)},n.setMsgFilter=function(e){for(var i in n.msgFilter=e,n.msg=null,n.msgList)n.appendMsg(n.msgList[i]);t("GameEvent").EVENT_LOG()},n.log=function(e){n.showLog&&("[object String]"!=Object.prototype.toString.call(e)&&(e="[object] "+JSON.stringify(e)),n.addMsg(e),t("GameEvent").EVENT_LOG()),console.log(e)},n.info=function(t){n.log("[n7:info]"+t)},n.error=function(t){n.log("[n7:error]"+t)},n.platform=cc.sys.os,n.window=window||{},n.orgDesginOdds=(n.orgDesginWidth=1080)/(n.orgDesginHeight=1920),n.checkScreenOdds=function(t){return t.width/t.height>n.orgDesginOdds},n.desginWidth=n.orgDesginWidth,n.desginHeight=n.orgDesginHeight,n.isAndroid=!(!cc.sys.isNative||cc.sys.OS_ANDROID!=cc.sys.os||!window.jsb),n.isIOS=!(!cc.sys.isNative||cc.sys.OS_IOS!=cc.sys.os||!window.jsb),n.isAndroid?(n.log=function(t){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKWrapper","n7log","(Ljava/lang/String;)V",t)},console.log("use android log")):n.isIOS&&(n.log=function(t){jsb.reflection.callStaticMethod("SDKWrapper","n7log:",t)},console.log("use ios log")),n.callToApp=function(t,e,i,o){if(n.isAndroid){o||(o=""),i||(i="(S)V"),i=i.replace("S","Ljava/lang/String;"),n.log("__callToJava2:fname:"+e+":param:"+o+":fmt:"+i);var a=jsb.reflection.callStaticMethod(t,e,i,o);return void 0==a||a}if(n.isIOS){o||(o=""),i||(i="(S)V"),n.log("n7.callToApp:"+cc.sys.os+":"+e+" param:"+o);var s=jsb.reflection.callStaticMethod(t,e+":",o);return void 0==s||s}return n.error("n7.callToApp error:"+t+","+e),!1},n.isTS=0,n.isPhoneX=function(){return n._isPhoneX()||n.isTS},n._isPhoneX=function(){return n.renderHeight/n.renderWidth>1.85},n.canvasSize=function(e){var i,o;if(i=cc.director.getWinSizeInPixels().width,o=cc.director.getWinSizeInPixels().height,e||n.renderWidth!=i||n.renderHeight!=o){var a=cc.view.getFrameSize();if(n.log("n7 use director screen pixel size "+i+","+o),n.log("n7 use director frame size "+a.width+","+a.height),n.renderWidth=i,n.renderHeight=o,n.halfWidth=n.desginWidth/2,n.halfHeight=n.desginHeight/2,n.screenScale=n.renderHeight/n.desginHeight,n.log("n7 os:"+cc.sys.os+" pix:"+n.renderWidth+","+n.renderHeight),n.isPhoneX()){var s=n._isPhoneX(),c=n.isTS||0;n.ignorePhoneX||(c=s&&n.isTS?132+n.isTS:s?132:n.isTS),n.log("n7.canvasSize.isX: "+s+".isTS: "+n.isTS+".value: "+c),n.backupsize=cc.size(n.renderWidth,n.renderHeight),n.desginHeight=n.renderHeight-c,n.contentOffsetY=.25*-c}t("GameEvent").EVENT_CANVAS_RESIZE()}},window.location||(n.window.location=n.window.location||{},n.window.location.search=n.window.location.search||"",n.window.location.href=n.window.location.href||"");var o=null;n.log("EventTarget isNative:"+cc.sys.isNative);var a=cc.Node.prototype,s=a.dispatchEvent;a.dispatchEvent=function(e){e.type.indexOf("touch")>=0&&(!o&&(o=t("GameEvent")),o.EVENT_SYSTEM_TOUCH(e)),s.call(this,e)},e.exports=n,cc._RF.pop()},{GameEvent:"GameEvent"}],"overlayer.frag":[function(t,e,i){cc._RF.push(e,"6d4aa7YmVdChq/U5emWRAA5","overlayer.frag"),e.exports="\n#ifdef GL_ES\nprecision lowp float;\n#endif\nuniform float r;\nuniform float g;\nuniform float b;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nfloat getColor(float a, float b) {\n    if (a \x3c\x3d 0.5) {\n        return (a * b) / 0.5;\n    }\n    return 1.0 - ((1. - a) * (1. - b)) / 0.5;\n}\nvoid main()\n{\n    vec4 c \x3d texture2D(CC_Texture0, v_texCoord);\n    gl_FragColor \x3d vec4(getColor(c.r, r),getColor(c.g, g),getColor(c.b, b), c.a);\n}\n",cc._RF.pop()},{}],"overlayer.vert":[function(t,e,i){cc._RF.push(e,"ebe5eZC/ydEEqoRvooZIAYR","overlayer.vert"),e.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d CC_PMatrix * a_position;\n    v_fragmentColor \x3d a_color; \n    v_texCoord \x3d a_texCoord; \n}\n",cc._RF.pop()},{}],"polyglot.min":[function(t,e,i){cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)};(function(t,o){"function"==typeof define&&define.amd?define([],function(){return o(t)}):"object"==(void 0===i?"undefined":n(i))?e.exports=o(t):t.Polyglot=o(t)})(void 0,function(t){function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||a}function i(t,e,i){var n;return null!=i&&t?function(t){return t.replace(/^\s+|\s+$/g,"")}((n=t.split(s))[o(e,i)]||n[0]):t}function o(t,e){return c[function(t){var e=function(t){var e,i,n,o={};for(e in t)if(t.hasOwnProperty(e))for(n in i=t[e])o[i[n]]=e;return o}(r);return e[t]||e.en}(t)](e)}function a(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var i;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],e&&(o=e+"."+o),"object"==(void 0===i?"undefined":n(i))?this.extend(i,o):this.phrases[o]=i)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,o;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof n&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),o=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(o=i(n,this.currentLocale,e.smart_count),e)),o},e.prototype.has=function(t){return t in this.phrases};var s="||||",c={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},r={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e}),cc._RF.pop()},{}],puzzle_line:[function(t,e,i){cc._RF.push(e,"52147XyYjxOZb/83tXfrGxA","puzzle_line");var n=cc.Class({"extends":cc.Component,properties:{line:{type:t("AtlasAnimation"),"default":null},point:{type:cc.Node,"default":null},_pause:!0},statics:{COLORS:[new cc.Color(252,212,84,255),new cc.Color(252,84,84,255),new cc.Color(68,151,240,255),new cc.Color(67,184,21,255),new cc.Color(140,47,240,255),new cc.Color(250,115,25,255)]},setColor:function(t){n.colorCount||(n.colorCount=n.COLORS.length),t>=0&&t<n.colorCount&&this.line&&(this.line.color=this.point.color=n.COLORS[t]),this.setLine(0)},play:function(t,e,i,n){this.node.zIndex=0,this.ray=e,e.len=e.len/this.node.scale,this.step=e.len/220,this.callFunc=i,this.caller=n,this.line.node.height=0,this.scheduleOnce(function(){this._pause=!1},t)},rayEnd:function(){this.callFunc&&(this.callFunc.call(this.caller,this.ray,this),this.callFunc=this.caller=this.ray=null)},setLine:function(t){this.line.node.height=this.point.x=t},update:function(t){this._pause||(this.setLine(this.line.node.height+1E3*t*this.step),this.line.node.height>=this.ray.len&&(this.setLine(this.ray.len),this._pause=!0,this.rayEnd()))}});cc._RF.pop()},{AtlasAnimation:"AtlasAnimation"}],sdk_fb:[function(t,e,i){cc._RF.push(e,"cfbe4bGVctBSbJOZkr4MpKe","sdk_fb");var n=t("n7");e.exports=function(){this.pf="fb",this.read=function(e,i){var o=i,a={},s=[];for(var c in o)s.push(c);var r=t("MathUtils");r.delArr(s,"nkname"),r.delArr(s,"icon"),this.nkname=a.nkname=FBInstant.player.getName(),this.uicon=a.icon=FBInstant.player.getPhoto(),this.playerid=a.pid=FBInstant.player.getID();var l=t("TDLog");l.Event("read_data",{c:1}),FBInstant.player.getDataAsync(s).then(function(i){l.Event("read_data_ok",{c:1});var c=void 0;for(var r in s)c=s[r],a[c]=void 0!=i[c]?i[c]:o[c].def;l.Event("read_data_ready",{c:1}),n.log("sdk_fb._Read_:"+JSON.stringify(a)),t("UserDataV2").init(a,a.pid,"fb"),e&&e()})},this.save=function(t,e){n.log("sdk_fb._FBSave_:"+JSON.stringify(t)),FBInstant.player.setDataAsync(t),e&&e([{code:0}])},this.icon=function(t,e){var i=new Image;i.onload=function(){var t=new cc.Texture2D;t.initWithElement(i),t.handleLoadedTexture(),e(new cc.SpriteFrame(t))},i.crossOrigin="anonymous",i.src=t},this.loadInterstitialAd=function(){var e=1==t("GameConfig").get("package",0)?"330846604433879_330855134433026":"2190397377878009_2190398417877905",i=this;n.log("loadInterstitialAd:"+e);var o=null;FBInstant.getInterstitialAdAsync(e).then(function(t){return(o=t).loadAsync()}).then(function(){n.log("Interstitial preloaded"),i.preloadedInterstitial=o})["catch"](function(t){n.error("Interstitial failed to preload: "+t.message)})},this.interstitialAd=function(){var t=this;this.preloadedInterstitial?this.preloadedInterstitial.showAsync().then(function(){n.log("Interstitial ad finished successfully"),t.loadInterstitialAd()})["catch"](function(e){n.error(e.message),t.loadInterstitialAd()}):this.loadInterstitialAd()},this.getAdId=function(e){var i=t("GameConfig").get("package",0),n="PACK"+i;return this[n]||(0==i&&(this[n]={"default":"2190397377878009_2190398451211235"}),1==i&&(this[n]={100:"330846604433879_374878650030674",101:"330846604433879_330854884433051",102:"330846604433879_330855071099699",103:"330846604433879_330854124433127",104:"330846604433879_330854817766391",105:"330846604433879_330855141099692",106:"330846604433879_374879583363914",108:"330846604433879_330854194433120",110:"330846604433879_374879113363961",111:"330846604433879_374878093364063",112:"330846604433879_374879270030612","default":"330846604433879_374879486697257"})),this[n][e]?this[n][e]:this[n]["default"]},this.__ad=function(e,i){var o=this.getAdId(e),a=null;n.log("rewarded video id:"+o),FBInstant.getRewardedVideoAsync(o).then(function(t){return n.log("Load the Ad asynchronously"),(a=t).loadAsync()}).then(function(){n.log("Rewarded video preloaded");var o=t("TDLog");o.Event("AD_RewardedVideo",{place:e}),a.showAsync().then(function(){n.log("Rewarded video watched successfully"),o.Event("AD_RewardedVideo_OK",{place:e}),i&&i({code:0})})["catch"](function(t){n.log("Rewarded video watched error"),i&&i({code:-100,msg:t.message})})})["catch"](function(t){n.error("Rewarded video failed to preload: "+t.message),i&&i({code:-101,msg:t.message})})},this.__playAd=function(e){var i=t("TDLog");i.Event("AD_RewardedVideo",{place:type}),this.preloadedRewardedVideo.showAsync().then(function(){n.log("Rewarded video watched successfully"),i.Event("AD_RewardedVideo_OK",{place:type}),e&&e({code:0})})["catch"](function(t){e&&e({code:-100,msg:t.message})}),this.preloadedRewardedVideo=void 0},this.__pay=function(t,e){var i=this;FBInstant.payments.purchaseAsync({productID:t,developerPayload:t}).then(function(t){n.log(t),t&&i.pruchases(),e&&e({code:t?1:-101})})},this.pruchases=function(){var t=this;FBInstant.payments.getPurchasesAsync().then(function(e){n.log(e),e&&e.length>0&&(t._purchases_=e,t.showPurchaseDialog())})},this.onMainShowed=function(e){FBInstant.getSupportedAPIs().includes("getRewardedVideoAsync")?(n.log("FBInstant can [getRewardedVideoAsync]"),this.ad=this.__ad,t("GameEvent").EVENT_ADS_CHG(!0)):n.error("FBInstant not suported api [getRewardedVideoAsync]");t("GameConfig").get("package",0),t("UserLogic").get("lev")},this.canSubscribe=function(e){n.log("canSubscribeBotAsync"),FBInstant.player.canSubscribeBotAsync().then(function(i){n.log("canSubscribeBotAsync:"+i),i&&t("GameEvent").EVENT_OPEN_DIALOG("dialog_instant_bot"),e&&e(i)})},this.loadingui_showed=function(){},this.subscribe=function(e){t("TDLog").Event("subscribe"),FBInstant.player.subscribeBotAsync().then(function(){e({code:0}),t("TDLog").Event("subscribe_ok")})["catch"](function(t){e({code:-100})})},this.scoreUpdate=function(t){FBInstant.getLeaderboardAsync("xx_level_board").then(function(e){n.log("scoreUpdate:"+e.getName());var i={l:t.level};return e.setScoreAsync(t.level,JSON.stringify(i))}).then(function(){return n.log("leaderboard ok!")})["catch"](function(t){return console.error(t)})},this.getRankList=function(t,e){var i={rank_index:t,myrank:!1};this._LOADBOARDCNT_=0,this._LOADBOARDFO_=e,FBInstant.getLeaderboardAsync("xx_level_board").then(function(t){return t.getConnectedPlayerEntriesAsync()}).then(function(t){for(var n=void 0,o=0;o<t.length;o++)n=t[o].getPlayer(),i[o]={n:n.getName(),i:n.getPhoto(),l:t[o].getScore(),pid:n.getID()};i.length=t.length,e&&e(i)}),this.__loadBoard(i)},this._LOADBOARDFO_=void 0,this._LOADBOARDCNT_=0,this.__loadBoard=function(t){++this._LOADBOARDCNT_>1&&(this._LOADBOARDFO_&&this._LOADBOARDFO_(t),this._LOADBOARDFO_=void 0)},this.showPurchaseDialog=function(){var e=this._purchases_;if(e&&!(e.length<1)){var i=e.pop(),o=this.price(i.productID);o?FBInstant.payments.consumePurchaseAsync(i.productID).then(function(){var e=o.gold;e&&t("UserLogic").award([{k:"gold",v:o.gold}],i.productID),e?t("GameEvent").EVENT_MESSAGEBOX("pay:"+i.productID+":ok!"):n.error("sdk_fb:pruchases:whatfuck:"+Json.stringify(o))})["catch"](function(t){}):console.error("sdk_fb:pruchases:notfind:"+i.productID)}},this.__pushIcon=function(t){FBInstant.createShortcutAsync().then(function(){t&&t({code:0})})["catch"](function(e){t&&t({code:-1,msg:e})})},this.share=function(e,i,n){t("TDLog").Event("share",{id:e.id}),1==e.type||2==e.type?(e.fo=function(t,n){this.__share(e,i,n)}.bind(this),2==e.type&&t("GameEvent").EVENT_OPEN_DIALOG({name:"dialog_share_select",param:e})):this.__share(e,i,n)},this.invate=function(t,e){FBInstant.context.chooseAsync({filters:["NEW_CONTEXT_ONLY"],minSize:1}).then(function(){FBInstant.updateAsync({action:"CUSTOM",cta:t.title,image:t.json,text:{"default":t.desc},template:"VILLAGE_INVASION",data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){})})["catch"](function(t){e&&e({code:-1001,msg:t?t.message:"-1001"})})},this.__share=function(e,i,o){var a=e.title,s=e.img;t("N7Resource").instance().loadJson(s,function(t){FBInstant.shareAsync({intent:"INVITE",image:t.data,text:a,data:{playerid:this.playerid,nkname:this.nkname}}).then(function(){i&&i({code:0}),o&&o({code:0})})["catch"](function(t){n.error("shareAsync:catch:"+t.message),i&&i({code:-1001,msg:t.message}),o&&o({code:-1001,msg:t.message})})},this)},this.getSdkData=function(t){return this.SDKData||(this.SDKData={},this.SDKData.delShare=[101],this.SDKData.randGift=!1,this.SDKData.dispelGift=!1,this.SDKData.flyItem=1,this.SDKData.replaceShare={107:"109"}),this.SDKData[t]}},cc._RF.pop()},{GameConfig:"GameConfig",GameEvent:"GameEvent",GameLogic:"GameLogic",MathUtils:"MathUtils",N7Resource:"N7Resource",TDLog:"TDLog",UserDataV2:"UserDataV2",UserLogic:"UserLogic",n7:"n7"}],sdk_n7:[function(t,e,i){cc._RF.push(e,"0585fAIiM9DvLd9ETEnOuB5","sdk_n7");var n=t("n7"),o=(t("AdsManager"),t("GameEvent"));e.exports=function(){this.pf="n7",this.getOpenId=function(){return t("SdkIns").urlp("username")||(n.window.n7_username?n.window.n7_username:t("AccessUD").pid())},this.onMainShowed=function(){this.ad=this.__ad,window.AdsManager&&window.AdsManager.startPreLoad()},this.__ad=function(t,e){var i=this;window.AdsManager.showRewardedVideo(function(){e({code:0}),i.ad=i.__ad,o.EVENT_ADS_CHG(!0)},function(){e({code:-100})})},this.pushIcon=function(t){o.EVENT_MESSAGEBOX("push icon","",3,function(){t&&t({code:0})})},this.share=function(t,e){o.EVENT_MESSAGEBOX("share:"+t.id,"",3,function(){e({code:0})})},this.pay1=function(e,i){var n={extend:(e=e.data).attach};t("FamNet").unified_send("Order/payed_gp",n,function(t){i&&i(t)})},this.price1=function(t){return this._PRICE_||(this._PRICE_={},this._PRICE_.currency={t:"??"},this._PRICE_.gift_gd_1={price:12,awd:{gold:1600,PreWar_Tnt:1}},this._PRICE_.gift_gd_2={price:45,awd:{gold:5E3,Drill:1,ResetCube:1,BigLives:1,PreWar_Rotor:1,PreWar_Tnt:1,PreWar_Cube:1}},this._PRICE_.gift_gd_3={price:108,awd:{gold:15E3,Drill:2,ResetCube:2,BigLives:3,PreWar_Rotor:2,PreWar_Tnt:2,PreWar_Cube:2}},this._PRICE_.gift_gd_4={price:218,awd:{gold:27E3,Drill:5,ResetCube:5,unheart:2,PreWar_Rotor:5,PreWar_Tnt:5,PreWar_Cube:5}},this._PRICE_.gift_gd_5={price:328,awd:{gold:4E4,Drill:10,ResetCube:10,unheart:4,PreWar_Rotor:10,PreWar_Tnt:10,PreWar_Cube:10}},this._PRICE_.gift_gd_6={price:648,awd:{gold:8E4,Drill:25,ResetCube:25,unheart:6,PreWar_Rotor:25,PreWar_Tnt:25,PreWar_Cube:25}},this._PRICE_.shop_cp_gold_1={price:6,awd:{12:650}},this._PRICE_.shop_cp_gold_2={price:12,awd:{12:1500}},this._PRICE_.shop_cp_gold_3={price:30,awd:{12:5E3}},this._PRICE_.shop_cp_gold_4={price:68,awd:{12:1E4}},this._PRICE_.shop_cp_gold_5={price:128,awd:{12:2E4}},this._PRICE_.shop_cp_gold_6={price:258,awd:{12:4E4}},this._PRICE_.shop_cp_gold_7={price:518,awd:{12:8E4}},this._PRICE_.shop_cp_sign_1={price:1200,oldprice:12E3,awd:{gold:2900,TinyLives:2,Rotor:2,silver:1E4,BigLives:2,Drill:2}},this._PRICE_.shop_cp_sign_2={price:1200,oldprice:12E3,awd:{gold:2900,TinyLives:2,Vacuum:2,silver:1E4,BigLives:2,ResetCube:2}},this._PRICE_.shop_cp_sign_3={price:1200,oldprice:12E3,awd:{gold:2900,TinyLives:2,Drill:2,silver:1E4,BigLives:2,Vacuum:2}}),this._PRICE_[t]},this.getSdkData=function(t){return this.SDKData||(this.SDKData={},this.SDKData.cumshare=!0,this.SDKData.delShare=[101],this.SDKData.randGift=!1,this.SDKData.dispelGift=!1,this.SDKData.flyItem=1),this.SDKData[t]},this.logout=function(){n.window.location.href=n.window.location},this.chgStep=function(){return{50:-4,80:-5}},this.subscribe=function(t){t({code:0})}},cc._RF.pop()},{AccessUD:"AccessUD",FamNet:"FamNet",GameEvent:"GameEvent",SdkIns:"SdkIns",n7:"n7"}],ts:[function(t,e,i){cc._RF.push(e,"13f52W8wnpNCroOWpf4KKht","ts"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.ts={},cc._RF.pop()},{}],tw:[function(t,e,i){cc._RF.push(e,"6eca419XJBAZKJIInfd9Qh7","tw"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.tw={login_hello:"\u4f60\u865f",login_bye:"\u63b0\u63b0"},cc._RF.pop()},{}]},{},["UIMainPage","UIMainPageBtn","UIMainV2","UIPage","UIPageContentSize","AccessUD","UserDataV2","AchieveLogic","ActivityLogic","ChestRandLogic","GameLogic","GuideLogic","GuildLogic","ItemsLogic","ReChargeLogic","ShareLogic","UserLogic","WorkData","SignByDay","SignByTimes","SignLogic","FristUILoadingBar","LogicActiveSale","MainPageCtr","NumberChange","ShareBtn","UIAchieve","UIAchieveItem","UIActiveOpenDialog","UIAddDesktop","UIAddingSteps","UIAds","UIAdsItem","UIAssault","UIAssaultNotice","UIAward","UIAwardIcon","UIBackgroundLock","UIBackpack","UIBattleShare","UIBattleStart","UIBuyHeart","UIBuyProp","UIChangeName","UIChapter","UIChat","UIChatWorld","UIChoosePages","UIClubContend","UIClubTreasure","UIDial","UIDialogPages","UIFAQ","UIFlyGold","UIGameBalance","UIGameChapter","UIGameComplete","UIGameGuide","UIGateEntrance","UIGateFailedNotice","UIGeneralAward","UIGeneral_Rule","UIGetItem","UIGift","UIGuide","UIGuideData","UIHelpIcon","UIHelp_base_content","UIHelp_content1","UIHelp_content2","UIHelp_content3","UIHelp_page","UIInstantBot","UIInvite","UIInviteGift","UIItemHint","UILogin","UIMessageBox","UIMsgBox","UIOption","UIPageBg","UIRankList","UIRecharge","UIReconfirmBox","UISetup","UISevenSign","UIShareSelect","UISignUp","UIStarLoading","UIThirty_days_box","UITopBar","UITopbarFly","UITotalAds","UITournament","UITryPlay","UITryPlayItem","UIUnhaveClub","UIWhetherExitGame","UIChangeBadge","UIClubCreate","UIClubInformation","UIClubListview","UIClubLookUp","UIClubMsg","UIGameClub","UIMyClubMb","UIViewMenuBox","UIMailMsg","UIMailbox","UIMailbox_power","UIMailbox_private","UIMailbox_system","UIRankingList","UIRankingList_friend","UIRankingList_guild","UIRankingList_palyer","UIGoldShop","UIShop","UIShopGold","UIShopProp","ActionCommand","ActionLock","GameMapCube","HelpFlag","Dispel","GBlock","GMapData","GameMapV2","MapTarget","Prop","RandTile","ProcessorGameV2","UICubeSender","UIGameBottomV2","UIGameCube","UIGameGoal","UIGameMapV2","UIGameSingleItem","UIGameTips","UIGameTopbarV2","UIGameUseItem","UIGameV2","UIMapEdge","UIMapEdge_dd","UIPackCube","UIPreloadData","UITopGold","UIAddStep","UIBalloon","UIBarrel","UIBlock","UIBowling","UIBox","UICage","UICandy","UICannon","UICannonBase","UIChain","UIColorLamp","UICopter","UICrayon","UICube","UICubeAnim","UIDogToy","UIDolls","UIEgg","UIJelly","UILego","UILight","UIMagicWater","UIMartlight","UIMole","UIMoveBomb","UIMussel","UINest","UIPenguin","UIPinWheel","UIPump","UIPuzzle","UIRocker","UISheep","UIShell","UISoap","UISuger","UITeleport","UITennis","UIToaster","UIToys","UIVirus","UIWashing","dialog_balance","dialog_balancefirework","dialog_disconnet","dialog_log","dialog_nowloading","cake_mix_highlight","effect_Doublebomb","effect_back","effect_balloon","effect_base","effect_bomb","effect_bowlingball","effect_brick","effect_cake_particle","effect_crayon","effect_doublecube","effect_firework","effect_freeze","effect_goal_fly","effect_hitbase","effect_item_mix","effect_lantern","effect_level_up","effect_magiccube","effect_mergefly","effect_missile","effect_move","effect_rubber","effect_scorefly","effect_shotgun","effect_sleeve","effect_woodebox","magiccube_cube","magiccube_line","missile","puzzle_line","goal_ball","goal_base","goal_cube","goal_duck","goal_tennis","goal_toast","item_car","item_drill","item_ufo","UIHUProgress","UIHUVerInfo","UIHotUpdate","UICloudAni","UILoadProgress","UILoadingTips","SdkIns","sdk_fb","sdk_n7","FamNet","UIDogAward","UIDogBase","UIDogHead","UIHorse","GameCommon","GameEvent","GameParam","JsonConfig","JsonMetaCache","N7Cache","N7HotUpdate","N7MusicV2","N7Resource","N7Sound","N7SoundV2","AtlasAnimation","AtlasText","CircleLayout","FillBackground","JAction","JProgressBar","N7AsynchList","N7CheckRes","N7CircleBar","N7ParticleSystem","N7SpriteShader","N7UISkin","N7UISkinData","ProcessorRoot","SpawSprite","UIDialog","UIDialogFullScreenBg","UILayer","UIPopBase","UITab","UITabPage","allcolor","N7FitScreen","N7UIEffectLayer","N7UIFlyLayer","N7UILayer","N7UIManager","CoolArray","LinkedList","Frame","FBLog","GALog","TDLog","TalkDataLog","n7","HttpRequest","N7HttpToJava","N7Jsonp","ErrorLog","GameConfig","GameTools","JBase64","JMD5","MathUtils","ShaderUtils","StringBuilder","StringUtils","cn","en","fr","ts","tw","blur.frag.bak","blur.frag","blur.vert","color.frag","color.vert","gray.frag","gray.vert","overlayer.frag","overlayer.vert","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min","AdsManager"]);
var hutafg = (window.HUTAFG != null) ? (window.HUTAFG) : ((parent.window.HUTAFG != null) ? (parent.window.HUTAFG) : null);
var showCount=0;function showTT(){showCount++;if(showCount==1){showCount=0;if(hutafg){hutafg.playAfg();}else{window.parent.postMessage("show_afg|","*")}}}

function showTTReward(){if(hutafg){return hutafg&&hutafg.playRewardedAfg();}else{
    return new Promise(function(resolve,reject){try{window.parent.postMessage("show_afg|","*")}catch(error){console.error("show_afg",error)}resolve&&resolve()})}};
