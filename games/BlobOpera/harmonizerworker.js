!function(e){var t={};function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(n,u,function(t){return e[t]}.bind(null,u));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/blob-opera/",r(r.s=44)}({12:function(e,t,r){"use strict";function n(){return"?v=5"}r.d(t,"a",(function(){return n}))},14:function(e,t,r){"use strict";function n(){return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}r.d(t,"a",(function(){return n}))},44:function(e,t,r){"use strict";r.r(t);var n,u=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,r,u=void 0!==(e=e||{})?e:{};u.ready=new Promise((function(e,n){t=e,r=n}));var a,i={};for(a in u)u.hasOwnProperty(a)&&(i[a]=u[a]);var s,o=[],l="";l=self.location.href,n&&(l=n),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)},u.print||console.log.bind(console);var c,f,p=u.printErr||console.warn.bind(console);for(a in i)i.hasOwnProperty(a)&&(u[a]=i[a]);i=null,u.arguments&&(o=u.arguments),u.thisProgram&&u.thisProgram,u.quit&&u.quit,u.wasmBinary&&(c=u.wasmBinary),u.noExitRuntime&&u.noExitRuntime,"object"!=typeof WebAssembly&&O("no native wasm support detected");var h=!1;function T(e){var t,r=u["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||O("Assertion failed: "+t),r}function d(e,t,r,n,u){var a={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);!function(e,t,r){!function(e,t,r,n){if(!(n>0))return 0;for(var u=r+n-1,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343){var s=e.charCodeAt(++a);i=65536+((1023&i)<<10)|1023&s}if(i<=127){if(r>=u)break;t[r++]=i}else if(i<=2047){if(r+1>=u)break;t[r++]=192|i>>6,t[r++]=128|63&i}else if(i<=65535){if(r+2>=u)break;t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|63&i}else{if(r+3>=u)break;t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|63&i}}t[r]=0}(e,y,t,r)}(e,t=K(r),r)}return t},array:function(e){var t=K(e.length);return function(e,t){m.set(e,t)}(e,t),t}},i=T(e),s=[],o=0;if(n)for(var l=0;l<n.length;l++){var c=a[r[l]];c?(0===o&&(o=J()),s[l]=c(n[l])):s[l]=n[l]}var f=i.apply(null,s);return f=function(e){return"string"===t?(r=e)?function(e,t,r){for(var n=t+r,u=t;e[u]&&!(u>=n);)++u;if(u-t>16&&e.subarray&&g)return g.decode(e.subarray(t,u));for(var a="";t<u;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var o=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|o:(7&i)<<18|s<<12|o<<6|63&e[t++])<65536)a+=String.fromCharCode(i);else{var l=i-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a}(y,r,n):"":"boolean"===t?Boolean(e):e;var r,n}(f),0!==o&&Y(o),f}var F,m,y,v,g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e){F=e,u.HEAP8=m=new Int8Array(e),u.HEAP16=new Int16Array(e),u.HEAP32=v=new Int32Array(e),u.HEAPU8=y=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAPU32=new Uint32Array(e),u.HEAPF32=new Float32Array(e),u.HEAPF64=new Float64Array(e)}u.INITIAL_MEMORY;var w,A=[],_=[],R=[],P=[];_.push({func:function(){Q()}});var S=0,E=null,I=null;function O(e){u.onAbort&&u.onAbort(e),p(e+=""),h=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function x(e){return t=e,r="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(r):0===t.indexOf(r);var t,r}u.preloadedImages={},u.preloadedAudios={};var k,M="harmonizermodule.wasm";function U(e){try{if(e==M&&c)return new Uint8Array(c);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}catch(e){O(e)}}function H(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?w.get(r)():w.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(u)}}x(M)||(k=M,M=u.locateFile?u.locateFile(k,l):l+k);var N=0,j=4,D=8,W=12,C=13,z=16;function B(e){this.excPtr=e,this.ptr=e-z,this.set_type=function(e){v[this.ptr+D>>2]=e},this.get_type=function(){return v[this.ptr+D>>2]},this.set_destructor=function(e){v[this.ptr+N>>2]=e},this.get_destructor=function(){return v[this.ptr+N>>2]},this.set_refcount=function(e){v[this.ptr+j>>2]=e},this.set_caught=function(e){e=e?1:0,m[this.ptr+W>>0]=e},this.get_caught=function(){return 0!=m[this.ptr+W>>0]},this.set_rethrown=function(e){e=e?1:0,m[this.ptr+C>>0]=e},this.get_rethrown=function(){return 0!=m[this.ptr+C>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=v[this.ptr+j>>2];v[this.ptr+j>>2]=e+1},this.release_ref=function(){var e=v[this.ptr+j>>2];return v[this.ptr+j>>2]=e-1,1===e}}function L(e){try{return f.grow(e-F.byteLength+65535>>>16),b(f.buffer),1}catch(e){}}var q,G={b:function(e){return X(e+z)+z},a:function(e,t,r){throw new B(e).init(t,r),e},e:function(){O()},c:function(e,t,r){y.copyWithin(e,t,t+r)},d:function(e){e>>>=0;var t=y.length;if(e>2147483648)return!1;for(var r,n,u=1;u<=4;u*=2){var a=t*(1+.2/u);if(a=Math.min(a,e+100663296),L(Math.min(2147483648,((r=Math.max(16777216,e,a))%(n=65536)>0&&(r+=n-r%n),r))))return!0}return!1}},Q=(function(){var e={a:G};function t(e,t){var r=e.exports;u.asm=r,b((f=u.asm.f).buffer),w=u.asm.m,function(e){if(S--,u.monitorRunDependencies&&u.monitorRunDependencies(S),0==S&&(null!==E&&(clearInterval(E),E=null),I)){var t=I;I=null,t()}}()}function n(e){t(e.instance)}function a(t){return(c||"function"!=typeof fetch?Promise.resolve().then((function(){return U(M)})):fetch(M,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+M+"'";return e.arrayBuffer()})).catch((function(){return U(M)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),O(e)}))}if(S++,u.monitorRunDependencies&&u.monitorRunDependencies(S),u.instantiateWasm)try{return u.instantiateWasm(e,t)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}(c||"function"!=typeof WebAssembly.instantiateStreaming||x(M)||"function"!=typeof fetch?a(n):fetch(M,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}(),u.___wasm_call_ctors=function(){return(Q=u.___wasm_call_ctors=u.asm.g).apply(null,arguments)}),X=(u._createNet=function(){return(u._createNet=u.asm.h).apply(null,arguments)},u._free=function(){return(u._free=u.asm.i).apply(null,arguments)},u._netUploadQuantizedData=function(){return(u._netUploadQuantizedData=u.asm.j).apply(null,arguments)},u._netForward=function(){return(u._netForward=u.asm.k).apply(null,arguments)},u._malloc=function(){return(X=u._malloc=u.asm.l).apply(null,arguments)}),J=u.stackSave=function(){return(J=u.stackSave=u.asm.n).apply(null,arguments)},Y=u.stackRestore=function(){return(Y=u.stackRestore=u.asm.o).apply(null,arguments)},K=u.stackAlloc=function(){return(K=u.stackAlloc=u.asm.p).apply(null,arguments)};function V(e){function r(){q||(q=!0,u.calledRun=!0,h||(H(_),H(R),t(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),function(){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)e=u.postRun.shift(),P.unshift(e);var e;H(P)}()))}e=e||o,S>0||(function(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)e=u.preRun.shift(),A.unshift(e);var e;H(A)}(),S>0||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),r()}),1)):r()))}if(u.ccall=d,u.cwrap=function(e,t,r,n){var u=(r=r||[]).every((function(e){return"number"===e}));return"string"!==t&&u&&!n?T(e):function(){return d(e,t,r,arguments)}},I=function e(){q||V(),q||(I=e)},u.run=V,u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return V(),e.ready}),a=r(7),i=r(8),s=r(14),o=r(12),l={0:"|",1:"(64,True)",2:"(67,True)",3:"(60,True)",4:"(69,True)",5:"(72,True)",6:"(62,True)",7:"(55,True)",8:"(57,True)",9:"(52,True)",10:"(59,True)",11:"(71,True)",12:"(74,True)",13:"(48,True)",14:"(76,True)",15:"(65,True)",16:"(64,False)",17:"(60,False)",18:"(67,False)",19:"(50,True)",20:"(53,True)",21:"(62,False)",22:"(69,False)",23:"(45,True)",24:"(57,False)",25:"(55,False)",26:"(72,False)",27:"(59,False)",28:"(52,False)",29:"(71,False)",30:"(65,False)",31:"(43,True)",32:"(68,True)",33:"(74,False)",34:"(48,False)",35:"(50,False)",36:"(53,False)",37:"(77,True)",38:"(76,False)",39:"(79,True)",40:"(56,True)",41:"(47,True)",42:"(66,True)",43:"(61,True)",44:"(45,False)",45:"(54,True)",46:"(47,False)",47:"(40,True)",48:"(43,False)",49:"(68,False)",50:"(66,False)",51:"(77,False)",52:"(56,False)",53:"(41,True)",54:"(36,True)",55:"(81,True)",56:"(54,False)",57:"(79,False)",58:"(58,True)",59:"(49,True)",60:"(70,True)",61:"(61,False)",62:"(40,False)",63:"(44,True)",64:"(38,True)",65:"(51,True)",66:"START",67:"END",68:"(58,False)",69:"(41,False)",70:"(63,True)",71:"(78,True)",72:"(73,True)",73:"(70,False)",74:"(49,False)",75:"(81,False)",76:"(42,True)",77:"(33,True)",78:"(38,False)",79:"(44,False)",80:"(51,False)",81:"(63,False)",82:"(36,False)",83:"(46,True)",84:"(83,True)",85:"(78,False)",86:"(73,False)",87:"(75,True)",88:"(42,False)",89:"(84,True)",90:"(46,False)",91:"(80,True)",92:"(83,False)",93:"(35,True)",94:"(33,False)",95:"(75,False)",96:"(39,True)",97:"(84,False)",98:"(31,True)",99:"(35,False)",100:"(37,True)",101:"(80,False)",102:"(39,False)",103:"(37,False)",104:"(82,True)",105:"(31,False)",106:"(82,False)"},c={"|":0,"(64,True)":1,"(67,True)":2,"(60,True)":3,"(69,True)":4,"(72,True)":5,"(62,True)":6,"(55,True)":7,"(57,True)":8,"(52,True)":9,"(59,True)":10,"(71,True)":11,"(74,True)":12,"(48,True)":13,"(76,True)":14,"(65,True)":15,"(64,False)":16,"(60,False)":17,"(67,False)":18,"(50,True)":19,"(53,True)":20,"(62,False)":21,"(69,False)":22,"(45,True)":23,"(57,False)":24,"(55,False)":25,"(72,False)":26,"(59,False)":27,"(52,False)":28,"(71,False)":29,"(65,False)":30,"(43,True)":31,"(68,True)":32,"(74,False)":33,"(48,False)":34,"(50,False)":35,"(53,False)":36,"(77,True)":37,"(76,False)":38,"(79,True)":39,"(56,True)":40,"(47,True)":41,"(66,True)":42,"(61,True)":43,"(45,False)":44,"(54,True)":45,"(47,False)":46,"(40,True)":47,"(43,False)":48,"(68,False)":49,"(66,False)":50,"(77,False)":51,"(56,False)":52,"(41,True)":53,"(36,True)":54,"(81,True)":55,"(54,False)":56,"(79,False)":57,"(58,True)":58,"(49,True)":59,"(70,True)":60,"(61,False)":61,"(40,False)":62,"(44,True)":63,"(38,True)":64,"(51,True)":65,START:66,END:67,"(58,False)":68,"(41,False)":69,"(63,True)":70,"(78,True)":71,"(73,True)":72,"(70,False)":73,"(49,False)":74,"(81,False)":75,"(42,True)":76,"(33,True)":77,"(38,False)":78,"(44,False)":79,"(51,False)":80,"(63,False)":81,"(36,False)":82,"(46,True)":83,"(83,True)":84,"(78,False)":85,"(73,False)":86,"(75,True)":87,"(42,False)":88,"(84,True)":89,"(46,False)":90,"(80,True)":91,"(83,False)":92,"(35,True)":93,"(33,False)":94,"(75,False)":95,"(39,True)":96,"(84,False)":97,"(31,True)":98,"(35,False)":99,"(37,True)":100,"(80,False)":101,"(39,False)":102,"(37,False)":103,"(82,True)":104,"(31,False)":105,"(82,False)":106};function f(e){for(var t=-99999999,r=-1,n=0;n<e.length;++n)e[n]>t&&(t=e[n],r=n);return r}function p(e){return{midiNote:parseInt(e.split(",")[0].substring(1),10),tie:"True"===e.split(",")[1].slice(0,-1)}}function h(e,t){return c["("+e+","+(t?"True":"False")+")"]}var T=null,d=null,F=Object(s.a)();function m(e,t){for(var r=0;r<e.length;++r)e[r]=t}Promise.all([u({locateFile:function(e,t){return e+=Object(o.a)(),F?e.replace(".wasm","-simd.wasm"):e}}),Object(i.a)("harmonizerweights.bin")]).then((function(e){T=e[0],d=new Uint8Array(e[1]),(y=new v(T,d)).step(c.START),postMessage({type:"Loaded"})}));var y=null,v=function(){function e(e,t){this.module=e,this.netPointer=this.module._createNet(107,32,256,107);for(var r=this.module._malloc(t.length),n=this.module.HEAPU8.subarray(r,r+t.length),u=0;u<t.length;++u)n[u]=t[u];this.module._netUploadQuantizedData(this.netPointer,r),this.hs=new a.a(this.module,512),this.cs=new a.a(this.module,512),this.output=new a.a(this.module,107),m(this.hs.getArray(),0),m(this.cs.getArray(),0),m(this.output.getArray(),0)}return e.prototype.step=function(e){this.module._netForward(this.netPointer,e,this.hs.pointer,this.cs.pointer,this.output.pointer,this.hs.pointer,this.cs.pointer)},e}();function g(){for(var e=[],t=0;t<3;++t){var r=y.output.getArray().slice(0);r[c["|"]]=-999999,r[c.START]=-99999999,r[c.END]=-99999999;var n=f(r),u=r[n],a=p(l[n]);e.push({midiNote:a.midiNote,tie:a.tie,probability:u}),y.step(n)}return y.step(c["|"]),e}onmessage=function(e){var t=e.data.note,r=h(t,!1),n={midiNote:t,tie:!1,probability:y.output.getArray()[r]};y.step(r);var u=g(),a={type:"Notes",notes:[n].concat(u)};postMessage(a),y.step(h(t,!0)),g(),y.step(h(t,!0)),g(),y.step(h(t,!0)),g()}},7:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return u}));var n=function(){function e(e,t){this.module=e,this.pointer=this.module._malloc(4*t),this.length=t}return e.prototype.getArray=function(){return this.module.HEAPU32.subarray(this.pointer>>2,(this.pointer>>2)+this.length)},e}(),u=function(){function e(e,t){this.module=e,this.pointer=this.module._malloc(4*t),this.length=t}return e.prototype.getArray=function(){return this.module.HEAPF32.subarray(this.pointer>>2,(this.pointer>>2)+this.length)},e}()},8:function(e,t,r){"use strict";function n(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){var r=n.response;r&&t(r)},n.send(null)}))}function u(e){return new Promise((function(t,r){var n=document.createElement("img");n.onload=function(){t(n)},n.src=e}))}function a(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){t(JSON.parse(n.responseText))},n.send(null)}))}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return a}))}});