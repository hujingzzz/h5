window.__require=function e(t,n,i){function a(s,r){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return a(t[s][1][e]||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({AirplanLevel:[function(e,t){"use strict";cc._RF.push(t,"75868/G5LNA/KWI07jO3A4e","AirplanLevel"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],AirplaneUpgradeUI:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"68ce0gvsZlItKT3EDm1kGkJ","AirplaneUpgradeUI");var o=e("GameUtils"),s=e("GameUI");e("TutorialUI"),cc.Class({extends:e("PopUpUI"),properties:{animShow:cc.AnimationClip,animHide:cc.AnimationClip,airplane:cc.Node,airplanePrefab:cc.Prefab,spriteAtlas:cc.SpriteAtlas,content:cc.Node,view:cc.Node,airplaneLevel:cc.Node,unlocked:cc.Node,upgradeLevel:cc.Label,upgradeCoin:cc.Label,preview:cc.Sprite,active_circle:cc.SpriteFrame,locked_circle:cc.SpriteFrame,upgradeEffect:cc.Animation},onLoad:function(){var e=this;this._priceRate=1.07,this._animated=this.node.getComponent(cc.Animation),this.animShow&&this._animated.addClip(this.animShow,"show"),this.animHide&&this._animated.addClip(this.animHide,"hide");for(var t=function(t){var n=cc.instantiate(e.airplanePrefab);if(n.name=AirplaneData[t].name,n.id=t,n.parent=e.content,cc.find("3_triangle",n).opacity=0,cc.find("airplane_icon",n).getComponent(cc.Sprite).spriteFrame=e.spriteAtlas.getSpriteFrame(n.name),n.name==o.Player.get("current_airplane")&&(e.preview.node.active=!0,e.preview.spriteFrame=e.spriteAtlas.getSpriteFrame(n.name)),(i=o.Player.get("airplane."+n.name))?(cc.find("label",n).active=!0,cc.find("locked",n).active=!1,cc.find("item_bg",n).getComponent(cc.Sprite).spriteFrame=e.active_circle,cc.find("label",n).getComponent(cc.Label).string="Lv "+i.level):(cc.find("label",n).active=!1,cc.find("locked",n).active=!0,cc.find("item_bg",n).getComponent(cc.Sprite).spriteFrame=e.locked_circle),n.name==o.Player.get("current_airplane")){if(e._upgradeItem=n.name,i){e.upgradeLevel.string=i.level||1;var a=Math.floor((i.base_price||1)*Math.pow(e._priceRate,i.level+1));e.upgradeCoin.string=hpBit(a),a<=o.Player.get("coin")?(cc.find("level/frame_gold_light",e.node).active=!0,cc.tween(cc.find("level/frame_gold_light",e.node)).repeatForever(cc.tween().blink(.8)).start()):cc.find("level/frame_gold_light",e.node).active=!1}cc.tween(cc.find("item_bg",n)).repeatForever(cc.tween().set({angle:0}).by(9,{angle:-360})).start(),cc.find("3_triangle",n).opacity=255}else cc.find("3_triangle",n).opacity=0;n.on(cc.Node.EventType.TOUCH_END,function(t){e.itemClicked(t,n.name)},e)},n=0;n<AirplaneData.length;n++){var i;t(n)}this._canUpgrade=!0},start:function(){},update:function(){for(var e=cc.rect(-this.content.x-this.view.width/2,-this.view.height/2,this.view.width,this.view.height),t=0;t<this.content.children.length;t++){var n=this.content.children[t];e.intersects(n.getBoundingBox())?n.opacity=255:n.opacity=0}},_showAction:function(){this._animated.play("show")},_afterShow:function(){if("tutorial_upgrade"!=s.instance.getCurrentAction()||o.Player.get("tutorial_upgrade")){if("tutorial_change_airplane"==s.instance.getCurrentAction()&&!o.Player.get("tutorial_change_airplane"))return s.instance.raiseAction({action:"show_tutorial_upgrade_item_click",name:"tutorial_change_airplane"}),s.instance.raiseAction({command:"lockAction",value:s.ACTIONS.HOME_UPGRADE_TOUCH,name:"tutorial_change_airplane"}),s.instance.raiseAction({command:"unlockAction",value:s.ACTIONS.UPGRADE_ITEM_TOUCH,name:"tutorial_change_airplane"}),this._scrollTo("default");s.instance.raiseAction({command:"unlockAction",value:[s.ACTIONS.UPGRAGE_ITEM,s.ACTIONS.UPGRADE_ITEM_TOUCH]})}else s.instance.raiseAction({action:"show_tutorial_upgrade_step2",name:"tutorial_upgrade"}),s.instance.raiseAction({command:"unlockAction",value:s.ACTIONS.UPGRAGE_ITEM,name:"tutorial_upgrade"});var e=o.Player.get("current_airplane");this._scrollTo(e)},_hideAction:function(){this._animated.play("hide")},_scrollTo:function(e){for(var t,i=n(this.content.children);!(t=i()).done;){var a=t.value;if(a.name==e){var o=Math.max(-this.view.width/2-a.x+a.width/2+20,-this.content.width+this.view.width/2);return this.view.parent.getComponent(cc.ScrollView).setContentPosition(cc.v2(o,a.y))}}},unlock:function(e){for(var t,i=n(this.content.children);!(t=i()).done;){var a=t.value;a.name==e&&(cc.find("label",a).active=!0,cc.find("locked",a).active=!1,cc.find("item_bg",a).getComponent(cc.Sprite).spriteFrame=this.active_circle,cc.find("label",a).getComponent(cc.Label).string="Lv 1")}},itemClicked:function(e,t){var i=this;if(!s.instance.isLockedAction(s.ACTIONS.UPGRADE_ITEM_TOUCH)){if(SoundManager.playEffect("button2Sound"),"tutorial_change_airplane"==s.instance.getCurrentAction()&&!o.Player.get("tutorial_change_airplane")){if("airplane_1"!=t)return;s.instance.raiseAction({action:"hideTutorialHand",name:null}),s.instance.raiseAction({command:"unlockAll",name:null}),o.Player.set("tutorial_change_airplane",!0)}var a=o.Player.get("airplane."+t);if(!a)return a=AirplaneData.find(function(e){return e.name===t}),cc.tween(cc.find("locked",e.target)).to(.3,{scale:1.3}).to(.3,{scale:1}).start(),cc.find("level",this.unlocked).getComponent(cc.Label).string=a.unlock_level,this.airplaneLevel.active=!1,cc.Tween.stopAllByTarget(this.unlocked),void cc.tween(this.unlocked).to(.1,{opacity:255}).delay(1).to(.1,{opacity:0}).call(function(){return i.airplaneLevel.active=!0}).start();if(0==this.content.childrenCount)o.Player.set("current_airplane",t),this.airplane.getComponent(dragonBones.ArmatureDisplay).armatureName=a.armature,this.airplane.getComponent(dragonBones.ArmatureDisplay).playAnimation("animtion0",-1);else for(var r,c=n(this.content.children);!(r=c()).done;){var l=r.value;if(l.name==t){cc.find("level",this.node).opacity=255,this.upgradeLevel.string=a.level,cc.find("label",l).getComponent(cc.Label).string="Lv "+a.level;var u=Math.floor((a.base_price||1)*Math.pow(this._priceRate,a.level+1));this.upgradeCoin.string=hpBit(u);var d=cc.find("level/frame_gold_light",this.node);u<=o.Player.get("coin")?(d.active=!0,cc.tween(d).repeatForever(cc.tween().to(.4,{opacity:255}).to(.4,{opacity:0})).start()):d.active=!1,this._canUpgrade=!0,this._upgradeItem=l.name,cc.find("3_triangle",l).opacity=255,o.Player.set("current_airplane",t),this.airplane.getComponent(dragonBones.ArmatureDisplay).armatureName=a.armature,this.airplane.getComponent(dragonBones.ArmatureDisplay).playAnimation("animtion0",-1),this.preview.spriteFrame=cc.find("airplane_icon",l).getComponent(cc.Sprite).spriteFrame,cc.tween(cc.find("item_bg",l)).repeatForever(cc.tween().set({angle:0}).by(9,{angle:-360})).start()}else cc.find("3_triangle",l).opacity=0,cc.find("item_bg",l).angle=0,cc.find("item_bg",l).stopAllActions()}}},onUpgrade:function(){var e=this;if(this._canUpgrade&&!s.instance.isLockedAction(s.ACTIONS.UPGRAGE_ITEM)){this._countUpgrade||(this._countUpgrade=1),"tutorial_upgrade"==s.instance.getCurrentAction()&&!o.Player.get("tutorial_upgrade")&&this._countUpgrade<5&&(this._countUpgrade<4?this._countUpgrade++:(s.instance.raiseAction([{command:"unlockAll",value:s.ACTIONS.HOME_TOUCH},{action:"hideTutorialHand",name:null}]),o.Player.set("tutorial_upgrade",!0)));var t=o.Player.get("airplane."+this._upgradeItem);if(t){t.base_price||(t.base_price=10);var n=Math.floor(t.base_price*Math.pow(this._priceRate,t.level+1));if(n<=o.Player.get("coin")){this.upgradeEffect.node.active=!0,this.upgradeEffect.node.y=this.airplane.y,this.upgradeEffect.play("animUpgradeEffect"),SoundManager.playEffect("upgradeSound"),t.level++;var i=this.content.children.find(function(t){return t.name==e._upgradeItem});i&&(cc.find("label",i).getComponent(cc.Label).string="Lv "+t.level),o.Player.set("airplane."+this._upgradeItem,t);var a=o.Player.increase("coin",-n);this.upgradeLevel.string=t.level;var r=Math.floor(t.base_price*Math.pow(this._priceRate,t.level+1));this.upgradeCoin.string=hpBit(r);var c=cc.find("level/frame_gold_light",this.node);r<=a?(c.active=!0,cc.tween(c).repeatForever(cc.tween().to(.4,{opacity:255}).to(.4,{opacity:0})).start()):c.active=!1,cc.systemEvent.emit("coin-changed")}else s.instance.pushMessage("Not enough gold")}}}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",PopUpUI:"PopUpUI",TutorialUI:"TutorialUI"}],Airplane:[function(e,t){"use strict";cc._RF.push(t,"ad12aK39iZJ5I9XLZlKJKZj","Airplane"),cc.Class({extends:cc.Component,properties:{protected:cc.Node},start:function(){},onCollisionEnter:function(e){GameState==GAME_STATUS.PLAYING&&("ItemSupport"==e.node.group?(cc.Canvas.instance.node.getComponent("Game").startItemSupport(e.node.itemType),e.node.getComponent("ItemSupport").revoke()):this._isProtected||0===e.node.hp||cc.Canvas.instance.node.emit("game-over"))},setProtected:function(){this.unschedule(this.clearProtected),this.protected&&(this._isProtected=!0,this.protected.active=!0),this.scheduleOnce(this.clearProtected,4)},clearProtected:function(){this.protected&&(this._isProtected=!1,this.protected.active=!1)}}),cc._RF.pop()},{}],Background:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"3a385Q42dFNcYwPS/Y2OmFy","Background"),cc.Class({extends:cc.Component,properties:{backgrounds:{default:[],type:[cc.Node]}},onLoad:function(){var e=0;this._totalHeight=0;for(var t,i=n(this.backgrounds);!(t=i()).done;){var a=t.value;0!=e&&(e+=a.height/2),a.position=cc.v2(0,e),e+=a.height/2-2,this._totalHeight+=a.height-2}},start:function(){},update:function(e){for(var t,i=n(this.backgrounds);!(t=i()).done;){var a=t.value;a.y-=30*e,a.y<=-cc.winSize.height/2-a.height/2&&(a.y=this._totalHeight-a.height/2-cc.winSize.height/2-2)}}}),cc._RF.pop()},{}],BaseUI:[function(e,t){"use strict";cc._RF.push(t,"832a6tcp4FMR62s/SdpkTis","BaseUI"),cc.Class({extends:cc.Component,properties:{_showed:{default:!1,notify:function(){}}},onLoad:function(){},show:function(){if("function"==typeof this._showAction){this.node.active=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._showAction.apply(this,t)}},hide:function(){if("function"==typeof this._hideAction){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._hideAction.apply(this,t)}},_showAction:function(){this._afterShow.apply(this,arguments)},_afterShow:function(){this._showed=!0},_hideAction:function(){this._afterHide.apply(this,arguments)},_afterHide:function(){this.node.active=!1,this._showed=!1}}),cc._RF.pop()},{}],BulletManager:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"e0bbb8Qm3JPt5RZS7vSm+xt","BulletManager");var o=cc.Class({name:"BulletType",properties:{prefab:cc.Prefab,soundName:""}}),s=cc.Class({extends:cc.Component,statics:{instance:null},properties:{buttlets:{default:[],type:[o]},buttletLayer:cc.Node},onLoad:function(){s.instance=this,this.bulletPool={};for(var e,t=n(this.buttlets);!(e=t()).done;){var i=e.value;this.bulletPool[i.prefab.name]=new cc.NodePool("Bullet");for(var a=0;a<100;a++){var o=cc.instantiate(i.prefab);this.bulletPool[i.prefab.name].put(o)}}},start:function(){},create:function(e,t,n,i){var a=-30*(t-1)/2;i=this.buttletLayer.convertToNodeSpaceAR(i);for(var o=0;o<t;o++){var s=this.bulletPool["bullet_"+e].size()>0?this.bulletPool["bullet_"+e].get(this.bulletPool["bullet_"+e]):cc.instantiate(this.buttlets[0].prefab);s.poolId="bullet_"+e,s.parent=this.buttletLayer,s.position=i,s.dame=n,s.getComponent("Bullet").bulletPool=this.bulletPool["bullet_"+e],s.getComponent("Bullet").move(cc.v2(i.x+a,i.y+80)),a+=30}if(t){var r=this.buttlets.find(function(t){return t.prefab.name=="bullet_"+e});r&&r.soundName?SoundManager.playEffect("bulletSound"+r.soundName):SoundManager.playEffect("bulletSound")}},sleepAllBullet:function(){this.buttletLayer.children.forEach(function(e){e.getComponent("Bullet").setSpeed(0)})},wakeupAllBullet:function(){this.buttletLayer.children.forEach(function(e){e.getComponent("Bullet").setSpeed(1e3)})},remove:function(e){void 0!==e.poolId&&this.bulletPool[e.poolId].put(e)}});cc._RF.pop()},{}],Bullet:[function(e,t){"use strict";cc._RF.push(t,"a5074NC1ixBfIs4fTwU6Wir","Bullet"),cc.Class({extends:cc.Component,properties:{m_updateMove:{default:!1,visible:!1,notify:function(){this._onUpdateMove()}}},onLoad:function(){this.m_updateMove=!1,this.speed=1e3},start:function(){},update:function(e){if(this.m_updateMove){var t=this.node.y;t+=this.speed*e,this.node.y=t,t.y>cc.Canvas.instance.node.height+this.node.height&&this.bulletPool.put(this.node)}},setSpeed:function(e){this.speed=e},move:function(e){this.node.position=e,this.m_updateMove=!0},hit:function(){this.bulletPool.put(this.node)},_onUpdateMove:function(){this.m_updateMove?cc.director.getActionManager().resumeTarget(this.node):cc.director.getActionManager().pauseTarget(this.node)},reuse:function(e){this.bulletPool=e},unuse:function(){this.m_updateMove=!1,cc.Tween.stopAllByTarget(this.node)}}),cc._RF.pop()},{}],ButtonEffect:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"bf011NqNM9D174QkdRfPQ7V","ButtonEffect");var o=cc.Enum({ScaleTo:1,ScaleBy:2,RotationTo:3,RotationBy:4,MoveTo:5,MoveBy:6}),s=cc.Class({name:"ButtonEffectItem",properties:{action:{type:o,default:o.Scale},delayTime:0,scale:{default:cc.v2(0,0),visible:function(){return this.action==o.ScaleTo||this.action==o.ScaleBy}},duration:0}});cc.Class({extends:cc.Component,properties:{repeatTimes:{default:-1,tooltip:"-1: Repeat forever\n0: Don't run\nn: Repeat n times"},effects:{type:[s],default:[]}},start:function(){for(var e,t=cc.tween(),i=n(this.effects);!(e=i()).done;){var a=e.value;switch(t=t.delay(a.delayTime),a.action){case o.ScaleTo:t=t.to(a.duration,{scaleX:a.scale.x,scaleY:a.scale.y});break;case o.ScaleBy:t=t.by(a.duration,{scaleX:a.scale.x,scaleY:a.scale.y})}}-1==this.repeatTimes?cc.tween(this.node).repeatForever(t).start():this.repeatTimes>0&&cc.tween(this.node).repeat(this.repeatTimes,t).start()}}),cc._RF.pop()},{}],ExplodeManager:[function(e,t){"use strict";cc._RF.push(t,"ebc298FXPdJlKhBh4D58NDC","ExplodeManager"),cc.Class({extends:cc.Component,properties:{explodeLayer:cc.Node,bulletExplodePrefab:cc.Prefab,aiplaneExplodePrefab:cc.Prefab},onLoad:function(){ExplodeManager=this,this._bulletExplodePool=new cc.NodePool;for(var e=0;e<100;e++){var t=cc.instantiate(this.bulletExplodePrefab);this._bulletExplodePool.put(t)}this._airplaneExplode=cc.instantiate(this.aiplaneExplodePrefab)},start:function(){},createBulletExplode:function(e){var t=this;e=this.explodeLayer.convertToNodeSpaceAR(e);var n=this._bulletExplodePool>0?this._bulletExplodePool.get():cc.instantiate(this.bulletExplodePrefab);n.parent=this.explodeLayer,n.position=e,n.scale=0,cc.tween(n).to(.2,{scale:1}).call(function(){return t._bulletExplodePool.put(n)}).start()},playAirplaneExplode:function(e,t){this._airplaneExplode.active=!0,this._airplaneExplode.parent=this.explodeLayer,this._airplaneExplode.position=this.explodeLayer.convertToNodeSpaceAR(e),this._airplaneExplode.getComponent(cc.Animation).on("finished",function(){this._airplaneExplode.active=!1,"function"==typeof t&&t()},this),SoundManager.playEffect("dieSound"),this._airplaneExplode.getComponent(cc.Animation).play("animAirplaneExplode")}}),cc._RF.pop()},{}],GameOverUI:[function(e,t){"use strict";cc._RF.push(t,"81993ZbEzVAZYJ06va2E0gO","GameOverUI");var n=e("GameUI"),i=e("GameUtils");cc.Class({extends:e("PopUpUI"),properties:{airplane:cc.Node,countdown:cc.Label,receive:cc.Node},onLoad:function(){this._countdownTime=8},_showAction:function(){this.node.active=!0,this.receive.opacity=255,cc.find("mask",this.node).opacity=180,this._countdownTime=8,this.countdown.string=this._countdownTime,this.schedule(this._countdown,1,this._countdownTime,1),SoundManager.playEffect("loseSound"),this._super()},_hideAction:function(){this.unschedule(this._countdown),this._super()},_afterHide:function(){this._super()},_countdown:function(){this._countdownTime--,this.countdown.string=Math.max(this._countdownTime,0),this._countdownTime<=-1&&this._playDie()},_playDie:function(){var e=this;cc.find("mask",this.node).opacity=1,this.receive.opacity=0,cc.tween(this.airplane).parallel(cc.tween().by(1.1,{angle:60}),cc.tween().to(1.1,{scale:.7}),cc.tween().to(1.1,{opacity:0}),cc.tween().by(1.1,{position:cc.v2(0,-250)})).start(),ExplodeManager.playAirplaneExplode(this.airplane.parent.convertToWorldSpaceAR(this.airplane.position),function(){e.scheduleOnce(function(){i.Player.increase("coin",i.Player.get("_levelCoin")),this.hide(),this.airplane.stopAllActions(),this.airplane.scale=1,this.airplane.angle=0,this.airplane.opacity=255,n.instance.show("HomeUI")},1)})},onReceive:function(){var e=this;this._countdownTime<=0/*||top.h5_sdk.showAd("Reward",()=>{e.hide(),cc.Canvas.instance.node.getComponent("Game").continue()},()=>{})*/}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",PopUpUI:"PopUpUI"}],GamePlayUI:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"81447hm/mpHE4m7j1oOqM9s","GamePlayUI");var o=e("GameUtils"),s=e("GameUI");cc.Class({extends:e("NormalUI"),properties:{animShow:cc.AnimationClip,animHide:cc.AnimationClip,virusLayer:cc.Node,effectLayer:cc.Node,progress_bar:cc.ProgressBar,coinNode:cc.Node,coinPrefab:cc.Prefab,level:cc.Node,bossNode:cc.Node},onLoad:function(){this._super(),this._animated=this.node.getComponent(cc.Animation),this.animShow&&this._animated.addClip(this.animShow,"show"),this.animHide&&this._animated.addClip(this.animHide,"hide"),this._coinPool=new cc.NodePool;for(var e=0;e<100;e++){var t=cc.instantiate(this.coinPrefab);this._coinPool.put(t)}},_showAction:function(){this.progress_bar.progress=1,cc.find("label",this.coinNode).getComponent(cc.Label).string=0,cc.find("label",this.progress_bar.node).getComponent(cc.Label).string=(100*this.progress_bar.progress).toFixed(2)+"%";var e=o.Player.get("level")||1;1==e?cc.find("level_pre",this.level).active=!1:(cc.find("level_pre",this.level).active=!0,cc.find("level_pre/label",this.level).getComponent(cc.Label).string=e-1),cc.find("level_current/label",this.level).getComponent(cc.Label).string=e,cc.find("level_next/label",this.level).getComponent(cc.Label).string=e+1,this._animated.play("show")},_hideAction:function(){for(var e,t=n(_.merge([],this.virusLayer.children));!(e=t()).done;){var i=e.value;i.getComponent("Virus")&&i.getComponent("Virus").dispatch()}this._super()},onPause:function(){cc.director.isPaused()?(GameState=GAME_STATUS.PLAYING,s.instance.hide("PauseUI"),cc.director.resume()):(GameState=GAME_STATUS.PAUSED,s.instance.show("PauseUI"),cc.director.pause())},showBoss:function(){var e=this;GameState=GAME_STATUS.BOSS,this.bossNode.opacity=255,cc.tween(cc.find("bg",this.bossNode)).repeat(5,cc.tween().call(function(){return SoundManager.playEffect("wairningSound")}).to(.4,{opacity:0}).to(.4,{opacity:255})).start(),this.scheduleOnce(function(){GameState=GAME_STATUS.PLAYING,cc.Tween.stopAllByTarget(cc.find("bg",e.bossNode)),e.bossNode.opacity=0},4)},createFlyCoin:function(e){var t=this,n=this.effectLayer.convertToNodeSpaceAR(this.virusLayer.convertToWorldSpaceAR(e)),i=this.effectLayer.convertToNodeSpaceAR(this.coinNode.parent.convertToWorldSpaceAR(this.coinNode.position));this._createFlyCoin2(3,n,i,function(){var e=o.Player.increase("_levelCoin",cc.Canvas.instance.node.getComponent("Game").getRandomCoin());cc.find("label",t.coinNode).getComponent(cc.Label).string=goldCrarryBit(e)})},_getFlyCoin:function(){return this._coinPool.size()>0?this._coinPool.get():cc.instantiate(this.coinPrefab)},_createFlyCoin2:function(e,t,n,i){for(var a=this,o=function(o){var s=cc.misc.degreesToRadians(random(0,360)),r=t.x+200*Math.cos(s),c=t.y+200*Math.sin(s),l=a._getFlyCoin();l.parent=a.effectLayer,l.position=t,l.scale=2,l.stopAllActions(),l.scale=1;var u=random(.4,.6)/1.5,d=random(.89,1)/1.5,h=cc.tween().to(.05,{scale:1.2}).to(.05,{scale:1});cc.tween(l).to(u,{position:cc.v2(r,c,0)}).to(d,{position:cc.v2(n.x,n.y,0)},{easing:"smooth"}).call(function(){o===e-1&&(i&&i(),SoundManager.playEffect("coinSound"))}).then(h).call(function(){a._coinPool.put(l)}).start()},s=0;s<e;s++)o(s)}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",NormalUI:"NormalUI"}],GameUI:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"a94451UH/hJr7zR15MCl5ji","GameUI");var o=e("GameUtils"),s=e("NormalUI"),r=e("PopUpUI"),c=e("TutorialStep"),l=cc.Class({extends:cc.Component,editor:{executionOrder:-1},properties:{background:cc.Node,airplane:cc.Node,uiList:{type:[cc.Node],default:[]},messagePrefab:cc.Prefab,MessageLayer:cc.Node,_currentUI:{default:null,notify:function(){this._onCurrentUIChanged()}},theme:{get:function(){return this._theme},set:function(e){this._theme=e},visible:!1}},statics:{instance:null,ACTIONS:{HOME_TOUCH:"HOME_TOUCH",HOME_UPGRADE_TOUCH:"HOME_UPGRADE_TOUCH",UPGRADE_ITEM_TOUCH:"UPGRADE_ITEM_TOUCH",UPGRAGE_ITEM:"UPGRAGE_ITEM",SHOP_TOUCH:"SHOP_TOUCH",SHOP_BUY_ITEM:"SHOP_BUY_ITEM",REWARD_COIN:"REWARD_COIN",RECEIVE:"RECEIVE",WIN_COLLECT_COIN:"WIN_COLLECT_COIN",WIN_COLLECT_COIN_X3:"WIN_COLLECT_COIN_X3"}},__preload:function(){cc.winSize.height/cc.winSize.width<1.77&&(cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1)},onLoad:function(){l.instance=this,this._lockedAction=Object.values(l.ACTIONS),this._isRunning=!1,this._actionName=null,this._currentUI=null,this.btnPause&&this.btnPause.on(cc.Node.EventType.TOUCH_END,this._onPause,this),this.btnPlay&&this.btnPlay.on(cc.Node.EventType.TOUCH_END,this.onPlayClicked,this),cc.systemEvent.on("AdmobViewDidReceiveAd",function(e){"home"===e&&this._currentUI==this.HomeUI&&o.AdMob.show("home")}.bind(this)),this.ui={};for(var e,t=n(this.uiList);!(e=t()).done;){var i=e.value;this.ui[i.name]=i.getComponent(i.name)}this._onInitTheme()},start:function(){this._previousUI=[this.HomeUI],this.show("HomeUI")},_onInitTheme:function(){},_onPause:function(){cc.director.isPaused()?(GameState=GAME_STATUS.PLAYING,cc.director.resume()):(GameState=GAME_STATUS.PAUSE,this._pushPreviousUI(),this.PauseUI.show(),this._currentUI=this.PauseUI)},_onCurrentUIChanged:function(){if(this._currentUI)switch(this._previousUI&&this._previousUI.length>1&&-1!=this._previousUI.indexOf(this._currentUI)&&this._previousUI.splice(this._previousUI.indexOf(this._currentUI)+1),cc.Canvas.instance.node.emit("registerTouchStart",!1),cc.audioEngine.stopAllEffects(),cc.audioEngine.stopMusic(),this._currentUI.uuid){case this.ui.HomeUI.uuid:SoundManager.playMusic("bgMusic",!0);break;case this.ui.GamePlayUI.uuid:break;case this.ui.GameOverUI.uuid:case this.ui.WinUI.uuid:case this.ui.PauseUI.uuid:SoundManager.pauseMusic()}},_hideCurrentUI:function(e){this._currentUI&&(e&&this._currentUI!=this._previousUI[this._previousUI.length-1]&&this._previousUI.push(this._currentUI),this._currentUI.hide())},_hideAllUI:function(){this.HomeUI.hide(!0),this.GamePlayUI.hide(!0),this.PauseUI.hide(!0),this.LevelPreviewUI.hide(!0),this.LevelUI.hide(!0),this.SettingUI.hide(!0),this.ShopUI.hide(!0),this.ThemeUI.hide(!0),this.GameOverUI.hide(!0),this.WinUI.hide(!0),this._previousUI=[this.HomeUI]},_pushPreviousUI:function(){this._currentUI&&this._currentUI!=this._previousUI[this._previousUI.length-1]&&this._previousUI.push(this._currentUI)},showPrevious:function(){if(this._currentUI.hide(),this._previousUI.length>0){var e=this._previousUI.pop();!1===e.node.active&&e.show(),this._currentUI=e}else!1===this.HomeUI.node.active&&this.HomeUI.show(),this._currentUI=this.HomeUI},show:function(e){for(var t=this.ui[e],n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];t instanceof r?t.show.apply(t,i):t instanceof s&&(this._currentUI&&1==this._currentUI.node.active&&this._currentUI.hide.apply(this._currentUI,i),t.show.apply(t,i),this._currentUI=t)},hide:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e){var a=this.ui[e];a&&1==a.node.active&&a.hide.apply(a,n)}else this._currentUI.hide.apply(this._currentUI,n)},hideNow:function(e){if(e){var t=this.ui[e];t&&1==t.node.active&&(t._showed=!1,t.node.active=!1)}else this._currentUI._showed=!1,this._currentUI.node.active=!1},isLockedAction:function(e){return this._lockedAll||-1!==this._lockedAction.indexOf(e)},getCurrentAction:function(){return this._actionName},raiseAction:function(e){if(Array.isArray(e))for(var t,i=n(e);!(t=i()).done;){var a=t.value;void 0!==a.name&&(this._actionName=a.name),void 0!==a.command?this._startAction(a):void 0!==c[a.action]&&this._startAction(c[a.action])}else"object"==typeof e&&(void 0!==e.name&&(this._actionName=e.name),void 0!==e.command?this._startAction(e):void 0!==c[e.action]&&this._startAction(c[e.action]))},_startAction:function(e){switch(e.command){case"lockAll":this._lockedAction=Object.values(l.ACTIONS);break;case"unlockAll":this._lockedAction=[];break;case"lockAction":if("string"==typeof e.value)this._lockAction(e.value);else if(Array.isArray(e.value))for(var t,i=n(e.value);!(t=i()).done;){var a=t.value;this._lockAction(a)}break;case"unlockAction":if("string"==typeof e.value)this._unlockAction(e.value);else if(Array.isArray(e.value))for(var o,s=n(e.value);!(o=s()).done;){var r=o.value;this._unlockAction(r)}break;case"showTutorialHand":this.ui.TutorialUI.showTutorialHand(e.value);break;case"showTutorialHandAtNodePath":this.ui.TutorialUI.showTutorialHandAtNodePath(e.value);break;case"hideTutorialHand":this.ui.TutorialUI.hideTutorialHand()}},_lockAction:function(e){"string"==typeof e&&-1===this._lockedAction.indexOf(e)&&this._lockedAction.push(e)},_unlockAction:function(e){"string"==typeof e&&-1!==this._lockedAction.indexOf(e)&&this._lockedAction.splice(this._lockedAction.indexOf(e),1)},getUIState:function(e){return this.ui[e]?this.ui[e]._showed:null},createFlyCoin:function(e,t,n){this.ui[e]&&this.ui[e].createFlyCoin(t,n)},showUpgradeAirplane:function(){},_moveAirplane:function(e){if(e&&-1!==["up","down"].indexOf(e))switch(e){case"up":cc.tween(this.airplane).by(.4,{position:cc.v2(0,200)}).start();break;case"down":cc.tween(this.airplane).by(.4,{position:cc.v2(0,-200)}).start()}},play:function(){},continue:function(){},pause:function(){},showBoss:function(){this._currentUI.showBoss()},shake:function(e){if(this.background){null==e&&(e=0),cc.Tween.stopAllByTarget(this.background),this.background.setPosition(0,0);var t=6+7*e,n=randomInt(-t,t),i=randomInt(-t,t),a=randomInt(-t,t),o=randomInt(-t,t),s=randomInt(-t,t),r=randomInt(-t,t),c=cc.tween(this.background).to(.04,{position:cc.v2(n,i)}).to(.04,{position:cc.v2(a,o)}).to(.04,{position:cc.v2(s,r)}).to(.04,{position:cc.v2(0,0)});c.tag=123,c.start()}},pushMessage:function(e){var t=cc.instantiate(this.messagePrefab);t.opacity=0;var i=cc.find("label",t).getComponent(cc.Label);i.string=e,i.node.opacity=255,t.parent=this.MessageLayer,t.width=i.node.width;for(var a,o=n(this.MessageLayer.children);!(a=o()).done;){var s=a.value;s!==t&&cc.tween(s).by(.5,{position:cc.v2(0,t.height+20)}).start()}t.position=cc.v2(0,0),cc.tween(t).delay(.1).to(.1,{opacity:255}).to(3,{opacity:0}).removeSelf().start()}});cc._RF.pop()},{GameUtils:"GameUtils",NormalUI:"NormalUI",PopUpUI:"PopUpUI",TutorialStep:"TutorialStep"}],GameUtils:[function(e,t){"use strict";function n(e,t,n,i,a,o,s){try{var r=e[o](s),c=r.value}catch(l){return void n(l)}r.done?t(c):Promise.resolve(c).then(i,a)}function i(e){return function(){var t=this,i=arguments;return new Promise(function(a,o){var s=e.apply(t,i);function r(e){n(s,a,o,r,c,"next",e)}function c(e){n(s,a,o,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"7282fqL5cRG9Joj6QmzVtOh","GameUtils");var a=e("sdkbox_config");window.isInitSetting=!1,window.isInitPlayerScore=!1,window.isInitPlayerData=!1;var o="meteorite_shooter_",s={BANNER:"banner",INTERSTITIAL:"interstitial",REWARD:"rewarded"},r={REMOVE_ADS:"remove_ads",COIN_PACKAGE:"coin_package",UNLOCK_AIRPLANE:"unlock_airplane"},c={music:!0,sound:!0,vibrate:!0,ads:!0},l=cc.Class({name:"Storage",ctor:function(){this._score=0,this._data={},this.isFBInstant="undefined",this._init()},_init:function(){},init:function(e){this.name=e},getClassName:function(){return this.name||cc.js.getClassName(this)},get:function(e){return"score"==e?this._score:_.get(this._data,e,null)},set:function(e,t){if("score"==e){if(!parseInt(t))return;this._score=parseInt(t)}else{if(void 0===t){if("object"==typeof e)return this._data=_.merge(this._data,e);"string"==typeof e&&(t=e)}_.setWith(this._data,e,t,Object)}}}),u=cc.Class({name:"LocalStorage",extends:l,init:function(e){this._super(e);var t=JSON.parse(cc.sys.localStorage.getItem(o+this.getClassName()));t&&(this._data=t.data||{},this._score=t.score||0),isInitPlayerScore=!0,isInitPlayerData=!0},set:function(e,t){this._super(e,t),cc.sys.localStorage.setItem(o+this.getClassName(),JSON.stringify({score:this._score,data:this._data}))}}),d=cc.Class({name:"FBStorage",extends:l,properties:{leaderboard:"main_leaderboard"},init:function(e){this._super(e),console.log("Pause event was triggered!");console.log("init facebook");return i(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",[score,n]);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,null,[[0,7]])}))},set:function(e,t){return this._super(e,t)},setSessionData:function(e,t){void 0===this._session&&(this._session={}),_.set(this._session,e,t)},getContextType:function(){},createShortcut:function(){cc.sys.localStorage.getItem(o+"_createShortcut")},subscribe:function(){},logEvent:function(e,t){return e=e||"custom_event",t=t||{}},getID:function(){},getName:function(){},getPhoto:function(){},getFriends:function(){},getLeaderboardAsyncWithFriend:function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=0),void 0===e&&(e=this.leaderboard)},getLeaderboardAsync:function(e){return void 0===e.name&&(e.name=this.leaderboard),e.count||(e.count=10),e.offset||(e.offset=0)},invite:function(){},playWith:function(e){},playSingle:function(){},playGame:function(e){cc.log(e)},share:function(e,t,n){},updateCustomAsync:function(e,t,n,i,a,o){if(!this.isFBInstant)return new Promise(function(){throw new Error("This function working only on FBInstant")});var s={action:"CUSTOM",image:"...",text:"Play and Rise to the top of the leaderboard now!",template:"play_turn"};return e&&(s.cta=e),t&&(s.image=t),n&&(s.text=n),i&&(s.template=i),a&&-1!==["IMMEDIATE","IMMEDIATE_CLEAR","LAST"].indexOf(a)&&(s.strategy=a),o&&-1!==["PUSH","NO_PUSH"].indexOf(s.notification)&&(s.notification=o),cc.log(arguments),cc.log(s),this._updateAsync(s)},updateLeaderboardAsync:function(e,t){var n={action:"LEADERBOARD",name:this.leaderboard};return e&&(n.text=e),t&&(n.name=t),this._updateAsync(n)},_updateAsync:function(e){}}),h=cc.Class({name:"Player",ctor:function(){this.isFBInstant="undefined",this.isFBInstant?this.adapter=new d:this.adapter=new u},init:function(){return this.adapter.init("Player")},get:function(e){return this.adapter.get(e)},set:function(e,t){this.adapter.set(e,t)},increase:function(e,t){var n=this.get(e);return n||(n=0),t=t||1,this.set(e,n+t),n+t},callFunc:function(e){if("string"!=typeof e||_.startsWith(e,"_"))throw new Error("Name of function not valid");if("function"==typeof this.adapter[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.adapter[e].apply(this.adapter,n)}}}),p=cc.Class({name:"Setting",extends:l,init:function(){var e=JSON.parse(cc.sys.localStorage.getItem(o+this.getClassName()));this._data=e||c,isInitSetting=!0},set:function(e,t){this._super(e,t),cc.log("settings",this._data),cc.sys.localStorage.setItem(o+this.getClassName(),JSON.stringify(this._data))},change:function(e){return null==this._data[e]&&(this._data[e]=!1),this.set(e,!this._data[e]),this._data[e]}}),f=cc.Class({name:"Ads",ctor:function(){this.ADS=s,this.rules={interstitial:{delay:60,count:1},reward:{delay:-1,count:1},banner:{delay:-1,count:1,show:!0}},this.loadConfig()},init:function(){},loadConfig:function(){"undefined"!=typeof FBInstant||cc.sys.os},checkTiming:function(e){if(cc.log("check timing",e,this.rules),this.rules&&this.rules[e]){var t=this.rules[e];if(cc.log("ads rule",e,t),void 0!==t.show&&!1===t.show)return!1;if(t.delay>0){if(t.data||(t.data=[]),t.data.length<t.count)t.data.push(Date.now());else{if(!(t.data[0]+1e3*t.delay<Date.now()))return!1;t.data.shift(),t.data.push(Date.now())}this.rules[e].data=t.data}}return!0},show:function(){return!1},hide:function(){},isAvailable:function(){return!1}}),m=cc.Class({name:"AdMob",extends:f,ctor:function(){cc.sys.isNative&&"undefined"!=typeof sdkbox&&void 0!==sdkbox.PluginAdMob&&(sdkbox.PluginAdMob.setListener(this),this.init())},init:function(){"undefined"!=typeof sdkbox?void 0!==sdkbox.PluginAdMob?cc.sys.isNative&&(sdkbox.PluginAdMob.setListener(this),sdkbox.PluginAdMob.init()):cc.log("sdkbox.PluginAdMob is undefined"):cc.log("sdkbox is undefined")},adViewDidReceiveAd:function(e){cc.log("AdmobViewDidReceiveAd"+e),cc.systemEvent.emit("AdsViewDidReceiveAd",e)},adViewDidFailToReceiveAdWithError:function(e,t){cc.log("adViewDidFailToReceiveAdWithError"+e+" "+t),cc.systemEvent.emit("AdsViewDidFailToReceiveAdWithError",e,t)},adViewWillPresentScreen:function(e){cc.log("adViewWillPresentScreen"+e),cc.audioEngine.pauseAll(),cc.systemEvent.emit("AdsViewWillPresentScreen",e)},adViewDidDismissScreen:function(e){cc.log("adViewDidDismissScreen"+e),cc.audioEngine.resumeAll(),cc.systemEvent.emit("AdsViewDidDismissScreen",e)},adViewWillDismissScreen:function(e){cc.log("adViewWillDismissScreen"+e),cc.audioEngine.resumeAll(),cc.systemEvent.emit("AdsViewWillDismissScreen",e)},adViewWillLeaveApplication:function(e){cc.log("adViewWillLeaveApplication"+e),cc.audioEngine.resumeAll(),cc.systemEvent.emit("AdsViewWillLeaveApplication",e)},reward:function(e,t,n){cc.log("AdsReward",e,t,n),cc.systemEvent.emit("AdsReward",e,t,n)},show:function(e){return!(!cc.sys.isNative||"undefined"==typeof sdkbox||void 0===sdkbox.PluginAdMob||(sdkbox.PluginAdMob.isAvailable(e)?!this.checkTiming(e)||(sdkbox.PluginAdMob.show(e),0):(cc.log("set cache admob"),sdkbox.PluginAdMob.cache(e),1)))},hide:function(e){cc.sys.isNative&&"undefined"!=typeof sdkbox&&void 0!==sdkbox.PluginAdMob&&sdkbox.PluginAdMob.isAvailable(e)&&sdkbox.PluginAdMob.hide(e)},isAvailable:function(e){return!(!cc.sys.isNative||"undefined"==typeof sdkbox||void 0===sdkbox.PluginAdMob)&&sdkbox.PluginAdMob.isAvailable(e)}}),g=cc.Class({name:"FBAdsManager",extends:f,ctor:function(){cc.log("FBAdsManager constructor"),this.preloadedAds={},this._callback={},this.init()},init:function(){},loadBanner:function(e,t){},preloadInterstitial:function(e){},loadInterstitial:function(e){},preloadRewardVideo:function(e){},loadRewardVideo:function(e){},show:function(e,t){var n=this;if(!1!==b.Setting.get("ads")){if(!this._ads[e])return"function"==typeof t.onfail&&t.onfail(),!1;this._callback[e]=t||{},this._rewarded=!1;var i=this._ads[e];return"banner"==i.type?this.loadBanner(e,t):!0===this.preloadedAds[i.id].state&&null!==this.preloadedAds[i.id].instance&&this.checkTiming(e)?(cc.director.pause(),cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),this.preloadedAds[i.id].instance.showAsync().then(function(){switch(n.preloadedAds[i.id].lastShowTime=Date.now(),n.preloadedAds[i.id].state=!1,n.preloadedAds[i.id].instance=null,i.type){case"interstitial":n.loadInterstitial(e);break;case"rewarded_video":n.loadRewardVideo(e),n._rewarded=!0,"function"==typeof t.onreward&&t.onreward(e,"G",1),cc.systemEvent.emit("AdsReward",e,"",1)}}).then(function(){cc.director.resume(),cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),cc.systemEvent.emit("AdsViewDidDismissScreen",e),"function"==typeof t.onclosed&&t.onclosed(n._rewarded)}).catch(function(){switch(cc.director.resume(),cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),cc.systemEvent.emit("AdsViewDidDismissScreen",e),"function"==typeof t.onfail&&t.onfail(),i.type){case"interstitial":n.loadInterstitial(e);break;case"rewarded_video":n.loadRewardVideo(e)}}),!0):("function"==typeof t.onfail&&t.onfail(),!1)}"function"==typeof t.onfail&&t.onfail()},hide:function(e){},isAvailable:function(e){if(!this._ads[e])return!1;var t=this._ads[e];return!0===this.preloadedAds[t.id].state&&null!==this.preloadedAds[t.id].instance}}),v=cc.Class({name:"FacebookIAP",ctor:function(){},init:function(){var e=this;console.log("Payments Ready!"),e.isAvailable=!0},purchase:function(e,t){},getPurchaseHistory:function(){},restore:function(){},setListener:function(e){"object"==typeof e&&(this._listener=_.merge(this._listener,e))}}),y=cc.Class({name:"IAP",ctor:function(){this.PRODUCTS=r,this.adapter=null,"undefined"!=typeof FBInstant&&(this.adapter=new v)},init:function(){this.adapter&&this.adapter.init()},purchase:function(e,t){return this.adapter?this.adapter.purchase(e,t):Promise.reject(new Error("No adapter found for purchase"))},getPurchaseHistory:function(){return this.adapter?this.adapter.getPurchaseHistory():Promise.reject(new Error("No adapter found for purchase"))},restore:function(){this.adapter&&this.adapter.restore()},setListener:function(e){this.adapter&&this.adapter.setListener(e)}}),A=cc.Class({name:"Review",ctor:function(){cc.sys.isNative&&"undefined"!=typeof sdkbox&&null!=sdkbox.PluginReview&&sdkbox.PluginReview.setListener(this)},init:function(){cc.log("Review init"),cc.sys.isNative&&"undefined"!=typeof sdkbox&&null!=sdkbox.PluginReview&&sdkbox.PluginReview.init()},show:function(){cc.sys.isNative&&"undefined"!=typeof sdkbox&&null!=sdkbox.PluginReview&&sdkbox.PluginReview.show()},rate:function(){cc.sys.isNative&&"undefined"!=typeof sdkbox&&null!=sdkbox.PluginReview&&sdkbox.PluginReview.rate()},onDisplayAlert:function(){cc.log("didDisplayAlert")},onDeclineToRate:function(){cc.log("didDeclineToRate")},onRate:function(){cc.log("didToRate")},onRemindLater:function(){cc.log("didToRemindLater"),b.Player.set("RateRemindTime",Date.now())}}),b={init:function(){this.isFacebook="undefined"!=typeof FBInstant,console.log("GameUtils init"),this.isFacebook?this.Ads=new g:cc.sys.isNative?this.Ads=new m:this.Ads=new f,this.Player.init(),this.Setting.init(),this.IAP.init()},Setting:new p,Player:new h,IAP:new y,Review:new A,vibrate:function(e,t){cc.sys.isNative&&"undefined"!=typeof jsb&&this.Setting.get("vibrate")&&(cc.sys.os==cc.sys.OS_ANDROID&&t>0&&e>0?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","doVibrate","(II)V",t,e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("GameUtilsClass","vibrate"))},isNetworkConnected:function(){if(cc.sys.isNative&&"undefined"!=typeof jsb){if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isNetworkConnected","()Z");cc.sys.os,cc.sys.OS_IOS}},shareLink:function(e,t){e=e||"Share download link",t=t||"",cc.sys.isNative&&"undefined"!=typeof jsb&&(cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","shareLink","(Ljava/lang/String;Ljava/lang/String;)V",e,t):cc.sys.os==cc.sys.OS_IOS&&(t=t||"https://apps.apple.com/app/id"+a.ios.appID,jsb.reflection.callStaticMethod("GameUtilsClass","share:and:",e,t)))},logEvent:function(e,t){if(cc.log("logEvent",e),t=t?JSON.stringify(t):JSON.stringify({}),cc.sys.isNative&&void 0!==sdkbox.firebase&&void 0!==sdkbox.firebase.Analytics)return sdkbox.firebase.Analytics.logEvent(e,t);cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,t),cc.sys.isNative&&void 0!==sdkbox.PluginFacebook&&sdkbox.PluginFacebook.logEvent(e)},getGameList:function(){var e=this;return new Promise(function(t,n){if(e.gameList)return t(e.gameList);"undefined"!=typeof FBInstant&&FBInstant.getSupportedAPIs().includes("switchGameAsync")&&cc.resources.load("https://taptap-2048.firebaseio.com/games.json",function(e,i){e&&n(e),delete i.dragblock,this.gameList=i,t(this.gameList)}.bind(e))})},getMoreGame:function(){return this.getGameList().then(function(e){var t=null;if(e){var n=Object.keys(e);t=e[n[Math.floor(Math.random()*n.length)]]}return t})}};cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){b.init()}),t.exports=b,cc._RF.pop()},{sdkbox_config:"sdkbox_config"}],Game:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"28af9KZsa1DDooVVlFbY/2Y","Game");var o=e("GameUI"),s=e("GameUtils"),r=e("VirusManager"),c=e("sdkbox_config");cc.Class({extends:cc.Component,properties:{airplane:cc.Node,smallAirplane_left:cc.Node,smallAirplane_right:cc.Node,bulletManager:e("BulletManager"),virusLayer:cc.Node,bulletLayer:cc.Node,itemSupportAtlas:cc.SpriteAtlas,itemSuppotLayer:cc.Node,itemSupportCountdownLayer:cc.Node,itemSupportPrefab:cc.Prefab,itemSupportCountdownPrefab:cc.Prefab,levelProgress:cc.ProgressBar,_startPosition:cc.Vec3},onLoad:function(){cc.macro.ENABLE_MULTI_TOUCH=!1,cc.director.getCollisionManager().enabled=!0,this._level=s.Player.get("level")||1,this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on("registerTouchStart",this.registerTouchStart,this),this.airplane.on(cc.Node.EventType.POSITION_CHANGED,function(){if(GameState==GAME_STATUS.PLAYING||GameState==GAME_STATUS.BOSS){var e=-this.node.width/2+this.airplane.width/2,t=this.node.width/2-this.airplane.width/2,n=-this.node.height/2-this.airplane.height/2,i=this.node.height/2-this.airplane.height/2;this.airplane.x=this.airplane.x<=e?e:this.airplane.x>=t?t:this.airplane.x,this.airplane.y=this.airplane.y<=n?n:this.airplane.y>=i?i:this.airplane.y}},this),this.node.on("game-over",this.gameOver,this),this.node.on("start-game",this.startGame,this),this._itemSupportPool={};for(var e=0,t=Object.keys(ItemSupportType);e<t.length;e++){var n=t[e];if(!this._itemSupportPool[ItemSupportType[n]]){this._itemSupportPool[ItemSupportType[n]]=new cc.NodePool("ItemSupport");for(var i=0;i<5;i++){var a=cc.instantiate(this.itemSupportPrefab);a.itemType=ItemSupportType[n],a.getComponent("ItemSupport").itemType=ItemSupportType[n],this._itemSupportPool[ItemSupportType[n]].put(a)}this._itemSupportPool[ItemSupportType[n]+"_active"]=new cc.NodePool;var o=cc.instantiate(this.itemSupportCountdownPrefab);o.itemType=ItemSupportType[n],o.getComponent(cc.Sprite).spriteFrame=this.itemSupportAtlas.getSpriteFrame("countdown_"+ItemSupportType[n]),this._itemSupportPool[ItemSupportType[n]+"_active"].put(o)}}if(this._support={},!s.Player.get("current_airplane")){s.Player.set("current_airplane","default");var r=AirplaneData.find(function(e){return"default"===e.name});r&&(r.dame=r.base_dame||1,r.fire_speed=r.base_fire_speed||.5,r.level=1,s.Player.set("airplane.default",r))}var c=AirplaneData.find(function(e){return e.name===s.Player.get("current_airplane")});c&&(this.airplane.getComponent(dragonBones.ArmatureDisplay).armatureName=c.armature)},start:function(){var e=this;r.instance.createVirus(),r.instance.virusLayer=this.virusLayer,s.Setting.get("ads")&&this.schedule(this._showBanner,60,cc.macro.REPEAT_FOREVER,5),s.IAP.getPurchaseHistory().then(function(t){console.log("preload getPurchaseHistory",t);for(var i,a=Object.values(c.FBInstant.iap.items),o=function(){var t=i.value,n=a.find(function(e){return e.id===t.productID&&"non_consumable"!==e.type});n&&FBInstant.payments.consumePurchaseAsync(t.purchaseToken).then(function(){e._processItem(n)})},s=n(t);!(i=s()).done;)o()}).catch(function(){})},_processItem:function(e){switch(cc.log("_processItem",e),e.name){case s.IAP.PRODUCTS.COIN_PACKAGE1:s.Player.increase("coin",1e7);break;case s.IAP.PRODUCTS.UNLOCK_AIRPLANE:var t=s.Player.get("level"),n=AirplaneData.filter(function(e){return e.unlock_level>t&&!s.Player.get("airplane."+e.name)});if(n){n=_.orderBy(n,["unlock_level"],["asc"]);for(var i=0;i<5;i++)if(void 0!==n[i]){var a=n[i];cc.log("unlock",a),a.level=1,s.Player.set("airplane."+a.name,a)}}}},_showBanner:function(){},nextLevel:function(){this._level++,s.Player.set("level",this._level),cc.log("nextLevel")},startGame:function(){this._support={};for(var e,t=n(_.concat([],this.itemSuppotLayer.children));!(e=t()).done;)e.value.getComponent("ItemSupport").revoke();for(var i,a=n(_.concat([],this.itemSupportCountdownLayer.children));!(i=a()).done;){var o=i.value;this._itemSupportPool[o.itemType+"_active"].put(o)}if(GameState=GAME_STATUS.PLAYING,s.Player.set("_levelCoin",0),this.levelData=r.instance.loadLevel(this._level),this.airplaneData=s.Player.get("airplane."+s.Player.get("current_airplane")),!cc.director.getScheduler().isScheduled(this._createBullet,this)){var c=AirplaneData.find(function(e){return e.name==s.Player.get("current_airplane")});c.dame=Math.floor(c.base_dame*Math.pow(this.airplaneData.level,.31)),c.speed=Math.max(c.base_fire_speed-5e-4*this.airplaneData.level,.1),this._bullet=c,this._bullet.level=this.airplaneData.level,this.schedule(this._createBullet,this._bullet.speed)}this._maxHP=this._currentHP=this.levelData.maxHP,this._patchIndex=1,this._createVirus(!1)},pauseGame:function(){},gameOver:function(){GameState=GAME_STATUS.GAMEOVER,this._stopItemSupport(),this.unschedule(this._createBullet),o.instance.show("GameOverUI")},continue:function(){GameState=GAME_STATUS.PLAYING,this.airplane.x=0,this.airplane.y=-cc.winSize.height/2+200,this.airplane.getComponent("Airplane").setProtected(),this.schedule(this._createBullet,this._bullet.speed)},refreshHP:function(){var e=this;GameState==GAME_STATUS.PLAYING&&(this._currentHP=r.instance.getCurrentHP(),this.levelProgress.progress=this._currentHP/this._maxHP,cc.find("label",this.levelProgress.node).getComponent(cc.Label).string=(100*this.levelProgress.progress).toFixed(2)+"%",0==this._currentHP&&(GameState=GAME_STATUS.LEVEL_COMPLETED,this.unschedule(this._createBullet),this.nextLevel(),cc.tween(this.airplane).to(1.5,{position:cc.v2(this.airplane.x,cc.winSize.height/2+200)},{easing:"quintIn"}).call(function(){e._stopItemSupport(),o.instance.hide("GamePlayUI"),o.instance.raiseAction({command:"lockAll"}),o.instance.show("WinUI",s.Player.get("_levelCoin"))}).start()))},loadBatch:function(){var e=this;cc.director.getScheduler().isScheduled(this._createVirus,this)||this._loadingPatch||(this._loadingPatch=!0,this.scheduleOnce(this._createVirus.bind(this,!0),.5),this.scheduleOnce(function(){e._loadingPatch=!1},2))},registerTouchStart:function(){},unlockAirplane:function(e){e||(e=s.Player.get("level"));var t=AirplaneData.find(function(t){return t.unlock_level==e});return t&&!s.Player.get("airplane."+t.name)?(t.dame=t.base_dame,t.fire_speed=t.base_fire_speed,t.level=1,s.Player.set("airplane."+t.name,t),o.instance.ui.AirplaneUpgradeUI.unlock(t.name),t):null},_onTouchStart:function(){this._startPosition=this.airplane.position},_onTouchMove:function(e){if(GameState==GAME_STATUS.PLAYING||GameState==GAME_STATUS.BOSS){var t=e.getDelta(),n=t.x,i=t.y,a=this.airplane.getPosition();this.airplane.setPosition(cc.v3(a.x+n,a.y+i,0))}},_onTouchEnd:function(){},_createBullet:function(e,t,i,a){if(GameState===GAME_STATUS.PLAYING){a=a||this._bullet.dame||1,i=i||1;for(var o,s=n(this._bullet.bullets);!(o=s()).done;){var r=o.value;2==r.type?i=1:1==r.type&&(this._bullet.level>=30?i=5:this._bullet.level>=20?i=4:this._bullet.level>=10?i=3:this._bullet.level>=5&&(i=2)),a*=(this._support.firepower?2:1)/i;var c=this.airplane.parent.convertToWorldSpaceAR(cc.v2(this.airplane.position).add(r.delta_position));this.bulletManager.create(r.id||0,i,Math.floor(a),c)}}},_createVirus:function(e){if(e){if(this._patchIndex++,cc.log("patchCount",this._patchIndex,this.levelData),this._patchIndex>this.levelData.patchCount)return;this._patchIndex<this.levelData.patchCount?o.instance.pushMessage("The next wave is comming"):this._patchIndex==this.levelData.patchCount&&(this.levelData.isBoss?o.instance.showBoss():o.instance.pushMessage("The last wave is comming"))}this.scheduleOnce(function(){r.instance.loadBatch(e)},e?this.levelData.isBoss&&this._patchIndex==this.levelData.patchCount?4:1:0)},createItemSupport:function(e,t){if(!(this.itemSuppotLayer.childrenCount>1||Math.random()>.05)){if(!t){var n=randomInt(0,Object.keys(ItemSupportType).length-1);t=ItemSupportType[Object.keys(ItemSupportType)[n]]}var i=null;this._itemSupportPool[t].size()>0&&(i=this._itemSupportPool[t].get(this._itemSupportPool[t])),i.parent=this.itemSuppotLayer,i.position=this.itemSuppotLayer.convertToNodeSpaceAR(e)}},startItemSupport:function(e){var t=this;if(!0===this._support[e])return this.resetItemSupport(e);if(this._itemSupportPool[e+"_active"].size()>0){this._support[e]=!0;var n=this._itemSupportPool[e+"_active"].get();cc.Tween.stopAllByTarget(n),n.scale=.8,n.itemType=e,n.parent=this.itemSupportCountdownLayer,"firespeed"==e?this.setBulletSpeed():"callsupport"==e&&this.setCallSupport(),n.getComponent("ItemSupportActive").start(),cc.tween(n).delay(ItemSupportTime).call(function(){t._support[e]=!1,t._itemSupportPool[e+"_active"].put(n),"firespeed"==e?t.setBulletSpeed():"callsupport"==e&&t.setCallSupport()}).start()}},resetItemSupport:function(e){for(var t,i=this,a=function(){var n=t.value;n.itemType===e&&(cc.Tween.stopAllByTarget(n),n.getComponent("ItemSupportActive").start(),cc.tween(n).delay(ItemSupportTime).call(function(){i._support[e]=!1,i._itemSupportPool[e+"_active"].put(n),"firespeed"==e?i.setBulletSpeed():"callsupport"==e&&i.setCallSupport()}).start())},o=n(this.itemSupportCountdownLayer.children);!(t=o()).done;)a()},setBulletSpeed:function(){GameState===GAME_STATUS.PLAYING&&(cc.director.getScheduler().isScheduled(this._createBullet,this)&&cc.director.getScheduler().unschedule(this._createBullet,this),this._support.firespeed?cc.director.getScheduler().schedule(this._createBullet,this,this._bullet.speed/2):cc.director.getScheduler().schedule(this._createBullet,this,this._bullet.speed))},setCallSupport:function(){this._support.callsupport?(this.airplane=_.merge(this.airplane,this.airplaneData),this.smallAirplane_left.active=!0,this.smallAirplane_left.getComponent("SmallAirplane").airplane=this.airplane,this.smallAirplane_left.getComponent("SmallAirplane").show()):this.smallAirplane_left.getComponent("SmallAirplane").hide()},_stopItemSupport:function(){this._support={};for(var e,t=n(_.concat([],this.itemSuppotLayer.children));!(e=t()).done;)e.value.getComponent("ItemSupport").revoke();for(var i,a=n(_.concat([],this.itemSupportCountdownLayer.children));!(i=a()).done;){var o=i.value;this._itemSupportPool[o.itemType+"_active"].put(o)}this.smallAirplane_left.getComponent("SmallAirplane").hide()},getRandomCoin:function(){return 1==this._level?random(40,60):Math.floor(10+Math.random()*Math.pow(this._level,1.2)*6*(this._support.coinbonus?2:1))}}),cc._RF.pop()},{BulletManager:"BulletManager",GameUI:"GameUI",GameUtils:"GameUtils",VirusManager:"VirusManager",sdkbox_config:"sdkbox_config"}],GoldReward:[function(e,t){"use strict";cc._RF.push(t,"0cc155elTJFDp4EudFDQ9C1","GoldReward");var n=e("GameUtils"),i=e("GameUI");cc.Class({extends:cc.Component,properties:{time:3,coinRate:100,label:cc.Label,icon_coin:cc.Node,icon_video:cc.Node},onLoad:function(){this._progress=this.node.getComponent(cc.ProgressBar),this._progress.progress=1,this._maxTime=18e6,cc.tween(this.icon_video).repeatForever(cc.tween().delay(1).to(.3,{scale:1.1}).to(.3,{scale:1})).start(),n.Player.get("lastRewardTime")||n.Player.set("lastRewardTime",cc.sys.now())},onEnable:function(){var e=Math.min(cc.sys.now()-n.Player.get("lastRewardTime"),this._maxTime);cc.log("timing",e),this._progress.progress=e%(1e3*this.time)/(1e3*this.time);var t=this._getIncreaseCoin(e);this.label.string=goldCrarryBit(t),this.icon_video.opacity=t>1e4?200:0},update:function(e){if(cc.sys.now()-n.Player.get("lastRewardTime")>=this._maxTime)this._progress.progress=1;else if(this._progress.progress-=e/this.time,this._progress.progress<=0){this._progress.progress=1;var t=Math.min(cc.sys.now()-n.Player.get("lastRewardTime"),this._maxTime),i=this._getIncreaseCoin(t);this.label.string=goldCrarryBit(i),this.icon_video.opacity=i>1e4?200:0}},onClicked:function(){var e=this;if(!i.instance.isLockedAction(i.ACTIONS.REWARD_COIN)){var t=Math.min(cc.sys.now()-n.Player.get("lastRewardTime"),this._maxTime),a=this._getIncreaseCoin(t);a>0&&(a<1e4?(n.Player.set("lastRewardTime",cc.sys.now()),this.label.string=0,i.instance.createFlyCoin("HomeUI",cc.v2(0,0),a),this._showAds=!1,this.icon_video.opacity=0):() => {}
// top.h5_sdk.showAd("Reward", () => {
//     n.Player.set("lastRewardTime", cc.sys.now()), e.label.string = 0, i.instance.createFlyCoin("HomeUI", cc.v2(0, 0), a), e._showAds = !1, e.icon_video.opacity = 0
// }, () => {})

)}},_getIncreaseCoin:function(e){return Math.floor(this.coinRate*Math.pow(1.02,n.Player.get("level")||1)*e/(1e3*this.time))}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils"}],HomeUI:[function(e,t){"use strict";cc._RF.push(t,"4d1e9PxA6VPcqNYJB57d+dQ","HomeUI");var n=e("GameUtils"),i=e("GameUI");cc.Class({extends:e("NormalUI"),properties:{bottom:cc.Node,animShow:cc.AnimationClip,animHide:cc.AnimationClip,airplane:cc.Node,coinIcon:cc.Node,coinLabel:cc.Label,preLevel:cc.Node,currentLevel:cc.Node,nextLevel:cc.Node,coinEffectLayer:cc.Node,coinPrefab:cc.Prefab,banner:cc.Node},onLoad:function(){this._animated=this.node.getComponent(cc.Animation),this.animShow&&this._animated.addClip(this.animShow,"show"),this.animHide&&this._animated.addClip(this.animHide,"hide"),this._airplaneState="down",this._action=null,this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),cc.systemEvent.on("coin-changed",function(){this.coinLabel.string=goldCrarryBit(n.Player.get("coin"))},this),cc.find("gold_shop",this.bottom).active=false,this._coinPool=new cc.NodePool,this._bannerShowed=!1},start:function(){},_showAction:function(e){i.instance.raiseAction({command:"lockAll",name:null});var t=n.Player.get("level")||1;cc.find("label",this.currentLevel).getComponent(cc.Label).string=t,cc.find("label",this.nextLevel).getComponent(cc.Label).string=t+1,t<=1?this.preLevel.active=!1:(this.preLevel.active=!0,cc.find("label",this.preLevel).getComponent(cc.Label).string=t-1),this.coinLabel.string=goldCrarryBit(n.Player.get("coin")||0),this._animated.play("show"),this.airplane.scale=1.2,this.airplane.x=0,this.airplane.y=-cc.winSize.height/2-100,cc.tween(this.airplane).to(.8,{position:cc.v3(0,-345,0)}).start(),this._showOptions=e},_hideAction:function(){this._animated.play("hide")},_afterHide:function(){this._hidding=!1,i.instance.show("GamePlayUI"),this._super()},_afterShow:function(){if(this._coinPos||(this._coinPos=this.coinIcon.parent.convertToWorldSpaceAR(this.coinIcon.position)),console.log(this.coinIcon.parent.getComponent(cc.Widget),this.coinIcon.parent.position),this._showOptions&&this._showOptions.unlock){var e=cc.Canvas.instance.node.getComponent("Game").unlockAirplane();e&&e.unlock_level>=10&&i.instance.show("UnlockUI",e.name)}else cc.Canvas.instance.node.getComponent("Game").unlockAirplane();2!=n.Player.get("level")||n.Player.get("tutorial_upgrade")?5!=n.Player.get("level")||n.Player.get("tutorial_change_airplane")?i.instance.raiseAction({command:"unlockAll"}):i.instance.raiseAction([{action:"unlock_home_upgrade_button",name:"tutorial_change_airplane"},{action:"show_tutorial_upgrade",name:"tutorial_change_airplane"}]):i.instance.raiseAction([{action:"unlock_home_upgrade_button",name:"tutorial_upgrade"},{action:"show_tutorial_upgrade",name:"tutorial_upgrade"}])},_onTouchEnd:function(){if(!i.instance.isLockedAction("HOME_TOUCH"))if(this._action){switch(this._action){case"upgrade":SoundManager.playEffect("button1Sound"),i.instance.hide("AirplaneUpgradeUI");break;case"coin":SoundManager.playEffect("button1Sound"),i.instance.hide("UpgradeCoinUI");break;case"shop":SoundManager.playEffect("button1Sound"),i.instance.hide("ShopUI")}this._action=null,this._moveAirplane("down"),this._moveBottom()}else this._hidding||(this._hidding=!0,this.hide(),cc.tween(this.airplane).parallel(cc.tween().to(1,{scale:.9}).to(.4,{scale:1}),cc.tween().by(1,{position:cc.v3(0,-120,0)})).call(function(){return cc.Canvas.instance.node.emit("start-game")}).start())},hideBottom:function(){cc.tween(this.bottom).by(.4,{position:cc.v3(0,-this.bottom.height-10,0)}).set({active:!1}).start()},onBottomClick:function(e,t){if(!this._hidding){e.stopPropagation();var n={upgrade:{action:i.ACTIONS.HOME_UPGRADE_TOUCH,ui:"AirplaneUpgradeUI"},coin:{action:"coin",ui:"UpgradeCoinUI"},shop:{action:i.ACTIONS.SHOP_TOUCH,ui:"ShopUI"}};n[t]&&i.instance.isLockedAction(n[t].action)||(SoundManager.playEffect("button1Sound"),"upgrade"==t&&("tutorial_upgrade"!=i.instance.getCurrentAction()&&"tutorial_change_airplane"!=i.instance.getCurrentAction()||(i.instance.raiseAction({command:"lockAction",value:i.ACTIONS.HOME_UPGRADE_TOUCH,name:i.instance.getCurrentAction()}),i.instance.raiseAction([{action:"hideTutorialHand",name:i.instance.getCurrentAction()}]))),this._action?this._action!==t?(i.instance.hideNow(n[this._action].ui),this._action=t,i.instance.show(n[t].ui)):(this._action=null,this._moveAirplane("down"),i.instance.hide(n[t].ui),this._moveBottom()):i.instance.getUIState(n[t].ui)||(this._action=t,this._moveAirplane("up"),this._moveBottom(),i.instance.show(n[t].ui)))}},_moveBottom:function(){this.bottom.stopAllActions(),this._action?cc.tween(this.bottom).parallel(cc.tween().to(.4,{scale:1}),cc.tween().by(.4,{position:cc.v3(85,0,0)})).start():cc.tween(this.bottom).parallel(cc.tween().to(.4,{scaleX:1.2,scaleY:1.1}),cc.tween().by(.4,{position:cc.v3(-85,0,0)})).start()},_moveAirplane:function(e){var t=this;if(e&&-1!==["up","down"].indexOf(e)){this._airplaneState=null,this.airplane.stopAllActions();var n=cc.find("slide_to_play",this.node);switch(e){case"up":cc.tween(n).to(.2,{opacity:0}).start(),cc.tween(this.airplane).parallel(cc.tween().to(.3,{scale:1}),cc.tween().by(.4,{position:cc.v3(0,180,0)})).call(function(){t._airplaneState=e}).start();break;case"down":cc.tween(n).to(.2,{opacity:255}).start(),cc.tween(this.airplane).parallel(cc.tween().to(.3,{scale:1.2}),cc.tween().by(.4,{position:cc.v3(0,-180,0)})).call(function(){t._airplaneState=e,t._action=null}).start()}}},createFlyCoin:function(e,t){var i=this,a=cc.v2(0,0),o=this.coinEffectLayer.convertToNodeSpaceAR(this._coinPos);this._createFlyCoin(20,a,o,function(){var e=n.Player.increase("coin",t);i.coinLabel.string=hpBit(e)})},_getFlyCoin:function(){return this._coinPool.size()>0?this._coinPool.get():cc.instantiate(this.coinPrefab)},_createFlyCoin:function(e,t,n,i){var a=this;this.coinEffectLayer.active=!0;for(var o=function(o){var s=cc.misc.degreesToRadians(360/e*o),r=t.x+200*Math.cos(s),c=t.y+200*Math.sin(s),l=a._getFlyCoin();l.parent=a.coinEffectLayer,l.position=t,l.scale=1;var u=random(.4,.6)/1.5,d=random(.89,1)/1.5,h=cc.tween().to(.05,{scale:1.1}).to(.05,{scale:1});cc.tween(l).to(u,{position:cc.v3(r,c,0)}).to(d,{position:cc.v3(n.x,n.y,0)},{easing:"smooth"}).call(function(){o===e-1&&(i&&i(),SoundManager.playEffect("coinSound"))}).then(h).call(function(){a._coinPool.put(l),o===e-1&&a.scheduleOnce(function(){a.coinEffectLayer.active=!1},.2)}).start()},s=0;s<e;s++)o(s)},_createFlyCoin2:function(e,t,n,i){for(var a=this,o=function(o){var s=cc.misc.degreesToRadians(random(0,360)),r=t.x+200*Math.cos(s),c=t.y+200*Math.sin(s),l=a._getFlyCoin();l.position=t,l.parent=a.coinEffectLayer,l.scale=1;var u=randomInt(.4,.6)/1.5,d=randomInt(.89,1)/1.5,h=cc.tween().to(.05,{scale:1.2}).to(.05,{scale:1});cc.tween(l).to(u,{position:cc.v2(r,c,0)}).to(d,{position:cc.v2(n.x,n.y,0)},{easing:"smooth"}).call(function(){o===e-1&&(i&&i(),SoundManager.playEffect("coinSound"))}).then(h).call(function(){a._coinPool.put(l)}).start()},s=0;s<e;s++)o(s)}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",NormalUI:"NormalUI"}],ItemSupportActive:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"df4e5KwdMNEIr3eYecBCUDw","ItemSupportActive"),cc.Class({extends:cc.Component,properties:{progress:{default:[],type:[cc.ProgressBar]}},onLoad:function(){this._totalLength=0;for(var e,t=n(this.progress);!(e=t()).done;){var i=e.value;this._totalLength+=i.node.width}for(var a,o=0,s=n(this.progress);!(a=s()).done;){var r=a.value;r.timeScale=ItemSupportTime*r.node.width/this._totalLength,r.timeDelay=o,o+=r.timeScale}this._currentIndex=0},start:function(){for(var e,t=n(this.progress);!(e=t()).done;)e.value.progress=1;this._currentIndex=0,cc.director.getScheduler().isScheduled(this.updateProgress,this)||this.schedule(this.updateProgress,.016)},restart:function(){for(var e,t=n(this.progress);!(e=t()).done;)e.value.progress=1;this._currentIndex=0},updateProgress:function(e){if(!this.progress[this._currentIndex])return this.unschedule(this.updateProgress);this.progress[this._currentIndex].progress-=e/this.progress[this._currentIndex].timeScale,this.progress[this._currentIndex].progress<=0&&this._currentIndex++},unuse:function(){}}),cc._RF.pop()},{}],ItemSupport:[function(e,t){"use strict";cc._RF.push(t,"0b9d6tPt95AyaJ7HF1NkdW2","ItemSupport"),cc.Class({extends:cc.Component,properties:{itemType:{default:null,visible:!1,notify:function(){this._changeSprite()}}},start:function(){},update:function(e){this.node.y-=200*e,this.node.y<-cc.winSize.height/2-200&&this.revoke()},_changeSprite:function(){var e=this;cc.resources.load("textures/item_support",cc.SpriteAtlas,function(t,n){if(t)return cc.log(t);e.node.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("item_"+e.itemType)})},revoke:function(){this.pool&&this.pool.put(this.node)},reuse:function(e){this.pool=e},unuse:function(){}}),cc._RF.pop()},{}],NormalUI:[function(e,t){"use strict";cc._RF.push(t,"df98cps7htOfIF4lrNb7F7L","NormalUI"),cc.Class({extends:e("BaseUI")}),cc._RF.pop()},{BaseUI:"BaseUI"}],PauseUI:[function(e,t){"use strict";cc._RF.push(t,"bc4f9W1/CpPS6hv+56kdz/A","PauseUI"),cc.Class({extends:e("PopUpUI"),properties:{},start:function(){}}),cc._RF.pop()},{PopUpUI:"PopUpUI"}],PopUpUI:[function(e,t){"use strict";cc._RF.push(t,"04720K+et1MOL7yET04YGqw","PopUpUI"),cc.Class({extends:e("BaseUI")}),cc._RF.pop()},{BaseUI:"BaseUI"}],Preload:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"5afe9FTPplDmJlhClGWI482","Preload");var o=e("GameUtils"),s=e("VirusManager"),r=e("sdkbox_config");cc.Class({extends:cc.Component,properties:{progressBar:cc.ProgressBar,persistNode:cc.Node},__preload:function(){cc.winSize.height/cc.winSize.width<1.77&&(cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!0)},onLoad:function(){this.progressBar.progress=0,this.homeLoaded=!1,this.preLoaded=!1,this.thumb=cc.find("thumb",this.progressBar.barSprite.node),this.thumbPercent=.5*this.thumb.width/this.progressBar.totalLength,this._nextScene="Main",this._preLoading=!1,cc.game.addPersistRootNode(this.persistNode)},start:function(){var e=this;this.scheduleOnce(function(){return s.instance.createVirus()},.5),o.IAP.getPurchaseHistory().then(function(t){console.log("preload getPurchaseHistory",t);for(var i,a=Object.values(r.FBInstant.iap.items),o=function(){var t=i.value,n=a.find(function(e){return e.id===t.productID&&"non_consumable"!==e.type})},s=n(t);!(i=s()).done;)o()}).catch(function(e){cc.log(e)})},_processItem:function(e){switch(cc.log("_processItem",e),e.name){case o.IAP.PRODUCTS.COIN_PACKAGE1:o.Player.increase("coin",1e7);break;case o.IAP.PRODUCTS.UNLOCK_AIRPLANE:var t=o.Player.get("level"),n=AirplaneData.filter(function(e){return e.unlock_level>t&&!o.Player.get("airplane."+e.name)});if(n){n=_.orderBy(n,["unlock_level"],["asc"]);for(var i=0;i<5;i++)if(void 0!==n[i]){var a=n[i];cc.log("unlock",a),a.level=1,o.Player.set("airplane."+a.name,a)}}}},update:function(){"undefined"==typeof FBInstant?(this.progressBar.progress<=.7||this.progressBar.progress<=.9&&this.preLoaded||s.instance._totalVirus===s.instance._totalVirusLoaded)&&(this.progressBar.progress+=.01,s.instance._totalVirus!==s.instance._totalVirusLoaded||this._preLoading||(this._preLoading=!0,cc.director.preloadScene(this._nextScene,function(){this.preLoaded=!0}.bind(this)))):(this.progressBar.progress<=.6||this.preLoaded&&this.progressBar.progress<=.8||1==isInitPlayerData&&1==isInitSetting)&&(this.progressBar.progress+=.01,s.instance._totalVirus!==s.instance._totalVirusLoaded||this._preLoading||(this._preLoading=!0,cc.director.preloadScene(this._nextScene,function(){this.preLoaded=!0}.bind(this)))),this.progressBar.progress<=this.thumbPercent?this.thumb.opacity=this.progressBar.progress/this.thumbPercent*255:this.thumb.opacity=255,this.progressBar.progress>=1&&(this.thumb.opacity=0),!this.homeLoaded&&this.progressBar.progress>=1&&this.preLoaded&&(this.homeLoaded=!0,cc.director.loadScene(this._nextScene,function(){}))}}),cc._RF.pop()},{GameUtils:"GameUtils",VirusManager:"VirusManager",sdkbox_config:"sdkbox_config"}],ShopUI:[function(e,t){"use strict";cc._RF.push(t,"f371dAhT5NN45EcD0UOIkjR","ShopUI");var n=e("GameUtils"),i=e("GameUI");cc.Class({extends:e("PopUpUI"),properties:{animShow:cc.AnimationClip,animHide:cc.AnimationClip},onLoad:function(){this._animated=this.node.getComponent(cc.Animation),this.animShow&&this._animated.addClip(this.animShow,"show"),this.animHide&&this._animated.addClip(this.animHide,"hide"),cc.systemEvent.on("iapOnRestored",this._onRestored,this)},start:function(){},_showAction:function(){this._animated.play("show")},_finishShowAnim:function(){this._showed=!0},_hideAction:function(){this._animated.play("hide")},_finishHideAnim:function(){this._afterHide()},buyItemClicked:function(e,t){var a=this;cc.log("buyItemClicked",t);var o={remove_ads:n.IAP.PRODUCTS.REMOVE_ADS,coin_package:n.IAP.PRODUCTS.COIN_PACKAGE,unlock_airplane:n.IAP.PRODUCTS.UNLOCK_AIRPLANE};if("unlock_airplane"==t){var s=n.Player.get("airplane");if(Object.keys(s).length==AirplaneData.length)return i.instance.pushMessage("You are already unlocked all airplane!")}n.IAP.purchase(o[t]).then(function(e){a.itemBuySuccess(e)}).catch(function(e){"USER_INPUT"!==e.code&&i.instance.pushMessage("Purchase Error!\nPlease try again later.")})},restorePurchase:function(){n.IAP.restore()},itemBuySuccess:function(e){switch(e.name){case n.IAP.PRODUCTS.REMOVE_ADS:n.Setting.set("ads",!1);break;case n.IAP.PRODUCTS.COIN_PACKAGE1:this._increaseCoin(1e7);break;case n.IAP.PRODUCTS.UNLOCK_AIRPLANE:this._unlockAirplane()}},_onRestored:function(e){switch(e.name){case n.IAP.PRODUCTS.REMOVE_ADS:n.Setting.set("ads",!1),this.node.parent.getComponent(cc.Widget).bottom=0}},_increaseCoin:function(e){n.Player.increase("coin",e),cc.systemEvent.emit("coin-changed")},_unlockAirplane:function(){var e=n.Player.get("level"),t=AirplaneData.filter(function(t){return t.unlock_level>e&&!n.Player.get("airplane."+t.name)});if(t){t=_.orderBy(t,["unlock_level"],["asc"]);for(var a=0;a<5;a++)if(void 0!==t[a]){var o=t[a];cc.log("unlock",o),o.level=1,n.Player.set("airplane."+o.name,o),i.instance.ui.AirplaneUpgradeUI.unlock(o.name)}}}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",PopUpUI:"PopUpUI"}],SineWave:[function(e,t){"use strict";cc._RF.push(t,"4e1390FAQNFZZrlE+gbpSJ4","SineWave"),Math.PI;var n=2*Math.PI,i=Math.PI/2,a={linear:function(e,t){return t},sinein:function(e,t){return t*(Math.sin(e*Math.PI-i)+1)*.5},sineout:function(e,t){return t*(Math.sin(e*Math.PI+i)+1)*.5},sineinout:function(e,t){return t*(Math.sin(e*n-i)+1)*.5}},o={};for(var s in a)o[s]=-1;a.Enum=cc.Enum(o);var r={sine:function(e){return Math.sin(e)},sign:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},square:function(e){return r.sign(Math.sin(e*n))},sawtooth:function(e){return 2*(e-Math.floor(e+.5))},triangle:function(e){return Math.abs(r.sawtooth(e))}},c={};for(var l in r)c[l]=-1;r.Enum=cc.Enum(c);var u=cc.Class({name:"Wave",properties:{timeModifier:1,amplitude:50,wavelength:50,segmentLength:10,lineWidth:1,waveType:{default:r.Enum.sine,type:r.Enum},easeType:{default:a.Enum.sinein,type:a.Enum},strokeColor:cc.color(255,255,255,100)}}),d=cc.Class({extends:cc.Component,properties:{speed:1,waves:{default:function(){return[new u]},type:[u]}},onLoad:function(){this.time=0,this.ctx=this.getComponent(cc.Graphics),this.ctx.lineCap=cc.Graphics.LineCap.BUTT,this.ctx.lineJoin=cc.Graphics.LineJoin.ROUND;for(var e=this.waves,t=0,n=e.length;t<n;t++)e[t].waveFn=r[r.Enum[e[t].waveType]].bind(r),e[t].easeFn=a[a.Enum[e[t].easeType]].bind(a)},update:function(e){this.ctx.clear(),this.yAxis=0,this.width=cc.winSize.height,this.waveWidth=.95*this.width,this.waveLeft=.25*this.width,this.time+=e;for(var t=this.waves,n=0,i=t.length;n<i;n++){var a=this.waves[n].timeModifier||1;this.drawWave(this.time*a,t[n])}},drawWave:function(e,t){this.ctx.lineWidth=t.lineWidth,this.ctx.strokeColor=t.strokeColor,this.ctx.moveTo(0,this.yAxis),this.ctx.lineTo(this.waveLeft,this.yAxis);for(var n=0;n<this.waveWidth;n+=t.segmentLength){var i=this.getPoint(e,n,t);this.ctx.lineTo(i.x,i.y)}this.ctx.lineTo(this.width,this.yAxis),this.ctx.stroke()},getPoint:function(e,t,n){var i=e*this.speed+(-this.yAxis+t)/n.wavelength,a=n.waveFn(i),o=n.easeFn(t/this.waveWidth,n.amplitude);return{x:i=t+this.waveLeft,y:a=o*a+this.yAxis}}});t.exports=d,cc._RF.pop()},{}],SmallAirplane:[function(e,t){"use strict";cc._RF.push(t,"963b8dp0MlMwr1Z2UUc3B+0","SmallAirplane");var n=e("GameUtils");cc.Class({extends:cc.Component,properties:{airplane:{default:null,type:cc.Node,notify:function(){this._onSetAirplane()}},bulletManager:e("BulletManager"),followDelta:cc.Vec2},onLoad:function(){this._circleDis=100,this._circleDisSqr=this._circleDis*this._circleDis},show:function(){if(!cc.director.getScheduler().isScheduled(this._createBullet,this)){var e=n.Player.get("airplane."+n.Player.get("current_airplane")),t=AirplaneData.find(function(e){return e.name==n.Player.get("current_airplane")});this.airplane.dame=Math.floor(t.base_dame*Math.pow(e.level,.31)),this.airplane.fire_speed=Math.max(t.base_fire_speed-5e-4*e.level,.1);var i=1;e.level>=30?i=5:e.level>=20?i=4:e.level>=10?i=3:e.level>=5&&(i=2),this.airplane.bulletNumber=i,this.schedule(this._createBullet,this.airplane.fire_speed||.085,cc.macro.REPEAT_FOREVER,.2)}},hide:function(){this.unschedule(this._createBullet),this.node.active=!1},_onSetAirplane:function(){this.airplane},update:function(e){if(GameState===GAME_STATUS.PLAYING&&this.airplane){var t=this.node.position.sub(this.airplane.position);t.magSqr()>this._circleDisSqr&&(this._targetPos=this.airplane.position.add(t.normalize().mul(this._circleDis))),this.node.position=cc.v2(this.node.position).lerp(cc.v2(this._targetPos),4.89*e)}},_createBullet:function(){if((GameState===GAME_STATUS.PLAYING||GameState===GAME_STATUS.BOSS)&&this.airplane){var e=this.node.parent.convertToWorldSpaceAR(this.node.position);e.y+=100;var t=this.airplane.bulletType||3,n=this.airplane.bulletNumber||1,i=Math.floor(this.airplane.dame/n)||1;this.bulletManager.create(t,n,i,e)}}}),cc._RF.pop()},{BulletManager:"BulletManager",GameUtils:"GameUtils"}],SoundManager:[function(e,t){"use strict";cc._RF.push(t,"fb0ablUZg9DnYdBQDF53sN8","SoundManager");var n=e("GameUtils");cc.Class({extends:cc.Component,properties:{homeBgMusic:{type:cc.AudioClip,default:null},bgMusic:{type:cc.AudioClip,default:null},loseSound:{type:cc.AudioClip,default:null},dieSound:{type:cc.AudioClip,default:null},winSound:{type:cc.AudioClip,default:null},countdownSound:{type:cc.AudioClip,default:null},upgradeSound:{type:cc.AudioClip,default:null},button1Sound:{type:cc.AudioClip,default:null},button2Sound:{type:cc.AudioClip,default:null},bulletSound:{type:cc.AudioClip,default:null},bulletSound1:{type:cc.AudioClip,default:null},bulletSound2:{type:cc.AudioClip,default:null},bulletSound3:{type:cc.AudioClip,default:null},bulletSound4:{type:cc.AudioClip,default:null},bulletSound5:{type:cc.AudioClip,default:null},bulletSound6:{type:cc.AudioClip,default:null},coinSound:{type:cc.AudioClip,default:null},explodeSound:{type:cc.AudioClip,default:null},explodeSound2:{type:cc.AudioClip,default:null},splitSound:{type:cc.AudioClip,default:null},wairningSound:{type:cc.AudioClip,default:null}},statics:{instance:null},onLoad:function(){SoundManager=this,this._musicName=null},play:function(e,t,n){null==t&&(t=!1);var i=_.get(this,e);return i?cc.audioEngine.play(i,t,n):null},playMusic:function(e,t){if(n.Setting.get("music")?cc.audioEngine.setMusicVolume(1):cc.audioEngine.setMusicVolume(0),this._musicName==e&&cc.audioEngine.isMusicPlaying())n.Setting.get("music")&&cc.audioEngine.getState(this._musicId)===cc.audioEngine.AudioState.PAUSED&&(cc.audioEngine.setMusicVolume(1),cc.audioEngine.resumeMusic());else{null==t&&(t=!1);var i=_.get(this,e);if(i){var a=cc.audioEngine.playMusic(i,t);return this._musicName=e,this._musicId=a,a}}return null},playEffect:function(e,t,i){if(null==t&&(t=!1),null==i&&(i=1),n.Setting.get("sound")){var a=_.get(this,e);if(a)return cc.audioEngine.setEffectsVolume(i),cc.audioEngine.playEffect(a,t)}return null},pause:function(e){if(cc.audioEngine._id2audio){var t=_.find(cc.audioEngine._id2audio,function(t){return t.name==e});t&&cc.audioEngine.pause(t.id)}},pauseMusic:function(){n.Setting.get("music")&&null!==this._musicId&&cc.audioEngine.getState(this._musicId)===cc.audioEngine.AudioState.PAUSED?cc.audioEngine.resumeMusic():cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic()},resumeMusic:function(){n.Setting.get("music")&&null!==this._musicId&&(cc.audioEngine.setMusicVolume(1),cc.audioEngine.getState(this._musicId)===cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resumeMusic())},pauseAllEffects:function(){n.Setting.get("sound")?cc.audioEngine.resumeAllEffects():cc.audioEngine.pauseAllEffects()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],TutorialStep:[function(e,t){"use strict";cc._RF.push(t,"5b6a2MD4iNJdbfciVUVmk4p","TutorialStep"),t.exports={lockAll:{command:"lockAll"},unlock_home_upgrade_button:{command:"unlockAction",value:"HOME_UPGRADE_TOUCH"},show_tutorial_upgrade:{command:"showTutorialHandAtNodePath",value:{nodePath:"Root/HomeUI/Bottom/ship",angle:180,flipX:-1,offset:{x:50,y:80}}},show_tutorial_upgrade_step2:{command:"showTutorialHandAtNodePath",value:{nodePath:"Root/AirplaneUpgradeUI/level/frame_gold",angle:0,offset:{x:70,y:-20}}},show_tutorial_upgrade_item_click:{command:"showTutorialHandAtNodePath",value:{nodePath:"Root/AirplaneUpgradeUI/AirplaneList/view/content/airplane_1",angle:0,offset:{x:30,y:-20}}},hideTutorialHand:{command:"hideTutorialHand"}},cc._RF.pop()},{}],TutorialUI:[function(e,t){"use strict";cc._RF.push(t,"32ba1PFBaFGJpeMC1Ea5hjx","TutorialUI");var n=cc.Class({extends:cc.Component,properties:{mask:cc.Node,hand:cc.Node},statics:{instance:null},onLoad:function(){n.instance=this},start:function(){},showTutorialHand:function(e){cc.log("showTutorialHand",e),this.hand.active=!0;var t=this.HandDummyPosition.getChildByName(e.pos);this.hand.position=t.position,this.hand.getComponent(cc.Animation).play(e.anim),this.hand.scaleX=e.needFlip?-1:1,e.icon?(this.TutorialIconOnHand.node.active=!0,ImageCached.setSpriteAsync(e.icon.name,this.TutorialIconOnHand),this.TutorialIconOnHand.node.scale=e.icon.scale):this.TutorialIconOnHand.node.active=!1},showTutorialHandAtNodePath:function(e){cc.log("showTutorialHandAtNodePath",e),this.hand.active=!0;var t=cc.find(e.nodePath,this.node)||cc.find(e.nodePath,cc.Canvas.instance.node)||cc.find(e.nodePath);if(t){var n=t.convertToWorldSpaceAR(new cc.Vec2(0,0)),i=this.node.convertToNodeSpaceAR(n);t.width,t.height,e.offset&&(i.x+=e.offset.x,i.y+=e.offset.y),this.hand.position=i,this.hand.getComponent(cc.Animation).play(e.anim),this.hand.scaleX=e.flipX?e.flipX:1,this.hand.scaleY=e.flipY?e.flipY:1,this.hand.angle=e.angle?e.angle:0}},showTutorialTouch:function(e){cc.log("showTutorialTouch",e),this.hand.active=!0,this.hand.getComponent(cc.Animation).play("handTouch"),this.hand.position=e},hideTutorialHand:function(){cc.log("hideTutorialHand"),this.hand.active=!1}});cc._RF.pop()},{}],UnlockUI:[function(e,t){"use strict";cc._RF.push(t,"81cb5Qf5LRHnoYHB+njMCYL","UnlockUI");var n=e("GameUtils"),i=e("GameUI");cc.Class({extends:e("PopUpUI"),properties:{preview:cc.Sprite,atlas:cc.SpriteAtlas,animShow:cc.AnimationClip,animHide:cc.AnimationClip},onLoad:function(){this._animated=this.node.getComponent(cc.Animation),this.animShow&&this._animated.addClip(this.animShow,"show"),this.animHide&&this._animated.addClip(this.animHide,"hide")},start:function(){},_showAction:function(e){this.airplaneName=e,this.preview.spriteFrame=this.atlas.getSpriteFrame(e),this._animated.play("show")},_afterShow:function(){this._super()},_hideAction:function(){this._animated.play("hide")},onUseNow:function(){var e=this;
    // top.h5_sdk.showAd("Reward",()=>{n.Player.set("airplane."+e.airplaneName+".level",10),i.instance.ui.AirplaneUpgradeUI.itemClicked(null,e.airplaneName),e.hide()},()=>{})
}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",PopUpUI:"PopUpUI"}],UpgradeEffect:[function(e,t){"use strict";cc._RF.push(t,"d1070WrF7NCQ5Zx8HyxF52M","UpgradeEffect"),cc.Class({extends:cc.Component,properties:{},start:function(){},_finishAnim:function(){this.node.active=!1}}),cc._RF.pop()},{}],VirusBatchPath:[function(e,t){"use strict";cc._RF.push(t,"3049eSYBf5LGJaH66FxjM35","VirusBatchPath"),t.exports=[{id:1,small:{minCount:3,maxCount:5},medium:{minCount:2,maxCount:3},large:{minCount:1,maxCount:3}},{id:2,small:{minCount:2,maxCount:5},medium:{minCount:2,maxCount:3},large:{minCount:1,maxCount:3},huge:{minCount:0,maxCount:1}},{id:3,small:{minCount:2,maxCount:4},medium:{minCount:1,maxCount:3},large:{minCount:1,maxCount:3},huge:{minCount:0,maxCount:1}},{id:4,small:{minCount:3,maxCount:4},medium:{minCount:2,maxCount:3},large:{minCount:1,maxCount:2}},{id:5,small:{minCount:2,maxCount:3},medium:{minCount:2,maxCount:3},large:{minCount:1,maxCount:2},huge:{minCount:1,maxCount:2}},{id:6,small:{minCount:2,maxCount:4},medium:{minCount:1,maxCount:3},large:{minCount:1,maxCount:2},huge:{minCount:1,maxCount:2}},{id:7,small:{minCount:2,maxCount:3},medium:{minCount:1,maxCount:2},large:{minCount:1,maxCount:2},huge:{minCount:1,maxCount:2},boss:{minCount:1,maxCount:1}}],cc._RF.pop()},{}],VirusLevel:[function(e,t){"use strict";cc._RF.push(t,"cee21yruN5JF5+QI2etvJo/","VirusLevel"),t.exports=[{id:0,basic_hp:1,patchPath:[1,2,7]},{id:1,basic_hp:1,patchPath:[1,3,6]},{id:2,basic_hp:1,patchPath:[2,4,5]},{id:3,basic_hp:1,patchPath:[2,5,3]},{id:4,basic_hp:1,patchPath:[2,6,1]}],cc._RF.pop()},{}],VirusManager:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"f20cainp9RLKbukfJYQw+VF","VirusManager");var o=e("VirusBatchPath"),s=e("VirusLevel"),r=[{id:1,count:[2,0]},{id:2,count:[3,0]},{id:3,count:[5,0]},{id:4,count:[1,2]},{id:5,count:[1,3]},{id:6,count:[2,3]},{id:7,count:[1,4]},{id:8,count:[2,4]},{id:9,count:[1,5]},{id:10,count:[2,5]},{id:11,count:[3,5]}],c={4:"huge",3:"large",2:"medium",1:"small"},l=cc.Class({extends:cc.Component,properties:{virusPrefabs:{default:[],type:[cc.Prefab]}},statics:{instance:null},onLoad:function(){l.instance=this,this._totalVirus=20*this.virusPrefabs.length,this._totalVirusLoaded=0,this.virusPool={};for(var e=1;e<=this.virusPrefabs.length;e++)this.virusPool[e]=new cc.NodePool("Virus");this._virusType=Object.keys(VirusData.size),this._allVirus=[],this.createVirus()},start:function(){},createVirus:function(){var e=this;Array(this._totalVirus).fill(1).forEach(function(t,n){var i=Math.floor(n/20)+1,a=cc.instantiate(e.virusPrefabs[i-1]);e.virusPool[i].put(a),e._totalVirusLoaded++})},sleepAllVirus:function(){this.virusLayer.children.forEach(function(e){e.getComponent("Virus").sleep=!0})},wakeupAllVirus:function(){this.virusLayer.children.forEach(function(e){e.getComponent("Virus").sleep=!1})},reset:function(){return this._patchIndex=0,this},loadLevel:function(e){var t=this;this._level=e;var i=s.find(function(e){return e.id==t._level%5});this._maxHP=0;var a=[];this._allVirus=[],this._patchData=[];var o=!1;if(i){var r=1,c=0,l=null,u=0,d=AirplaneData.filter(function(e){return e.unlock_level<=t._level});d.length>0&&(u=(l=_.maxBy(d,"unlock_level")).base_dame*Math.pow(this._level-l.unlock_level+1,.31)*4);for(var h,p=n(i.patchPath);!(h=p()).done;){var f=h.value,m=this.getPatch(f);if(m){for(var g,v=n(this._virusType);!(g=v()).done;){var y=g.value;if(void 0!==m[y]){var A=m[y];if("boss"===y&&(o=!0),A.minCount){A.maxCount=void 0===A.maxCount?A.minCount:Math.max(A.minCount,A.maxCount);for(var b=Math.floor(Math.random()*(A.maxCount-A.minCount))+A.minCount,S=0;S<b;S++){var I=VirusData.size[y],w={id:r.toString()+"."+(S+1).toString(),level:1,virusType:y,hp:this._level<20?1+Math.floor(this._level*Math.random()*I.hp):Math.floor(u*random(.8,1)*I.hp*(1+.2*Math.floor(this._level/21))),scale:Math.random()*(I.maxScale-I.minScale)+I.minScale,patchIndex:c,poolId:randomInt(1,this.virusPrefabs.length),split:!1},C=this.createSplit(w);C.length>0&&(a=_.concat(a,C),w.split=!0),a.push(w)}}r++}}c++}}a.length>0&&(this._maxHP+=_.sumBy(a,"hp"),this._patchData=a)}return this._patchIndex=0,{maxHP:this._maxHP,patchCount:i.patchPath.length,isBoss:o}},loadBatch:function(e){var t=this;e&&this._patchIndex++;for(var i,a=n(this._patchData.filter(function(e){return e.patchIndex==t._patchIndex&&1==e.level}));!(i=a()).done;){var o=i.value,s=this._createVirus(o);s.parent=this.virusLayer;var r=s.getComponent("Virus");s.y=random(cc.winSize.height/2,cc.winSize.height/2+150),s.x=random(-cc.winSize.width/2+50,cc.winSize.width/2-50),s.getComponent("Virus").init(o),r.randomSpeed(),GameState!==GAME_STATUS.PLAYING&&GameState!=GAME_STATUS.BOSS||r.startRun(),this._patchData.splice(this._patchData.indexOf(o),1)}return[]},_createVirus:function(e){var t=null,n=e.poolId||randomInt(1,4);return this.virusPool[n].size()>0?t=this.virusPool[n].get(this.virusPool[n]):(t=cc.instantiate(this.virusPrefabs[n-1])).getComponent("Virus").virusPool=this.virusPool[n],t.name="virus_"+e.id,t.poolId=n,t.scale=e.scale,t.getComponent("Virus").virusManager=this,t},clearVirus:function(e){this.virusPool[e.poolId].put(e)},splitVirus:function(e){var t=_.clone(e),i=!1,a=this._patchData.filter(function(e){return e.patchIndex==t.patchIndex&&e.level==t.level+1&&e.parentId==t.vId&&e.hp>0});if(a.length>0){for(var o,s=n(a);!(o=s()).done;){var r=o.value,c=this._createVirus(r);c.parent=this.virusLayer,c.x=e.position.x,c.y=e.position.y;var l=c.getComponent("Virus");c.getComponent("Virus").init(r),l.position=cc.v2(c.x,c.y),l.randomSpeed(),l.m_Speed.x*=Math.random()>.5?-1:1,l.m_Speed.y*=-1,GameState!==GAME_STATUS.PLAYING&&GameState!=GAME_STATUS.BOSS||l.startRun(),this._patchData.splice(this._patchData.indexOf(r),1)}i=!0}return i},getSplit:function(e){return r.find(function(t){return t.id===e})||null},createSplit:function(e){if("small"==e.virusType)return[];var t=[],n=0;switch(e.virusType){case"medium":n=1;break;case"large":n=2;break;case"huge":n=3;break;case"boss":n=4}for(var i=2,a=e.hp,o=1;i>0;){var s=randomInt(1,n),r=_.clone(e);r.hpRate=s,r.virusType=c[s],r.parentId=e.id,r.id=e.id+"."+o.toString(),r.level=e.level+1,r.scale=Math.random()*(VirusData.size[r.virusType].maxScale-VirusData.size[r.virusType].minScale)+VirusData.size[r.virusType].minScale,t.push(r),o++,i--}var l=0;if(t.length>0){t=_.orderBy(t,"hpRate","asc");for(var u=a/_.sumBy(t,"hpRate"),d=0;d<t.length;d++){d==t.length-1?t[d].hp=Math.max(a-l,1):(t[d].hp=Math.max(Math.floor(u*t[d].hpRate),1),l+=t[d].hp);var h=this.createSplit(t[d]);h.length>0&&(t=_.concat(t,h))}}return t},getPatch:function(e){return o.find(function(t){return t.id==e})||null},getCurrentHP:function(){var e=0;return(e+=_.sumBy(this.virusLayer.children,"hp"))+_.sumBy(this._patchData,"hp")}});cc._RF.pop()},{VirusBatchPath:"VirusBatchPath",VirusLevel:"VirusLevel"}],Virus:[function(e,t){"use strict";cc._RF.push(t,"a58e5BQRAtDs62BSe60szom","Virus");var n=e("GameUtils"),i=e("GameUI");cc.Class({extends:cc.Component,properties:{body:cc.Node,bodyType:{default:0,visible:!1,notify:function(){this._onBodyChanged()}},virusType:{default:1,visible:!1,notify:function(){this._onTypeChanged()}},m_Hp:cc.Label,m_Speed:{default:cc.v2(0,0),visible:!1,notify:function(){}},hp:{default:0,visible:!1,notify:function(e){this._onHpChange(e)}},bulletExplode:cc.Prefab,explodeLayer:cc.Node,dragonBones:{type:dragonBones.ArmatureDisplay,default:null},sleep:{default:!1,visible:!1,notify:function(){this._onSleepChanged()}},scale:{default:1,visible:!1,notify:function(){cc.Tween.stopAllByTag(0),this.node.scale=this.scale,this._scaleAction=cc.tween().to(.02,{scale:this.scale-.13}).to(.02,{scale:this.scale})}},_zoomScale:1},onLoad:function(){this.sleep=!0;var e=randomInt(165,195),t=randomInt(4,10);cc.tween(this.body).repeatForever(cc.tween().by(t,{angle:e}).by(t,{angle:-e})).start(),this.speedRatio=1,this.scaling=!1,this._scaleAction=cc.tween().to(.02,{scale:this.scale-.13}).to(.02,{scale:this.scale}),this._scaleAction.tag=0,this.position=this.node.position,this.minY=-cc.winSize.height/2-300,this.maxY=cc.winSize.height/2+300,this.minX=cc.winSize.width/2-40,this._displayName=null},init:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];"id"==i?(this.vId=e[i],this.node.vId=e[i]):(this[i]=e[i],this.node[i]=e[i])}var a=randomInt(122,167),o=randomInt(146,386);this.setSpeed(cc.v2(a,o))},updatePos:function(e){this.sleep||0==this.hp||(this.node.y-=this.m_Speed.y*e*this.speedRatio,this.m_Speed.y>0&&this.node.y<this.minY?(this.node.y=this.maxY,this.randomSpeed()):this.m_Speed.y<0&&this.node.y>cc.winSize.height/2&&(this.m_Speed.y*=-1),(this.m_Speed.x>0&&this.node.x>this.minX||this.m_Speed.x<0&&this.node.x<-this.minX)&&(this.m_Speed.x*=-1),this.node.x+=this.m_Speed.x*e*this.speedRatio,this.position=this.node.position)},_onBodyChanged:function(){this._armatureKey=this.body.getComponent(dragonBones.ArmatureDisplay).getArmatureKey()},_onTypeChanged:function(){var e=VirusData.size[this.virusType];this._sizeData=VirusData.size[this.virusType],this.node.scale=Math.random()*(e.maxScale-e.minScale)+e.minScale},_onHpChange:function(){var e=this;this.hp<0&&(this.hp=0),this.node.hp=this.hp,this.m_Hp.string=hpBit(this.hp)+"\n",this._reinit&&(this._reinit=!1,this._originHp=this.hp),0==this.hp&&(this.sleep=!0,this.body.stopAllActions(),this.m_Hp.node.active=!1,i.instance.shake(),n.vibrate(30,100),this.split?SoundManager.playEffect("explodeSound"):SoundManager.playEffect("explodeSound2"),this.node.parent.parent.getComponent("GamePlayUI").createFlyCoin(this.node.position),cc.Canvas.instance.node.getComponent("Game").createItemSupport(this.node.parent.convertToWorldSpaceAR(this.node.position)),this.body.getComponent(dragonBones.ArmatureDisplay).animationName="die",this.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("die",1),this.body.getComponent(dragonBones.ArmatureDisplay).once(dragonBones.EventObject.COMPLETE,function(){e.node.parent.childrenCount<=1&&cc.Canvas.instance.node.getComponent("Game").loadBatch(),e.dispatch()}),this.virusManager&&this.virusManager.splitVirus(this)),cc.Canvas.instance.node.getComponent("Game").refreshHP()},_changeBody:function(e){this._factory=dragonBones.CCFactory.getInstance(),this._armatureKey||(this._armatureKey=this.dragonBones.getArmatureKey()),this._armature||(this._armature=this.dragonBones.armature()),this._slot||(this._slot=this._armature.getSlot("body"));var t=this.dragonBones._factory;t&&this._armatureKey&&this._slot&&e&&(this._slot.childArmature=t.buildArmature(e,this._armatureKey),this._displayName=e,this.body.getComponent(dragonBones.ArmatureDisplay).animationName="normal",this.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("normal",0))},randomSpeed:function(){this.m_Speed.x=randomInt(122,167),this.m_Speed.y=randomInt(146,386),randomInt(0,100)>50&&(this.m_Speed.x*=-1)},onCollisionEnter:function(e){"Bullet"==e.node.group&&this.hp>0&&this.node.position.y<cc.winSize.height/2&&(this.unschedule(this._resetSpeedRatio),this.speedRatio=.7,cc.Tween.stopAllByTarget(this.node),this._scaleAction.clone(this.node).start(),this.hp>0&&(this.hp-=Math.min(this.hp,Math.floor(e.node.dame)||1),ExplodeManager.createBulletExplode(cc.v2(e.world.aabb.center.x,e.world.aabb.center.y)),e.node.getComponent("Bullet").hit(),cc.director.getScheduler().isScheduled(this._resetSpeedRatio,this)||this.schedule(this._resetSpeedRatio,.5,1)))},dispatch:function(){this.virusManager&&this.virusManager.clearVirus(this.node)},onCollisionExit:function(){},_resetSpeedRatio:function(){this.speedRatio=1},setSpeed:function(e){this.m_Speed=e},_onSleepChanged:function(){this.sleep?this.node.pauseAllActions():this.node.resumeAllActions()},setInitScale:function(e){this._initScale=e,this.scale=this._initScale*this._zoomScale},setZoomScale:function(e){this._zoomScale=e,this.scale=this._initScale*this._zoomScale},startRun:function(){this.sleep=!1},reuse:function(e){this.virusPool=e,this._reinit=!0,this._displayName=null,this.m_Speed=cc.v2(0,0),this.m_Hp.node.active=!0,this.body.getComponent(dragonBones.ArmatureDisplay).animationName="normal",this.body.getComponent(dragonBones.ArmatureDisplay).playAnimation("normal",-1),cc.director.getScheduler().isScheduled(this.updatePos,this)||this.schedule(this.updatePos,0)},unuse:function(){this.sleep=!0,this.m_Speed=cc.v2(0,0),this.node.stopAllActions(),cc.director.getScheduler().isScheduled(this.updatePos,this)&&this.unschedule(this.updatePos)}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils"}],WinUI:[function(e,t){"use strict";cc._RF.push(t,"2d41cjLifZOlJHoue+PAGJu","WinUI");var n=e("GameUtils"),i=e("GameUI");cc.Class({extends:e("PopUpUI"),properties:{animShow:cc.AnimationClip,levelPre:cc.Label,levelCurrent:cc.Label,levelNext:cc.Label,levelNextLast:cc.Label,collect_label:cc.Label,collectx3_label:cc.Label},onLoad:function(){this._animated=this.node.getComponent(cc.Animation),this.animShow&&this._animated.addClip(this.animShow,"show")},start:function(){},_showAction:function(e){cc.find("level",this.node).getComponent(cc.Animation).play("animHomeLevel"),cc.find("level",this.node).getComponent(cc.Animation).playAdditive("animWinUILevel_reset"),this._level=n.Player.get("level"),this._level>2?(this.levelPre.node.parent.active=!0,this.levelPre.string=this._level-2):this.levelPre.node.parent.active=!1,this.levelCurrent.string=this._level-1,this.levelNext.string=this._level,this.levelNextLast.string=this._level+1,this._coin=e,this.collect_label.string=hpBit(e),this.collectx3_label.string=hpBit(3*e),SoundManager.playEffect("winSound"),this._animated.play("show")},_afterShow:function(){cc.find("level",this.node).getComponent(cc.Animation).playAdditive("animWinUILevel"),this.scheduleOnce(function(){i.instance.raiseAction({command:"unlockAll"})},.5);
//top.h5_sdk.showAd("Interstitial")
},_afterHide:function(){this._super(),i.instance.show("HomeUI",{unlock:!0})},onCollect:function(){i.instance.isLockedAction(i.ACTIONS.WIN_COLLECT_COIN)||(i.instance.createFlyCoin("HomeUI",cc.v2(),this._coin),this.hide())},onCollectX3:function(){var e=this;i.instance.isLockedAction(i.ACTIONS.WIN_COLLECT_COIN_X3)
    // ||
    // top.h5_sdk.showAd("Reward",()=>{i.instance.createFlyCoin("HomeUI",cc.v2(),3*e._coin),e.hide()},()=>{})
}}),cc._RF.pop()},{GameUI:"GameUI",GameUtils:"GameUtils",PopUpUI:"PopUpUI"}],runtime:[function(e,t){"use strict";cc._RF.push(t,"bf3721RV8xN9avDgaWflKj6","runtime");var n=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function c(e,t,n,i){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new E(i||[]);return o._invoke=w(e,n,s),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",h="executing",p="completed",f={};function m(){}function g(){}function _(){}var v={};v[o]=function(){return this};var y=Object.getPrototypeOf,A=y&&y(y(T([])));A&&A!==n&&i.call(A,o)&&(v=A);var b=_.prototype=m.prototype=Object.create(v);function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(e){function t(n,a,o,s){var r=l(e[n],e,a);if("throw"!==r.type){var c=r.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,o,s)},function(e){t("throw",e,o,s)}):Promise.resolve(u).then(function(e){c.value=e,o(c)},function(e){return t("throw",e,o,s)})}s(r.arg)}var n;this._invoke=function(e,i){function a(){return new Promise(function(n,a){t(e,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t,n){var i=u;return function(a,o){if(i===h)throw new Error("Generator is already running");if(i===p){if("throw"===a)throw o;return x()}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var r=C(s,n);if(r){if(r===f)continue;return r}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===u)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=l(e,t,n);if("normal"===c.type){if(i=n.done?p:d,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=p,n.method="throw",n.arg=c.arg)}}}function C(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=l(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function n(){for(;++a<e.length;)if(i.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:x}}function x(){return{value:t,done:!0}}return g.prototype=b.constructor=_,_.constructor=g,_[r]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,r in e||(e[r]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},S(I.prototype),I.prototype[s]=function(){return this},e.AsyncIterator=I,e.async=function(t,n,i,a){var o=new I(c(t,n,i,a));return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},S(b),b[r]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(i,a){return r.type="throw",r.arg=e,n.next=i,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),U(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;U(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:T(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),f}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(i){Function("n","regeneratorRuntime=n")(n)}cc._RF.pop()},{}],sdkbox_config:[function(e,t){"use strict";cc._RF.push(t,"25a02kZE1NBQ4dEO5bwKaTw","sdkbox_config"),t.exports={android:{iap:{items:{remove_ads:{type:"non_consumable",id:"removeads"},coin_package:{id:"buycoin"},unlock_airplane:{id:"unlockplane"}},key:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsp1gF1bNtZz65Z2ZhrUjRFq63JmgPvv7YQ7mrfE/x6GgQGfVuRrmGkKuVlneWEzqjIam4Xj2fMu75hE2BZjpAfTX/gVoAXElzvVEJJgskLzSTNMIvwtih0AntQXET+mFMGyoQqQwotiJjNQY/VtQSg75ecAQCbtJT7HI0JkOJqi1DBN2ye2PUpQhpdBafaBeiFByaZlm0l480Qf/V+h1MKL70nN8razNlhqO4ToNlL6men7UucqU5sMF9ttjQiVR4Lh37EqdgfHEgiLSdO5fRYQJdyVPjzWFyLiS8wtgpKqQLdw2fXv5wVQyVT9bMydFLQ8QYFUaTiI/RI8efUtccQIDAQAB"},AdMob:{testdevice:"33C06BA0214E1ACFB35FDD93A142340F,E2AED7DE12D7B884FB536B1A77ABC193,2A53CAEEEED2AFBDB5ABD5BA2EE288B1,6826B8A0A892CBABB568911ABC3F5AE3,FF87731A37EE367DDE15ED2A8005EB6E,kGADSimulatorID",test:!0,ads:{interstitial:{type:"interstitial",id:"ca-app-pub-5342144217301971/4455533378"},banner:{width:0,type:"banner",id:"ca-app-pub-5342144217301971/9902111809",alignment:"bottom",height:50},rewarded:{type:"rewarded_video",id:"ca-app-pub-5342144217301971/9710540115"}},appid:"ca-app-pub-5342144217301971~7273268401"},Firebase:{},Facebook:{debug:!0,app_id:"2452212061766133"},Review:{LaunchLimit:3,DayForReminding:1,tryPromptWhenInit:!1,DayLimit:0,LaunchForReminding:2,UserEventLimit:0}},ios:{iap:{items:{remove_ads:{type:"non_consumable",id:"zendblock_remove_ads"},all_theme:{type:"non_consumable",id:"zendblock_all_theme"}}},AdMob:{testdevice:"88fe18eb57d012a95ef7624cbf5e8a8d,501fce267ebd198d3c7aa2046bc7dd36,kGADSimulatorID",test:!1,safearea:!0,ads:{gameover:{type:"interstitial",id:"ca-app-pub-5342144217301971/3322238150"},banner:{width:0,type:"banner",id:"ca-app-pub-5342144217301971/4635319822",alignment:"bottom",height:50},rewarded:{type:"rewarded_video",id:"cca-app-pub-5342144217301971/9051602204"}},appid:"ca-app-pub-5342144217301971~6617010559"},Firebase:{},Facebook:{debug:!0,app_id:"2537646123132160"},Review:{AppID:"1476374491",DayLimit:0,LaunchLimit:3,UserEventLimit:0,DayForReminding:1,LaunchForReminding:2,tryPromptWhenInit:!1}}},cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"dfe84OZartIIqFQXl7Ja1cd","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","AirplanLevel","Airplane","Background","Bullet","BulletManager","ExplodeManager","Game","GameUI","GoldReward","ItemSupport","ItemSupportActive","Preload","SineWave","SmallAirplane","SoundManager","TutorialStep","Virus","VirusBatchPath","VirusLevel","VirusManager","GameUtils","runtime","sdkbox_config","ButtonEffect","UpgradeEffect","AirplaneUpgradeUI","BaseUI","GameOverUI","GamePlayUI","HomeUI","NormalUI","PauseUI","PopUpUI","ShopUI","TutorialUI","UnlockUI","WinUI"]);