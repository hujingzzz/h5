!function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="assets/www/";var s=window.matcharenaJsonp=window.matcharenaJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;i.push([154,2,1]),n()}({105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=(r=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.ym=window.ym||function(){window.ym.a=window.ym.a||[],window.ym.a.push(arguments)},window.ym.l=+new Date,e.next=4,l.load_script("https://mc.yandex.ru/metrika/tag.js");case 4:ym(w,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0});case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),a=(o=s(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_;case 2:ym(w,"reachGoal",t,{order_price:n});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)});function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.get_app=A,t.should_show_preroll=function(){try{return localStorage.getItem("matcharena/ya-show-preroll")}catch(e){return!1}},t.initialize=function(e){var t=(a=s(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,u,c,l,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v;case 2:if(n=null,r=!1,o=!1,i=null,a=void 0,"rewarded"!==t){e.next=34;break}u=function(){var e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="yarewarded",e.next=3,h("show_ad",{type:"yarewarded",ad_id:n});case 3:(r=e.sent)instanceof Object&&(r.rewarded?r=!0:r.opened?(r=!1,o=!0):r=!1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),c=function(){var e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="ya:"+n,e.next=3,h("show_ad",{type:"rewarded",ad_id:n});case 3:r=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n=R["rewarded-id"],l=void 0,l=Math.random()<E?[u,c]:[c,u],d=0;case 14:if(!(d<l.length)){e.next=30;break}return p=l[d],e.prev=16,e.next=19,p();case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(16),console.warn("Failed to show "+a+" video",e.t0),i=e.t0;case 25:if(!r&&!o){e.next=27;break}return e.abrupt("break",30);case 27:d++,e.next=14;break;case 30:if(r||!i){e.next=32;break}throw i;case 32:e.next=39;break;case 34:return a="interstitial",e.next=38,h("show_ad",{type:"interstitial"});case 38:r=e.sent;case 39:if(!r){e.next=45;break}return"interstitial"===t&&N("watch_inter",k),"rewarded"===t&&N("watch_rewarded",x),e.abrupt("return",{status:"success",source:a});case 45:return e.abrupt("return",{status:"failed",source:a,error:"failed to show ad"});case 46:case"end":return e.stop()}},e,this,[[16,21]])})),function(e){return a.apply(this,arguments)}),n=(o=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v;case 3:return e.abrupt("return",{status:"success"});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{status:"failed-blocked",error:e.t0?e.t0.toString():""+e.t0});case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return o.apply(this,arguments)}),r=e.external_api;var o;var a;if(window==window.parent)return void window.location.replace(c.yandex_games_url);var u=new URLSearchParams(window.location.search).get("ppmethod")||"irpc";"irpc"==u&&d.connect(window,window.parent,C,{});function h(e,t){return"irpc"==u?S?S.invoke(e,t).then(function(t){return console.log(e,"ok"),t},function(n){return console.log(e,t,"err",n),Promise.reject(n)}):Promise.reject("no rpc connection"):f.call(e,t)}(_=i()).then(function(){console.log("Metrika initialized successfully")},function(e){console.error("Failed to initialize metrika:",e)}),A(),"iframe"==u&&h("init").then(P,O);var w=!1;function F(e){w!=e&&(w=e,m.setItem("matcharena/ya-banner",e?"1":"0"),e?(console.log("Showing sticky banner"),h("show_banner").then(function(e){console.log("Showing sticky banner result",e)},function(e){console.warn("Failed to show banner",e)})):(console.log("Hiding sticky banner"),h("hide_banner").then(function(e){console.log("Hiding sticky banner result",e)},function(e){console.warn("Failed to hide banner",e)})))}function T(e){var t={purchaseToken:e.purchaseToken,productID:e.productID};return t}F("1"==m.getItem("matcharena/ya-banner")),window.yandex_safeStorage_get=function(e){return h("safestorage_get",{key:e})},window.yandex_safeStorage_set=function(e,t){return h("safestorage_set",{key:e,value:t})},r.expose({ya_get_products:function(){return h("get_products",{}).then(function(e){var t=[];for(var n in e){var r=e[n],o={productID:r.id,price:r.price,priceCurrencyCode:r.priceCurrencyCode};t.push(o)}return console.log("get_products",t),t})},ya_get_purchases:function(){return h("get_purchases",{}).then(function(e){var t=[];for(var n in e){var r=e[n];t.push(T(r))}return console.log("get_purchases",t),t})},ya_purchase:function(e){return h("purchase",{product_id:e}).then(function(t){return function(t){var n=function(t){for(var n=p.ya_products,r=0;r<n.length;r++){var o=n[r];if(o.offer_id===e)return o}return null}(t.productID);n&&N("inapp_purchase",I*n.price_rub)}(t),T(t)})},ya_consume_purchase:function(e){return h("consume_purchase",{purchase_id:e})},ya_get_player:function(){return h("get_player")},ya_login_player:function(){return h("login_player")},ya_on_new_player:function(){N("new_player",b)},ya_reach_goal:function(e,t){N(e,t)},ya_can_review:function(){return h("can_review").then(function(e){return!!e.value||Promise.reject(e.reason)})},ya_open_review:function(){return h("open_review").then(function(e){return!!e.feedbackSent})},ya_get_reforged_link:function(){return y},ya_ask_install_game:function(){return h("can_show_shortcut_prompt").then(function(e){return e.canShow?h("show_shortcut_prompt").then(function(e){return e.outcome?e.outcome:e.reason?e.reason:"unknown_error"}):"not_allowed"})},ya_set_show_sticky:function(e){F(e)},ya_set_show_preroll:function(e){try{e?localStorage.setItem("matcharena/ya-show-preroll","1"):localStorage.removeItem("matcharena/ya-show-preroll")}catch(e){}},ya_submit_achievement:function(e,t){return function(e,t,n){if(!(t in j))return Promise.reject("no such achievement '"+t+"'");t in M?M[t].pending+=n:M[t]={current:null,pending:n};if(M[t].promise){if(!M[t].pending_promise){var r=l.MyPromise.future();return M[t].pending_promise=r,r}return M[t].pending_promise}var o=(i=s(regeneratorRuntime.mark(function n(){var r,o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=M[t].current)){n.next=6;break}return n.next=4,e("achievement.getProgress",{id:t});case 4:r=n.sent,M[t].current=r;case 6:if(!(r<j[t].goal)){n.next=22;break}return o=M[t].pending,M[t].pending=0,i=null,n.prev=10,n.next=13,e("achievement.setProgress",{id:t,progress:r+o});case 13:M[t].current=null,n.next=20;break;case 16:n.prev=16,n.t0=n.catch(10),i=n.t0,M[t].pending+=o;case 20:if(!i){n.next=22;break}throw i;case 22:return n.abrupt("return",!0);case 23:case"end":return n.stop()}},n,this,[[10,16]])})),function(){return i.apply(this,arguments)});return function e(){var n=o();return M[t].promise=n,n.catch(function(e){console.warn("Failed to submit achievement",t,":",e)}).then(function(){M[t].promise=null;var n=M[t].pending_promise;if(n){M[t].pending_promise=null;var r=new Promise(function(t,n){t(e())});n.resolve(r)}}),n}();var i}(h,e,t)}}),window.reload_hook=function(){return h("reload")};var L={prepare_ad:n,show_ad:t};return{install_sw_promise:g,get_ads_provider:function(){return L},on_loading_finish:function(){h("loading_complete").catch(function(e){console.error("Failed to report loading complete to Yandex sdk",err)})}}};var u=n(11),c=n(12),l=n(9),d=n(74),p=n(34),f=(n(47),n(379)),h=n(57),m=n(48),v=l.MyPromise.future(),g=(document.getElementById("fullscreen-loading"),l.MyPromise.future()),_=l.MyPromise.future(),y=null,w=c.yandex.metrika_counter_id,b=1,k=2,x=4,I=50,E=window.MA_RUNTIME_CONFIG&&window.MA_RUNTIME_CONFIG.rewarded_yandex_rate?window.MA_RUNTIME_CONFIG.rewarded_yandex_rate:c.yandex.rewarded_yandex_rate;var S,R=null;function A(){R||("reforged"==window.MA_CONFIG.skin?(console.log("Selected Yandex application reforged"),R=c.yandex_games.reforged):R=c.yandex_games.main);return R}function P(e){if(e&&e.native_cache?(g.resolve(!1),console.log("parent yandex told us not to use sw")):(g.resolve(!0),console.log("parent yandex allowed us to use sw")),e){var t=null;if(e.env&&e.env.i18n&&e.env.i18n.tld)t=e.env.i18n.tld;else{var n=h.get_locale();t="ru-RU"==n?"ru":"tr-TR"==n?"tr":"com"}y="https://yandex."+t+"/games/app/203211?referrer=utm_source%3DwelcomBonusFromSkydomOriginal"}console.log("parent yandex sdk init completed"),v.resolve(!0)}function O(e){console.error("parent yandex sdk init failed:",e),v.catch(function(e){}),v.reject(e),u.show_reload_modal("yandexsdk")}function C(e,t){switch(e){case"irpc::connected":S=t.connection,console.log("got irpc connection"),S.invoke("init",{}).then(P,O);break;default:console.error("invalid rpc method '"+e+"'")}}function N(e,t){a(e,t).then(function(){console.log("Posted metrika goal "+e)},function(e){console.warn("Unable to post metrika goal:",e)})}var j={test3:{goal:3},wins100:{goal:100},bonus10k:{goal:1e4},omni500:{goal:500}},M={}},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.show_shadow_overlay=function(e){var t=document.getElementById("shadow-overlay");t.style.display=e?"block":"none";window.set_global_mute(e)},t.close_modal_dialog=c,t.show_modal_popup=d,t.reload_page=h,t.show_reload_modal=v,t.initialize_ui=function(e){e.expose({reload:v,show_sandbox_popup:function(e){p(e)}})};var r=n(57),o=n(141),i=n(9),a=n(47),s=!1;function u(e){var t=document.getElementById("modal-shadow-overlay");t.style.display=e?"block":"none"}function c(){s&&(s=!1,document.getElementById("modal-popup").style.display="none",document.getElementById("demo-popup").style.display="none",u(!1))}var l=/#([a-zA-Z0-9_]+)/g;function d(e,t,n,o){return new Promise(function(a,d){if(!s){var p={};s=p;var f=document.getElementById("modal-popup");u(!0);var h=document.getElementById("modal-popup-button");if("string"==typeof e)r.get_texts(["modal."+e+".title","modal."+e+".text","modal."+e+".button"]).then(function(e){s==p&&(document.getElementById("modal-popup-header").innerHTML=e[0],document.getElementById("modal-popup-text").innerHTML=e[1],document.getElementById("modal-popup-button").innerHTML=e[2],f.style.display="block")});else{var m=function(t,n){var o=e[n],i=void 0;null==o?o="@missing:"+n:"string"==typeof o?i={}:(i=o,o=o.id);var a=document.getElementById(t);"@"==o[0]?a.innerHTML=o.substr(1):r.get_texts([o]).then(function(e){s==p&&(a.innerHTML=e[0].replace(l,function(e){return i[e.substr(1)]}))})};Promise.all([m("modal-popup-header","header"),m("modal-popup-text","text"),m("modal-popup-button","button")]).then(function(){f.style.display="block"})}console.log("Pre delay"),i.MyPromise.delay(.25).then(function(){s==p&&(f.style.display="block")}),console.log("after delay"),f.className=t?"modal "+t:"modal",console.log("after func"),h.addEventListener("click",_),f.addEventListener("click",y)}function v(){h.removeEventListener("click",_),f.removeEventListener("click",y)}function g(){v(),c(),a(!0)}function _(){console.log("BUtton clicked!"),s==p?o?o()&&g():g():v()}function y(e){e.target==f&&n&&(v(),s==p&&(c(),a(!1)))}})}function p(e){return new Promise(function(t,n){if(!s){var o={};s=o;var a=document.getElementById("demo-popup");u(!0),r.get_texts(["demo."+e+".text"]).then(function(e){s==o&&(document.getElementById("demo-popup-text").innerHTML=e[0],a.style.display="block")}),i.MyPromise.delay(.25).then(function(){s==o&&(a.style.display="block")}),a.addEventListener("click",d)}function l(){a.removeEventListener("click",d)}function d(e){e.target==a&&(l(),s==o&&(c(),t(!1)))}})}function f(){var e="ma_referrer="+encodeURIComponent(MA_CONFIG.referrer),t=window.location;t.search.indexOf("ma_referrer=")>=0?t.reload():t.search.length>0?t.search+="&"+e:t.search+=e}function h(){try{if(window.reload_hook)window.reload_hook().catch(function(e){console.error("Failed to reload: ",e),f()});else if(MA_CONFIG.requires_POST){var e=document.createElement("form");for(var t in e.setAttribute("method","POST"),MA_CONFIG.post_data){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",t),n.setAttribute("value",MA_CONFIG.post_data[t]),e.appendChild(n)}MA_CONFIG.referrer&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name","ma_referrer"),n.setAttribute("value",MA_CONFIG.referrer),e.appendChild(n)),e.setAttribute("action",window.location.href),document.body.appendChild(e),e.submit()}else f()}catch(e){}}t.show_sandbox_popup=p;var m=!1;function v(e,t){if(m)return!1;t=t||e,m=!0,a.send("Error.ModalReload",{reason:t}),d(e,void 0,void 0,function(){if("gpu_software"==e)window.open(o.gpu_software,"_blank");else if("gpu_error"==e)window.open(o.gpu_error,"_blank");else if("wasm"==e)window.open(o.wasm,"_blank");else if("webgl"==e)window.open(o.webgl,"_blank");else{if("oom"!=e)return h(),!0;window.open(o.oom,"_blank")}})}},141:function(e,t,n){"use strict";e.exports={fp_install:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057743-what-to-do-if-i-don-t-have-flash-player-",fp_upgrade:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057744-what-to-do-if-i-have-an-older-version-of-flash-player-",gpu_software:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057755-how-to-enable-gpu-acceleration-in-your-browser-",gpu_error:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057755-how-to-enable-gpu-acceleration-in-your-browser-",wasm:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000110023-what-to-do-when-i-see-your-browser-does-not-seem-to-support-webassembly-",webgl:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000109624-how-to-enable-webgl-in-your-browser-",oom:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000113431-what-to-do-when-i-see-not-enough-memory-"}},144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.show_ad=y,t.prepare_ad=w,t.on_loading_start=function(){_.on_loading_start&&_.on_loading_start()},t.on_loading_progress=function(e){_.on_loading_progress&&_.on_loading_progress(e)},t.on_loading_finish=function(){_.on_loading_finish&&_.on_loading_finish()},t.happy_time=k,t.get_install_sw_promise=function(){_.install_sw_promise||(_.install_sw_promise=Promise.resolve(!0));return _.install_sw_promise},t.embed=function(e){var n={external_api:e},x=new URLSearchParams(window.location.search);switch(MA_CONFIG.embed){case"gamedistribution":var I=x.get("xdm_c");t.api=_=I?o.initialize(n):r.initialize(n);break;case"poki":t.api=_=i.initialize(n);break;case"yandex":t.api=_=a.initialize(n);break;case"ok":t.api=_=s.initialize(n);break;case"my":t.api=_=u.initialize(n);break;case"crazygames":t.api=_=c.initialize(n);break;case"y8":t.api=_=f.initialize(n);break;case"vk":var E=x.get("platform");console.log("VK platform:",E),p.init(e),d.initialize(),e.expose({vk_show_inapp_not_allowed_popup:function(){v.show_modal_popup("vk_inapp_not_allowed","social",!0).then(function(e){e&&window.open(g.vk_mobile_link,"_blank")})}}),t.api=_=l.initialize(n);break;default:t.api=_=h.initialize(n)}m.initialize(_.get_ads_provider()),e.expose({show_ad:y,prepare_ad:w,set_playing:b,happy_time:k})};var r=n(376),o=n(377),i=n(378),a=n(105),s=n(145),u=n(380),c=(n(76),n(383)),l=n(384),d=n(146),p=n(75),f=n(147),h=n(386),m=n(388),v=n(11),g=n(12),_=t.api=null;function y(e){return m.show_ad(e)}function w(e){return m.prepare_ad(e)}function b(e){_.set_playing&&_.set_playing(e)}function k(e){_.happy_time&&_.happy_time(e)}},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a,s,u,c=(r=m(regeneratorRuntime.mark(function e(t,n,r){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:if(o={method:t},n)for(i in n)o[i]=n[i];return e.next=6,new Promise(function(e,t){FAPI.Client.call(o,function(n,r,o){"ok"===n?e(r):t(o)},r)});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)}),l=(o=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.API_callback=function(e,t,n){var r=R[e];r?(delete R[e],"ok"===t?r.resolve(n):r.reject(n)):"showPayment"===e&&E.invoke("ok_update_purchases")},e.next=3,_.load_script("https://api.ok.ru/js/fapi5.js");case 3:return k.resolve(new Promise(function(e,t){FAPI.init(x.api_server,x.apiconnection,function(){console.log("OK init successful"),e(!0)},function(e){console.error("OK init failed!"),t(e||"ok init failed"),v.show_reload_modal("error")})})),e.next=6,k;case 6:return I.resolve(c("users.getCurrentUser",{fields:"first_name,pic_3"})),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),d=(i=m(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O(t),r=P("showPayment")){e.next=4;break}return e.abrupt("return",Promise.reject("another transaction in progress"));case 4:return FAPI.UI.showPayment(n.title,n.description,t,b?1:n.price_oks,null,null,"ok",!0),e.next=7,r;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),p=(a=m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:if(!A){e.next=6;break}return e.next=5,A;case 5:return e.abrupt("return",e.sent);case 6:return t=P("prepareMidroll"),FAPI.invokeUIMethod("prepareMidroll"),A=new Promise(function(e){t.then(function(){e(!0)},function(t){e(!1)})}),e.next=11,A;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),f=(s=m(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:return e.next=4,p();case 4:if(n=P("showMidroll")){e.next=7;break}return e.abrupt("return",Promise.reject("another midroll in progress"));case 7:return A=null,FAPI.invokeUIMethod("showMidroll"),e.next=11,n.then(function(){return{status:"success",source:"ok_midroll"}},function(e){return{status:"failed",source:"ok_midroll",reason:e}});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)}),h=(u=m(regeneratorRuntime.mark(function e(t,n){var r,o,i,a=(r=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,n){t.on_opened(),setTimeout(function(){e({status:"success",source:"html fake ad"})},1e4)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)});return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,i=null,e.prev=2,e.next=5,f(n);case 5:if(!(i=e.sent)||"success"!==i.status){e.next=8;break}return e.abrupt("return",i);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o=e.t0;case 13:if(!o){e.next=15;break}throw o;case 15:return e.next=17,a();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e,this,[[2,10]])})),function(e,t){return u.apply(this,arguments)});function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.get_app=C,t.initialize=function(e){E=e.external_api,w=C(),b=!w||w["test-mode"];var t=new URLSearchParams(window.location.search),n=t.get("logged_user_id"),r=t.get("session_key"),o=t.get("auth_sig");if("true"===t.get("mob")&&"androidweb"===t.get("mob_platform")){var i=function(){FAPI.invokeUIMethod("requestFullscreen")};document.addEventListener("click",i),document.addEventListener("touchend",i)}x={user_id:n,session_key:r,auth_sig:o},l().then(function(){console.log("OK init completed")},function(e){I.reject("no ok authorization"),console.error("OK init failed",e)}),E.expose({ok_get_auth:function(){return x},ok_query_profile:function(){var e=m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I;case 2:return t=e.sent,e.abrupt("return",{user_id:n,session_key:r,auth_sig:o,name:t.first_name,photo:t.pic_3});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ok_query_friends:function(){var e=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c("friends.getAppUsers",{}).then(function(e){var t=[];for(var n in e){var r=String(e[n]).split(",");for(var o in r)t.push(r[o])}return console.log("User friends: %s",JSON.stringify(t)),t}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ok_query_products:function(){var e=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.ok_products);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ok_purchase:function(){var e=m(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:return e.next=4,d(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ok_invite_friends:function(){var e=m(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:if(t=P("showInvite")){e.next=5;break}return e.abrupt("return",Promise.reject("already inviting"));case 5:return FAPI.UI.showInvite("Попробуй Скайдом! Ооооочень рекомендую! На некоторых уровнях, правда, слишком хитрые головоломки, не все могут пройти..."),e.prev=6,e.next=9,t;case 9:return n=e.sent,console.log("Invite results",n),e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(6),console.warn("Invite failed!",e.t0);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}},e,this,[[6,14]])}));return function(){return e.apply(this,arguments)}}(),ok_make_post:function(){var e=m(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S[t]){e.next=3;break}throw new Error("unknown post id");case 3:return e.next=5,k;case 5:return r=P("postMediatopic"),FAPI.UI.postMediatopic(n),e.next=9,r;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()});var a={prepare_ad:function(){var e=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),show_ad:function(e,t){return"interstitial"===e||"preroll"===e?Promise.resolve({status:"failed",source:"ok interstitial",reason:"no ad"}):h(t,"rewarded")}};return{get_ads_provider:function(){return a}}};var v=n(11),g=n(12),_=(n(49),n(9)),y=n(34),w=(n(75),n(47),void 0),b=void 0,k=_.MyPromise.future(),x=null,I=_.MyPromise.future(),E=void 0,S={dc_win:{media:[{type:"text",text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️"},{type:"app",text:"",images:[{url:"https://sun9-19.userapi.com/1pF-jQDMj40bCazaOfgEXpAFp0NdqZqstpu6oA/lnyR7A87xhg.jpg",mark:"dc_win",title:"Попробуй красивейшую Три в Ряд!"}]}]}},R={},A=null;function P(e){if(R[e])return null;var t=_.MyPromise.future();return R[e]=t,t}function O(e){for(var t in y.ok_products){var n=y.ok_products[t];if(n.offer_id===e)return n}return null}function C(){w||("reforged"==window.MA_CONFIG.skin?(console.log("Selected OK application reforged"),w=g.ok.reforged):w=g.ok.main);return w}},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o;t.show_yandex_ad=(r=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.prev=2,e.next=5,new Promise(function(e,r){l.style.display="block";var o="yandex_rtb_block_"+f(),i=document.createElement("div");i.setAttribute("id",o),i.classList.add("vkcustom-yandex-block"),d.appendChild(i);var p=!1,h=0;function m(){h&&(clearInterval(h),h=0)}function v(){p||(m(),d.removeChild(i),l.style.display="none",p=!0)}var g=!1;a.MyPromise.delay(7).then(function(){g||(console.log("Ad timed out"),v(),e(!1))}),Ya.Context.AdvManager.render({blockId:t,renderTo:o,async:!0,onRender:function(t){g=!0,console.log("Ad rendered",t),c.style.display="none",n&&n(),function(){u.style.display="block",c.style.display="none",u.innerText="";var t=6;function n(){0==--t?(m(),u.style.display="none",c.style.display="block"):u.innerText="До получения награды: "+t}s=function(){v(),e(!0)},n(),h=setInterval(n,1e3)}()}},function(){g=!0,console.log("Ad not rendered"),v(),e(!1)})});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),cleanup(),e.t0;case 12:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return r.apply(this,arguments)}),t.show_vk_ad=(o=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return e.prev=2,e.next=5,new Promise(function(e,r){l.style.display="block";var o="vk_ad_block_"+f(),i=document.createElement("div");i.setAttribute("id",o),i.classList.add("vkcustom-vk-block"),d.appendChild(i);var p=!1,h=0;function m(){h&&(clearInterval(h),h=0)}function v(){p||(m(),d.removeChild(i),l.style.display="none",p=!0)}var g={};for(var _ in t)g[_]=t[_];var y=!1;a.MyPromise.delay(7).then(function(){y||(console.log("Ad timed out"),v(),e(!1))}),VK.Widgets.Ads(o,{onAdsReady:function(t,r){console.log("VK ad callback",t,r),y=!0,t<=0?(console.log("VK Ad not rendered: "+t),v(),e(!1)):(console.log("VK Ad rendered"),c.style.display="none",n&&n(),function(){u.style.display="block",c.style.display="none",u.innerText="";var t=6;function n(){0==--t?(m(),u.style.display="none",c.style.display="block"):u.innerText="До получения награды: "+t}s=function(){v(),e(!0)},n(),h=setInterval(n,1e3)}())}},g)});case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),cleanup(),e.t0;case 12:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return o.apply(this,arguments)});function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(){u=document.getElementById("vkcustom_timer"),(c=document.getElementById("vkcustom_skip")).innerText="Пропустить рекламу",c.addEventListener("click",function(){if(s){var e=s;s=null,e()}}),l=document.getElementById("vkcustom_fullscreen"),d=document.getElementById("vkcustom_container"),document.getElementById("vkcustom_skip_wrapper"),c.style.display="none"};var a=n(9),s=void 0,u=void 0,c=void 0,l=void 0,d=void 0,p=0;function f(){return++p}var h=void 0;function m(){return h||(h=new Promise(function(e,t){var n="yandexContextAsyncCallbacks";window[n]=window[n]||[],window[n].push(function(){console.log("Yandex ad sdk ready!"),e(!0)});var r=document.createElement("script");r.type="text/javascript",r.src="https://an.yandex.ru/system/context.js",r.async=!0,r.onerror=function(e){t("sdk loading failed")},document.body.appendChild(r)})),h}var v=void 0;function g(){return v||(v=new Promise(function(e,t){if(window.VK&&VK.Widgets)e(!0);else{var n="vkAsyncInitCallbacks";window[n]=window[n]||[],window[n].push(function(){e(!0)});var r=document.createElement("script");r.type="text/javascript",r.src="https://vk.com/js/api/openapi.js?168",r.async=!0,r.onerror=function(e){t("sdk loading failed")},document.body.appendChild(r)}}).then(function(){return console.log("VK ad sdk ready"),!0})),v}},147:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.get_app=w,t.initialize=function(e){var t=(A=r(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return t=O(),console.log("Interstitial break initiated"),n=!1,g({type:"next",beforeAd:function(){n=!0},afterAd:function(){},adBreakDone:function(e){console.log("Interstitial break completed",e),t.resolve(n)}}),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)}),n=(R=r(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return console.log("Interstitial preload initiated"),t=new Promise(function(e,t){v({onReady:function(){console.log("Interstitial preload completed"),e(!0)}})}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),function(){return R.apply(this,arguments)}),o=(S=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return console.log("Rewarded show requested"),e.next=5,Promise.race([M(),i.MyPromise.delay(5).then(function(){return Promise.resolve(!1)})]);case 5:if(e.sent&&j){e.next=9;break}return console.log("Rewarded preload did not succeed"),e.abrupt("return",!1);case 9:return e.next=11,new Promise(function(e,t){var n=j;j=null,N=null,n.on_done=function(t,n){console.log("Rewarded completed with result",t),e(t)},n.show_fn()});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)})),function(){return S.apply(this,arguments)}),f=(E=r(regeneratorRuntime.mark(function e(n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:if(e.prev=2,d=!0,y(),"rewarded"!=n){e.next=11;break}return e.next=8,o();case 8:i=e.sent,e.next=14;break;case 11:return e.next=13,t();case 13:i=e.sent;case 14:if(!i){e.next=18;break}return e.abrupt("return",{status:"success",source:"y8"});case 18:return e.abrupt("return",{status:"failed",error:"y8 ad failed"});case 19:return e.prev=19,d=!1,y(),e.finish(19);case 23:case"end":return e.stop()}},e,this,[[2,,19,23]])})),function(e,t){return E.apply(this,arguments)}),k=(I=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a;case 3:if(void 0,"rewarded"!=t){e.next=10;break}return e.next=7,M();case 7:e.sent,e.next=13;break;case 10:return e.next=12,n();case 12:e.sent;case 13:return e.abrupt("return",{status:"success"});case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",{status:"failed-blocked",error:e.t0?e.t0.toString():""+e.t0});case 19:case"end":return e.stop()}},e,this,[[0,16]])})),function(e){return I.apply(this,arguments)}),x=e.external_api;var I;var E;var S;var R;var A;a.then(function(){!function(){c=!0}()},function(e){console.error("y8 init error: %s",e)});var P=w();function O(){return h&&h.reject("overwritten"),h=i.MyPromise.future()}window.idAsyncInit=function(){(s=window.ID).Event.subscribe("auth.authResponseChange",function(e){_=e.authResponse&&e.authResponse.details?e.authResponse.details.pid:null,console.log(e)}),s.Event.subscribe("id.init",function(){console.log("Y8 Account SDK initialized!"),s.ads.init(P["app-id"]),a.resolve(!0)}),console.log("Initializing Y8 SDK with app id="+P["app-id"]),s.init({appId:P["app-id"],status:!0})},i.load_script("https://cdn.y8.com/api/sdk.js").catch(function(e){a.reject(e)}),C=new Promise(function(e,t){window.adsbygoogle=window.adsbygoogle||[],g=v=function(e){adsbygoogle.push(e)};var n=document.createElement("script");n.onload=function(){console.log("H5 sdk loaded successfully")},n.addEventListener("error",function(e){t("loading failed"),e.stopPropagation(),e.preventDefault()}),n.type="text/javascript",n.setAttribute("async",""),n.setAttribute("crossorigin","anonymous"),n.setAttribute("data-ad-client",u["ad-client"]),n.setAttribute("data-ad-channel",u["ad-channel"]),n.setAttribute("data-ad-frequency-hint","180s"),u["test-ads"]&&n.setAttribute("data-adbreak-test","on"),n.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",document.getElementsByTagName("head")[0].appendChild(n),v({preloadAdBreaks:"on",sound:"on",onReady:function(){console.log("H5 sdk ready"),e(!0)}})}),C.catch(function(e){console.error("Failed to load H5 sdk:",e)}),m=C,x.expose({y8_get_player:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:return e.abrupt("return",new Promise(function(e,t){ID.getLoginStatus(function(n){if(console.log("Y8 Login Status:",n),n.authResponse)try{var r=b(n.authResponse);console.log("Y8 Resonding with:",r),e(r)}catch(e){console.error("Y8 Converison error:",e),t(e)}else t("not logged in")},!1)}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),y8_login_player:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:return e.abrupt("return",new Promise(function(e,t){ID.login(function(n){null==n?(console.log("Y8 Login failed!"),t("not logged in")):(console.log("Y8 Login result:",JSON.stringify(n)),e(b(n.authResponse)))})}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),y8_query_friends:function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:return _||reject("no auth"),e.abrupt("return",new Promise(function(e,t){ID.api(_+"/friends","GET",{limit:100,offset:0},function(n){if(console.log("Friends api response:",n),n.data){var r=[],o=!0,i=!1,a=void 0;try{for(var s,u=n.data[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;r.push(c.id)}}catch(e){i=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw a}}e(r)}else t("failed to fetch friends")})}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()});var C;var N=void 0,j=void 0;function M(){var e,t=(e=r(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return t={},console.log("Rewarded preload initiated"),e.next=6,new Promise(function(e,r){var o=!1;g({type:"reward",beforeAd:function(){},afterAd:function(){},beforeReward:function(n){console.log("Rewarded preload completed"),(j=t).show_fn=n,e(!0)},adDismissed:function(){},adViewed:function(){o=!0},adBreakDone:function(r){t.on_done?(console.log("Rewarded completed",r),t.on_done(o,r)):console.log("Rewarded failed to load",r),e(!1),j==t&&(j=null),n==N&&(N=null)}})});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)});if(N)return N;var n=t();return(N=n).catch(function(e){n==N&&(N=null,j=null)}),n}var F={prepare_ad:k,show_ad:f};return{get_ads_provider:function(){return F},on_loading_start:function(){l="start"},on_loading_finish:function(){l="complete"},on_loading_progress:function(e){"complete"!==l&&(l=e)},happy_time:function(e){},set_playing:function(e){p=e,y()}}};n(11);var o=n(12),i=n(9),a=(n(48),n(74),i.MyPromise.future()),s=void 0,u=void 0,c=!1,l=null,d=!1,p=!1,f=!1,h=null,m=null,v=void 0,g=void 0,_=void 0;function y(){if(c){var e=p&&!d;e!=f&&(f=e)}}function w(){u||("reforged"==window.MA_CONFIG.skin?(console.log("Selected Y8 application reforged"),u=o.y8.reforged):u=o.y8.main);return u}function b(e){return{app_id:u["app-id"],user_id:e.details.pid,auth_token:e.access_token,name:e.details.nickname,photo_small:e.details.avatars.thumb_secure_url,photo_medium:e.details.avatars.medium_secure_url,photo_large:e.details.avatars.large_secure_url}}},154:function(e,t,n){n(155),e.exports=n(357)},357:function(e,t,n){"use strict";n(358),n(360);var r=n(362),o=n(391);r(n(392),o)},358:function(e,t,n){},360:function(e,t,n){},362:function(e,t,n){"use strict";var r,o,i,a=(r=u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.initialize(MA_CONFIG.texts_path);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Can't load translations: %s",e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])})),function(){return r.apply(this,arguments)}),s=(o=u(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=12;break}return e.next=3,navigator.serviceWorker.getRegistration();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(n=t.installing||t.waiting||t.active){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,S(n,{command:"auth.get_user"});case 11:e.sent;case 12:case"end":return e.stop()}},e,this)})),i=u(regeneratorRuntime.mark(function e(t,n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:if(o=e.sent){e.next=7;break}return e.next=6,Promise.reject("no ServiceWorker");case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,A(o,t,n,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)})),function(e,t,n){return i.apply(this,arguments)});function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}n(363),n(365);var c,l,d=n(12),p=n(9),f=n(57),h=n(368),m=n(375),v=n(11),g=n(47),_=(n(141),n(48)),y=n(144),w=n(76),b=n(105),k=n(148),x=n(389);n(390);var I=!1,E=!1;function S(e,t){return new Promise(function(n,r){var o=new MessageChannel;o.port1.onmessage=function(e){"ok"===e.data.status?n(e.data.data):r(e.data.data)},e.postMessage(t,[o.port2])})}window.set_global_mute=function(e){E=e},window.get_global_mute=function(){return E},window.preroll_result=null;var R=p.MyPromise.future();function A(e,t,n,r){var o=(r=r||{}).timeout||10;return new Promise(function(r,i){var a=0;function s(){a=setTimeout(function(){i("timeout")},1e3*o)}var u=new MessageChannel;u.port1.onmessage=function(e){a&&clearTimeout(a),"ok"===e.data.status?r(e.data.data):"keepalive"===e.data.status?s():i(e.data.data)},e.postMessage({command:t,data:n},[u.port2]),s()})}function P(){console.log("Attempting to uninstall Service Worker"),"serviceWorker"in navigator?(console.log("Unregistering ServiceWorker..."),navigator.serviceWorker.getRegistrations().then(function(e){e.forEach(function(e){e.unregister().then(function(e){console.log("Successfully unregistered SW")},function(e){console.warn("Failed to unregister a SW",e)})})},function(e){console.warn("Failed to get SW registrations",e)})):console.log("No serviceWorker available"),R.resolve(null)}function O(){var e,t,n,r,o,i,E;window.MA_EXTRA_INFO={},I=!0===sandblaster.detect().sandboxed,function(){var e=new URLSearchParams(window.location.search),t=navigator.userAgent,n=new k.UAParser,r=n.setUA(t).getBrowser().name,o=n.getBrowser().version,i=n.getEngine(),a=n.getDevice(),s=a?a.model:null,u=a?a.type:null,c=a?a.vendor:null,l="mobile"===u||"tablet"===u,d=r&&r.toLowerCase().indexOf("safari")>=0;window.MA_CONFIG.is_mobile=l,window.MA_CONFIG.is_safari=d;var p=n.getOS(),f=p?p.name:null,h=p?p.version:null,m=f&&f.toLowerCase().indexOf("ios")>=0,v=f&&f.toLowerCase().indexOf("ios")>=0&&0==p.version.indexOf("14."),g=d&&o>="14";window.MA_CONFIG.needs_ios_fix=v||g,Math.random()>.5&&"gamedistribution"===MA_CONFIG.embed&&(window.MA_CONFIG.needs_ios_fix=!0),window.MA_CONFIG.use_external_image_loader=m?v:!d||g,window.is_firefox=!!i&&"Gecko"==i.name;var _=window.MA_EXTRA_INFO;_.browser_ua=t,_.browser_name=r,_.browser_version=o,_.browser_engine=i?i.name:null,_.os_name=f,_.os_version=h,_.device_type=u,_.device_model=s,_.device_vendor=c,_.partner=window.MA_CONFIG.partner;var y="default";"43494533"==e.get("pptoken")&&(y="reforged"),MA_CONFIG.skin=y,document.getElementById("wasm-loader-overlay").classList.add("wasm-loader-skin-"+y),document.getElementById("wasm-preloader-overlay").classList.add("fullscreen-overlay-skin-"+y),document.getElementById("preroll-overlay-character").classList.add("fullscreen-overlay-skin-"+y);var w=[],b=navigator.languages;if(b)for(var x in b)w.push(b[x]);var I=navigator.language;if(I&&w.push(I),window.MA_CONFIG.prefered_langs=w,"vk"===MA_CONFIG.embed)window.MA_CONFIG.referrer=e.get("platform");else if("ok"===MA_CONFIG.embed){var E=e.get("mob");window.MA_CONFIG.referrer="true"===E?e.get("mob_platform"):"desktop",window.MA_CONFIG.extra_loading_args={ok_source:e.get("refplace")||"unknown",ok_source_extra:e.get("referer")||""}}else if("my"===MA_CONFIG.embed){var S=e.get("view");window.MA_CONFIG.referrer="app_mobile"===S?e.get("mobile_spec"):"desktop",window.MA_CONFIG.extra_loading_args={my_source:e.get("referer_type")||"unknown",my_source_extra:e.get("referer_id")||""}}else{var R=null,A=new URLSearchParams(window.location.search),P=A.get("ma_referrer");if(P)window.MA_CONFIG.referrer=P;else{var O=A.get("gd_sdk_referrer_url");if(O)R=O;else{var C=A.get("gamedomain");if(C)R=C;else try{R=window.location!==window.parent.location&&document.referrer&&""!==document.referrer?document.referrer:document.location.href}catch(e){}}R&&(R=R.replace(/^(?:(https?|file):\/\/)?(?:\/\/)?(?:www\.)?/i,"").split("/")[0]),window.MA_CONFIG.referrer=R}}console.log("Referrer: ",window.MA_CONFIG.referrer)}(),window.ma_is_sandbox=I,(e={"api-key":d.amplitude["api-key"],enabled:d.amplitude.enabled}).rate=d.amplitude.external_rate,g.initialize(c,e),f.choose_locale(MA_CONFIG.prefered_langs),c.expose({is_sandbox:function(){return I},get_preroll_result:function(){return window.preroll_result},log:function(e,t){"error"==e?console.error(t):"warning"==e?console.warn(t):"info"==e?console.info(t):"debug"==e?console.debug(t):console.log(t)},preload_ready:function(){var e=document.getElementById("preloading_overlay");e.parentNode.removeChild(e)},set_locale:function(e){f.set_locale(e)},swf_ready:function(){},load_local_user:(o=u(regeneratorRuntime.mark(function e(t){var n,r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.yandex_safeStorage_get){e.next=16;break}return e.prev=1,e.t0=JSON,e.next=5,window.yandex_safeStorage_get(t+"auth_user");case 5:if(e.t1=e.sent,!(n=e.t0.parse.call(e.t0,e.t1))){e.next=10;break}return console.log("Got user from yandex safe storage",n),e.abrupt("return",n);case 10:console.log("No user in yandex safe storage"),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(1),console.error("Failed to fetch user from yandex safe storage",e.t2);case 16:if(!window.MA_CONFIG.is_safari){e.next=32;break}return e.prev=17,console.log("Asking user from serviceworker"),e.t3=JSON,e.next=22,s("auth.get_user",t);case 22:if(e.t4=e.sent,!(r=e.t3.parse.call(e.t3,e.t4))){e.next=27;break}return console.log("Got user from serviceworker",r),e.abrupt("return",r);case 27:e.next=32;break;case 29:e.prev=29,e.t5=e.catch(17),console.error("Failed to fetch user from serviceworker",e.t5);case 32:if(!(o=_.getItem("matcharena/"+t+"shared-id"))){e.next=37;break}return e.abrupt("return",JSON.parse(atob(o)));case 37:if(!window.poki_storage_get){e.next=51;break}return e.prev=38,e.next=41,window.poki_storage_get("matcharena/shared-id");case 41:if(i=e.sent,!(a=JSON.parse(atob(i)))){e.next=46;break}return console.log("Got user from poki bounce iframe storage",a),e.abrupt("return",a);case 46:e.next=51;break;case 48:e.prev=48,e.t6=e.catch(38),console.error("Failed to fetch user from poki bounce iframe",e.t6);case 51:return e.abrupt("return",null);case 52:case"end":return e.stop()}},e,this,[[1,13],[17,29],[38,48]])})),function(e){return o.apply(this,arguments)}),store_local_user:(r=u(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}if(!window.yandex_safeStorage_set){e.next=10;break}return e.prev=2,e.next=5,window.yandex_safeStorage_set(n+"auth_user",JSON.stringify(t));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Failed to store user in the yandex safeStorage",e.t0);case 10:if(!window.MA_CONFIG.is_safari){e.next=19;break}return e.prev=11,e.next=14,s("auth.set_user",JSON.stringify(t),n);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.error("Failed to store user in the serviceworker",e.t1);case 19:_.setItem("matcharena/"+n+"shared-id",btoa(JSON.stringify(t)));case 20:case"end":return e.stop()}},e,this,[[2,7],[11,16]])})),function(e,t){return r.apply(this,arguments)}),load_local_save:(n=u(regeneratorRuntime.mark(function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],o="matcharena2/"+t+"save"+String(n),(i=_.getItem(o))&&(console.log("Got user save from local storage"),r.push(i)),!window.yandex_safeStorage_get){e.next=15;break}return e.prev=5,e.next=8,window.yandex_safeStorage_get("ya_"+o);case 8:(a=e.sent)&&(console.log("Got user save from yandex safe storage"),r.push(a)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Failed to fetch save from yandex safe storage",e.t0);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this,[[5,12]])})),function(e,t){return n.apply(this,arguments)}),store_local_save:(t=u(regeneratorRuntime.mark(function e(t,n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o="matcharena2/"+t+"save"+String(n),!r){e.next=12;break}if(!window.yandex_safeStorage_set){e.next=11;break}return e.prev=3,e.next=6,window.yandex_safeStorage_set("ya_"+o,r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Failed to store save data in the yandex safeStorage",e.t0);case 11:_.setItem(o,r);case 12:case"end":return e.stop()}},e,this,[[3,8]])})),function(e,n,r){return t.apply(this,arguments)})}),v.initialize_ui(c),function(){if(MA_CONFIG.fb_app){var e=new URLSearchParams(window.location.search).get("fb_app");e&&e in MA_CONFIG.fb_apps&&(MA_CONFIG.fb_app=MA_CONFIG.fb_apps[e]),h.initialize(c,MA_CONFIG.fb_app["app-id"])}}(),m.initialize(c),a(),i=function(){p.MyPromise.future();y.embed(c),y.get_install_sw_promise().then(function(e){e?(console.log("We are allowed to install ServiceWorker"),console.log("But we will not to fix some issues..."),P()):(console.log("We are not allowed to install ServiceWorker"),P())},function(e){console.log("Promise for ServiceWorker installation rejected",e)}),function(){document.getElementById("preroll-play-wrapper");var e=!1;"yandex"===MA_CONFIG.embed&&b.should_show_preroll()&&(e=!0),e&&y.show_ad("preroll").then(function(e){var t=e.status,n=void 0;n="success"===t?"success":"failed-blocked"===t?"blocked":"failed",window.preroll_result=n},function(e){window.preroll_result="failed"})}(),l.initialize_app(c),c.expose({set_allow_preroll:function(e){_.setItem("matcharena/allow-preroll",e)},allow_offline_cache:function(){"yandex"===MA_CONFIG.embed&&(console.log("Granted permission to upload offline cache to ServiceWorker"),s("cache.build",null).then(function(e){console.log("Offline cache successfully uploaded to ServiceWorker",e)},function(e){console.log("Offline cache upload to ServiceWorker failed",e)}))}})},E=null,"vk"===MA_CONFIG.embed&&(E=w.get_reforged_promo_link()),E?x.show_reforged_promo(E,i):i()}e.exports=function(e,t){l=e,c=t,window.addEventListener("load",O)}},363:function(e,t,n){},365:function(e,t,n){},368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a,s=(r=d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.apiAsync("/app/products");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),u=(o=d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),c=(i=d(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=s(),n=u(),e.t0=P,e.next=7,t;case 7:return e.t1=e.sent,e.next=10,n;case 10:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 12:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),l=(a=d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k&&!x||(k=c()).catch(function(e){x=!0}),e.next=3,k;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)});function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(e,t){function n(e){"opened"==e.state?v.show_flash(!1):v.show_flash(!0)}(v=e).expose({fb_invite_friends:function(e){h.show_shadow_overlay(!0);var t=f.get_texts(["invite_request.title","invite_request.message"]).then(function(e){var t=_.uiAsync({method:"apprequests",message:e[1],title:e[0],filters:["app_non_users"]});return t.then(function(e){console.log("Invite friends",e)},function(e){console.error("Invite friends",e)})});return t.finally(function(){h.show_shadow_overlay(!1)}),t},fb_query_auth:F,fb_login:j,fb_logout:L,fb_consume_purchase:function(e){return A().then(function(){return _.apiAsync(e+"/consume","post")}).then(function(){return!0})},fb_purchase:function(e,t){var n={method:"pay",action:"purchaseiap",product_id:e};function r(){var e=p.MyPromise.future();return _.ui(n,function(t){!t||t.error?e.reject(t?t.error:null):e.resolve(t)}),e}var o=void 0;return t&&_?(console.log("Invoking fb_purchase in trusted context (user action)"),o=r()):(console.log("Invoking fb_purchase in untrusted context (no user action, via proxy)"),o=A().then(function(){var t=I[e],n=void 0;return n=t?t.price_string:E[e],f.get_texts(["modal.fb_purchase_proxy.gems"]).then(function(t){return h.show_modal_popup({header:"@"+S[e]+" "+t[0],text:"@"+n,button:"modal.fb_purchase_proxy.button"},"social",!0)})}).then(function(e){return e?r():Promise.reject("popup_cancelled")})),o.then(function(e){return e.error_code?Promise.reject(e.error_message):{id:e.purchase_token,product_id:e.product_id}})},fb_fetch_products:l,fb_fetch_purchases:N,fb_query_friends:C}),r=document,o="script",i="facebook-jssdk",a=void 0,s=r.getElementsByTagName(o)[0],r.getElementById(i)||((a=r.createElement(o)).id=i,a.onerror=function(){g.reject("failed to load FB")},a.src="",s.parentNode.insertBefore(a,s)),window.fbAsyncInit=function(){_=window.FB,p.promisify(_,"api"),p.promisify(_,"ui"),_.init({appId:t,xfbml:!0,version:"v5.0",cookie:!0,hideFlashCallback:n}),_.getLoginStatus(D),_.Event.subscribe("auth.login",q),_.Event.subscribe("auth.logout",G),g.resolve(_)};var r,o,i,a,s};var p=n(9),f=n(57),h=n(11),m=n(34),v=void 0,g=p.MyPromise.future();g.catch(function(e){console.error("faield to load facebook:",e)});var _=void 0,y=null,w=!1,b=p.MyPromise.future(),k=null,x=!1,I={},E=m.default_prices,S=m.gems_amount,R=3;function A(){return p.MyPromise.with_timeout(g,R,function(){return R=Math.max(1,R-1),Promise.reject("fbsdk timeout")})}function P(e,t){if(!e)return null;for(var n=[],r=0;r<e.data.length;r++){var o=e.data[r],i={product_id:o.product_id,price_usd_cents:o.price_amount_cents,price_string:o.price,price_currency:"$",price_value:(o.price_amount_cents/100).toFixed(2)};if(t){var a={cents:Math.round(i.price_usd_cents*t.usd_exchange_inverse*(t.currency_offset/100)),offset:t.currency_offset,currency:t.user_currency};i.price_local=a,i.price_value=(a.cents/a.offset).toFixed(Math.log10(a.offset)),i.price_currency=a.currency,i.price_string=a.price=i.price_value+" "+i.price_currency}I[o.product_id]=i,n.push(i)}return console.log("Product info received:",n),n}function O(e){console.log("Fetching FB information for user %s",e.userID);var t=_.apiAsync("/me?fields=first_name,currency,locale,permissions");return t.then(function(e){b.resolve(e.currency)},function(e){b.resolve(null)}),t.then(function(t){var n=function(e){var t={};if(!e||!e.data)return t;for(var n=e.data,r=n.length,o=0;o<r;o++){var i=n[o];t[i.permission]=i.status}return t}(t.permissions),r={name:t.first_name,uid:t.id,locale:t.locale,access_token:e.accessToken,permissions:n};return console.log("FB user profile received"),r})}function C(){return A().then(function(){return _.apiAsync("/me/friends").then(function(e){for(var t=[],n=e.data.length,r=0;r<n;r++)t.push(e.data[r].id);return console.log("User friends: %s",JSON.stringify(t)),t},function(e){return console.warn("User friends fetch error: %s",e),Promise.reject(e)})},function(e){reject(e)})}function N(){return A().then(function(){return function e(t){var n={limit:100};t&&(n.after=t);var r=[];return _.apiAsync("/app/purchases","get",n).then(function(t){for(var n=t.data,o=0;o<n.length;o++){var i=n[o];if("charge"==i.payment_action_type){var a={id:i.purchase_token,product_id:i.product_id,consumed:i.consumed};r.push(a)}}if(t.paging&&t.paging.cursors&&t.paging.cursors.after)return e(t.paging.cursors.after)}).then(function(e){return r})}()})}function j(e,t,n){function r(){h.show_shadow_overlay(!1);var n=p.MyPromise.future();try{var r={scope:e.join(","),return_scopes:!0};t&&(r.auth_type="rerequest"),_.login(function(e){e.authResponse?(console.log("FB login succeeded"),y=O(e.authResponse),n.resolve(y)):(console.log("User cancelled login or did not fully authorize."),n.reject("cancelled"))},r)}catch(e){n.reject(e)}return n}h.show_shadow_overlay(!0);return(_&&(n||"facebook"===MA_CONFIG.embed)?r():A().then(function(){return"facebook"!==MA_CONFIG.embed?h.show_modal_popup("fb_login_proxy","social",!0).then(function(e){return e?r():Promise.reject("popup_cancelled")}):r()})).finally(function(){h.show_shadow_overlay(!1)})}var M=null;function F(e){if(M){var t=M;return M=null,t}return T(e)}function T(e){return(!y||w||e)&&(w=!1,(y=A().then(function(){return new Promise(function(e,t){_.getLoginStatus(function(n){"connected"===n.status?e(O(n.authResponse)):t("not connected")}),setTimeout(function(){t("facebook timeout")},1e4)})})).catch(function(e){console.log("FB auth failed: %s",e),w=!0})),y}function L(){return!!_&&(_.logout(),!0)}function U(e){e,console.log("FB user status updated: "+e),e?(b=p.MyPromise.future(),M=T(),k=null,x=!1,l().catch(function(e){console.warn("Failed to fetch products: ",e)})):(M=null,(b=p.MyPromise.future()).resolve(null),k=Promise.reject("not authorized").catch(function(e){}),x=!1)}function D(e){e&&"connected"==e.status?(console.log("FB: status: user authorized"),U(!0)):(console.log("FB: status: user not authorized"),U(!1))}function q(){console.log("FB: user login event"),U(!0)}function G(){console.log("FB: user logout event"),U(!1)}},369:function(e,t,n){"use strict";(function(r,o,i){var a,s,u,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};u=function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function n(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var t,n={},r=e.split(/ *; */);if(""==r[0])return n;for(var o=0;o<r.length;++o)n[s((t=r[o].split("="))[0])]=s(t[1]);return n}(e)}function a(e){try{return encodeURIComponent(e)}catch(t){C("error `encode(%o)` - %o",e,t)}}function s(e){try{return decodeURIComponent(e)}catch(t){C("error `decode(%o)` - %o",e,t)}}function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function p(e){var t=this.__data__=new me(e);this.size=t.size}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){switch(void 0===e?"undefined":c(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function m(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==(void 0===e?"undefined":c(e))?v(Ht(e),function(r){var o=encodeURIComponent(h(r))+n;return Jt(e[r])?v(e[r],function(e){return o+encodeURIComponent(h(e))}).join(t):o+encodeURIComponent(h(e[r]))}).join(t):r?encodeURIComponent(h(r))+n+encodeURIComponent(h(e)):""}function v(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function g(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c,l,d,p,h=e[u].replace(i,"%20"),m=h.indexOf(n);m>=0?(c=h.substr(0,m),l=h.substr(m+1)):(c=h,l=""),d=decodeURIComponent(c),p=decodeURIComponent(l),f(o,d)?Jt(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o}var _,y="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},w=(e(function(e,t){(function(){function n(e,t){function o(e){if(o[e]!==g)return o[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=o("json-stringify")&&o("json-parse");else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,c="function"==typeof u&&w;if(c){(r=function(){return 1}).toJSON=r;try{c="0"===u(0)&&"0"===u(new a)&&'""'==u(new s)&&u(y)===g&&u(g)===g&&u()===g&&"1"===u(r)&&"[1]"==u([r])&&"[null]"==u([g])&&"null"==u(null)&&"[null,null,null]"==u([g,y,null])&&u({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===u(null,r)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new l(-1))}catch(e){c=!1}}n=c}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){var p=5==(r=d(i)).a.length&&1===r.a[0];if(p){try{p=!d('"\t"')}catch(e){}if(p)try{p=1!==d("01")}catch(e){}if(p)try{p=1!==d("1.")}catch(e){}}}}catch(e){p=!1}n=p}}return o[e]=!!n}e||(e=i.Object()),t||(t=i.Object());var a=e.Number||i.Number,s=e.String||i.String,u=e.Object||i.Object,l=e.Date||i.Date,d=e.SyntaxError||i.SyntaxError,p=e.TypeError||i.TypeError,f=e.Math||i.Math,h=e.JSON||i.JSON;"object"==(void 0===h?"undefined":c(h))&&h&&(t.stringify=h.stringify,t.parse=h.parse);var m,v,g,_=u.prototype,y=_.toString,w=new l(-0xc782b5b800cec);try{w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(e){}if(!o("json")){var b=o("bug-string-char-index");if(!w)var k=f.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(e,t){return x[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};if((m=_.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?m=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),v=function(e,t){var n,o,i,a=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n)m.call(o,i)&&a++;return n=o=null,a?v=2==a?function(e,t){var n,r={},o="[object Function]"==y.call(e);for(n in e)o&&"prototype"==n||m.call(r,n)||!(r[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,r,o="[object Function]"==y.call(e);for(n in e)o&&"prototype"==n||!m.call(e,n)||(r="constructor"===n)||t(n);(r||m.call(e,n="constructor"))&&t(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],v=function(e,t){var n,i,a="[object Function]"==y.call(e),s=!a&&"function"!=typeof e.constructor&&r[c(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(n in e)a&&"prototype"==n||!s.call(e,n)||t(n);for(i=o.length;n=o[--i];s.call(e,n)&&t(n));}),v(e,t)},!o("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},S=function(e,t){return("000000"+(t||0)).slice(-e)},R=function(e){for(var t='"',n=0,r=e.length,o=!b||r>10,i=o&&(b?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=E[a];break;default:if(a<32){t+="\\u00"+S(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'};t.stringify=function(e,t,n){var o,i,a,s;if(r[void 0===t?"undefined":c(t)]&&t)if("[object Function]"==(s=y.call(t)))i=t;else if("[object Array]"==s){a={};for(var u,l=0,d=t.length;l<d;u=t[l++],("[object String]"==(s=y.call(u))||"[object Number]"==s)&&(a[u]=1));}if(n)if("[object Number]"==(s=y.call(n))){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else"[object String]"==s&&(o=n.length<=10?n:n.slice(0,10));return function e(t,n,r,o,i,a,s){var u,l,d,f,h,_,w,b,x,E,A,P,O,C,N,j;try{u=n[t]}catch(t){}if("object"==(void 0===u?"undefined":c(u))&&u)if("[object Date]"!=(l=y.call(u))||m.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=l&&"[object String]"!=l&&"[object Array]"!=l||m.call(u,"toJSON"))&&(u=u.toJSON(t));else if(u>-1/0&&u<1/0){if(I){for(h=k(u/864e5),d=k(h/365.2425)+1970-1;I(d+1,0)<=h;d++);for(f=k((h-I(d,0))/30.42);I(d,f+1)<=h;f++);h=1+h-I(d,f),w=k((_=(u%864e5+864e5)%864e5)/36e5)%24,b=k(_/6e4)%60,x=k(_/1e3)%60,E=_%1e3}else d=u.getUTCFullYear(),f=u.getUTCMonth(),h=u.getUTCDate(),w=u.getUTCHours(),b=u.getUTCMinutes(),x=u.getUTCSeconds(),E=u.getUTCMilliseconds();u=(d<=0||d>=1e4?(d<0?"-":"+")+S(6,d<0?-d:d):S(4,d))+"-"+S(2,f+1)+"-"+S(2,h)+"T"+S(2,w)+":"+S(2,b)+":"+S(2,x)+"."+S(3,E)+"Z"}else u=null;if(r&&(u=r.call(n,t,u)),null===u)return"null";if("[object Boolean]"==(l=y.call(u)))return""+u;if("[object Number]"==l)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==l)return R(""+u);if("object"==(void 0===u?"undefined":c(u))){for(C=s.length;C--;)if(s[C]===u)throw p();if(s.push(u),A=[],N=a,a+=i,"[object Array]"==l){for(O=0,C=u.length;O<C;O++)P=e(O,u,r,o,i,a,s),A.push(P===g?"null":P);j=A.length?i?"[\n"+a+A.join(",\n"+a)+"\n"+N+"]":"["+A.join(",")+"]":"[]"}else v(o||u,function(t){var n=e(t,u,r,o,i,a,s);n!==g&&A.push(R(t)+":"+(i?" ":"")+n)}),j=A.length?i?"{\n"+a+A.join(",\n"+a)+"\n"+N+"}":"{"+A.join(",")+"}":"{}";return s.pop(),j}}("",((u={})[""]=e,u),i,a,o,"",[])}}if(!o("json-parse")){var A,P,O=s.fromCharCode,C={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},N=function(){throw A=P=null,d()},j=function(){for(var e,t,n,r,o,i=P,a=i.length;A<a;)switch(o=i.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?i.charAt(A):i[A],A++,e;case 34:for(e="@",A++;A<a;)if((o=i.charCodeAt(A))<32)N();else if(92==o)switch(o=i.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=C[o],A++;break;case 117:for(t=++A,n=A+4;A<n;A++)(o=i.charCodeAt(A))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||N();e+=O("0x"+i.slice(t,A));break;default:N()}else{if(34==o)break;for(o=i.charCodeAt(A),t=A;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++A);e+=i.slice(t,A)}if(34==i.charCodeAt(A))return A++,e;N();default:if(t=A,45==o&&(r=!0,o=i.charCodeAt(++A)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(A+1))>=48&&o<=57&&N(),r=!1;A<a&&(o=i.charCodeAt(A))>=48&&o<=57;A++);if(46==i.charCodeAt(A)){for(n=++A;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==A&&N(),A=n}if(101==(o=i.charCodeAt(A))||69==o){for(43!=(o=i.charCodeAt(++A))&&45!=o||A++,n=A;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==A&&N(),A=n}return+i.slice(t,A)}if(r&&N(),"true"==i.slice(A,A+4))return A+=4,!0;if("false"==i.slice(A,A+5))return A+=5,!1;if("null"==i.slice(A,A+4))return A+=4,null;N()}return"$"},M=function(e,t,n){var r=F(e,t,n);r===g?delete e[t]:e[t]=r},F=function(e,t,n){var r,o=e[t];if("object"==(void 0===o?"undefined":c(o))&&o)if("[object Array]"==y.call(o))for(r=o.length;r--;)M(o,r,n);else v(o,function(e){M(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return A=0,P=""+e,n=function e(t){var n,r;if("$"==t&&N(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=j());r||(r=!0))r&&(","==t?"]"==(t=j())&&N():N()),","==t&&N(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=j());r||(r=!0))r&&(","==t?"}"==(t=j())&&N():N()),","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==j()||N(),n[t.slice(1)]=e(j());return n}N()}return t}(j()),"$"!=j()&&N(),A=P=null,t&&"[object Function]"==y.call(t)?F(((r={})[""]=n,r),"",t):n}}}return t.runInContext=n,t}var r={function:!0,object:!0},o=r.object&&t&&!t.nodeType&&t,i=r["undefined"==typeof window?"undefined":c(window)]&&window||this,a=o&&r.object&&e&&!e.nodeType&&"object"==(void 0===y?"undefined":c(y))&&y;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),o)n(i,o);else{var s=i.JSON,u=i.JSON3,l=!1,d=n(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=s,i.JSON3=u,s=u=null),d}});i.JSON={parse:d.parse,stringify:d.stringify}}}).call(y)}),{DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",COOKIE_TEST:"amplitude_cookie_test",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id"}),b=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},k=function(e){for(var t="",n=0,r=0,o=0,i=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return t},x={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}return x._encode(e)},_encode:function(e){var t,n,r,o,i,a,s,u="",c=0;for(e=b(e);c<e.length;)o=(t=e.charCodeAt(c++))>>2,i=(3&t)<<4|(n=e.charCodeAt(c++))>>4,a=(15&n)<<2|(r=e.charCodeAt(c++))>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),u=u+x._keyStr.charAt(o)+x._keyStr.charAt(i)+x._keyStr.charAt(a)+x._keyStr.charAt(s);return u},decode:function(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(e){}return x._decode(e)},_decode:function(e){var t,n,r,o,i,a,s="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=x._keyStr.indexOf(e.charAt(u++))<<2|(o=x._keyStr.indexOf(e.charAt(u++)))>>4,n=(15&o)<<4|(i=x._keyStr.indexOf(e.charAt(u++)))>>2,r=(3&i)<<6|(a=x._keyStr.indexOf(e.charAt(u++))),s+=String.fromCharCode(t),64!==i&&(s+=String.fromCharCode(n)),64!==a&&(s+=String.fromCharCode(r));return k(s)}},I=e(function(e,t){t.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?function(e){switch(t.protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}():t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},t.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},t.isRelative=function(e){return!t.isAbsolute(e)},t.isCrossDomain=function(e){e=t.parse(e);var n=t.parse(window.location.href);return e.hostname!==n.hostname||e.port!==n.port||e.protocol!==n.protocol}}),E=1e3,S=6e4,R=36e5,A=24*R,P=function(e,n){n=n||{};var r=void 0===e?"undefined":c(e);if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*A;case"hours":case"hour":case"hrs":case"hr":case"h":return n*R;case"minutes":case"minute":case"mins":case"min":case"m":return n*S;case"seconds":case"second":case"secs":case"sec":case"s":return n*E;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return n.long?function(e){return t(e,A,"day")||t(e,R,"hour")||t(e,S,"minute")||t(e,E,"second")||e+" ms"}(e):function(e){return e>=A?Math.round(e/A)+"d":e>=R?Math.round(e/R)+"h":e>=S?Math.round(e/S)+"m":e>=E?Math.round(e/E)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},O=e(function(e,t){function n(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(o||r);e.diff=i,e.prev=o,e.curr=r,o=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=a[u];n=o.call(e,i),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}var o;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),n.destroy=r,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=P,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),C=e(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e}(t=e.exports=O).log=function(){return"object"==("undefined"==typeof console?"undefined":c(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&("%c"===e&&(i=++o))}),e.splice(i,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())})("cookie"),N=function(e,t,r){switch(arguments.length){case 3:case 2:return function(e,t,n){n=n||{};var r=a(e)+"="+a(t);null==t&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(r+="; path="+n.path),n.domain&&(r+="; domain="+n.domain),n.expires&&(r+="; expires="+n.expires.toUTCString()),n.secure&&(r+="; secure"),document.cookie=r}(e,t,r);case 1:return function(e){return n()[e]}(e);default:return n()}},j=e(function(e,t){function n(e){for(var n=t.cookie,r=t.levels(e),o=0;o<r.length;++o){var i=r[o],a={domain:"."+i};if(n("__tld__",1,a),n("__tld__"))return n("__tld__",null,a),i}return""}var r=I.parse;n.levels=function(e){var t=r(e).hostname.split("."),n=t[t.length-1],o=[];if(4===t.length&&n===parseInt(n,10))return o;if(t.length<=1)return o;for(var i=t.length-2;i>=0;--i)o.push(t.slice(i).join("."));return o},n.cookie=N,t=e.exports=n}),M="function"==typeof Symbol&&"symbol"==c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},F=Object.prototype.toString,T=function(e){switch(F.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":void 0!==i&&"function"==typeof i.isBuffer&&i.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":M(e)},L={DISABLE:0,ERROR:1,WARN:2,INFO:3},U=L.WARN,D={error:function(e){U>=L.ERROR&&q(e)},warn:function(e){U>=L.WARN&&q(e)},info:function(e){U>=L.INFO&&q(e)}},q=function(e){try{console.log("[Amplitude] "+e)}catch(e){}},G=function(e){var t=T(e);if("object"!==t)return D.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>w.MAX_PROPERTY_KEYS)return D.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,i=T(o);"string"!==i&&(o=String(o),D.warn("WARNING: Non-string property key, received type "+i+', coercing to string "'+o+'"'));var a=z(o,e[r]);null!==a&&(n[o]=a)}return n},B=["null","nan","undefined","function","arguments","regexp","element"],z=function e(t,n){var r=T(n);if(-1!==B.indexOf(r))D.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("error"===r)n=String(n),D.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var o=[],i=0;i<n.length;i++){var a=n[i],s=T(a);"array"!==s&&"object"!==s?o.push(e(t,a)):D.warn("WARNING: Cannot have "+s+" nested in an array property value, skipping")}n=o}else"object"===r&&(n=G(n));return n},V=function(e,t){var n=T(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),D.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var r=[],o=0;o<t.length;o++){var i=t[o],a=T(i);"array"!==a&&"object"!==a?"string"===a?r.push(i):"date"!==a&&"number"!==a&&"boolean"!==a||(i=String(i),D.warn("WARNING: Non-string groupName, received type "+a+', coercing to string "'+i+'"'),r.push(i)):D.warn("WARNING: Skipping nested "+a+" in array groupName")}return r}D.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},K=function(e){U=L[e]||U},W=D,J=function(e){return!e||0===e.length},H=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},Y=function e(t){if("array"===T(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if("object"===T(t))for(var r in t)t.hasOwnProperty(r)&&(t[r]=e(t[r]));else t=function(e){return"string"===T(e)&&e.length>w.MAX_STRING_LENGTH?e.substring(0,w.MAX_STRING_LENGTH):e}(t);return t},$=function(e){var t=T(e);if("object"!==t)return D.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,i=T(o);"string"!==i&&(o=String(o),D.warn("WARNING: Non-string groupType, received type "+i+', coercing to string "'+o+'"'));var a=V(0,e[r]);null!==a&&(n[o]=a)}return n},X=function(e,t,n){return T(e)===n||(D.error("Invalid "+t+" input type. Expected "+n+" but received "+T(e)),!1)},Q=G,Z={expirationDays:void 0,domain:void 0},ee=function(e){var t="";return Z.domain&&(t="."===Z.domain.charAt(0)?Z.domain.substring(1):Z.domain),e+t},te=function(e){try{for(var t=ee(e)+"=",n=document.cookie.split(";"),r=null,o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){r=i.substring(t.length,i.length);break}}return r?JSON.parse(x.decode(r)):null}catch(e){return null}},ne=function(e,t){try{return re(ee(e),x.encode(JSON.stringify(t)),Z),!0}catch(e){return!1}},re=function(e,t,n){var r=null!==t?n.expirationDays:-1;if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),r=o}var i=e+"="+t;r&&(i+="; expires="+r.toUTCString()),i+="; path=/",n.domain&&(i+="; domain="+n.domain),document.cookie=i},oe=function(e){try{return re(ee(e),null,Z),!0}catch(e){return!1}},ie={reset:function(){Z={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return Z;e=e||{},Z.expirationDays=e.expirationDays;var t=J(e.domain)?"."+j(window.location.href):e.domain,n=Math.random();Z.domain=t,ne("amplitude_test",n);var r=te("amplitude_test");r&&r===n||(t=null),oe("amplitude_test"),Z.domain=t},get:te,set:ne,remove:oe};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}return!1}())_=window.localStorage;else if(window.globalStorage)try{_=window.globalStorage[window.location.hostname]}catch(e){}else{var ae=document.createElement("div"),se="localStorage";ae.style.display="none",document.getElementsByTagName("head")[0].appendChild(ae),ae.addBehavior&&(ae.addBehavior("#default#userdata"),_={length:0,setItem:function(e,t){ae.load(se),ae.getAttribute(e)||this.length++,ae.setAttribute(e,t),ae.save(se)},getItem:function(e){return ae.load(se),ae.getAttribute(e)},removeItem:function(e){ae.load(se),ae.getAttribute(e)&&this.length--,ae.removeAttribute(e),ae.save(se)},clear:function(){ae.load(se);for(var e,t=0;e=ae.XMLDocument.documentElement.attributes[t++];)ae.removeAttribute(e.name);ae.save(se),this.length=0},key:function(e){return ae.load(se),ae.XMLDocument.documentElement.attributes[e]}},ae.load(se),_.length=ae.XMLDocument.documentElement.attributes.length)}_||(_={length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}});var ue=_,ce=function(){this.storage=null};ce.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return ie.set(w.COOKIE_TEST,t),e=ie.get(w.COOKIE_TEST)===t,ie.remove(w.COOKIE_TEST),e}catch(e){}return!1},ce.prototype.getStorage=function(){return null!==this.storage?this.storage:(this._cookiesEnabled()?this.storage=ie:this.storage={_options:{expirationDays:void 0,domain:void 0},reset:function(){this._options={expirationDays:void 0,domain:void 0}},options:function(e){return 0===arguments.length?this._options:(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname,this._options)},get:function(e){try{return JSON.parse(ue.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function(e,t){try{return ue.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{ue.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}},this.storage)};var le=function(){this.userPropertiesOperations={},this.properties=[]};le.prototype.add=function(e,t){return"number"===T(t)||"string"===T(t)?this._addOperation("$add",e,t):W.error("Unsupported type for value: "+T(t)+", expecting number or string"),this},le.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},le.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(this.userPropertiesOperations.hasOwnProperty("$clearAll")||W.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations.$clearAll="-",this)},le.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},le.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},le.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},le.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},le.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?W.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):W.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var de=e(function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,o,i,a){return n(function(e,t){return e<<i|e>>>32-i}(n(n(t,e),n(o,a))),r)}function o(e,t,n,o,i,a,s){return r(t&n|~t&o,e,t,i,a,s)}function i(e,t,n,o,i,a,s){return r(t&o|n&~o,e,t,i,a,s)}function a(e,t,n,o,i,a,s){return r(t^n^o,e,t,i,a,s)}function s(e,t,n,o,i,a,s){return r(n^(t|~o),e,t,i,a,s)}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var r,u,c,l,d,p=1732584193,f=-271733879,h=-1732584194,m=271733878;for(r=0;r<e.length;r+=16)u=p,c=f,l=h,d=m,f=s(f=s(f=s(f=s(f=a(f=a(f=a(f=a(f=i(f=i(f=i(f=i(f=o(f=o(f=o(f=o(f,h=o(h,m=o(m,p=o(p,f,h,m,e[r],7,-680876936),f,h,e[r+1],12,-389564586),p,f,e[r+2],17,606105819),m,p,e[r+3],22,-1044525330),h=o(h,m=o(m,p=o(p,f,h,m,e[r+4],7,-176418897),f,h,e[r+5],12,1200080426),p,f,e[r+6],17,-1473231341),m,p,e[r+7],22,-45705983),h=o(h,m=o(m,p=o(p,f,h,m,e[r+8],7,1770035416),f,h,e[r+9],12,-1958414417),p,f,e[r+10],17,-42063),m,p,e[r+11],22,-1990404162),h=o(h,m=o(m,p=o(p,f,h,m,e[r+12],7,1804603682),f,h,e[r+13],12,-40341101),p,f,e[r+14],17,-1502002290),m,p,e[r+15],22,1236535329),h=i(h,m=i(m,p=i(p,f,h,m,e[r+1],5,-165796510),f,h,e[r+6],9,-1069501632),p,f,e[r+11],14,643717713),m,p,e[r],20,-373897302),h=i(h,m=i(m,p=i(p,f,h,m,e[r+5],5,-701558691),f,h,e[r+10],9,38016083),p,f,e[r+15],14,-660478335),m,p,e[r+4],20,-405537848),h=i(h,m=i(m,p=i(p,f,h,m,e[r+9],5,568446438),f,h,e[r+14],9,-1019803690),p,f,e[r+3],14,-187363961),m,p,e[r+8],20,1163531501),h=i(h,m=i(m,p=i(p,f,h,m,e[r+13],5,-1444681467),f,h,e[r+2],9,-51403784),p,f,e[r+7],14,1735328473),m,p,e[r+12],20,-1926607734),h=a(h,m=a(m,p=a(p,f,h,m,e[r+5],4,-378558),f,h,e[r+8],11,-2022574463),p,f,e[r+11],16,1839030562),m,p,e[r+14],23,-35309556),h=a(h,m=a(m,p=a(p,f,h,m,e[r+1],4,-1530992060),f,h,e[r+4],11,1272893353),p,f,e[r+7],16,-155497632),m,p,e[r+10],23,-1094730640),h=a(h,m=a(m,p=a(p,f,h,m,e[r+13],4,681279174),f,h,e[r],11,-358537222),p,f,e[r+3],16,-722521979),m,p,e[r+6],23,76029189),h=a(h,m=a(m,p=a(p,f,h,m,e[r+9],4,-640364487),f,h,e[r+12],11,-421815835),p,f,e[r+15],16,530742520),m,p,e[r+2],23,-995338651),h=s(h,m=s(m,p=s(p,f,h,m,e[r],6,-198630844),f,h,e[r+7],10,1126891415),p,f,e[r+14],15,-1416354905),m,p,e[r+5],21,-57434055),h=s(h,m=s(m,p=s(p,f,h,m,e[r+12],6,1700485571),f,h,e[r+3],10,-1894986606),p,f,e[r+10],15,-1051523),m,p,e[r+1],21,-2054922799),h=s(h,m=s(m,p=s(p,f,h,m,e[r+8],6,1873313359),f,h,e[r+15],10,-30611744),p,f,e[r+6],15,-1560198380),m,p,e[r+13],21,1309151649),h=s(h,m=s(m,p=s(p,f,h,m,e[r+4],6,-145523070),f,h,e[r+11],10,-1120210379),p,f,e[r+2],15,718787259),m,p,e[r+9],21,-343485551),p=n(p,u),f=n(f,c),h=n(h,l),m=n(m,d);return[p,f,h,m]}function c(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function p(e){return unescape(encodeURIComponent(e))}function f(e){return function(e){return c(u(l(e),8*e.length))}(p(e))}function h(e,t){return function(e,t){var n,r,o=l(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=u(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=u(i.concat(l(t)),512+8*t.length),c(u(a.concat(r),640))}(p(e),p(t))}function m(e,t,n){return t?n?h(t,e):function(e,t){return d(h(e,t))}(t,e):n?f(e):function(e){return d(f(e))}(e)}e.exports?e.exports=m:t.md5=m}(y)}),pe=function(e,t){return e===t||e!=e&&t!=t},fe=function(e,t){for(var n=e.length;n--;)if(pe(e[n][0],t))return n;return-1},he=Array.prototype.splice;u.prototype.clear=function(){this.__data__=[],this.size=0},u.prototype.delete=function(e){var t=this.__data__,n=fe(t,e);return!(n<0||(n==t.length-1?t.pop():he.call(t,n,1),--this.size,0))},u.prototype.get=function(e){var t=this.__data__,n=fe(t,e);return n<0?void 0:t[n][1]},u.prototype.has=function(e){return fe(this.__data__,e)>-1},u.prototype.set=function(e,t){var n=this.__data__,r=fe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var me=u,ve="object"==(void 0===y?"undefined":c(y))&&y&&y.Object===Object&&y,ge="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,_e=ve||ge||Function("return this")(),ye=_e.Symbol,we=Object.prototype,be=we.hasOwnProperty,ke=we.toString,xe=ye?ye.toStringTag:void 0,Ie=Object.prototype.toString,Ee=ye?ye.toStringTag:void 0,Se=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ee&&Ee in Object(e)?function(e){var t=be.call(e,xe),n=e[xe];try{e[xe]=void 0;var r=!0}catch(e){}var o=ke.call(e);return r&&(t?e[xe]=n:delete e[xe]),o}(e):function(e){return Ie.call(e)}(e)},Re=function(e){var t=void 0===e?"undefined":c(e);return null!=e&&("object"==t||"function"==t)},Ae=function(e){if(!Re(e))return!1;var t=Se(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Pe=_e["__core-js_shared__"],Oe=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ce=Function.prototype.toString,Ne=/^\[object .+?Constructor\]$/,je=Function.prototype,Me=Object.prototype,Fe=je.toString,Te=Me.hasOwnProperty,Le=RegExp("^"+Fe.call(Te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=function(e){return!(!Re(e)||function(e){return!!Oe&&Oe in e}(e))&&(Ae(e)?Le:Ne).test(function(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))},De=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ue(n)?n:void 0},qe=De(_e,"Map"),Ge=De(Object,"create"),Be=Object.prototype.hasOwnProperty,ze=Object.prototype.hasOwnProperty;l.prototype.clear=function(){this.__data__=Ge?Ge(null):{},this.size=0},l.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},l.prototype.get=function(e){var t=this.__data__;if(Ge){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Be.call(t,e)?t[e]:void 0},l.prototype.has=function(e){var t=this.__data__;return Ge?void 0!==t[e]:ze.call(t,e)},l.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ge&&void 0===t?"__lodash_hash_undefined__":t,this};var Ve=l,Ke=function(e,t){var n=e.__data__;return function(e){var t=void 0===e?"undefined":c(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};d.prototype.clear=function(){this.size=0,this.__data__={hash:new Ve,map:new(qe||me),string:new Ve}},d.prototype.delete=function(e){var t=Ke(this,e).delete(e);return this.size-=t?1:0,t},d.prototype.get=function(e){return Ke(this,e).get(e)},d.prototype.has=function(e){return Ke(this,e).has(e)},d.prototype.set=function(e,t){var n=Ke(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var We=d;p.prototype.clear=function(){this.__data__=new me,this.size=0},p.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},p.prototype.get=function(e){return this.__data__.get(e)},p.prototype.has=function(e){return this.__data__.has(e)},p.prototype.set=function(e,t){var n=this.__data__;if(n instanceof me){var r=n.__data__;if(!qe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new We(r)}return n.set(e,t),this.size=n.size,this};var Je=p,He=function(){try{var e=De(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ye=function(e,t,n){"__proto__"==t&&He?He(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},$e=function(e,t,n){(void 0===n||pe(e[t],n))&&(void 0!==n||t in e)||Ye(e,t,n)},Xe=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e},Qe=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?_e.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}),Ze=_e.Uint8Array,et=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new Ze(t).set(new Ze(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},tt=Object.create,nt=function(){function e(){}return function(t){if(!Re(t))return{};if(tt)return tt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),rt=function(e,t){return function(n){return e(t(n))}},ot=rt(Object.getPrototypeOf,Object),it=Object.prototype,at=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||it)},st=function(e){return null!=e&&"object"==(void 0===e?"undefined":c(e))},ut=function(e){return st(e)&&"[object Arguments]"==Se(e)},ct=Object.prototype,lt=ct.hasOwnProperty,dt=ct.propertyIsEnumerable,pt=ut(function(){return arguments}())?ut:function(e){return st(e)&&lt.call(e,"callee")&&!dt.call(e,"callee")},ft=Array.isArray,ht=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},mt=function(e){return null!=e&&ht(e.length)&&!Ae(e)},vt=function(){return!1},gt=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?_e.Buffer:void 0,i=(o?o.isBuffer:void 0)||vt;e.exports=i}),_t=Function.prototype,yt=Object.prototype,wt=_t.toString,bt=yt.hasOwnProperty,kt=wt.call(Object),xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var It=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&ve.process,i=function(){try{return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),Et=It&&It.isTypedArray,St=Et?function(e){return function(t){return e(t)}}(Et):function(e){return st(e)&&ht(e.length)&&!!xt[Se(e)]},Rt=Object.prototype.hasOwnProperty,At=function(e,t,n){var r=e[t];Rt.call(e,t)&&pe(r,n)&&(void 0!==n||t in e)||Ye(e,t,n)},Pt=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),o?Ye(n,s,u):At(n,s,u)}return n},Ot=/^(?:0|[1-9]\d*)$/,Ct=function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Ot.test(e))&&e>-1&&e%1==0&&e<t},Nt=Object.prototype.hasOwnProperty,jt=function(e,t){var n=ft(e),r=!n&&pt(e),o=!n&&!r&&gt(e),i=!n&&!r&&!o&&St(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!Nt.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ct(c,u))||s.push(c);return s},Mt=Object.prototype.hasOwnProperty,Ft=function(e){if(!Re(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=at(e),n=[];for(var r in e)("constructor"!=r||!t&&Mt.call(e,r))&&n.push(r);return n},Tt=function(e){return mt(e)?jt(e,!0):Ft(e)},Lt=function(e,t,n,r,o,i,a){var s=e[n],u=t[n],c=a.get(u);if(c)$e(e,n,c);else{var l=i?i(s,u,n+"",e,t,a):void 0,d=void 0===l;if(d){var p=ft(u),f=!p&&gt(u),h=!p&&!f&&St(u);l=u,p||f||h?ft(s)?l=s:function(e){return st(e)&&mt(e)}(s)?l=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):f?(d=!1,l=Qe(u,!0)):h?(d=!1,l=et(u,!0)):l=[]:function(e){if(!st(e)||"[object Object]"!=Se(e))return!1;var t=ot(e);if(null===t)return!0;var n=bt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&wt.call(n)==kt}(u)||pt(u)?(l=s,pt(s)?l=function(e){return Pt(e,Tt(e))}(s):(!Re(s)||r&&Ae(s))&&(l=function(e){return"function"!=typeof e.constructor||at(e)?{}:nt(ot(e))}(u))):d=!1}d&&(a.set(u,l),o(l,u,r,i,a),a.delete(u)),$e(e,n,l)}},Ut=function e(t,n,r,o,i){t!==n&&Xe(n,function(a,s){if(Re(a))i||(i=new Je),Lt(t,n,s,r,e,o,i);else{var u=o?o(t[s],a,s+"",t,n,i):void 0;void 0===u&&(u=a),$e(t,s,u)}},Tt)},Dt=function(e){return e},qt=Math.max,Gt=He?function(e,t){return He(e,"toString",{configurable:!0,enumerable:!1,value:function(e){return function(){return e}}(t),writable:!0})}:Dt,Bt=Date.now,zt=function(e){var t=0,n=0;return function(){var r=Bt(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Gt),Vt=function(e,t){return zt(function(e,t,n){return t=qt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=qt(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,Dt),e+"")},Kt=function(e){return Vt(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(e,t,n){if(!Re(n))return!1;var r=void 0===t?"undefined":c(t);return!!("number"==r?mt(n)&&Ct(t,n.length):"string"==r&&t in n)&&pe(n[t],e)}(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})},Wt=Kt(function(e,t,n){Ut(e,t,n)}),Jt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ht=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},Yt={encode:m,stringify:m,decode:g,parse:g},$t=function(e,t){this.url=e,this.data=t||{}};$t.prototype.send=function(e){if(window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(Yt.stringify(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(Yt.stringify(this.data))}};var Xt=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};Xt.prototype.setProductId=function(e){return"string"!==T(e)?W.error("Unsupported type for productId: "+T(e)+", expecting string"):J(e)?W.error("Invalid empty productId"):this._productId=e,this},Xt.prototype.setQuantity=function(e){return"number"!==T(e)?W.error("Unsupported type for quantity: "+T(e)+", expecting number"):this._quantity=parseInt(e),this},Xt.prototype.setPrice=function(e){return"number"!==T(e)?W.error("Unsupported type for price: "+T(e)+", expecting number"):this._price=e,this},Xt.prototype.setRevenueType=function(e){return"string"!==T(e)?W.error("Unsupported type for revenueType: "+T(e)+", expecting string"):this._revenueType=e,this},Xt.prototype.setEventProperties=function(e){return"object"!==T(e)?W.error("Unsupported type for eventProperties: "+T(e)+", expecting object"):this._properties=Q(e),this},Xt.prototype._isValidRevenue=function(){return"number"===T(this._price)||(W.error("Invalid revenue, need to set price field"),!1)},Xt.prototype._toJSONObject=function(){var e="object"===T(this._properties)?this._properties:{};return null!==this._productId&&(e[w.REVENUE_PRODUCT_ID]=this._productId),null!==this._quantity&&(e[w.REVENUE_QUANTITY]=this._quantity),null!==this._price&&(e[w.REVENUE_PRICE]=this._price),null!==this._revenueType&&(e[w.REVENUE_REVENUE_TYPE]=this._revenueType),e};var Qt=e(function(e,t){!function(n,r){var o="model",i="name",a="type",s="vendor",u="version",l="mobile",d="tablet",p={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},f={rgx:function(){for(var e,t,n,r,o,i,a,s=0,u=arguments;s<u.length&&!i;){var l=u[s],d=u[s+1];if(void 0===e)for(r in e={},d)d.hasOwnProperty(r)&&("object"==c(o=d[r])?e[o[0]]=void 0:e[o]=void 0);for(t=n=0;t<l.length&&!i;)if(i=l[t++].exec(this.getUA()))for(r=0;r<d.length;r++)a=i[++n],"object"==c(o=d[r])&&o.length>0?2==o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,a):e[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=a?a.replace(o[1],o[2]):void 0:e[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(e[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):e[o]=a||void 0;s+=2}return e},str:function(e,t){for(var n in t)if("object"==c(t[n])&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(p.has(t[n][r],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,u],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[i,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[i,u],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[i,"Chrome Mobile"],u],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[i,u],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],u],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],u],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[u,[i,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[u,[i,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[u,[i,"Facebook"]],[/fxios\/([\w\.-]+)/i],[u,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[u,f.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,u],[/(blackberry)\\s?\/([\w\.]+)/i],[[i,"BlackBerry"],u],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,s,[a,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[s,"Apple"],[a,d]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,o,[a,d]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[s,"Amazon"],[a,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,f.str,h.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[o,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,o,[a,l]],[/\(bb10;\s(\w+)/i],[o,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[o,[s,"Asus"],[a,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[o,"Xperia Tablet"],[a,d]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[s,"Sony"],[o,"Xperia Phone"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,o,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,f.str,h.device.sprint.vendor],[o,f.str,h.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,o,[a,d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[o,/_/g," "],[a,l]],[/(nexus\s9)/i],[o,[s,"HTC"],[a,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[o,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[s,"Motorola"],[a,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],o,[a,d]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],o,[a,l]],[/(samsung);smarttv/i],[s,o,[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[s,"Sharp"],[a,"smarttv"]],[/sie-(\w+)*/i],[o,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],o,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[s,"Acer"],[a,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],o,[a,d]],[/(lg) netcast\.tv/i],[s,o,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[s,"Lenovo"],[a,d]],[/linux;.+((jolla));/i],[s,o,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,o,[a,"wearable"]],[/android.+;\s(glass)\s\d/i],[o,[s,"Google"],[a,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[s,"Xiaomi"],[a,l]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[a,p.lowerize],s,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,u],[/rv\:([\w\.]+).*(gecko)/i],[u,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[i,f.str,h.os.windows.name],[u,f.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[u,f.str,h.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,u],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],u],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[i,"Linux"],u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[i,"Linux"],u],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iPhone"],[u,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iPad"],[u,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[u,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,u]]},v=function e(t,r){if(!(this instanceof e))return new e(t,r).getResult();var o=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),i=r?p.extend(m,r):m;return this.getBrowser=function(){var e=f.rgx.apply(this,i.browser);return e.major=p.major(e.version),e},this.getCPU=function(){return f.rgx.apply(this,i.cpu)},this.getDevice=function(){return f.rgx.apply(this,i.device)},this.getEngine=function(){return f.rgx.apply(this,i.engine)},this.getOS=function(){return f.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this};v.VERSION="0.7.10",v.BROWSER={NAME:i,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:o,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:i,VERSION:u},v.OS={NAME:i,VERSION:u},e.exports&&(t=e.exports=v),t.UAParser=v;var g=n.jQuery||n.Zepto;if(void 0!==g){var _=new v;g.ua=_.getResult(),g.ua.get=function(){return _.getUA()},g.ua.set=function(e){_.setUA(e);var t=_.getResult();for(var n in t)g.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":c(window))?window:y)}),Zt=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},en={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:3650,cookieName:"amplitude_id",deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0,logLevel:"WARN",optOut:!1,platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,sessionTimeout:18e5,trackingOptions:{city:!0,country:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100},tn=function(e){this._instanceName=J(e)?w.DEFAULT_INSTANCE:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===w.DEFAULT_INSTANCE?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new Qt(navigator.userAgent).getResult(),this.options=Wt({},en),this.cookieStorage=(new ce).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null};tn.prototype.Identify=le,tn.prototype.Revenue=Xt,tn.prototype.init=function(e,t,n,r){if("string"!==T(e)||J(e))W.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,nn(this.options,n),"string"===T(this.options.logLevel)&&K(this.options.logLevel);var o=dn(this);if(this._apiPropertiesTrackingOptions=Object.keys(o).length>0?{tracking_options:o}:{},this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===w.DEFAULT_INSTANCE&&rn(this),on(this),this.options.deviceId="object"===T(n)&&"string"===T(n.deviceId)&&!J(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||Zt()+"R",this.options.userId="string"===T(t)&&!J(t)&&t||"number"===T(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var i=0;i<this._unsentEvents.length;i++){var a=this._unsentEvents[i].event_properties,s=this._unsentEvents[i].groups;this._unsentEvents[i].event_properties=Q(a),this._unsentEvents[i].groups=$(s)}for(var u=0;u<this._unsentIdentifys.length;u++){var c=this._unsentIdentifys[u].user_properties,l=this._unsentIdentifys[u].groups;this._unsentIdentifys[u].user_properties=Q(c),this._unsentIdentifys[u].groups=$(l)}}var d=(new Date).getTime();(!this._sessionId||!this._lastEventTime||d-this._lastEventTime>this.options.sessionTimeout)&&(this._newSession=!0,this._sessionId=d,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=d,sn(this),this._sendEventsIfReady()}catch(e){W.error(e)}finally{"function"===T(r)&&r(this)}},tn.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var nn=function e(t,n){if("object"===T(n)){var r=function(r){if(t.hasOwnProperty(r)){var o=n[r],i=T(t[r]);X(o,r+" option",i)&&("boolean"===i?t[r]=!!o:"string"===i&&!J(o)||"number"===i&&o>0?t[r]=o:"object"===i&&e(t[r],o))}};for(var o in n)n.hasOwnProperty(o)&&r(o)}};tn.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===T(t)&&t.apply(this,this._q[e].slice(1))}this._q=[]},tn.prototype._apiKeySet=function(e){return!J(this.options.apiKey)||(W.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},tn.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(ue,e),n=this._parseSavedUnsentEventsString(t,e),r=this._getFromStorageLegacy(ue,e),o=this._parseSavedUnsentEventsString(r,e).concat(n);return this._removeFromLegacyStorage(ue,e),this._setInStorage(ue,e,JSON.stringify(o)),o},tn.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},tn.prototype._parseSavedUnsentEventsString=function(e,t){if(J(e))return[];if("string"===T(e))try{var n=JSON.parse(e);if("array"===T(n))return n}catch(e){}return W.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},tn.prototype.isNewSession=function(){return this._newSession},tn.prototype.getSessionId=function(){return this._sessionId},tn.prototype.nextEventId=function(){return this._eventId++,this._eventId},tn.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},tn.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},tn.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},tn.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(e),!0))},tn.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},tn.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},tn.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var rn=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"!==T(t)&&(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix),!("object"===T(t)&&t.deviceId&&t.sessionId&&t.lastEventTime))){var n=function(e){var t=ue.getItem(e);return ue.removeItem(e),t},r="string"===T(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",o=n(w.DEVICE_ID+r),i=n(w.USER_ID+r),a=n(w.OPT_OUT+r);null!==a&&void 0!==a&&(a="true"===String(a));var s=parseInt(n(w.SESSION_ID)),u=parseInt(n(w.LAST_EVENT_TIME)),c=parseInt(n(w.LAST_EVENT_ID)),l=parseInt(n(w.LAST_IDENTIFY_ID)),d=parseInt(n(w.LAST_SEQUENCE_NUMBER)),p=function(e){return"object"===T(t)&&t[e]};e.options.deviceId=p("deviceId")||o,e.options.userId=p("userId")||i,e._sessionId=p("sessionId")||s||e._sessionId,e._lastEventTime=p("lastEventTime")||u||e._lastEventTime,e._eventId=p("eventId")||c||e._eventId,e._identifyId=p("identifyId")||l||e._identifyId,e._sequenceNumber=p("sequenceNumber")||d||e._sequenceNumber,e.options.optOut=a||!1,t&&void 0!==t.optOut&&null!==t.optOut&&(e.options.optOut="true"===String(t.optOut)),sn(e)}},on=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"===T(t))an(e,t);else{var n=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix);"object"===T(n)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),an(e,n))}},an=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},sn=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};tn.prototype._initUtmData=function(e,t){e=e||this._getUrlParams();var n=function(e,t){var n=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",r=function(e,t,n,r){return H(e,t)||H(n,r)},o=r("utm_source",t,"utmcsr",n),i=r("utm_medium",t,"utmcmd",n),a=r("utm_campaign",t,"utmccn",n),s=r("utm_term",t,"utmctr",n),u=r("utm_content",t,"utmcct",n),c={},l=function(e,t){J(t)||(c[e]=t)};return l("utm_source",o),l("utm_medium",i),l("utm_campaign",a),l("utm_term",s),l("utm_content",u),c}(t=t||this.cookieStorage.get("__utmz"),e);un(this,n)};var un=function(e,t){if("object"===T(t)&&0!==Object.keys(t).length){var n=new le;for(var r in t)t.hasOwnProperty(r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};tn.prototype._getReferrer=function(){return document.referrer},tn.prototype._getUrlParams=function(){return location.search},tn.prototype._saveGclid=function(e){var t=H("gclid",e);J(t)||un(this,{gclid:t})},tn.prototype._getDeviceIdFromUrlParam=function(e){return H(w.AMP_DEVICE_ID_PARAM,e)},tn.prototype._getReferringDomain=function(e){if(J(e))return null;var t=e.split("/");return t.length>=3?t[2]:null},tn.prototype._saveReferrer=function(e){if(!J(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};un(this,t)}},tn.prototype.saveEvents=function(){try{this._setInStorage(ue,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(ue,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},tn.prototype.setDomain=function(e){if(X(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,on(this),sn(this)}catch(e){W.error(e)}},tn.prototype.setUserId=function(e){try{this.options.userId=void 0!==e&&null!==e&&""+e||null,sn(this)}catch(e){W.error(e)}},tn.prototype.setGroup=function(e,t){if(this._apiKeySet("setGroup()")&&X(e,"groupType","string")&&!J(e)){var n={};n[e]=t;var r=(new le).set(e,t);this._logEvent(w.IDENTIFY_EVENT,null,null,r.userPropertiesOperations,n,null,null,null)}},tn.prototype.setOptOut=function(e){if(X(e,"enable","boolean"))try{this.options.optOut=e,sn(this)}catch(e){W.error(e)}},tn.prototype.setSessionId=function(e){if(X(e,"sessionId","number"))try{this._sessionId=e,sn(this)}catch(e){W.error(e)}},tn.prototype.resetSessionId=function(){this.setSessionId((new Date).getTime())},tn.prototype.regenerateDeviceId=function(){this.setDeviceId(Zt()+"R")},tn.prototype.setDeviceId=function(e){if(X(e,"deviceId","string"))try{J(e)||(this.options.deviceId=""+e,sn(this))}catch(e){W.error(e)}},tn.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&X(e,"userProperties","object")){var t=Y(Q(e));if(0!==Object.keys(t).length){var n=new le;for(var r in t)t.hasOwnProperty(r)&&n.set(r,t[r]);this.identify(n)}}},tn.prototype.clearUserProperties=function(){if(this._apiKeySet("clearUserProperties()")){var e=new le;e.clearAll(),this.identify(e)}};var cn=function(e,t){for(var n=0;n<t._q.length;n++){var r=e[t._q[n][0]];"function"===T(r)&&r.apply(e,t._q[n].slice(1))}return e};tn.prototype.identify=function(e,t){if(this._apiKeySet("identify()"))if("object"===T(e)&&e.hasOwnProperty("_q")&&(e=cn(new le,e)),e instanceof le){if(Object.keys(e.userPropertiesOperations).length>0)return this._logEvent(w.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,null,t);"function"===T(t)&&t(0,"No request sent",{reason:"No user property operations"})}else W.error("Invalid identify input type. Expected Identify object but saw "+T(e)),"function"===T(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===T(t)&&t(0,"No request sent",{reason:"API key is not set"})},tn.prototype.groupIdentify=function(e,t,n,r){if(this._apiKeySet("groupIdentify()"))if(X(e,"group_type","string")&&!J(e))if(null!==t&&void 0!==t)if("object"===T(n)&&n.hasOwnProperty("_q")&&(n=cn(new le,n)),n instanceof le){if(Object.keys(n.userPropertiesOperations).length>0)return this._logEvent(w.GROUP_IDENTIFY_EVENT,null,null,null,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),n.userPropertiesOperations,null,r);"function"===T(r)&&r(0,"No request sent",{reason:"No group property operations"})}else W.error("Invalid identify input type. Expected Identify object but saw "+T(n)),"function"===T(r)&&r(0,"No request sent",{reason:"Invalid identify input type"});else"function"===T(r)&&r(0,"No request sent",{reason:"Invalid group name"});else"function"===T(r)&&r(0,"No request sent",{reason:"Invalid group type"});else"function"===T(r)&&r(0,"No request sent",{reason:"API key is not set"})},tn.prototype.setVersionName=function(e){X(e,"versionName","string")&&(this.options.versionName=e)},tn.prototype._logEvent=function(e,t,n,r,o,i,a,s){if(on(this),e)if(this.options.optOut)"function"===T(s)&&s(0,"No request sent",{reason:"optOut is set to true"});else try{var u;u=e===w.IDENTIFY_EVENT||e===w.GROUP_IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId();var c=this.nextSequenceNumber(),l="number"===T(a)?a:(new Date).getTime();(!this._sessionId||!this._lastEventTime||l-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=l),this._lastEventTime=l,sn(this),r=r||{};var d=Wt({},this._apiPropertiesTrackingOptions);n=Wt(d,n||{}),t=t||{},o=o||{},i=i||{};var p={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:l,event_id:u,session_id:this._sessionId||-1,event_type:e,version_name:ln(this,"version_name")&&this.options.versionName||null,platform:ln(this,"platform")?this.options.platform:null,os_name:ln(this,"os_name")&&this._ua.browser.name||null,os_version:ln(this,"os_version")&&this._ua.browser.major||null,device_model:ln(this,"device_model")&&this._ua.os.name||null,language:ln(this,"language")?this.options.language:null,api_properties:n,event_properties:Y(Q(t)),user_properties:Y(Q(r)),uuid:Zt(),library:{name:"amplitude-js",version:"4.5.2"},sequence_number:c,groups:Y($(o)),group_properties:Y(Q(i)),user_agent:this._userAgent};return e===w.IDENTIFY_EVENT||e===w.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push(p),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(p),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(s)||"function"!==T(s)||s(0,"No request sent",{reason:"No events to send or upload queued"}),u}catch(e){W.error(e)}else"function"===T(s)&&s(0,"No request sent",{reason:"Missing eventType"})};var ln=function(e,t){return!!e.options.trackingOptions[t]},dn=function(e){for(var t=["city","country","dma","ip_address","region"],n={},r=0;r<t.length;r++){var o=t[r];ln(e,o)||(n[o]=!1)}return n};tn.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},tn.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},tn.prototype.logEventWithTimestamp=function(e,t,n,r){return this._apiKeySet("logEvent()")?X(e,"eventType","string")?J(e)?("function"===T(r)&&r(0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(e,t,null,null,null,null,n,r):("function"===T(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===T(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)},tn.prototype.logEventWithGroups=function(e,t,n,r){return this._apiKeySet("logEventWithGroups()")?X(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,null,r):("function"===T(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===T(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)};var pn=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};tn.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===T(e)&&e.hasOwnProperty("_q")&&(e=cn(new Xt,e)),e instanceof Xt){if(e&&e._isValidRevenue())return this.logEvent(w.REVENUE_EVENT,e._toJSONObject())}else W.error("Invalid revenue input type. Expected Revenue object but saw "+T(e))},tn.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&pn(e)&&(void 0===t||pn(t))?this._logEvent(w.REVENUE_EVENT,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null,null):-1},tn.prototype.removeEvents=function(e,t){fn(this,"_unsentEvents",e),fn(this,"_unsentIdentifys",t)};var fn=function(e,t,n){if(!(n<0)){for(var r=[],o=0;o<e[t].length;o++)e[t][o].event_id>n&&r.push(e[t][o]);e[t]=r}};tn.prototype.sendEvents=function(e){if(this._apiKeySet("sendEvents()"))if(this.options.optOut)"function"===T(e)&&e(0,"No request sent",{reason:"optOut is set to true"});else if(0!==this._unsentCount())if(this._sending)"function"===T(e)&&e(0,"No request sent",{reason:"Request already in progress"});else{this._sending=!0;var t=(this.options.forceHttps?"https":"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",t="",n=Math.min(this._unsentCount(),this.options.uploadBatchSize),r=this._mergeEventsAndIdentifys(n),o=r.maxEventId,i=r.maxIdentifyId,a=JSON.stringify(r.eventsToSend),s=(new Date).getTime(),u={client:this.options.apiKey,e:a,v:w.API_VERSION,upload_time:s,checksum:de(w.API_VERSION+this.options.apiKey+a+s)},c=this;new $t(t,u).send(function(t,r){c._sending=!1;try{200===t&&"success"===r?(c.removeEvents(o,i),c.options.saveEvents&&c.saveEvents(),c._sendEventsIfReady(e)||"function"!==T(e)||e(t,r)):413===t?(1===c.options.uploadBatchSize&&c.removeEvents(o,i),c.options.uploadBatchSize=Math.ceil(n/2),c.sendEvents(e)):"function"===T(e)&&e(t,r)}catch(e){}})}else"function"===T(e)&&e(0,"No request sent",{reason:"No events to send"});else"function"===T(e)&&e(0,"No request sent",{reason:"API key not set"})},tn.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,o=0,i=-1;t.length<e;){var a,s=o>=this._unsentIdentifys.length,u=n>=this._unsentEvents.length;if(u&&s){W.error("Merging Events and Identifys, less events and identifys than expected");break}s?r=(a=this._unsentEvents[n++]).event_id:u?i=(a=this._unsentIdentifys[o++]).event_id:!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[o].sequence_number?r=(a=this._unsentEvents[n++]).event_id:i=(a=this._unsentIdentifys[o++]).event_id,t.push(a)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:i}},tn.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},tn.prototype.__VERSION__="4.5.2";var hn=rt(Object.keys,Object),mn=Object.prototype.hasOwnProperty,vn=function(e){return mt(e)?jt(e):function(e){if(!at(e))return hn(e);var t=[];for(var n in Object(e))mn.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},gn=Object.prototype.hasOwnProperty,_n=Kt(function(e,t){if(at(t)||mt(t))Pt(t,vn(t),e);else for(var n in t)gn.call(t,n)&&At(e,n,t[n])}),yn=function(){this.options=_n({},en),this._q=[],this._instances={}};yn.prototype.Identify=le,yn.prototype.Revenue=Xt,yn.prototype.getInstance=function(e){e=J(e)?w.DEFAULT_INSTANCE:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new tn(e),this._instances[e]=t),t},yn.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===T(r)&&r(e)}.bind(this))},yn.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===T(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)this._instances.hasOwnProperty(n)&&this._instances[n].runQueuedFunctions()},yn.prototype.isNewSession=function(){return this.getInstance().isNewSession()},yn.prototype.getSessionId=function(){return this.getInstance().getSessionId()},yn.prototype.nextEventId=function(){return this.getInstance().nextEventId()},yn.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},yn.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},yn.prototype.saveEvents=function(){this.getInstance().saveEvents()},yn.prototype.setDomain=function(e){this.getInstance().setDomain(e)},yn.prototype.setUserId=function(e){this.getInstance().setUserId(e)},yn.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},yn.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},yn.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},yn.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},yn.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},yn.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},yn.prototype.identify=function(e,t){this.getInstance().identify(e,t)},yn.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},yn.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},yn.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},yn.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},yn.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},yn.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},yn.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},yn.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},yn.prototype.__VERSION__="4.5.2";var wn=window.amplitude||{},bn=new yn;for(var kn in bn._q=wn._q||[],wn._iq)wn._iq.hasOwnProperty(kn)&&(bn.getInstance(kn)._q=wn._iq[kn]._q||[]);return bn},"object"==c(t)&&void 0!==e?e.exports=u():void 0===(s="function"==typeof(a=u)?a.call(t,n,t,e):a)||(e.exports=s)}).call(this,n(58),n(370),n(142).Buffer)},375:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){i=e,window.fbq?a=window.fbq:(a=window.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},window._fbq||(window._fbq=a,a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],r.load_script("").catch(function(e){console.error("Failed to load Facebook Pixel",e),a=window.fbq=function(){}})),a("init",o.fbpixel.id),a("track","PageView"));i.expose({fbpixel_send_event:function(e,t){u(e,t)}})},t.send_event=u;var r=n(9),o=(n(11),n(34),n(12)),i=void 0,a=void 0,s={Purchase:!0,AdImpression:!0,AdClick:!0,fb_mobile_level_achieved:!0,fb_mobile_spent_credits:!0,fb_mobile_tutorial_completion:!0,fb_mobile_complete_registration:!0};function u(e,t){a(e in s?"track":"trackCustom",e,t)}},377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load_script("https://s3.amazonaws.com/imgs3.plinga.de/general/easyXDM.min.js");case 2:return e.next=4,s.load_script("https://s3.amazonaws.com/imgs3.plinga.de/plingaRpc/gd_plingaRpc.js");case 4:return e.next=6,new Promise(function(e){plingaRpc.init(e)});case 6:t=e.sent,console.log("gd iap init result:",t),console.log("gd iap sdk sucessfully initialized");case 9:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)});function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(e){var t=(h=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,n){t.on_opened(),setTimeout(function(){e({status:"success",source:"html fake ad"})},15e3)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)}),n=(a=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:if(!(t=e.sent).is_guest){e.next=12;break}return e.next=6,new Promise(function(e,t){plingaRpc.loginUser(function(t){console.log("login result",t),e(t)},function(){e(v())})});case 6:if(!e.sent.is_guest){e.next=11;break}return e.next=10,Promise.reject("not logged in");case 10:return e.abrupt("return",e.sent);case 11:case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)}),r=e.external_api;var a;var h;function m(e,t){f&&f.reject("failed"),f=s.MyPromise.future(),d=t.on_opened;var n=f;function r(){f==n&&(d=null,f=null)}function o(){n.resolve(!0)}function i(e){n.reject(e||"ad error")}return p=!1,s.MyPromise.delay(15).then(function(){p||n.resolve(!1)}),f.then(r,r),"rewarded"===e?(console.log("Show rewarded ad"),plingaRpc.requestRewardedAdvertisement(o,i)):(console.log("Show interstitial ad"),plingaRpc.requestAdvertisement(o,i)),f}function v(){return new Promise(function(e,t){plingaRpc.getUser(function(t){console.log("gd user data",t),e(t)})})}l.resolve(o()),l.catch(function(e){console.error("Failed to load gd iap sdk",e)}),r.expose({gd_query_auth:function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return e.next=4,v();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),gd_query_products:function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.gd_products);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),gd_purchase:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return e.next=4,n();case 4:return e.next=6,new Promise(function(e,n){plingaRpc.initPayment(t,function(t){console.log("payment results",t),e(t)})});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()});var g={prepare_ad:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success"});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),show_ad:function(){var e=i(regeneratorRuntime.mark(function e(n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return o=!1,e.prev=3,e.next=6,m(n,r);case 6:o=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("gd-plinga requestAdvertisement failed: ",e.t0);case 12:if(o||"rewarded"!==n||!c){e.next=18;break}return e.next=15,t(r);case 15:return e.abrupt("return",e.sent);case 18:return e.abrupt("return",{status:"success",source:"gd-plinga primary rewarded"});case 19:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t,n){return e.apply(this,arguments)}}()};return{get_ads_provider:function(){return g}}};n(11);var a=n(12),s=(n(49),n(9)),u=n(34),c=(s.MyPromise.future(),a.adRewardGDURL[0]),l=s.MyPromise.future(),d=null,p=!1,f=null;window.plingaRpc_pauseGame=function(){if(console.warn("should pause the game"),p=!0,d){var e=d;d=null,e()}},window.plingaRpc_resumeGame=function(){console.warn("should unpause the game")}},378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.MyPromise.with_timeout(i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g;case 2:return e.next=4,v.invoke(t,n).then(function(e){return console.log(t,n,"ok",e),e},function(e){return console.log(t,n,"err",e),Promise.reject(e)});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))(),5,function(){return Promise.reject("irpc timeout")}));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)});function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(e){var t=(v=i(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:if(e.prev=2,f=!0,y(),"undefined"!=typeof PokiSDK&&"undefined"!==PokiSDK.commercialBreak){e.next=7;break}return e.abrupt("return",{status:"failed",error:"PokiSDK error"});case 7:if("rewarded"!=t){e.next=13;break}return e.next=10,PokiSDK.rewardedBreak();case 10:r=e.sent,e.next=16;break;case 13:return e.next=15,PokiSDK.commercialBreak().then(function(){return!0});case 15:r=e.sent;case 16:if(!r){e.next=20;break}return e.abrupt("return",{status:"success",source:"poki"});case 20:return e.abrupt("return",{status:"failed",error:"poki ad failed"});case 21:return e.prev=21,f=!1,y(),e.finish(21);case 25:case"end":return e.stop()}},e,this,[[2,,21,25]])})),function(e,t){return v.apply(this,arguments)}),n=(m=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l;case 3:return e.abrupt("return",{status:"success"});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{status:"failed-blocked",error:e.t0?e.t0.toString():""+e.t0});case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return m.apply(this,arguments)}),r=window.location.origin;var m;var v;r==a.poki["app-origin"]?((g=document.createElement("iframe")).src=a.poki["bounce-iframe"],g.style.cssText="position: absolute; width:0; height:0; border:0;",document.body.appendChild(g),c.connect(window,g.contentWindow,_,{}),window.poki_storage_set=function(e,t){return o("storage_set",{key:e,data:t})},window.poki_storage_get=function(e){return o("storage_get",{key:e})}):a["app-origin"];var g;l.then(function(){!function(){d=!0,null!==p&&PokiSDK.gameLoadingStart();"number"==typeof p&&PokiSDK.gameLoadingProgress({percentageDone:p});"done"===p&&PokiSDK.gameLoadingFinished()}()},function(e){console.error("poki init error: %s",e)}),s.load_script("./scripts/v2/poki-sdk.js").then(function(){l.resolve(PokiSDK.init()),(u.getItem("developer")||a.debug)&&PokiSDK.setDebug(!0)});var w={prepare_ad:n,show_ad:t};return{get_ads_provider:function(){return w},on_loading_start:function(){p="start",d&&PokiSDK.gameLoadingStart()},on_loading_finish:function(){p="complete",d&&PokiSDK.gameLoadingFinished()},on_loading_progress:function(e){"complete"!==p&&(p=e,d&&PokiSDK.gameLoadingProgress({percentageDone:e}))},happy_time:function(e){d&&PokiSDK.happyTime(e)},set_playing:function(e){h=e,y()}}};n(11);var a=n(12),s=n(9),u=n(48),c=n(74),l=s.MyPromise.future(),d=!1,p=null,f=!1,h=!1,m=!1;var v=void 0,g=s.MyPromise.future();function _(e,t){switch(e){case"irpc::connected":v=t.connection,g.resolve(v),console.log("got irpc connection");break;default:console.error("invalid rpc method '"+e+"'")}}function y(){if(d){var e=h&&!f;e!=m&&(m=e,e?PokiSDK.gameplayStart():PokiSDK.gameplayStop())}}},379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=function(e,t){return new Promise(function(n){return n(function(e,t){switch(e){case"init":return function(){if(y)return;y=!0;var e=navigator.userAgent.toLowerCase().indexOf("android")>=0;if(e){var t=function(){d.style.display="block"},n=function(){d.style.display="none"},i=function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;document.fullscreenElement&&(e=!0),e?n():t()},c=function(){n(),a()},l=document.getElementById("yandex-wrapper"),d=document.createElement("div"),p=l.nextSibling;p?l.parentElement.insertBefore(d,p):l.parentElement.appendChild(d),d.className="fullscreenintercept",a=function(){try{var e=document.documentElement,t=null;o&&o.screen&&o.screen.fullscreen&&o.screen.fullscreen.request?t=o.screen.fullscreen.request():e.requestFullscreen?t=e.requestFullscreen():e.mozRequestFullScreen?t=e.mozRequestFullScreen():e.webkitRequestFullscreen?t=e.webkitRequestFullscreen():e.msRequestFullscreen&&(t=e.msRequestFullscreen()),t&&t.catch(function(){})}catch(e){}},n(),d.addEventListener("click",c),d.addEventListener("touchend",c),document.addEventListener("visibilitychange",function(){document.hidden?t():i()}),document.addEventListener("fullscreenchange",function(){i()}),i(),a()}r=new Promise(function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src="https://yandex.ru/games/sdk/v2",n.onload=function(){e(!0)},n.addEventListener("error",function(e){t("yandex script loading failed"),e.stopPropagation(),e.preventDefault()}),n.async=!0,document.body.appendChild(n)}).then(function(){return new Promise(function(t,n){YaGames.init({screen:{fullscreen:e},adv:{onAdvClose:function(e){console.info("adv closed")}}}).then(function(e){o=e,_(),t(e),a&&a(),m(e).catch(function(e){return console.warn("automatic login failed",e)})})})}),(u=r.then(function(e){return e.getStorage()})).catch(function(e){return console.warn("Failed to get safeStorage",e)},null);var f=!1,h="yandex_context_callbacks";window[h]=window[h]||[],window[h].push(function(){console.log("Yandex ad sdk ready!"),f=!0});var v=document.createElement("script");v.type="text/javascript",v.src="https://an.yandex.ru/system/context.js",v.async=!0,document.body.appendChild(v);var g=void 0;function w(e,t,n){var r=document.createElement(t);return e.appendChild(r),n&&(r.id=n),r}var b=w(document.getElementById("yandex-wrapper"),"div","yandex_fullscreen");b.style.display="none";var k=w(b,"div","yandex_wrap"),x=w(k,"div","yandex_container"),I=w(k,"div","yandex_skip_wrapper"),E=w(I,"div","yandex_timer"),S=w(I,"div","yandex_skip");S.innerText="Пропустить рекламу",S.addEventListener("click",function(){if(g){var e=g;g=null,e()}}),S.style.display="none",s=function(e,t){return new Promise(function(n,r){if(f)try{var o=function(){u&&(clearInterval(u),u=0)},i=function(){s||(o(),x.removeChild(a),b.style.display="none",s=!0)};b.style.display="block";var a=document.createElement("div");a.setAttribute("id","yandex_rtb_block"),a.classList.add("yandex-block"),x.appendChild(a);var s=!1,u=0;Ya.Context.AdvManager.render({blockId:e||window["pecpoc.com/ad"].reward_id,renderTo:"yandex_rtb_block",async:!0,type:"fullscreen",onRender:function(e){console.log("Ad rendered",e),S.style.display="none",t&&t(),function(){E.style.display="block",S.style.display="none",E.innerText="";var e=6;function t(){0===--e?(o(),E.style.display="none",S.style.display="block"):E.innerText="До получения награды: "+e}g=function(){i(),n(!0)},t(),u=setInterval(t,1e3)}()}},function(){console.log("Ad not rendered"),i(),n(!1)})}catch(e){throw cleanup(),e}else r("no ad sdk")})}}(),r.then(function(e){return{native_cache:e.yandexApp&&e.yandexApp.enabled}});case"get_player":return r.then(m);case"login_player":return r.then(v);case"show_ad":return t&&"yarewarded"===t.type?r.then(function(e){return e?g?Promise.resolve(!1):(g=!0,new Promise(function(t,n){var r=!1,o=!1;e.adv.showRewardedVideo({callbacks:{onRewarded:function(){r=!0},onOpen:function(){o=!0},onClose:function(){g=!1,o||rewarded?t({opened:o,rewarded:r}):t(!1)},onError:function(e){console.warn("Error: %s",e),t(!1)}}})})):Promise.reject("no ysdk")}):t&&("rewarded"===t.type||t.ad_id)?s(t.ad_id):r.then(function(e){return e?g?Promise.resolve(!1):(g=!0,new Promise(function(t,n){var r=!1;e.adv.showFullscreenAdv({callbacks:{onOpen:function(){r=!0},onClose:function(){g=!1,t(r)},onError:function(e){console.warn("Error: %s",e),t(!1)}}})})):Promise.reject("no ysdk")});case"get_purchases":return i.then(function(e){return e.getPurchases().then(function(e){return e.map(p)})});case"get_products":return i.then(function(e){return e.getCatalog().then(function(e){return e.map(f)})});case"purchase":return i.then(function(e){return e.purchase(t.product_id).then(function(e){return p(e)},function(e){return Promise.reject(h(e))})});case"consume_purchase":return i.then(function(e){return e.consumePurchase(t.purchase_id)});case"reload":return location.reload(),!0;case"safestorage_get":var n=t.key;return u.then(function(e){return e.getItem(n)});case"safestorage_set":var c=t.key,l=t.value;return u.then(function(e){return e.setItem(c,l)});case"can_review":return r.then(function(e){return e.feedback.canReview()}).catch(function(e){return Promise.reject(h(e))});case"open_review":return r.then(function(e){return e.feedback.requestReview()}).catch(function(e){return Promise.reject(h(e))});case"can_show_shortcut_prompt":return r.then(function(e){return e.shortcut.canShowPrompt()}).catch(function(e){return Promise.reject(h(e))});case"show_shortcut_prompt":return r.then(function(e){return e.shortcut.showPrompt()}).catch(function(e){return Promise.reject(h(e))});case"loading_complete":return r.then(function(e){var t=e.features.LoadingAPI;t&&t.ready()}).catch(function(e){return Promise.reject(h(e))});case"show_banner":return r.then(function(e){return e.adv.showBannerAdv()}).catch(function(e){return Promise.reject(h(e))});case"hide_banner":return r.then(function(e){return e.adv.hideBannerAdv()}).catch(function(e){return Promise.reject(h(e))});case"get_banner_status":return r.then(function(e){return e.adv.getBannerAdvStatus()}).catch(function(e){return Promise.reject(h(e))});case"achievement.getProgress":return r.then(function(e){return e.achievements.getProgress(t.id)}).catch(function(e){return Promise.reject(h(e))});case"achievement.setProgress":return r.then(function(e){return e.achievements.setProgress(t.id,t.progress)}).catch(function(e){return Promise.reject(h(e))});default:throw new Error("no such method '"+e+"'")}}(e,t))})};var r=void 0,o=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=["id","price","priceCurrencyCode"],l=["productID","purchaseToken","signature"];function d(e,t){var n={};for(var r in t){var o=t[r];n[o]=e[o]}return n}function p(e){return d(e,l)}function f(e){return d(e,c)}function h(e){return e.code&&e.message?e.code+": "+e.message:e}function m(e){return e.getPlayer({signed:!0}).then(function(t){return(i=function(e){return e.getPayments({signed:!0})}(e)).catch(function(e){console.warn("payments not available: "+e)}),function(e){return function(e){try{return e.getIDsPerGame().then(function(e){var t={};console.log("IDs per game:",e);for(var n=0;n<e.length;n++){var r=e[n];t[""+r.appID]={user_id:r.userID}}return t}).catch(function(e){return console.warn("IDs per game not available:",e),null})}catch(e){return console.warn("IDs per game not available:",e),Promise.resolve(null)}}(e).then(function(t){var n=e.getUniqueID();return{id:n,user_id:e.getID(),unique_id:n,name:e.getName(),photo_small:e.getPhoto("small"),photo_medium:e.getPhoto("medium"),photo_large:e.getPhoto("large"),signature:e.signature,extra_ids:t,lite:"lite"===e.getMode()}})}(t)},function(e){return(i=Promise.reject("unathorized")).catch(function(){}),Promise.reject(h(e))})}function v(e){function t(){return e.auth.openAuthDialog().then(function(){return _(),m(e).then(function(e){return e&&e.lite?Promise.reject("auth with lite user"):e})},function(e){return Promise.reject(h(e))})}return m(e).then(function(e){return e&&e.lite?t():e},function(e){return t()})}var g=!1;function _(){new Promise(function(e,t){e(o.notifications.allow())}).then(function(){console.log("Notifications enabled")},function(e){console.warn("Can't enable notifications",e)})}var y=!1},380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a,s,u,c,l=(r=v(regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r={}).method=t,r.app_id=k["app-id"],r.uid=I.user_id,r.session_key=I.session_key,n)for(o in n)r[o]=n[o];return r.sig=P(r),e.next=9,new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",w),n.withCredentials=!1,n.onreadystatechange=function(){4==this.readyState&&(200===n.status?e(n.response):t(n.statusText))},n.send(j(r))});case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)}),d=(o=v(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,u,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x;case 2:for(n=mailru,r=t.split("."),o=r.length-1,i=0;i<o;i++)n=n[r[i]];for(a=r[o],s=[null],u=1;u<c.length;u++)s.push(c[u]);return e.next=11,new Promise(function(e,t){s[0]=function(t){if(t.error)return Promise.reject(t.error);arguments.length>1?e(Array.prototype.slice.call(arguments)):e(t)},n[a].apply(n,s)});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)}),p=(i=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.load_script("https://connect.mail.ru/js/loader.js");case 2:return x.resolve(new Promise(function(e,t){mailru.loader.require("api",function(){mailru.app.init(k.private),e(!0)})})),e.next=5,x;case 5:return mailru.events.listen(mailru.app.events.paymentDialogStatus,function(e){C&&(C.resolve(e),C=null)}),mailru.events.listen(mailru.app.events.incomingPayment,function(e){O&&(O.resolve(e),O=null)}),E.resolve(d("common.users.getInfo",I.user_id).then(function(e){return 0==e.length?Promise.reject("no profile returned"):e[0]})),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),f=(a=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x.resolve(!0),E.resolve(l("users.getInfo").then(function(e){return 0==e.length?Promise.reject("no profile returned"):e[0]})),e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,this)})),s=v(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={appid:k["app-id"],session_key:I.session_key,service_id:t.service_id,service_name:t.title,mailiki_price:t.price_mailiki,mob:1},window.open(b+"?"+j(n),"_blank").focus(),e.next=5,g.MyPromise.delay(10);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)}),h=(u=v(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N(t),!R){e.next=7;break}return e.next=4,f(n);case 4:return e.abrupt("return",e.sent);case 7:return O=g.MyPromise.future(),mailru.app.payments.showDialog({service_id:n.service_id,service_name:n.title,mailiki_price:n.price_mailiki}),e.next=11,O;case 11:if(r=e.sent,console.log("Payment result:",r),"success"!=r.status){e.next=15;break}return e.abrupt("return",!0);case 15:return e.abrupt("return",Promise.reject("purchase failed"));case 16:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)}),m=(c=v(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,n){t.on_opened(),setTimeout(function(){e({status:"success",source:"html fake ad"})},1e4)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)});function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(e){S=e.external_api;var t=new URLSearchParams(window.location.search),n=t.get("vid"),r=t.get("sig"),o=t.get("view"),i=t.get("session_key"),a=window.location.search;"?"===a[0]&&(a=a.substr(1));R="app_mobile"===o,I={user_id:n,sig:r,session_key:i},p().then(function(){console.log("MY init completed")},function(e){E.reject("no my authorization"),console.error("MY init failed",e)}),S.expose({my_get_auth:function(){return I},my_query_profile:function(){var e=v(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E;case 2:return t=e.sent,e.abrupt("return",{user_id:n,auth_params:a,auth_sig:r,name:t.first_name,photo:t.pic});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),my_query_friends:function(){var e=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d("common.friends.getAppUsers").then(function(e){var t=[];for(var n in e)t.push(e[n]);return console.log("User friends: %s",JSON.stringify(t)),t}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),my_query_products:function(){var e=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.my_products);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),my_purchase:function(){var e=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x;case 2:return e.next=4,h(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),my_invite_friends:function(){var e=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,x;case 4:return mailru.app.friends.invite({text:"Попробуй Скайдом! Ооооочень рекомендую! На некоторых уровнях, правда, слишком хитрые головоломки, не все могут пройти..."}),e.abrupt("return",null);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),my_make_post:function(){var e=v(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=A[t]){e.next=3;break}throw new Error("unknown post id");case 3:return e.next=5,x;case 5:return mailru.common.stream.post(n.desktop),e.abrupt("return",null);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()});var s={prepare_ad:function(){var e=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),show_ad:function(e,t){return"interstitial"===e||"preroll"===e?Promise.resolve({status:"failed",source:"ok interstitial",reason:"no ad"}):m(t,"rewarded")}};return{get_ads_provider:function(){return s}}};n(11),n(12),n(49);var g=n(9),_=n(34),y=(n(47),n(381)),w="https://www.appsmail.ru/platform/api",b="https://m.my.mail.ru/cgi-bin/app/paymentm",k=MA_CONFIG.my_app,x=g.MyPromise.future(),I=null,E=g.MyPromise.future(),S=(!k||k["test-mode"],void 0),R=void 0,A={dc_win:{desktop:{title:"Я №1 в Турнире!",text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",img_url:"https://sun9-19.userapi.com/1pF-jQDMj40bCazaOfgEXpAFp0NdqZqstpu6oA/lnyR7A87xhg.jpg",action_links:[{text:"Попробуй красивейшую Три в Ряд!",href:"dc_win"}]},mobile:{title:"Я №1 в Турнире!",text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",img_url:"https://sun9-19.userapi.com/1pF-jQDMj40bCazaOfgEXpAFp0NdqZqstpu6oA/lnyR7A87xhg.jpg",link1_text:"Попробуй красивейшую Три в Ряд!",link1_href:"dc_win"}}};function P(e){var t=[];for(var n in e)"sig"!==n&&t.push(n);t.sort();var r=t.map(function(t,n,r){return t+"="+e[t]}).join("");return y(I.user_id+r+k.private)}var O=void 0,C=void 0;function N(e){for(var t in _.my_products){var n=_.my_products[t];if(n.offer_id===e)return n}return null}function j(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}},383:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){var t=(m=r(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:if(e.prev=2,l=!0,h(),void 0!==a&&"undefined"!==a.requestAd){e.next=7;break}return e.abrupt("return",{status:"failed",error:"CrazyGames sdk error"});case 7:if("rewarded"!=t){e.next=13;break}return e.next=10,_();case 10:r=e.sent,e.next=16;break;case 13:return e.next=15,g();case 15:r=e.sent;case 16:if(!r){e.next=20;break}return e.abrupt("return",{status:"success",source:"crazygames"});case 20:return e.abrupt("return",{status:"failed",error:"crazygames ad failed"});case 21:return e.prev=21,l=!1,h(),e.finish(21);case 25:case"end":return e.stop()}},e,this,[[2,,21,25]])})),function(e,t){return m.apply(this,arguments)}),n=(p=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i;case 3:return e.abrupt("return",{status:"success"});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{status:"failed-blocked",error:e.t0?e.t0.toString():""+e.t0});case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return p.apply(this,arguments)});var p;var m;function v(){return f&&f.reject("overwritten"),f=o.MyPromise.future()}function g(){var e=v();return a.requestAd("midgame"),e}function _(){var e=v();return a.requestAd("rewarded"),e}i.then(function(){!function(){u=!0,null!==c&&a.sdkGameLoadingStart();"done"===c&&a.sdkGameLoadingStop()}()},function(e){console.error("crazygames init error: %s",e)}),o.load_script("https://sdk.crazygames.com/crazygames-sdk-v1.js").then(function(){(a=window.CrazyGames.CrazySDK.getInstance()).addEventListener("adblockDetectionExecuted",function(){s=!0}),a.addEventListener("adStarted",function(){}),a.addEventListener("adError",function(e){console.log("AD ERROR",e.toString()),f&&(s?f.reject(e):f.resolve(!1),f=null)}),a.addEventListener("adFinished",function(e){console.log("AD FINISHED",e.toString()),f&&(f.resolve(!0),f=null)}),i.resolve(a.init())});var y={prepare_ad:n,show_ad:t};return{get_ads_provider:function(){return y},on_loading_start:function(){c="start",u&&a.sdkGameLoadingStart()},on_loading_finish:function(){c="complete",u&&a.sdkGameLoadingStop()},on_loading_progress:function(e){"complete"!==c&&(c=e)},happy_time:function(e){u&&a.happytime()},set_playing:function(e){d=e,h()}}};n(11),n(12);var o=n(9),i=(n(48),n(74),o.MyPromise.future()),a=void 0,s=!1,u=!1,c=null,l=!1,d=!1,p=!1,f=null;function h(){if(u){var e=d&&!l;e!=p&&(p=e,e?a.gameplayStart():a.gameplayStop())}}},384:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a,s,u,c,l,d=(r=y(regeneratorRuntime.mark(function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:if(O){for(o in r={},n)r[o]=n[o];r.test_mode=1,n=r}return n.access_token=S.access_token,n.v="5.103",e.prev=5,M(),i=k.sendPromise("VKWebAppCallAPIMethod",{method:t,params:n,request_id:(F++).toString()}),e.next=10,i;case 10:return a=e.sent,e.abrupt("return",a.response);case 14:return e.prev=14,e.t0=e.catch(5),console.log("VK api error",e.t0),e.next=19,Promise.reject(e.t0);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e,this,[[5,14]])})),function(e,t){return r.apply(this,arguments)}),p=(o=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.subscribe(function(e){"VKWebAppShowRequestBoxResult"!==e.type||j||N.invoke("vk_update_purchases")}),E=I.get_app(),O=!!E["test-mode"],R.resolve(y(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k.send("VKWebAppInit",{}),e.prev=1,e.next=4,k.sendPromise("VKWebAppGetAuthToken",{app_id:Number(E["app-id"]),scope:""});case 4:t=e.sent,S.access_token=t.access_token,console.log("Auth token updated!"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Auth token request failed",e.t0);case 12:A.resolve(Promise.race([w.MyPromise.delay(15).then(function(){return Promise.reject("timeout")}),d("users.get",{user_ids:S.viewer_id,fields:"photo_200"}).then(function(e){return 1!==e.length?Promise.reject("invalid user response"):e[0]})]));case 13:case"end":return e.stop()}},e,this,[[1,9]])}))()),e.next=6,R;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),f=(i=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.resolve(y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:return e.next=4,w.load_script("https://vk.com/js/api/mobile_sdk.js");case 4:return e.next=6,w.load_script("https://ad.mail.ru/static/admanhtml/rbadman-html5.min.js");case 6:return e.next=8,w.load_script("https://vk.com/js/api/adman_init.js");case 8:case"end":return e.stop()}},e,this)}))()),e.next=3,P;case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),h=(a=y(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"preroll"!==t){e.next=5;break}n="preloader",e.next=14;break;case 5:if("interstitial"!==t){e.next=9;break}n="interstitial",e.next=14;break;case 9:if("rewarded"!==t){e.next=13;break}n="reward",e.next=14;break;case 13:throw new Error("invalid ad type");case 14:return e.next=16,k.sendPromise("VKWebAppShowNativeAds",{ad_format:n});case 16:if(!e.sent.result){e.next=21;break}return e.abrupt("return",{status:"success",source:"vk_web_"+n});case 21:return e.abrupt("return",{status:"failed",source:"vk_web_"+n,error:"no ad available"});case 22:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),m=(s=y(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"preroll"!==t){e.next=5;break}n="preloader",e.next=14;break;case 5:if("interstitial"!==t){e.next=9;break}n="interstitial",e.next=14;break;case 9:if("rewarded"!==t){e.next=13;break}n="reward",e.next=14;break;case 13:throw new Error("invalid ad type");case 14:return e.next=16,k.sendPromise("VKWebAppShowNativeAds",{ad_format:n});case 16:if(!e.sent.result){e.next=21;break}return e.abrupt("return",{status:"success",source:"vk_android_"+n});case 21:return e.abrupt("return",{status:"failed",source:"vk_android_"+n,error:"no ad available"});case 22:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)}),v=(u=y(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,"preroll"!==t){e.next=5;break}n="preloader",e.next=14;break;case 5:if("interstitial"!==t){e.next=9;break}n="interstitial",e.next=14;break;case 9:if("rewarded"!==t){e.next=13;break}n="reward",e.next=14;break;case 13:throw new Error("invalid ad type");case 14:return e.next=16,k.sendPromise("VKWebAppShowNativeAds",{ad_format:n});case 16:if(!e.sent.result){e.next=21;break}return e.abrupt("return",{status:"success",source:"vk_ios_"+n});case 21:return e.abrupt("return",{status:"failed",source:"vk_ios_"+n,error:"no ad available"});case 22:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)}),g=(c=y(regeneratorRuntime.mark(function e(t,n){var r,o,i=(r=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,n){t.on_opened(),setTimeout(function(){e({status:"success",source:"html fake ad"})},1e4)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)});return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null,!x.is_allowed("media")){e.next=12;break}return e.prev=2,e.next=5,T(n);case 5:if(!(o=e.sent)||"success"!==o.status){e.next=8;break}return e.abrupt("return",o);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return e.prev=12,e.next=15,x.show_ad_fallbacks(t.on_opened);case 15:if(!(o=e.sent)||"success"!==o.status){e.next=18;break}return e.abrupt("return",o);case 18:e.next=22;break;case 20:e.prev=20,e.t1=e.catch(12);case 22:return e.next=24,x.wrap_ad_waterfall("html fake ad",i);case 24:return e.abrupt("return",e.sent);case 25:case"end":return e.stop()}},e,this,[[2,10],[12,20]])})),function(e,t){return c.apply(this,arguments)}),_=(l=y(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.supports("VKWebAppCheckAllowedScopes")){e.next=3;break}return console.log("Permission check unsupported"),e.abrupt("return",q);case 3:return e.prev=3,e.next=6,k.sendPromise("VKWebAppCheckAllowedScopes",{scopes:D});case 6:for(t=e.sent,n={},r=t.result,o=0;o<r.length;o++)(i=r[o].scope)in L&&(n[L[i]]=r[o].allowed);return e.abrupt("return",n);case 13:return e.prev=13,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",{});case 17:case"end":return e.stop()}},e,this,[[3,13]])})),function(){return l.apply(this,arguments)});function y(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(e){N=e.external_api;var t=new URLSearchParams(window.location.search),n=t.get("viewer_id"),r=t.get("api_id"),o=t.get("auth_key"),i=t.get("access_token");C=t.get("platform"),S={viewer_id:n,api_id:r,auth_key:o,access_token:i},p().then(function(){console.log("VK init completed");try{k.send("VKWebAppGetClientVersion").then(function(e){console.log("VK app version:",JSON.stringify(e))},function(e){console.log("VK app version query failed!",e)})}catch(e){console.log("VK app version query failed!",e)}},function(e){A.reject("no vk authorization"),console.error("VK init failed",e)}),f().then(function(){console.log("VK ad sdk init completed")},function(e){console.error("VK ad sdk init failed",e)}),N.expose({vk_get_auth:function(){return S},vk_query_profile:function(){var e=y(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("VK query profile begin"),e.next=4,A;case 4:return t=e.sent,console.log("VK query profile completed"),e.next=8,_();case 8:return n=e.sent,console.log("VK query permissions completed"),e.abrupt("return",{user_id:S.viewer_id,app_id:S.api_id,auth_key:S.auth_key,name:t.first_name,photo:t.photo_200,permissions:n});case 13:throw e.prev=13,e.t0=e.catch(0),console.warn("VK query profile error:",e.t0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),vk_query_friends:function(){var e=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("friends.getAppUsers",{}).then(function(e){var t=[];for(var n in e)t.push(String(e[n]));return console.log("User friends: %s",JSON.stringify(t)),t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),vk_query_products:function(){var e=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.vk_products);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),vk_purchase:function(){var e=y(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:return n={type:"item",item:t},j=!0,e.next=6,k.sendPromise("VKWebAppShowOrderBox",n);case 6:return r=e.sent,setTimeout(function(){j=!1},0),console.log("VK purchase:",JSON.stringify(r)),e.abrupt("return",r.order_id);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),vk_get_promo_gift:function(){var e=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:return e.next=4,d("apps.promoHasActiveGift",{promo_id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),vk_use_promo_gift:function(){var e=y(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:return e.next=4,d("apps.promoUseGift",{promo_id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),vk_invite_friends:function(){var e=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:return e.next=4,k.sendPromise("VKWebAppShowInviteBox",{}).catch(function(e){return console.log(e)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),vk_request_permission:function(){var e=y(regeneratorRuntime.mark(function e(t){var n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R;case 2:if(n=U[t]){e.next=5;break}return e.abrupt("return",!0);case 5:return r=void 0,e.prev=6,e.next=9,k.sendPromise("VKWebAppGetAuthToken",{app_id:Number(E["app-id"]),scope:n});case 9:r=e.sent,S.access_token=r.access_token,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),console.log("Permission request failed",e.t0),e.abrupt("return",!1);case 17:o=r.scope.split(","),i=0;case 19:if(!(i<o.length)){e.next=25;break}if(L[o[i]]!=t){e.next=22;break}return e.abrupt("return",!0);case 22:i++,e.next=19;break;case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}},e,this,[[6,13]])}));return function(t){return e.apply(this,arguments)}}(),vk_make_post:function(){var e=y(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=I.get_post(t)){e.next=3;break}throw new Error("unknown post id");case 3:return e.next=5,R;case 5:return r={message:n.text},o="",n.attachments&&(o=n.attachments.join(",")),n.link&&(o.length>0?o+=","+n.link:o+=n.link),o.length>0&&(r.attachments=o),e.next=12,k.sendPromise("VKWebAppShowWallPostBox",r);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),vk_log_credentials:G});var a={prepare_ad:function(){var e=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),show_ad:function(e,t){return"rewarded"===e?g(t,"rewarded"):T(e)}};return{get_ads_provider:function(){return a}}};n(11),n(12),n(49);var w=n(9),b=n(34),k=n(385).default,x=n(75),I=n(76),E=void 0,S=void 0,R=w.MyPromise.future(),A=w.MyPromise.future(),P=w.MyPromise.future(),O=void 0,C=void 0,N=void 0,j=!1;function M(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,r=0;r<length;r++)e+=t.charAt(Math.floor(Math.random()*n));return e}var F=1e3;function T(e){return"html5_android"===C?x.wrap_ad_waterfall("vk_android",function(){return m(e)}):"html5_ios"===C?x.wrap_ad_waterfall("vk_ios",function(){return v(e)}):x.wrap_ad_waterfall("vk_mobile",function(){return h(e)})}var L={friends:"user_friends"},U={user_friends:"friends"},D="friends",q={user_friends:!0};function G(){console.warn("VK credentials:",JSON.stringify(S))}},386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){var t={prepare_ad:function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success"});case 1:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})});return function(){return t.apply(this,arguments)}}(),show_ad:function(e){return"interstitial"===e||"preroll"===e?Promise.resolve({status:"failed",source:"none",error:"no ad source"}):new Promise(function(e,t){setTimeout(e,1e5)})}};return{get_ads_provider:function(){return t}}};n(387)},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;t.initialize=(r=o(regeneratorRuntime.mark(function e(t){var n,r,o,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.rewarded,r=s.interstitial,"gamedistribution"===window.MA_CONFIG.embed)for(o in a.adRewardGDURL)n.push(a.adRewardGDURL[o]);else{c=!1;try{if(new URLSearchParams(window.location.search).has("adsperk")){for(o in a.adAdsperkURL)l=a.adAdsperkURL[o],n.push(l),r.push(l);c=!0}}catch(e){}if(!c){for(o in a.adRewardURL)n.push(a.adRewardURL[o]);for(o in a.adVideoURL)r.push(a.adVideoURL[o])}}return e.prev=3,e.next=6,i.initialize(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Can't load ads: %s",e.t0);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}},e,this,[[3,8]])})),function(e){return r.apply(this,arguments)});function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var i=n(49),a=n(12),s=(n(11),{rewarded:[],interstitial:[]}),u={show_ad:function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r,o,a,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.initialize();case 2:e.prev=2,r=0,o=0,a=s[t],u=0;case 7:if(!(u<a.length)){e.next=30;break}return c=a[u],!1,o++,e.prev=12,e.next=15,i.show_ad(c,function(){n.on_opened()},10);case 15:if("success"!=(l=e.sent)){e.next=20;break}return e.abrupt("return",{status:"success",source:c});case 20:console.warn("ad with url "+c+" show failed: ",l);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(12),console.warn("ad with url "+c+" show failed: ",e.t0),r++;case 27:u++,e.next=7;break;case 30:if(!(o==r&&r>0)){e.next=32;break}throw new Error("all urls failed with errors");case 32:return e.abrupt("return",{status:l});case 35:return e.prev=35,e.t1=e.catch(2),console.warn("ad show failed with error: ",e.t1),e.abrupt("return",{status:"failed-blocked",error:e.t1.toString()});case 39:case"end":return e.stop()}},e,this,[[2,35],[12,23]])}));return function(t,n){return e.apply(this,arguments)}}(),prepare_ad:function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:"success"});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a=(r=s(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,u,p,f,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function e(){if(n){r||(_(!0),r=!0),s>0?s--:u--;var t=!0;0===s&&(0===u?(i(""),a(!0),t=!1):i(""+u)),t&&setTimeout(e,1e3)}},a=function(e){m.style.display=e?"block":"none"},i=function(e){""===e?h.style.display="none":(h.style.display="block",h.textContent=e)},o=function(){n=!1,r&&(_(!1),r=!1)},n=!0,r=!1,s=7,u="rewarded"===t?10:8,e.prev=8,d){e.next=13;break}return e.next=12,l;case 12:d=e.sent;case 13:return i(""),a(!1),setTimeout(p,1e3),v=c.MyPromise.future(),f=null,e.next=20,Promise.race([d.show_ad(t,{on_opened:function(e){s=0,f=e}}),v.then(function(){return console.log("Close RESULT:",f),f||{status:"success",source:"html x fallback"}})]);case 20:if((g=e.sent)&&g.status){e.next=23;break}throw new Error("invalid show_ad result: "+g);case 23:return e.abrupt("return",g);case 26:return e.prev=26,e.t0=e.catch(8),console.warn("ad show failed with error: ",e.t0),e.abrupt("return",{status:"failed-blocked",error:e.t0.toString()});case 30:return e.prev=30,o(),e.finish(30);case 33:case"end":return e.stop()}},e,this,[[8,26,30,33]])})),function(e){return r.apply(this,arguments)});t.show_ad=(o=s(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",{status:"failed",error:"internal error: no ad provider"});case 2:if(!p){e.next=4;break}return e.abrupt("return",{status:"failed",error:"internal error: another ad in progress"});case 4:return u.show_shadow_overlay(!0),e.next=7,a(t);case 7:if("failed-blocked"!==(n=e.sent).status||"rewarded"!==t){e.next=16;break}return e.prev=9,e.next=12,u.show_modal_popup("adblock");case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return u.show_shadow_overlay(!1),e.abrupt("return",n);case 18:case"end":return e.stop()}},e,this,[[9,14]])})),function(e){return o.apply(this,arguments)}),t.prepare_ad=(i=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",{status:"failed",error:"internal error: no ad provider"});case 2:if(d){e.next=6;break}return e.next=5,l;case 5:d=e.sent;case 6:return e.abrupt("return",d.prepare_ad(t));case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)});function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.initialize=function(e){l=e,f=document.getElementById("fullscreen-loading"),h=document.getElementById("fullscreen-loading-timer"),(m=document.getElementById("fullscreen-loading-close")).onclick=g};var u=n(11),c=n(9),l=void 0,d=void 0,p=!1,f=void 0,h=void 0,m=void 0,v=void 0;function g(){v&&(v.resolve(!0),v=null)}function _(e){f.style.display=e?"block":"none"}},389:function(e,t,n){"use strict";function r(e,t,n){var r=document.createElement(t);return r.classList.add(n),e.appendChild(r),r}Object.defineProperty(t,"__esModule",{value:!0}),t.show_reforged_promo=function(e,t){var n=r(document.getElementById("promo-wrapper"),"div","promo-block"),o=r(n,"div","promo-content"),i=r(o,"div","promo-proceed");r(i,"img","promo-content-img");var a=r(i,"div","promo-text-content"),s=r(i,"div","promo-button-play"),u=r(o,"div","promo-button-skip");a.textContent="Идем играть и забирать подарок в Скайдом Рефордж?",s.textContent="Играть!",u.textContent="Пропустить",i.addEventListener("click",function(){window.open(e,"_blank")}),u.addEventListener("click",function(){n.parentElement.removeChild(n),t()})}},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.expose=function(e){for(var t in e)l(t,e[t])},t.initialize_with_Module=function(){for(var e in o)jfl_register("jsapi_"+e,o[e])},t.show_flash=function(e){flash.style.visibility=e?"hidden":"visible"},t.invoke=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.apply(void 0,[e].concat(n))};var o={},i=[],a=1;function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jfl_call.apply(void 0,["flashapi_"+e].concat(n))}function u(){var e=function(){if(0==i.length){var e=a;return a++,e}return i.pop()}();return s("allocate_callback",e),e}function c(e,t,n){try{s("invoke_callback",e,t,n)}catch(e){console.error("In Flash callback processing: %s",e)}finally{i.push(e)}}function l(e,t){var n=function(){var e=t.apply(null,arguments);if(!!e&&("object"===(void 0===e?"undefined":r(e))||"function"==typeof e)&&"function"==typeof e.then){var n=u();return e.then(function(e){c(n,!0,e)},function(e){c(n,!1,e)}),"promise"}return e};o[e]=n,"undefined"!=typeof jfl_register&&jfl_register("jsapi_"+e,n)}},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(r=regeneratorRuntime.mark(function e(t){var r,o,a,l,p,b,k,x,I;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e){a!=e&&(M.style.display="none",F.style.display="none","lost"==e?(F.style.display="block",u.get_texts(["web.webg_context_lost"]).then(function(e){document.getElementById("wasm-context-lost-text").innerHTML=e[0]})):"restoring"==e&&(L.style.display="none",M.style.display="block"))},y.phase="async_init",s.load_script("dynamic.js?volatile=1",!0).catch(function(e){console.error("Failed to load dynamic script",e)}),window.addEventListener("beforeunload",function(){w=!1}),u.get_texts(["page.loading.hint_1","page.loading.hint_2","page.loading.hint_3","page.loading.hint_4","page.loading.hint_5","page.loading.hint_6","page.loading.hint_7"]).then(function(e){var t=0;!function n(){if(!G)return;document.getElementById("wasm-preloader-hint").innerHTML=e[t];t++;t>=e.length&&(t=2);setTimeout(n,5e3)}()}),"object"===i(window.WebAssembly)){e.next=10;break}return d.send("Web.FeatureMissing",{feature:"wasm"}),setTimeout(function(){c.show_reload_modal("wasm")},0),e.abrupt("return");case 10:if(N()){e.next=12;break}return e.abrupt("return");case 12:return y.phase="after_feature_test",K=t,n(393).expose(K),u.get_texts(["html.loading"]).then(function(e){document.getElementById("wasm-loader-title-text").innerHTML=e[0]}),r=!1,o=void 0,a=void 0,K.expose({on_preload_progress:function(e){V||(y.phase="after_preloader",y.time_loader_start=+new Date,V=!0,z()),q+=e;var t=Math.pow(q/U,2)*D,n=2*Math.atan(t)/Math.PI;T.style.setProperty("width",(100*n).toFixed(2)+"%"),y.time_loader_last_progress=+new Date,y.percent=100*n,f.on_loading_progress(n)},on_preload_finished:function(){y.phase="completed",f.on_loading_finish(),B(),r=!0,o&&l(o),P("Loading.Complete",!1)},get_collected_log:function(){return J.join("\n")},get_extra_info:function(){return window.MA_EXTRA_INFO},report_context_state:function(e){r?l(e):o=e}}),window.lua=function(e){K.invoke("cmd",e)},p={embed:MA_CONFIG.embed,skin:MA_CONFIG.skin,resid:MA_CONFIG.resources_id,assets_url:MA_CONFIG.assets_url,fb_app:MA_CONFIG.fb_app,vk_app:v.get_app(),ok_app:g.get_app(),my_app:MA_CONFIG.my_app,y8_app:m.get_app(),yandex_app:_.get_app(),referrer:MA_CONFIG.referrer,lc:u.get_locale()},b=new URLSearchParams(window.location.search),"gamedistribution"===MA_CONFIG.embed&&b.get("xdm_c")&&(p.gd_inapp=!0),"vk"===MA_CONFIG.embed&&(k=b.get("platform"))&&(p.vk_platform=k),p.need_ios14_fix=!!MA_CONFIG.needs_ios_fix,p.use_external_image_loader=!!MA_CONFIG.use_external_image_loader,Module.arguments=[JSON.stringify(p)],Module.onCanvasResize=function(e,t,n){var r="scale("+1/n+", "+1/n+")";A.innerHTML=".stage-text-container {-ms-transform: "+r+"; -webkit-transform:"+r+";transform: "+r+";}"},Module.onContextFailed=function(){w=!1,d.send("Web.FeatureMissing",{feature:"webgl"}),c.show_reload_modal("webgl")},x=!1,"my"!==MA_CONFIG.embed&&"ok"!==MA_CONFIG.embed&&"vk"!==MA_CONFIG.embed||(x=!0),h.isPersistent()||x||(c.show_modal_popup("nolocalstorage"),d.send("Test.NoLocalStorage",{})),y.phase="pre_wasm_fetch",f.on_loading_start(),perf("before wasm js loaded"),e.next=38,s.load_script("assets/wasm/"+MA_CONFIG.wasm_hash["app.js"],!1);case 38:__ATMAIN__.unshift(function(){y.phase="wasm_runtime_ready",R=!0}),y.phase="after_wasm_fetch",perf("after wasm js loaded"),y.phase="after_wasm_link",K.initialize_with_Module(),y.phase="after_async_init",window.MA_RUNTIME_CONFIG&&(I=window.MA_RUNTIME_CONFIG.maintenance)&&+new Date/1e3<=parseInt(I)+10800&&c.show_modal_popup({header:"modal.maintenance.title",text:{id:"modal.maintenance.text",time:new Date(1e3*I).toLocaleString()},button:"modal.maintenance.button"});case 45:case"end":return e.stop()}},e,this)}),o=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(o,i){try{var a=e[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});t(s)}("next")})},function(e){return o.apply(this,arguments)});t.initialize_app=function(e){a(e).then(function(){console.log("WASM init succeeded")},function(e){throw console.error("WASM init failed: "+e),e})};var s=n(9),u=n(57),c=n(11),l=n(12),d=n(47),p=n(394),f=n(144),h=n(48),m=(n(148),n(147)),v=n(76),g=n(145),_=n(105),y={phase:"init",percent:0,time_start:+new Date};window.perf=function(e){new Date;console.warn("perf",e)},window.alert=function(e){console.error("ALERT: "+e)};var w=!0,b=void 0;if("undefined"==typeof TextEncoder){var k=(new(n(403).TextEncoderLite)).encode;b={encode:function(e){var t=k(e);return new Uint8Array(t).buffer}}}else b=new TextEncoder;function x(){try{try{if(window.stackTrace)return window.stackTrace()}catch(e){}try{throw new Error("stack")}catch(e){return e.stack}}catch(e){return"<no stack available>"}}document.getElementById("wasm-wrapper");var I=document.getElementById("wasm-canvas"),E=null,S=!1,R=!1,A=document.createElement("style");function P(e,t){var n=+new Date,r={time_total:((n-y.time_start)/1e3).toFixed(2),phase:y.phase,percent:y.percent.toFixed(2)};if(y.time_loader_start&&(r.time_on_loader=((n-y.time_loader_start)/1e3).toFixed(2),r.time_to_loader=((y.time_loader_start-y.time_start)/1e3).toFixed(2)),y.time_loader_last_progress&&(r.time_since_last_progress=((n-y.time_loader_last_progress)/1e3).toFixed(2)),y.time_instance_end&&y.time_instance_start&&(r.time_wasm_start=((y.time_instance_start-y.time_loader_start)/1e3).toFixed(2),r.time_wasm_end=((y.time_instance_end-y.time_loader_start)/1e3).toFixed(2),r.time_wasm_instance=((y.time_instance_end-y.time_instance_start)/1e3).toFixed(2)),"Loading.Complete"===e){var o=window.MA_CONFIG.extra_loading_args;if(o)for(var i in o)r[i]=o[i];r.hardware_accel=!S}t?d.send_beacon(e,r):d.send(e,r)}A.type="text/css",A.innerHTML=".stage-text {  }",document.getElementsByTagName("head")[0].appendChild(A),I.addEventListener("touchmove",function(e){e.preventDefault()},!1),I.addEventListener("contextmenu",function(e){e.preventDefault()});var O,C=["text","password","search","email","number","date"];function N(){var e=[];function t(t){var n=t.statusMessage||"unknown";e.indexOf(n)<0&&e.push(n)}I.addEventListener("webglcontextcreationerror",t,!1);var n={alpha:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1,stencil:!0,depth:!0,antialias:!1,failIfMajorPerformanceCaveat:!0},r=I.getContext("webgl",n)||I.getContext("experimental-webgl",n);if(r||(n.failIfMajorPerformanceCaveat=!1,(r=I.getContext("webgl",n)||I.getContext("experimental-webgl",n))&&(S=!0,d.send("Web.NoHardwareAccel",{errors:e.join(",")}),setTimeout(function(){"vk"===MA_CONFIG.embed?c.show_modal_popup("no_hardware_accel_vk"):window.is_firefox?c.show_modal_popup("no_hardware_accel_ff"):c.show_modal_popup("no_hardware_accel")},0))),I.removeEventListener("webglcontextcreationerror",t,!1),!r)return d.send("Web.FeatureMissing",{feature:"webgl",errors:e.join(",")}),setTimeout(function(){c.show_reload_modal("webgl")},0),!1;var o=r;var i,a=null!=(i=o.getExtension("WEBGL_debug_renderer_info"))?{renderer:o.getParameter(i.UNMASKED_RENDERER_WEBGL),vendor:o.getParameter(i.UNMASKED_VENDOR_WEBGL)}:{renderer:o.getParameter(o.RENDERER),vendor:o.getParameter(o.VENDOR)};window.MA_EXTRA_INFO.gpu_renderer=a.renderer,window.MA_EXTRA_INFO.gpu_vendor=a.vendor;var s=void 0;return window.debug_lose_context=function(){s||(s=E.getExtension("WEBGL_lose_context")),s.loseContext()},window.debug_restore_context=function(){s.restoreContext()},E=r,Module.webgl=E,!0}window.addEventListener("keydown",function(e){8!=e.keyCode||function(e){if(e.readOnly||e.disabled)return!1;var t=e.tagName.toLowerCase();if(e instanceof HTMLTextAreaElement)return!0;if("input"==t){var n=e.type.toLowerCase();if(C.includes(n))return!0}return!1}(e.target)||e.preventDefault()}),O={preInit:[function(){y.phase="wasm_preinit",perf("wasm preinit")}],preRun:[function(){y.phase="wasm_prerun",perf("wasm prerun")}],postRun:[function(){y.phase="wasm_postrun",perf("wasm postrun")}],print:function(e){console.log(e)},printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},onAbort:function(e){console.error("onAbort",e,x())},canvas:I,preinitializedWebGLContext:E,setStatus:function(e){},monitorRunDependencies:function(e){0==e&&(y.time_instance_end=+new Date)},locateFile:function(e){return e in MA_CONFIG.wasm_hash?("app.wasm"==e&&(y.time_instance_start=+new Date),"assets/wasm/"+MA_CONFIG.wasm_hash[e]):e}},window.Module=O,O.instantiateWasm=function(e,t){var n=Module.locateFile("app.wasm");function r(e){window.Module=O,t(e.instance,e.module)}function o(t){fetch(n,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+n+"'";return e.arrayBuffer()}).catch(function(){return getBinary()}).then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)})}return"function"==typeof WebAssembly.instantiateStreaming&&"function"==typeof fetch?WebAssembly.instantiateStreaming(fetch(n,{credentials:"same-origin"}),e).then(r,function(e){err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),o(r)}):o(r),{}};var j=document.getElementById("wasm-preloader"),M=(document.getElementById("wasm-loader"),document.getElementById("wasm-loader-wrapper")),F=document.getElementById("wasm-context-lost-wrapper"),T=document.getElementById("wasm-loader-progress-foreground"),L=document.getElementById("wasm-loader-progres-wrapper"),U=234352177,D=10,q=0,G=!0;function B(){M.style.display="none"}function z(){j.style.display="none",G=!1}var V=!1,K=void 0,W=5e3,J=[];function H(e){return s.debug_format(e)}function Y(e){var t=console[e].bind(console);console[e]=function(){if(h.getItem("developer")||l.debug){var n=Array.prototype.slice.call(arguments);n.unshift("["+((+new Date-window.performance.timing.navigationStart)/1e3).toFixed(3)+"]"),t.apply(console,n)}var r,o,i;r=e,o=Array.from(arguments),i=(new Date).toISOString()+" "+r+": "+o.map(H).join(" "),J.push(i),J.length>=2*W&&(J=J.slice(J.length-W))}}function $(e,t){var n=J.join("\n"),r=b.encode(n),o=p.deflate(r),i={api:"Debug:0.0.1",session_id:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),requests:[{id:"1",method:"error",args:{error:e,log:s.base64encode(o)}}]};if(t&&navigator&&navigator.sendBeacon)navigator.sendBeacon(l.debugURL,JSON.stringify(i));else{var a=new XMLHttpRequest;a.open("POST",l.debugURL,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.responseType="text",a.send(JSON.stringify(i))}}Y("log"),Y("debug"),Y("warn"),Y("info"),Y("error"),console.log("Browser UA:",navigator.userAgent);var X=!0;function Q(e,t){console.error(e,x());try{R&&"undefined"!=typeof jfl_uncaught_error?jfl_uncaught_error(e):console.error("extra information is not available")}catch(e){console.error("unable to get extra information",e)}w&&setTimeout(function(){for(var n=["out of memory","could not allocate memory","Out of executable memory"],r=!1,o=0;o<n.length;o++)e.indexOf(n[o])>=0&&(r=!0);t?function(e,t){X&&($(e,t),X=!1),d.send("Error.Silenced",{message:e})}(e):r?c.show_reload_modal("oom"):($(e),c.show_reload_modal("error"))},50),t||(w=!1)}var Z=["SecurityError","Script error","Zugriff verweigert","Accès refusé","Přístup byl odepřen","Adgang nægtet","Accesso negato","Odmowa dostępu","Access is denied","Object expected","Acceso denegado","アクセスが拒否されました","InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable","unmuteAudio","muteAudio","NotAllowedError","Sdk is not init","The play() request was interrupted because the media was removed from the document"];function ee(){if("external"===MA_CONFIG.embed&&"pecpoc.com"===MA_CONFIG.partner&&navigator.userAgent.toLowerCase().indexOf("android")>-1)try{var e=document.documentElement,t=null;e.requestFullscreen?t=e.requestFullscreen():e.mozRequestFullScreen?t=e.mozRequestFullScreen():e.webkitRequestFullscreen?t=e.webkitRequestFullscreen():e.msRequestFullscreen&&(t=e.msRequestFullscreen()),t&&t.catch(function(){})}catch(e){}}window.addEventListener("error",function(e){var t="<unknown message>";e.message&&(t=e.message);for(var n=0;n<Z.length;n++)if(t.indexOf(Z[n])>=0)return;return e.error?Q("Runtime Error (error) occured at "+String(e.fileName)+"("+String(e.lineNumber)+":"+String(e.columnNumber)+"):\n"+String(e.message)+"\n"+(e.stack||"no stack")):e.message&&Q("Runtime Error (message) occured at "+String(e.filename)+"("+String(e.lineno)+":"+String(e.colno)+"):\n"+String(e.message)+"\n"+(e.stack||"no stack")),e.preventDefault(),!1},!0),window.addEventListener("unhandledrejection",function(e){var t=""+e.reason,n=!1;if(!(t.indexOf("Failed to fetch")>=0)&&"gamedistribution"!==MA_CONFIG.embed&&"vk"!==MA_CONFIG.embed&&"poki"!==MA_CONFIG.embed){"yandex"===MA_CONFIG.embed&&(n=!0);for(var r=0;r<Z.length;r++)if(t.indexOf(Z[r])>=0)return;Q("Unhandled Rejection occured: "+s.debug_format(e.reason),n),event.preventDefault()}}),window.addEventListener("beforeunload",function(){return R&&K&&K.invoke("on_unload"),window.location.search.indexOf("pecpoc-debug")>=0&&$("debug log",!0),y.phase,null}),document.addEventListener("click",ee),document.addEventListener("touchend",ee)},393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expose=function(e){e.expose({proxy_load:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.load_binary(t);case 2:return n=e.sent,e.abrupt("return",r.base64encode(n));case 4:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})});return function(e){return t.apply(this,arguments)}}()})};var r=n(9)},47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initialize=function(e,t){u=e,c=t.enabled,l=t.rate?t.rate/100:1,c&&(m=t["api-key"],a.default.getInstance().init(t["api-key"],null,null,function(){x()}),a.default.getInstance().setVersionName(MA_CONFIG.build_id),w());u.expose({analytics_send:function(e,t){O(e,t)},analytics_update_user:function(e,t){var n={};n[e]=t,E(n)},analytics_reset_user:function(e,t){I(e),E(t)}})},t.reset_user=I,t.update_user_params=E,t.send_beacon=function(e,t){C("beacon",e,t)},t.send=O;var o,i=n(369),a=(o=i)&&o.__esModule?o:{default:o};var s=n(374),u=void 0,c=!1,l=void 0,d=!1,p=null,f={},h=!0,m=null,v=[],g=!1,_=!1;var y=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];function w(){var e=new URLSearchParams(window.location.search),t=new a.default.Identify;t.setOnce("partner_install",window.MA_CONFIG.partner),t.set("partner",window.MA_CONFIG.partner),t.set("sandbox",window.ma_is_sandbox);var n=window.MA_CONFIG.referrer;n&&(t.set("referrer",n),t.setOnce("referrer_install",n));var r=window.MA_CONFIG.skin;r&&(t.set("skin",r),t.setOnce("skin_install",r)),window.MA_CONFIG.needs_ios_fix?t.set("test.ios14fix",!0):t.set("test.ios14fix",!1);for(var o={},i=!1,s=y.length,u=0;u<s;u++){var c=y[u],l=e.get(c);l&&(o[c]=l,i=!0)}i&&t.setOnce("utm_install",o),a.default.getInstance().identify(t)}var b={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function k(e){for(var t=0,n=s(e),r=0;r<n.length;r++)t=((16*t|0)+(0|b[n[r]]))%1e6;return t/1e6>l}function x(){g=!1,f&&+f.pay_count>0?d=!1:null==p?(d=!0,g=!0):d=k(p)}function I(e){p=e,f={},x(),h=!0,a.default.getInstance().setUserId(p),w(),S()}function E(e){for(var t in e)f[t]=e[t];h=!0,x()}function S(){if(!g&&0!==v.length){var e=v;if(v=[],e&&!d){var t=f;for(var n in e){var r=e[n];f=r.params,P(r.event,r.args)}f=t}}}function R(){if(0!==v.length){var e=a.default.getInstance(),t=e.options;if(navigator&&navigator.sendBeacon){var n=v;if(v=[],!d){var r=[];for(var o in n){var i=n[o];r.push({event_type:i.event,event_properties:i.args,user_properties:i.user_params,user_id:t.userId,device_id:t.deviceId,session_id:e._sessionId||-1})}r.length,function(e){a.default.getInstance().options;var t=new FormData;t.append("api_key",m),t.append("event",JSON.stringify(e)),navigator.sendBeacon("",t)}(r)}}else S()}}function A(e){if(e instanceof Array)return e.map(A);if("object"===(void 0===e?"undefined":r(e))){var t={};for(var n in e)t[n]=e[n];return t}return e}function P(e,t){h&&(h=!1,a.default.getInstance().setUserProperties(f)),a.default.getInstance().logEvent(e,t)}function O(e,t){C("sync",e,t)}function C(e,t,n){c&&(d?g&&(v.push({params:A(f),event:t,args:A(n)}),_&&R()):"beacon"===e?(v.push({params:A(f),event:t,args:A(n)}),R()):(S(),P(t,n)))}window.addEventListener("beforeunload",function(){if(_=!0,c){if(g){var e=a.default.getInstance().options,t=e.userId,n=e.deviceId;d=k(t||n)}R()}return null})},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setItem=i,t.getItem=a,t.removeItem=s,t.isAvailable=u,t.isPersistent=c;var r=null,o={};function i(e,t){if(u())try{return window.localStorage.setItem(e,t)}catch(e){return null}else o[e]=""+t}function a(e){if(!u())return o[e];try{return window.localStorage.getItem(e)}catch(e){return null}}function s(e){if(u())return window.localStorage.removeItem(e);delete o[e]}function u(){if(null===r)try{var e=window.localStorage;e.setItem("check","1"),"1"===e.getItem("check")?(e.removeItem("check"),r=!0):r=!1}catch(e){r=!1}return r}function c(){return u()}window["pecpoc.com/storage"]={isAvailable:u,isPersistent:c,removeItem:s,getItem:a,setItem:i}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){return function(e){i&&!a||(a=!1,e||(e=function(){return s.load_script(u,!0)}),(i=e().then(function(){r=document.getElementById("fullscreen-video"),o=document.getElementById("fullscreen-wrapper"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED)})).catch(function(e){console.log("Failed to load IMASDK: %s",e),a=!0}));return i}(e)},t.preload=function(e){return i.then(function(){return h(e)}).catch(function(){})},t.prepare_ad=function(e,t){return s.MyPromise.with_timeout(i.then(function(){return h(e,!0)}),t,function(){return"timeout"}).then(function(e){return"timeout"===e?"failed":"success"})},t.show_ad=function(e,t,n){return s.MyPromise.with_timeout(i.then(function(){return function(e){return h(e,!0)}(e)}),n,function(){return"timeout"}).then(function(e){return"timeout"===e?"failed":e.show(t)})};var r,o,i,a,s=n(9),u="https://imasdk.googleapis.com/js/sdkloader/ima3.js",c=!1;function l(){return window.innerWidth||(document.documentElement?document.documentElement.clientWidth:0)||(document.body?document.body.clientWidth:0)}function d(){return window.innerHeight||(document.documentElement?document.documentElement.clientHeight:0)||(document.body?document.body.clientHeight:0)}function p(e){return new Promise(function(t,n){var i=document.createElement("div");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style.overflow="hidden",i.style.display="none",o.appendChild(i);var a=new google.ima.AdDisplayContainer(i,r),s=new google.ima.AdsLoader(a);function u(){s.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,h),s.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,f)}s.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,h),s.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,f);var c=new google.ima.AdsRequest;function p(){s.contentComplete(),i.style.display="none",o.style.display="none",o.removeChild(i)}function f(t){u(),console.log("Preparing ad with url "+e+" failed: "+t.getError().toString()),p(),n(t.getError())}function h(n){u();var s=new google.ima.AdsRenderingSettings;s.restoreCustomPlaybackStateOnAdBreakComplete=!0;var c=n.getAdsManager(r,s);console.log("ad with url "+e+" successfully prepared!");var f=null,h=[];var m={};m.show=function(e){return f||(f=new Promise(function(t,n){var s=!1;function u(){s||(s=!0,c.removeEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,m),c.removeEventListener(google.ima.AdEvent.Type.CLICK,m),c.removeEventListener(google.ima.AdEvent.Type.COMPLETE,m),c.removeEventListener(google.ima.AdEvent.Type.SKIPPED,m),c.removeEventListener(google.ima.AdEvent.Type.USER_CLOSE,m),c.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,m),c.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,f),c.destroy(),window.removeEventListener("resize",v),p(),function(){for(var e in h)h[e]()}())}function f(e){u(),n(e.getError())}function m(){u(),t("success")}function v(){c.resize(l(),d(),google.ima.ViewMode.NORMAL)}c.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,m),c.addEventListener(google.ima.AdEvent.Type.CLICK,m),c.addEventListener(google.ima.AdEvent.Type.COMPLETE,m),c.addEventListener(google.ima.AdEvent.Type.SKIPPED,m),c.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,m),c.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,m),c.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,f),window.addEventListener("resize",v);try{r.load(),a.initialize(),i.style.display="block",o.style.display="block",c.init(l(),d(),google.ima.ViewMode.NORMAL),c.start(),e()}catch(e){u(),n(e)}})),f},m.register_on_complete=function(e){h.push(e)},t(m)}c.adTagUrl=e,c.linearAdSlotWidth=c.nonLinearAdSlotWidth=l(),c.linearAdSlotHeight=c.nonLinearAdSlotHeight=d(),c.forceNonLinearFullSlot=!0,s.requestAds(c)})}var f={};function h(e,t){if(e in f)return t&&f[e].purge?(f[e].purge(),h(e)):f[e].promise;var n={},r=p(e);function o(){n.purge=null,f[e]==n&&(delete f[e],c&&h(e).catch(function(){}))}return n.promise=r,r.then(function(e){e.register_on_complete(o)},function(e){n.purge=o,setTimeout(o,1e3*(10+20*Math.random()))}),f[e]=n,r}},57:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){return p.resolve(e),h(c)},t.set_locale=m,t.choose_locale=function(e){if("vk"===MA_CONFIG.embed||"ok"===MA_CONFIG.embed||"my"===MA_CONFIG.embed)return void m("ru-RU");for(var t=!1,n=null,r=0;r<e.length;r++){var o=e[r].replace(/_/g,"-").toLowerCase(),i=null;for(var a in d)o.substr(0,a.length)===a&&(!i||i.length<a.length)&&(i=a);if(i){var s=d[i],u=l.indexOf(s)>=0;(!n||!t&&u)&&(n=s,t=u)}}n&&m(n)},t.get_locale=function(){return c},t.get_texts=function(e){return h(c).then(function(t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(o in t){var i=t[o];c in i?n.push(i[c]):n.push(i["en-US"])}else n.push("%"+o+"%")}return n})};var o,i=n(367),a=(o=i)&&o.__esModule?o:{default:o};function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(9),c="en-US",l=["en-US","de-DE","ru-RU"],d=(s(r={en:"en-US",de:"de-DE",ru:"ru-RU",pt:"pt-BR",fr:"fr-FR",es:"es-ES",nl:"nl-NL",pl:"pl-PL",tr:"tr-TR",ar:"ar-SA",hi:"hi-IN",id:"id-ID",fil:"fil-PH",da:"da-DK",sv:"sv-SE",it:"it-IT",nb:"nb-NO",fi:"fi-FI",el:"el-GR"},"id","id-ID"),s(r,"ja","ja-JP"),s(r,"zh","zh-CN"),s(r,"ko","ko-KR"),s(r,"bg","bg-BG"),s(r,"ca","ca-ES"),s(r,"hr","hr-HR"),s(r,"cs","cs-CZ"),s(r,"iw","iw-IL"),s(r,"hu","hu-HU"),s(r,"ms","ms-MY"),s(r,"sk","sk-SK"),s(r,"ro","ro-RO"),s(r,"vi","vi-VN"),s(r,"ka","ka-GE"),s(r,"uk","uk-UA"),r),p=u.MyPromise.future(),f={};function h(e){return e in f||(f[e]=p.then(function(t){return new Promise(function(n,r){console.log("Loading locale "+e+" from url "+t[e]);var o=new XMLHttpRequest;o.open("GET",t[e],!0),o.responseType="text",o.addEventListener("load",function(e){var t=o.response,r={},i=a.default.toObjects(t);for(var s in i){var u=i[s];u.ID&&(r[u.ID]=u)}n(r)}),o.addEventListener("error",function(t){n({}),console.error("translation","Failed to load "+e,t)}),o.send()})})),f[e]}function m(e){c=e,h(e)}},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.connect=function(e,t,n,o){var i=(o=o||{}).allowed_origins,a=null,s=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});function u(e,r,o){if(a){if(a.remote_uuid===e)return;a.close()}var i={local_uuid:s,remote_uuid:e,origin:"*",incoming_requests:{},outgoing_requests:{},free_ids:[],next_id:1,connected:!0};a=i,console.log("IRPC["+i.local_uuid+"]: Connection with remote target",i.remote_uuid),i.close=function(){this.connected=!1;var e=this.incoming_requests,n=[];for(var o in e)n.push(o),t.postMessage({"irpc::type":"response",source_uuid:this.local_uuid,target_uuid:this.remote_uuid,request_id:o,error:""},this.origin);for(var s in n)delete e[n[s]];var u=this.outgoing_requests,c=[];for(var l in u)c.push(l),u[l].reject("disconnected");for(var d in c)delete u[c[d]];console.log("IRPC["+i.local_uuid+"]: Closed connection with remote target",i.remote_uuid),t.postMessage({"irpc::type":"disconnect",source_uuid:this.local_uuid,target_uuid:this.remote_uuid},r),this===a&&(a=null)},i.matches=function(e){return e.source_uuid==this.remote_uuid&&e.target_uuid==this.local_uuid},i.process_response=function(e){var t=e.request_id,n=this.outgoing_requests[t];n?(delete this.outgoing_requests[t],this.free_ids.push(t),"error"in e?n.reject(JSON.parse(e.error)):"value"in e?n.resolve(JSON.parse(e.value)):console.error("malformed response",e)):console.error("no outgoing request for response",e)},i.invoke=function(e,n){var r=this;if(!this.connected)return Promise.reject("disconnected");var o=void 0;o=this.free_ids.length>0?this.free_ids.pop():this.next_id++;var i=this;return new Promise(function(a,s){if(!i.connected)return Promise.reject("disconnected");var u={resolve:a,reject:s};r.outgoing_requests[o]=u,t.postMessage({"irpc::type":"invoke",source_uuid:i.local_uuid,target_uuid:i.remote_uuid,request_id:o,method:e,args:n},i.origin)})},i.rpc_invoke=function(e){var r=this,o=e.request_id,i=e.method,a=e.args,s=this.incoming_requests,u=new Promise(function(e,t){return e(n(i,a))});s[o]=u,u.then(function(e){o in s&&(delete s[o],t.postMessage({"irpc::type":"response",source_uuid:r.local_uuid,target_uuid:r.remote_uuid,request_id:o,value:JSON.stringify(void 0===e?null:e)},r.origin))},function(e){o in s&&(delete s[o],t.postMessage({"irpc::type":"response",source_uuid:r.local_uuid,target_uuid:r.remote_uuid,request_id:o,error:JSON.stringify(void 0===e?null:e)},r.origin))})},o&&t.postMessage({"irpc::type":"connected_ack",source_uuid:i.local_uuid,target_uuid:i.remote_uuid},r),n("irpc::connected",{connection:{invoke:i.invoke.bind(i)}})}function c(){t.postMessage({"irpc::type":"connect",source_uuid:s},"*")}return e.addEventListener("message",function(e){var n=e.source,o=e.origin;if(n==t&&!(i&&i.indexOf(e.origin)<0)){var l=e.data;if("object"===(void 0===l?"undefined":r(l))&&"irpc::type"in l)switch(l["irpc::type"]){case"invoke":a&&a.matches(l)?a.rpc_invoke(l):t.postMessage({"irpc::type":"response",source_uuid:l.remote_uuid,target_uuid:l.source_uuid,request_id:l.request_id,error:"not connected"},o);break;case"response":a&&a.matches(l)&&a.process_response(l);break;case"connect":u(l.source_uuid,"null"===o?null:o,!0);break;case"disconnect":a&&a.matches(l)&&a.close(),a||c();break;case"connected_ack":l.target_uuid===s?u(l.source_uuid,"null"===o?null:o,!1):c()}}}),c(),{}}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=t.wrap_ad_waterfall=(r=s(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,o=void 0,e.prev=2,e.next=5,n();case 5:return"object"===(void 0===(a=e.sent)?"undefined":i(a))?(r=a.status,t=a.source,o=a.error):r=a?"success":"failed",e.abrupt("return",a);case 10:throw e.prev=10,e.t0=e.catch(2),r="error",o=""+e.t0,e.t0;case 15:return e.prev=15,p&&l.send("Test.VKAdWaterfall",{source:t,result:r,reason:o}),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,10,15,18]])})),function(e,t){return r.apply(this,arguments)});t.show_ad_fallbacks=(o=s(regeneratorRuntime.mark(function e(t){var n,r,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(m),n=regeneratorRuntime.mark(function e(n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,!m[n].test||m[n].test()){e.next=3;break}return e.abrupt("return","continue");case 3:return o=m[n].source,e.prev=4,e.next=7,a(o,function(){return m[n].handler(t)});case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.warn("Ad handler "+o+" failed with error",e.t0);case 13:if(!r){e.next=15;break}return e.abrupt("return",{v:{status:"success",source:o}});case 15:case"end":return e.stop()}},e,s,[[4,10]])}),r=0;case 3:if(!(r<m.length)){e.next=15;break}return e.delegateYield(n(r),"t0",5);case 5:o=e.t0,e.t1=o,e.next="continue"===e.t1?9:10;break;case 9:return e.abrupt("continue",12);case 10:if("object"!==(void 0===o?"undefined":i(o))){e.next=12;break}return e.abrupt("return",o.v);case 12:r++,e.next=3;break;case 15:return e.abrupt("return",{status:"failed",source:"vk_fallback_ads",reason:"no custom block succeeded"});case 16:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)});function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}t.is_allowed=v,t.allow=g,t.init=function(e){e.expose({vk_set_allowed:g});new URLSearchParams(window.location.search).get("platform");m.push({source:"vk_cb_vk",handler:f,test:function(){return v("vk")}})};var u=n(146),c=n(12),l=n(47),d=n(48),p=!1;t.posts={main:{dc_win:{text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",link:"https://vk.com/playmatcharena#wallpublic",attachments:["photo-195221625_457239030"]}}};function f(e){return u.show_vk_ad(c.vk_custom_blocks.vk,e)}function h(e){for(var t=e.length,n=1;n<t;n++){var r=0|Math.random()*n;if(r>n&&(r=n),n!=r){var o=e[n];e[n]=e[r],e[r]=o}}}var m=[];function v(e){return"off"!==d.getItem("pecpoc.com/vk_ads/"+e)}function g(e,t){d.setItem("pecpoc.com/vk_ads/"+e,t?"on":"off")}},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_app=s,t.get_post=function(e){return s(),o.posts[a][e]},t.get_reforged_promo_link=function(){var e=new URLSearchParams(window.location.search),t=e.get("platform"),n=e.get("ref_notification_type"),r=e.get("ref_notification_id");if("broadcast"==n&&r==u)return"web"==t?"https://vk.com/games/skydomreforged":"https://m.vk.com/games/skydomreforged";return null};n(11);var r=n(12),o=(n(49),n(9),n(34),n(75)),i=null,a=null;function s(){i||("reforged"==window.MA_CONFIG.skin?(console.log("Selected VK application reforged"),i=r.vk["iframe-reforged"],a="reforged"):(i=r.vk.iframe,a="main"));return i}var u="193"},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.promisify=function(e,t,n){void 0===n&&(n=function(e,t){return function(n){!n||n.error?t(n?n.error:null):e(n)}});e[t+"Async"]=function(){var r=Array.prototype.slice.call(arguments);return new Promise(function(o,i){r.push(n(o,i,e,t,r)),e[t].apply(e,r)})}},t.load_script=function(e,t){if(!(e in o)||t&&o[e].failed){var n={promise:null,failed:!1};n.promise=new Promise(function(t,r){var o=document.createElement("script");o.onload=function(){t(!0)},o.addEventListener("error",function(e){r("loading failed"),e.stopPropagation(),e.preventDefault()}),o.type="text/javascript",o.src=e,n.dom=o,document.getElementsByTagName("head")[0].appendChild(o)}),n.promise.catch(function(e){n.failed=!0,n.dom.parentNode.removeChild(n.dom)}),o[e]=n}return o[e].promise},t.load_text=function(e){return i(e,"text")},t.load_binary=function(e){return i(e,"arraybuffer")},t.base64encode=function(e){for(var t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(e),i=o.byteLength,a=i%3,s=i-a,u=0;u<s;u+=3)t=o[u]<<16|o[u+1]<<8|o[u+2],n+=r[(16515072&t)>>18]+r[(258048&t)>>12]+r[(4032&t)>>6]+r[63&t];1==a?(t=o[s],n+=r[(252&t)>>2]+r[(3&t)<<4]+"=="):2==a&&(t=o[s]<<8|o[s+1],n+=r[(64512&t)>>10]+r[(1008&t)>>4]+r[(15&t)<<2]+"=");return n},t.debug_format=function e(t){var n=void 0===t?"undefined":r(t);try{return null===t?"null":void 0===t?"undefined":"string"===n||"boolean"==n||"number"===n?t.toString():t instanceof Array?"["+t.map(e).join(", ")+"]":t instanceof Error?t.toString():JSON.stringify(t)}catch(e){return"<inconvertible "+n+": "+e+">"}};var o={};function i(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.responseType=t,o.withCredentials=!1,o.addEventListener("load",function(e){var t=o.response;n(t)}),o.addEventListener("error",function(e){r(e)}),o.open("GET",e,!0),o.send()})}var a=t.MyPromise={};a.delay=function(e){return new Promise(function(t){setTimeout(function(){t(e)},1e3*e)})},a.with_timeout=function(e,t,n){return Promise.race([e,a.delay(t).then(function(){return n()})])},a.future=function(){var e=null,t=null,n=new Promise(function(n,r){t=function(e){e(n,r)},e&&t(e)});return n.resolve=function(n){e||(e=function(e,t){e(n)},t&&t(e))},n.reject=function(n){e||(e=function(e,t){t(n)},t&&t(e))},n},a.retry=function(e,t){var n=0;return new Promise(function(r,o){r(function r(){return t().catch(function(t){console.error("MyPromise.retry attempt rejected",t);var o=e[n];return n<e.length-1&&n++,"function"==typeof o?o(t,r):a.delay(o).then(r)})}())})}}});
//# sourceMappingURL=app.4b6acab1a884c43abcd8.js.map