(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[757],[,,function(t,e,n){"use strict";n.r(e);var i=(0,n(38).getImageScale)(),r={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+i+"x/tutorial-resources.png",JSON:"./assets/textures/"+i+"x/tutorial-resources.json",FRAME:{BLANK:"blank"}},GAME_PLAY:{KEY:"game-play-resources",TEXTURE:"./assets/textures/"+i+"x/game-play-resources.png",JSON:"./assets/textures/"+i+"x/game-play-resources.json",FRAME:{ICON_AD:"icons/ad",ICON_DOT:"icons/dot",ICON_ADD_FRIEND:"icons/icon-add-friend",ICON_BACK:"icons/icon-back",ICON_BRANCH:"icons/icon-branch",ICON_NEXT:"icons/icon-next",ICON_PAUSE:"icons/icon-pause",ICON_RETURN:"icons/icon-return",ICON_HINT:"icons/icon-hint",TREE_BRANCH:"tree-branch",BUTTON_CYAN_CIRCLE:"buttons/button-circle-cyan",BUTTON_GREEN_CIRCLE:"buttons/button-circle-green",BUTTON_ORANGE_CIRCLE:"buttons/button-circle-orange"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+i+"x/default-resources.png",JSON:"./assets/textures/"+i+"x/default-resources.json",FRAME:{BLANK:"blank",PRELOADER:"preloader/dual-ring",RIBBON_COMPLETE:"ribbon/ribbon-completed",RIBBON_PAUSE:"ribbon/ribbon-pause",RIBBON_FAILED:"ribbon/ribbon-failed",RIBBON_MAP:"ribbon/map",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",ICON_CHECK:"icons/check",ICON_DOT_SELECTED:"icons/dot-selected",ICON_DOT_UNSELECT:"icons/don-unselect",ICON_MAP:"icons/icon-map",ICON_NEXT_LEVEL:"icons/icon-next-level",ICON_RETRY:"icons/icon-retry",ICON_SHARE:"icons/icon-share",ICON_LOCK:"icons/lock",ICON_MAP_INCOMPLETE:"icons/map-incomplete",ICON_MAP_LOCK:"icons/map-lock",ICON_MUSIC_OFF:"icons/music-off",ICON_MUSIC_ON:"icons/music-on",ICON_SOUND_OFF:"icons/sound-off",ICON_SOUND_ON:"icons/sound-on",ICON_VIBRATE_OFF:"icons/vibrate-off",ICON_VIBRATE_ON:"icons/vibrate-on",ICON_MAGNIFYING_GLASS:"icons/magnifying-glass",TEXT_RETRY:"texts/retry",TEXT_NEXT_LEVEL:"texts/next-level",BUTTON_CLOSE:"buttons/button-close",BUTTON_BLUE:"buttons/button-blue",BUTTON_GREEN:"buttons/button-green",BUTTON_RED:"buttons/button-red",BUTTON_BLUE_CIRCLE:"buttons/button-circle-blue",BUTTON_GREY_CIRCLE:"buttons/button-circle-grey",CONFETTI_PARTICLE_1:"confetti/confetti-1",CONFETTI_PARTICLE_2:"confetti/confetti-2",CONFETTI_PARTICLE_3:"confetti/confetti-3",CONFETTI_PARTICLE_4:"confetti/confetti-4",CONFETTI_PARTICLE_5:"confetti/confetti-5",CONFETTI_PARTICLE_6:"confetti/confetti-6",CONFETTI_PARTICLE_7:"confetti/confetti-7",RIBBON_PARTICLE_1:"confetti/ribbon-1",RIBBON_PARTICLE_2:"confetti/ribbon-2",RIBBON_PARTICLE_3:"confetti/ribbon-3",RIBBON_PARTICLE_4:"confetti/ribbon-4",RIBBON_PARTICLE_5:"confetti/ribbon-5",RIBBON_PARTICLE_6:"confetti/ribbon-6",HAND:"hand"}},BIRD_SPINE:{KEY:"bird-spine",jsonPATH:"./assets/spines/birds/chim.json",atlasPATH:"./assets/spines/birds/chim.atlas"},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};e.default=r},,,function(t,e,n){"use strict";n.r(e);e.default={PRIMARY:{KEY:"mikado_stroke",TEXTURE:"./assets/fonts/mikado_stroke.png",DATA:"./assets/fonts/mikado_stroke.xml"},MIKADO:{KEY:"mikado",TEXTURE:"./assets/fonts/mikado.png",DATA:"./assets/fonts/mikado.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif'}},,function(t,e,n){"use strict";n.r(e);var i=n(18),r=n(4),a=n(0),s=n(10),o=n(42),h=n(11),c=n(21),l=n(9),u=function(t){function e(e,n,i,a,s,l){var u;return void 0===l&&(l=!1),(u=t.call(this,e)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,r.default)(u))},u.handlePointerDown=function(){var t,e;u.isClicked||null!=(t=u.upAnimation)&&null!=(e=t.tween)&&e.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(t){return function(){var e,n,i,r;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(n=e.tween)&&n.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(i=u.upAnimation)||null==(r=i.tween)||r.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(t)}))))}},u.handlePointerOut=function(){var t,e;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(e=t.tween)&&e.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var t;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(c.default.BUTTON_CLICK),null==(t=u.downAnimation)||t.remove(),u.downAnimation=new o.default({targets:[(0,r.default)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var t;-1!==u.scaleUp&&(null==(t=u.upAnimation)||t.remove(),u.upAnimation=new o.default({targets:[(0,r.default)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=l,u.setDepth(h.default.BUTTON),u.createButton(n,i,a,s),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,r.default)(u)),u}(0,a.default)(e,t);var n=e.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(t){var e,n,i;null==(e=this.upAnimation)||e.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),t()},n.setDisabled=function(t){var e,n;t?null==(e=this.hitArea)||e.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},n.createButton=function(t,e,n,i){this.button=this.scene.add.image(0,0,t,e),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var r=this.button,a=r.displayWidth,s=r.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:a,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var t=this.button,e=t.width,n=t.height,i=e/100*10,r=n/100*10,a=i<10?i:10,s=r<10?r:10;this.setSize(e+a,n+s),this.hitZone.setSize(e+a,n+s)},n.addDebugData=function(){var t=this.getParentName(),e=this.name;(0,l.addBreadcrumbSentry)("ui-click",t+":"+e)},n.logButtonEvent=function(){var t=this.getParentName(),e=this.name;this.scene.analytics.event(s.AnalyticsEvents.BUTTON_CLICK,{button_name:e,screen_name:t})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var t=this.parentContainer;t;){if(t instanceof GameCore.Screen){var e=t;return this.parentName=e.getScreenName(),this.parentName}t=t.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.default)(e,[{key:"onClick",set:function(t){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(t)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),e}(Phaser.GameObjects.Container);e.default=u},,function(t,e,n){"use strict";n.r(e),n.d(e,{initSentry:function(){return i},addBreadcrumbSentry:function(){return r},setSentryUser:function(){return a},sendExceptionWithScope:function(){return s},sendException:function(){return o}});n(25);var i=function(){var t=setInterval((function(){window.Sentry&&clearInterval(t)}),100)},r=function(t,e){window.Sentry&&window.Sentry.addBreadcrumb({category:t,message:e})},a=function(t){window.Sentry&&window.Sentry.setUser(t)},s=function(t,e){t&&window.Sentry.withScope((function(t){t.setExtras(e)}))},o=function(t){}},function(t,e,n){"use strict";n.r(e),n.d(e,{AnalyticsEvents:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",GET_SOLUTION:"get_solution",GET_SOLUTION_TIME_OUT:"get_solution_time_out"}},function(t,e,n){"use strict";n.r(e);e.default={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TREE_BRANCH:21,BIRD:22,TILE:25,TEXT:30,ENCOURAGING:31,BIRD_FLY:47,EFFECT:48,MESSAGE:49,TUTORIAL:49,POPUP:50,PRIORITY:80,DEBUG:90,ON_TOP:1e4}},function(t,e,n){"use strict";n.r(e),n.d(e,{SceneKeys:function(){return r},SceneEvents:function(){return a},SceneDepth:function(){return i}});var i,r={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",RESULT_MATCH_SCENE:"RESULT_MATCH_SCENE",PAUSE_SCENE:"PAUSE_SCENE",LEVEL_SCENE:"LEVEL_SCENE",COMPLETE_ALL_LEVEL_SCENE:"COMPLETE_ALL_LEVEL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},a={SWITCH:Symbol("SWITCH")};!function(t){t[t.SCENE=0]="SCENE",t[t.POPUP=1]="POPUP"}(i||(i={}))},function(t,e,n){"use strict";n.r(e);var i=n(19),r=function(){function t(t,e){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(e.targets.length<1)){this.buildConfig(t,e);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var e=t.prototype;return e.buildConfig=function(t,e){this.config=(0,i.merge)(t,e)},e.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},e.restart=function(){var t;null==(t=this.tween)||t.restart()},e.stop=function(){var t;null==(t=this.tween)||t.stop()},e.remove=function(){var t;null==(t=this.tween)||t.remove()},e.next=function(t){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,t),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,t),this.tween):null},t}();e.default=r},,,function(t,e,n){"use strict";n.r(e);var i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+(0,n(38).getImageScale)()+"x/bg.jpg",CONFIG:{}}};e.default=i},function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return s}});var i=n(0),r=n(10),a=function(t){function e(e,n,i){var r;return(r=t.call(this,e,0,0,n,i)||this).setOrigin(0,0),r}return(0,i.default)(e,t),e}(Phaser.GameObjects.Zone),s=function(t){function e(){var e;return(e=t.call(this,{visible:!1})||this).unsubscribeList=void 0,e.gameZone=void 0,e.background=void 0,e.handleOpenScene=function(){e.logPageviewOnOpen(),e.logEventOpen()},e.removeStateChange=function(){e.unsubscribeList.forEach((function(t){return t()}))},e}(0,i.default)(e,t);var n=e.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var t=this.getCamera("main"),e=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,r=n.height;t.setZoom(e),t.centerOn(i/2,r/2)},n.createGameZone=function(){var t=this.world.getWorldSize(),e=t.width,n=t.height;this.gameZone=new a(this,e,n)},n.getCamera=function(t){return"main"===t?this.cameras.main:this.cameras.getCamera(t)},n.createMask=function(t){void 0===t&&(t=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+t+")")},n.fontSize=function(t){return t/1},n.createBackground=function(t,e,n,i){this.background?(this.background.setTexture(t),e&&this.background.setFrame(e)):this.background=this.make.image({key:t,frame:e}),this.background.setName(t);var r=this.gameZone,a=r.displayWidth,s=r.displayHeight;this.background.setDisplaySize(a,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(t){var e=this;this.unsubscribeList=[],t.forEach((function(t){var n=t.selector,i=t.callback,r=e.storage.watch(n,i);e.unsubscribeList.push(r)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(r.AnalyticsEvents.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},e}(Phaser.Scene)},,,function(t,e,n){"use strict";n.r(e),n.d(e,{sleepAsync:function(){return i},checkIsToday:function(){return r},formatDateHMS:function(){return a},getDateDMY:function(){return s}});var i=function(t){return new Promise((function(e){return setTimeout(e,t)}))},r=function(t){var e=new Date(t),n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()},a=function(t,e){void 0===e&&(e=!0);var n=new Date(t).toISOString();return e?n.slice(11,-5):n.slice(14,-5)},s=function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,i=""+e,r=""+n;return e<10&&(i="0"+e),n<10&&(r="0"+n),i+"/"+r+"/"+t.getFullYear()}},function(t,e,n){"use strict";n.r(e);e.default={BIRD_1:"bird-1",BIRD_2:"bird-2",BIRD_3:"bird-3",BIRD_4:"bird-4",BIRD_5:"bird-5",BIRD_6:"bird-6",BIRD_7:"bird-7",BIRD_8:"bird-8",BIRD_9:"bird-9",BIRD_10:"bird-10",BIRD_11:"bird-11",BIRD_12:"bird-12",BIRD_FLY:"bird-fly",BIRDS_FLY:"birds-fly",BUTTON_CLICK:"button_click",CONFETTI:"confetti",HIGHLIGHT:"hightlight",UN_HIGHLIGHT:"un_hightlight",YOU_LOSE:"you_lose",YOU_WIN:"you_win"}},,,,,function(t,e,n){"use strict";n.r(e);var i=n(16),r=function(){function t(t,e,n,r){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=t,this.name=e,this.photo=n||i.default.AVATAR.FILE,this.locale=r||"en_US"}return t.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},t}();e.default=r},,,,,function(t,e,n){"use strict";n.r(e);var i=n(32),r=n.n(i)()(.48,1.57,.6,.83);e.default=r},,function(t,e,n){"use strict";n.r(e);var i=n(4),r=n(0),a=n(2).default.DEFAULT,s=a.KEY,o=a.FRAME,h=function(t){function e(e){var n;return(n=t.call(this,e,s,o.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,i.default)(n)),n}(0,r.default)(e,t);var n=e.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.BLANK,emitZone:{source:this.emitZone,type:"random"},timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:1*t,end:0,ease:Phaser.Math.Easing.Expo.Out},lifespan:{min:800,max:1500}})},n.run=function(t,e,n,i,r){this.stop(),this.reset(),this.emitZone.setSize(i,r),this.emitZone.setPosition(e-i/2,n-r/2),this.emitter.setQuantity(t),this.emitter.start()},n.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},n.reset=function(){this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager);e.default=h},function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(5),a=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n.key,n.button,i,r)||this).payload=void 0,a.payload=n,a.createIcon(),a.createText(),a}(0,i.default)(e,t);var n=e.prototype;return n.createIcon=function(){var t=this.scene.add.image(0,0,this.payload.key,this.payload.icon);t.setWorldSize(43,43),this.add(t),Phaser.Display.Align.In.LeftCenter(t,this,-25)},n.createText=function(){var t=this.payload.text,e=this.scene.make.bitmapText({font:r.default.PRIMARY.KEY,size:this.scene.fontSize(24),text:t,origin:{x:.2,y:.5}});this.add(e)},e}(n(7).default);e.default=a},,,function(t,e,n){"use strict";n.r(e),n.d(e,{FacebookTournament:function(){return c}});var i=n(3),r=n(1),a=n.n(r),s=n(10),o=n(26),h=n(20),c=function(){function t(){}var e=t.prototype;return e.createAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.tournament.createAsync(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.shareAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.tournament.shareAsync(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.joinAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.tournament.joinAsync(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.postScoreAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.tournament.postScoreAsync(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getTournamentsAsync=function(){var t=(0,i.default)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t}(),l=function(){function t(t){var e=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.requestTournamentAsync=function(){var t=(0,i.default)(a().mark((function t(n){var i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.facebook.getTournamentAsync();case 3:return t.next=5,e.facebook.tournament.shareAsync({score:n});case 5:t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(0),i=GameSDK.player.getName(),t.next=12,e.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),this.facebook=t}var e=t.prototype;return e.switchAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return t.next=4,GameSDK.context.switchAsync(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.chooseAsync=function(){var t=(0,i.default)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return t.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return t.abrupt("return",GameSDK.context.getID());case 8:if(t.prev=8,t.t0=t.catch(0),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code"))){t.next=16;break}t.t1=t.t0.code,t.next="USER_INPUT"===t.t1?14:"SAME_CONTEXT"===t.t1?15:16;break;case 14:return t.abrupt("return",!1);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),e.createAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return t.next=5,GameSDK.context.createAsync(""+e);case 5:case 15:return t.abrupt("return",GameSDK.context.getID());case 8:if(t.prev=8,t.t0=t.catch(0),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code"))){t.next=16;break}t.t1=t.t0.code,t.next="USER_INPUT"===t.t1?14:"SAME_CONTEXT"===t.t1?15:16;break;case 14:return t.abrupt("return",!1);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.getPlayerToken=function(){var t=(0,i.default)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return e=t.sent,t.abrupt("return",e.getSignature());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.getContextPlayers=function(){var t=(0,i.default)(a().mark((function t(e){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,GameSDK.context.getPlayersAsync();case 3:return n=t.sent,i=[],n.forEach((function(t){var n=t.getID();if(n!==e){var r=t.getName();if(r){var a=t.getPhoto();i.push(new o.default(n,r,a).toObject())}}})),t.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),e.shareAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.shareAsync(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendMessage=function(){var t=(0,i.default)(a().mark((function t(e){var n,i,r,s,o,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data,i=e.image,r=e.template,s=e.cta,o=e.text,h={data:n,image:i,action:"CUSTOM",template:r,cta:s,text:o,strategy:"IMMEDIATE",notification:"PUSH"},t.next=4,GameSDK.updateAsync(h);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.inviteAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.inviteAsync(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.postSessionScoreAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.postSessionScoreAsync(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getRewardedVideoAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.getRewardedVideoAsync(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getInterstitialAdAsync=function(){var t=(0,i.default)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.getInterstitialAdAsync(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getContextID=function(){return GameSDK.context.getID()},e.attemptToAddShortcut=function(){var t=(0,i.default)(a().mark((function t(){var e,n,i,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isCalledCreateShortcut){t.next=2;break}return t.abrupt("return",!1);case 2:if(t.prev=2,"ANDROID"!==GameSDK.getPlatform()){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0={};case 11:if(e=t.t0,!(n=e.lastCallCreateShortcut)||!(0,h.checkIsToday)(+n)){t.next=15;break}return t.abrupt("return",!1);case 15:if(i=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:i}),GameSDK.getSupportedAPIs().includes("canCreateShortcutAsync")){t.next=20;break}return t.abrupt("return",!1);case 20:return t.next=22,GameSDK.canCreateShortcutAsync();case 22:if(!t.sent){t.next=40;break}return r=s.AnalyticsEvents.SHORTCUT_CREATE,o=s.AnalyticsEvents.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(o),t.prev=27,t.next=30,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 30:return t.next=32,GameSDK.createShortcutAsync();case 32:return window.game.analytics.event(r,{success:!0}),t.abrupt("return",!0);case 36:return t.prev=36,t.t1=t.catch(27),window.game.analytics.event(r,{success:!1}),t.abrupt("return",!1);case 40:return t.abrupt("return",!1);case 43:return t.prev=43,t.t2=t.catch(2),t.abrupt("return",!1);case 46:case"end":return t.stop()}}),t,this,[[2,43],[27,36]])})));return function(){return t.apply(this,arguments)}}(),e.attemptToSubscribeBot=function(){var t=(0,i.default)(a().mark((function t(){var e,n,i,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isCalledSubscribeBot){t.next=2;break}return t.abrupt("return",!1);case 2:if(t.prev=2,GameSDK.getSupportedAPIs().includes("player.canSubscribeBotAsync")){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!t.sent){t.next=34;break}return t.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e=t.sent,!(n=e.lastCallSubscribeBot)||!(0,h.checkIsToday)(+n)){t.next=16;break}return t.abrupt("return",!1);case 16:return i=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:i}),r=s.AnalyticsEvents.BOT_SUBSCRIBE,o=s.AnalyticsEvents.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(o),t.prev=21,t.next=24,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 24:return t.next=26,GameSDK.player.subscribeBotAsync();case 26:return window.game.analytics.event(r,{success:!0}),t.abrupt("return",!0);case 30:return t.prev=30,t.t0=t.catch(21),window.game.analytics.event(r,{success:!1}),t.abrupt("return",!1);case 34:return t.abrupt("return",!1);case 37:return t.prev=37,t.t1=t.catch(2),t.abrupt("return",!1);case 40:case"end":return t.stop()}}),t,this,[[2,37],[21,30]])})));return function(){return t.apply(this,arguments)}}(),e.matchPlayerAsync=function(){var t=(0,i.default)(a().mark((function t(e,n,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,GameSDK.getSupportedAPIs().includes("checkCanPlayerMatchAsync")){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(t.sent){t.next=9;break}return t.abrupt("return",!1);case 9:return t.next=11,GameSDK.matchPlayerAsync(e,n,i);case 11:return t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n,i){return t.apply(this,arguments)}}(),e.setLoadingProgress=function(t){GameSDK.setLoadingProgress(t)},e.getLocale=function(){return GameSDK.getLocale()||"en"},e.injectTournament=function(){var t=(0,i.default)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!GameCore.Configs.Tournament.UseMock){t.next=8;break}return t.next=4,n.e(357).then(n.bind(n,65));case 4:e=t.sent.default,this.facebook.tournament=new e,t.next=9;break;case 8:this.facebook.tournament=new c;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTournamentAsync=function(){var t=(0,i.default)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.getTournamentAsync();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t}();e.default=l},function(t,e,n){"use strict";n.r(e),n.d(e,{getImageScale:function(){return i}});var i=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1}},,,,function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(13),a={targets:[],duration:400,ease:n(31).default,props:{scale:"-=0.1"}},s=function(t){function e(e){return t.call(this,a,e)||this}return(0,i.default)(e,t),e}(r.default);e.default=s},function(t,e,n){"use strict";n.r(e);var i=n(4),r=n(0),a=n(2).default.DEFAULT,s=a.KEY,o=a.FRAME,h=function(t){function e(e){var n;return(n=t.call(this,e,s,o.BLANK)||this).deathZone=void 0,n.emitter=void 0,n.createDeathZone(),n.createEmitters(),n.setActive(!1),n.setVisible(!1),n.scene.add.existing((0,i.default)(n)),n}(0,r.default)(e,t);var n=e.prototype;return n.createDeathZone=function(){this.deathZone=new Phaser.Geom.Circle},n.createEmitters=function(){var t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:o.BLANK,speed:{min:10,max:1200},scale:{start:1.33*t,end:0},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},deathZone:{source:this.deathZone,type:"onLeave"},lifespan:3e3})},n.explode=function(t,e,n,i){this.setActive(!0),this.setVisible(!0),this.deathZone.radius=i,this.deathZone.setPosition(e,n),this.emitter.explode(t,e,n)},e}(Phaser.GameObjects.Particles.ParticleEmitterManager);e.default=h},function(t,e,n){"use strict";n.r(e);var i=n(6),r=n(18),a=n(4),s=n(0),o=n(11),h=n(36);function c(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u=function(t){function e(e,n){var r;(r=t.call(this,e)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(t,e){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(e),r.isScrollingBack&&r.scrollingBack(e)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,h.debounce)((function(t,e,n){if(r.isEnable){if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=r.lastScrollY.map((function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(t){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var e=r.scene.game.world.getZoomRatio(),n=t.position,i=t.prevPosition,a=(n.y-i.y)/e,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var h=(s-(r.value-r.marginTop))/s;o=Math.min(o,h)}if(r.isReachBottom()&&a<=0){var c=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,c)}var l=a*o,u=r.maxScrollOver*r.height;r.value+l>r.marginTop+u?r.value=r.marginTop+u:r.value+l<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=l,r.callOnScrollEvents(r.value,l)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var t=r.lastScrollY.reduce((function(t,e){return t+e}))/r.lastScrollY.length;r.startScrollSmooth(t*r.scrollSmooth),r.lastScrollY=r.lastScrollY.map((function(){return 0}))}},r.config=(0,i.default)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5},n);var s=n.width,o=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=new Array(3).fill(0),r.setSize(s,o),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,a.default)(r)),r}(0,s.default)(e,t);var n=e.prototype;return n.onScroll=function(t){this.onScrollEvents.push(t)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(t){this.isEnable=t,t?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(t){this.addAt(t),this.objects.add(t);var e=t.y+t.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,e,0),this.updateObjectVisible()},n.addItems=function(t){var e=this;this.addAt(t),this.objects.addMultiple(t);var n=t.map((function(t){return t.y+t.height+e.marginBottom-e.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){return this.objects.getChildren().filter((function(t){return t.active}))},n.createBound=function(t,e,n,i){this.boundTop=this.scene.make.image({key:t,frame:e}),this.boundBottom=this.scene.make.image({key:t,frame:e}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(o.default.PRIORITY),this.boundBottom.setDepth(o.default.PRIORITY);var r=this.width,a=n,s=this.getWorldPosition(),h=s.x,c=s.y;this.boundTop.setDisplaySize(r,a),this.boundBottom.setDisplaySize(r,a),this.boundTop.setY(-this.displayHeight/2+a/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-a/2+c-this.y+1),this.boundTop.setX(h-this.x),this.boundBottom.setX(h-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var t;null==(t=this.maskGraphics)||t.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var e=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-e/2,0-n/2,e,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var t=this.getWorldPosition(),e=t.x,n=t.y;this.maskGraphics.setPosition(e,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(t){this.objects.incY(t),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var t=this.objects.getChildren(),e=0;e<t.length;e++){var n=t[e];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(t,e){for(var n,i=c(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,t,e)}},n.scrollingBack=function(t){var e=(this.scrollingBackTo-this.value)*t*this.scrollingBackRate/1e3;this.value+=e,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,e)},n.startScrollingBack=function(t){this.isScrollingBack=!0,this.scrollingBackTo=t},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(t){var e=this.velocity*t/1e3;this.value+=e;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*t/1e3,Math.abs(this.velocity)<this.acceleration*t/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,e)},n.startScrollSmooth=function(t){this.isScrollingSmooth=!0,t&&(t*this.velocity>0?this.velocity+=t:this.velocity=t)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,r.default)(e,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(t){var e=t-this._value;this._value=t,this.updateObject(e)}}]),e}(Phaser.GameObjects.Container);e.default=u},,,,,,,,,function(t,e,n){"use strict";n.r(e);n(28);var i=function(t,e){return void 0===e&&(e=1),Array.from({length:Math.ceil(t.length/e)},(function(n,i){return t.slice(i*e,i*e+e)}))},r=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}},a=function(t,e,n){return n.indexOf(t)===e&&null!==t&&void 0!==t},s=function(t){return t.filter(a)},o={chunk:i,difference:function(t,e){return t.filter((function(t){return!e.includes(t)}))},shuffle:r,unique:s},h=n(24),c=n.n(h),l=c()((function(t,e){if("string"===typeof t){var n=e[t.toLowerCase()];if("string"===typeof n)return n}return"?"})),u=c()((function(t){for(var e=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(e=i.exec(t));)n.push(e[1]);return n})),d=c()((function(t){for(var e=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(e=i.exec(t));){var r=e[0];if(r.length>=2){var a=r.length,s=r.slice(0,a-1),o=r[a-1],h=new Array(+s).fill(o);n.push.apply(n,h)}else n.push(r)}return n})),f=function(t,e){var n=t,i=GameCore.Utils.Object.invert(e),r={},a=0,s=0;return u(n).forEach((function(t){a=0,s++,r[s]||(r[s]={}),d(t).forEach((function(t){a++,r[s][a]=l(t,i)}))})),r},p=c()((function(t,e){var n=e[t];return"string"===typeof n?""+n.toUpperCase():"?"})),m=function t(e,n,i){void 0===i&&(i=!1);var r="";if(!GameCore.Utils.Valid.isObject(e))return r;var a="",s=1;for(var o in e)if(GameCore.Utils.Object.hasOwn(e,o)){var h=e[o];if(GameCore.Utils.Valid.isObject(h))r+=":"+t(h,n,!0);else if(GameCore.Utils.Valid.isString(h)){var c=p(h,n);c===a?(s++,r=r.slice(0,-2)):s=1,r+=""+s+c,a=c}}return r=r.replace(/1([A-Z])/g,"$1")},g=function(t){try{return atob(t)}catch(e){return""}},v=function(t){try{return JSON.parse(t)}catch(e){return null}},y=function(t){try{return JSON.stringify(t,null,0)}catch(e){return""}},x=function(t){return v(y(t))},b=function(t){var e="object"===typeof t||"function"===typeof t,n=Array.isArray(t);return null!==t&&e&&!n},E=function(t){return void 0===t||null===t},A=function t(e){if(!b(e))return e;for(var n in e){E(e[n])&&delete e[n];var i=e[n];b(i)&&(e[n]=t(i))}return e},w=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},S=function(t){var e={};return Object.keys(t).forEach((function(n){if(w(t,n)){var i=t[n];"string"===typeof i&&(e[i]=n)}})),e},M=function(t,e){if(!Array.isArray(t))return{};var n={};return t.forEach((function(t){if(w(t,e)){var i=t[e];"string"===typeof i&&(n[i]=t)}})),n},T=function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e},C=function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",r=t;void 0!=e&&(r-=e.length,i+=e);for(var a=0;a<r;a++){var s=Math.floor(Math.random()*n.length);i+=n.charAt(s)}return i},I=function(t){var e=t.scene,n=t.key,i=t.newKey,r=e.textures.get(n).getSourceImage();if(!r)return!1;var a=Math.min(r.width,r.height);i||e.textures.removeKey(n);var s=e.textures.createCanvas(i||n,a,a),o=s.context;return o.beginPath(),o.arc(a/2,a/2,a/2,0,2*Math.PI,!1),o.clip(),s.draw((r.width-a)/2,(r.height-a)/2,r),!0},P=function(t){var e=t.scene,n=t.key,i=t.newKey,r=t.radius,a=t.width,s=t.height,o=e.textures.get(n).getSourceImage();if(!o)return!1;a||(a=o.width),s||(s=o.height),i||e.textures.removeKey(n);var h=e.textures.createCanvas(i||n,a,s),c=h.context,l=Math.min(a,s)/100*r/2;return c.beginPath(),c.moveTo(0+l,0),c.lineTo(0+a-l,0),c.quadraticCurveTo(0+a,0,0+a,0+l),c.lineTo(0+a,0+s-l),c.quadraticCurveTo(0+a,0+s,0+a-l,0+s),c.lineTo(0+l,0+s),c.quadraticCurveTo(0,0+s,0,0+s-l),c.lineTo(0,0+l),c.quadraticCurveTo(0,0,0+l,0),c.closePath(),c.clip(),h.draw(0,0,o),!0},k=function(t){if(t.indexOf(".")<0)return t;for(var e=t.length-1;e>=0;e--){if("."==t[e])return t.substring(0,e);if("0"!=t[e])return t.substring(0,e+1)}return t},R=function(t,e){var n=e||{},i=n.fractionalDigits,r=void 0===i?0:i,a=n.startAbbreviate,s=void 0===a?1e3:a,o=n.abbreviateStep,h=void 0===o?3:o,c=n.maxLength,l=void 0===c?-1:c,u=n.removeLastZero,d=void 0===u||u,f=n.suffixes,p=void 0===f?["","k","m","b","t","q"]:f,m=-1===l?99999999:l;if(t>=s){var g=Math.floor(t/Math.pow(10,h)),v=Math.floor((g.toString().length-1)/h)+1,y=(t/Math.pow(Math.pow(10,h),v)).toFixed(r),x=m-p[v].length,b=y.substring(0,x);return(d?k(b):b)+p[v]}var E=t.toFixed(r),A=m-p[0].length,w=E.substring(0,A);return d?k(w):w+p[0]},L={Array:o,Hash:{decodeMap:f,encodeMap:m,hashToString:g,stringToHash:function(t){try{return btoa(t)}catch(e){return""}}},Json:{clone:x,decode:v,encode:y},Object:{clear:A,hasOwn:w,invert:S,keyBy:M},String:{capitalize:function(t){return t?t[0].toUpperCase()+t.slice(1):t},hashCode:T,params:function(t){return Object.keys(t).reduce((function(e,n){var i=t[n];return void 0!==i&&e.push(n+"="+i),e}),[]).join("&")},toCamelCase:function(t){var e=t.replace(/[-_\s.]+(.)?/g,(function(t,e){return e?e.toUpperCase():""}));return e.substr(0,1).toLowerCase()+e.substr(1)},toUpperCamelCase:function(t){var e=t.replace(/[-_\s.]+(.)?/g,(function(t,e){return e?e.toUpperCase():""}));return e.substr(0,1).toUpperCase()+e.substr(1)},randomColor:function(t){void 0===t&&(t="0x");for(var e=t,n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},random:C,removeDiacritics:function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(t){return"\u0111"===t?"d":"D"}))},getShortName:function(t,e){var n=t.split(" "),i=(n.length<=1?[].concat(n):[n[0],n.pop()]).join(" "),r=i.lastIndexOf(" ")||0,a=r>=0?r:e;return(i.length>e?i.substring(0,a):i).substring(0,e)},generateObjectId:function(t){void 0===t&&(t=16);var e=function(e){return Math.floor(e).toString(t)};return e(Date.now()/1e3)+" ".repeat(t).replace(/./g,(function(){return e(Math.random()*t)}))}},Valid:{isBoolean:function(t){return"boolean"===typeof t},isDebugger:function(){return false},isFunction:function(t){return"function"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:b,isPropertyKey:function(t){return["string","number","symbol"].indexOf(typeof t)>-1},isString:function(t){return"string"===typeof t},isValueChangeAsync:function(t,e,n){var i=n||{},r=i.timeout,a=void 0===r?1e3:r,s=i.checkInterval,o=void 0===s?100:s;return new Promise((function(n){var i=setInterval((function(){("function"===typeof t?t():t)===("function"===typeof e?e():e)&&(clearInterval(i),n(!0))}),o);a>0&&setTimeout((function(){clearInterval(i),n(!1)}),a)}))}},Image:{drawCircle:I,drawBorder:P},Number:{toAbbreviatedString:R,padStart:function(t,e,n){void 0===n&&(n="0");for(var i=t.toString(),r=i.length,a=0;a<e-r;a++)i=n+i;return i},padEnd:function(t,e,n){void 0===n&&(n="0");for(var i=t.toString(),r=i.length,a=0;a<e-r;a++)i+=n;return i}},Device:{isDesktop:function(){var t=navigator.userAgent;return/Windows|Mac OS/i.test(t)&&!/like Mac OS/.test(t)},isMobile:function(){var t=navigator.userAgent;return/Android|iP[ao]d|iPhone/i.test(t)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}}},O=n(6),_=n(19),D={AppId:"577934723914393",Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed"]}}},PlayerDataStoreUsingApi:!1,LeadersBoard:{Name:"GlobalLeaderboard",LeaderboardId:null,UseMock:!1},Ads:{Enabled:!0,Mockup:{Enable:!1},InterstitialAdOptions:{secondsFirstTime:120,secondsBetweenAds:120,showWhenStartGame:!0},BannerAdOptions:[{placementId:"R-A-1754815-24",secondsReload:60,platform:"DESKTOP"},{placementId:"R-A-1754815-25",secondsReload:60,platform:"MOBILE"}]}},B={ENV:"production",LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1}},N={ENV:"development",AppId:"577934723914393",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",PlayerDataStoreUsingApi:!0,Level:{url:"./assets/levels/",maxLevel:5e3,alwaysLoadNew:!1,retryCount:3,retryDelay:2e3},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{UndoCount:5,UndoClaim:5,HintCount:2,HintClaim:2,EnableVibrate:!0},Tutorial:{LevelTutorial:[1]},PlayerDataStore:"playerData",Game:{ForcePixelRatio:0},Debugger:{ShowInspector:!0,ShowMonitoring:!0,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyCountItems:{ForceNewDay:!1},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"62c2b488b2198c615726a99f",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,InterstitialPlacementId:"",VideoRewardsPlacementId:"",BannerPlacementId:"",BannerReloadPeriod:60,BannerHeight:{Desktop:70,Mobile:50},Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{showWhenStartGame:!1,secondsFirstTime:90,secondsBetweenAds:180},BannerAdOptions:[]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GameAnalytics:{key:"",secret:"",consoleLog:!1},GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed"]}}}};N=(0,_.merge)((0,O.default)({},N),B);var F=N=(0,_.merge)((0,O.default)({},N),D),U=function(t){return function(e){try{var n=window.game,i=e.module;if(n.scene.getScenes(!0)[0].scene.key!==t)return;var r=i.default;n.scene.remove(t),n.scene.add(t,r,!0),n.scene.bringToTop(n.globalScene)}catch(s){var a;null==(a=void 0)||a.invalidate()}}},G=n(36),V=!1,Y=function t(e,n,i){n.forEach((function(n){if(n.name){var r=null;if(r=i?i.getByName(n.name):e.children.getByName(n.name)){if("Container"===n.type){var a=r,s=n.getAll();if(t(e,s,a),!a.hotContainer)return}var o=Reflect.ownKeys(n),h=["_events","_sysEvents","input","localTransform","list","displayList"],c=o.filter((function(t){if("string"!==typeof t)return!1;if(h.indexOf(t)>=0)return!1;if(!r)return!1;var e=Reflect.get(n,t);return!(e instanceof Function)&&(!(e instanceof Phaser.Scene)&&(!(e instanceof Phaser.GameObjects.Group)&&(!(e instanceof Phaser.GameObjects.GameObject)&&e===Reflect.get(r,t))))}));c.length<1||c.forEach((function(t){if(r){var e=Reflect.get(n,t);Reflect.get(r,t),Reflect.set(r,t,e)}}))}}}))},z=function(t,e){return void 0===e&&(e=V),function(n){try{var i=window.game,r=n.module,a=i.scene.getScenes(!0)[0];if(a.scene.key!==t)return;V=e;var s=r.default,o=t+"-draft";i.scene.remove(o);var h=i.scene.add(o,s);a=i.scene.getScene(t),h.events.once(Phaser.Scenes.Events.RENDER,(0,G.debounce)((function(){var t=h.children.getAll();Y(a,t),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(a),i.scene.bringToTop(i.globalScene)}catch(c){}}},W={Configs:F,Utils:L,LiveUpdate:{Scene:U,SceneObjects:z}};window.GameCore=W;var H=n(9),X=n(25),K=n(3),j=n(0),q=n(1),Z=n.n(q),Q=(n(54),n(37)),J=function(){function t(t){this.game=void 0,this.game=t}var e=t.prototype;return e.addKillRevive=function(){var t=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Group,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(e){e.prototype.kill=t.kill,e.prototype.revive=t.revive}))},e.addSetWorldSize=function(){var t=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(e){e.prototype.setWorldSize=t.setWorldSize}))},e.addSetWorldSizeForContainer=function(){var t=this;[Phaser.GameObjects.Container].forEach((function(e){e.prototype.setWorldSize=t.setWorldSizeForContainer}))},e.addGetWorldPosition=function(){var t=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(e){e.prototype.getWorldPosition=t.getWorldPosition}))},e.addDrawDebugBox=function(){var t=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(e){e.prototype.drawDebugBox=t.drawDebugBox}))},e.addHighQuality=function(){var t=this;[Phaser.GameObjects.Text].forEach((function(e){e.prototype.setHighQuality=t.setHighQuality}))},e.kill=function(){this.setActive(!1),this.setVisible(!1)},e.revive=function(){this.setActive(!0),this.setVisible(!0)},e.setWorldSize=function(t,e){this.setSize(t,e),this.setDisplaySize(t,e)},e.setWorldSizeForContainer=function(t,e,n){void 0===n&&(n=2),this.setSize(t*n,e*n),this.setDisplaySize(t,e)},e.getWorldPosition=function(){var t=this.getWorldTransformMatrix().decomposeMatrix();return{x:t.translateX,y:t.translateY}},e.drawDebugBox=function(t,e){var n=this.x,i=this.y,r=this.width,a=this.height,s=this.depth,o=this.originX,h=this.originY,c=this.scene.add.rectangle(n,i,r,a,t,e);c.setName("Debug Box"),c.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(h)&&c.setOrigin(o,h),c},e.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},t}(),$=J,tt=GameCore.Configs.Ads.Mockup.GiphyApiKey,et=function(){function t(){}return t.loadBannerAdAsync=function(t,e){var n=this;return new Promise((function(i,r){window.yaContextCb=window.yaContextCb||[];var a=document.getElementById("yandexAdContextScript");a||((a=document.createElement("script")).src="",a.async=!0,document.head.appendChild(a));var s="yandex_rtb_wrapper_"+t,o="yandex_rtb_"+t,h=document.getElementById(s);if(!h){(h=document.createElement("div")).id=s,document.body.appendChild(h),h.style.display="block",h.style.position="fixed",h.style.zIndex="10000";var c=document.createElement("div");c.id=o,c.classList.add("yandex-adaptive"),c.style.display="block",h.appendChild(c)}n.setBannerAdSize(t,e||{}),n.getAdContentAsync().then((function(t){var e=document.getElementById("mock-banner-ads");e||((e=document.createElement("img")).id="mock-banner-ads",e.style.cssText="height: 100%; width: 100%; background-color: white; position: absolute;",h.childNodes[0].appendChild(e)),e.src=t,i()})).catch(r)}))},t.setBannerAdSize=function(t,e){var n=e||{},i=n.bannerHeight,r=void 0===i?50:i,a=n.bannerWidth,s=void 0===a?320:a,o="yandex_rtb_wrapper_"+t,h="yandex_rtb_"+t,c=document.getElementById(o),l=document.getElementById(h);if(c&&l){var u=document.body,d=(u.clientHeight,u.clientWidth);c.style.top="",c.style.bottom="0px",c.style.left=(d-s)/2+"px",c.style.margin="auto",c.style.height=r+"px",c.style.width=s+"px",l.style.height=r+"px",l.style.width=s+"px"}},t.hideBannerAdAsync=function(){return new Promise((function(t){document.querySelectorAll('div[id^="yandex_rtb_wrapper_"]').forEach((function(t){var e=t;e.style.bottom="",e.style.top="-"+e.style.height})),t()}))},t.getAdContentAsync=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="https://api.giphy.com/v1/gifs/trending?api_key="+tt+"&rate=pg&bundle=low_bandwidth",t.next=3,fetch(e,{method:"GET"});case 3:return n=t.sent,t.next=6,n.json();case 6:if(i=t.sent,GameCore.Utils.Valid.isObject(i)){t.next=9;break}return t.abrupt("return","");case 9:return r=i.data,a=Math.floor(Math.random()*r.length),t.abrupt("return",r[a].images.downsized.url);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t}();et.bannerAdOptions={};var nt,it={LOADED:"loaded",DISPLAYED:"displayed"};!function(t){t.IDLE="idle",t.LOADING="loading",t.FILLED="filled",t.SHOWING="showing"}(nt||(nt={}));var rt,at=nt;!function(t){t.REWARDED="rewarded",t.INTERSTITIAL="interstitial"}(rt||(rt={}));var st=rt,ot=n(8),ht=function(t){function e(e,n){var i;return(i=t.call(this,n)||this).code=void 0,i.code=e,i.message=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),ct=ht,lt=function(t){this.type=void 0,this.status=void 0,this.type=t,this.status=at.IDLE};GameCore.Ads={Types:st,Status:at,Events:it,AdError:ct,AdInstance:lt};var ut=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).events=void 0,e.enabled=void 0,e.config=void 0,e.lastAdShownTime=void 0,e.intervalBannerAd=void 0,e.interstitial=void 0,e.rewardedVideo=void 0,e.isShowingBannerAd=!1,e.reloadBannerAdIntervals=void 0,e.bannerAdSizeOptions=void 0,e.showingBannerAd={},e.updateSizeBannerAd=function(){try{var t=e.config.bannerAdOptions,n=e.getCorrectBannerAdSizeOption(e.bannerAdSizeOptions);t.forEach((function(t){e.showingBannerAd[t.placementId]&&(GameCore.Configs.Ads.Mockup.Enable?et.setBannerAdSize(t.placementId,n):GameSDK.setBannerAdSize(t.placementId,n))}))}catch(i){}},e}(0,j.default)(e,t);var n=e.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.lastAdShownTime=0,this.addEventUpdateSizeBannerAd()},n.configure=function(t,e){this.enabled=e.enabled,this.config=e,this.setAdInstance(t)},n.setAdInstance=function(t){var e=this.config,n=e.interstitialPID,i=e.rewardedVideoPID;this.interstitial=new t(st.INTERSTITIAL,n),this.rewardedVideo=new t(st.REWARDED,i)},n.preloadInterstitialAdAsync=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.preloadAdAsync(st.INTERSTITIAL);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canbeShowInterstitialAd()){t.next=2;break}throw new ct("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return t.next=4,this.showAdAsync(st.INTERSTITIAL);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.preloadAdAsync(st.REWARDED);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.showAdAsync(st.REWARDED);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.preloadAdAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.enabled){t.next=2;break}throw new ct("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(e))){t.next=5;break}throw new ct("AD_INSTANCE_NOT_INITIALTED","The instance ads not yet initiated");case 5:return t.next=7,n.loadAsync();case 7:this.events.emit(it.LOADED,e);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.showAdAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.enabled){t.next=2;break}throw new ct("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(e))){t.next=5;break}throw new ct("AD_INSTANCE_NOT_INITIALTED","The instance ads not yet initiated");case 5:return this.lastAdShownTime=window.performance.now()/1e3,t.next=8,n.showAsync();case 8:this.events.emit(it.DISPLAYED,e);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getAdStatus=function(t){var e=this.getAdInstanceByType(t);return e?e.getStatus():null},n.getAdInstanceByType=function(t){switch(t){case st.INTERSTITIAL:return this.interstitial;case st.REWARDED:return this.rewardedVideo;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var t=window.performance.now()/1e3,e=this.config.interstitialAdOptions,n=e.secondsFirstTime,i=e.secondsBetweenAds,r=t-this.lastAdShownTime;return this.lastAdShownTime>0?r>i:r>n},n.showBannerAdAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},n=this.config.bannerAdOptions,i=GameSDK.getPlatform(),r="WEB"==i,window.addEventListener,n.forEach((function(t){var n=t.platform;if("ALL"==n||"DESKTOP"==n&&r||"MOBILE"==n&&!r){a.bannerAdSizeOptions=e||{};var i=t.placementId,s=t.secondsReload;if(i&&""!=i){if(s>0){if(a.reloadBannerAdIntervals[i])return;return a.loadBannerAdAsync(i),void(a.reloadBannerAdIntervals[i]=setInterval((function(){a.loadBannerAdAsync(i)}),1e3*s))}a.loadBannerAdAsync(i)}}})),t.abrupt("return");case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getCorrectBannerAdSizeOption=function(t){var e=this.game.canvas.offsetWidth,n=t||{},i=n.bannerWidth,r=void 0===i?0:i,a=n.bannerHeight,s=void 0===a?0:a;if(this.game.world){var o=this.game.world,h=o.getZoomRatio(),c=o.getPixelRatio();r=r?o.getPhysicPixels(r,h/c):e,s=s?o.getPhysicPixels(s,h/c):50}return{bannerWidth:r,bannerHeight:s}},n.loadBannerAdAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.isShowingBannerAd=!0,n=GameCore.Configs.Ads,i=this.getCorrectBannerAdSizeOption(this.bannerAdSizeOptions),!n.Mockup.Enable){t.next=9;break}return t.next=7,et.loadBannerAdAsync(e,i);case 7:t.next=11;break;case 9:return t.next=11,GameSDK.loadBannerAdAsync(e,i);case 11:this.showingBannerAd[e]=!0,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),n.addEventUpdateSizeBannerAd=function(){window.addEventListener("resize",this.updateSizeBannerAd)},n.hideBannerAdAsync=function(){var t=(0,K.default)(Z().mark((function t(){var e=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.config.bannerAdOptions.forEach((function(t){var n=t.placementId,i=e.reloadBannerAdIntervals[n];i&&(clearInterval(i),e.reloadBannerAdIntervals[n]=null),e.showingBannerAd[n]=!1})),t.prev=2,!GameCore.Configs.Ads.Mockup.Enable){t.next=9;break}return t.next=7,et.hideBannerAdAsync();case 7:t.next=11;break;case 9:return t.next=11,GameSDK.hideBannerAdAsync();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2);case 16:case"end":return t.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),n.getBannerHeight=function(){var t=this.getCorrectBannerAdSizeOption(this.bannerAdSizeOptions);if(this.game.world){var e=this.game.world,n=e.getZoomRatio(),i=e.getPixelRatio();return this.game.world.getPhysicPixels(t.bannerHeight,i/n)}return 50},e}(Phaser.Plugins.BasePlugin),dt=ut,ft=function(){function t(t,e,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=t,this.color=n||"#FFF",this.options=e,this.selfLog=!0}var e=t.prototype;return e.event=function(t,e,n){this.processEvent(t,e,n),this.selfLog},e.pageview=function(t){var e=this.getPageByKey(t);this.processPageView(e),this.selfLog},e.setTrafficSource=function(t){this.processTrafficSource(t),this.selfLog},e.levelStart=function(t,e,n){this.processLevelStart(t,e,n),this.selfLog},e.levelFail=function(t,e,n){this.processLevelFail(t,e,n),this.selfLog},e.levelRescue=function(t,e,n){this.processLevelRescue(t,e,n),this.selfLog},e.levelComplete=function(t,e,n){this.processLevelComplete(t,e,n),this.selfLog},e.showInterstitialAd=function(t){this.processShowInterstitialAd(t),this.selfLog},e.showRewardedVideoAd=function(t){this.processShowRewardedVideoAd(t),this.selfLog},e.receiveReward=function(t){this.processReceiveReward(t),this.selfLog},e.showAdFail=function(t,e,n){this.processShowAdFail(t,e,n),this.selfLog},e.getPageByKey=function(t){var e=t.replace(/_/g,"-");return e=e.toLowerCase()},e.processLevelStart=function(t,e,n){},e.processLevelFail=function(t,e,n){},e.processLevelRescue=function(t,e,n){},e.processLevelComplete=function(t,e,n){},e.processShowInterstitialAd=function(t){},e.processShowRewardedVideoAd=function(t){},e.processReceiveReward=function(t){},e.processShowAdFail=function(t,e,n){},t}(),pt=ft;GameCore.Analytics={BaseAnalytics:pt};var mt=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).analytics=void 0,e.pageview=function(t){e.isActive()&&e.analytics.forEach((function(e){e.pageview(t)}))},e}(0,j.default)(e,t);var n=e.prototype;return n.init=function(){this.analytics=[]},n.add=function(t){this.analytics.push(t)},n.setTrafficSource=function(t){this.isActive()&&this.analytics.forEach((function(e){e.setTrafficSource(t)}))},n.event=function(t,e,n){this.isActive()&&this.analytics.forEach((function(i){i.event(t,e,n)}))},n.levelStart=function(t,e,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(t,e,n)}))},n.levelRescue=function(t,e,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(t,e,n)}))},n.levelFail=function(t,e,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(t,e,n)}))},n.levelComplete=function(t,e,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(t,e,n)}))},n.showInterstitialAd=function(t){this.isActive()&&this.analytics.forEach((function(e){e.showInterstitialAd(t)}))},n.showRewardedVideoAd=function(t){this.isActive()&&this.analytics.forEach((function(e){e.showRewardedVideoAd(t)}))},n.receiveReward=function(t){this.isActive()&&this.analytics.forEach((function(e){e.receiveReward(t)}))},n.showAdFail=function(t,e,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(t,e,n)}))},n.isActive=function(){return this.analytics.length>=1},e}(Phaser.Plugins.BasePlugin),gt=mt,vt=function(){function t(t,e){var n=this;this.name=void 0,this.game=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=e,this.game=t,this.markers={},this.audio=this.game.sound.add(this.name)}var e=t.prototype;return e.play=function(t,e){var n,i,r=(0,O.default)({volume:this.volume},e||{});r.volume!==this.volume&&(r.volume*=this.volume),(null==(n=this.audio)?void 0:n.seek)>0?this.audio.resume():null==(i=this.audio)||i.play(t,r)},e.pause=function(t){var e;null==(e=this.audio)||e.pause()},e.stop=function(t){var e;null==(e=this.audio)||e.stop()},e.setVolume=function(t){this.volume=t},t}(),yt=vt,xt=function(){function t(t,e){var n=this;this.keys=void 0,this.game=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.keys=e,this.game=t,this.markers={}}var e=t.prototype;return e.play=function(t,e){var n,i=(0,O.default)({volume:this.volume},e||{});i.volume!==this.volume&&(i.volume*=this.volume),this.createMaker(t),null==(n=this.markers[t])||n.play()},e.pause=function(t){var e;null==(e=this.markers[t])||e.pause()},e.stop=function(t){var e;null==(e=this.markers[t])||e.stop()},e.setVolume=function(t){this.volume=t},e.createMaker=function(t){if(!this.markers[t])try{this.markers[t]=this.game.sound.add(t)}catch(e){}},t}(),bt=xt,Et=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).soundManager=void 0,e.musicManager=void 0,e.isMuteAll=void 0,e.initMusic=function(t){e.musicManager=new yt(e.game,t),e.setMusicVolume(1)},e.initSound=function(t){e.soundManager=new bt(e.game,t),e.setSoundVolume(1)},e}(0,j.default)(e,t);var n=e.prototype;return n.init=function(e){t.prototype.init.call(this,e),this.initSound([])},n.playSound=function(t,e){try{if(!this.soundManager||this.isMuteAll)return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(t,e)}catch(n){}},n.stopSound=function(t){try{this.soundManager.stop(t)}catch(e){}},n.playMusic=function(t){void 0===t&&(t={});try{if(!this.musicManager||this.isMuteAll)return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,O.default)({loop:!0,volume:.2},t))}catch(e){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(t){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(t){}},n.setSoundVolume=function(t){try{if(!this.soundManager)return;this.soundManager.setVolume(t)}catch(e){}},n.setMusicVolume=function(t){try{if(!this.musicManager)return;this.musicManager.setVolume(t)}catch(e){}},n.muteAll=function(){this.isMuteAll=!0,this.setMusicVolume(0),this.setSoundVolume(0)},n.unmuteAll=function(t){void 0===t&&(t=1),this.isMuteAll=!1,this.setMusicVolume(t),this.setSoundVolume(t)},e}(Phaser.Plugins.BasePlugin),At=Et,wt=n(18),St="AUTH_TOKEN_REQUEST",Mt="AUTH_TOKEN_RECEIVED",Tt=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).payload=void 0,i.name="RequestTokenFail",i.message=e||"Request token fail",i.payload=n||{},i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Ct=n(15),It=(0,Ct.createSelector)([function(t){return t.auth.token}],(function(t){return t})),Pt=(0,Ct.createSelector)([function(t){return t.auth.isRequesting}],(function(t){return t})),kt=function(t){return{type:Mt,payload:{token:t}}},Rt=function(t){function e(){return t.apply(this,arguments)||this}(0,j.default)(e,t);var n=e.prototype;return n.requestToken=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game.storage,t.next=3,e.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=window.game.facebook,r=n(),a=It(r),!Pt(r)&&""===a){t.next=7;break}return t.abrupt("return");case 7:return e({type:St,payload:{}}),t.next=10,i.getPlayerToken();case 10:s=t.sent,e(kt(s)),t.next=25;break;case 14:if(t.prev=14,t.t0=t.catch(0),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code"))){t.next=19;break}if("PENDING_REQUEST"!==t.t0.code){t.next=19;break}return t.abrupt("return");case 19:if(e(kt("")),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"message"))){t.next=24;break}if("string"!==typeof t.t0.message){t.next=24;break}return(0,H.sendException)(new Error(t.t0.message)),t.abrupt("return");case 24:(0,H.sendException)(new Tt);case 25:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.getToken=function(){return It(this.state)},(0,wt.default)(e,[{key:"state",get:function(){return this.game.storage.getState()}}]),e}(Phaser.Plugins.BasePlugin),Lt=Rt,Ot=function(t,e){void 0===e&&(e=1);var n=new Image;n.onload=function(){var t,n;t=this.width*e,n=this.height*e,Math.floor(n/2),Math.floor(t/2)},n.src=t},_t=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).width=void 0,e.height=void 0,e.renderOptions=void 0,e.canvas=void 0,e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(t){var e=this,n=Object.keys(t);n.length<1||(n.forEach((function(n){e.scene.load.image(n,t[n])})),this.scene.load.start())},n.capture=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.width,i=e.height,r=e.renderOptions,this.width=n,this.height=i,this.renderOptions=r,this.createCanvas(),t.next=7,this.loadImages();case 7:return this.drawObjects(),t.abrupt("return",this.snapshotFrame());case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var t=this;return new Promise((function(e,n){for(var i in t.renderOptions){var r=t.renderOptions[i],a=r.name,s=r.image;if(s)t.scene.textures.get(a).key!==a&&t.scene.load.image(a,s)}t.scene.load.on(Phaser.Loader.Events.COMPLETE,e),t.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var t=new Error("Load image failed");n(t)})),t.scene.load.start()}))},n.drawObjects=function(){for(var t in this.renderOptions){var e=this.renderOptions[t];switch(e.type){case"text":this.drawText(e);break;case"image":this.drawImage(e)}}},n.drawText=function(t){var e=this.canvas.context,n=t.x,i=t.y,r=t.font,a=t.text,s=t.fillStyle,o=t.lineWidth,h=t.textAlign;e.font=r+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',e.fillStyle=s||"#ffffff",o&&(e.lineWidth=o),h&&(e.textAlign=h),e.fillText(a,n,i)},n.drawImage=function(t){var e=this.canvas.context,n=t.x,i=t.y,r=t.name,a=t.frame,s=t.width,o=t.height,h=t.fallbackWithImage,c=this.scene.textures.get(r),l=c.getSourceImage(a);"__MISSING"===c.key&&h&&(l=(c=this.scene.textures.get(h)).getSourceImage()),e.drawImage(l,n,i,s,o)},n.snapshotFrame=function(){var t=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&Ot(t),t},e}(Phaser.Plugins.ScenePlugin),Dt=_t,Bt={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},Nt=function(t){try{var e=localStorage.getItem(t);return null===e?null:GameCore.Utils.Json.decode(e)}catch(n){return null}},Ft=function(t,e){try{var n=Nt(t),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var r=GameCore.Utils.Json.clone(e);if(!GameCore.Utils.Valid.isObject(r))return!1;var a=GameCore.Utils.Object.clear(r),s=(0,_.merge)(i,a),o=GameCore.Utils.Json.encode(s);return localStorage.setItem(t,o),!0}catch(h){return!1}},Ut=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="BadRequest",i.message=e||"This request is bad",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Gt=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="RequestTimeout",i.message=e||"This request is timeout",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Vt=n(20),Yt=GameCore.Configs,zt=Yt.AppId,Wt=Yt.Network,Ht=function(t){if(!t.ok)throw new Ut(null,{response:t})},Xt=function(){var t=window.game.auth.getToken();return{token:t,timeout:Wt.Timeout,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}},Kt=function(t,e,n,i){return(0,K.default)(Z().mark((function r(){var a,s,o,h,c;return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=t+"/apps/"+zt+"/"+e,s=new AbortController,n.signal=s.signal,o=setTimeout((function(){s.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=JSON.stringify(i)),r.next=8,fetch(a,n);case 8:return h=r.sent,clearTimeout(o),Ht(h),r.next=13,h.json();case 13:if(r.t0=r.sent,r.t0){r.next=16;break}r.t0={};case 16:return c=r.t0,r.abrupt("return",c);case 20:if(r.prev=20,r.t1=r.catch(0),!(r.t1 instanceof Ut)){r.next=24;break}return r.abrupt("return",null);case 24:if(!(r.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(r.t1,"name"))){r.next=27;break}if("AbortError"!==r.t1.name){r.next=27;break}throw new Gt(null);case 27:throw r.t1;case 28:case"end":return r.stop()}}),r,null,[[0,20]])})))},jt=function(){var t=(0,K.default)(Z().mark((function t(e,n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",e());case 4:if(t.prev=4,t.t0=t.catch(0),!(t.t0 instanceof Gt&&n>0)){t.next=18;break}return t.prev=7,t.next=10,(0,Vt.sleepAsync)(600);case 10:return t.next=12,jt(e,n-1);case 12:return t.abrupt("return",t.sent);case 15:return t.prev=15,t.t1=t.catch(7),t.abrupt("return",{});case 18:if(!(t.t0 instanceof Gt)){t.next=20;break}return t.abrupt("return",{});case 20:return t.abrupt("return",{});case 22:case"end":return t.stop()}}),t,null,[[0,4],[7,15]])})));return function(e,n){return t.apply(this,arguments)}}(),qt=function(){var t=(0,K.default)(Z().mark((function t(e,n,i,r){var a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=Wt.Retries),t.prev=2,a=(0,O.default)({},Xt(),n,{method:"GET"}),s=Kt(i,e,a),t.next=7,jt(s,r);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n,i,r){return t.apply(this,arguments)}}(),Zt=function(){var t=(0,K.default)(Z().mark((function t(e,n,i,r,a){var s,o;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===i&&(i={}),void 0===a&&(a=Wt.Retries),t.prev=2,s=(0,O.default)({},Xt(),i,{method:"POST"}),o=Kt(r,e,s,n),t.next=7,jt(o,a);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n,i,r,a){return t.apply(this,arguments)}}(),Qt={score:0,settings:(0,O.default)({},Bt),userGuideDisplays:0,customFields:{diamond:300,lastReceiveGift:0}},Jt=GameCore.Configs,$t=Jt.ApiHost,te=Jt.PlayerDataStoreUsingApi,ee=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!te){t.next=2;break}return t.abrupt("return",ne(e));case 2:return t.abrupt("return",ie(e));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ne=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=GameCore.Utils.String.params(e),t.next=3,qt("players?"+n,{},$t);case 3:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ie=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.player.setDataAsync(e);case 2:return n=Object.keys(Qt).concat(Object.keys(e)),i=n.filter((function(t,e){return n.indexOf(t)===e})),t.next=6,GameSDK.player.getDataAsync(i);case 6:return r=t.sent,t.next=9,GameSDK.player.getStatsAsync();case 9:return a=t.sent,t.abrupt("return",(0,O.default)({},r,a));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),re=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!te){t.next=2;break}return t.abrupt("return",ae(e));case 2:return t.abrupt("return",se());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ae=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt("players/"+e+"/user-guide-displays/inc",{},{},$t);case 2:return n=t.sent,t.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.player.incrementStatsAsync({userGuideDisplays:1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),oe="PLAYER_RECEIVED",he="PLAYER_DATA_UPDATE",ce="PLAYER_SCORE_UPDATE",le="PLAYER_SETTING_UPDATE",ue="PLAYER_CONNECTED_PLAYERS_UPDATE",de=n(26),fe=Bt.sound,pe=Bt.music,me=Bt.vibrate,ge=Bt.language,ve=Bt.theme,ye=function(){function t(t){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var e=t||{},n=e.sound,i=e.music,r=e.vibrate,a=e.language,s=e.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:fe,this.music=GameCore.Utils.Valid.isBoolean(i)?i:pe,this.vibrate=GameCore.Utils.Valid.isBoolean(r)?r:me,this.language=GameCore.Utils.Valid.isString(a)?a:ge,this.theme=GameCore.Utils.Valid.isString(s)?s:ve}return t.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},t}(),xe=ye,be=Qt.userGuideDisplays,Ee=Qt.customFields,Ae=Qt.settings,we=function(){function t(t){this.data=void 0;var e=t.settings,n=t.score,i=t.customFields,r=t.userGuideDisplays,a=GameCore.Utils.Valid.isNumber(n)&&n>0?n:0,s=GameCore.Utils.Valid.isNumber(r)?r:be,o=GameCore.Utils.Valid.isObject(i)?i:Ee,h=Ae;GameCore.Utils.Valid.isObject(e)&&(h=new xe(e).toObject()),this.data={score:a,userGuideDisplays:s,settings:h,customFields:o}}return t.prototype.toObject=function(){return this.data},t}(),Se=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=e||"The name of player data is not supported",i.payload=n||{},i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Me=(0,Ct.createSelector)([function(t){return t.player}],(function(t){return t})),Te=(0,Ct.createSelector)([Me],(function(t){return t.playerId})),Ce=(0,Ct.createSelector)([function(t){return t.player.data}],(function(t){return t})),Ie=(0,Ct.createSelector)([Ce],(function(t){return t.settings})),Pe=(0,Ct.createSelector)([function(t){return t.player.connectedPlayers}],(function(t){return t})),ke=(0,Ct.createSelector)([Pe,function(t,e){return e.limit},function(t,e){return e.offset}],(function(t,e,n){return"number"!==typeof e||"number"!==typeof n?[]:Object.keys(t).slice(n,e+n)||[]})),Re=(0,Ct.createSelector)([Ce],(function(t){return t.score})),Le=(0,Ct.createSelector)([Ce],(function(t){return t.customFields})),Oe=(0,Ct.createSelector)([Le],(function(t){return(null==t?void 0:t.level)||1})),_e=((0,Ct.createSelector)([Le],(function(t){return null==t?void 0:t.diamond})),GameCore.Configs),De=_e.AppId,Be=_e.LanguageSupport,Ne=_e.ThemeSupport,Fe=_e.PlayerDataStore,Ue=function(t){return{type:ue,payload:{connectedPlayers:t}}},Ge=function(t,e){return function(n,i){try{var r,a=i(),s=Ie(a);n({type:le,payload:{name:t,value:e}});var o={settings:(0,O.default)({},s,(r={},r[t]=e,r))};Ft(Fe,o),ee(o)}catch(h){(0,H.sendException)(h)}}},Ve=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s={customFields:(a={},a[t]=e,a)},n.next=4,i(ze(s));case 4:o=r(),h=Ce(o),ee(h),n.next=14;break;case 9:if(n.prev=9,n.t0=n.catch(0),!(n.t0 instanceof Se)){n.next=13;break}return n.abrupt("return");case 13:(0,H.sendException)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(t,e){return n.apply(this,arguments)}}()},Ye=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n,i){var r,a,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={customFields:t},e.next=4,n(ze(r));case 4:a=i(),s=Ce(a),ee(s),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0 instanceof Se)){e.next=13;break}return e.abrupt("return");case 13:(0,H.sendException)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},ze=function(t){return function(e){try{e({type:he,payload:{data:t}}),Ft(Fe,t)}catch(n){(0,H.sendException)(n)}}},We=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n,i){var r,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({type:ce,payload:{score:t}});case 3:ee({score:t}),r=i(),a=Ce(r),Ft(Fe,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,H.sendException)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},He=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n,i){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={customFields:t},e.next=4,n(ze(r));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof Se)){e.next=10;break}return e.abrupt("return");case 10:(0,H.sendException)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},Xe=function(t){function e(){return t.apply(this,arguments)||this}(0,j.default)(e,t);var n=e.prototype;return n.incUserGuideDisplays=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game.storage,t.next=3,e.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game.facebook,e(ze({userGuideDisplays:1})),r=n(),a=Te(r),t.next=7,re(a);case 7:i.data.set("userGuideDisplays",1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.receiveData=function(t,e){this.game.storage.dispatch(function(t,e){return function(n){var i=t.playerId,r=t.name,a=t.photo,s=t.locale;n({type:oe,payload:{playerId:i,name:r,photo:a,locale:s,data:e||{}}})}}(t,e))},n.updateData=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game.storage,t.next=3,e.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b,E,A,w,S;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=n(),r=Me(i),a=r.playerId,s=r.name,o=r.photo,h=r.locale,t.next=6,ee({appId:De,playerId:a,name:s,photo:o,locale:h});case 6:if(c=t.sent,GameCore.Utils.Valid.isObject(c)){t.next=9;break}return t.abrupt("return");case 9:if(c.playerId===a){t.next=11;break}return t.abrupt("return");case 11:l=Ie(i),u=l.theme,d=l.sound,f=l.music,p=l.vibrate,m=l.language,g=new we(c).toObject(),v=g.settings,y=v.theme,x=v.music,b=v.sound,E=v.vibrate,A=v.language,w=m in Be,S=u in Ne,m===A&&w||(g.settings.language=A),!0===x&&f!==x&&(g.settings.music=x),!0===b&&d!==b&&(g.settings.sound=b),!0===E&&p!==E&&(g.settings.vibrate=E),u===y&&S||(g.settings.theme=y),e(ze(g)),!0===g.settings.music&&window.game.audio.playMusic(),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 29:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.setScore=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.game.storage,t.next=3,n.dispatch(We(e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.setSetting=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.game.storage,t.next=3,i.dispatch(Ge(e,n));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.setCustomData=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.game.storage,t.next=3,i.dispatch(Ve(e,n));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.updateCustomFields=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.game.storage,t.next=3,n.dispatch(Ye(e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game.storage,t.next=3,e.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=window.game.facebook,t.next=4,new Promise((function(t,e){n.once("players",(function(e){t(e)})),n.once("playersfail",(function(){return e([])})),n.getPlayers()}));case 4:if(i=t.sent,r=function(t){return!!t},a=i.map((function(t){var e=t.getID(),n=t.getName(),i=t.getPhoto();return e&&n&&i?new de.default(e,n,i).toObject():null})).filter(r),!(a.length<1)){t.next=9;break}return t.abrupt("return");case 9:e(Ue(a)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.game.storage,t.next=3,n.dispatch(Ue(e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getPlayer=function(){return Me(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(t){var e=this.getPlayerSettings();return"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:GameCore.Utils.Object.hasOwn(Bt,t)?Bt[t]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getCoins=function(){var t=this.getCustomData("coin");return GameCore.Utils.Valid.isNumber(t)?t:0},n.getDiamond=function(){var t=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(t)?t:0},n.getBestScore=function(){return Re(this.state)},n.getCustomData=function(t){var e=Le(this.state);return GameCore.Utils.Valid.isObject(e)&&GameCore.Utils.Object.hasOwn(e,t)?e[t]:null},n.getConnectedPlayers=function(){return Pe(this.state)},n.getConnectedPlayerIds=function(t,e){return ke(this.state,{limit:t,offset:e})},n.getLevel=function(){return Oe(this.state)},n.getCountItems=function(){return this.getCustomData("countItems")},(0,wt.default)(e,[{key:"state",get:function(){return this.game.storage.getState()}}]),e}(Phaser.Plugins.BasePlugin),Ke=Xe,je=GameCore.Configs.ApiHost,qe=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=GameCore.Utils.String.params(e),t.next=3,qt("players?"+n,{},je);case 3:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ze="PROFILES_DATA_UPDATE",Qe=(0,Ct.createSelector)([function(t){return t.profile.data}],(function(t){return t})),Je=(0,Ct.createSelector)([function(t){return t.profile.profileIds}],(function(t){return t})),$e=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n,i){var r,a,s,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=i(),a=Je(r),!((s=GameCore.Utils.Array.difference(t,a)).length<1)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,qe({playerIds:s});case 8:o=e.sent,n({type:Ze,payload:{data:o}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,H.sendException)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()},tn=function(t){function e(){return t.apply(this,arguments)||this}(0,j.default)(e,t);var n=e.prototype;return n.requestProfiles=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.game.storage,t.next=3,n.dispatch($e(e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getProfiles=function(){return Qe(this.state)},(0,wt.default)(e,[{key:"state",get:function(){return this.game.storage.getState()}}]),e}(Phaser.Plugins.BasePlugin),en=tn,nn=function(t){function e(){return t.apply(this,arguments)||this}return(0,j.default)(e,t),e.prototype.emit=function(e,n){return t.prototype.emit.call(this,e,n)},e}(Phaser.Events.EventEmitter),rn=nn,an=n(10),sn=function(t){function e(e,n,i,r){var a;(a=t.call(this,e)||this).zone=void 0,a.background=void 0,a.setName(n),a.setVisible(!1);var s=a.scene.world.getWorldSize(),o=s.width,h=s.height;return a.setSize(i||o,r||h),a.addZone(),a.addBackground(),a}(0,j.default)(e,t);var n=e.prototype;return n.open=function(t){GameCore.Utils.Valid.isObject(t)&&(this.setDataEnabled(),this.setData(t)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.setBlockInputOutsideEnabled=function(t){this.scene.input.setTopOnly(t)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var t="screen-background";if(!this.scene.textures.exists(t)){var e=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,e,n),i.generateTexture(t,e,n),i.destroy()}this.background=this.scene.add.image(0,0,t),this.add(this.background)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(an.AnalyticsEvents.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},e}(Phaser.GameObjects.Container),on=sn,hn={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=on,GameCore.Screens={Events:hn};var cn=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).events=void 0,e}(0,j.default)(e,t);var n=e.prototype;return n.boot=function(){this.events=new rn,this.registryScreenFactory()},n.get=function(t){var e=this.scene.children.getByName(t);return null===e?null:e},n.add=function(t,e,n,i){var r=this.get(t);return r||(r=this.scene.add.screen(t,e,n,i),this.events.emit(GameCore.Screens.Events.CREATED,r),r)},n.open=function(t,e){var n=this.get(t);return!!n&&(n.open(e),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(t){var e=this.get(t);return!!e&&(e.close(),e.emit(GameCore.Screens.Events.CLOSE,e),this.events.emit(GameCore.Screens.Events.CLOSE,e),!0)},n.bringToTop=function(t){var e=this.scene.children.getByName(t);e&&this.scene.children.bringToTop(e)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(t,e,n,i){var r=new e(this.scene,t,n,i);return Phaser.Display.Align.In.Center(r,this.scene.gameZone),this.existing(r),r},e}(Phaser.Plugins.ScenePlugin),ln=cn,un=n(39),dn=n.n(un),fn=n(30),pn=n(55),mn="CONTEXT_RECEIVED",gn="CONTEXT_PROCESSED",vn="CONTEXT_GAME_MODE_DETECTED",yn="MESSAGES_SENT_UPDATE",xn="MESSAGES_SENT_REMOVE",bn="SCENE_KEY_UPDATE",En=n(14),An={currentSceneKey:"",prevSceneKey:""};(0,En.enableES5)();var wn,Sn,Mn,Tn,Cn,In,Pn,kn,Rn,Ln,On,_n,Dn,Bn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},Nn=Bn,Fn={data:{}},Un={token:"",isRequesting:!1},Gn=((wn={}).auth=function(t,e){return void 0===t&&(t=Un),(0,En.default)(t,(function(t){var n=e.payload;if(n){var i=n.token;switch(e.type){case St:t.isRequesting=!0;break;case Mt:t.token=i,t.isRequesting=!1}}}))},wn),Vn={playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:Bt,userGuideDisplays:0,customFields:{level:1}},isUserNew:!0},Yn=((Sn={}).player=function(t,e){return void 0===t&&(t=Vn),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.name,a=i.value,s=i.data,o=void 0===s?{}:s,h=i.score,c=i.connectedPlayers,l=void 0===c?[]:c;switch(e.type){case oe:var u=i.playerId,d=i.name,f=i.photo,p=i.locale,m=i.data;if(n.playerId=u,n.name=d,n.photo=f,n.locale=p,GameCore.Utils.Valid.isObject(m)){var g=m;n.data=(0,_.merge)(t.data,g)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case ce:n.data.score=h;break;case le:if(!GameCore.Utils.Object.hasOwn(n.data.settings,r))break;n.data.settings[r]=a;break;case he:n.data=(0,_.merge)(t.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case ue:if(l.length<=0)break;var v=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,_.merge)(t.connectedPlayers,v)}}}))},Sn),zn={data:{},profileIds:[]},Wn=((Mn={}).profile=function(t,e){return void 0===t&&(t=zn),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.data,a=void 0===r?[]:r;if(e.type===Ze){var s=GameCore.Utils.Object.keyBy(a,"playerId"),o=Object.keys(s);n.data=(0,_.merge)((0,O.default)({},t.data),s),n.profileIds=[].concat(new Set([].concat(t.profileIds,o)))}}}))},Mn),Hn="MATCH_GAMEPLAY_INITIALIZE",Xn="MATCH_GAMEPLAY_START",Kn="MATCH_GAMEPLAY_FINISH",jn="MATCH_GAMEPLAY_UPDATE",qn="MATCH_GAMEPLAY_RESCUE",Zn="MATCH_STATS_DATA_CLEAR",Qn="MATCH_STATS_DATA_UPDATE",Jn="MATCH_STATS_CURRENT_UPDATE",$n="MATCH_SINGLE_CREATE_REQUEST",ti="MATCH_SINGLE_DETAIL_REQUEST",ei="MATCH_SINGLE_MOVE_UPDATED",ni="MATCH_SINGLE_DATA_RECEIVED",ii="MATCH_SINGLE_DATA_CLEAR",ri="MATCH_CHALLENGE_JOIN_REQUEST",ai="MATCH_CHALLENGE_CREATE_REQUEST",si="MATCH_CHALLENGE_FINISH_REQUEST",oi="MATCH_CHALLENGE_CONTINUE_REQUEST",hi="MATCH_CHALLENGE_DATA_RECEIVED",ci="MATCH_CHALLENGE_DATA_CLEAR",li="MATCH_GROUP_CREATE_REQUEST",ui="MATCH_GROUP_FINISH_REQUEST",di="MATCH_ONLINE_CREATE_REQUEST",fi="MATCH_ONLINE_DATA_RECEIVED",pi="MATCH_ONLINE_STATS_UPDATE",mi="MATCH_ONLINE_FINISH_REQUEST",gi="MATCH_ONLINE_DATA_CLEAR",vi="open",yi="active",xi="finished",bi={mode:"",status:vi,rescued:0,startAt:0,finishAt:0},Ei={single:{_id:"",data:{fen:""},playerId:"",status:vi},group:{status:vi,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:vi,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:vi,players:{}},updateAt:0,isRequesting:!1},Ai={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},wi=((Tn={}).match=(0,fn.combineReducers)({gameplay:function(t,e){return void 0===t&&(t=bi),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.mode,a=i.status;switch(e.type){case Hn:n.status=vi,n.mode=bi.mode,n.rescued=bi.rescued,n.startAt=bi.startAt,n.finishAt=bi.finishAt,n.opponentInfo=bi.opponentInfo;break;case Xn:n.mode=r,n.status=yi,n.rescued=bi.rescued,n.startAt=Date.now();break;case jn:n.mode="string"===typeof r?r:t.mode,n.status=a||t.status;break;case Kn:n.status=xi,n.finishAt=Date.now();break;case qn:n.rescued+=1}}}))},match:function(t,e){return void 0===t&&(t=Ei),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.match,a=i.opponentInfo,s=i.players;switch(e.type){case $n:case ti:case ri:case si:case di:n.isRequesting=!0;break;case ei:n.single=(0,O.default)({},t.single,r),n.updateAt=Date.now();break;case ni:n.isRequesting=!1,n.single=r||Ei.single;break;case ii:n.isRequesting=!1,n.single=Ei.single;break;case ai:case oi:n.isRequesting=!0,n.challenge.opponentInfo=a;break;case hi:n.isRequesting=!1,n.challenge=(0,O.default)({},r||Ei.challenge),n.challenge.opponentInfo=t.challenge.opponentInfo;break;case ci:n.isRequesting=!1,n.challenge=Ei.challenge;break;case li:n.group.status=yi,a&&(n.group.opponentInfo=a);break;case ui:n.group.status=xi;break;case gi:n.online.status=Ei.online.status,n.online.players=Ei.online.players;break;case fi:n.online.status=yi,n.online.players=s;break;case mi:n.online.status=xi}}}))},stats:function(t,e){return void 0===t&&(t=Ai),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.playerId,a=i.stats,s=i.match,o=i.current,h=i.players,c=i.leaders;switch(e.type){case Zn:delete n.data[r],n.current=Ai.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=Ai.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=a,n.isRequesting=!1;break;case Qn:n.data[r]=a;break;case Jn:n.current=(0,_.merge)((0,O.default)({},t.current),a);break;case fi:Object.keys(h).forEach((function(t){n.data[t]={score:0}}));break;case pi:c.forEach((function(t){var e=t.playerId,i=t.score,r=t.rank;n.data[e]={score:i,rank:r}}));break;case hi:var l=s||{},u=l.blackPlayerId,d=l.blackPlayerScore,f=l.whitePlayerId,p=l.whitePlayerScore,m=l.whitePlayerLevel,g=l.blackPlayerLevel;if(!u||!f)break;o&&(n.current=o),n.data[u]={score:d,level:g},n.data[f]={score:p,level:m}}}}))}}),Tn),Si="TOURNAMENT_ACTIVE",Mi="TOURNAMENT_REQUEST",Ti="TOURNAMENT_RECEIVED",Ci={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},Ii=((Cn={}).tournament=function(t,e){return void 0===t&&(t=Ci),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.score,a=void 0===r?0:r,s=i.tournamentId;switch(e.type){case Si:n.active=!0,n.tournamentId=s;break;case Mi:n.isRequesting=!0;break;case Ti:n.isRequesting=!1,a>t.bestSessionScore&&(n.bestSessionScore=a)}}}))},Cn),Pi="LEADERBOARD_DATA_REQUEST",ki="LEADERBOARD_DATA_UPDATE",Ri="LEADERBOARD_DATA_CLEAR",Li={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},Oi=((In={}).leaderboards=function(t,e){return void 0===t&&(t=Li),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.leaderboardId,a=i.type,s=i.limit,o=i.offset,h=i.leaders;switch(e.type){case Pi:t.type!==a&&0===o&&(n.leaders=Li.leaders),n.isRequesting=!0,n.leaderboardId=r,n.type=a,n.limit=s,n.offset=o;break;case ki:if(n.isRequesting=!1,t.type!==a)break;var c=GameCore.Utils.Json.clone((0,O.default)({},t.leaders,h)),l=Object.values(c).filter((function(t){return!!t.name&&!!t.photo}));l.sort((function(t,e){return+e.score-+t.score})),l.forEach((function(e,i){e.rank=i+1,t.leaders[e.playerId]||(n.leaders[e.playerId]=e)}));break;case Ri:n.isRequesting=!1,n.type=Li.type,n.limit=Li.limit,n.offset=Li.offset,n.leaders=Li.leaders,n.leaderboardId=Li.leaderboardId}}}))},In),_i="MISSIONS_DATA_REQUEST",Di="MISSIONS_DATA_RECEIVE",Bi="MISSION_START",Ni="MISSION_UPDATE",Fi="MISSION_COMPLETED",Ui={mission:null,missions:null,isRequesting:!1},Gi=((Pn={}).missions=function(t,e){return void 0===t&&(t=Ui),(0,En.default)(t,(function(n){var i,r,a=e.payload;if(a){var s=a.name,o=a.type,h=a.value,c=a.missions;switch(e.type){case _i:n.isRequesting=!0;break;case Di:if(n.isRequesting=!1,c.length<1)return;n.missions={},c.forEach((function(t){n.missions[t.name]=t}));break;case Bi:if(null===t.missions)break;var l=t.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},Object.keys(l.require).forEach((function(t){n.mission.process[t]=0}));break;case Ni:if((null==(i=t.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=h;break;case Fi:if((null==(r=t.mission)?void 0:r.name)!==s)break;n.mission=null}}}))},Pn),Vi="DAILY_TASKS_DATA_REQUEST",Yi="DAILY_TASKS_DATA_RECEIVE",zi="DAILY_TASKS_PROCESS_UPDATE",Wi="DAILY_TASK_VALUE_ADD",Hi="DAILY_TASK_REWARDED",Xi="DAILY_TASKS_SEEN",Ki="DAILY_TASK_FINISHED",ji={tasks:[],process:[],isRequesting:!1,isNotice:!1},qi=((kn={}).dailyTasks=function(t,e){return void 0===t&&(t=ji),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.id,a=i.type,s=i.value,o=i.tasks,h=i.process;switch(e.type){case Vi:n.isRequesting=!0;break;case Yi:n.isRequesting=!1,n.tasks=o;break;case zi:n.process=h;break;case Wi:if(!t.process[r])break;n.process[r][a]+=s;break;case Hi:if(!t.process[r])break;n.process[r].rewarded=!0;break;case Xi:n.isNotice=!1;break;case Ki:n.isNotice=!0}}}))},kn),Zi={rewards:[],isRequesting:!1},Qi=((Rn={}).dailyRewards=function(t,e){return void 0===t&&(t=Zi),(0,En.default)(t,(function(t){var n=e.payload;if(n){var i=n.rewards;switch(e.type){case"DAILY_REWARDS_REQUEST":t.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":t.isRequesting=!1,t.rewards=i}}}))},Rn),Ji=(0,fn.combineReducers)((0,O.default)({scene:function(t,e){return void 0===t&&(t=An),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.sceneKey;if(e.type===bn)n.currentSceneKey=r,n.prevSceneKey=t.currentSceneKey}}))},context:function(t,e){return void 0===t&&(t=Bn),(0,En.default)(t,(function(t){var n=e.payload;if(n){var i=n.gameMode,r=n.contextId,a=n.contextType,s=n.entryPointData;switch(e.type){case mn:t.contextId=r,t.contextType=a,t.entryPointData=s;break;case gn:t.contextId=r,t.contextType=a,t.processed=!0;break;case vn:t.currentGameMode=i}}}))},messages:function(t,e){return void 0===t&&(t=Fn),(0,En.default)(t,(function(n){var i=e.payload;if(i){var r=i.opponentId;if("string"===typeof r)switch(e.type){case yn:t.data[r]?n.data[r].sent=!0:n.data[r]={sent:!0};break;case xn:t.data[r]?n.data[r].sent=!1:n.data[r]={sent:!1}}}}))}},Gn,Yn,Wn,wi,Ii,Oi,Gi,qi,Qi)),$i=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,tr=fn.compose,er=function(t){$i&&(tr=$i({trace:!0,traceLimit:25})||fn.compose);var e=tr((0,fn.applyMiddleware)(pn.default));return(0,fn.createStore)(Ji,t,e)},nr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).store=void 0,e.initiator=void 0,e.dispatch=function(t){return e.store.dispatch(t)},e.getState=function(){return e.store.getState()},e.subscribe=function(t){return e.store.subscribe(t)},e.watch=function(t,n){var i=dn()((function(){var n=e.getState();return t(n)}));return e.subscribe(i((function(t){n(t)})))},e}(0,j.default)(e,t);var n=e.prototype;return n.init=function(){this.store=er({})},n.setInitiator=function(t){this.initiator=t},n.syncStore=function(){this.initiator.initContext(),this.initiator.initPlayer()},e}(Phaser.Plugins.BasePlugin),ir=nr,rr=n(56),ar=n.n(rr),sr=function(t){function e(e,n){var i;return(i=t.call(this,e,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,j.default)(e,t);var n=e.prototype;return n.load=function(){var t;switch(this.payload.type){case"google":t=this.getGoogleFontConfig(this.payload);break;case"local":t=this.getLocalFontConfig(this.payload)}ar().load(t)},n.getGoogleFontConfig=function(t){var e=this,n=t.character,i=t.fontName,r=t.fontWeight;return{google:{families:[i+":"+(void 0===r?400:r)],text:n},active:function(){e.loader.nextFile(e,!0)},timeout:15e3}},n.getLocalFontConfig=function(t){var e=this,n=t.fontName,i=t.fontType,r=document.createElement("style");document.head.appendChild(r);var a=r.sheet;if(a){var s='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';a.insertRule(s,0)}return{custom:{families:[n]},active:function(){e.loader.nextFile(e,!0)},timeout:15e3}},e}(Phaser.Loader.File),or=sr,hr=function(t){function e(){return t.apply(this,arguments)||this}return(0,j.default)(e,t),e.prototype.addFont=function(t){var e=new or(this.scene.load,t);this.scene.load.addFile(e)},e}(Phaser.Plugins.ScenePlugin),cr=hr,lr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).ratio=void 0,e.width=void 0,e.height=void 0,e.worldWidth=void 0,e.worldHeight=void 0,e.worldRatio=void 0,e.forcePixelRatio=void 0,e}(0,j.default)(e,t);var n=e.prototype;return n.configure=function(t){var e=t.width,n=t.height,i=t.ratio;this.ratio=i,this.width=e,this.height=n,this.initWorldSize(),this.addEventResize()},n.resize=function(t){var e=this;t&&t>0&&(this.forcePixelRatio=t);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,r=n.height;this.resizeCanvas(i,r),this.game.scene.scenes.forEach((function(t){var n=t.cameras.main;if(n){var i=e.getZoomRatio(),r=e.getWorldSize(),a=r.width,s=r.height;n.setZoom(i),n.centerOn(a/2,s/2)}}))},n.resizeCanvas=function(t,e){this.game.canvas.width=t,this.game.canvas.height=e,this.game.scale.resize(t,e)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){this.worldWidth=this.width,this.worldHeight=this.height,this.isScreenSmallerRatio(this.ratio)&&(this.worldHeight=this.width/this.getScreenRatio()),this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var t=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/t},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var t=GameCore.Utils.Device.pixelRatio();return t>2&&(t=2),t},n.getPhysicPixels=function(t,e){return t*e},n.getCanvasSizeFixedRatio=function(t){var e=this.getPixelRatio(),n=this.getScreenWidth()*e,i=this.getScreenHeight()*e;return this.isScreenSmallerRatio(t)?i=n/t:n=i*t,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var t=document,e=t.body,n=t.documentElement,i=e.clientHeight,r=n.clientHeight;return Math.max(r,i)||0},n.getScreenWidth=function(){var t=document,e=t.body,n=t.documentElement,i=e.clientWidth,r=n.clientWidth;return Math.max(r,i)||0},n.isScreenSmallerRatio=function(t){return this.getScreenWidth()/this.getScreenHeight()<=t},n.addEventResize=function(){var t=this;window.addEventListener("resize",(function(){t.resize()}))},e}(Phaser.Plugins.BasePlugin),ur=lr,dr=function(){function t(t,e,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=t||Nn.contextId,this.contextType=e||Nn.contextType,this.entryPointData=n||Nn.entryPointData}return t.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},t}(),fr=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidPlayerId",i.message=e||"The playerId is not valid",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),pr="share_invite",mr="tournament",gr="challenge_friend_match",vr="matching_group_match",yr=n(16),xr=new de.default("10","Your Friend",yr.default.AVATAR.FILE).toObject(),br="single",Er="challenge-friends",Ar="matching-group",wr="tournaments",Sr="online",Mr=(0,Ct.createSelector)([function(t){return t.context}],(function(t){return t})),Tr=((0,Ct.createSelector)([function(t){return t.context.contextId}],(function(t){return t})),(0,Ct.createSelector)([function(t){return t.context.contextType}],(function(t){return t})),(0,Ct.createSelector)([function(t){return t.context.processed}],(function(t){return t})),(0,Ct.createSelector)([function(t){return t.context.currentGameMode}],(function(t){return t}))),Cr=function(t,e){return{type:gn,payload:{contextId:t,contextType:e}}},Ir=function(t){return function(e){e({type:vn,payload:{gameMode:t}}),(0,H.addBreadcrumbSentry)("game-mode",t)}},Pr=GameCore.Configs.PlayerDataStore,kr=function(t){var e=this;this.game=void 0,this.initContext=function(){var t=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),r=new dr(t,n,i).toObject(),a=r.contextId,s=r.contextType,o=r.entryPointData;e.game.storage.dispatch(function(t,e,n){return{type:mn,payload:{contextId:t,contextType:e,entryPointData:n}}}(a,s,o))},this.initPlayer=function(){var t=e.getPlayerInfo(),n=e.getPlayerDataLocal();e.game.player.receiveData(t,n)},this.getPlayerInfo=function(){try{var t=window.GameSDK.player.getID(),e=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(t))throw new fr(null,{playerId:t});return GameCore.Utils.Valid.isString(e)||(e="You"),new de.default(t,e,n,i).toObject()}catch(r){return new de.default("123","You").toObject()}},this.getPlayerDataLocal=function(){try{var t=Nt(Pr);return GameCore.Utils.Valid.isObject(t)?new we(t).toObject():null}catch(e){return null}},this.game=t},Rr=n(12),Lr=[an.AnalyticsEvents.BUTTON_CLICK,an.AnalyticsEvents.SCREEN_OPEN],Or=function(t){function e(e,n){var i;(i=t.call(this,"FacebookAnalytics",{prefix:n},"#0F52BA")||this).game=void 0,i.game=e;var r=(GameCore.Configs.Analytics.FacebookAnalytics||{}).consoleLog;return i.selfLog=!!r,i}(0,j.default)(e,t);var n=e.prototype;return n.processTrafficSource=function(t){},n.processEvent=function(t,e,n){if(!(Lr.indexOf(t)>=0)){var i=this.getEventName(t);this.game.facebook.log(i,n,e)}},n.processPageView=function(t){},n.processLevelStart=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_START,{level:t,score:e,level_name:n})},n.processLevelRescue=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_RESCUE,{level:t,score:e,level_name:n})},n.processLevelFail=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_END,{level:t,score:e,level_name:n,success:!1})},n.processLevelComplete=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_END,{level:t,score:e,level_name:n,success:!0})},n.processShowInterstitialAd=function(t){this.processEvent(an.AnalyticsEvents.AD_SHOW,{ad_type:"interstitial",screen_name:""+t})},n.processShowRewardedVideoAd=function(t){this.processEvent(an.AnalyticsEvents.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+t})},n.processShowAdFail=function(t,e){var n=t===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(an.AnalyticsEvents.AD_SHOW_FAILED,{ad_type:n,screen_name:""+e})},n.getEventName=function(t){return this.options.prefix+"_"+t},e}(GameCore.Analytics.BaseAnalytics),_r=Or,Dr=n(40),Br=n.n(Dr)().GameAnalytics,Nr="Facebook Audience Network",Fr=["facebook_web","facebook_gaming_tab","home_screen_shortcut","feed","ad","in_game_menu","game_switch","bookmark","bot_cta","bot_menu","game_cta","web_games_hub","admin_message","game_search","notification","shareable_link","game_share","page","other"];!function(t){t[t.Show=2]="Show",t[t.FailedShow=3]="FailedShow",t[t.RewardReceived=4]="RewardReceived"}(Ln||(Ln={})),function(t){t[t.RewardedVideo=2]="RewardedVideo",t[t.Interstitial=4]="Interstitial"}(On||(On={})),function(t){t[t.Undefined=0]="Undefined",t[t.Start=1]="Start",t[t.Complete=2]="Complete",t[t.Fail=3]="Fail"}(_n||(_n={})),function(t){t[t.Undefined=0]="Undefined",t[t.Unknown=1]="Unknown",t[t.Offline=2]="Offline",t[t.NoFill=3]="NoFill",t[t.InternalError=4]="InternalError",t[t.InvalidRequest=5]="InvalidRequest",t[t.UnableToPrecache=6]="UnableToPrecache"}(Dn||(Dn={}));var Ur=function(t){function e(e,n){var i;(i=t.call(this,"GameAnalytics",(0,O.default)({},n),"#40B5AD")||this).ga=void 0;var r=(GameCore.Configs.Analytics.GameAnalytics||{}).consoleLog;i.selfLog=!!r,i.ga=Br;var a=n.key,s=n.secret,o=n.userId,h=n.version;return i.ga.configureAvailableCustomDimensions01(Fr),i.ga.configureBuild(h),i.ga.configureUserId(o),i.ga.initialize(a,s),i}(0,j.default)(e,t);var n=e.prototype;return n.processTrafficSource=function(t){this.ga.setCustomDimension01(t)},n.processEvent=function(t,e){switch(void 0===e&&(e={}),t){case an.AnalyticsEvents.APP_READY:return this.processDesignEvent("Game:Ready");case an.AnalyticsEvents.BUTTON_CLICK:return this.processDesignEvent("UIClick:"+e.screen_name+":"+e.button_name);case an.AnalyticsEvents.SCREEN_OPEN:return this.processDesignEvent("Screen:Open:"+e.screen_name);case an.AnalyticsEvents.LOAD_START:return this.processDesignEvent("Game:Load:Start");case an.AnalyticsEvents.LOAD_COMPLETE:return this.processDesignEvent("Game:Load:Finish");case an.AnalyticsEvents.TUTORIAL_BEGIN:return this.processDesignEvent("Game:Guide:Start");case an.AnalyticsEvents.TUTORIAL_STEP:return this.processDesignEvent("Game:Guide:Step:"+e.tutorial_step);case an.AnalyticsEvents.TUTORIAL_COMPLETE:return this.processDesignEvent("Game:Guide:Complete");case an.AnalyticsEvents.MATCH_START:return this.processDesignEvent("Game:Match:Start"),void this.processDesignEvent("Match:Start:"+e.game_mode);case an.AnalyticsEvents.MATCH_RESCUE:return this.processDesignEvent("Game:Match:Rescue"),void this.processDesignEvent("Match:Rescue:"+e.game_mode);case an.AnalyticsEvents.MATCH_END:return this.processDesignEvent("Game:Match:"+(e.success?"Complete":"Fail")),void this.processDesignEvent("Match:"+(e.success?"Complete":"Fail")+":"+e.game_mode);case an.AnalyticsEvents.SHARE:return this.processDesignEvent("Social:Share:"+e.share_content_type+":"+(e.success?"Success":"Fail"));case an.AnalyticsEvents.MESSAGE:return this.processDesignEvent("Social:Message:"+e.message_content_type+":"+(e.success?"Success":"Fail"));case an.AnalyticsEvents.SHORTCUT_CREATE_POPUP:return this.processDesignEvent("Shortcut:Show");case an.AnalyticsEvents.SHORTCUT_CREATE:return this.processDesignEvent("Shortcut:Create:"+(e.success?"Success":"Fail"));case an.AnalyticsEvents.BOT_SUBSCRIBE_POPUP:return this.processDesignEvent("BotSubscribe:Show");case an.AnalyticsEvents.BOT_SUBSCRIBE:return this.processDesignEvent("BotSubscribe:Subscribe:"+(e.success?"Success":"Fail"));case an.AnalyticsEvents.NEW_USER:return this.processDesignEvent("NewUser");case an.AnalyticsEvents.JOIN_GROUP:return this.processDesignEvent("Game:JoinGroup");default:return this.processDesignEvent("Unknown:"+t)}},n.processDesignEvent=function(t){this.ga.addDesignEvent(t,1)},n.processPageView=function(){},n.processLevelStart=function(t,e,n){this.ga.addProgressionEvent(_n.Start,this.getLevelKey(t),"","",e)},n.processLevelFail=function(t,e,n){this.ga.addProgressionEvent(_n.Fail,this.getLevelKey(t),"","",e)},n.processLevelComplete=function(t,e,n){this.ga.addProgressionEvent(_n.Complete,this.getLevelKey(t),"","",e)},n.processShowInterstitialAd=function(t){this.ga.addAdEvent(Ln.Show,On.Interstitial,Nr,t)},n.processShowRewardedVideoAd=function(t){this.ga.addAdEvent(Ln.Show,On.RewardedVideo,Nr,t)},n.processReceiveReward=function(t){this.ga.addAdEvent(Ln.RewardReceived,On.RewardedVideo,Nr,t)},n.processShowAdFail=function(t,e,n){var i=t===GameCore.Ads.Types.REWARDED?On.RewardedVideo:On.Interstitial;"undefined"===typeof n?this.ga.addAdEvent(Ln.FailedShow,i,Nr,e):this.ga.addAdEventWithNoAdReason(Ln.FailedShow,i,Nr,e,n)},n.getLevelKey=function(t){return"Level_"+t.toString().padStart(4,"0")},e}(GameCore.Analytics.BaseAnalytics),Gr=Ur,Vr=[an.AnalyticsEvents.SCREEN_OPEN],Yr=function(t){function e(e,n){var i;(i=t.call(this,"GoogleAnalytics",(0,O.default)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var r=n.trackingId;i.game=e;var a=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!a,i.trackingId=r,i}(0,j.default)(e,t);var n=e.prototype;return n.processTrafficSource=function(t){},n.processEvent=function(t,e,n){if(!(Vr.indexOf(t)>=0)){var i=this.formatEventName(t),r=e?(0,O.default)({},e):{};r=n?(0,O.default)({},r,{value:n}):r,r=(0,O.default)({},r,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,r)}},n.processLevelStart=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_START,{level:t,score:e,level_name:n})},n.processLevelRescue=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_RESCUE,{level:t,score:e,level_name:n})},n.processLevelFail=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_END,{level:t,score:e,level_name:n,success:!1})},n.processLevelComplete=function(t,e,n){this.processEvent(an.AnalyticsEvents.LEVEL_END,{level:t,score:e,level_name:n,success:!0})},n.processShowInterstitialAd=function(t){this.processEvent(an.AnalyticsEvents.AD_SHOW,{ad_type:"interstitial",screen_name:""+t}),this.processEvent(an.AnalyticsEvents.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(t){this.processEvent(an.AnalyticsEvents.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+t}),this.processEvent(an.AnalyticsEvents.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(t,e){var n=t===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(an.AnalyticsEvents.AD_SHOW_FAILED,{ad_type:n,screen_name:""+e})},n.processPageView=function(t){var e=this.getGameplayMode(),n="/"+e+"/"+t;this.currentPath=n,document.title=this.formatPageTitle(e,t),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var t=this.game.storage.getState();return Tr(t)},n.formatEventName=function(t){return t.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(t,e){return this.toUpperCamelCaseWithSpace(t)+"::"+this.toUpperCamelCaseWithSpace(e)},n.toUpperCamelCaseWithSpace=function(t){var e=t.replace(/[-_\s.]+(.)?/g,(function(t,e){return e?" "+e.toUpperCase():""}));return e.substr(0,1).toUpperCase()+e.substr(1)},e}(GameCore.Analytics.BaseAnalytics),zr=Yr,Wr="G-CHNRBHCM0N",Hr="UA-214409348-11",Xr=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).startGame=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.auth.requestToken();case 3:e.storage.syncStore(),e.configureSentry(),e.detectGameMode(),e.initAnalytics(),e.analytics.event(an.AnalyticsEvents.LOAD_START),e.setTrafficSourceAnalytics(),e.scene.launch(Rr.SceneKeys.GLOBAL_SCENE),e.scene.start(Rr.SceneKeys.LOAD_SCENE),e.analytics.pageview(Rr.SceneKeys.LOAD_SCENE),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 17:return t.prev=17,e.facebook.progressLoading.finishLoadingProgressFbBootScene(),e.scene.sleep(Rr.SceneKeys.BOOT_SCENE),t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[0,14,17,21]])}))),e}(0,j.default)(e,t);var n=e.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var t=this.player.getPlayer();(0,H.setSentryUser)({id:t.playerId,username:t.name})},n.detectGameMode=function(){this.storage.dispatch((function(t,e){var n=e(),i=Mr(n),r=window.game.player.getPlayerId(),a=i.contextId,s=i.entryPointData||{},o=s.type,h=s.matchId,c=s.playerId,l=s.opponentId,u=void 0===l?xr.playerId:l,d=s.tournamentContextId,f=r===c,p=u===xr.playerId||[u,c].indexOf(r)>=0,m=br;!a||void 0!==o&&o!==mr||(m=wr),o===mr&&d&&(m=wr),a&&o===pr&&!f&&(m=Er),h&&a&&p&&o===gr&&(m=Er),a&&o===vr&&(m=Ar),t(Ir(m))}))},n.initAnalytics=function(){var t=GameCore.Configs.Analytics;if(GameCore.Utils.Valid.isObject(t.GameAnalytics)){var e=t.GameAnalytics,n=e.key,i=e.secret,r=this.player.getPlayerId();this.analytics.add(new Gr(this.game,{key:n,secret:i,userId:r,version:"1"}))}var a=this.player.getPlayerId();if(this.analytics.add(new zr(this.game,{userId:a,trackingId:Hr,measuringId:Wr,version:"1"})),GameCore.Utils.Valid.isObject(t.FacebookAnalytics)){var s=t.FacebookAnalytics.prefix;this.analytics.add(new _r(this.game,s))}},n.setTrafficSourceAnalytics=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getPlayerFirstVisitEntryPoint();case 3:e=t.sent,this.analytics.setTrafficSource(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),n.getPlayerFirstVisitEntryPoint=function(){var t=(0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GameSDK.player.getDataAsync(["entry_point"]);case 2:if(e=t.sent,n=e.entry_point?e.entry_point:null){t.next=9;break}return t.next=7,GameSDK.getEntryPointAsync();case 7:n=t.sent,GameSDK.player.setDataAsync({entry_point:n}).catch();case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e}(Phaser.Scene),Kr=Xr,jr=n(4),qr=n(11),Zr=n(2),Qr=Zr.default.DEFAULT,Jr=Qr.KEY,$r=Qr.FRAME,ta=function(t){function e(e,n,i,r,a){var s;return(s=t.call(this,e,n,i)||this).barTopLeft=void 0,s.barTopMid=void 0,s.barTopRight=void 0,s.barMidLeft=void 0,s.barMidBg=void 0,s.barMidRight=void 0,s.barBottomLeft=void 0,s.barBottomMid=void 0,s.barBottomRight=void 0,s.setSize(r,a),s.setDepth(qr.default.POPUP),s.createPopup(),s.scene.add.existing((0,jr.default)(s)),s}(0,j.default)(e,t);var n=e.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.barTopLeft=this.scene.add.image(0,0,Jr,$r.POPUP_TOP_LEFT),this.barTopMid=this.scene.add.image(0,0,Jr,$r.POPUP_TOP_MID),this.barTopRight=this.scene.add.image(0,0,Jr,$r.POPUP_TOP_RIGHT),this.barMidLeft=this.scene.add.image(0,0,Jr,$r.POPUP_MID_LEFT),this.barMidBg=this.scene.add.image(0,0,Jr,$r.POPUP_MID_MID),this.barMidRight=this.scene.add.image(0,0,Jr,$r.POPUP_MID_RIGHT),this.barBottomLeft=this.scene.add.image(0,0,Jr,$r.POPUP_BOTTOM_LEFT),this.barBottomMid=this.scene.add.image(0,0,Jr,$r.POPUP_BOTTOM_MID),this.barBottomRight=this.scene.add.image(0,0,Jr,$r.POPUP_BOTTOM_RIGHT),this.barTopLeft.setWorldSize(80,80),this.barTopMid.setWorldSize(80,80),this.barTopRight.setWorldSize(80,80),this.barMidLeft.setWorldSize(80,80),this.barMidBg.setWorldSize(80,80),this.barMidRight.setWorldSize(80,80),this.barBottomLeft.setWorldSize(80,80),this.barBottomMid.setWorldSize(80,80),this.barBottomRight.setWorldSize(80,80),this.add([this.barTopRight,this.barTopMid,this.barBottomLeft,this.barBottomRight,this.barMidLeft,this.barMidRight,this.barTopLeft,this.barBottomMid,this.barMidBg])},n.updatePopupSize=function(){this.barTopMid.setWorldSize(this.width-160,this.barTopMid.height),this.barMidLeft.setWorldSize(this.barMidLeft.width,this.height-160),this.barMidBg.setWorldSize(this.width-160,this.height-160),this.barMidRight.setWorldSize(this.barMidRight.width,this.height-160),this.barBottomMid.setWorldSize(this.width-160,this.barBottomMid.height)},n.alignPopupImages=function(){Phaser.Display.Align.In.TopLeft(this.barTopLeft,this),Phaser.Display.Align.In.TopCenter(this.barTopMid,this),Phaser.Display.Align.In.TopRight(this.barTopRight,this),Phaser.Display.Align.In.LeftCenter(this.barMidLeft,this),Phaser.Display.Align.In.Center(this.barMidBg,this),Phaser.Display.Align.In.RightCenter(this.barMidRight,this),Phaser.Display.Align.In.BottomLeft(this.barBottomLeft,this),Phaser.Display.Align.In.BottomCenter(this.barBottomMid,this),Phaser.Display.Align.In.BottomRight(this.barBottomRight,this)},(0,wt.default)(e,[{key:"onClose",set:function(t){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t)}}]),e}(Phaser.GameObjects.Container),ea=ta,na=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidContextId",i.message=e||"This contextId is not valid",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),ia=na,ra="PAUSE_SCREEN",aa="NOTIFY_SCREEN",sa="REWARD_SCREEN",oa="RESCUE_SCREEN",ha="BEST_SCORE_SCREEN",ca="LEVEL_COMPLETE_SCREEN",la="LEVEL_FAILED_SCREEN",ua=300,da=999,fa="global",pa="friend",ma=GameCore.Configs,ga=ma.OtherHost,va=ma.LeadersBoard,ya=va.Prefix,xa=va.LeaderboardId,ba=ya+"/"+xa+"/leaders",Ea=ya+"/"+xa+"/players",Aa=va.Name,wa=function(t){var e="";return xa?(t===fa?e=ba:t===pa&&(e=Ea),e):e},Sa=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map((function(t){return t.playerId})),i=GameCore.Utils.Object.keyBy(e,"playerId"),r=GameCore.Utils.String.params({playerIds:n}),t.next=5,qt("players?"+r,{},ApiHost);case 5:return a=t.sent,s=a.data.map((function(t){var e=i[t.playerId];return(0,O.default)({},t,{score:e.score,rank:e.rank,getScore:function(){return e.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return e.rank},getExtraData:function(){return e.extraData},getPlayer:function(){return{getName:function(){return t.name},getPhoto:function(){return t.photo},getID:function(){return t.playerId}}}})})),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ma=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e={}),null==xa){t.next=3;break}return t.abrupt("return",Ta(e));case 3:return t.abrupt("return",Ca(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ta=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e={}),n=[],i=wa(fa)){t.next=5;break}return t.abrupt("return",n);case 5:return r=GameCore.Utils.String.params(e),t.next=8,qt(i+"?"+r,{},ga);case 8:if(a=t.sent,!((s=(null==a?void 0:a.data)||[]).length<1)){t.next=12;break}return t.abrupt("return",n);case 12:return n=s,t.abrupt("return",Sa(n));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ca=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),i=(n=e).limit,r=n.offset,t.next=4,window.GameSDK.getLeaderboardAsync(Aa);case 4:return a=t.sent,t.next=7,a.getEntriesAsync(i,r);case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ia=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e={}),null==xa){t.next=3;break}return t.abrupt("return",Pa(e));case 3:return t.abrupt("return",ka(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Pa=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e={}),n=[],i=wa(pa)){t.next=5;break}return t.abrupt("return",n);case 5:return r=GameCore.Utils.String.params(e),t.next=8,qt(i+"?"+r,{},ga);case 8:if(a=t.sent,!((s=(null==a?void 0:a.data)||[]).length<1)){t.next=12;break}return t.abrupt("return",n);case 12:return n=s,t.abrupt("return",Sa(n));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ka=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),i=(n=e).limit,r=n.offset,t.next=4,window.GameSDK.getLeaderboardAsync(Aa);case 4:return a=t.sent,t.next=7,a.getConnectedPlayerEntriesAsync(i,r);case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ra=(function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==xa){t.next=2;break}return t.abrupt("return",Ra(e));case 2:return t.abrupt("return",La());case 3:case"end":return t.stop()}}),t)})))}(),function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,e){t.next=3;break}return t.abrupt("return",n);case 3:if(i=wa(pa)){t.next=6;break}return t.abrupt("return",n);case 6:return r=GameCore.Utils.String.params({playerIds:e}),t.next=9,qt(i+"?"+r,{},ga);case 9:if(a=t.sent,!((s=(null==a?void 0:a.data)||[]).length<1)){t.next=13;break}return t.abrupt("return",n);case 13:return n=Sa(s)[0],t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),La=function(){var t=(0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.GameSDK.getLeaderboardAsync(Aa);case 2:return e=t.sent,t.next=5,e.getPlayerEntryAsync();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Oa=function(){var t=(0,K.default)(Z().mark((function t(e,n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==xa){t.next=2;break}return t.abrupt("return",_a(e,n));case 2:return t.abrupt("return",Da(n));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),_a=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt("leaderboards/"+xa+"/players/"+e,{score:n},{},ga);case 2:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Da=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.GameSDK.getLeaderboardAsync(Aa);case 2:return n=t.sent,t.next=5,n.setScoreAsync(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ba=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="NewScoreIsBad",i.message=e||"The new score is bad",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Na=Ba,Fa=function(t){return t.match},Ua=(0,Ct.createSelector)([function(t){return Fa(t).gameplay.mode}],(function(t){return t})),Ga=((0,Ct.createSelector)([function(t){return Fa(t).gameplay.status}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).gameplay.rescued}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).gameplay.startAt}],(function(t){return t}))),Va=(0,Ct.createSelector)([function(t){return Fa(t).gameplay.finishAt}],(function(t){return t})),Ya=GameCore.Configs,za=Ya.AppId,Wa=Ya.OtherHost,Ha=Ya.LeadersBoard,Xa=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={appId:za,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!Ha.UseMock){t.next=5;break}return t.next=4,(0,Vt.sleepAsync)(1e3);case 4:return t.abrupt("return",(0,O.default)({},n,e,{_id:Ha.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",t.next=8,Zt("leaderboards",(0,O.default)({},n,e),{},Wa);case 8:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||{});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ka=(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n={}),i=[],!Ha.UseMock){t.next=7;break}return t.next=5,(0,Vt.sleepAsync)(1e3);case 5:return a=(r=n).limit,s=void 0===a?10:a,o=r.offset,h=void 0===o?0:o,t.abrupt("return",new Array(s).fill(null).map((function(t,e){var n=(e+1)*(h+1);return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())}})));case 7:return c=GameCore.Utils.String.params(n),l="leaderboards/"+e+"/leaders",t.next=11,qt(l+"?"+c,{},Wa);case 11:if((u=t.sent)&&(null==u||!u.error)){t.next=14;break}throw new Error((null==u?void 0:u.error)||"Leaderboard not found");case 14:if(!((d=(null==u?void 0:u.data)||[]).length<1)){t.next=17;break}return t.abrupt("return",i);case 17:return i=d,t.abrupt("return",i);case 19:case"end":return t.stop()}}),t)})))}(),function(){var t=(0,K.default)(Z().mark((function t(e,n,i){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt("leaderboards/"+e+"/players/"+n,{score:i},{},Wa);case 2:return r=t.sent,t.abrupt("return",(null==r?void 0:r.data)||{});case 4:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()),ja=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=e||"The new score is not best",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),qa=GameCore.Configs.Tournament.UseLeaderboard,Za=function(t){return{type:Si,payload:{tournamentId:t}}},Qa=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n){var i,r,a,s,o,h,c,l,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.facebook,r=t.playerId,a=t.playerName,s=t.score,o=t.autoStartGame,h=a+"'s Tournament",c=GameCore.Utils.String.generateObjectId(),e.next=7,i.tournament.createAsync({initialScore:s,config:{title:h,tournamentTitle:h},data:{playerId:r,playerName:a,leaderboardId:c}});case 7:return l=e.sent,u=l.getID(),o&&(n(Za(u)),n(Do())),e.next=12,Xa({_id:c,createdBy:r,name:u,description:h,expireTime:6048e5});case 12:if(e.sent._id!==c){e.next=16;break}return e.next=16,Ka(c,r,s);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),(0,H.sendException)(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()},Ja=function(t){return(0,K.default)(Z().mark((function e(){var n,i,r,a,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.facebook,i=t.playerId,r=t.playerName,a=t.leaderboardId,s=t.score,a&&Ka(a,i,s),e.next=5,n.tournament.shareAsync({score:s,data:{type:mr,playerId:i,playerName:r}});case 5:Ka(a,i,s);case 6:case"end":return e.stop()}}),e)})))},$a=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=window.game.facebook,t.next=4,e.getTournamentAsync();case 4:return n=t.sent,i=JSON.parse(n.getPayload()||"{}"),t.abrupt("return",i.leaderboardId);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),ts=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=window.game.facebook,t.next=4,e.getTournamentAsync();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),es=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n,i){var r,a,s,o,h,c,l,u,d,f,p,m,g;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,a=window.game,s=a.player,o=a.facebook,h=a.analytics,e.prev=2,c=i(),l=Ua(c),[br,wr].includes(l)){e.next=7;break}return e.abrupt("return");case 7:return n({type:Mi,payload:{}}),u=s.getPlayer(),d=u.playerId,f=u.name,e.next=11,ts();case 11:if(!e.sent){e.next=23;break}if(r=an.AnalyticsEvents.TOURNAMENT_SHARE,!qa){e.next=21;break}return e.next=17,$a();case 17:return p=e.sent,m={playerId:d,playerName:f,score:t,leaderboardId:p},e.next=21,n(Ja(m));case 21:e.next=28;break;case 23:if(r=an.AnalyticsEvents.TOURNAMENT_CREATE,!qa){e.next=28;break}return g={playerId:d,playerName:f,score:t,autoStartGame:!1},e.next=28,n(Qa(g));case 28:if(h.event(r,{success:!0}),!1!==qa){e.next=32;break}return e.next=32,o.requestTournamentAsync(t);case 32:n(ns(t)),e.next=40;break;case 35:if(e.prev=35,e.t0=e.catch(2),!(e.t0 instanceof ja)){e.next=39;break}return e.abrupt("return");case 39:r&&h.event(r,{success:!1});case 40:case"end":return e.stop()}}),e,null,[[2,35]])})));return function(t,n){return e.apply(this,arguments)}}()},ns=function(t){return{type:Ti,payload:{score:t}}},is=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidOpponentId",i.message=e||"This opponentId is not valid",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),rs=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="WideFrameRenderFail",i.message=e||"Wide frame render fail",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),as={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},ss=function(t,e){return e.playerId},os=((0,Ct.createSelector)([function(t){return Fa(t).match.isRequesting}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).match.single}],(function(t){return t}))),hs=(0,Ct.createSelector)([function(t){return Fa(t).match.single._id}],(function(t){return t})),cs=(0,Ct.createSelector)([function(t){return Fa(t).match.single.score}],(function(t){return t||0})),ls=((0,Ct.createSelector)([function(t){return Fa(t).match.single.level}],(function(t){return t||0})),(0,Ct.createSelector)([function(t){var e;return null==(e=Fa(t).match.single.data)?void 0:e.diamond}],(function(t){return t||0})),(0,Ct.createSelector)([function(t){var e;return null==(e=Fa(t).match.single.data)?void 0:e.fen}],(function(t){return t||null})),(0,Ct.createSelector)([function(t){return Fa(t).match.single.status}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).match.single.playerId}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).match.challenge}],(function(t){return t}))),us=(0,Ct.createSelector)([function(t){return Fa(t).match.challenge._id}],(function(t){return t})),ds=(0,Ct.createSelector)([function(t){return Fa(t).match.challenge.status}],(function(t){return t})),fs=(0,Ct.createSelector)([function(t){return Fa(t).match.challenge.opponentInfo}],(function(t){return t})),ps=((0,Ct.createSelector)([function(t){return Fa(t).match.challenge.whitePlayerId}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).match.challenge.blackPlayerId}],(function(t){return t})),(0,Ct.createSelector)([ls,ss],(function(t,e){var n=t.whitePlayerId,i=t.blackPlayerId;return n!==e&&i===e?n:i!==e&&n===e?i:""})),(0,Ct.createSelector)([ls,ss],(function(t,e){var n=t.whitePlayerId,i=t.blackPlayerId;return n===e?n:i===e?i:xr.playerId}))),ms=(0,Ct.createSelector)([ls,ss],(function(t,e){var n=t.whitePlayerId,i=t.blackPlayerId,r=t.whitePlayerFinish,a=t.blackPlayerFinish;return e&&n===e?r:!(!e||i!==e)&&a})),gs=(0,Ct.createSelector)([ls,function(t,e){return e.opponentId}],(function(t,e){var n=t.whitePlayerId,i=t.blackPlayerId,r=t.whitePlayerFinish,a=t.blackPlayerFinish;return e&&n===e?r:!(!e||i!==e)&&a})),vs=(0,Ct.createSelector)([function(t){return Fa(t).match.group.opponentInfo}],(function(t){return t})),ys=((0,Ct.createSelector)([function(t){return Fa(t).match.online.players}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Fa(t).stats.data}],(function(t){return t}))),xs=(0,Ct.createSelector)([function(t){return Fa(t).stats.current}],(function(t){return t})),bs=((0,Ct.createSelector)([function(t){return Fa(t).stats.isRequesting}],(function(t){return t})),(0,Ct.createSelector)([function(t){return t.messages.data}],(function(t){return t}))),Es=(0,Ct.createSelector)([bs,function(t,e){return e.opponentId}],(function(t,e){return!!GameCore.Utils.Valid.isString(e)&&(!!GameCore.Utils.Object.hasOwn(t,e)&&t[e].sent)})),As=n(41),ws=new(n.n(As)()),Ss=function(t){if("string"!==typeof t||!t)throw new rs(null,{imageShare:t})},Ms=function(){return(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h,c,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=window.game,n=e.player,i=e.analytics,r=e.facebook,a=e.globalScene,t.prev=1,a.screen.open(aa,{message:"Loading...",loading:!0}),t.next=5,Ts();case 5:return s=t.sent,Ss(s),o=n.getPlayer(),h=o.playerId,c=o.name,l=o.photo,t.next=10,r.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:s||"",data:{playerId:h,playerName:c,playerPhoto:l,type:pr}});case 10:i.event(an.AnalyticsEvents.SHARE,{share_content_type:"BestScore",success:!0}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),i.event(an.AnalyticsEvents.SHARE,{share_content_type:"BestScore",success:!1}),(0,H.sendException)(t.t0);case 17:return t.prev=17,a.screen.close(aa),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,13,17,20]])})))},Ts=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h,c;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=window.game,n=e.player,i=e.globalScene,r=n.getPlayer(),a=r.playerId,s=r.photo,r.data,o=n.getLevel(),h=Is({playerId:a,playerPhoto:s,playerScore:o})){t.next=7;break}return t.abrupt("return");case 7:return c={name:"share-best-score",width:952,height:492,renderOptions:h},t.next=10,i.frameCapture.capture(c);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Cs=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s,o,h,c,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=window.game,i=n.player,r=n.globalScene,a=i.getPlayer(),s=a.playerId,o=a.photo,h=i.getLevel(),c=Is({playerId:s,playerPhoto:o,playerScore:h})){t.next=7;break}return t.abrupt("return");case 7:return l={name:"share-current-score",width:952,height:492,renderOptions:c},t.next=10,r.frameCapture.capture(l);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Is=function(t){var e=t.playerId,n=void 0===e?"10":e,i=t.playerPhoto,r=void 0===i?"":i,a=t.playerScore,s=void 0===a?0:a;return"string"!==typeof n||"string"!==typeof r||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:620,y:110,image:r,width:240,height:240,fallbackWithImage:yr.default.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:454,font:"600 70px",fillStyle:"#c4683f",text:"Level "+s,textAlign:"center"},playerScore:{type:"text",x:740,y:450,font:"600 70px",fillStyle:"#f2a62e",text:"Level "+s,textAlign:"center"}}},Ps=function(){return(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h,c,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=window.game,n=e.player,i=e.analytics,r=e.facebook,a=e.globalScene,t.prev=1,a.screen.open(aa,{message:"Loading...",loading:!0}),t.next=5,ks();case 5:return s=t.sent,Ss(s),o=n.getPlayer(),h=o.playerId,c=o.name,l=o.photo,t.next=10,r.shareAsync({text:"A ha, I'm the best!",intent:"CHALLENGE",image:s||"",data:{playerId:h,playerName:c,playerPhoto:l,type:pr}});case 10:i.event(an.AnalyticsEvents.SHARE,{share_content_type:"Leaderboard",success:!0}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),i.event(an.AnalyticsEvents.SHARE,{share_content_type:"Leaderboard",success:!1}),(0,H.sendException)(t.t0);case 17:return t.prev=17,a.screen.close(aa),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,13,17,20]])})))},ks=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=window.game,n=e.player,i=e.profile,r=e.globalScene,a=n.getPlayer(),s=a.playerId,o=a.name,h=a.photo,(c=n.getConnectedPlayerIds(99,0)).push(s),l=[],t.next=7,Ia({playerIds:GameCore.Utils.Array.unique(c),limit:c.length});case 7:u=t.sent,d=GameCore.Utils.Object.keyBy(u,"playerId"),f={playerId:s,name:o,photo:h,score:0},GameCore.Utils.Object.hasOwn(d,s)&&(f=d[s]),l.push(f),t.t0=Z().keys(d);case 14:if((t.t1=t.t0()).done){t.next=27;break}if(p=t.t1.value,!GameCore.Utils.Object.hasOwn(d,p)){t.next=25;break}if(m=d[p],3!==l.length){t.next=20;break}return t.abrupt("break",27);case 20:if(m.playerId!==s){t.next=22;break}return t.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(f.score))){t.next=24;break}return t.abrupt("continue",14);case 24:l.push(m);case 25:t.next=14;break;case 27:return g=GameCore.Utils.Array.unique(c),t.next=30,i.requestProfiles(g);case 30:if(v=i.getProfiles(),l.forEach((function(t,e){var n=t.playerId;if(GameCore.Utils.Object.hasOwn(v,n)){var i=v[n],r=i.name,a=i.photo;l[e].name=r,l[e].photo=a}})),l.length<3)for(y=0;y<=3-l.length;)l.push({playerId:"bot"+y,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),y++;if(x=Rs({playerId:s,playerName:o,playerPhoto:h,listLeaders:l})){t.next=37;break}return t.abrupt("return");case 37:return b={name:"share-leaderboard",width:1500,height:2e3,renderOptions:x},t.next=40,r.frameCapture.capture(b);case 40:return t.abrupt("return",t.sent);case 41:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Rs=function(t){var e=t.playerId,n=void 0===e?"10":e,i=t.playerPhoto,r=void 0===i?"":i,a=t.listLeaders,s=void 0===a?[]:a;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof r)return null;var o={avatar:{name:""+n,type:"image",x:510,y:280,image:r,width:510,height:510,fallbackWithImage:yr.default.AVATAR.KEY}};return s.forEach((function(t,e){var n=t.playerId,i=t.photo;o["photo_"+n]={name:""+n,type:"image",x:472,y:1170+220*e,image:i,width:144,height:144,fallbackWithImage:yr.default.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(t,e){var n=t.playerId,i=t.name,r=t.score;o["name_"+n]={type:"text",x:650,y:1256+220*e,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1256+220*e,font:"600 48px",text:r,fillStyle:"#b18151"}})),o},Ls=function(){return function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d,f;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game,r=i.player,a=i.analytics,s=i.facebook,o=i.globalScene,t.prev=1,o.screen.open(aa,{message:"Loading...",loading:!0}),h=n(),t.next=6,Os(h);case 6:return c=t.sent,Ss(c),l=r.getPlayer(),u=l.playerId,d=l.name,f=l.photo,t.next=11,s.shareAsync({text:"Pheww, a great match!",intent:"SHARE",image:c||"",data:{playerId:u,playerName:d,playerPhoto:f,type:pr}});case 11:a.event(an.AnalyticsEvents.SHARE,{share_content_type:"MatchResult",success:!0}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),a.event(an.AnalyticsEvents.SHARE,{share_content_type:"MatchResult",success:!1}),(0,H.sendException)(t.t0);case 18:return t.prev=18,o.screen.close(aa),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,14,18,21]])})));return function(e,n){return t.apply(this,arguments)}}()},Os=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s,o,h,c,l,u,d,f,p,m,g,v,y,x;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=window.game,i=n.player,r=n.globalScene,a=ys(e),s=i.getPlayer(),o=s.photo,h=s.playerId,c=fs(e),l=c.playerId,u=c.photo,d=ms(e,{playerId:h}),f=gs(e,{opponentId:l}),p=a[h]||{},m=p.score,g=a[l]||{},v=g.score,y=Ds({playerId:h,playerPhoto:o,playerScore:m,opponentId:l,opponentPhoto:u,opponentScore:v,isPlayerFinished:d,isOpponentFinished:f})){t.next=12;break}return t.abrupt("return");case 12:return x={name:"share-game-result",width:952,height:492,renderOptions:y},t.next=15,r.frameCapture.capture(x);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_s=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s,o,h,c,l,u,d,f,p,m,g;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=window.game,i=n.player,r=n.globalScene,a=ys(e),s=i.getPlayer(),o=s.photo,h=s.playerId,c=vs(e),l=c.playerId,u=c.photo,d=c.score,f=a[h]||{},p=f.score,m=Ds({playerId:h,playerPhoto:o,playerScore:p,opponentId:l,opponentPhoto:u,opponentScore:d})){t.next=9;break}return t.abrupt("return");case 9:return g={name:"share-group-match-result",width:952,height:492,renderOptions:m},t.next=12,r.frameCapture.capture(g);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ds=function(t){var e=t.playerId,n=void 0===e?"10":e,i=t.playerPhoto,r=void 0===i?"":i,a=t.playerScore,s=void 0===a?0:a,o=t.opponentId,h=void 0===o?"20":o,c=t.opponentPhoto,l=void 0===c?"":c,u=t.opponentScore,d=void 0===u?0:u,f=t.isPlayerFinished,p=t.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof r)return null;if("number"!==typeof s)return null;if("string"!==typeof h)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof f)return null;if("boolean"!==typeof p)return null;var m=s===d,g=s>d,v=f||p,y=f&&p,x={leftPhoto:{name:""+n,type:"image",x:56,y:140,image:r,width:220,height:220,fallbackWithImage:yr.default.AVATAR.KEY},rightPhoto:{name:""+h,type:"image",x:690,y:140,image:l,width:220,height:220,fallbackWithImage:yr.default.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(x.leftScoreShadow={type:"text",x:162,y:444,font:"600 70px",fillStyle:"#c4683f",text:f?""+s:"???",textAlign:"center"},x.leftScore={type:"text",x:162,y:440,font:"600 70px",fillStyle:"#f2a62e",text:f?""+s:"???",textAlign:"center"},x.rightScoreShadow={type:"text",x:796,y:444,font:"600 70px",fillStyle:"#c4683f",text:p?""+d:"???",textAlign:"center"},x.rightScore={type:"text",x:796,y:440,font:"600 70px",fillStyle:"#f2a62e",text:p?""+d:"???",textAlign:"center"}),!m&&y&&(g?x.leftCrown={name:"crown-icon",type:"image",x:112,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}:x.rightCrown={name:"crown-icon",type:"image",x:750,y:72,image:"./assets/images/others/crown-icon.png",width:106,height:78}),x},Bs=function(t){var e=t.contextId;if(""===e||"string"!==typeof e)throw new ia(null,{contextId:e})},Ns=function(t){var e=t.opponentId,n=t.contextId;if(""===e||"string"!==typeof e)throw new is(null,{opponentId:e});if(""===n||"string"!==typeof n)throw new ia(null,{contextId:n})},Fs=function(t){if(null===t.imageShare)throw new rs},Us=function(t,e){return void 0===e&&(e=!0),function(n,i){var r,a=i(),s=bs(a);if(e){var o;if(null!=(o=s[t])&&o.sent)return;n(Gs(t))}null!=(r=s[t])&&r.sent&&n(Vs(t))}},Gs=function(t){return{type:yn,payload:{opponentId:t}}},Vs=function(t){return{type:xn,payload:{opponentId:t}}},Ys=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=window.game.facebook,Ns({opponentId:e,contextId:n}),(r=FBInstant.context.getID())!==n||""===n){t.next=6;break}return t.abrupt("return",r);case 6:if("10"!==e||""===n){t.next=8;break}return t.abrupt("return",n);case 8:if(!n){t.next=12;break}return t.next=11,i.switchAsync(n);case 11:return t.abrupt("return",FBInstant.context.getID());case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 17:return t.abrupt("return","");case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}(),zs=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m,g;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.game,s=a.player,o=a.analytics,h=a.facebook,n.prev=1,c=e.matchId,l=e.contextId,n.next=5,Ys(t,l);case 5:return u=n.sent,Bs({contextId:u}),d=r(),n.next=10,Os(d);case 10:return f=n.sent,Fs({imageShare:f}),p=s.getPlayer(),m=p.name,g=p.playerId,n.next=15,h.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:m+" challenges you",localizations:{en_US:m+" challenges you",vi_VN:m+" th\u1eed th\xe1ch b\u1ea1n trong tr\u1eadn \u0111\u1ea5u n\xe0y. Ch\u01a1i ngay!"}},image:f||"",template:"challenge",data:{type:gr,matchId:c,playerId:g,opponentId:t,status:yi}});case 15:i(Us(t)),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"Invite",success:!0}),ws.emit(as.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:t}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"Invite",success:!1}),(0,H.sendException)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(t,e){return n.apply(this,arguments)}}()},Ws=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m,g;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.game,s=a.player,o=a.analytics,h=a.facebook,n.prev=1,c=e.matchId,l=e.contextId,n.next=5,Ys(t,l);case 5:return u=n.sent,Bs({contextId:u}),d=r(),n.next=10,Os(d);case 10:return f=n.sent,Fs({imageShare:f}),p=s.getPlayer(),m=p.name,g=p.playerId,n.next=15,h.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:m+" just finished. Check them now.",localizations:{en_US:m+" just finished. Check them now.",vi_VN:m+" v\u1eeba ho\xe0n th\xe0nh m\xe0n ch\u01a1i. Nh\u1ea5n \u0111\u1ec3 xem k\u1ebft qu\u1ea3 tr\u1eadn \u0111\u1ea5u."}},image:f||"",template:"finished",data:{type:gr,matchId:c,playerId:g,opponentId:t,status:xi}});case 15:i(Us(t)),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,H.sendException)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(t,e){return n.apply(this,arguments)}}()},Hs=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.game,s=a.player,o=a.analytics,h=a.facebook,n.prev=1,c=e.matchId,l=e.contextId,n.next=5,Ys(t,l);case 5:return u=n.sent,Bs({contextId:u}),d=r(),n.next=10,Os(d);case 10:return f=n.sent,Fs({imageShare:f}),p=s.getPlayer(),m=p.name,g=p.playerId,v=ys(d),y=v[g]||{},x=y.score,b=void 0===x?0:x,n.next=17,h.sendMessage({cta:{default:"See result",localizations:{en_US:"See result",vi_VN:"Xem k\u1ebft qu\u1ea3"}},text:{default:m+" beat your high score. Their score: "+b,localizations:{en_US:m+" beat your high score. Their score: "+b,vi_VN:m+" \u0111\xe3 v\u01b0\u1ee3t qua \u0111i\u1ec3m s\u1ed1 c\u1ee7a b\u1ea1n, v\u1edbi "+b+" \u0111i\u1ec3m!"}},image:f||"",template:"pass_score",data:{type:gr,matchId:c,playerId:g,opponentId:t,status:xi}});case 17:i(Us(t)),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,H.sendException)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(t,e){return n.apply(this,arguments)}}()},Xs=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m,g,v;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.game,s=a.player,o=a.analytics,h=a.facebook,n.prev=1,c=e.matchId,l=e.contextId,u=e.score,n.next=5,Ys(t,l);case 5:return d=n.sent,Bs({contextId:d}),f=r(),n.next=10,Os(f);case 10:return p=n.sent,Fs({imageShare:p}),m=s.getPlayer(),g=m.name,v=m.playerId,n.next=15,h.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:g+" got "+u+" scores. So easy! Can you?",localizations:{en_US:g+" got "+u+" scores. So easy! Can you?",vi_VN:g+" \u0111\xe3 \u0111\u1ea1t "+u+" \u0111i\u1ec3m! Nh\u1ea5n Ch\u01a1i \u0111\u1ec3 so t\xe0i!"}},image:p||"",template:"play_turn",data:{type:gr,matchId:c,playerId:v,opponentId:t,status:yi}});case 15:i(Us(t)),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(1),o.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof ia)){n.next=24;break}return n.abrupt("return");case 24:(0,H.sendException)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(t,e){return n.apply(this,arguments)}}()},Ks=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,r=i.player,a=i.facebook,s=r.getPlayer(),o=s.playerId,h=s.name,c=s.photo,l=xs(n),u=l.score,d={type:vr,playerId:o,playerName:h,playerPhoto:c,playerScore:u},t.next=7,a.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:h+" beats your high score. Their score: "+u+".",localizations:{en_US:h+" beats your high score. Their score: "+u+".",vi_VN:h+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:e||"",template:"play_turn",data:d});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),js=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game,r=i.player,a=i.facebook,t.prev=1,s=r.getPlayer(),o=s.playerId,h=s.name,c=s.photo,l=xs(n),u=l.score,d={type:vr,playerId:o,playerName:h,playerPhoto:c,playerScore:u},t.next=7,a.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:h+" got "+u+" scores. So easy! Can you?",localizations:{en_US:h+" got "+u+" scores. So easy! Can you?",vi_VN:h+" \u0111\xe3 \u0111\u1ea1t "+u+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:e||"",template:"play_turn",data:d});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),(0,H.sendException)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}(),qs=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidMatchId",i.message=e||"Invalid match id",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Zs=GameCore.Configs.ApiHost,Qs=(function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"single-matches",t.next=3,Zt("single-matches",e,{},Zs);case 3:return n=t.sent,t.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return t.stop()}}),t)})))}(),function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"single-matches/active",t.next=3,qt("single-matches/active",{},Zs);case 3:return e=t.sent,t.abrupt("return",(null==e?void 0:e.data)||{});case 5:case"end":return t.stop()}}),t)})))}(),function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="single-matches/"+e+"/move",t.next=3,Zt(i,n,{},Zs);case 3:return r=t.sent,t.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return t.stop()}}),t)})))}(),function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="single-matches/"+e+"/finish",t.next=3,Zt(n,{},{},Zs);case 3:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return t.stop()}}),t)})))}(),function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"matches",t.next=3,Zt("matches",{opponentPlayerId:e},{},Zs);case 3:return n=t.sent,t.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Js=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="matches/"+e+"/join",t.next=3,Zt(n,{},{},Zs);case 3:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$s=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="matches/"+e,t.next=3,qt(n,{},Zs);case 3:return i=t.sent,t.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),to=function(){var t=(0,K.default)(Z().mark((function t(e,n,i,r){var a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="matches/"+e+"/finish",t.next=3,Zt(a,{matchId:e,score:n,level:i,extraData:r},{},Zs);case 3:return s=t.sent,t.abrupt("return",(null==s?void 0:s.data)||{});case 5:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),eo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidMatchStatus",i.message=e||"The match status is not valid",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),no=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidOpponentId",i.message=e||"Invalid opponent id",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),io=no,ro=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidBlackPlayerId",i.message=e||"Invalid black player id",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),ao=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidRequestedMatchId",i.message=e||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),so=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidScore",i.message=e||"The score is not valid",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),oo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="InvalidWhitePlayerId",i.message=e||"Invalid white player id",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),ho=function(t){var e=t.matchId,n=t.currentMatchId;if(""===e||"string"!==typeof e)throw new qs(null,{matchId:e});if(""===n||"string"!==typeof n)throw new qs(null,{currentMatchId:n});if(e!==n)throw new ao(null,{matchId:e,currentMatchId:n})},co=function(t){var e=t.playerId,n=t.match,i=n._id,r=n.playerId,a=n.status;if(""===i||"string"!==typeof i)throw new qs(null,{matchId:i});if("finished"===a||"string"!==typeof a)throw new eo("This match is finished",{status:a});if(r!==e)throw new fr(null,{playerId:r,currentPlayerId:e})},lo=function(t){var e=t.opponentId;if(""===e||"string"!==typeof e)throw new io(null,{opponentId:e})},uo=function(t){var e=t.matchId;if(""===e||"string"!==typeof e)throw new qs(null,{matchId:e})},fo=function(t){var e=t.match,n=e._id,i=e.whitePlayerId,r=e.blackPlayerId;if(""===n||"string"!==typeof n)throw new qs(null,{matchId:n});if(""===i||"string"!==typeof i)throw new oo(null,{whitePlayerId:i});if(""===r||"string"!==typeof r)throw new ro(null,{blackPlayerId:r})},po=GameCore.Configs.Match,mo=function(t){try{return GameCore.Utils.Hash.stringToHash(JSON.stringify(t))}catch(e){return""}},go=function(t){try{return JSON.parse(GameCore.Utils.Hash.hashToString(t))}catch(e){return""}},vo=function(){return function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=window.game,i=n.player,n.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),e({type:$n,payload:{}}),r=i.getPlayerId(),a=(0,O.default)({},po.LocalSingleMatchDefault,{status:"active",playerId:r,startedAt:Date.now()}),co({playerId:r,match:a}),e(bo(a)),Ft(po.SingleMatchStore,a),t.next=19;break;case 11:if(t.prev=11,t.t0=t.catch(0),e(bo(null)),!(t.t0 instanceof qs)){t.next=16;break}return t.abrupt("return");case 16:if(!(t.t0 instanceof eo)){t.next=18;break}return t.abrupt("return");case 18:(0,H.sendException)(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},yo=function(t,e){return function(n,i){try{!function(t){var e=t.matchId,n=t.score;if(""===e||"string"!==typeof e)throw new qs(null,{matchId:e});if("number"!==typeof n)throw new so(null,{score:n})}((0,O.default)({matchId:t},e));var r=i(),a=hs(r);!function(t){var e=t.matchId,n=t.currentMatchId;if(""===e||"string"!==typeof e)throw new qs(null,{matchId:e});if(""===n||"string"!==typeof n)throw new qs(null,{currentMatchId:n});if(e!==n)throw new ao(null,{matchId:e,currentMatchId:n})}({matchId:t,currentMatchId:a}),n({type:ei,payload:{match:e}});var s=e.data;e.data=mo(s),Ft(po.SingleMatchStore,e)}catch(o){if(o instanceof qs)return;(0,H.sendException)(o)}}},xo=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n,i){var r,a,s,o,h,c,l,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=window.game.player,uo({matchId:t}),a=i(),s=hs(a),o=r.getPlayerId(),ho({matchId:t,currentMatchId:s}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:t}}),h=os(a),co({playerId:o,match:h}),c=(0,O.default)({},po.LocalSingleMatchDefault,h,{_id:t,status:"finished",playerId:o,finishAt:Date.now()}),n(bo(c)),l=c.data,(u=(0,O.default)({},c)).data=mo(l),Ft(po.SingleMatchStore,u),e.next=26;break;case 18:if(e.prev=18,e.t0=e.catch(0),n(bo(null)),!(e.t0 instanceof qs)){e.next=23;break}return e.abrupt("return");case 23:if(!(e.t0 instanceof eo)){e.next=25;break}return e.abrupt("return");case 25:(0,H.sendException)(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}()},bo=function(t){return{type:ni,payload:{match:t}}},Eo=function(){return{type:ii,payload:{}}},Ao=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n){var i,r,a,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,r=i.profile,i.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),a=t.playerId,lo({opponentId:a}),n({type:ai,payload:{opponentInfo:t}}),e.next=8,Qs(a);case 8:return s=e.sent,fo({match:s}),e.next=12,r.requestProfiles([a]);case 12:n(To(s)),e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(0),n(To(null)),!(e.t0 instanceof qs)){e.next=20;break}return e.abrupt("return");case 20:if(!(e.t0 instanceof io)){e.next=22;break}return e.abrupt("return");case 22:(0,H.sendException)(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},wo=function(t){return function(){var e=(0,K.default)(Z().mark((function e(n){var i,r,a,s,o,h,c,l,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,r=i.player,a=i.profile,i.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),uo({matchId:t}),n({type:ri,payload:{matchId:t}}),e.next=7,Js(t);case 7:if(s=e.sent,fo({match:s}),o=s.status,h=s.whitePlayerId,c=s.blackPlayerId,o!==yi){e.next=16;break}return l=r.getPlayerId(),u=l===h?c:h,e.next=16,a.requestProfiles([u]);case 16:n(To(s)),e.next=25;break;case 19:if(e.prev=19,e.t0=e.catch(0),n(To(null)),!(e.t0 instanceof qs)){e.next=24;break}return e.abrupt("return");case 24:(0,H.sendException)(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()},So=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i){var r,a,s,o,h,c,l,u,d;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=window.game,a=r.player,r.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),uo({matchId:t}),i({type:oi,payload:{matchId:t,opponentInfo:e}}),n.next=7,$s(t);case 7:s=n.sent,fo({match:s}),o=s.whitePlayerId,h=s.whitePlayerScore,c=s.blackPlayerScore,l=a.getPlayerId(),u=a.getPlayerData(),d=u.score,i(To(s,{score:l===o?h:c,bestScore:d})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),i(To(null)),!(n.t0 instanceof qs)){n.next=22;break}return n.abrupt("return");case 22:(0,H.sendException)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(t){return n.apply(this,arguments)}}()},Mo=function(t,e,n){return function(){var i=(0,K.default)(Z().mark((function i(r){var a,s;return Z().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,window.game.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),uo({matchId:t}),r({type:si,payload:{matchId:t,score:e,extraData:n}}),a=n.level,i.next=8,to(t,e,a,n);case 8:return s=i.sent,fo({match:s}),i.next=12,r(To(s));case 12:i.next=20;break;case 14:if(i.prev=14,i.t0=i.catch(0),r(To(null)),!(i.t0 instanceof qs)){i.next=19;break}return i.abrupt("return");case 19:(0,H.sendException)(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,14]])})));return function(t){return i.apply(this,arguments)}}()},To=function(t,e,n){return void 0===n&&(n=null),{type:hi,payload:{match:t,opponentInfo:e,current:n}}},Co=function(t){return{type:li,payload:{opponentInfo:t}}},Io=function(t,e){return{type:fi,payload:{matchId:t,players:e}}},Po=function(t){return{type:Zn,payload:{playerId:t}}},ko=function(t,e){return{type:Qn,payload:{playerId:t,stats:e}}},Ro=function(t){return{type:Jn,payload:{stats:t}}},Lo=function(t){var e=t.contextId;if(""===e||"string"!==typeof e)throw new ia(null,{contextId:e})},Oo=null,_o=function(t){clearTimeout(Oo),Oo=setTimeout((function(){window.game.globalScene.screen.close(aa)}),t)},Do=function(){return function(t){try{t(Eo()),t(Wo(wr))}catch(e){(0,H.sendException)(e)}}},Bo=function(){return function(t){try{t(Eo()),t(Wo(br))}catch(e){(0,H.sendException)(e)}}},No=function(){return function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,window.game.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),i=n(),r=Ua(i),[br,wr].indexOf(r)>=0&&(e(Eo()),e(vo())),a=null,r===Er&&(a=fs(i),e({type:ci,payload:{}})),e(Po()),t.next=11,e(Wo(r,a));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 16:return t.prev=16,_o(300),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})));return function(e,n){return t.apply(this,arguments)}}()},Fo=function(t,e){return void 0===t&&(t="10"),void 0===e&&(e=!1),function(n){try{n(Uo("reset",t,e))}catch(i){(0,H.sendException)(i)}}},Uo=function(t,e,n){return void 0===e&&(e="10"),void 0===n&&(n=!1),function(){var i=(0,K.default)(Z().mark((function i(r){var a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b,E;return Z().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,a=window.game,s=a.player,o=a.facebook,(h=a.globalScene).screen.open(aa,{message:"Loading...",loading:!0}),c=t,l=o.contextType,e||(u=GameCore.Configs.PlayerIdMock,d=GameCore.Configs.PlayerIdMock2,e=s.getPlayerId()===u?d:u),t){i.next=15;break}return i.next=9,o.chooseAsync();case 9:if(!1!==(c=i.sent)){i.next=13;break}return n&&h.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.DASHBOARD_SCENE),i.abrupt("return");case 13:i.next=25;break;case 15:if(!e||e===xr.playerId){i.next=23;break}return i.next=18,o.createAsync(e);case 18:if(!1!==(c=i.sent)){i.next=22;break}return n&&h.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.DASHBOARD_SCENE),i.abrupt("return");case 22:c||"reset"===t||(c=t);case 23:l=o.contextType,r(Cr(c,l));case 25:return Lo({contextId:c}),f=s.getPlayerId(),p=s.getConnectedPlayers(),i.next=30,o.getContextPlayers(f);case 30:return m=i.sent,e!==(g=xr).playerId&&p[e]?g=p[e]:1===m.length&&(g=m[0]),r(Po()),y=(v=g).playerId,x=v.name,b=v.photo,E={playerId:y,name:x,photo:b},i.next=38,r(Wo(Er,E));case 38:r(Cr(c,l)),i.next=50;break;case 41:if(i.prev=41,i.t0=i.catch(0),!(i.t0 instanceof ia)){i.next=45;break}return i.abrupt("return");case 45:if("USER_INPUT"!==(null==i.t0?void 0:i.t0.code)){i.next=47;break}return i.abrupt("return");case 47:if("INVALID_OPERATION"!==(null==i.t0?void 0:i.t0.code)){i.next=49;break}return i.abrupt("return");case 49:(0,H.sendException)(i.t0);case 50:return i.prev=50,_o(1e3),i.finish(50);case 53:case"end":return i.stop()}}),i,null,[[0,41,50,53]])})));return function(t){return i.apply(this,arguments)}}()},Go=function(t){return void 0===t&&(t=null),function(){var e=(0,K.default)(Z().mark((function e(n){var i,r,a,s,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,r=i.facebook,a=i.globalScene,s=i.analytics,a.screen.open(aa,{message:"Loading...",loading:!0}),o=r.getContextID(),Lo({contextId:o}),s.event(an.AnalyticsEvents.JOIN_GROUP,{group_id:o}),e.next=8,n(Wo(Ar,t));case 8:e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(0),!(e.t0 instanceof ia)){e.next=14;break}return e.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==e.t0?void 0:e.t0.code)){e.next=16;break}return e.abrupt("return");case 16:(0,H.sendException)(e.t0);case 17:return e.prev=17,_o(1e3),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,10,17,20]])})));return function(t){return e.apply(this,arguments)}}()},Vo=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m,g,v,y,x;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=window.game,s=a.player,o=a.profile,h=a.facebook,(c=a.globalScene).screen.open(aa,{message:"Loading...",loading:!0}),l=r(),u=s.getPlayerId(l),!((d=s.getConnectedPlayers(l)).length>0)||d[e]){n.next=9;break}return c.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.DASHBOARD_SCENE),n.abrupt("return");case 9:return f=xr,n.next=12,h.getContextPlayers(u);case 12:if(p=n.sent,e===u||e===f.playerId||!d[e]){n.next=17;break}f=d[e],n.next=25;break;case 17:if(1!==p.length){n.next=21;break}f=p[0],n.next=25;break;case 21:return n.next=23,o.requestProfiles([e]);case 23:(m=o.getProfiles())[e]&&(f=m[e]);case 25:return n.next=27,i(So(t,f));case 27:if(l=r(),ps(l,{playerId:u})!==xr.playerId){n.next=32;break}return n.next=32,i(wo(t));case 32:if(l=r(),ps(l,{playerId:u})===u||!d[e]){n.next=37;break}return i(Fo(e,!0)),n.abrupt("return");case 37:if(us(l)===t){n.next=41;break}return c.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.DASHBOARD_SCENE),n.abrupt("return");case 41:if(g=ds(l),v=ms(l,{playerId:u}),i(Xo({mode:Er,status:g})),y=h.getContextID(),x=h.contextType,i(Cr(y,x)),!v){n.next=52;break}return n.next=50,s.requestConnectedPlayers();case 50:return c.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.GAME_OVER_SCENE),n.abrupt("return");case 52:c.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,H.sendException)(n.t0);case 58:return n.prev=58,_o(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(t,e){return n.apply(this,arguments)}}()},Yo=function(){return function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b,E,A,w,S,M,T;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,r=i.analytics,a=i.facebook,i.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),s=n(),o=Ua(s),h=xs(s),c=h.score,l=void 0===c?0:c,u=h.level,d=void 0===u?0:u,e(es(l)),e(zo(l)),t.next=10,e(Ho(o,{score:l}));case 10:if(s=n(),f=Ga(s),p=Va(s),m=Math.floor((p-f)/1e3),r.event(an.AnalyticsEvents.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),level:d,level_name:"level_"+d,time_played:m}),g=a.getContextID(),o===Ar&&g&&e(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=window.game.analytics,t.prev=1,r=FBInstant.context.getID(),Bs({contextId:r}),a=n(),s=vs(a),o=s.playerId,h=s.score,c=xs(a),l=c.score,!o||o===xr.playerId){t.next=25;break}if(!(l>h)){t.next=18;break}return t.next=13,_s(a);case 13:return u=t.sent,t.next=16,Ks(u,a);case 16:t.next=23;break;case 18:return t.next=20,Cs(a);case 20:return u=t.sent,t.next=23,js(u,a);case 23:t.next=30;break;case 25:return t.next=27,Cs(a);case 27:return u=t.sent,t.next=30,js(u,a);case 30:Fs({imageShare:u}),i.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"InviteGroup",success:!0}),t.next=38;break;case 34:t.prev=34,t.t0=t.catch(1),i.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,H.sendException)(t.t0);case 38:case"end":return t.stop()}}),t,null,[[1,34]])})));return function(e,n){return t.apply(this,arguments)}}()),!g||o!==Er){t.next=26;break}if(v=fs(s),(y=v.playerId)&&y!==xr.playerId){t.next=21;break}return t.abrupt("return");case 21:x=ys(s),b=x[y]||{},E=b.score,A=void 0===E?0:E,w=ls(s),S=w._id,M=w.whitePlayerFinish,T=w.blackPlayerFinish,e(M&&T?l>A?Hs(y,{matchId:S,contextId:g}):Ws(y,{matchId:S,contextId:g}):Xs(y,{matchId:S,contextId:g,score:l}));case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),(0,H.sendException)(t.t0);case 31:return t.prev=31,_o(300),t.finish(31);case 34:case"end":return t.stop()}}),t,null,[[0,28,31,34]])})));return function(e,n){return t.apply(this,arguments)}}()},zo=function(t){return function(e){try{var n=window.game.player,i=n.getPlayerId();Oa(i,t).catch((function(t){(0,H.sendException)(new Error(t))}));var r=n.getPlayerData(),a=r.score,s=void 0===a?0:a,o=r.level;s<t&&n.setScore(t);var h={score:t,level:o};e(ko(i,h)),e(Ro(h))}catch(c){if(c instanceof Na)return;(0,H.sendException)(c)}}},Wo=function(t,e){return void 0===e&&(e=null),function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m,g,v,y;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=window.game,s=a.player,o=a.analytics,h=a.facebook,c=a.globalScene,l=h.getContextID(),u=0,d=r(),o.event(an.AnalyticsEvents.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(t),level:1,level_name:"level_1"}),i({type:Hn,payload:{}}),![br,wr].indexOf(t)){n.next=16;break}return n.next=10,i((function(t){try{var e=window.game.player;t({type:ti,payload:{}});var n=e.getPlayerId(),i=Nt(po.SingleMatchStore)||{},r=i.data;i.data=go(r),co({playerId:n,match:i}),t(bo(i))}catch(a){if(t(bo(null)),a instanceof qs)return;if(a instanceof fr)return;if(a instanceof eo)return;(0,H.sendException)(a)}}));case 10:if(d=r(),hs(d)){n.next=15;break}return n.next=15,i(vo());case 15:u=cs(d);case 16:if(t===Ar&&i(Co(e)),t!==Er){n.next=26;break}return n.next=20,i(Ao(e));case 20:d=r(),f=us(d),p=fs(d),m=p.playerId,l||(l=window.FBInstant.context.getID()),g=Es(d,{opponentId:m}),l&&m&&!g&&i(zs(m,{contextId:l,matchId:f}));case 26:t===Sr&&i(function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s,o;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=window.game.player,i=n.getPlayer(),r=i.playerId,a=i.name,s=i.photo,e({type:di,payload:{playerId:r}}),o={},new Array(20).fill(null).map((function(t,e){var n="0"+(e+1);o[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),o[r]={playerId:r,name:a,photo:s},e(Io("mock",o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),v=s.getPlayerData(d),y=v.score,i(Ro({score:u,bestScore:void 0===y?0:y})),i({type:Xn,payload:{mode:t,contextId:l}}),i(Ir(t)),c.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.GAME_SCENE),n.next=41;break;case 34:if(n.prev=34,n.t0=n.catch(0),!(n.t0 instanceof qs)){n.next=40;break}return window.game.globalScene.screen.open(aa,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 40:(0,H.sendException)(n.t0);case 41:return n.prev=41,_o(0),n.finish(41);case 44:case"end":return n.stop()}}),n,null,[[0,34,41,44]])})));return function(t,e){return n.apply(this,arguments)}}()},Ho=function(t,e){return function(){var n=(0,K.default)(Z().mark((function n(i,r){var a,s,o,h,c,l,u,d,f,p,m;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=window.game,s=a.player,o=a.globalScene,h=e.score,c=void 0===h?0:h,l=e.level,u=void 0===l?0:l,d=r(),!([br,wr].indexOf(t)>=0)){n.next=7;break}return f=hs(d),n.next=7,i(xo(f));case 7:if(t===Ar&&(i({type:ui,payload:{}}),p=s.getPlayerId(),i(ko(p,e))),t!==Er){n.next=12;break}return m=us(d),n.next=12,i(Mo(m,c,{level:u}));case 12:i({type:Kn,payload:{mode:t}}),o.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.GAME_OVER_SCENE);case 14:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},Xo=function(t){return function(e){var n=t.mode,i=t.status;e({type:jn,payload:{mode:n,status:i}}),(0,H.addBreadcrumbSentry)("game-mode",n)}},Ko=n(17),jo=n(7),qo=n(5),Zo=Zr.default.DEFAULT,Qo=Zo.KEY,Jo=Zo.FRAME,$o=function(t){function e(e){var n;return(n=t.call(this,e,Qo,Jo.BUTTON_GREEN)||this).button.setWorldSize(170,70.5),n.setName("PlaySingle"),n.createText(),n}return(0,j.default)(e,t),e.prototype.createText=function(){var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(26),text:"PLAY NOW",origin:{x:.5,y:.5}});this.add(t)},e}(jo.default),th=$o,eh=function(t){function e(e){var n;return(n=t.call(this,e)||this).logo=void 0,n.playSingleButton=void 0,n.playWithFriendsButton=void 0,n.createPlaySingleButton(),n.scene.add.existing((0,jr.default)(n)),n}return(0,j.default)(e,t),e.prototype.createPlaySingleButton=function(){this.playSingleButton=new th(this.scene),this.add(this.playSingleButton),Phaser.Display.Align.In.Center(this.playSingleButton,this,0,160)},e}(Phaser.GameObjects.Container),nh=eh,ih=(GameCore.Configs.Gameplay,function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).main=void 0,e.header=void 0,e.footer=void 0,e.rewardScreen=void 0,e.dailyMissionScreen=void 0,e.dailyRewardsScreen=void 0,e.fireworks=void 0,e.currentDiamond=void 0,e.timerDailyRewards=void 0,e.popup=void 0,e.run=function(){},e.handlePlaySingle=function(){e.storage.dispatch(Bo())},e}(0,j.default)(e,t);var n=e.prototype;return n.create=function(){t.prototype.create.call(this),this.createBackground(yr.default.BACKGROUND.KEY),this.createPopup(),this.createMainContent()},n.createPopup=function(){this.popup=new ea(this,0,0,300,300),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.createMainContent=function(){this.main=new nh(this),this.main.setDepth(qr.default.LOGO),this.main.playSingleButton.onClick=this.handlePlaySingle,Phaser.Display.Align.In.Center(this.main,this.gameZone,0,50)},e}(Ko.default));var rh=ih,ah=n(13),sh={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},oh=function(t){function e(e){return t.call(this,sh,e)||this}return(0,j.default)(e,t),e}(ah.default),hh=oh,ch=Zr.default.DEFAULT,lh=ch.KEY,uh=ch.FRAME,dh=function(t){function e(e){var n;return(n=t.call(this,e,0,0,lh,uh.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(113,113),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.runAnimation=function(){var t;null==(t=this.anim)||t.remove(),this.anim=new hh({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(e){return t.prototype.setVisible.call(this,e),e?this.runAnimation():this.anim.stop(),this},e}(Phaser.GameObjects.Image),fh=dh,ph=Zr.default.DEFAULT,mh=ph.KEY,gh=ph.FRAME,vh=function(t){function e(e,n){var i;return(i=t.call(this,e,mh,gh.BLANK)||this).config=void 0,i.emitter=void 0,i.config=n||{},i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.createEmitters=function(){var t=gh.BLANK,e=gh.BLANK,n=gh.BLANK,i=gh.BLANK,r=1/this.scene.world.getPixelRatio(),a={on:!1,particleBringToTop:!0,frame:[t,e,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*r,max:2*r},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},s=(0,_.merge)(a,this.config);this.emitter=this.createEmitter(s)},n.run=function(t,e,n){this.stop(),this.emitter.setQuantity(t),this.emitter.setPosition(e,n),this.emitter.start()},n.explode=function(t,e,n){this.emitter||this.createEmitters(),this.emitter.explode(t,e,n)},n.stop=function(){var t,e,n;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),yh=vh;function xh(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return bh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bh(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Eh=GameCore.Configs.LeadersBoard,Ah=function(t,e,n,i){return void 0===n&&(n=Eh.LeaderBoardLimit),void 0===i&&(i=0),function(){var r=(0,K.default)(Z().mark((function r(a,s){var o,h,c,l,u,d,f,p,m,g,v,y,x,b,E,A,w;return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,o=window.game,h=o.player,o.profile,s(),c=h.getPlayerId(),a({type:Pi,payload:{leaderboardId:t,type:e,limit:n,offset:i}}),!Eh.UseMock){r.next=11;break}return r.next=8,(0,Vt.sleepAsync)(1e3);case 8:return l=new Array(n).fill(null).map((function(t,e){var n=(e+1)*(i+1);return{playerId:"0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)}})),a(wh(l,e)),r.abrupt("return");case 11:if(u=[],e!==fa){r.next=18;break}return r.next=15,Ma({limit:n,offset:i});case 15:u=r.sent,r.next=26;break;case 18:if(e!==pa){r.next=26;break}return(d=h.getConnectedPlayerIds(n,i)).push(c),f=GameCore.Utils.Array.unique(d),r.next=24,Ia({playerIds:f,limit:f.length});case 24:u=r.sent,f.forEach((function(t){var e=u.filter((function(e){return e.playerId===t}));e&&0!==e.length||u.push({playerId:t,score:0})}));case 26:for(p={},m=xh(u);!(g=m()).done;)v=g.value,y=v.playerId,x=v.score,b=v.rank,E=v.getPlayer(),A=E.getPhoto(),w=E.getName(),p[y]={playerId:y,name:w,photo:A,score:x,rank:b};a(wh(p,e)),r.next=35;break;case 31:r.prev=31,r.t0=r.catch(0),a(wh([],e)),(0,H.sendException)(r.t0);case 35:case"end":return r.stop()}}),r,null,[[0,31]])})));return function(t,e){return r.apply(this,arguments)}}()},wh=function(t,e){return{type:ki,payload:{leaders:t,type:e}}},Sh=function(t){return t.leaderboards},Mh=((0,Ct.createSelector)([function(t){return Sh(t).leaderboardId}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Sh(t).limit}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Sh(t).offset}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Sh(t).leaders}],(function(t){return t}))),Th=((0,Ct.createSelector)([function(t){return Sh(t).type}],(function(t){return t})),(0,Ct.createSelector)([function(t){return Sh(t).isRequesting}],(function(t){return t}))),Ch={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},Ih=function(t){function e(e){return t.call(this,Ch,e)||this}return(0,j.default)(e,t),e}(ah.default),Ph=Ih,kh=function(t){var e=t?t.split("_"):[],n=e.length>0?e[0]:"en_US";switch(n){case"id":case"in":n="id"}return n},Rh=function(t){function e(e,n){var i;(i=t.call(this,e)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(t,e){return function(){var n=i.scene.textures.get(t);n&&n.key===t?i.handleLoadComplete(t):(i.scene.load.once("filecomplete-image-"+t,i.handleLoadComplete),i.scene.load.image(t,e),i.scene.load.start())}},i.handleLoadComplete=function(t){if(i.scene){var e=i.payload,n=e.id,r=e.radius,a=void 0===r?0:r;if(n&&n===t){var s=n+"_bordered_"+a,o=a>0?s:n,h=i.scene.textures.get(o);if(h&&h.key===o)i.setPhoto(h.key);else if(0!=a&&a<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:a}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==a){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(t){t.key===i.payload.id&&i.setDefaultAvatar(t.key)},i.scene.add.existing((0,jr.default)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var r=i.payload,a=r.id,s=r.url,o=r.radius;return a&&s&&i.loadPhoto(a,s,o),i.addDefaultListeners(),i}(0,j.default)(e,t);var n=e.prototype;return n.setFrame=function(t){this.avtFrame.setFrame(t),this.avtFrame.setVisible(!0)},n.setBackground=function(t){this.background.setFrame(t)},n.loadPhoto=function(t,e,n){var i;if(void 0===n&&(n=0),this.payload.id=t,this.payload.url=e,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),t&&e){var r=this.scene.textures.get(t);if(r&&r.key===t)this.handleLoadComplete(t);else{this.showLoading(!0);var a=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(a,this.handleLoadPhotoAfterDelay(t,e))}}else this.setPhoto(yr.default.AVATAR.KEY)},n.addDefaultListeners=function(){var t=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var e;null==(e=t.loadPhotoTimer)||e.remove(),t.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,t.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(t){this.loadPhoto(t,yr.default.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var t=this.payload,e=t.key,n=t.background;this.background=this.scene.make.image({key:e,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new fh(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var t=this.payload,e=t.key,n=t.frame,i=t.width,r=t.height;n?(this.avtFrame=this.scene.make.image({key:e,frame:n}),this.avtFrame.setWorldSize(i,r)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(t){this.photo.setVisible(!t),this.loading.setVisible(t)},n.setPhoto=function(t){this.showLoading(!1),this.photo.setTexture(t),this.photo.setFrame(0);var e=this.payload,n=e.width,i=e.height,r=Math.min(n,i)-10;this.photo.setWorldSize(r,r),Phaser.Display.Align.In.Center(this.photo,this.background)},e}(Phaser.GameObjects.Container),Lh=Rh,Oh=Zr.default.DEFAULT,_h=Oh.KEY,Dh=Oh.FRAME,Bh=function(t){function e(e){var n;return(n=t.call(this,e,{key:_h,frame:Dh.BLANK,background:Dh.BLANK,width:60,height:60})||this).scene=void 0,n.scene=e,n}return(0,j.default)(e,t),e.prototype.setHighlight=function(t){this.background.setFrame(Dh.BLANK),this.avtFrame.setFrame(Dh.BLANK)},e}(Lh),Nh=Bh,Fh=Zr.default.DEFAULT,Uh=Fh.KEY,Gh=Fh.FRAME,Vh=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).scene=void 0,i.payload=void 0,i.avatar=void 0,i.block=void 0,i.rankIcon=void 0,i.rankText=void 0,i.playerScore=void 0,i.label=void 0,i.scene=e,i.createBlock(),i.createAvatar(),i.createRankIcon(),i.createRankText(),i.createLabel(),i.createPlayerScore(),n&&i.updateInfo(n),i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.updateInfo=function(t){this.payload=t,this.updateAvatar(),this.updateRankIcon(),this.updateRankText(),this.updatePlayerScore()},n.setLabel=function(t){this.label.setText(t)},n.setRank=function(t){this.rankText.setText(t)},n.setScore=function(t){this.playerScore.setText(t)},n.setHighlight=function(t){t?(this.y-=6,this.scale+=.1,this.label.scale+=.15,this.block.setFrame(Gh.BLANK)):(this.y+=6,this.scale-=.1,this.label.scale-=.15,this.block.setFrame(Gh.BLANK)),this.avatar.setHighlight(t)},n.createBlock=function(){this.block=this.scene.make.image({key:Uh,frame:Gh.BLANK}),this.block.setWorldSize(79,99),this.add(this.block)},n.createAvatar=function(){this.avatar=new Nh(this.scene),Phaser.Display.Align.In.TopCenter(this.avatar,this.block,0,this.avatar.displayHeight/2-4),this.add(this.avatar)},n.updateAvatar=function(){var t=this.payload,e=t.playerId,n=t.photo;this.avatar.loadPhoto(e,n,50)},n.getRankFrame=function(){var t=Gh.BLANK;switch(this.payload.rank){case 1:case 2:case 3:t=Gh.BLANK}return t},n.createRankIcon=function(){var t=Gh.BLANK;this.rankIcon=this.scene.make.image({key:Uh,frame:t}),t!=Gh.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15),this.add(this.rankIcon)},n.updateRankIcon=function(){var t=this.getRankFrame();this.rankIcon.setFrame(t),t!=Gh.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),Phaser.Display.Align.In.Center(this.rankIcon,this.block,0,-15)},n.createRankText=function(){this.rankText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"1"}),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2),this.add(this.rankText)},n.updateRankText=function(){this.rankText.setText(this.payload.rank.toString())},n.createLabel=function(){this.label=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:.5,y:0},text:"Play"}),Phaser.Display.Align.In.BottomCenter(this.label,this.block,0,-10),this.add(this.label)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5},text:"132500"}),this.playerScore.setTint(5582186),Phaser.Display.Align.In.Center(this.playerScore,this.block,0,5),this.add(this.playerScore)},n.updatePlayerScore=function(){this.playerScore.setText(Math.floor(this.payload.score).toString())},(0,wt.default)(e,[{key:"onClick",set:function(t){var e=this.block,n=e.width,i=e.height;this.setSize(n,i+this.avatar.height),this.setInteractive({useHandCursor:!0}),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t)}}]),e}(Phaser.GameObjects.Container),Yh=Vh,zh=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).scene=void 0,i.payload=void 0,i.leaderBlocks=void 0,i.entrancesAnimation=void 0,i.listLeaderBlocks=void 0,i.handleChallengeFriend=function(t){return function(){i.scene.storage.dispatch(Fo(t))}},i.handleShareLeaderboard=function(){i.scene.storage.dispatch(Ps())},i.handleMatchingGroup=(0,K.default)(Z().mark((function t(){var e,n,r,a,s,o,h,c,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.scene,n=e.player,r=e.storage,a=e.game,s=e.facebook,t.prev=1,a.globalScene.screen.open(aa,{message:"Loading...",loading:!0}),o=n.getPlayer(),h="global","en"===(c=kh(o.locale))&&(h="en"),"in"===c&&(h="in"),t.next=10,s.matchPlayerAsync(h,!0,!0);case 10:if(l=t.sent,a.globalScene.screen.close(aa),l){t.next=14;break}return t.abrupt("return");case 14:r.dispatch(Go()),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),a.globalScene.screen.close(aa),t.t0 instanceof Error&&(0,H.sendException)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[1,17]])}))),i.scene=e,i.setName("LeadersBar"),i.listLeaderBlocks=[],i.createLeaderBlocks(),i.createEntrancesAnimation(),n&&i.updateInfo(n),i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.updateInfo=function(t){var e=this;this.payload=t;var n=!1,i=this.payload,r=i.playerId;i.leaders.forEach((function(t){var i=e.leaderBlocks.getFirstDead(!0);i.updateInfo(t),-1===t.score?(i.setRank(""),i.setLabel("Join"),i.setScore("Global"),i.onClick=e.handleMatchingGroup):t.playerId===r?(i.setLabel("Share"),i.setHighlight(!0),i.onClick=e.handleShareLeaderboard):i.onClick=e.handleChallengeFriend(t.playerId),e.add(i),i.setVisible(!0),i.setActive(!0),e.listLeaderBlocks.indexOf(i)<0&&(n=!0)})),this.alignBlocks(),n&&(this.listLeaderBlocks=this.leaderBlocks.getChildren().filter((function(t){return t.active})),this.createEntrancesAnimation()),this.runAnimation()},n.killAndHideAll=function(){var t=this;this.removeAll(!1),this.leaderBlocks.getChildren().forEach((function(e){return t.leaderBlocks.killAndHide(e)}))},n.runAnimation=function(){this.leaderBlocks.setAlpha(0),this.entrancesAnimation.play()},n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ph({targets:this.listLeaderBlocks,delay:this.scene.tweens.stagger(50,{start:400}),props:{y:{from:100,to:0},alpha:{from:0,to:1}}})},n.alignBlocks=function(){var t=-(this.leaderBlocks.getLength()-1)/2*95;this.leaderBlocks.setX(t,95)},n.createLeaderBlocks=function(){this.leaderBlocks=this.scene.add.group({classType:Yh})},e}(Phaser.GameObjects.Container),Wh=zh,Hh=Zr.default.DEFAULT,Xh=Hh.KEY,Kh=Hh.FRAME,jh=function(t){function e(e){var n;return(n=t.call(this,e,Xh,Kh.BLANK,100.05,78.2)||this).scene=void 0,n.setName("Home"),n.scene=e,n.createIcon(),n}return(0,j.default)(e,t),e.prototype.createIcon=function(){var t=this.scene.make.image({key:Xh,frame:Kh.BLANK});t.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(t,this.button),this.add(t)},e}(jo.default),qh=jh,Zh=Zr.default.DEFAULT,Qh=Zh.KEY,Jh=Zh.FRAME,$h=function(t){function e(e){var n;return(n=t.call(this,e,Qh,Jh.BLANK,176,77.05)||this).scene=void 0,n.setName("PlayWithFriends"),n.scene=e,n.createLabel(),n}return(0,j.default)(e,t),e.prototype.createLabel=function(){var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(30),text:"PLAY"});Phaser.Display.Align.In.Center(t,this.button,0,-12);var e=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:"WITH FRIENDS"});Phaser.Display.Align.In.Center(e,this.button,0,11),this.add([t,e])},e}(jo.default),tc=$h,ec=Zr.default.DEFAULT,nc=ec.KEY,ic=ec.FRAME,rc=function(t){function e(e){var n;return(n=t.call(this,e,nc,ic.BLANK,100.05,78.2)||this).scene=void 0,n.setName("Rank"),n.scene=e,n.createIcon(),n}return(0,j.default)(e,t),e.prototype.createIcon=function(){var t=this.scene.make.image({key:nc,frame:ic.BLANK});t.setSize(43,43).setDisplaySize(43,43),Phaser.Display.Align.In.Center(t,this.button),this.add(t)},e}(jo.default),ac=rc,sc=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.homeButton=void 0,n.rankButton=void 0,n.pwfButton=void 0,n.entrancesAnimation=void 0,n.runAnimation=function(){n.entrancesAnimation.play()},n.scene=e,n.setName("FooterBar"),n.createHomeButton(),n.createRankButton(),n.createPlayWithFriendsButton(),n.createEntrancesAnimation(),n.alignIcons(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createEntrancesAnimation=function(){this.entrancesAnimation=new Ph({targets:[this],delay:800,props:{y:"-=5",alpha:{start:0,from:0,to:1}}})},n.alignIcons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-130,-6),Phaser.Display.Align.In.Center(this.pwfButton,this,0,-6),Phaser.Display.Align.In.Center(this.rankButton,this,130,-6)},n.createHomeButton=function(){this.homeButton=new qh(this.scene),this.add(this.homeButton)},n.createRankButton=function(){this.rankButton=new ac(this.scene),this.add(this.rankButton)},n.createPlayWithFriendsButton=function(){this.pwfButton=new tc(this.scene),this.add(this.pwfButton)},e}(Phaser.GameObjects.Container),oc=sc,hc=n(32),cc={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(hc)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},lc=function(t){function e(e){return t.call(this,cc,e)||this}return(0,j.default)(e,t),e}(ah.default),uc=lc,dc={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},fc=function(t){function e(e){return t.call(this,dc,e)||this}return(0,j.default)(e,t),e}(ah.default),pc=fc,mc=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).payload=void 0,i.mainText=void 0,i.shadowText=void 0,i.payload=n,i.createMainText(),i.createShadowText(),i.updateSize(),i.moveDown(i.shadowText),i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.setText=function(t){this.mainText.setText(t),this.shadowText.setText(t),this.updateSize()},n.setTintText=function(t,e,n,i){this.mainText.setTint(t,e,n,i)},n.setDropShadow=function(t,e,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,t,e)},n.updateSize=function(){var t=this.mainText,e=t.width,n=t.height;this.setSize(e,n)},n.createMainText=function(){this.mainText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5}}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.make.bitmapText({font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1}),this.add(this.shadowText)},e}(Phaser.GameObjects.Container),gc=mc,vc=n(33),yc=Zr.default.DEFAULT,xc=yc.KEY,bc=yc.FRAME,Ec=function(t){function e(e){var n;return(n=t.call(this,e)||this).cat=void 0,n.effect=void 0,n.runStarTwinkle=function(){var t=n.cat,e=t.x,i=t.y,r=t.displayWidth,a=t.displayHeight,s=i-20;n.effect.run(1,e,s,r,a)},n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:xc,frame:bc.BLANK,origin:{x:.5,y:1}}),this.cat.setWorldSize(204.5,112.5),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){this.effect=new vc.default(this.scene),this.add(this.effect)},n.runCatAnimation=function(){new uc({targets:[this.cat],duration:1e3,props:{scale:"+=0.02"}}).play()},e}(Phaser.GameObjects.Container),Ac=Ec,wc=Zr.default.DEFAULT,Sc=wc.KEY,Mc=wc.FRAME,Tc=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.bestScore=void 0,n.payload=void 0,n.theCat=void 0,n.popup=void 0,n.ribbon=void 0,n.yourScoreText=void 0,n.bestScoreText=void 0,n.currentScoreText=void 0,n.entrancesAnimation=void 0,n.scoreAnimation=void 0,n.counterAnimation=void 0,n.scene=e,n.bestScore=0,n.createPopup(),n.createTheCat(),n.createRibbon(),n.createYourScoreText(),n.createCurrentScore(),n.createBestScore(),n.createScoreAnimation(),n.createEntrancesAnimation(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.updateData=function(t){this.payload=t;var e=t.bestScore,n=t.currentScore;if(n<=e)return this.setBestScore(e),this.setCurrentScore(n),void this.runScoreAnimation();this.runAnimation()},n.runAnimation=function(){var t=this;this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){t.entrancesAnimation.play()}))},n.runScoreCounter=function(){var t,e=this,n=this.payload,i=n.bestScore,r=n.currentScore;null==(t=this.counterAnimation)||t.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:r,delay:500,duration:2e3,completeDelay:300,onUpdate:function(t){var n=Math.floor(t.getValue());e.runScoreAnimation(),e.setCurrentScore(n)},onComplete:function(){e.bestScore=i,e.setBestScore(i),e.setCurrentScore(r),e.counterAnimation.remove()}})},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.setBestScore=function(t){this.bestScoreText.setText("Best score: "+t)},n.setCurrentScore=function(t){this.currentScoreText.setText(""+t)},n.createPopup=function(){this.popup=new ea(this.scene,0,0,284,240),this.add(this.popup)},n.createTheCat=function(){this.theCat=new Ac(this.scene),Phaser.Display.Align.In.TopCenter(this.theCat,this.popup),this.add(this.theCat)},n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Sc,frame:Mc.BLANK}),this.ribbon.setSize(341,80).setDisplaySize(341,80),Phaser.Display.Align.In.Center(this.ribbon,this.theCat,0,93),this.add(this.ribbon)},n.createYourScoreText=function(){this.yourScoreText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:"Your score"}),Phaser.Display.Align.In.Center(this.yourScoreText,this.ribbon,0,-10),this.add(this.yourScoreText)},n.createCurrentScore=function(){this.currentScoreText=new gc(this.scene,{font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(60)}),this.currentScoreText.setTintText(15779090,15779090,15704623,15704623),this.currentScoreText.setDropShadow(0,2,8804140),Phaser.Display.Align.In.Center(this.currentScoreText,this.popup,0,30),this.add(this.currentScoreText)},n.createBestScore=function(){this.bestScoreText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"Best score: "+this.bestScore}),this.bestScoreText.setTint(10494183),Phaser.Display.Align.In.BottomCenter(this.bestScoreText,this.popup,0,-25),this.add(this.bestScoreText)},n.createEntrancesAnimation=function(){this.entrancesAnimation=new uc({targets:[this],repeat:0,duration:200,props:{scale:"+=0.03"}})},n.createScoreAnimation=function(){this.scoreAnimation=new pc({targets:[this.currentScoreText],props:{scale:{from:1,to:1.3}}})},e}(Phaser.GameObjects.Container),Cc=Tc,Ic=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.bestScoreBlock=void 0,n.scene=e,n.createBestScoreBlock(),n.scene.add.existing((0,jr.default)(n)),n}return(0,j.default)(e,t),e.prototype.createBestScoreBlock=function(){this.bestScoreBlock=new Cc(this.scene),this.add(this.bestScoreBlock)},e}(Phaser.GameObjects.Container),Pc=Ic,kc=n(31),Rc={targets:[],duration:400,ease:kc.default,props:{scale:"+=0.1"}},Lc=function(t){function e(e){return t.call(this,Rc,e)||this}return(0,j.default)(e,t),e}(ah.default),Oc=Lc,_c={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},Dc=function(t){function e(e){return t.call(this,_c,e)||this}return(0,j.default)(e,t),e}(ah.default),Bc=Dc,Nc={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},Fc=function(t){function e(e){return t.call(this,Nc,e)||this}return(0,j.default)(e,t),e}(ah.default),Uc=Fc,Gc=n(34),Vc=Zr.default.DEFAULT,Yc=Vc.KEY,zc=Vc.FRAME,Wc=function(t){function e(e){var n;return(n=t.call(this,e)||this).halo=void 0,n.star=void 0,n.createStar(),n.createHalo(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.run=function(){this.runStarAnimation(),this.runHaloAnimation()},n.createStar=function(){this.star=this.scene.make.image({key:Yc,frame:zc.BLANK,visible:!1}),this.star.setWorldSize(35,35),this.add(this.star)},n.createHalo=function(){this.halo=this.scene.make.image({key:Yc,frame:zc.BLANK,visible:!1}),this.halo.setWorldSize(162,162),this.add(this.halo)},n.runStarAnimation=function(){var t=this;this.scene.tweens.killTweensOf(this.star),this.star.setVisible(!0);var e=1/this.scene.world.getPixelRatio();this.scene.tweens.add({targets:[this.star],duration:400,ease:Phaser.Math.Easing.Quintic.Out,props:{scaleX:{start:16*e,to:0},scaleY:{start:10*e,to:0}},onComplete:function(){t.star.setVisible(!1)}})},n.runHaloAnimation=function(){var t=this;this.scene.tweens.killTweensOf(this.halo),this.halo.setScale(0),this.halo.setVisible(!0),this.scene.tweens.add({targets:[this.halo],duration:200,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:8},alpha:{from:1,to:0}},onComplete:function(){t.halo.setVisible(!1)}})},e}(Phaser.GameObjects.Container),Hc=Wc,Xc=Zr.default.DEFAULT,Kc=Xc.KEY,jc=Xc.FRAME,qc=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).avatar=void 0,a.scoreText=void 0,a.shareButton=void 0,a.bigStarExplosive=void 0,a.open=function(e){t.prototype.open.call((0,jr.default)(a),e);var n=a.getData("bestScore");a.setBestScore(n);var i=a.scene.player.getPlayer();a.avatar.loadPhoto(i.playerId,i.photo),a.scene.time.delayedCall(2e3,(function(){a.scene.storage.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d,f,p,m;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=window.game,r=i.player,a=i.analytics,s=i.facebook,t.prev=1,!FBInstant.context.getID()){t.next=5;break}return t.abrupt("return");case 5:return o=n(),t.next=8,Ts();case 8:return h=t.sent,Fs({imageShare:h}),c=r.getPlayer(),l=c.playerId,u=c.name,d=c.photo,f=xs(o),p=f.score,m={type:pr,playerId:l,playerName:u,playerPhoto:d,playerScore:p},t.next=15,s.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:u+" got "+p+" scores. So easy! Can you?",localizations:{en_US:u+" got "+p+" scores. So easy! Can you?",vi_VN:u+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng. B\u1ea1n th\xec sao?"}},image:h||"",template:"play_turn",data:m});case 15:a.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"BestScoreContextSolo",success:!0}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(1),a.event(an.AnalyticsEvents.MESSAGE,{message_content_type:"BestScoreContextSolo",success:!1}),(0,H.sendException)(t.t0);case 22:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,n){return t.apply(this,arguments)}}())})),a.runOpenAnimation()},a.handleClose=function(){a.scene.screen.close(a.name)},a.handleShareBestScore=function(){a.scene.storage.dispatch(Ms())},a.runBigStarExplosive=function(){Phaser.Display.Align.In.Center(a.bigStarExplosive,a.scoreText),a.bigStarExplosive.run()},a.setDepth(ua),a.background.setAlpha(.8),a.createObjects(),a}(0,j.default)(e,t);var n=e.prototype;return n.createObjects=function(){this.createTitle(),this.createClose(),this.createBestScoreTitle(),this.createPlayerAvatar(),this.createGlowEffect(),this.createBestScoreNumber(),this.createShareButton(),this.createStarTwinkleEffect(),this.createBigStarExplosive()},n.setBestScore=function(t){this.scoreText.setText(""+t)},n.createTitle=function(){var t=this.scene.make.image({key:Kc,frame:jc.BLANK});t.setSize(162,36).setDisplaySize(162,36);var e=-90;Phaser.Display.Align.In.TopCenter(t,this.zone,0,e);var n=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:10,text:"Today Record"});e=-5,Phaser.Display.Align.In.Center(n,t,0,e),this.add([t,n])},n.createClose=function(){var t=new jo.default(this.scene,Kc,jc.BLANK,38,38);t.setName("Close"),this.add(t),Phaser.Display.Align.In.TopRight(t,this.zone,-60,-50),t.onClick=this.handleClose},n.createBestScoreTitle=function(){var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:22,text:"Best Score"});this.add(t),t.setTint(13256697),Phaser.Display.Align.In.TopCenter(t,this.zone,0,-130)},n.createBestScoreNumber=function(){this.scoreText=new gc(this.scene,{font:qo.default.PRIMARY.KEY,size:40}),this.add(this.scoreText),this.scoreText.setTintText(15911443,15911443,15902254,15902254),this.scoreText.setDropShadow(0,2,12871743),Phaser.Display.Align.In.TopCenter(this.scoreText,this.zone,0,-230)},n.createPlayerAvatar=function(){this.avatar=new Lh(this.scene,{key:Kc,frame:jc.BLANK,background:jc.BLANK,width:89,height:89}),this.avatar.background.setSize(89,95).setDisplaySize(89,95),this.avatar.photo.setSize(89,95).setDisplaySize(89,95),this.avatar.avtFrame.setSize(89,95).setDisplaySize(89,95),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.zone,0,20)},n.createGlowEffect=function(){var t=Zr.default.DEFAULT,e=t.KEY,n=t.FRAME,i=this.scene.make.image({key:e,frame:n.BLANK});i.setWorldSize(246,246),this.add(i),this.moveDown(i),Phaser.Display.Align.In.Center(i,this.avatar),this.scene.tweens.add({targets:[i],duration:6e3,repeat:-1,props:{angle:360,scale:{value:"+=0.01",yoyo:!0,duration:800,ease:Phaser.Math.Easing.Sine.InOut}}})},n.createShareButton=function(){this.shareButton=new Gc.default(this.scene,{key:Kc,button:jc.BLANK,icon:jc.BLANK,text:"Share"},168,82.8),this.shareButton.setName("Share"),this.add(this.shareButton),Phaser.Display.Align.In.BottomCenter(this.shareButton,this.zone,0,-80),this.shareButton.onClick=this.handleShareBestScore},n.createStarTwinkleEffect=function(){var t=new vc.default(this.scene),e=this.scoreText,n=e.x,i=e.y;t.run(2,n,i,300,120)},n.createBigStarExplosive=function(){this.bigStarExplosive=new Hc(this.scene)},n.runOpenAnimation=function(){this.runBigStarExplosive(),this.runScoreEntrancesAnimation(),this.runAvatarEntrancesAnimation(),this.runShareEntrancesAnimation()},n.runScoreEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.scoreText),new Uc({targets:[this.scoreText],duration:300,props:{y:{from:0,to:this.scoreText.y}}}).play()},n.runAvatarEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.avatar);var t=this.avatar.scale;new Oc({targets:[this.avatar],duration:400,props:{scale:{from:0,to:t}}}).play()},n.runShareEntrancesAnimation=function(){this.scene.tweens.killTweensOf(this.shareButton),this.shareButton.setAlpha(0),new Bc({targets:[this.shareButton],delay:300}).play()},e}(GameCore.Screen),Zc=qc,Qc=GameCore.Configs.LeadersBoard,Jc=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).bestScore=void 0,e.currentScore=void 0,e.loading=void 0,e.leadersBar=void 0,e.footerBar=void 0,e.main=void 0,e.confettiLeftEffect=void 0,e.confettiRightEffect=void 0,e.run=function(){e.updateLeaders(),e.updateScore(),e.explodeConfettiEffect(),e.main.bestScoreBlock.counterAnimation&&e.main.bestScoreBlock.counterAnimation.state!==Phaser.Tweens.REMOVED?e.main.bestScoreBlock.counterAnimation.on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){e.handleShowBestScorePopup(),e.handleShowResultChallengePopup()})):e.time.delayedCall(800,(function(){e.handleShowBestScorePopup(),e.handleShowResultChallengePopup()})),e.footerBar.setAlpha(0),e.footerBar.runAnimation(),e.audio.pauseMusic()},e.runConfettiEffect=function(){var t=e.gameZone.displayWidth;e.confettiLeftEffect.stop(),e.confettiRightEffect.stop(),e.children.bringToTop(e.confettiLeftEffect),e.children.bringToTop(e.confettiRightEffect),e.confettiLeftEffect.run(1,0,-100),e.confettiRightEffect.run(1,0+t,-100),e.tweens.addCounter({delay:1e4,from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(t){var n,i,r=t.getValue()/100;null==(n=e.confettiLeftEffect.emitter)||n.setAlpha(r),null==(i=e.confettiRightEffect.emitter)||i.setAlpha(r)},onComplete:function(){var t,n;null==(t=e.confettiLeftEffect.emitter)||t.setAlpha(1),null==(n=e.confettiRightEffect.emitter)||n.setAlpha(1),e.confettiLeftEffect.stop(),e.confettiRightEffect.stop()}})},e.explodeConfettiEffect=function(){var t=e.gameZone.displayWidth,n=-100,i=t;e.tweens.addCounter({repeat:3,duration:500,onStart:function(){e.confettiLeftEffect.explode(6,0,n),e.confettiRightEffect.explode(6,0+i,n)},onRepeat:function(){e.confettiLeftEffect.explode(6,0,n),e.confettiRightEffect.explode(6,0+i,n)},completeDelay:7e3,onComplete:function(){e.tweens.addCounter({from:100,to:0,ease:Phaser.Math.Easing.Cubic.Out,duration:400,onUpdate:function(t){var n,i,r=t.getValue()/100;null==(n=e.confettiLeftEffect.emitter)||n.setAlpha(r),null==(i=e.confettiRightEffect.emitter)||i.setAlpha(r)},onComplete:function(){var t,n;null==(t=e.confettiLeftEffect.emitter)||t.setAlpha(1),null==(n=e.confettiRightEffect.emitter)||n.setAlpha(1),e.confettiLeftEffect.stop(),e.confettiRightEffect.stop()}})}})},e.handlePlayWithFriend=function(){e.storage.dispatch(Uo())},e.handleHomeClick=function(){e.scene.switch(Rr.SceneKeys.DASHBOARD_SCENE)},e.handleLeaderboardClick=function(){e.scene.switch(Rr.SceneKeys.LEADERBOARD_SCENE)},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){var t=this;this.events.on("resume",(function(){t.updateScore()})),this.events.on("sleep",(function(){t.storage.dispatch(Eo())})),this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){t.prototype.create.call(this),this.createBackground(yr.default.BACKGROUND.KEY);var e=this.player.getBestScore();this.bestScore=e,this.currentScore=0,this.createLoading(),this.createMain(),this.createLeadersBar(),this.createFooterBar(),this.createBestScoreScreen(),this.createConfettiSmallAnimation()},n.updateLeaders=function(){var t=this;this.leadersBar.killAndHideAll();var e=[{selector:Th,callback:function(e){if(!1===e){var n=window.game.player.getPlayerId(),i=t.getLeadersExcludeIds([n]);t.updateLeaderBar(i)}t.loading.setVisible(e)}}];this.handleStateChange(e),this.storage.dispatch(Ah(Qc.LeaderboardId,pa,20))},n.getLeadersExcludeIds=function(t){var e=this.storage.getState(),n=Mh(e),i={};if(!t||0===t.length)return n;for(var r in n)if(t.indexOf(r)<0){var a=n[r],s=a.playerId,o=a.photo,h=a.score,c=a.rank;i[r]={playerId:s,photo:o,score:h,rank:c}}return i},n.updateScore=function(){var t=this.storage.getState(),e=xs(t),n=e.score,i=void 0===n?0:n,r=e.bestScore,a=void 0===r?0:r;this.bestScore=a<this.bestScore?this.bestScore:a,this.currentScore=i,this.main.bestScoreBlock.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.createLoading=function(){this.loading=new fh(this),Phaser.Display.Align.In.Center(this.loading,this.gameZone,0,120)},n.createMain=function(){this.bestScore=0,this.main=new Pc(this),Phaser.Display.Align.In.TopCenter(this.main,this.gameZone,0,-230),this.main.bestScoreBlock.theCat.runStarTwinkle()},n.createLeadersBar=function(){this.leadersBar=new Wh(this),Phaser.Display.Align.In.Center(this.leadersBar,this.gameZone,0,120)},n.updateLeaderBar=function(t){var e={playerId:this.player.getPlayerId(),leaders:[]};for(var n in t){if(e.leaders.length>=3)break;var i=t[n],r=i.playerId,a=i.photo,s=i.score,o=i.rank;e.leaders.push({playerId:r,photo:a,score:s,rank:o})}e.leaders.push({playerId:yr.default.ICON_EARTH.KEY,photo:yr.default.ICON_EARTH.FILE,rank:4,score:-1}),this.leadersBar.updateInfo(e)},n.createFooterBar=function(){this.footerBar=new oc(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-70),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.pwfButton.onClick=this.handlePlayWithFriend,this.footerBar.rankButton.onClick=this.handleLeaderboardClick},n.createBestScoreScreen=function(){this.screen.add(ha,Zc)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new yh(this,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new yh(this,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(qr.default.EFFECT),this.confettiRightEffect.setDepth(qr.default.EFFECT)},n.handleShowBestScorePopup=function(){this.currentScore>this.bestScore&&this.storage.dispatch(Ro({bestScore:this.currentScore}));var t=this.storage.getState(),e=Ua(t),n=[br,wr].indexOf(e)>=0;this.currentScore>this.bestScore&&n&&(this.screen.open(ha,{bestScore:this.currentScore}),this.runConfettiEffect())},n.handleShowResultChallengePopup=function(){var t=this.storage.getState(),e=Ua(t);if(-1!==[Er,Ar].indexOf(e)&&us(t)){var n=fs(t).playerId;e===Ar&&n===xr.playerId||(this.scene.pause(Rr.SceneKeys.GAME_OVER_SCENE),this.scene.launch(Rr.SceneKeys.RESULT_MATCH_SCENE))}},e}(Ko.default);var $c,tl=Jc,el={REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-coins"},nl=n(21),il=function(){var t=GameCore.Utils.Device,e=window.navigator.vibrate;return t.isAndroid()&&"function"===typeof e||t.isMobileWeb()&&"function"===typeof e||t.isIOS()},rl=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Math.round(e/80),i=0,r=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,FBInstant.performHapticFeedbackAsync();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();case 3:if(!(i<n)){t.next=11;break}return a=r(),s=(0,Vt.sleepAsync)(80),i+=1,t.next=9,Promise.all([a,s]);case 9:t.next=3;break;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),al=function(t){window.navigator.vibrate(0),window.navigator.vibrate(t)},sl=function(t){try{if(!il())return!1;var e=GameCore.Utils.Device;e.isAndroid()||e.isMobileWeb()?al(t):e.isIOS()&&rl(t).catch((function(t){}))}catch(n){}},ol=["chim_1","chim_2","chim_3","chim_4","chim_5","chim_6","chim_7","chim_8","chim_9","chim_10","chim_11","chim_12"],hl=["bay1"],cl=["idle1","idle2"],ll=["dau"],ul=["ria"],dl="stroke",fl="idle_eyes_close",pl={red:ol[0],orange:ol[1],pink:ol[2],yellow:ol[3],lime:ol[4],blue:ol[5],brown:ol[6],purple:ol[7],teal:ol[8],green:ol[9],blueGrey:ol[10],mahogany:ol[11]},ml=["bird-1","bird-2","bird-3","bird-4","bird-5","bird-6","bird-7","bird-8","bird-9","bird-10","bird-11","bird-12"],gl={red:ml[0],orange:ml[1],pink:ml[2],yellow:ml[3],lime:ml[4],blue:ml[5],brown:ml[6],purple:ml[7],teal:ml[8],green:ml[9],blueGrey:ml[10],mahogany:ml[11]};function vl(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return yl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yl(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){t[t.MOVING=0]="MOVING",t[t.IDLE=1]="IDLE"}($c||($c={}));var xl,bl=function(t){function e(e){var n;return(n=t.call(this,e,e.spine,0,0,Zr.default.BIRD_SPINE.KEY)||this).scene=void 0,n.gameManager=void 0,n.config=void 0,n.index=void 0,n.layerContainer=void 0,n.flyTween=void 0,n.delayCallLanding=void 0,n.flySpeed=200,n.isHighlighting=!1,n.currentLastTrackEntryIdle=void 0,n.closeEyesInterval=void 0,n.originScale=.5,n.sound="",n.shouldVibrate=!1,n.birdState=$c.MOVING,n.addCloseEyeInterval=function(){n.closeEyesInterval=n.scene.tweens.addCounter({duration:5e3*Math.random()+2e3,onComplete:function(){n.setAnimation(3,fl),n.addCloseEyeInterval()}})},n.scene=e,n.scene.add.existing((0,jr.default)(n)),n.initMixes(),n.listenEvents(),n}(0,j.default)(e,t);var n=e.prototype;return n.listenEvents=function(){var t=this;this.on("complete",(function(e){e===t.currentLastTrackEntryIdle&&t.playIdleAnimation()})),this.on("event",(function(e,n){var i;"dau_event"===n.data.name&&(null==(i=t.layerContainer)||i.jiggle(t.index+1),t.shouldVibrate&&(t.shouldVibrate=!1,t.scene.player.getPlayerSettings().vibrate&&sl(200)))})),this.addCloseEyeInterval()},n.initDefault=function(t){this.clearTracks(),this.setToSetupPose(),this.shouldVibrate=!1,this.config=JSON.parse(JSON.stringify(t)),this.setColorFromConfig(t.color),this.setSoundFromColor(t.color),this.index=t.index,this.setDepth(qr.default.BIRD+this.index/10),this.layerContainer=t.layerContainer,this.setScale(.5),this.playIdleAnimation(),this.hideHighlight()},n.setColorFromConfig=function(t){var e=pl[t];this.setSkinByName(""+e)},n.setSoundFromColor=function(t){this.sound=gl[t]},n.playIdleAnimation=function(){this.setAnimation(0,Phaser.Math.RND.pick(cl),!0);for(var t=Phaser.Math.RND.between(1,20),e=0;e<t;e++){var n=Phaser.Math.RND.pick(cl);n===cl[0]?(this.addAnimation(0,n),this.addAnimation(0,n)):this.addAnimation(0,n)}var i=Phaser.Math.FloatBetween(.8,1.2);this.timeScale=i,this.currentLastTrackEntryIdle=this.addAnimation(0,Phaser.Math.RND.pick(ul))},n.moveTo=function(t,e,n,i){var r,a=this;void 0===n&&(n=0),void 0===i&&(i=!0),this.completeMoving(),this.birdState=$c.MOVING,i&&this.scene.audio.playSound(nl.default.BIRD_FLY);var s=this.scene.gameManager.getRatioScale();null==(r=this.delayCallLanding)||r.remove(),this.setDepth(qr.default.BIRD_FLY+this.index/10),this.currentLastTrackEntryIdle=void 0;var o=t.getPositionLayer(e),h=t.config.index;if(o.x!=this.x){var c=o.x-this.x<0?-1:1;this.scaleX=Math.abs(this.scaleX)*c}var l=Phaser.Math.Distance.BetweenPoints(o,this);return this.layerContainer=t,this.index=e,new Promise((function(e){var i=Phaser.Math.RND.pick(hl),r=Phaser.Math.RND.pick(ll),c=l/(a.flySpeed*s)*1e3,u=c-300,d=Math.round(u/800),f=Math.min(800*d/u/a.timeScale,1.4);a.flyTween=a.scene.add.tween({targets:a,x:o.x,y:o.y,duration:c,ease:Phaser.Math.Easing.Sine.Out,delay:n,onStart:function(){a.setEmptyAnimation(0,0);for(var t=0;t<d;t++){(0===t?a.setAnimation(0,i):a.addAnimation(0,i)).timeScale=f}a.currentLastTrackEntryIdle=a.addAnimation(0,r),a.delayCallLanding=void 0},onComplete:function(){var n=t.flipX?-1:1;a.scaleX=Math.abs(a.scaleX)*n,a.setDepth(qr.default.BIRD+Math.floor(h/2)+a.index/10),a.flyTween=void 0,a.birdState=$c.IDLE,a.scene.time.delayedCall(1e3,(function(){e()}))}})}))},n.initMixes=function(){for(var t,e=vl(ll);!(t=e()).done;)for(var n,i=t.value,r=vl(cl);!(n=r()).done;){var a=n.value;this.setMix(i,a,.2)}for(var s,o=vl(cl);!(s=o()).done;){for(var h,c=s.value,l=vl(ul);!(h=l()).done;){var u=h.value;this.setMix(c,u,.2)}for(var d,f=vl(cl);!(d=f()).done;){var p=d.value;c!=p&&this.setMix(c,p,.2)}}for(var m,g=vl(ul);!(m=g()).done;){for(var v,y=m.value,x=vl(cl);!(v=x()).done;){var b=v.value;this.setMix(y,b,.2)}for(var E,A=vl(hl);!(E=A()).done;){var w=E.value;this.setMix(y,w,.2)}}},n.showHighlight=function(){this.isHighlighting||(this.isHighlighting=!0,this.setAnimation(1,dl),this.scene.audio.playSound(nl.default.HIGHLIGHT),this.scene.audio.playSound(this.sound,{volume:.5}))},n.hideHighlight=function(){this.isHighlighting&&(this.isHighlighting=!1,this.setEmptyAnimation(1,0),this.scene.audio.playSound(nl.default.UN_HIGHLIGHT))},n.getPositionStartFly=function(){var t=this.layerContainer.isLeft?1:-1,e=this.layerContainer.getPositionLayer(this.index);return{x:e.x-180*t,y:e.y-100}},n.playStartAnimation=function(){var t=(0,K.default)(Z().mark((function t(){var e=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.scene.audio.playSound(nl.default.BIRDS_FLY),t.abrupt("return",new Promise((function(t){var n=e.getPositionStartFly();e.setPosition(n.x,n.y),e.moveTo(e.layerContainer,e.index,150*e.index+100*Math.random(),!1).then((function(){return t()}))})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.playWinAnimation=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h,c,l,u,d=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.birdState=$c.MOVING,this.scene.audio.playSound(nl.default.BIRDS_FLY),e=this.scene.gameManager.getRatioScale(),n=this.scene.world.getWorldSize(),i=n.width,r=35*Math.PI/180,a=Phaser.Math.RND.pick(hl),s=(190+50*Math.random())*e,o=this.x<i/2?i+42:-42,(h=this.x<i/2?this.y-Math.tan(r)*(i-this.x):this.y-Math.tan(r)*this.x)<-15&&(h=-15,o=this.x<i/2?this.x+(this.y-h)/Math.tan(r):this.x-(this.y-h)/Math.tan(r)),c={x:o,y:h},l=Phaser.Math.Distance.BetweenPoints(c,this),u=l/s*500,t.abrupt("return",new Promise((function(t){d.scene.tweens.add({targets:d,onStart:function(){d.setAnimation(0,a,!0)},y:c.y,x:c.x,duration:u,onComplete:function(){d.setVisible(!1),t()}})})));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.isMoving=function(){return this.birdState===$c.MOVING},n.completeMoving=function(){var t;null==(t=this.flyTween)||t.complete()},e}(window.SpinePlugin.SpineGameObject),El=function(){function t(t){this.scene=void 0,this.birds=[],this.scene=t}var e=t.prototype;return e.spawn=function(){var t=this.birds.find((function(t){return!t.visible&&!t.active}));if(t)return t.setActive(!0),t.setVisible(!0),t;var e=this.createNewBird();return this.birds.push(e),e},e.clearAll=function(){this.birds.forEach((function(t){t.setVisible(!1),t.setActive(!1)}))},e.createNewBird=function(){return new bl(this.scene)},t}(),Al=Zr.default.DEFAULT,wl=Al.KEY,Sl=Al.FRAME;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(xl||(xl={}));var Ml=function(t){function e(e){var n;return(n=t.call(this,e)||this).hand=void 0,n.timeline=void 0,n.name="SuggestionHand",n.addHand(),n.kill(),n.setDepth(qr.default.TUTORIAL),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:wl,frame:Sl.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.createTimeline=function(t,e,n,i,r){var a=this;void 0===i&&(i=0),void 0===r&&(r=800);var s=1/this.scene.world.getPixelRatio(),o=t===xl.Left?-30:30;this.hand.angle=o,this.hand.setPosition(e.x,e.y),this.hand.setScale(1.4*s);var h=this.scene.tweens.createTimeline({loop:2,loopDelay:r,onStart:function(){return a.revive()},onComplete:function(){a.stopTimeline(),a.scene.gameManager.hideHint()}});return h.add({delay:i,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1,duration:400},scale:{duration:400,from:1.4*s,to:s},angle:{from:o,to:0,duration:400}}}),h.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{x:n.x,y:n.y,scale:{duration:400,from:1*s,to:1.4*s},angle:{from:0,to:o,duration:200}}}),h.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:400,from:1.4*s,to:s},angle:{from:o,to:0,duration:400}}}),h.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:1,to:0,duration:200},scale:{duration:200,from:s,to:1.4*s}},onComplete:function(){a.hand.x=e.x,a.hand.y=e.y,a.hand.scale=s}}),h.play(),h},n.playAnimation=function(t,e,n,i,r){var a=this;void 0===i&&(i=0),void 0===r&&(r=800),this.hand.flipX=t===xl.Left,this.timeline?this.timeline.once("loop",(function(){var s;null==(s=a.timeline)||s.stop(),a.timeline=a.createTimeline(t,e,n,i,r)})):this.timeline=this.createTimeline(t,e,n,i,r)},n.stopAnimation=function(){var t=this;this.timeline&&this.timeline.once("loop",(function(){t.stopTimeline()}))},n.stopTimeline=function(){var t;null==(t=this.timeline)||t.stop(),this.timeline=void 0,this.hand.setAlpha(0),this.kill()},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},e}(Phaser.GameObjects.Container),Tl=Ml,Cl=function(){function t(t){this.scene=void 0,this.tapHand=void 0,this.suggestions=[],this.scene=t,this.createTapHand(t),this.tapHand.setDepth(qr.default.ON_TOP)}var e=t.prototype;return e.createTapHand=function(t){void 0==this.tapHand&&(this.tapHand=new Tl(t))},e.clearSuggestion=function(){this.suggestions=[]},e.stop=function(){var t;null==(t=this.tapHand)||t.stopAnimation()},e.start=function(){this.tapHand.kill()},e.move=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h,c,l;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.scene.gameManager,n=this.scene.gameZone,i=n.width,n.height,!e.isWin()&&!e.isLose()){t.next=4;break}return t.abrupt("return",this.stop());case 4:return r=this.scene.footer,t.next=7,this.getBestSuggestion();case 7:if(a=t.sent,this.tapHand.revive(),0!==a.length){t.next=16;break}(s=r.addBranchButton.getIsDisabled()?r.undoButton.getWorldPosition():r.addBranchButton.getWorldPosition()).x+=20,s.y+=15,this.tapHand.playAnimation(xl.Right,s,s),t.next=33;break;case 16:if(o=e.layerContainers[a[0]],h=e.layerContainers[a[1]],c=o.getPositionLayer(o.layers.length-1),l=h.getPositionLayer(h.layers.length),!(c.x<l.x)){t.next=26;break}return c.x+=20,l.x+=20,0===h.layers.length&&h.x>i/2&&((l=h.getPositionLayer(0)).x-=15),this.tapHand.playAnimation(xl.Right,c,l),t.abrupt("return");case 26:if(!(c.x>l.x)){t.next=32;break}return c.x-=20,l.x-=20,0===h.layers.length&&h.x<i/2&&((l=h.getPositionLayer(0)).x+=15),this.tapHand.playAnimation(xl.Left,c,l),t.abrupt("return");case 32:c.x<i/2?(c.x+=20,l.x+=20,this.tapHand.playAnimation(xl.Right,c,l)):(c.x-=20,l.x-=20,this.tapHand.playAnimation(xl.Left,c,l));case 33:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getBestSuggestion=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.findSuggestions();case 2:if(0!==this.suggestions.length){t.next=4;break}return t.abrupt("return",[]);case 4:return t.abrupt("return",this.suggestions[0]);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.findSuggestions=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearSuggestion(),t.next=3,this.scene.gameManager.getSolution();case 3:this.suggestions=t.sent;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}(),Il=Cl;function Pl(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return kl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kl(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Rl=Zr.default.GAME_PLAY,Ll=Rl.KEY,Ol=Rl.FRAME,_l=function(t){function e(e,n){var i;return(i=t.call(this,e,0,0,Ll,Ol.TREE_BRANCH)||this).gameManager=void 0,i.isLeft=!0,i.config=void 0,i.layers=[],i.hitArea=void 0,i.jiggleTween=void 0,i.slideTween=void 0,i.originWidth=167,i.originHeight=16,i.gameManager=n,i.setWorldSize(167,16),i.scene.add.existing((0,jr.default)(i)),i.hitArea=e.add.zone(0,0,i.width,4*i.height),i.addListenEvent(),i}(0,j.default)(e,t);var n=e.prototype;return n.setWorldSize=function(e,n){t.prototype.setWorldSize.call(this,e,n),this.hitArea&&this.hitArea.setDisplaySize(Math.min(1.2*this.width,187.5),4*this.height)},n.addListenEvent=function(){var t=this;this.hitArea.setInteractive({hitArea:this.hitArea,useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.POINTER_DOWN,(function(){t.gameManager.selectContainer(t),t.jiggle(2)}))},n.setLeft=function(t){this.isLeft=t,this.setFlipX(!t);var e=this.isLeft?1:-1;this.layers.forEach((function(t){return t.scaleX=Math.abs(t.scaleX)*e}));var n=this.isLeft?0:1;this.setOrigin(n,.5),this.hitArea.setOrigin(n,.5)},n.setPosition=function(e,n,i,r){var a=this;return t.prototype.setPosition.call(this,e,n,i,r),this.hitArea&&this.hitArea.setPosition(e,this.y-this.hitArea.height/2+this.height/2),this.config?(this.layers.forEach((function(t,e){var n=a.getPositionLayer(e);t.completeMoving(),t.setPosition(n.x,n.y)})),this):this},n.initDefault=function(t){this.setScale(1),this.setWorldSize(this.displayWidth,this.displayHeight),this.setDepth(qr.default.TREE_BRANCH),this.config=JSON.parse(JSON.stringify(t)),this.layers=[].concat(t.layers),this.setLeft(t.index%2===0),this.setWorldSize(167,16)},n.isCanAddLayer=function(t){if(0===t.length)return!1;if(0===this.getEmptyLayerCount())return!1;if(this.isComplete())return!1;if(0===this.layers.length)return!0;var e=this.getTopColor();return!t.some((function(t){return t.config.color!=e}))},n.addLayers=function(t){var e,n=this.layers.length;t.forEach((function(t){t.index=n,n+=1})),(e=this.layers).push.apply(e,t)},n.removeLayer=function(t){for(var e=0;e<t;e++)this.layers.pop()},n.isEmpty=function(){return 0===this.layers.length},n.isComplete=function(){if(this.layers.length!=this.config.length)return!1;for(var t,e=this.getTopColor(),n=Pl(this.layers);!(t=n()).done;){if(e!=t.value.config.color)return!1}return!0},n.getGiveableLayers=function(t){if(void 0===t&&(t=this.config.length),this.isComplete())return[];if(0===this.layers.length)return[];for(var e=[],n=this.getTopColor(),i=this.layers.length-1;i>=0;i--){var r=this.layers[i];if(n!=r.config.color)break;e.push(r)}return e.slice(0,t)},n.getTopColor=function(){if(0!==this.layers.length)return this.layers[this.layers.length-1].config.color},n.getEmptyLayerCount=function(){return this.config.length-this.layers.length},n.showHighlight=function(){this.getGiveableLayers().forEach((function(t){t.showHighlight()}))},n.hideHighlight=function(){this.getGiveableLayers().forEach((function(t){return t.hideHighlight()}))},n.isCanGiveTo=function(t){var e=t.getEmptyLayerCount();if(0===e)return 0;var n=this.getGiveableLayers(e);return t.isCanAddLayer(n)?n.length:0},n.giveLayers=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getEmptyLayerCount(),r=this.getTopLayers(Math.min(n,i)),this.flipX!==e.flipX&&(r=r.reverse()),a=Promise.all(r.map((function(t,n){return t.moveTo(e,e.layers.length+n,100*n)}))),e.addLayers(r),this.removeLayer(r.length),e.isComplete()&&(r[r.length-1].shouldVibrate=!0),t.next=10,a;case 10:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.getPositionLayer=function(t){var e=this.gameManager.getRatioScale(),n=this.isLeft?1:-1,i=this.width/this.config.length;return{x:this.x+(20*e+i*t)*n,y:this.y+5*e}},n.playShowTreeBranch=function(){var t,e=this,n=this.isLeft?1:-1,i=this.x-this.width*n,r=this.x;this.x=i;var a=this.scaleX;return null==(t=this.slideTween)||t.complete(),new Promise((function(t){e.slideTween=e.scene.add.tween({targets:e,x:{from:i,to:r},scaleX:{from:a,to:1.2*a,ease:Phaser.Math.Easing.Sine.Out,duration:350,yoyo:!0},ease:Phaser.Math.Easing.Sine.Out,duration:700,onComplete:function(){t(),e.slideTween=void 0}})}))},n.playHideAnimation=function(){var t,e=this,n=this.isLeft?1:-1,i=this.x-this.width*n,r=this.x;this.x=r;var a=this.scaleX;return null==(t=this.slideTween)||t.complete(),new Promise((function(t){e.scene.add.tween({targets:e,x:{from:r,to:i},scaleX:{from:a,to:1.2*a,ease:Phaser.Math.Easing.Sine.Out,duration:350,yoyo:!0},ease:Phaser.Math.Easing.Sine.In,duration:700,onComplete:function(){t(),e.slideTween=void 0}})}))},n.playStartAnimation=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.layers.map((function(t){return t.playStartAnimation()}))).push(this.playShowTreeBranch()),t.next=4,Promise.all(e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.getTopLayers=function(t){return this.layers.slice(this.layers.length-t,this.layers.length)},n.setActive=function(e){return t.prototype.setActive.call(this,e),this.hitArea.setActive(e),this},n.setVisible=function(e){return t.prototype.setVisible.call(this,e),this.hitArea.setVisible(e),this},n.jiggle=function(t){var e=this;if(this.jiggleTween&&this.jiggleTween.remove(),0!=t){var n=this.isLeft?1:-1,i=this.angle||0,r=.4*t*n;this.jiggleTween=this.scene.add.tween({targets:this,angle:r,duration:(r-i)/(r-0)*100,ease:Phaser.Math.Easing.Linear,onUpdate:function(){var t=e.angle/r;e.layers.forEach((function(i){if(!i.isMoving()){var a=Math.tan(r*(Math.PI/180))*Math.abs(e.x-i.x);i.y=e.y+5+n*a*t}}))},onComplete:function(){e.layers.forEach((function(t){if(!t.isMoving()){var i=Math.tan(r*(Math.PI/180))*Math.abs(e.x-t.x);t.y=e.y+5+n*i}})),e.jiggleTween=e.scene.add.tween({targets:e,angle:0,duration:100,ease:Phaser.Math.Easing.Bounce.InOut,onUpdate:function(){var t=e.angle/r;e.layers.forEach((function(i){if(!i.isMoving()){var a=Math.tan(r*(Math.PI/180))*Math.abs(e.x-i.x);i.y=e.y+5+n*a*t}}))},onComplete:function(){e.layers.forEach((function(t){t.isMoving()||(t.y=e.y+5)})),e.jiggleTween=void 0}})}})}},n.playWinAnimation=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],this.layers.forEach((function(t){e.push(t.playWinAnimation())})),t.next=4,Promise.all(e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.isContainLayersSameColor=function(){for(var t,e=this.getTopColor(),n=Pl(this.layers);!(t=n()).done;){if(e!=t.value.config.color)return!1}return!0},n.giveLayersAutoComplete=function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[].concat(this.layers),this.flipX!==e.flipX&&(i=i.reverse()),r=Promise.all(i.map((function(t,i){return t.moveTo(e,e.layers.length+i,n+100*i)}))),e.addLayers(i),this.removeLayer(i.length),e.isComplete()&&(i[i.length-1].shouldVibrate=!0),t.next=9,r;case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e}(Phaser.GameObjects.Image),Dl=function(t){function e(e){return t.call(this,e)||this}(0,j.default)(e,t);var n=e.prototype;return n.spawn=function(){var t=this.getChildren().find((function(t){return!t.visible&&!t.active}));if(t)return t.setActive(!0),t.setVisible(!0),t;var e=this.createNewTreeBranch();return this.add(e),e},n.clearAll=function(){this.getChildren().forEach((function(t){t.setVisible(!1),t.setActive(!1)}))},n.createNewTreeBranch=function(){return new _l(this.scene,this.scene.gameManager)},e}(Phaser.GameObjects.Group),Bl=Zr.default.DEFAULT,Nl=Bl.KEY,Fl=Bl.FRAME,Ul=function(t){function e(e){var n;return(n=t.call(this,e)||this).hand=void 0,n.timeline=void 0,n.name="TapTutorialHand",n.addHand(),n.setDepth(qr.default.TUTORIAL),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:Nl,frame:Fl.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.add(this.hand)},n.createTimeline=function(t,e,n,i){var r=this;void 0===n&&(n=0),void 0===i&&(i=800);var a=1/this.scene.world.getPixelRatio();this.hand.angle=30,this.hand.setPosition(t.x,t.y),this.hand.setScale(1.4*a);var s=this.scene.tweens.createTimeline({loop:-1,loopDelay:i,onStart:function(){return r.revive()}});return s.add({delay:n,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1,duration:400},scale:{duration:400,from:1.4*a,to:a},angle:{from:30,to:0,duration:400}}}),s.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{x:e.x,y:e.y,scale:{duration:400,from:1*a,to:1.4*a},angle:{from:0,to:30,duration:200}}}),s.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:400,from:1.4*a,to:a},angle:{from:30,to:0,duration:400}}}),s.add({targets:[this.hand],delay:200,duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:1,to:0,duration:200},scale:{duration:200,from:a,to:1.4*a}},onComplete:function(){r.hand.x=t.x,r.hand.y=t.y,r.hand.scale=a}}),s.play(),s},n.playAnimation=function(t,e,n,i){var r=this;void 0===n&&(n=0),void 0===i&&(i=800),this.timeline?this.timeline.once("loop",(function(){var a;null==(a=r.timeline)||a.stop(),r.timeline=r.createTimeline(t,e,n,i)})):this.timeline=this.createTimeline(t,e,n,i)},n.stopAnimation=function(){var t=this;this.timeline&&this.timeline.once("loop",(function(){var e;null==(e=t.timeline)||e.stop(),t.timeline=void 0,t.hand.setAlpha(0),t.kill()}))},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},e}(Phaser.GameObjects.Container),Gl=Ul,Vl=function(){function t(t){this.scene=void 0,this.tapHand=void 0,this.isRunning=void 0,this.step=0,this.scene=t,this.step=0}var e=t.prototype;return e.createTapHand=function(){void 0==this.tapHand&&(this.tapHand=new Gl(this.scene))},e.start=function(){this.isRunning||(this.isRunning=!0,this.createTapHand(),this.tapHand.kill(),this.step=0,this.scene.analytics.event(an.AnalyticsEvents.TUTORIAL_BEGIN))},e.stop=function(){var t;this.isRunning&&(this.isRunning=!1,null==(t=this.tapHand)||t.stopAnimation(),this.scene.analytics.event(an.AnalyticsEvents.TUTORIAL_COMPLETE))},e.move=function(){if(!this.isRunning)return this.stop();var t=this.scene.gameManager;if(t.isWin()||t.isLose())return this.stop();this.tapHand.revive();var e=t.getAllValidMoves();if(0!==e.length){this.step+=1,this.scene.analytics.event(an.AnalyticsEvents.TUTORIAL_STEP,{tutorial_step:this.step});var n=e[0],i=t.layerContainers[n[0]],r=t.layerContainers[n[1]],a=i.getPositionLayer(i.layers.length-1),s=r.getPositionLayer(r.layers.length);a.x+=20,s.x+=20,this.tapHand.playAnimation(a,s)}},t}(),Yl=function(){function t(t){this.state=void 0,this.gameSuccessors=void 0,this.lastColors=void 0,this.score=void 0,this.state=t,this.calculateLastColors(),this.processState()}var e=t.prototype;return e.getScore=function(){return this.score},e.processState=function(){this.gameSuccessors=this.calculateAllSuccessors(),this.score=this.calculateStateScore()},e.getState=function(){return this.state},e.isWin=function(){for(var t=0;t<this.state.bottleList.length;t++){var e=this.getLastColor(t);if(0!==e.count&&e.count!==this.state.bottleVolume)return!1}return!0},e.isLose=function(){return 0===this.gameSuccessors.length},e.getAllSuccessors=function(){return this.gameSuccessors},e.calculateAllSuccessors=function(){var t=[],e=[];this.state.bottleList.forEach((function(t){0!==t.length&&e.push(t[0])}));for(var n=0;n<this.state.bottleList.length;n++)for(var i=0;i<this.state.bottleList.length;i++){if(n!==i)if(this.isCanGiveTo(n,i)){var r=this.give(n,i);t.push({from:n,to:i,state:r})}}return t},e.give=function(t,e){for(var n=JSON.parse(JSON.stringify(this.state)),i=n.bottleList,r=i[t],a=i[e],s=this.getLastColor(t),o=0;o<s.count;o++)r.pop(),a.push(s.color);return n},e.isCanGiveTo=function(t,e){var n=this.state.bottleList,i=n[t],r=n[e],a=this.getEmptyCount(e),s=this.getLastColor(e),o=this.getLastColor(t);if(o.count===i.length){if(0==s.count)return!1;if(s.count!=r.length)return!1}return 0!==o.count&&(0===s.count||!(o.count>a)&&o.color==s.color)},e.getLastColor=function(t){return this.lastColors[t]},e.calculateLastColors=function(){this.lastColors=[];for(var t=0;t<this.state.bottleList.length;t++)this.lastColors.push(this.calculateLastColor(t))},e.calculateLastColor=function(t){var e=this.state,n=e.bottleList,i=(e.bottleVolume,n[t]);if(0===i.length)return{count:0,color:""};for(var r=0,a=i[i.length-1],s=i.length-1;s>=0;s--){if(i[s]!=a)break;r+=1}return{color:a,count:r}},e.getEmptyCount=function(t){var e=this.state,n=e.bottleList;return e.bottleVolume-n[t].length},e.calculateStateScore=function(){if(this.isWin())return 999999999999999;if(this.isLose())return-99999999999999;var t=0;t+=this.getAllSuccessors().length;for(var e=0;e<this.state.bottleList.length;e++){var n=this.state.bottleList[e];if(0!==n.length)for(var i=n[0],r=1;r<n.length;r++)i===n[r]?t+=2*(this.state.bottleVolume-r):(i=n[r],t-=2*(r+1));else t+=2}return t},t}(),zl=function(t,e){this.data=void 0,this.value=void 0,this.data=t,this.value=e};zl.prototype.valueOf=function(){return this.value};var Wl=function(){function t(){this.values=void 0,this.values=[]}var e=t.prototype;return e.isEmpty=function(){return 0===this.values.length},e.parent=function(t){return Math.floor((t-1)/2)},e.leftChild=function(t){return 2*t+1},e.rightChild=function(t){return 2*t+2},e.isLeaf=function(t){return t>=Math.floor(this.values.length/2)&&t<=this.values.length-1},e.swap=function(t,e){var n=[this.values[e],this.values[t]];this.values[t]=n[0],this.values[e]=n[1]},e.heapifyDown=function(t){if(!this.isLeaf(t)){var e=this.leftChild(t),n=this.rightChild(t),i=t;this.values[e]>this.values[i]&&(i=e),this.values[n]>=this.values[i]&&(i=n),i!==t&&(this.swap(t,i),this.heapifyDown(i))}},e.heapifyUp=function(t){for(var e=t,n=this.parent(e);e>0&&this.values[e]>this.values[n];)this.swap(e,n),e=n,n=this.parent(n)},e.add=function(t,e){var n=new zl(t,e);this.values.push(n),this.heapifyUp(this.values.length-1)},e.peek=function(){return this.values[0]},e.extractMax=function(){var t=this.values[0],e=this.values.pop();return 0===this.values.length||(this.values[0]=e,this.heapifyDown(0)),t},e.buildHeap=function(t){this.values=t;for(var e=Math.floor(this.values.length/2);e>=0;e--)this.heapifyDown(e)},e.print=function(){for(var t=0;!this.isLeaf(t);)t++},t}(),Hl=Wl,Xl=function(){function t(){this.count=0}var e=t.prototype;return e.solve=function(t){this.count=0;var e=new Yl(t),n=new Hl,i=[];for(i=this.DFSSolve({state:e,move:[]},n);0==i.length&&!n.isEmpty()&&this.count<2e3;){var r=n.extractMax().data;i=this.DFSSolve(r,n)}return{moves:i,searchCount:this.count}},e.DFSSolve=function(t,e){if(this.count+=1,t.state.isWin()){for(var n=t,i=[];void 0!=(null==(r=n)?void 0:r.parentState);){var r;i.unshift(n.move),n=n.parentState}return i}if(!t.state.isLose())for(var a=t.state.getAllSuccessors(),s=0;s<a.length;s++){var o=a[s],h=o.state,c=[o.from,o.to],l=new Yl(h);e.add({state:l,move:c,parentState:t},l.getScore())}return e.isEmpty(),[]},t}();function Kl(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return jl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jl(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ql=function(){function t(t){var e=this;if(this.scene=void 0,this.layerManager=void 0,this.layerContainerManager=void 0,this.levelConfig=void 0,this.currentSelected=void 0,this.layerContainers=[],this.lastMoves=[],this.ratioScale=1,this.lastPromiseGive=void 0,this.tutorialManager=void 0,this.solveWorker=void 0,this.gameLogicSolver=void 0,this.loopHighlightHintButtonTimer=void 0,this.suggestionManager=void 0,this.isLayerContainersContainLayersSameColor=function(){for(var t,n=Kl(e.layerContainers);!(t=n()).done;){if(!t.value.isContainLayersSameColor())return!1}return!0},this.scene=t,this.layerContainerManager=new Dl(t),this.layerManager=new El(t),this.tutorialManager=new Vl(t),this.suggestionManager=new Il(t),"undefined"!==typeof Worker)try{this.solveWorker=new Worker(new URL(n.p+n.u(26),n.b),{name:"solving-worker",type:void 0})}catch(i){this.solveWorker=void 0}this.gameLogicSolver=new Xl}var e=t.prototype;return e.buildLevel=function(t){return this.tutorialManager.stop(),this.levelConfig=JSON.parse(JSON.stringify(t)),this.lastMoves=[],GameCore.Configs.Tutorial.LevelTutorial.includes(this.levelConfig.level)&&this.tutorialManager.start(),this.initLayerContainer(t)},e.initLayerContainer=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.layerContainerManager.clearAll(),this.layerManager.clearAll(),n=e.coloredBottleCount+e.emptyBottleCount,this.layerContainers=[],i=function(t){var n=e.bottleList[t],i=a.layerContainerManager.spawn(),r=n.map((function(t,e){var n=a.layerManager.spawn();return n.initDefault({layerContainer:i,index:e,color:t}),n}));i.initDefault({index:t,length:e.bottleVolume,layers:r}),a.layerContainers.push(i)},r=0;r<n;r++)i(r);return this.alignLayerContainers(),t.next=9,this.playStartAnimation();case 9:this.tutorialManager.move();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getSolution=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=performance.now(),n={coloredBottleCount:this.levelConfig.coloredBottleCount,emptyBottleCount:this.levelConfig.emptyBottleCount,bottleVolume:this.levelConfig.bottleVolume,bottleList:[]},i=0;i<this.layerContainers.length;i++)n.bottleList.push(this.layerContainers[i].layers.map((function(t){return t.config.color})));if(!this.solveWorker){t.next=11;break}return t.next=8,this.getSolutionWithWorker(n);case 8:r=t.sent,t.next=12;break;case 11:r=this.getSolutionWithGameLogicSolver(n);case 12:return a=performance.now(),s=a-e,this.scene.analytics.event(an.AnalyticsEvents.GET_SOLUTION,{duration:Math.round(s),move:JSON.stringify(r.moves[0]||-1)}),t.abrupt("return",r.moves);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getSolutionWithWorker=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a,s,o,h=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.scene.game.globalScene,i=new Promise((function(t){h.solveWorker?(h.solveWorker.postMessage({state:e}),h.solveWorker.onmessage=function(){var e=(0,K.default)(Z().mark((function e(n){var i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.data,t(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):t({moves:[],searchCount:-1})})),r=new Promise((function(t,e){h.scene.time.delayedCall(200,(function(){return e()}))})),a={moves:[],searchCount:-1},t.prev=4,t.next=7,Promise.race([i,r]);case 7:a=t.sent,t.next=27;break;case 10:return t.prev=10,t.t0=t.catch(4),n.screen.open(aa,{message:"Loading",duration:0,loading:!0}),s=new Promise((function(t,e){h.scene.time.delayedCall(2e3,(function(){return e()}))})),t.prev=14,t.next=17,Promise.race([i,s]);case 17:a=t.sent,t.next=24;break;case 20:t.prev=20,t.t1=t.catch(14),null==(o=this.solveWorker)||o.terminate(),this.scene.analytics.event(an.AnalyticsEvents.GET_SOLUTION_TIME_OUT);case 24:return t.prev=24,n.screen.close(aa),t.finish(24);case 27:return t.abrupt("return",a);case 28:case"end":return t.stop()}}),t,this,[[4,10],[14,20,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.getSolutionWithGameLogicSolver=function(t){return this.gameLogicSolver?this.gameLogicSolver.solve(t):{moves:[],searchCount:-1}},e.playStartAnimation=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.layerContainers.map((function(t){return t.playStartAnimation()})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.playWinAnimation=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.layerContainers.map((function(t){return t.playWinAnimation()})));case 2:this.layerContainers.map((function(t){return t.playHideAnimation()}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.alignLayerContainers=function(){var t=this;this.ratioScale=this.calculateRatioScale();var e=this.layerContainers.length,n=Math.ceil(e/2),i=Math.floor(e/2),r=this.scene.ads.getBannerHeight()+75,a=70*this.ratioScale,s=this.scene.world.getWorldSize(),o=s.width,h=s.height;this.layerContainers.forEach((function(e){e.setWorldSize(t.ratioScale*e.originWidth,t.ratioScale*e.originHeight);var n=e.layers,i=e.flipX?-1:1;n.forEach((function(e){var n=e.originScale*t.ratioScale;e.setScale(n*i,n)}))}));for(var c=0;c<n;c++){this.layerContainers[2*c].setPosition(-2,h/2+a*(-n/2+c)+(70-r)/2+a)}for(var l=0;l<i;l++){this.layerContainers[2*l+1].setPosition(o+2,h/2+a*(-i/2+l)+(70-r)/2+a)}},e.isCanUndo=function(){return 0!==this.lastMoves.length},e.undo=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r,a,s,o,h=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isCanUndo()){t.next=2;break}return t.abrupt("return");case 2:return this.unSelectHighlight(),e=this.lastMoves.pop(),n=e.from,i=e.to,r=e.layerCount,a=this.layerContainers[n],s=this.layerContainers[i],o=s.giveLayers(a,r),this.lastPromiseGive=o,this.lastPromiseGive.then((function(){h.lastPromiseGive===o&&h.checkGameState()})),this.tutorialManager.move(),t.abrupt("return");case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.skipLevel=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.showRewardVideo();case 2:t.sent&&(e=this.scene.level.getLevel(),this.scene.updatePlayerLevel(e+1),this.scene.level.nextLevel(),this.scene.levelUp());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.restartLevel=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildLevel(this.levelConfig));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.selectContainer=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.showHint(),this.currentSelected){t.next=6;break}e.getGiveableLayers().length>0&&this.selectHighLight(e),t.next=12;break;case 6:if(n=this.currentSelected,this.unSelectHighlight(),n!==e){t.next=10;break}return t.abrupt("return");case 10:0!=(i=n.isCanGiveTo(e))?(this.hideHint(),this.showHint(),this.lastMoves.push({from:n.config.index,to:e.config.index,layerCount:i}),r=n.giveLayers(e,i),this.lastPromiseGive=r,this.lastPromiseGive.then((function(){a.lastPromiseGive===r&&a.checkGameState()})),this.isLayerContainersContainLayersSameColor()&&this.handleLayerContainersContainLayersSameColor(e),this.tutorialManager.move()):this.selectContainer(e);case 12:return t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.selectHighLight=function(t){this.currentSelected=t,t.showHighlight()},e.unSelectHighlight=function(){var t;null==(t=this.currentSelected)||t.hideHighlight(),this.currentSelected=void 0},e.checkGameState=function(){this.isWin()?this.win():this.isLose()&&this.lose()},e.isWin=function(){for(var t,e=Kl(this.layerContainers);!(t=e()).done;){var n=t.value;if(!n.isEmpty()&&!n.isComplete())return!1}return!0},e.isLose=function(){return 0===this.getAllValidMoves().length},e.win=function(){this.unSelectHighlight(),this.scene.win(),this.tutorialManager.stop()},e.lose=function(){this.unSelectHighlight(),this.scene.lose(this.levelConfig.level),this.tutorialManager.stop()},e.addMoreLayerContainer=function(){this.unSelectHighlight();var t=this.layerContainerManager.spawn();t.initDefault({index:this.layerContainers.length,length:this.levelConfig.bottleVolume,layers:[]}),this.layerContainers.push(t),this.alignLayerContainers()},e.getAllValidMoves=function(){for(var t=[],e=0;e<this.layerContainers.length;e++)for(var n=this.layerContainers[e],i=0;i<this.layerContainers.length;i++)if(e!=i){var r=this.layerContainers[i],a=r.getEmptyLayerCount(),s=n.getGiveableLayers();r.isCanAddLayer(s)&&a>=s.length&&t.push([e,i])}return t},e.calculateRatioScale=function(){var t=this.layerContainers.length,e=this.scene.ads.getBannerHeight()+75,n=this.scene.world.getWorldSize().height,i=70*Math.ceil(t/2),r=n-70-e;return r<i?r/i:1},e.getRatioScale=function(){return this.ratioScale},e.handleLayerContainersContainLayersSameColor=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!GameCore.Configs.Tutorial.LevelTutorial.includes(this.levelConfig.level)){t.next=3;break}return t.abrupt("return");case 3:for(this.unSelectHighlight(),n=[],this.layerContainers.forEach((function(t){t.isComplete()||0==t.layers.length||n.push(t)})),i=100,r=function(){var t=n[0].getTopColor(),r=n.filter((function(e){if(e.getTopColor()===t)return e}));if(r.length>0){i+=100*r.length;var s=r[Phaser.Math.RND.between(0,r.length-1)];r.forEach((function(t){e===t&&(s=t)})),r.forEach((function(t){if(s!==t){var e=t.giveLayersAutoComplete(s,i);a.lastPromiseGive=e,a.lastPromiseGive.then((function(){a.lastPromiseGive===e&&a.checkGameState()}))}})),r.forEach((function(t){var e=n.indexOf(t);n.splice(e,1)}))}};0!==n.length;)r();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.showHint=function(){var t=this;this.hideHighLightHintButton(),this.loopHighlightHintButtonTimer=this.scene.time.addEvent({delay:2e4,loop:!0,callback:function(){t.scene.footer.showHighlightHintButton()}})},e.hideHighLightHintButton=function(){var t;null==(t=this.loopHighlightHintButtonTimer)||t.remove(),this.scene.footer.hideHighlightHintButton()},e.hideHint=function(){this.hideHighLightHintButton(),this.suggestionManager.stop(),this.scene.footer.hintButton.setDisabled(!1)},t}(),Zl={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{}},Ql=function(t){function e(e){return t.call(this,Zl,e)||this}return(0,j.default)(e,t),e}(ah.default),Jl=Ql,$l=Zr.default.DEFAULT,tu=$l.KEY,eu=$l.FRAME,nu=function(t){function e(e){var n;return(n=t.call(this,e)||this).cat=void 0,n.createEffect(),n.createCat(),n.runCatAnimation(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createCat=function(){this.cat=this.scene.make.image({key:tu,frame:eu.BLANK,origin:{x:.5,y:1}}),this.cat.setWorldSize(100,117),this.cat.setY(this.cat.height/2),this.add(this.cat)},n.createEffect=function(){},n.runCatAnimation=function(){new uc({targets:[this.cat],duration:1e3,props:{scale:"-=0.02"}}).play()},e}(Phaser.GameObjects.Container),iu=nu,ru=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.sadCat=void 0,n.board=void 0,n.titleText=void 0,n.descriptionText=void 0,n.boardAnimation=void 0,n.theCatAnimation=void 0,n.textsAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0),n.runBoardAnimation(),n.runCatAnimation(),n.runTextsAnimation()},n.runExistAnimation=function(){if(!n.existAnimation){var t=n.getAll();n.existAnimation=new Jl({targets:t,duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{y:{getStart:function(t){return t.y},getEnd:function(t){return t.y+150}},alpha:{value:0,delay:250,duration:150}},onComplete:function(){Phaser.Actions.IncY(t,-150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=e,n.setVisible(!1),n.createBoard(),n.createTitleText(),n.createDescriptionText(),n.createTheCat(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createBoard=function(){this.board=new ea(this.scene,0,0,600,102),this.board.setDepth(qr.default.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.sadCat=new iu(this.scene),this.sadCat.setDepth(qr.default.LOGO),this.add(this.sadCat),Phaser.Display.Align.In.Center(this.sadCat,this.board,-140,-19)},n.createTitleText=function(){this.titleText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(22),depth:qr.default.TEXT,origin:{x:.5,y:.5},text:"Level Failed"}),this.add(this.titleText),this.titleText.setTint(12010469),Phaser.Display.Align.In.Center(this.titleText,this.board,35,-20)},n.createDescriptionText=function(){this.descriptionText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(20),depth:qr.default.TEXT,origin:{x:.5,y:.5},text:"You did not reach the target score"}),this.add(this.descriptionText),this.descriptionText.setTint(11632977),Phaser.Display.Align.In.Center(this.descriptionText,this.board,35,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var t=this.board.y;this.boardAnimation=new Jl({targets:[this.board],duration:300,props:{y:{start:t+80,to:t},alpha:{start:0,from:0,to:1}}})}this.boardAnimation.play()},n.runCatAnimation=function(){if(!this.theCatAnimation){var t=this.sadCat.x;this.theCatAnimation=new Jl({targets:[this.sadCat],ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.6,1],delay:150,duration:800,props:{alpha:{start:0,from:0,to:1},scale:{start:.3,to:1},x:{start:t-80,to:t}}})}this.theCatAnimation.play()},n.runTextsAnimation=function(){this.titleText.setAlpha(0),this.descriptionText.setAlpha(0),this.textsAnimation||(this.textsAnimation=new Jl({targets:[this.titleText,this.descriptionText],duration:500,delay:this.scene.tweens.stagger(200,{start:200}),props:{y:{getEnd:function(t){return t.y}},alpha:{start:0,from:0,to:1}},completeDelay:1e3,onComplete:this.runExistAnimation})),this.textsAnimation.play()},e}(Phaser.GameObjects.Container),au=ru,su={targets:[],duration:200,repeat:5,props:{alpha:{start:1,to:.1}}},ou=function(t){function e(e){return t.call(this,su,e)||this}return(0,j.default)(e,t),e}(ah.default),hu=ou,cu=function(t){function e(e){var n;(n=t.call(this,e,0,0,qo.default.PRIMARY.KEY)||this).scene=void 0,n.flickerAnimation=void 0,n.scene=e;var i=n.scene.fontSize(14);return n.setFontSize(i),n.setOrigin(.5,.5),n.setNotifyText("Loading interstitial ad..."),n.setVisible(!1),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.show=function(){this.setVisible(!0),this.runTextAnimation()},n.setNotifyText=function(t){this.setText(t)},n.runTextAnimation=function(){var t,e=this;this.flickerAnimation||(this.flickerAnimation=new hu({targets:[this],yoyo:!0,duration:300,repeat:3,ease:"Sine.easeInOut",onStart:function(){e.setVisible(!0)},onComplete:function(){e.setVisible(!1)}})),null==(t=this.flickerAnimation)||t.play()},e}(Phaser.GameObjects.BitmapText),lu=cu,uu=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.theCat=void 0,n.board=void 0,n.levelText=void 0,n.scoreTargetText=void 0,n.boardAnimation=void 0,n.existAnimation=void 0,n.runAnimation=function(){n.scene.tweens.killTweensOf(n.getAll()),n.setVisible(!0)},n.runExistAnimation=function(){if(!n.existAnimation){var t=n.getAll();n.existAnimation=new Jl({targets:t,duration:300,ease:Phaser.Math.Easing.Back.In,props:{y:{getStart:function(t){return t.y},getEnd:function(t){return t.y+-150}}},onComplete:function(){Phaser.Actions.IncY(t,150),n.setVisible(!1)}})}n.existAnimation.play()},n.scene=e,n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.setLevel=function(t){},n.setScoreTarget=function(t){},n.createBoard=function(){this.board=new ea(this.scene,0,0,600,102),this.board.setDepth(qr.default.BACKGROUND),this.add(this.board)},n.createTheCat=function(){this.theCat=new Ac(this.scene),this.theCat.setDepth(qr.default.LOGO),this.add(this.theCat),Phaser.Display.Align.In.Center(this.theCat,this.board,-140,-17)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(22),depth:qr.default.TEXT,origin:{x:.5,y:.5}}),this.add(this.levelText),this.levelText.setTint(12010469),Phaser.Display.Align.In.Center(this.levelText,this.board,25,-20)},n.createTargetText=function(){this.scoreTargetText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(26),depth:qr.default.TEXT,origin:{x:.5,y:.5}}),this.add(this.scoreTargetText),this.scoreTargetText.setTint(11632977),Phaser.Display.Align.In.Center(this.scoreTargetText,this.board,25,10)},n.runBoardAnimation=function(){if(!this.boardAnimation){var t=this.board.y;this.boardAnimation=new Jl({targets:[this.board],duration:300,props:{y:{start:t+80,to:t}}})}this.boardAnimation.play()},e}(Phaser.GameObjects.Container),du=uu,fu={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},pu=function(t){function e(e){var n,i,r;return(r=t.call(this,fu,e)||this).posX=void 0,r.handleSwitchPosition=function(){var t;r.posX=-r.posX,null==(t=r.tween)||t.updateTo("x",-r.posX)},null!=(n=r.config)&&n.props?(r.posX=r.config.props.x,null==(i=r.tween)||i.on(Phaser.Tweens.Events.TWEEN_REPEAT,r.handleSwitchPosition),r):(0,jr.default)(r)}return(0,j.default)(e,t),e}(ah.default),mu=pu,gu=n(42),vu={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},yu=function(t){function e(e){return t.call(this,vu,e)||this}return(0,j.default)(e,t),e}(ah.default),xu=yu,bu={targets:[],duration:300,ease:kc.default,props:{scale:{from:1.2,to:1}}},Eu=function(t){function e(e){return t.call(this,bu,e)||this}return(0,j.default)(e,t),e}(ah.default),Au=Eu,wu={targets:[],duration:1e3,ease:Phaser.Math.Easing.Quadratic.InOut,props:{scale:.2}},Su=function(t){function e(e){var n,i;(i=t.call(this,wu,e)||this).spline=void 0,i.createCounter=function(t,e){var n=i.config.onCurveUpdate,r="function"===typeof n?n:null;e.forEach((function(e,n){if(i.scene){var a=t.data[n],s=a.duration,o=a.delay,h=new Phaser.Math.Vector2;i.scene.tweens.addCounter({delay:o,duration:s,ease:Phaser.Math.Easing.Quadratic.InOut,onUpdate:function(t){i.spline.getPoint(t.getValue(),h),e.x=h.x,e.y=h.y,r&&r(e)}})}}))};var r=i.config.curve;return r?(i.spline=new Phaser.Curves.Spline(r),null==(n=i.tween)||n.on(Phaser.Tweens.Events.TWEEN_START,i.createCounter),i):(0,jr.default)(i)}return(0,j.default)(e,t),e}(ah.default),Mu=Su,Tu=Zr.default.DEFAULT,Cu=Tu.KEY,Iu=Tu.FRAME,Pu=function(t){function e(e){var n;return(n=t.call(this,e,Cu,Iu.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:Iu.BLANK,emitZone:{source:this.emitZone,type:"random"},speed:20,timeScale:1,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:{start:2*t,end:.1*t,ease:Phaser.Math.Easing.Expo.Out},lifespan:2666})},n.run=function(t,e,n,i,r){this.stop(),this.reset(),this.emitZone.setSize(i,r),this.emitZone.setPosition(e-i/2,n-r/2),this.emitter.setQuantity(t),this.emitter.start()},n.explode=function(t,e,n){this.emitter||this.reset(),this.emitter.explode(t,e,n)},n.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},n.reset=function(){this.createEmitters()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),ku=Pu,Ru=n(43),Lu=Zr.default.DEFAULT,Ou=Lu.KEY,_u=Lu.FRAME,Du=function(t){function e(e){var n;return(n=t.call(this,e,Ou,_u.BLANK)||this).emitZone=void 0,n.emitter=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var t=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({on:!1,frame:_u.BLANK,emitZone:{source:this.emitZone,type:"random"},deathZone:{source:this.emitZone,type:"onLeave"},timeScale:1,frequency:150,speedY:{min:-20,max:-60},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:1*t,end:0,ease:Phaser.Math.Easing.Cubic.Out},lifespan:{min:1500,max:2500}})},n.run=function(t,e,n,i,r){this.stop(),this.emitZone.setSize(i,r),this.emitZone.setPosition(e-i/2,n-r/2),this.emitter.setQuantity(t),this.emitter.start()},n.stop=function(){var t,e;null==(t=this.emitter)||t.killAll(),null==(e=this.emitter)||e.stop()},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Bu=Du,Nu=GameCore.Configs.Network,Fu=Zr.default.DEFAULT,Uu=Fu.KEY,Gu=Fu.FRAME,Vu=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).rewardValue=void 0,a.onReward=void 0,a.hand=void 0,a.viewAdButton=void 0,a.skipButton=void 0,a.giftIcon=void 0,a.giftIconWhite=void 0,a.currencyIcon=void 0,a.currencyText=void 0,a.popupContents=void 0,a.cometTwinkle=void 0,a.starTwinkleUp=void 0,a.sparksExplosive=void 0,a.popupFadeOutAnimation=void 0,a.backgroundFadeInAnimation=void 0,a.contentShowUpAnimation=void 0,a.giftEntrancesAnimation=void 0,a.giftAttentionAnimation=void 0,a.iconAttentionAnimation=void 0,a.giftShakeAnimation=void 0,a.giftOpenAnimation=void 0,a.adsTimer=void 0,a.open=function(e){t.prototype.open.call((0,jr.default)(a),e);var n=a.getData("awardDiamonds");a.setRewardValue(n),a.runOpenAnimation()},a.handleClosePopup=function(){a.runCloseAnimation()},a.handleShowRewardedVideoAd=(0,K.default)(Z().mark((function t(){var e,n,i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=a.scene,n=e.audio,i=e.game,a.viewAdButton.setDisabled(!0),i.globalScene.screen.open(aa,{message:"Loading ads...",duration:0,loading:!0}),n.pauseMusic(),n.muteAll(),t.next=8,new Promise((function(t,e){var n;null==(n=a.adsTimer)||n.remove(),a.adsTimer=a.scene.time.delayedCall(Nu.Timeout,e),a.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.scene.ads.events.once(GameCore.Ads.Events.LOADED,t):a.scene.ads.preloadRewardedVideoAsync().then(t).catch(e)}));case 8:return a.scene.analytics.showRewardedVideoAd(a.getScreenName()),t.next=11,a.scene.ads.showRewardedVideoAsync();case 11:i.globalScene.screen.close(aa),a.starTwinkleUp.stop(),a.popupContents.kill(),a.runTheGiftEntrancesAnimation(0,1500),t.next=25;break;case 17:if(t.prev=17,t.t0=t.catch(0),a.scene.analytics.showAdFail(GameCore.Ads.Types.REWARDED,a.getScreenName(),t.t0),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code"))){t.next=24;break}if("USER_INPUT"!==t.t0.code){t.next=24;break}return a.showNotifySkipAds(),t.abrupt("return");case 24:a.showNotifyNoAds();case 25:return t.prev=25,null==(r=a.adsTimer)||r.destroy(),a.scene.audio.unmuteAll(),a.scene.audio.playMusic(),a.viewAdButton.setDisabled(!1),t.finish(25);case 31:case"end":return t.stop()}}),t,null,[[0,17,25,31]])}))),a.handleTheGiftClick=function(){a.setTheGiftClickable(!1),a.logButtonEvent("OpenGift"),a.hand.kill(),a.giftIconWhite.revive(),a.scene.tweens.killTweensOf(a.giftIcon),Phaser.Display.Align.In.Center(a.giftIconWhite,a.giftIcon),a.runShakeTheGift(),a.runOpenTheGift()},a.showNotifyNoAds=function(t){t&&t.name!==aa||a.scene.game.globalScene.screen.open(aa,{message:"No ads to display!",duration:1200,loading:!1})},a.showNotifySkipAds=function(){a.scene.game.globalScene.screen.open(aa,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:1500,loading:!1})},a.runCloseAnimation=function(){a.runExitsAnimation(0,200)},a.setDepth(ua),a.background.setAlpha(.8),a.createViewAdsButton(),a.createSkipButton(),a.createCurrencyIcon(),a.createCurrencyText(),a.createEffects(),a.createGiftIcon(),a.createHand(),a.createContentsGroup(),a}(0,j.default)(e,t);var n=e.prototype;return n.setTheGiftClickable=function(t){t?this.giftIcon.setInteractive():this.giftIcon.disableInteractive()},n.logButtonEvent=function(t){var e=this.getScreenName();this.scene.analytics.event(an.AnalyticsEvents.BUTTON_CLICK,{button_name:t,screen_name:e})},n.runOpenAnimation=function(){this.revive(),this.hand.kill(),this.popupContents.revive(),this.starTwinkleUp.stop(),this.runBackgroundEntrancesAnimation(0,200),this.runPopupContentEntrancesAnimation(100,400),this.runLogoAttentionAnimation(500)},n.runBackgroundEntrancesAnimation=function(t,e){this.backgroundFadeInAnimation||(this.backgroundFadeInAnimation=new Bc({targets:[this.background],delay:t,duration:e,props:{alpha:{start:0,to:.8}}})),this.backgroundFadeInAnimation.play()},n.runPopupContentEntrancesAnimation=function(t,e){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Au({targets:this.popupContents.getChildren(),duration:e,delay:this.scene.tweens.stagger(100,{start:t}),props:{scale:{getStart:function(t){return t.scale-.3},getEnd:function(t){return t.scale}},alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runLogoAttentionAnimation=function(t){var e=this.currencyIcon,n=e.x,i=e.y,r=e.width,a=e.height;this.starTwinkleUp.run(1,n,i,r,a),this.iconAttentionAnimation||(this.iconAttentionAnimation=new uc({targets:[this.currencyIcon],delay:t,props:{scale:"+=0.05"}})),this.iconAttentionAnimation.play()},n.runTheGiftEntrancesAnimation=function(t,e){var n,i=this;this.giftIcon.revive(),this.giftIcon.setAlpha(1),Phaser.Display.Align.In.TopRight(this.giftIcon,this.zone),null==(n=this.giftEntrancesAnimation)||n.remove();var r=this.giftIcon,a=r.x,s=r.y,o=this.currencyText,h={x:a,y:s},c={x:o.x,y:o.y},l=1/this.scene.world.getPixelRatio();this.giftEntrancesAnimation=new Mu({targets:[this.giftIcon],delay:t,duration:e,curve:[[h.x,h.y],[h.x-80,h.y+80],[c.x,c.y]],props:{scale:{start:.5*l,to:l},angle:{start:20,to:0}},onCurveUpdate:function(t){var e=t.x+Phaser.Math.RND.between(-40,40),n=t.y+Phaser.Math.RND.between(-40,40);i.cometTwinkle.explode(1,e,n)},onComplete:function(){i.starTwinkleUp.setScale(1.5);var t=i.giftIcon,e=t.x,n=t.y,r=t.width,a=t.height;i.starTwinkleUp.run(1,e,n,r/1.5,a/1.5),i.moveTo(i.starTwinkleUp,i.length-1),i.runTheGiftAttentionAnimation()}}),this.giftEntrancesAnimation.play()},n.runTheGiftAttentionAnimation=function(){this.giftAttentionAnimation||(this.giftAttentionAnimation=new uc({targets:[this.giftIcon],props:{scale:"+=0.05"}})),this.hand.revive(),Phaser.Display.Align.In.Center(this.hand,this.giftIcon,20,20),this.setTheGiftClickable(!0),this.giftAttentionAnimation.play()},n.runShakeTheGift=function(){this.giftShakeAnimation||(this.giftShakeAnimation=new mu({targets:[this.giftIcon,this.giftIconWhite],duration:22})),this.giftShakeAnimation.play()},n.runOpenTheGift=function(){var t=this;if(!this.giftOpenAnimation){var e=1/this.scene.world.getPixelRatio();this.giftOpenAnimation=new gu.default({targets:[this.giftIcon,this.giftIconWhite],duration:1500,props:{alpha:0,scale:e},onUpdate:function(){t.giftIconWhite.setAlpha(1)},onComplete:function(){t.giftShakeAnimation.stop(),t.giftIcon.kill(),t.giftIconWhite.kill(),t.sparksExplosive.explode(100,t.giftIcon.x,t.giftIcon.y,230),t.onReward(t.rewardValue),t.scene.time.delayedCall(500,t.runCloseAnimation)}})}this.giftOpenAnimation.play()},n.runExitsAnimation=function(t,e){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new xu({targets:this.getAll(),delay:t,duration:e,props:{alpha:{start:.8,to:0}},onComplete:function(){n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.createHand=function(){this.hand=new Gl(this.scene),this.add(this.hand)},n.createContentsGroup=function(){this.popupContents=this.scene.make.group({}),this.popupContents.addMultiple([this.currencyIcon,this.currencyText,this.viewAdButton,this.skipButton])},n.createCurrencyIcon=function(){this.currencyIcon=this.scene.add.image(0,0,Uu,Gu.BLANK),this.currencyIcon.setWorldSize(150,150),Phaser.Display.Align.In.Center(this.currencyIcon,this.zone,0,-80),this.add(this.currencyIcon)},n.createCurrencyText=function(){this.currencyText=this.scene.make.bitmapText({size:this.scene.fontSize(22),font:qo.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.currencyText.setCenterAlign(),this.setRewardValue(0),this.add(this.currencyText)},n.setRewardValue=function(t){this.rewardValue=t,this.currencyText.setText("Watch a video to get\n"+t+" diamonds!"),Phaser.Display.Align.In.BottomCenter(this.currencyText,this.currencyIcon,0,60)},n.createViewAdsButton=function(){this.viewAdButton=new jo.default(this.scene,Uu,Gu.BLANK,232,69),this.viewAdButton.setName("ViewAd"),this.viewAdButton.onClick=this.handleShowRewardedVideoAd;var t=this.scene.add.image(0,0,Uu,Gu.BLANK);t.setWorldSize(37,34),Phaser.Display.Align.In.Center(t,this.viewAdButton),t.setX(this.viewAdButton.x-70),this.viewAdButton.add(t);var e=this.scene.make.bitmapText({size:this.scene.fontSize(30),text:"GET NOW!",font:qo.default.PRIMARY.KEY});Phaser.Display.Align.In.Center(e,this.viewAdButton,15,0),this.viewAdButton.add(e),Phaser.Display.Align.In.Center(this.viewAdButton,this.zone,0,100),this.add(this.viewAdButton)},n.createSkipButton=function(){this.skipButton=new jo.default(this.scene,Uu,Gu.BLANK,129,25),this.skipButton.setName("NoThanks"),this.skipButton.onClick=this.handleClosePopup,Phaser.Display.Align.In.BottomCenter(this.skipButton,this.viewAdButton,0,50),this.add(this.skipButton)},n.createGiftIcon=function(){this.giftIconWhite=this.scene.make.image({key:Uu,frame:Gu.BLANK,visible:!1}),this.giftIconWhite.setWorldSize(150,150),this.giftIconWhite.setDepth(qr.default.PRIORITY),this.add(this.giftIconWhite),this.giftIcon=this.scene.make.image({key:Uu,frame:Gu.BLANK,visible:!1}),this.giftIcon.setInteractive({useHandCursor:!0}),this.giftIcon.setWorldSize(150,150),this.giftIcon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleTheGiftClick),this.setTheGiftClickable(!1),this.add(this.giftIcon)},n.createEffects=function(){this.cometTwinkle=new ku(this.scene),this.starTwinkleUp=new Bu(this.scene),this.sparksExplosive=new Ru.default(this.scene),this.add([this.cometTwinkle,this.starTwinkleUp,this.sparksExplosive])},e}(GameCore.Screen),Yu=Vu,zu=function(t){if("string"!==typeof t||!t)throw new rs(null,{imageShare:t})},Wu=Zr.default.GAME_PLAY,Hu=Wu.KEY,Xu=Wu.FRAME,Ku=function(t){function e(e){var n;(n=t.call(this,e,Hu,Xu.BUTTON_ORANGE_CIRCLE,48,49.5)||this).isDisabled=void 0,n.isDisabled=!1,n.setName("AddBranchButton");var i=n.scene.make.image({key:Hu,frame:Xu.ICON_BRANCH});i.setDisplaySize(30.5,30.5);var r=n.scene.make.image({key:Hu,frame:Xu.ICON_AD});return r.setDisplaySize(21.5,20),n.add([i,r]),Phaser.Display.Align.In.Center(i,(0,jr.default)(n)),Phaser.Display.Align.In.BottomCenter(r,(0,jr.default)(n),15,15),n}(0,j.default)(e,t);var n=e.prototype;return n.setDisabled=function(e){t.prototype.setDisabled.call(this,e),this.isDisabled=e},n.getIsDisabled=function(){return this.isDisabled},e}(jo.default),ju=Ku,qu=Zr.default.GAME_PLAY,Zu=qu.KEY,Qu=qu.FRAME,Ju=function(t){function e(e,n,i,r,a){var s;(s=t.call(this,e,Zu,Qu.BUTTON_ORANGE_CIRCLE,48,49.5)||this).subIcon=void 0,s.countItemText=void 0,s.countItem=0;var o=s.scene.make.image({key:n,frame:i});return o.setDisplaySize(r,a),s.subIcon=s.scene.make.image({key:Zu,frame:Qu.ICON_DOT}),s.subIcon.setDisplaySize(19.5,20),s.countItemText=s.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:s.scene.fontSize(12),text:"0"}),s.add([o,s.subIcon,s.countItemText]),Phaser.Display.Align.In.Center(o,(0,jr.default)(s)),Phaser.Display.Align.In.BottomCenter(s.subIcon,(0,jr.default)(s),15,15),Phaser.Display.Align.In.Center(s.countItemText,s.subIcon,0,-.75),s}(0,j.default)(e,t);var n=e.prototype;return n.updateCountItem=function(t){0==t?(this.subIcon.setFrame(Qu.ICON_AD),this.subIcon.setDisplaySize(21.5,20),this.countItemText.setVisible(!1)):(this.subIcon.setFrame(Qu.ICON_DOT),this.subIcon.setDisplaySize(19.5,20),this.countItemText.setVisible(!0),this.countItemText.setText(""+t))},n.resetCountItem=function(t){this.countItem=t,this.updateCountItem(t)},n.decreaseCountItem=function(){0!==this.countItem&&(this.countItem-=1,this.updateCountItem(this.countItem))},n.getCountItem=function(){return this.countItem},e}(jo.default),$u=Ju,td=Zr.default.GAME_PLAY,ed=td.KEY,nd=td.FRAME,id=function(t){function e(e){var n;return(n=t.call(this,e,ed,nd.ICON_HINT,20,29)||this).pulsateBubbleAnimation=void 0,n.defaultScale=void 0,n.setName("HintButton"),n}(0,j.default)(e,t);var n=e.prototype;return n.runPulsateBubbleAnimation=function(){var t;this.pulsateBubbleAnimation||(this.defaultScale=this.scale,this.pulsateBubbleAnimation=new uc({targets:[this],duration:500,props:{scale:"*=1.1"}})),null!=(t=this.pulsateBubbleAnimation.tween)&&t.isPlaying()||this.pulsateBubbleAnimation.play()},n.stopPulsateBubbleAnimation=function(){var t;null==(t=this.pulsateBubbleAnimation)||t.stop(),this.defaultScale&&(this.scale=this.defaultScale)},e}($u),rd=id,ad=Zr.default.GAME_PLAY,sd=ad.KEY,od=ad.FRAME,hd=function(t){function e(e){var n;return(n=t.call(this,e,sd,od.ICON_BACK,30.5,30.5)||this).setName("UndoButton"),n}return(0,j.default)(e,t),e}($u),cd=hd,ld=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.addBranchButton=void 0,n.undoButton=void 0,n.hintButton=void 0,n.handleAddFriend=function(){n.scene.storage.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d,f;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game,r=i.player,a=i.analytics,s=i.facebook,o=i.globalScene,t.prev=1,o.screen.open(aa,{message:"Loading...",loading:!0}),h=n(),t.next=6,Cs(h);case 6:return c=t.sent,zu(c),l=r.getPlayer(),u=l.playerId,d=l.name,f=l.photo,t.next=11,s.inviteAsync({template:pr,text:{default:"Easy! I just passed a new level",localizations:{en_US:"Easy! I just passed a new level",vi_VN:"A ha! M\xecnh v\u1eeba qua m\u1ed9t level m\u1edbi!"}},image:c||"",data:{playerId:u,playerName:d,playerPhoto:f,type:pr}});case 11:a.event(an.AnalyticsEvents.INVITE,{invite_content_type:"CurrentScore",success:!0}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),a.event(an.AnalyticsEvents.INVITE,{invite_content_type:"CurrentScore",success:!1}),(0,H.sendException)(t.t0);case 18:return t.prev=18,o.screen.close(aa),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,14,18,21]])})));return function(e,n){return t.apply(this,arguments)}}())},n.handleAddBranch=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.scene.gameManager.hideHint(),!n.isWinOrLose()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.scene.showRewardVideo();case 5:t.sent&&(n.scene.gameManager.addMoreLayerContainer(),n.addBranchButton.setDisabled(!0),n.addBranchButton.setAlpha(.5)),n.scene.gameManager.showHint();case 8:case"end":return t.stop()}}),t)}))),n.handleNext=function(){n.isWinOrLose()||n.scene.gameManager.skipLevel()},n.handleUndo=function(){if(!n.isWinOrLose()){var t=n.scene.gameManager.isCanUndo();if(0!==n.undoButton.getCountItem()){if(t){n.scene.gameManager.hideHint(),n.scene.gameManager.showHint(),n.undoButton.decreaseCountItem();var e=n.undoButton.getCountItem(),i=n.scene.player.getCountItems();n.updatePlayerCountItems(e,i.hintCount,i.lastTimeUpdate),n.scene.gameManager.undo()}}else n.claimUndo()}},n.handleHint=(0,K.default)(Z().mark((function t(){var e,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isWinOrLose()){t.next=2;break}return t.abrupt("return");case 2:if(n.scene.gameManager.hideHint(),0!==n.hintButton.getCountItem()){t.next=7;break}return n.claimHint(),t.abrupt("return");case 7:n.hintButton.setDisabled(!0),n.scene.gameManager.suggestionManager.move(),n.hintButton.decreaseCountItem(),e=n.hintButton.getCountItem(),i=n.scene.player.getCountItems(),n.updatePlayerCountItems(i.undoCount,e,i.lastTimeUpdate);case 13:case"end":return t.stop()}}),t)}))),n.updateCountItems=(0,K.default)(Z().mark((function t(){var e,i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=n.scene.player.getCountItems())&&(!e||(0,Vt.checkIsToday)(e.lastTimeUpdate))&&!GameCore.Configs.DailyCountItems.ForceNewDay){t.next=5;break}return t.next=4,n.resetCountItems();case 4:return t.abrupt("return");case 5:i=e.undoCount,r=e.hintCount,n.setUndoCountOnStartLevel(i),n.setHintCountOnStartLevel(r);case 9:case"end":return t.stop()}}),t)}))),n.resetCountItems=(0,K.default)(Z().mark((function t(){var e,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=GameCore.Configs.Gameplay.UndoCount,i=GameCore.Configs.Gameplay.HintCount,n.setUndoCountOnStartLevel(e),n.setHintCountOnStartLevel(i),t.next=6,n.updatePlayerCountItems(e,i,(new Date).getTime());case 6:case"end":return t.stop()}}),t)}))),n.scene=e,n.scene.add.existing((0,jr.default)(n)),n.createButtons(),n.createEvents(),n}(0,j.default)(e,t);var n=e.prototype;return n.initDefault=function(){this.addBranchButton.setAlpha(1),this.hintButton.setAlpha(1),this.updateCountItems()},n.createButtons=function(){this.createAddBranchButton(),this.createUndoButton(),this.createHintButton()},n.createEvents=function(){this.addBranchButton.onClick=this.handleAddBranch,this.undoButton.onClick=this.handleUndo,this.hintButton.onClick=this.handleHint},n.createAddBranchButton=function(){this.addBranchButton=new ju(this.scene),this.add(this.addBranchButton),Phaser.Display.Align.In.Center(this.addBranchButton,this,-140.625,0)},n.createUndoButton=function(){this.undoButton=new cd(this.scene),this.add(this.undoButton),Phaser.Display.Align.In.Center(this.undoButton,this,0,0)},n.createHintButton=function(){this.hintButton=new rd(this.scene),this.add(this.hintButton),Phaser.Display.Align.In.Center(this.hintButton,this,140.625,0)},n.createNextButton=function(){},n.setHintCountOnStartLevel=function(t){this.hintButton.resetCountItem(t)},n.setUndoCountOnStartLevel=function(t){this.undoButton.resetCountItem(t)},n.setDisable=function(t){this.addBranchButton.setDisabled(t),this.undoButton.setDisabled(t),this.hintButton.setDisabled(t);var e=GameCore.Configs.Tutorial.LevelTutorial,n=this.scene.level.getLevel();e.includes(n)&&(this.addBranchButton.setDisabled(!0),this.addBranchButton.setAlpha(.5),this.hintButton.setDisabled(!0),this.hintButton.setAlpha(.5))},n.isWinOrLose=function(){var t=this.scene.gameManager.isWin(),e=this.scene.gameManager.isLose();return!(!t&&!e)},n.claimUndo=function(){var t=(0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.scene.gameManager.hideHint(),t.next=3,this.scene.showRewardVideo();case 3:t.sent&&(e=GameCore.Configs.Gameplay.UndoClaim,n=this.scene.player.getCountItems(),this.updatePlayerCountItems(e,n.hintCount,n.lastTimeUpdate),this.undoButton.resetCountItem(e)),this.scene.gameManager.showHint();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.claimHint=function(){var t=(0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.showRewardVideo();case 2:t.sent?(e=GameCore.Configs.Gameplay.HintClaim,n=this.scene.player.getCountItems(),this.updatePlayerCountItems(n.undoCount,e,n.lastTimeUpdate),this.hintButton.resetCountItem(e),this.hintButton.setDisabled(!0),this.scene.gameManager.suggestionManager.move()):this.scene.gameManager.showHint();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.showHighlightHintButton=function(){this.hintButton.runPulsateBubbleAnimation()},n.hideHighlightHintButton=function(){this.hintButton.stopPulsateBubbleAnimation()},n.updatePlayerCountItems=function(){var t=(0,K.default)(Z().mark((function t(e,n,i){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={undoCount:e,hintCount:n,lastTimeUpdate:i},t.next=3,FBInstant.player.setDataAsync({countItems:r});case 3:return t.next=5,this.scene.player.updateCustomFields({countItems:r});case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),e}(Phaser.GameObjects.Container),ud=ld,dd=Zr.default.GAME_PLAY,fd=dd.KEY,pd=dd.FRAME,md=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.pauseButton=void 0,n.restartButton=void 0,n.levelText=void 0,n.handlePause=function(){n.scene.scene.switch(Rr.SceneKeys.PAUSE_SCENE)},n.handleRestart=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.isWinOrLose(),!n.scene.gameManager.isCanUndo()||e){t.next=8;break}return t.next=5,n.scene.showInterstitialAd();case 5:n.scene.restartLevel(),n.scene.gameManager.hideHint(),n.scene.gameManager.showHint();case 8:case"end":return t.stop()}}),t)}))),n.scene=e,n.scene.add.existing((0,jr.default)(n)),n.createButtons(),n.createLevelText(),n.createEvents(),n}(0,j.default)(e,t);var n=e.prototype;return n.createButtons=function(){this.createPauseButton(),this.createRestartButton()},n.createEvents=function(){this.pauseButton.onClick=this.handlePause,this.restartButton.onClick=this.handleRestart},n.createPauseButton=function(){this.pauseButton=new jo.default(this.scene,fd,pd.BUTTON_CYAN_CIRCLE,48,49.5),this.pauseButton.setName("PauseButton");var t=this.scene.make.image({key:fd,frame:pd.ICON_PAUSE});t.setDisplaySize(30.5,30.5),this.pauseButton.add(t),Phaser.Display.Align.In.Center(t,this.pauseButton),this.add(this.pauseButton),Phaser.Display.Align.In.Center(this.pauseButton,this,-140.625,0)},n.createRestartButton=function(){this.restartButton=new jo.default(this.scene,fd,pd.BUTTON_ORANGE_CIRCLE,48,49.5),this.restartButton.setName("RestartButton");var t=this.scene.make.image({key:fd,frame:pd.ICON_RETURN});t.setDisplaySize(30.5,30.5),this.restartButton.add(t),Phaser.Display.Align.In.Center(t,this.restartButton),this.add(this.restartButton),Phaser.Display.Align.In.Center(this.restartButton,this,140.625,0)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(36),text:"Level 1"}),this.add(this.levelText),this.levelText.setOrigin(.5,.4)},n.updateLevelText=function(t){this.levelText.setText("Level "+t)},n.setDisable=function(t){this.pauseButton.setDisabled(t),this.restartButton.setDisabled(t)},n.isWinOrLose=function(){var t=this.scene.gameManager.isWin(),e=this.scene.gameManager.isLose();return!(!t&&!e)},e}(Phaser.GameObjects.Container),gd=md,vd=Zr.default.DEFAULT,yd=vd.KEY,xd=vd.FRAME,bd=function(t){function e(e){var n;return(n=t.call(this,e,yd)||this).leftConfettiEmitter=void 0,n.leftRibbonEmitter=void 0,n.rightConfettiEmitter=void 0,n.rightRibbonEmitter=void 0,n.listEmitter=[],n.setDepth(qr.default.ON_TOP),n.createExplodeAnimation(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createExplodeAnimation=function(){var t=1/this.scene.world.getPixelRatio(),e=this.scene.world.getWorldSize(),n=e.width,i=(e.height,[xd.CONFETTI_PARTICLE_1,xd.CONFETTI_PARTICLE_2,xd.CONFETTI_PARTICLE_3,xd.CONFETTI_PARTICLE_4,xd.CONFETTI_PARTICLE_5,xd.CONFETTI_PARTICLE_6,xd.CONFETTI_PARTICLE_7]),r=[1626097,10222125,16727594,16753164,16177466],a=[xd.RIBBON_PARTICLE_1,xd.RIBBON_PARTICLE_2,xd.RIBBON_PARTICLE_3,xd.RIBBON_PARTICLE_4,xd.RIBBON_PARTICLE_5,xd.RIBBON_PARTICLE_6],s={frame:i,tint:r,x:-n/2-20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*t,end:.8*t,ease:Phaser.Math.Easing.Expo.Out},angle:{start:270,end:360,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:Ed},o={frame:a,tint:r,x:-n/2-20,y:0,speed:{min:1500,max:1800},angle:{start:272,end:360,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*t,end:.55*t,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:Ad},h={frame:i,tint:r,x:n/2+20,y:0,speed:{min:200,max:2e3},gravityY:250,scale:{start:.1*t,end:.8*t,ease:Phaser.Math.Easing.Expo.Out},angle:{start:180,end:270,steps:30},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},lifespan:{min:1500,max:2e3},maxParticles:0,on:!1,particleClass:Ed},c={frame:a,tint:r,x:n/2+20,y:0,speed:{min:1500,max:1800},angle:{start:180,end:268,steps:7},gravityY:0,gravityX:0,lifespan:400,scale:{start:.1*t,end:.55*t,ease:Phaser.Math.Easing.Expo.Out},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Linear},maxParticles:0,on:!1,particleClass:Ad};this.leftConfettiEmitter=this.createEmitter(s),this.leftRibbonEmitter=this.createEmitter(o),this.rightConfettiEmitter=this.createEmitter(h),this.rightRibbonEmitter=this.createEmitter(c),this.listEmitter=[this.leftConfettiEmitter,this.leftRibbonEmitter,this.rightConfettiEmitter,this.rightRibbonEmitter]},n.explode=function(t,e){this.leftConfettiEmitter.flow(1e5,30),this.leftRibbonEmitter.flow(1e5,7),this.rightConfettiEmitter.flow(1e5,30),this.rightRibbonEmitter.flow(1e5,7),this.scene.time.delayedCall(500,this.stop.bind(this))},n.stop=function(){this.listEmitter.forEach((function(t){t.stop()}))},n.killAll=function(){var t=this;this.listEmitter.forEach((function(e){e.killAll(),e.forEachDead((function(t){t.resetPosition()}),t)}))},e}(Phaser.GameObjects.Particles.ParticleEmitterManager),Ed=function(t){function e(e){var n;return(n=t.call(this,e)||this).windX=1,n.airFrictionX=.05,n.airFrictionY=.01,n._lastRotation=0,n.airFrictionX=.01*Math.random()+.01,n.airFrictionY=.004*Math.random()+.006,(0,jr.default)(n)||(0,jr.default)(n)}return(0,j.default)(e,t),e.prototype.update=function(e,n,i){for(var r=t.prototype.update.call(this,e,n,i),a=e;a>16.67;)this.velocityX-=wd(this.velocityX,.2,this.airFrictionX)/60,this.velocityY-=wd(this.velocityY,.2,this.airFrictionY)/60,a-=16.67;return this.velocityX-=wd(this.velocityX,.2,this.airFrictionX)*a/1e3,this.velocityY-=wd(this.velocityY,.2,this.airFrictionY)*a/1e3,this.rotation=this._lastRotation+Math.random()*Math.PI/180*4,this._lastRotation=this.rotation,r},e}(Phaser.GameObjects.Particles.Particle),Ad=function(t){function e(e){var n;return n=t.call(this,e)||this,(0,jr.default)(n)||(0,jr.default)(n)}return(0,j.default)(e,t),e.prototype.update=function(e,n,i){for(var r=t.prototype.update.call(this,e,n,i),a=Math.atan(this.velocityY/this.velocityX),s=e;s>16.67;){var o=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));o-=wd(o,.2,.01)/60,this.velocityX=Math.sign(this.velocityX)*o*Math.abs(Math.cos(a)),this.velocityY=Math.sign(this.velocityY)*o*Math.abs(Math.sin(a)),s-=16.67}var h=Math.sqrt(Math.pow(this.velocityX,2)+Math.pow(this.velocityY,2));return h-=wd(h,.2,.01)*s/1e3,this.velocityX=Math.sign(this.velocityX)*h*Math.abs(Math.cos(a)),this.velocityY=Math.sign(this.velocityY)*h*Math.abs(Math.sin(a)),this.rotation=a,r},e}(Phaser.GameObjects.Particles.Particle),wd=function(t,e,n){return void 0===e&&(e=.1),void 0===n&&(n=.04),e*t+Math.sign(t)*n*t*t},Sd=bd,Md=Zr.default.DEFAULT,Td=Md.KEY,Cd=Md.FRAME,Id=function(t){function e(e){var n;(n=t.call(this,e,Td,Cd.BUTTON_GREEN,179.5,57.5)||this).setName("NextLevelButton");var i=n.scene.add.container(0,0),r=n.scene.make.image({key:Td,frame:Cd.ICON_NEXT_LEVEL});r.setWorldSize(32.5,32.5);var a=n.scene.make.image({key:Td,frame:Cd.TEXT_NEXT_LEVEL});return a.setWorldSize(116.5,22.5),i.add([r,a]),Phaser.Display.Align.In.Center(r,(0,jr.default)(n),-62,0),Phaser.Display.Align.In.Center(a,(0,jr.default)(n),12,-2),n.add(i),new uc({targets:n.getAll(),duration:1e3,props:{scale:"*=1.1"}}).play(),n}return(0,j.default)(e,t),e.prototype.setDisabled=function(t){var e,n;t?null==(e=this.hitArea)||e.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},e}(jo.default),Pd=Id,kd=Zr.default.DEFAULT,Rd=kd.KEY,Ld=kd.FRAME,Od=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).scene=void 0,a.ribbon=void 0,a.levelText=void 0,a.buttonsContainer=void 0,a.nextLevelButton=void 0,a.ribbonShowUpAnimation=void 0,a.levelTextShowUpAnimation=void 0,a.buttonsContainerShowUpAnimation=void 0,a.backgroundShowUpAnimation=void 0,a.screenExitAnimation=void 0,a.levelCompleteParticle=void 0,a.showAdAfterDelay=void 0,a.open=function(){t.prototype.open.call((0,jr.default)(a));var e=a.scene.gameManager.levelConfig.level;a.setLevelText(e),a.setDisableButton(!0),a.runScreenShowUpAnimation(),a.scene.audio.playSound(nl.default.YOU_WIN)},a.handleShare=function(){a.scene.storage.dispatch(Ms())},a.handleNextLevel=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.setDisableButton(!0),a.runScreenExitAnimation((0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.scene.level.getLevel()>GameCore.Configs.Level.maxLevel)){t.next=4;break}return a.scene.scene.switch(Rr.SceneKeys.COMPLETE_ALL_LEVEL_SCENE),t.abrupt("return");case 4:if(a.scene.level.getLevelData()){t.next=20;break}return e=a.scene.game,n=e.globalScene,e.audio,n.screen.open(aa,{message:"Loading...",duration:0,loading:!0}),t.prev=8,t.next=11,a.scene.level.preloadLevelDataAsync();case 11:if(void 0!==t.sent){t.next=14;break}throw new Error("Can not load new level!");case 14:n.screen.close(aa),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(8),n.screen.open(aa,{message:"Can not load new level!\nPlease restart game.",duration:0,loading:!1});case 20:a.scene.screen.close(a.name),a.scene.levelUp();case 22:case"end":return t.stop()}}),t,null,[[8,17]])}))));case 2:case"end":return t.stop()}}),t)}))),a.scene=e,a.createRibbon(),a.createLevelText(),a.createButtonsContainer(),a.createLevelCompleteParticle(),a.alignObjects(),a.createInputs(),a.setDepth(ua),a}(0,j.default)(e,t);var n=e.prototype;return n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Rd,frame:Ld.RIBBON_COMPLETE}),this.ribbon.setWorldSize(276,175)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(44),text:"Level\n1"}),this.levelText.setCenterAlign()},n.setLevelText=function(t){this.levelText.setText("Level\n"+t)},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container(),this.nextLevelButton=new Pd(this.scene),this.buttonsContainer.add([this.nextLevelButton]),Phaser.Display.Align.In.Center(this.nextLevelButton,this.buttonsContainer,0,0)},n.createLevelCompleteParticle=function(){this.levelCompleteParticle=new Sd(this.scene)},n.alignObjects=function(){this.add([this.ribbon,this.levelText,this.buttonsContainer,this.levelCompleteParticle]),this.moveAbove(this.levelCompleteParticle,this.ribbon),Phaser.Display.Align.In.Center(this.ribbon,this,0,-160),Phaser.Display.Align.In.Center(this.levelText,this),Phaser.Display.Align.In.Center(this.buttonsContainer,this,0,130)},n.createInputs=function(){this.nextLevelButton.onClick=this.handleNextLevel},n.setDisableButton=function(t){this.nextLevelButton.setDisabled(t)},n.runScreenShowUpAnimation=function(){var t,e,n,i,r=this;null==(t=this.ribbonShowUpAnimation)||t.remove(),null==(e=this.levelTextShowUpAnimation)||e.remove(),null==(n=this.buttonsContainerShowUpAnimation)||n.remove(),null==(i=this.backgroundShowUpAnimation)||i.remove();var a=this.ribbon,s=a.x,o=a.y,h=a.scale,c=this.levelText,l=c.x,u=c.y,d=c.scale,f=this.buttonsContainer,p=f.x,m=f.y,g=f.scale;this.ribbon.setAlpha(0),this.levelText.setAlpha(0),this.buttonsContainer.setAlpha(0),this.background.setAlpha(0),this.scene.time.delayedCall(200,(function(){var t=r.scene.world.getWorldSize().width;r.scene.audio.playSound(nl.default.CONFETTI),r.levelCompleteParticle.explode(t/2+50,0)}));var v=this.getShowUpTweenConfig([this.ribbon],0,o,h,(function(){return r.ribbon.setPosition(s,o)})),y=this.getShowUpTweenConfig([this.levelText],300,u,d,(function(){r.levelText.setPosition(l,u)})),x=this.getShowUpTweenConfig([this.buttonsContainer],600,m,g,(function(){r.buttonsContainer.setPosition(p,m),r.setDisableButton(!1)}));this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.In,alpha:{from:0,to:.8},onStart:function(){return r.background.setAlpha(0)},onComplete:function(){return r.background.setAlpha(.8)}}),this.ribbonShowUpAnimation=this.scene.tweens.add(v),this.levelTextShowUpAnimation=this.scene.tweens.add(y),this.buttonsContainerShowUpAnimation=this.scene.tweens.add(x),this.showAdAfterDelay=this.scene.time.delayedCall(1700,(function(){r.scene.showInterstitialAd()}))},n.runScreenExitAnimation=function(t){var e,n=this;null==(e=this.screenExitAnimation)||e.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:[this.ribbon,this.levelText,this.buttonsContainer,this.background],duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){n.ribbon.setAlpha(0),n.levelText.setAlpha(0),n.buttonsContainer.setAlpha(0),n.background.setAlpha(0),t&&t()}})},n.getShowUpTweenConfig=function(t,e,n,i,r){return{targets:t,delay:e,props:{y:{from:n+200,to:n,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:i-.15,to:i,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:200}},onComplete:function(){r&&r()}}},e}(GameCore.Screen),_d=Od,Dd=Zr.default.DEFAULT,Bd=Dd.KEY,Nd=Dd.FRAME,Fd=function(t){function e(e){var n;(n=t.call(this,e,Bd,Nd.BUTTON_RED,179.5,57.5)||this).setName("RetryButton");var i=n.scene.add.container(0,0),r=n.scene.make.image({key:Bd,frame:Nd.ICON_RETRY});r.setWorldSize(32.5,32.5);var a=n.scene.make.image({key:Bd,frame:Nd.TEXT_RETRY});return a.setWorldSize(64,26),i.add([r,a]),Phaser.Display.Align.In.Center(r,(0,jr.default)(n),-40,0),Phaser.Display.Align.In.Center(a,(0,jr.default)(n),16,2),n.add(i),new uc({targets:n.getAll(),duration:1e3,props:{scale:"*=1.05"}}).play(),n}return(0,j.default)(e,t),e.prototype.setDisabled=function(t){var e,n;t?null==(e=this.hitArea)||e.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},e}(jo.default),Ud=Fd,Gd=Zr.default.DEFAULT,Vd=Gd.KEY,Yd=Gd.FRAME,zd=function(t){function e(e){var n;(n=t.call(this,e,Vd,Yd.BUTTON_BLUE_CIRCLE,58.5,59.5)||this).setName("ShowBirdsButton");var i=n.scene.make.image({key:Vd,frame:Yd.ICON_MAGNIFYING_GLASS});return i.setWorldSize(25.5,30),n.add(i),n}return(0,j.default)(e,t),e.prototype.setDisabled=function(t){var e,n;t?null==(e=this.hitArea)||e.disableInteractive():null==(n=this.hitArea)||n.setInteractive()},(0,wt.default)(e,[{key:"onMouseDown",set:function(t){this.isUsePixelPerFect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,t)}}]),e}(jo.default),Wd=zd,Hd=Zr.default.DEFAULT,Xd=Hd.KEY,Kd=Hd.FRAME,jd=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).ribbon=void 0,a.levelText=void 0,a.outOfMovesText=void 0,a.buttonsContainer=void 0,a.retryButton=void 0,a.showBirdsButton=void 0,a.ribbonShowUpAnimation=void 0,a.levelTextShowUpAnimation=void 0,a.buttonsContainerShowUpAnimation=void 0,a.backgroundShowUpAnimation=void 0,a.screenExitAnimation=void 0,a.outOfMovesTextAnimation=void 0,a.showAdAfterDelay=void 0,a.holdDownShowBirdsButton=!1,a.pulsateBubbleAnimation=void 0,a.open=function(){t.prototype.open.call((0,jr.default)(a));var e=a.scene.gameManager.levelConfig.level;a.setLevelText(e),a.setDisableButton(!0),a.runOutOfMovesTextAnimation(),a.holdDownShowBirdsButton=!1,a.scene.audio.playSound(nl.default.YOU_LOSE)},a.handleShare=function(){a.scene.storage.dispatch(Ms())},a.handleRetry=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.setDisableButton(!0),a.runScreenExitAnimation((function(){return a.scene.screen.close(a.name)})),a.showAdAfterDelay.hasDispatched){t.next=7;break}return a.showAdAfterDelay.destroy(),t.next=6,a.scene.showInterstitialAd();case 6:a.showAdAfterDelay.remove();case 7:a.scene.restartLevel();case 8:case"end":return t.stop()}}),t)}))),a.handleShowBirds=function(){a.holdDownShowBirdsButton=!0,a.runScreenExitAnimation()},a.createRibbon(),a.createLevelText(),a.createButtonsContainer(),a.createOutOfMovesText(),a.alignObjects(),a.createInputs(),a.setDepth(ua),a}(0,j.default)(e,t);var n=e.prototype;return n.createRibbon=function(){this.ribbon=this.scene.make.image({key:Xd,frame:Kd.RIBBON_FAILED}),this.ribbon.setWorldSize(276,63.5)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(44),text:"Level\n1"}),this.levelText.setCenterAlign()},n.setLevelText=function(t){this.levelText.setText("Level\n"+t)},n.createButtonsContainer=function(){this.buttonsContainer=this.scene.add.container(),this.retryButton=new Ud(this.scene),this.showBirdsButton=new Wd(this.scene),this.buttonsContainer.add([this.retryButton,this.showBirdsButton]),Phaser.Display.Align.In.Center(this.retryButton,this.buttonsContainer,-30,0),Phaser.Display.Align.In.Center(this.showBirdsButton,this.buttonsContainer,105,0)},n.createOutOfMovesText=function(){this.outOfMovesText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(36),text:"OUT OF MOVES",origin:{x:.5,y:.5}})},n.alignObjects=function(){this.add([this.ribbon,this.levelText,this.buttonsContainer,this.outOfMovesText]),Phaser.Display.Align.In.Center(this.ribbon,this,0,-110),Phaser.Display.Align.In.Center(this.levelText,this),Phaser.Display.Align.In.Center(this.buttonsContainer,this,0,130),Phaser.Display.Align.In.Center(this.outOfMovesText,this)},n.createInputs=function(){var t=this;this.retryButton.onClick=this.handleRetry,this.showBirdsButton.onMouseDown=this.handleShowBirds,this.scene.input.on("pointerup",(function(){t.holdDownShowBirdsButton&&(t.holdDownShowBirdsButton=!1,t.runScreenShowUpAnimation(!0))}))},n.setDisableButton=function(t){this.retryButton.setDisabled(t),this.showBirdsButton.setDisabled(t)},n.runOutOfMovesTextAnimation=function(){var t,e,n=this;null==(t=this.outOfMovesTextAnimation)||t.remove(),null==(e=this.backgroundShowUpAnimation)||e.remove(),this.ribbon.setAlpha(0),this.levelText.setAlpha(0),this.buttonsContainer.setAlpha(0),this.background.setAlpha(0),this.outOfMovesText.setAlpha(0);var i=this.outOfMovesText,r=i.y,a=i.scale;this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){return n.background.setAlpha(0)},onComplete:function(){return n.background.setAlpha(.8)}});var s=this.getShowUpTweenConfig([this.outOfMovesText],0,r,a,(function(){n.scene.tweens.add({targets:[n.outOfMovesText],duration:400,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.runScreenShowUpAnimation(),n.showAdAfterDelay=n.scene.time.delayedCall(1200,(function(){n.scene.showInterstitialAd()}))}})}));this.outOfMovesTextAnimation=this.scene.tweens.add(s)},n.runScreenShowUpAnimation=function(t){var e,n,i,r,a=this;void 0===t&&(t=!1),null==(e=this.ribbonShowUpAnimation)||e.remove(),null==(n=this.levelTextShowUpAnimation)||n.remove(),null==(i=this.buttonsContainerShowUpAnimation)||i.remove(),null==(r=this.backgroundShowUpAnimation)||r.remove();var s=this.ribbon,o=s.x,h=s.y,c=s.scale,l=this.levelText,u=l.x,d=l.y,f=l.scale,p=this.buttonsContainer,m=p.x,g=p.y,v=p.scale;this.ribbon.setAlpha(0),this.levelText.setAlpha(0),this.buttonsContainer.setAlpha(0),t&&this.background.setAlpha(0);var y=this.getShowUpTweenConfig([this.ribbon],0,h,c,(function(){return a.ribbon.setPosition(o,h)})),x=this.getShowUpTweenConfig([this.levelText],100,d,f,(function(){return a.levelText.setPosition(u,d)})),b=this.getShowUpTweenConfig([this.buttonsContainer],200,g,v,(function(){a.buttonsContainer.setPosition(m,g),a.setDisableButton(!1)}));this.ribbonShowUpAnimation=this.scene.tweens.add(y),this.levelTextShowUpAnimation=this.scene.tweens.add(x),this.buttonsContainerShowUpAnimation=this.scene.tweens.add(b),t&&(this.backgroundShowUpAnimation=this.scene.tweens.add({targets:[this.background],duration:300,ease:Phaser.Math.Easing.Sine.Out,alpha:{from:0,to:.8},onStart:function(){return a.background.setAlpha(0)},onComplete:function(){return a.background.setAlpha(.8)}}))},n.runScreenExitAnimation=function(t){var e,n=this;null==(e=this.screenExitAnimation)||e.remove(),this.screenExitAnimation=this.scene.tweens.add({targets:[this.ribbon,this.levelText,this.buttonsContainer,this.background],duration:200,alpha:0,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:function(){n.ribbon.setAlpha(0),n.levelText.setAlpha(0),n.buttonsContainer.setAlpha(0),n.background.setAlpha(0),t&&t()}})},n.getShowUpTweenConfig=function(t,e,n,i,r){var a=this;return{targets:t,delay:e,props:{y:{from:n+150,to:n,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85*i,to:i,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onStart:function(){a.setDisableButton(!0)},onComplete:function(){r&&r()}}},e}(GameCore.Screen),qd=jd,Zd=Zr.default.DEFAULT.KEY,Qd=function(t){function e(e,n){var i;return(i=t.call(this,e,Zd,n.backgroundOn)||this).options=void 0,i.icon=void 0,i.getFrameByStatus=function(){var t=i.options,e=t.enable,n=t.frameOn,r=t.frameOff;return e?n:r},i.getBackgroundByStatus=function(){var t=i.options,e=t.enable,n=t.backgroundOn,r=t.backgroundOff;return e?n:r},i.createButton=function(t){var e=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,t,e),i.add(i.button)},i.options=n,i.createIcon(),i}(0,j.default)(e,t);var n=e.prototype;return n.processCallback=function(t){var e=this.options.enable;this.updateStatus(!e),t(!e)},n.updateStatus=function(t){this.options.enable=t;var e=this.getFrameByStatus();this.icon.setFrame(e);var n=this.getBackgroundByStatus();this.button.setFrame(n)},n.createIcon=function(){var t=this.getFrameByStatus();this.icon=this.scene.make.image({key:Zd,frame:t}),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.button)},n.logButtonEvent=function(){var t=this.getParentName(),e=this.name,n=!this.options.enable;this.scene.analytics.event(an.AnalyticsEvents.BUTTON_CLICK,{button_name:e,screen_name:t,enable:n})},e}(jo.default),Jd=Qd,$d=Zr.default.DEFAULT,tf=$d.KEY,ef=$d.FRAME,nf=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).popup=void 0,a.line=void 0,a.title=void 0,a.replayButton=void 0,a.addFriendButton=void 0,a.homeButton=void 0,a.settingMusic=void 0,a.settingSound=void 0,a.settingVibrate=void 0,a.contents=void 0,a.popupShowUpAnimation=void 0,a.popupFadeOutAnimation=void 0,a.contentShowUpAnimation=void 0,a.open=function(){t.prototype.open.call((0,jr.default)(a));var e=a.scene.player.getPlayerSettings(),n=e.music,i=e.sound,r=e.vibrate;if(a.settingMusic.updateStatus(n),a.settingSound.updateStatus(i),a.settingVibrate.updateStatus(r),!il()){a.settingVibrate.setVisible(!1);Phaser.Display.Align.In.Center(a.settingMusic,a.settingVibrate,-80),Phaser.Display.Align.In.Center(a.settingSound,a.settingVibrate,80)}},a.handleClosePopup=function(){a.runCloseAnimation(),a.popupFadeOutAnimation.next((function(){a.scene.screen.close(a.name)}))},a.handleReplayGame=function(){a.runCloseAnimation(),a.popupFadeOutAnimation.next((0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.scene.screen.close(a.name),t.next=3,a.scene.storage.dispatch(No());case 3:ws.emit(el.REPLAY);case 4:case"end":return t.stop()}}),t)}))))},a.handlePlayWithFriend=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.scene.screen.close(a.name),t.next=3,a.scene.storage.dispatch(Uo());case 3:ws.emit(el.REPLAY);case 4:case"end":return t.stop()}}),t)}))),a.handleGotoDashboard=function(){a.runCloseAnimation(),a.popupFadeOutAnimation.next((function(){a.scene.screen.close(a.name),a.scene.scene.switch(Rr.SceneKeys.LEVEL_SCENE)}))},a.handleMusicSetting=function(t){a.scene.player.setSetting("music",t),t?a.scene.audio.playMusic():a.scene.audio.pauseMusic()},a.handleSoundSetting=function(t){a.scene.player.setSetting("sound",t)},a.handleVibrateSetting=function(t){a.scene.player.setSetting("vibrate",t)},a.createPopup(),a.createPopupContent(),a.createInput(),a.setDepth(ua),a.background.setAlpha(.6),a}(0,j.default)(e,t);var n=e.prototype;return n.createInput=function(){this.replayButton.onClick=this.handleReplayGame,this.addFriendButton.onClick=this.handlePlayWithFriend,this.homeButton.onClick=this.handleGotoDashboard,this.settingMusic.onClick=this.handleMusicSetting,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate.onClick=this.handleVibrateSetting},n.createPopup=function(){this.popup=new ea(this.scene,0,0,310,370),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMenuButtons(),this.createLine(),this.createFooterButtons(),this.popup.add([this.line,this.title,this.replayButton,this.addFriendButton,this.homeButton,this.settingMusic,this.settingSound,this.settingVibrate]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.replayButton,this.addFriendButton,this.homeButton,this.settingMusic,this.settingVibrate,this.settingSound])},n.createTitle=function(){this.title=this.scene.add.container();var t=this.scene.make.image({key:tf,frame:ef.BLANK});t.setWorldSize(271,81);var e=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(30),text:"SETTINGS",origin:{x:.5,y:.5}});Phaser.Display.Align.In.Center(e,t,0,-10);var n=new jo.default(this.scene,tf,ef.BLANK,38,38);n.setName("Close"),n.useSound=!1,n.onClick=this.handleClosePopup,Phaser.Display.Align.In.RightCenter(n,t,-5,-5),this.title.add([t,e,n]),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createMenuButtons=function(){this.replayButton=new jo.default(this.scene,tf,ef.BLANK,232,76.94),this.replayButton.setName("Replay");var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(30),text:"REPLAY"});Phaser.Display.Align.In.Center(t,this.replayButton),this.replayButton.add(t),Phaser.Display.Align.In.Center(this.replayButton,this.popup,0,-105),this.addFriendButton=new jo.default(this.scene,tf,ef.BLANK,231,68),this.addFriendButton.setName("PlayWithFriends");var e=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(28),text:"PLAY WITH FRIENDS"});Phaser.Display.Align.In.Center(e,this.addFriendButton),this.addFriendButton.add(e),Phaser.Display.Align.In.BottomCenter(this.addFriendButton,this.replayButton,0,70),this.homeButton=new jo.default(this.scene,tf,ef.BLANK,231,68),this.homeButton.setName("Home");var n=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(28),text:"HOME"});Phaser.Display.Align.In.Center(n,this.homeButton),this.homeButton.add(n),Phaser.Display.Align.In.BottomCenter(this.homeButton,this.addFriendButton,0,70)},n.createLine=function(){this.line=this.scene.make.image({key:tf,frame:ef.BLANK}),this.line.setWorldSize(228.5,2),Phaser.Display.Align.In.BottomCenter(this.line,this.popup,0,-100)},n.createFooterButtons=function(){var t=this.scene.player.getPlayerSettings(),e=t.sound,n=t.vibrate,i=t.music;this.createMusicButton(i),this.createVibrateButton(n),this.createSoundButton(e);var r=this.popup.height;this.settingVibrate.setPosition(0,r/2-65);Phaser.Display.Align.In.BottomCenter(this.settingMusic,this.settingVibrate,-75),Phaser.Display.Align.In.BottomCenter(this.settingSound,this.settingVibrate,75)},n.createMusicButton=function(t){this.settingMusic=new Jd(this.scene,{enable:t,frameOn:ef.BLANK,frameOff:ef.BLANK,backgroundOn:ef.BLANK,backgroundOff:ef.BLANK}),this.settingMusic.setName("Music"),this.settingMusic.icon.setWorldSize(43,43),this.settingMusic.button.setWorldSize(70,70)},n.createVibrateButton=function(t){this.settingVibrate=new Jd(this.scene,{enable:t,frameOn:ef.BLANK,frameOff:ef.BLANK,backgroundOn:ef.BLANK,backgroundOff:ef.BLANK}),this.settingVibrate.setName("Vibrate"),this.settingVibrate.icon.setWorldSize(43,43),this.settingVibrate.button.setWorldSize(70,70)},n.createSoundButton=function(t){this.settingSound=new Jd(this.scene,{enable:t,frameOn:ef.BLANK,frameOff:ef.BLANK,backgroundOn:ef.BLANK,backgroundOff:ef.BLANK}),this.settingSound.setName("Sound"),this.settingSound.icon.setWorldSize(43,43),this.settingSound.button.setWorldSize(70,70)},n.runOpenAnimation=function(){this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupEntrancesAnimation=function(t,e){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,r=n.scale;this.popupShowUpAnimation=new Uc({targets:[this.popup],delay:t,duration:e,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:r}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(t,e){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Au({targets:this.contents.getChildren(),duration:e,delay:this.scene.tweens.stagger(80,{start:t}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(t,e){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new xu({targets:[this.popup],delay:t,duration:e,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},e}(GameCore.Screen),rf=nf,af=Zr.default.DEFAULT,sf=af.KEY,of=af.FRAME,hf=GameCore.Configs,cf=hf.Network,lf=hf.Match,uf=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).isUseRescue=void 0,a.countdownText=void 0,a.countdownTimer=void 0,a.countdownCount=void 0,a.progressColor=0,a.progressTween=void 0,a.progressCircle=void 0,a.progressAngle=void 0,a.progressSize=void 0,a.progressRadius=void 0,a.skipText=void 0,a.continueButton=void 0,a.continueButtonAnimation=void 0,a.adsTimer=void 0,a.open=function(){t.prototype.open.call((0,jr.default)(a)),a.isUseRescue=!1,a.progressColor=4249855,a.countdownCount=lf.RescueGamePopupTimeout,a.setTime(a.countdownCount),a.runCountdown(),a.runContinueButtonAnimation()},a.handleShowRewardedVideoAd=(0,K.default)(Z().mark((function t(){var e,n,i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.scene.game,n=e.globalScene,i=e.audio,t.prev=1,!a.isUseRescue){t.next=4;break}return t.abrupt("return");case 4:return a.scene.storage.dispatch((function(t,e){var n=e(),i=xs(n).level,r=void 0===i?0:i,a=Ua(n);window.game.analytics.event(an.AnalyticsEvents.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(a),level:r,level_name:"level_"+r}),t({type:qn,payload:{}})})),a.isUseRescue=!0,a.progressTween.pause(),a.countdownTimer.remove(),n.screen.open(aa,{message:"Loading ads...",duration:0,loading:!0}),i.pauseMusic(),t.next=12,new Promise((function(t,e){var n;null==(n=a.adsTimer)||n.remove(),a.adsTimer=a.scene.time.delayedCall(cf.Timeout,e),a.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?a.scene.ads.events.once(GameCore.Ads.Events.LOADED,t):a.scene.ads.preloadRewardedVideoAsync().then(t).catch(e)}));case 12:return a.scene.analytics.showRewardedVideoAd(a.getScreenName()),t.next=15,a.scene.ads.showRewardedVideoAsync();case 15:a.scene.ads.preloadRewardedVideoAsync().catch((function(t){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),ws.emit(el.RESCUE),n.screen.close(aa),t.next=29;break;case 21:if(t.prev=21,t.t0=t.catch(1),a.scene.analytics.showAdFail(GameCore.Ads.Types.REWARDED,a.getScreenName(),t.t0),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code"))){t.next=28;break}if("USER_INPUT"!==t.t0.code){t.next=28;break}return a.showNotifySkipAds(),t.abrupt("return");case 28:a.showNotifyNoAds();case 29:return t.prev=29,null==(r=a.adsTimer)||r.destroy(),a.scene.audio.playMusic(),a.scene.screen.close(a.name),t.finish(29);case 34:case"end":return t.stop()}}),t,null,[[1,21,29,34]])}))),a.showNotifyNoAds=function(t){if(!t||t.name===aa){var e=a.scene.game.globalScene;e.screen.events.off(GameCore.Screens.Events.CLOSE),e.screen.events.once(GameCore.Screens.Events.CLOSE,a.showGameOver),e.screen.open(aa,{message:"No ads to display!",duration:2e3,loading:!1})}},a.showNotifySkipAds=function(){var t=a.scene.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,a.showGameOver),t.screen.open(aa,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},a.showGameOver=function(t){t&&t.name!==aa||(a.countdownTimer.remove(),a.progressTween.pause(),a.scene.screen.close(a.name),a.scene.storage.dispatch(Yo()))},a.handleSkip=function(){a.countdownTimer.remove(),a.progressTween.pause(),a.scene.screen.close(a.name),a.scene.storage.dispatch(Yo())},a.handleRunCountdown=function(){if(a.countdownCount-=1,5===a.countdownCount&&(a.progressColor=15812177),a.countdownCount<=0)return a.countdownTimer.remove(),a.progressTween.complete(),void a.rescueTimeout();a.setTime(a.countdownCount)},a.progressColor=0,a.progressAngle=-90,a.progressSize=15,a.progressRadius=70,a.countdownCount=lf.MaxRescueCount,a.setDepth(ua),a.background.setAlpha(.8),a.createContent(),a}(0,j.default)(e,t);var n=e.prototype;return n.createContent=function(){this.createProgressCircle(),this.createCountdown(),this.createContinueButton(),this.createSkipText()},n.createCountdown=function(){this.countdownText=this.scene.make.bitmapText({size:this.scene.fontSize(75),font:qo.default.PRIMARY.KEY,origin:{x:.6,y:.5}}),this.add(this.countdownText),this.setTime(this.countdownCount)},n.runCountdown=function(){var t={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(t),this.startProgressCircle()},n.setProgressCircle=function(t){var e=this.countdownText,n=e.x,i=e.y,r=Phaser.Math.DegToRad(t-360+this.progressAngle),a=Phaser.Math.DegToRad(this.progressAngle);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(this.progressSize,this.progressColor),this.progressCircle.arc(n,i,this.progressRadius,r,a,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.setTime=function(t){this.countdownText.setText(""+t),Phaser.Display.Align.In.Center(this.countdownText,this.zone,0,-120)},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.startProgressCircle=function(){var t=this;this.progressTween=this.scene.tweens.addCounter({from:360,to:0,duration:1e3*lf.RescueGamePopupTimeout,onUpdate:function(e){var n=+e.getValue().toFixed(2);t.setProgressCircle(n)}})},n.createContinueButton=function(){this.continueButton=new jo.default(this.scene,sf,of.BLANK,232,68),this.continueButton.setName("Continue"),this.add(this.continueButton),this.continueButton.onClick=this.handleShowRewardedVideoAd;var t=this.scene.add.image(0,0,sf,of.BLANK);Phaser.Display.Align.In.Center(t,this.continueButton),t.setWorldSize(36.5,33.5),t.setX(this.continueButton.x-70),this.continueButton.add(t);var e=this.scene.make.bitmapText({size:this.scene.fontSize(28),text:"CONTINUE",font:qo.default.PRIMARY.KEY,origin:{x:.35,y:.55}});this.continueButton.add(e),Phaser.Display.Align.In.Center(this.continueButton,this.zone,0,30)},n.createSkipText=function(){this.skipText=new jo.default(this.scene,sf,of.BLANK,128,24),this.skipText.setName("NoThanks"),this.add(this.skipText),this.skipText.onClick=this.handleSkip,Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,60)},n.rescueTimeout=function(){this.scene.screen.close(this.name),this.scene.storage.dispatch(Yo())},n.runContinueButtonAnimation=function(){var t;this.continueButtonAnimation||(this.continueButtonAnimation=new uc({targets:[this.continueButton],props:{scale:"-=0.02"}})),null==(t=this.continueButtonAnimation)||t.play()},e}(GameCore.Screen),df=uf,ff=Zr.default.DEFAULT,pf=ff.KEY,mf=ff.FRAME,gf=GameCore.Configs,vf=gf.Match,yf=(gf.Gameplay,gf.Ads,function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).gameState=void 0,e.gameManager=void 0,e.prevScore=0,e.gameplayMode=void 0,e.currentScore=0,e.currentDiamond=0,e.prevTargetScore=0,e.isReachTargetScore=!1,e.rewardScreen=void 0,e.opponentInfo=void 0,e.showAdNotify=void 0,e.gameOverBoard=void 0,e.startLevelBoard=void 0,e.saveTimer=void 0,e.hideableObjects=void 0,e.header=void 0,e.footer=void 0,e.create=function(){t.prototype.create.call((0,jr.default)(e)),e.createBackground(yr.default.BACKGROUND.KEY),e.createHandler(),e.createHeader(),e.createFooter(),e.createManager(),e.createUI(),e.listenEvents(),e.startLevel()},e.run=function(){e.level.getLevel()>GameCore.Configs.Level.maxLevel?e.scene.switch(Rr.SceneKeys.COMPLETE_ALL_LEVEL_SCENE):(e.gameManager.showHint(),e.startGame(),e.checkAndAddShortcut(),e.ads.showBannerAdAsync().catch((function(t){})))},e.lose=function(t){e.analytics.levelFail(t,e.currentScore),e.screen.open(la)},e.rescued=function(){e.startLevel(),e.initManager(),e.time.addEvent({delay:0,callback:function(){e.startManager(),e.updateMove()}})},e.replay=function(){e.startGame()},e.levelUp=function(){ e.stopManager(),e.disableButtons(!1),e.handleNextLevel(),ws.emit(as.PASS_LEVELS.EVENTS.PASS_LEVEL,{type:"level",value:1});var t=e.level.getLevel()-1;e.analytics.levelComplete(t,e.currentScore),e.startLevel()},e.handleNextLevel=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.initManager(),e.startManager();case 2:case"end":return t.stop()}}),t)}))),e.showInterstitialAd=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.audio.pauseMusic(),!e.ads.canbeShowInterstitialAd()){t.next=12;break}return t.prev=3,e.analytics.showInterstitialAd(e.getSceneName()),t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),e.analytics.showAdFail(GameCore.Ads.Types.INTERSTITIAL,e.getSceneName(),t.t0);case 12:e.audio.playMusic(),e.ads.preloadInterstitialAdAsync().catch((function(){}));case 14:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.handleCloseBannerAds=function(){e.ads.hideBannerAdAsync().catch((function(t){}))},e.updateMove=function(){var t;vf.ContinueSingleMatchEnabled&&e.gameplayMode===br&&(null==(t=e.saveTimer)||t.remove(),e.saveTimer=e.time.addEvent({delay:1500,callback:function(){var t=e.storage.getState(),n=hs(t);e.storage.dispatch(yo(n,{score:e.currentScore,data:{diamond:e.currentDiamond},updateAt:Date.now()}))}}))},e.clearMove=function(){var t=e.storage.getState(),n=hs(t);e.storage.dispatch(yo(n,{score:e.currentScore,data:{fen:"",diamond:e.currentDiamond},updateAt:Date.now()}))},e.showNotifyNoAds=function(t){if(!t||t.name===aa){var n=e.game.globalScene;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.open(aa,{message:"No ads to display!",duration:2e3,loading:!1})}},e.showNotifySkipAds=function(){var t=e.game.globalScene;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.open(aa,{message:"Sorry, No Rewards!\nYou have cancelled the ad!",duration:3e3,loading:!1})},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run),this.events.on(Phaser.Scenes.Events.SLEEP,this.handleCloseBannerAds)},n.createHandler=function(){},n.initHandler=function(){},n.createManager=function(){this.gameManager=new ql(this)},n.initManager=function(){},n.stopManager=function(){},n.startManager=function(){},n.listenEvents=function(){ws.on(el.RESCUE,this.rescued),ws.on(el.REPLAY,this.replay)},n.startGame=function(){var t=(0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ads.preloadInterstitialAdAsync().catch((function(){})),this.ads.preloadRewardedVideoAsync().catch((function(){})),t.next=4,this.level.preloadLevelDataAsync(this.level.getLevel());case 4:e=this.storage.getState(),this.gameplayMode=Ua(e),this.initHandler(),this.initManager(),n=this.level.getLevel(),this.header.updateLevelText(n);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.startLevel=function(){var t=(0,K.default)(Z().mark((function t(){var e,n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.level.getLevelData())){t.next=10;break}return n=this.level.getLevel(),this.header.updateLevelText(n),this.footer.initDefault(),this.disableButtons(),t.next=8,this.gameManager.buildLevel(e);case 8:this.disableButtons(!1),this.analytics.levelStart(null==e?void 0:e.level);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.createUI=function(){this.createPauseScreen(),this.createRewardScreen(),this.createRescueScreen(),this.createCompleteLevelScreen(),this.createLevelFailedScreen(),this.createAdNotify(),this.createGameOverBoard(),this.createStartLevelBoard(),this.createHideableObjects(),this.createDevTools()},n.createPauseScreen=function(){this.screen.add(ra,rf)},n.createRewardScreen=function(){this.rewardScreen=this.screen.add(sa,Yu)},n.createRescueScreen=function(){this.screen.add(oa,df)},n.createCompleteLevelScreen=function(){this.screen.add(ca,_d)},n.createLevelFailedScreen=function(){this.screen.add(la,qd)},n.createDevTools=function(){var t=this;if(GameCore.Utils.Valid.isDebugger()){var e=new jo.default(this,pf,mf.BLANK,50,50);e.setAlpha(.5).setPosition(250,50),e.onClick=function(){return t.win()};var n=new jo.default(this,pf,mf.BLANK,50,50);n.setAlpha(.5).setPosition(125,50),n.onClick=function(){return t.lose(1)}}},n.createHideableObjects=function(){this.hideableObjects=this.make.group({})},n.createHeader=function(){this.header=new gd(this),Phaser.Display.Align.In.TopCenter(this.header,this.gameZone,0,-40)},n.createFooter=function(){var t=this.ads.getBannerHeight();this.footer=new ud(this),Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,-35-t)},n.createAdNotify=function(){this.showAdNotify=new lu(this),Phaser.Display.Align.In.TopCenter(this.showAdNotify,this.gameZone,0,-200)},n.createGameOverBoard=function(){this.gameOverBoard=new au(this),this.gameOverBoard.setDepth(qr.default.POPUP),Phaser.Display.Align.In.Center(this.gameOverBoard,this.gameZone,0,25)},n.createStartLevelBoard=function(){this.startLevelBoard=new du(this),this.startLevelBoard.setDepth(qr.default.POPUP),Phaser.Display.Align.In.Center(this.startLevelBoard,this.gameZone,0,25)},n.disableButtons=function(t){void 0===t&&(t=!0),this.header.setDisable(t),this.footer.setDisable(t)},n.win=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.disableButtons(),e=this.level.getLevel(),this.updatePlayerLevel(e+1),this.level.nextLevel(),t.next=6,this.gameManager.playWinAnimation();case 6:this.screen.open(ca);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.restartLevel=function(){this.startLevel()},n.endGame=function(){this.clearMove(),this.prevTargetScore=0,this.storage.dispatch(Yo())},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var t=this.storage.getState();Tr(t)!=wr&&this.facebook.attemptToAddShortcut()}},n.showRewardVideo=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.game,n=e.globalScene,i=e.audio,t.prev=1,n.screen.open(aa,{message:"Loading ads...",duration:0,loading:!0}),i.pauseMusic(),t.next=6,new Promise((function(t,e){r.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?r.ads.events.once(GameCore.Ads.Events.LOADED,t):r.ads.preloadRewardedVideoAsync().then(t).catch(e)}));case 6:return t.next=8,this.ads.showRewardedVideoAsync();case 8:return this.analytics.showRewardedVideoAd(this.getSceneName()),this.ads.preloadRewardedVideoAsync().catch((function(t){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.close(aa),t.abrupt("return",!0);case 15:if(t.prev=15,t.t0=t.catch(1),this.analytics.showAdFail(GameCore.Ads.Types.REWARDED,this.getSceneName(),t.t0),!(t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code"))){t.next=22;break}if("USER_INPUT"!==t.t0.code){t.next=22;break}return this.showNotifySkipAds(),t.abrupt("return",!1);case 22:return this.showNotifyNoAds(),t.abrupt("return",!1);case 24:return t.prev=24,i.playMusic(),t.finish(24);case 27:case"end":return t.stop()}}),t,this,[[1,15,24,27]])})));return function(){return t.apply(this,arguments)}}(),n.updatePlayerLevel=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=1),t.next=3,FBInstant.player.setDataAsync({level:e});case 3:return t.next=5,this.player.updateCustomFields({level:e});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(Ko.default));var xf=yf,bf=function(t){return{type:bn,payload:{sceneKey:t}}},Ef=(0,Ct.createSelector)([function(t){return t.scene.currentSceneKey}],(function(t){return t})),Af=Zr.default.DEFAULT,wf=Af.KEY,Sf=Af.FRAME,Mf=function(t){function e(e){var n;return(n=t.call(this,e,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(t){if(!(t-n.lastUpdate<800)){n.lastUpdate=t;var e=Math.floor(n.scene.game.loop.actualFps);n.setFps(e)}},n.createFps(),n.setDepth(qr.default.DEBUG),n.scene.add.existing((0,jr.default)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,j.default)(e,t);var n=e.prototype;return n.setFps=function(t){this.fps=t;var e=Phaser.Utils.String.Format(this.fpsString,[t]);this.fpsText.setText(e)},n.createFps=function(){this.background=this.scene.make.image({key:wf,frame:Sf.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:qo.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},e}(Phaser.GameObjects.Container),Tf=Mf,Cf=function(t){function e(e){var n;if((n=t.call(this,e,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(t){if(!(t-n.lastUpdate<1e3)){n.lastUpdate=t;var e=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,r=Math.round(e/1048576);n.setMemory(r),n.memoryText.setTint(n.normalColor),e>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),e>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(qr.default.DEBUG),n.scene.add.existing((0,jr.default)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,jr.default)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,j.default)(e,t);var n=e.prototype;return n.isSupport=function(){var t;return this.performance&&!(null==(t=this.performance)||!t.memory)},n.setMaxMemory=function(t){this.maxMemoryLimit=Math.round(t)},n.setMemory=function(t){this.memory=t;var e=Phaser.Utils.String.Format(this.memoryString,[t,this.maxMemoryLimit]);this.memoryText.setText(e)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:qo.default.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},e}(Phaser.GameObjects.Container),If=Cf,Pf=function(t){function e(e,n,i,r){var a;return(a=t.call(this,e,n,i,r)||this).loadingIcon=void 0,a.messageText=void 0,a.openAnimation=void 0,a.closeTimerEvent=void 0,a.addLoadingIcon(),a.addMessageText(),a.setDepth(da),a.background.setAlpha(.8),a}(0,j.default)(e,t);var n=e.prototype;return n.open=function(e){var n,i=this;t.prototype.open.call(this,e);var r=this.getData(["message","duration","loading"]),a=r[0],s=void 0===a?"":a,o=r[1],h=void 0===o?0:o,c=r[2],l=void 0!==c&&c;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),h>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:h,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new fh(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:qo.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(t){this.messageText.setText(t)},n.showLoading=function(t){this.loadingIcon.setVisible(t);var e=!1===t?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,e)},n.runOpenAnimation=function(){var t,e;null==(t=this.openAnimation)||t.stop(),null==(e=this.openAnimation)||e.remove(),this.loadingIcon.setWorldSize(113,113),this.messageText.setFontSize(this.scene.fontSize(30));var n=[this.messageText,this.loadingIcon],i=n.map((function(t){return.3*t.scale})),r=n.map((function(t){return t.scale}));this.openAnimation=new Au({targets:n,props:{scale:{getStart:function(t,e,n,r){return i[r]},getEnd:function(t,e,n,i){return r[i]}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},e}(GameCore.Screen),kf=Pf,Rf=Zr.default.DEFAULT,Lf=Rf.KEY,Of=Rf.FRAME,_f=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).mask=void 0,e.fadeInAnim=void 0,e.fadeOutAnim=void 0,e.fpsMeter=void 0,e.memoryMeter=void 0,e.switchScene=function(t){e.currentScene.switch(t)},e.emitGameEventStartScene=function(t){var n=t.scene.key;e.updateSceneState(),e.runMaskFadeOutAnimation(),e.updateActiveSceneKey(n),e.game.events.emit(Phaser.Scenes.Events.START,n),(0,H.addBreadcrumbSentry)("scene","Start scene: "+n)},e.emitGameEventSleepScene=function(t){var n=t.scene.scene.key;n!==Rr.SceneKeys.LOAD_SCENE&&(e.runMaskFadeInAnimation(),e.game.events.emit(Phaser.Scenes.Events.SLEEP,n))},e.emitGameEventWakeScene=function(t){var n=t.scene.scene.key;n!==Rr.SceneKeys.LOAD_SCENE&&(e.updateSceneState(),e.runMaskFadeOutAnimation(),e.updateActiveSceneKey(n),e.game.events.emit(Phaser.Scenes.Events.WAKE,n))},e.emitGameEventPauseScene=function(t){var n=t.scene.scene.key;e.game.events.emit(Phaser.Scenes.Events.PAUSE,n)},e.emitGameEventResumeScene=function(t){var n=t.scene.key;e.game.events.emit(Phaser.Scenes.Events.RESUME,n)},e.emitGameEventShutdownScene=function(t){var n=t.scene.scene.key;e.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,n)},e}(0,j.default)(e,t);var n=e.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var t=this.screen.add(aa,kf);Phaser.Display.Align.In.Center(t,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:Lf,frame:Of.BLANK});var t=this.gameZone,e=t.width,n=t.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(e,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new Tf(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new If(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var t,e;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(t=this.fadeInAnim)||t.remove(),null==(e=this.fadeOutAnim)||e.remove(),this.fadeInAnim=new Bc({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var t,e;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(t=this.fadeInAnim)||t.remove(),null==(e=this.fadeOutAnim)||e.remove(),this.fadeOutAnim=new xu({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var t=this;this.scene.manager.getScenes(!1).forEach((function(e){e.events.on(Phaser.Scenes.Events.CREATE,t.emitGameEventStartScene),e.events.on(Phaser.Scenes.Events.SLEEP,t.emitGameEventSleepScene),e.events.on(Phaser.Scenes.Events.WAKE,t.emitGameEventWakeScene),e.events.on(Phaser.Scenes.Events.PAUSE,t.emitGameEventPauseScene),e.events.on(Phaser.Scenes.Events.RESUME,t.emitGameEventResumeScene),e.events.on(Phaser.Scenes.Events.SHUTDOWN,t.emitGameEventShutdownScene)})),this.events.on(Rr.SceneEvents.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.updateActiveSceneKey=function(t){t!==Rr.SceneKeys.GLOBAL_SCENE&&this.storage.dispatch(bf(t))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,wt.default)(e,[{key:"currentScene",get:function(){var t=this.storage.getState(),e=Ef(t);return(e?this.scene.manager.getScene(e):this.getActiveScene()).scene}}]),e}(Ko.default),Df=_f,Bf=Zr.default.DEFAULT,Nf=Bf.KEY,Ff=Bf.FRAME,Uf=function(t){function e(e){var n;return(n=t.call(this,e,Nf,Ff.BLANK)||this).scene=void 0,n.scene=e,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Home"),n.createIcon(),n}return(0,j.default)(e,t),e.prototype.createIcon=function(){var t=this.scene.add.image(0,0,Nf,Ff.BLANK);t.setSize(43,43).setDisplaySize(43,43),this.add(t),Phaser.Display.Align.In.Center(t,this)},e}(jo.default),Gf=Uf,Vf=Zr.default.DEFAULT,Yf=Vf.KEY,zf=Vf.FRAME,Wf=function(t){function e(e){var n;return(n=t.call(this,e,Yf,zf.BLANK)||this).scene=void 0,n.scene=e,n.button.setWorldSize(170,72),n.setName("PlayWithFriends"),n.createLabel(),n}return(0,j.default)(e,t),e.prototype.createLabel=function(){var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:13,text:"PLAY"}),e=10;Phaser.Display.Align.In.Center(t,this,0,-e);var n=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:9,text:"WITH FRIENDS"});e=12,Phaser.Display.Align.In.Center(n,this,0,e),this.add([t,n])},e}(jo.default),Hf=Wf,Xf=Zr.default.DEFAULT,Kf=Xf.KEY,jf=Xf.FRAME,qf=function(t){function e(e){var n;return(n=t.call(this,e,Kf,jf.BLANK)||this).scene=void 0,n.scene=e,n.button.setSize(87,68).setDisplaySize(87,68),n.setName("Share"),n.createIcon(),n}return(0,j.default)(e,t),e.prototype.createIcon=function(){var t=this.scene.add.image(0,0,Kf,jf.BLANK);t.setSize(43,43).setDisplaySize(43,43),this.add(t),Phaser.Display.Align.In.Center(t,this)},e}(jo.default),Zf=qf,Qf=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.homeButton=void 0,n.playButton=void 0,n.shareButton=void 0,n.scene=e,n.setName("FooterBar"),n.createButtons(),n.alignButtons(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.alignButtons=function(){Phaser.Display.Align.In.Center(this.homeButton,this,-140),Phaser.Display.Align.In.Center(this.playButton,this,0),Phaser.Display.Align.In.Center(this.shareButton,this,140)},n.createButtons=function(){this.createHomeButton(),this.createPlayButton(),this.createShareButton()},n.createHomeButton=function(){this.homeButton=new Gf(this.scene),this.add(this.homeButton)},n.createPlayButton=function(){this.playButton=new Hf(this.scene),this.add(this.playButton)},n.createShareButton=function(){this.shareButton=new Zf(this.scene),this.add(this.shareButton)},e}(Phaser.GameObjects.Container),Jf=Qf,$f=n(44),tp=(function(t){function e(e){var n;return(n=t.call(this,e,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,j.default)(e,t)}(Phaser.GameObjects.GameObject),function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,j.default)(e,t);var n=e.prototype;return n.reset=function(){t.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){return this.listObjects.filter((function(t){return void 0!=t&&t.active}))},n.updateConfig=function(t){this.reset(),this.listConfigs=t,this.listObjects=new Array(t.length).fill(void 0),this.addObjectIndex(0,0);var e=this.getEndObjectIndex();this.addObjectIndex(1,e),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var t=this;this.listObjects instanceof Array&&this.listObjects.map((function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(t,e){var n=t.height;t.setPosition(0,n/2+(n+this.padding)*e-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(t){this.objects.incY(t);var e=this.getStartObjectIndex(),n=this.getEndObjectIndex();this.killObjectIndex(this.startObjectIndex,this.endObjectIndex),this.startObjectIndex=e,this.endObjectIndex=n,this.addObjectIndex(this.startObjectIndex,this.endObjectIndex)},n.killObjectIndex=function(t,e){for(var n=t;n<=e;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(t,e){for(var n=t;n<=e;n++){var i=this.padding,r=this.listConfigs;if(n>=r.length)return;var a=this.objects.getFirstDead(!0),s=a.height,o=s/2+(s+i)*n+this.value-this.height/2;a.updateInfo(r[n]),a.setPosition(0,o),a.setActive(!0),a.setVisible(!0),this.addAt(a),this.listObjects[n]=a}},n.getStartObjectIndex=function(){var t=this.objHeight,e=this.padding;return Math.max(Math.floor((0-this.value)/(t+e)),0)},n.getEndObjectIndex=function(){var t=this.objHeight,e=this.padding,n=this.listConfigs,i=t+e;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,wt.default)(e,[{key:"objHeight",get:function(){var t=this.objects.getChildren();return 0==t.length?this.maxHeight=0:t[0].height}}]),e}($f.default)),ep={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},np=function(t){function e(e){return t.call(this,ep,e)||this}return(0,j.default)(e,t),e}(ah.default),ip=np,rp={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},ap=function(t){function e(e){return t.call(this,rp,e)||this}return(0,j.default)(e,t),e}(ah.default),sp=ap,op=Zr.default.DEFAULT,hp=op.KEY,cp=op.FRAME,lp=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).button=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var t=i.payload.playerId;i.scene.storage.dispatch(Fo(t))},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButton(),n&&i.updateInfo(n),i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.updateInfo=function(t){this.payload=(0,O.default)({scoreRight:!0,isHighlight:!1,useChallenge:!1},t),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updatePosition()},n.updatePosition=function(){var t=this.payload.scoreRight,e=this.payload.useChallenge;this.button.setVisible(!!e),t?Phaser.Display.Align.To.RightCenter(this.score,this.avatar,120):Phaser.Display.Align.To.RightCenter(this.score,this.avatar,80)},n.createBackground=function(){this.background=this.scene.make.image({key:hp,frame:cp.BLANK}),this.background.setWorldSize(264,56),this.add(this.background)},n.updateBackground=function(){this.payload.isHighlight;var t="";t=cp.BLANK,this.background.setFrame(t),this.background.setWorldSize(264,56)},n.updateSize=function(){var t=this.background,e=t.width,n=t.height;this.setSize(e,n)},n.createAvatar=function(){this.avatar=new Lh(this.scene,{key:hp,frame:cp.BLANK,background:cp.BLANK,width:47.5,height:49.5,radius:40}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-10)},n.updateAvatar=function(){var t=this.payload,e=t.playerId,n=t.photo;this.avatar.loadPhoto(e,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var t=this.payload.rank;this.updateRankIcon(t),this.updateRankText(t)},n.getRankIconFrame=function(t){var e=cp.BLANK;switch(t){case 1:case 2:case 3:e=cp.BLANK}return e},n.createRankIcon=function(t){var e=this.getRankIconFrame(t);this.rankIcon=this.scene.make.image({key:hp,frame:e}),e!=cp.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27),this.add(this.rankIcon);var n=t<=3?13:16;Phaser.Display.Align.In.Center(this.rankIcon,this.avatar,0,n)},n.updateRankIcon=function(t){var e=this.getRankIconFrame(t);this.rankIcon.setFrame(e),e!=cp.BLANK?this.rankIcon.setWorldSize(46,30):this.rankIcon.setWorldSize(27,27)},n.createRankText=function(t){this.rankText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(15),text:""+t,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,-2)},n.updateRankText=function(t){this.rankText.setText(""+t)},n.getShortName=function(t){var e=t.substring(0,7);return e.split(" ")[0]||e},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:qo.default.FONT_FAMILY,fontSize:"15px",fontStyle:"bold"}}),this.username.setTint(10317116),this.username.setHighQuality(),Phaser.Display.Align.In.LeftCenter(this.username,this.avatar,-53),this.add(this.username)},n.updateUsername=function(){var t=this.payload.name;this.username.setText(this.getShortName(t))},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:"132500",origin:{x:.5,y:.5}}),this.scoreText.setTint(6565e3);var t=this.scene.make.image({key:hp,frame:cp.BLANK});t.setWorldSize(17,18),this.score.add([this.scoreText,t]);var e=-20;Phaser.Display.Align.In.LeftCenter(this.scoreText,t,e),this.add(this.score),e=10,Phaser.Display.Align.In.Center(this.score,this,e)},n.updateScore=function(){var t=this.payload.score;this.scoreText.setText(t)},n.createButton=function(){this.button=new jo.default(this.scene,hp,cp.BLANK,54,34.5),this.button.setName("ChallengeFriend");var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(18),text:"PLAY"});Phaser.Display.Align.In.Center(t,this.button,0,-2),this.button.add(t),Phaser.Display.Align.In.RightCenter(this.button,this,-2),this.add(this.button),this.button.onClick=this.handleChallengeFriend},n.runShowPopUpAnimation=function(t,e){this.scene.tweens.killTweensOf(this),this.showPopUp=new sp({targets:[this],delay:t,duration:e,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(t,e){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new ip({targets:n,duration:e,delay:this.scene.tweens.stagger(50,{start:t+50}),props:{scale:{duration:1e3,getStart:function(t){return.8*t.scale},getEnd:function(t){return t.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(t,e){void 0===t&&(t=0),void 0===e&&(e=300);var n=100*t;this.runShowPopUpAnimation(n,e),this.runShowItemAnimation(n,e)},e}(Phaser.GameObjects.Container),up=lp;function dp(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return fp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fp(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var pp=function(t){function e(e){var n;(n=t.call(this,e)||this).scene=void 0,n.currentPlayerId=void 0,n.scroller=void 0,n.scene=e;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createReuseScroller=function(){this.scroller=new tp(this.scene,{classType:up,listConfigs:[],width:280,height:310,padding:10,marginTop:10,marginBottom:10}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Zr.default.DEFAULT.KEY,Zr.default.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,25),this.add(this.scroller)},n.updateData=function(t){var e=Object.values(t)||[];if(e.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n,i=[],r=dp(e.sort((function(t,e){return+e.score-+t.score})));!(n=r()).done;){var a=n.value,s=a.playerId,o=a.photo,h=a.score,c=a.name,l=a.rank;if(s){var u=this.currentPlayerId===s,d={playerId:s,photo:o,name:c,rank:l,score:h,scoreRight:this.scene.tabId===fa,useChallenge:!u&&this.scene.tabId===pa,isHighlight:u};i.push(d)}}this.scroller.updateConfig(i),this.showLeaders()},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var t=this,e=this.getLeaders();if(e.length<1)return this.scene.isSwitchable=!0,void this.scene.board.showMessage(!0,"Leaderboard is empty!");for(var n=Math.min(e.length,6),i=0;i<n;i++){var r=e[i];r&&(r.setVisible(!0),r.runShowUpAnimation(i,300))}var a=300+100*n+250;this.scene.time.delayedCall(a,(function(){t.scene.isSwitchable=!0,t.scroller.setEnable(!0)}))},e}(Phaser.GameObjects.Container),mp=pp,gp=Zr.default.DEFAULT,vp=gp.KEY,yp=gp.FRAME,xp=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.tabWorld=void 0,n.tabFriends=void 0,n.scene=e,n.createTabFriends(),n.createTabWorld(),n}(0,j.default)(e,t);var n=e.prototype;return n.selectTabFriends=function(){this.tabFriends.button.setFrame(yp.BLANK),this.tabWorld.button.setFrame(yp.BLANK)},n.selectTabWorld=function(){this.tabFriends.button.setFrame(yp.BLANK),this.tabWorld.button.setFrame(yp.BLANK)},n.createTabFriends=function(){this.tabFriends=new jo.default(this.scene,vp,yp.BLANK),this.tabFriends.button.setSize(85,33).setDisplaySize(85,33),this.tabFriends.setName("FriendsTab");var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:9,text:"FRIENDS",origin:{x:.5,y:.55}});this.tabFriends.add(t),Phaser.Display.Align.In.Center(this.tabFriends,this,-55),this.add(this.tabFriends)},n.createTabWorld=function(){this.tabWorld=new jo.default(this.scene,vp,yp.BLANK),this.tabWorld.button.setSize(85,33).setDisplaySize(85,33),this.tabWorld.setName("WorldTab");var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:9,text:"WORLD",origin:{x:.5,y:.55}});this.tabWorld.add(t),Phaser.Display.Align.In.Center(this.tabWorld,this,55),this.add(this.tabWorld)},e}(Phaser.GameObjects.Container),bp=xp,Ep=Zr.default.DEFAULT,Ap=Ep.KEY,wp=Ep.FRAME,Sp=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.background=void 0,n.tabs=void 0,n.leaders=void 0,n.loading=void 0,n.message=void 0,n.messageAnimation=void 0,n.scene=e,n.setSize(310,430),n.createBackground(),n.createLoading(),n.createMessage(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.showLoading=function(t){this.loading.setVisible(t),this.showMessage(!1)},n.showMessage=function(t,e){this.message.setVisible(t),e&&(this.message.setText(e),this.messageAnimation.play())},n.createBackground=function(){this.background=new ea(this.scene,0,0,310,430),this.add(this.background)},n.createLoading=function(){this.loading=new fh(this.scene),this.loading.setTint(12237498),this.loading.setWorldSize(113,113),this.add(this.loading),Phaser.Display.Align.In.Center(this.loading,this.background)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this.background)},n.createContents=function(){this.createLeaders(),this.createTitle(),this.createTabs()},n.createLeaders=function(){this.leaders=new mp(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this.background,0,0)},n.createTitle=function(){var t=this.scene.add.container(),e=this.scene.make.image({key:Ap,frame:wp.BLANK});e.setWorldSize(271,81);var n=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Leaderboards"});Phaser.Display.Align.In.Center(n,e,0,-10),t.add([e,n]),Phaser.Display.Align.In.TopCenter(t,this.background,0,5),this.add(t)},n.createTabs=function(){this.tabs=new bp(this.scene),this.add(this.tabs),Phaser.Display.Align.In.TopCenter(this.tabs,this.background,0,-55)},n.createAnimation=function(){this.messageAnimation=new mu({targets:[this.message],duration:60,repeat:2})},e}(Phaser.GameObjects.Container),Mp=Sp,Tp=GameCore.Configs.LeadersBoard,Cp=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).board=void 0,e.footerBar=void 0,e.tabId=void 0,e.offset=void 0,e.isRequesting=void 0,e.isSwitchable=void 0,e.run=function(){e.isRequesting=!1;var t=[{selector:Th,callback:function(t){if(e.isRequesting=t,e.board.showLoading(t),!1===t){var n=e.game.storage.getState(),i=Mh(n);e.board.leaders.updateData(i)}}}];e.handleStateChange(t),e.selectFriendTab()},e.handleSelectFriendTab=function(){e.isRequesting||e.isSwitchable&&(e.isSwitchable=!1,e.selectFriendTab())},e.handleSelectWorldTab=function(){e.isRequesting||e.isSwitchable&&(e.isSwitchable=!1,e.selectWorldTab())},e.handlePlayWithFriend=function(){e.storage.dispatch(Uo())},e.handleHomeClick=function(){e.scene.switch(Rr.SceneKeys.DASHBOARD_SCENE)},e.handleShareLeaderboard=function(){e.storage.dispatch(Ps())},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){t.prototype.create.call(this),this.gameZone.setPosition(0,0),this.createBackground(yr.default.BACKGROUND.KEY,"0"),this.scene.bringToTop(),this.createBoard(),this.createFooterBar()},n.selectFriendTab=function(){this.tabId=pa,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabFriends(),this.storage.dispatch(Ah(Tp.LeaderboardId,pa,Tp.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=fa,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.board.tabs.selectTabWorld(),this.storage.dispatch(Ah(Tp.LeaderboardId,fa,Tp.Limit,this.offset))},n.loadMoreTabFriend=function(){this.isRequesting||(this.offset+=Tp.Limit,this.storage.dispatch(Ah(Tp.LeaderboardId,pa,Tp.Limit,this.offset)))},n.loadMoreTabWorld=function(){this.isRequesting||(this.offset+=Tp.Limit,this.storage.dispatch(Ah(Tp.LeaderboardId,fa,Tp.Limit,this.offset)))},n.createBoard=function(){this.board=new Mp(this),Phaser.Display.Align.In.Center(this.board,this.gameZone,0,-20),this.board.tabs.tabWorld.onClick=this.handleSelectWorldTab,this.board.tabs.tabFriends.onClick=this.handleSelectFriendTab},n.createFooterBar=function(){this.footerBar=new Jf(this),Phaser.Display.Align.In.BottomCenter(this.footerBar,this.gameZone,0,-50),this.footerBar.homeButton.onClick=this.handleHomeClick,this.footerBar.playButton.onClick=this.handlePlayWithFriend,this.footerBar.shareButton.onClick=this.handleShareLeaderboard},e}(Ko.default);var Ip,Pp,kp=Cp,Rp=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).name="LoadResourceFail",i.message=e||"Load resource fail",i.payload=n,i}return(0,j.default)(e,t),e}((0,ot.default)(Error)),Lp=[{id:"pass-levels",title:"Pass 10 Levels",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"Collect 300 diamonds",require:{diamond:300},reward:{diamond:100}},{id:"invite-friends",title:"Invite 2 friends",require:{friend:2},reward:{diamond:200}},{id:"reach-score",title:"Reach Total Scores",require:{score:1e5},reward:{diamond:200}}],Op=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Lp);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_p=(0,Ct.createSelector)([function(t){var e;return null==(e=t.dailyTasks)?void 0:e.tasks}],(function(t){return t})),Dp=(0,Ct.createSelector)([function(t){var e;return null==(e=t.dailyTasks)?void 0:e.process}],(function(t){return t})),Bp=(0,Ct.createSelector)([function(t){var e;return null==(e=t.dailyTasks)?void 0:e.isRequesting}],(function(t){return t})),Np=((0,Ct.createSelector)([function(t){var e;return null==(e=t.dailyTasks)?void 0:e.isNotice}],(function(t){return t})),GameCore.Configs.DailyTasks),Fp=function(t){return function(e){e({type:Yi,payload:{tasks:t}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,r=void 0===i?0:i,a=n.logTasks,s=void 0===a?{}:a;e((Date.now()-r)/1e3>Np.Duration?Up(t):Gp(s))}},Up=function(t){return function(e){var n={};t.forEach((function(t){var e=t.id,i=t.require;n[e]={},Object.keys(i).forEach((function(t){var i;n[e]=((i={})[t]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),e(Gp(n)),ws.emit(as.EVENTS.TASKS_RESET)}},Gp=function(t){return{type:zi,payload:{process:t}}},Vp=function(){var t=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(t)},Yp=function(){function t(t,e){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(t){var e=t.type,i=t.value;if(!(i<1)&&(-1!==n.requireTypes.indexOf(e)&&!n.isPassRequiredTarget(e)&&n.processMore(t))){e=t.type,i=t.value;var r=n.getCorrectValue(e,i);n.game.storage.dispatch(function(t,e,n){return function(i){var r=Vp();if(GameCore.Utils.Valid.isObject(r)){var a=r;GameCore.Utils.Object.hasOwn(a,t)&&(a[t].rewarded||(a[t][e]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:a}),i({type:Wi,payload:{id:t,type:e,value:n}})))}}}(n.id,e,r)),n.isTaskFinished(e)&&n.game.storage.dispatch(function(t){return function(e){e({type:Ki,payload:{id:t}}),ws.emit(as.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=t,this.id=e,this.init()}var e=t.prototype;return e.init=function(){var t=this,e=this.game.storage.getState(),n=_p(e)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:n.find((function(e){return e.id===t.id}));i&&(this.taskData=i,this.requireTypes=Object.keys(this.taskData.require),this.initEvents())}},e.getDataByType=function(t){var e=this.game.storage.getState(),n=Dp(e),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var r=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(r)&&GameCore.Utils.Object.hasOwn(r,t)){var a=r[t];"number"===typeof a&&(i.value=a)}return i.target=this.taskData.require[t]||0,i},e.getCorrectValue=function(t,e){var n=this.getDataByType(t),i=n.value,r=n.target,a=e;return i+e>r&&(a=r-i),Math.round(a)},e.isPassRequiredTarget=function(t){var e=this.getDataByType(t);return e.value>=e.target},e.isTaskFinished=function(t){var e=this.getDataByType(t);return e.value>=e.target},t}(),zp=Yp,Wp=as.COLLECT_DIAMONDS,Hp=Wp.ID,Xp=Wp.EVENTS,Kp=function(t){function e(e){return t.call(this,e,Hp)||this}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){ws.off(Xp.COLLECT_DIAMONDS,this.process),ws.on(Xp.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},e}(zp),jp=Kp,qp=as.INVITE_FRIENDS,Zp=qp.ID,Qp=qp.EVENTS,Jp=function(t){function e(e){var n;return(n=t.call(this,e,Zp)||this).invitedFriends=void 0,n.resetData=function(){n.invitedFriends=[]},n.resetData(),n}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){var t=this;ws.off(Qp.INVITED_FRIEND,this.process),ws.on(Qp.INVITED_FRIEND,this.process),ws.on(as.EVENTS.TASKS_RESET,(function(){t.resetData()}))},n.processMore=function(t){var e=t.opponentId;return!!e&&(-1===this.invitedFriends.indexOf(e)&&(this.invitedFriends.push(e),!0))},e}(zp),$p=Jp,tm=as.PASS_LEVELS,em=tm.ID,nm=tm.EVENTS,im=function(t){function e(e){return t.call(this,e,em)||this}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){ws.off(nm.PASS_LEVEL,this.process),ws.on(nm.PASS_LEVEL,this.process)},n.processMore=function(){return!0},e}(zp),rm=im,am=as.REACH_SCORE,sm=am.ID,om=am.EVENTS,hm=function(t){function e(e){var n;return(n=t.call(this,e,sm)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){ws.off(om.ADD_SCORE,this.process),ws.on(om.ADD_SCORE,this.process)},n.processMore=function(t){var e=t.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=e,!1):(t.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},e}(zp),cm=hm,lm=function(){function t(t){var e=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.eventsListener={},t.next=3,e.initData();case 3:e.initEvents();case 4:case"end":return t.stop()}}),t)}))),this.initData=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.game.storage.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n(),!Bp(i)){t.next=4;break}return t.abrupt("return");case 4:return e({type:Vi,payload:{}}),t.next=7,Op();case 7:r=t.sent,e(Fp(r));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),this.game=t,this.init()}var e=t.prototype;return e.getEventListener=function(t){return this.eventsListener[t]},e.initEvents=function(){this.eventsListener[as.PASS_LEVELS.ID]=new rm(this.game),this.eventsListener[as.REACH_SCORE.ID]=new cm(this.game),this.eventsListener[as.INVITE_FRIENDS.ID]=new $p(this.game),this.eventsListener[as.COLLECT_DIAMONDS.ID]=new jp(this.game)},t}(),um=lm,dm=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],fm=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",dm);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),pm=(0,Ct.createSelector)([function(t){var e;return null==(e=t.missions)?void 0:e.missions}],(function(t){return t})),mm=(0,Ct.createSelector)([function(t){var e;return null==(e=t.missions)?void 0:e.isRequesting}],(function(t){return t})),gm=((0,Ct.createSelector)([pm,function(t,e){return e.name}],(function(t,e){return t?"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:null:null})),function(t){return{type:Di,payload:{missions:t}}}),vm=Zr.default.DEFAULT.FRAME,ym=vm.BLANK,xm=vm.BLANK,bm=vm.BLANK,Em=vm.BLANK,Am=vm.BLANK,wm=vm.BLANK,Sm=vm.BLANK,Mm=vm.BLANK,Tm={RED:"red",BLUE:"blue",PINK:"pink",GREEN:"green",YELLOW:"yellow"},Cm={FREEZE:"freeze",COLORFUL:"colorful",COLOR_CHANGE:"color_change"},Im=Tm.RED,Pm=Tm.BLUE,km=Tm.PINK,Rm=Tm.GREEN,Lm=Tm.YELLOW,Om=Cm.FREEZE,_m=Cm.COLORFUL,Dm=Cm.COLOR_CHANGE,Bm=((Ip={})[Im]="r",Ip[Pm]="b",Ip[km]="p",Ip[Rm]="g",Ip[Lm]="y",Ip[Om]="f",Ip[_m]="c",Ip[Dm]="m",Ip),Nm={SIZE:37,STATUS:{READY:"ready",MOVING:"moving",CAPTURED:"captured"},FRAME:(Pp={},Pp[Im]=ym,Pp[Pm]=xm,Pp[km]=bm,Pp[Rm]=Em,Pp[Lm]=Am,Pp[Om]=wm,Pp[_m]=Sm,Pp[Dm]=Mm,Pp),SETS:{SET_3:"set_3",SET_4:"set_4",SET_5:"set_5",SET_6:"set_6",SET_7:"set_7",SET_8:"set_8",SET_9:"set_9"},COLORS:Tm,SPECIALS:Cm,HASH:Bm},Fm={GIFT:{ID:"ItemGift"},PAINT:{ID:"ItemPaint"},HAMMER:{ID:"ItemHammer"},SHUFFLE:{ID:"ItemShuffle"},CHANGE_COLOR:{ID:"ItemChangeColor"}},Um={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"},OBJECTS:(0,O.default)({},Nm.COLORS,Nm.SPECIALS,{PAINT:Fm.PAINT.ID,HAMMER:Fm.HAMMER.ID,SHUFFLE:Fm.SHUFFLE.ID})},Gm=(0,Ct.createSelector)([function(t){var e;return null==(e=t.missions)?void 0:e.mission}],(function(t){return t})),Vm=((0,Ct.createSelector)([Gm],(function(t){return t?t.name:null})),function(){function t(t,e,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(t){var e=t.id,n=t.type,r=t.value;r<1||i.id===e&&i.isTypeRequired(n)&&i.processMore(t)&&(i.game.storage.dispatch(function(t,e,n){return{type:Ni,payload:{name:t,type:e,value:n}}}(i.name,n,r)),i.isMissionComplete()&&(ws.emit(Um.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(t){return{type:Fi,payload:{name:t}}}(i.name))))},this.id=e,this.name=n,this.game=t}var e=t.prototype;return e.start=function(){var t=this.game.storage.getState(),e=Gm(t);e&&e.name===this.name&&(this.reward=e.reward,this.initEvents())},e.getMissionData=function(){var t=this.game.storage.getState(),e=Gm(t);return e?e.name!==this.name?null:e:null},e.getDataByType=function(t){var e=this.getMissionData();if(!e)return null;var n=e.require[t];return{value:e.process[t],target:n}},e.isTypeRequired=function(t){var e=this.getDataByType(t);return!!e&&e.target>0},e.isMissionComplete=function(){var t=this.getMissionData();if(!t)return!0;var e=t.require,n=t.process,i=!0;return Object.keys(e).forEach((function(t){if(i){var r=e[t];n[t]<r&&(i=!1)}})),i},t}()),Ym=Vm,zm=Um.EVENTS,Wm=Um.TYPES,Hm=function(t){function e(e,n){return t.call(this,e,Wm.COLLECT_GEMS,n)||this}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){ws.off(zm.MISSION_UPDATE,this.process),ws.on(zm.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},e}(Ym),Xm=Hm,Km=Um.EVENTS,jm=Um.TYPES,qm=function(t){function e(e,n){return t.call(this,e,jm.COMBO,n)||this}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){ws.off(Km.MISSION_UPDATE,this.process),ws.on(Km.MISSION_UPDATE,this.process)},n.processMore=function(t){var e=this.getMissionData();if(!e)return!1;var n=t.type;return t.value>=e.require[n]},e}(Ym),Zm=qm,Qm=Um.EVENTS,Jm=Um.TYPES,$m=function(t){function e(e,n){return t.call(this,e,Jm.USE_ITEM,n)||this}(0,j.default)(e,t);var n=e.prototype;return n.initEvents=function(){ws.off(Qm.MISSION_UPDATE,this.process),ws.on(Qm.MISSION_UPDATE,this.process)},n.processMore=function(t){return!0},e}(Ym),tg=$m,eg=function(){function t(t){var e=this;this.game=void 0,this.listener=void 0,this.init=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initData();case 2:e.initListeners(),e.initEvents();case 4:case"end":return t.stop()}}),t)}))),this.initData=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.game.storage.dispatch(function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n(),!mm(i)){t.next=4;break}return t.abrupt("return");case 4:return e({type:_i,payload:{}}),t.next=7,fm();case 7:r=t.sent,e(gm(r));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),this.startListener=function(t){e.listener[t]&&e.listener[t].start()},this.game=t,this.init()}var e=t.prototype;return e.initListeners=function(){var t=this;this.listener={};var e=this.game.storage.getState(),n=pm(e);n&&Object.keys(n).forEach((function(e){switch(n[e].id){case Um.TYPES.COLLECT_GEMS:t.listener[e]=new Xm(t.game,e);break;case Um.TYPES.COMBO:t.listener[e]=new Zm(t.game,e);break;case Um.TYPES.USE_ITEM:t.listener[e]=new tg(t.game,e)}}))},e.initEvents=function(){ws.off(Um.EVENTS.MISSION_START,this.startListener),ws.on(Um.EVENTS.MISSION_START,this.startListener)},t}(),ng=eg,ig=(GameCore.Configs.Match,function(){return function(){var t=(0,K.default)(Z().mark((function t(e,n){var i,r,a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b,E,A,w,S,M;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n(),r=Mr(i),a=Tr(i),s=window.game,o=s.player,h=s.analytics,c=s.facebook,l=s.globalScene,u=o.getPlayer(),d=r.contextId,f=r.entryPointData,m=(p=f||{}).type,g=p.matchId,v=p.opponentId,y=p.playerId,x=p.playerName,b=p.playerPhoto,E=p.playerScore,A=u.playerId===y,w=xr,A||"string"!==typeof y||"string"!==typeof x||(w={playerId:y,name:x,photo:"string"===typeof b?b:"",locale:"en_US"}),u.isUserNew&&h.event(an.AnalyticsEvents.NEW_USER),a!==wr){t.next=25;break}return t.prev=12,t.next=15,c.getTournamentAsync();case 15:S=t.sent,M=S.getID().toString(),e(Za(M)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),(0,H.sendException)(t.t0);case 23:return e(Do()),t.abrupt("return");case 25:if(a!==Er){t.next=34;break}if(m!==pr){t.next=30;break}return A||o.updateConnectedPlayers([w]),e(Uo(d,w.playerId,!0)),t.abrupt("return");case 30:if(!([v,y].indexOf(u.playerId)>=0)||m!==gr){t.next=34;break}return e(Vo(g,A?v:y)),t.abrupt("return");case 34:if(a!==Ar){t.next=39;break}return e(ko(y,{score:E,level:0})),e(Go(w)),t.abrupt("return");case 39:if(!u.isUserNew){t.next=42;break}return e(Bo()),t.abrupt("return");case 42:l.events.emit(Rr.SceneEvents.SWITCH,Rr.SceneKeys.GAME_SCENE);case 43:case"end":return t.stop()}}),t,null,[[12,20]])})));return function(e,n){return t.apply(this,arguments)}}()}),rg={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},ag=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).loadLevelReadyPromise=void 0,e.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,e.player.requestConnectedPlayers(),setTimeout(e.subscribebot,500)},e.startGame=function(){e.analytics.event(an.AnalyticsEvents.APP_READY),e.storage.dispatch(bf(Rr.SceneKeys.LOAD_SCENE)),e.storage.dispatch(ig())},e.subscribebot=function(){e.facebook.attemptToSubscribeBot()},e.handleLoadMusicCompleted=function(){e.audio.initMusic(rg.BACKGROUND.KEY),e.audio.playMusic()},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){var t=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(an.AnalyticsEvents.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(e){t.facebook.progressLoading.onProgress(e)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(t){var e=new Rp("Load resources at LoadScene failed.");(0,H.sendExceptionWithScope)(e,{file:null==t?void 0:t.url})})),this.load.bitmapFont(qo.default.PRIMARY.KEY,qo.default.PRIMARY.TEXTURE,qo.default.PRIMARY.DATA),this.load.bitmapFont(qo.default.MIKADO.KEY,qo.default.MIKADO.TEXTURE,qo.default.MIKADO.DATA),this.load.image(yr.default.BACKGROUND.KEY,yr.default.BACKGROUND.FILE),this.load.atlas({key:Zr.default.GAME_PLAY.KEY,textureURL:Zr.default.GAME_PLAY.TEXTURE,atlasURL:Zr.default.GAME_PLAY.JSON}),this.load.atlas({key:Zr.default.DEFAULT.KEY,textureURL:Zr.default.DEFAULT.TEXTURE,atlasURL:Zr.default.DEFAULT.JSON}),this.load.spine(Zr.default.BIRD_SPINE.KEY,Zr.default.BIRD_SPINE.jsonPATH,Zr.default.BIRD_SPINE.atlasPATH),this.load.audio(nl.default.BIRDS_FLY,[rg.EFFECTS.PATH+nl.default.BIRDS_FLY+".ogg",rg.EFFECTS.PATH+nl.default.BIRDS_FLY+".mp3"]),this.loadLevelReadyPromise=this.loadLevelAsync()},n.create=function(){this.createAsync()},n.createAsync=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadLevelReadyPromise;case 2:this.player.updateData().then().catch(H.sendException),e=this.player.getLevel(),this.level.preloadLevelDataAsync(e+1),this.analytics.event(an.AnalyticsEvents.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.setupGlobalScene=function(){var t=this.scene.get(Rr.SceneKeys.GLOBAL_SCENE);t instanceof Df&&t.setup()},n.initModules=function(){new ng(this.game),new um(this.game)},n.lazyLoadResource=function(){var t=this;setTimeout((function(){t.scene.wake(),t.loadSounds(),t.load.once(Phaser.Loader.Events.COMPLETE,(function(){t.scene.sleep()}))}),1500)},n.loadSounds=function(){var t=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(t+"audio-"+rg.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(rg.BACKGROUND.KEY,rg.BACKGROUND.FILE);for(var e=0,n=Object.keys(nl.default);e<n.length;e++){var i=n[e],r=nl.default[i];this.load.audio(r,[rg.EFFECTS.PATH+r+".ogg",rg.EFFECTS.PATH+r+".mp3"])}this.load.start()},n.loadWideframesResource=function(){this.frameCapture.preload({"wide-frame-message-win":"./assets/wideframes/wide-frame-message-win.png"})},n.loadLevelPromises=function(){var t=(0,K.default)(Z().mark((function t(){var e,n=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.prev=1,e.push(new Promise((function(t){FBInstant.player.getDataAsync(["level","countItems"]).then((function(e){var i={level:(null==e?void 0:e.level)||1,countItems:(null==e?void 0:e.countItems)||{undoCount:GameCore.Configs.Gameplay.UndoCount,hintCount:GameCore.Configs.Gameplay.HintCount,lastTimeUpdate:(new Date).getTime()}};n.storage.dispatch(He(i)),t({})})).catch(H.sendException)}))),t.next=5,Promise.all(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),(0,H.sendException)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),n.loadLevelAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=3),t.prev=1,t.next=4,this.loadLevelPromises();case 4:return n=this.player.getLevel(),this.level.setLevel(n),t.next=8,this.level.preloadLevelDataAsync(n);case 8:t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(1),0!==e){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,this.loadLevelAsync(e-1);case 16:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),e}(Phaser.Scene),sg=ag,og=Zr.default.DEFAULT,hg=og.KEY,cg=og.FRAME,lg=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.avatar=void 0,n.crown=void 0,n.playerName=void 0,n.playerScore=void 0,n.scene=e,n.createAvatar(),n.updateSize(),n.createWinCrown(),n.createPlayerName(),n.createPlayerScore(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.showCrown=function(t){this.crown.setVisible(t),this.avatar.setFrame(cg.BLANK),this.avatar.setBackground(cg.BLANK)},n.setPlayerName=function(t){this.playerName.setText(t)},n.setPlayerScore=function(t){this.playerScore.setText(""+t)},n.loadPhoto=function(t,e){this.avatar.loadPhoto(t,e,60)},n.updateSize=function(){var t=this.avatar,e=t.width,n=t.height;this.setSize(e,n)},n.createAvatar=function(){this.avatar=new Lh(this.scene,{key:hg,frame:cg.BLANK,background:cg.BLANK,width:89,height:89}),this.add(this.avatar)},n.createWinCrown=function(){this.crown=this.scene.make.image({key:hg,frame:cg.BLANK}),this.crown.setWorldSize(52,36),Phaser.Display.Align.In.TopCenter(this.crown,this.avatar,0,75),this.add(this.crown)},n.createPlayerName=function(){this.playerName=this.scene.make.text({style:{fontFamily:qo.default.FONT_FAMILY,fontSize:this.scene.fontSize(42)+"px",fontStyle:"bold"},origin:{x:.5,y:.5}}),this.playerName.setTint(11632207),this.playerName.setHighQuality(),Phaser.Display.Align.In.BottomCenter(this.playerName,this.avatar,0,25),this.add(this.playerName)},n.createPlayerScore=function(){this.playerScore=this.scene.make.bitmapText({size:this.scene.fontSize(30),font:qo.default.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.playerScore.setTint(6762627),Phaser.Display.Align.In.BottomCenter(this.playerScore,this.playerName,0,25),this.add(this.playerScore)},e}(Phaser.GameObjects.Container),ug=lg,dg=Zr.default.DEFAULT,fg=dg.KEY,pg=dg.FRAME,mg=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.board=void 0,n.titleText=void 0,n.playerScore=void 0,n.opponentScore=void 0,n.buttonClose=void 0,n.buttonRestart=void 0,n.buttonShare=void 0,n.scene=e,n.createBoard(),n.createTitle(),n.createVSText(),n.createPlayers(),n.createRestartButton(),n.createShareButton(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createBoard=function(){this.board=new ea(this.scene,0,0,600,340),this.board.setDepth(qr.default.BACKGROUND),this.add(this.board),Phaser.Display.Align.In.Center(this.board,this)},n.createTitle=function(){var t=this.scene.add.container(),e=this.scene.make.image({key:fg,frame:pg.BLANK});e.setWorldSize(340,75),this.titleText=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5}}),Phaser.Display.Align.In.Center(this.titleText,e,0,-10),this.buttonClose=new jo.default(this.scene,fg,pg.BLANK,41.8,41.8),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,e,0,-3),t.setDepth(qr.default.TILE),t.add([e,this.titleText,this.buttonClose]),this.add(t),Phaser.Display.Align.In.Center(t,this.board,0,-170)},n.createVSText=function(){var t=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(70),text:"VS",origin:{x:.5,y:.5}});t.setTint(11632207),t.setDepth(qr.default.TEXT),this.add(t),Phaser.Display.Align.In.Center(t,this.board,0,-45)},n.createPlayers=function(){this.playerScore=new ug(this.scene),this.playerScore.setDepth(qr.default.ITEM),this.add(this.playerScore),Phaser.Display.Align.In.Center(this.playerScore,this.board,-100,-50),this.opponentScore=new ug(this.scene),this.opponentScore.setDepth(qr.default.ITEM),this.add(this.opponentScore),Phaser.Display.Align.In.Center(this.opponentScore,this.board,100,-50)},n.createRestartButton=function(){this.buttonRestart=new Gc.default(this.scene,{key:fg,button:pg.BLANK,icon:pg.BLANK,text:"Restart"},170,72),this.buttonRestart.setName("Restart"),this.buttonRestart.setDepth(qr.default.BUTTON),this.add(this.buttonRestart),Phaser.Display.Align.In.Center(this.buttonRestart,this.opponentScore,0,155)},n.createShareButton=function(){this.buttonShare=new Gc.default(this.scene,{key:fg,button:pg.BLANK,icon:pg.BLANK,text:"Share"},153,72),this.buttonShare.setName("Restart"),this.buttonShare.setDepth(qr.default.BUTTON),this.add(this.buttonShare),Phaser.Display.Align.In.Center(this.buttonShare,this.playerScore,0,155)},e}(Phaser.GameObjects.Container),gg=mg,vg=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).main=void 0,e.run=function(){e.getResultInfo()},e.handleClose=function(){e.scene.sleep(Rr.SceneKeys.RESULT_MATCH_SCENE),e.scene.run(Rr.SceneKeys.GAME_OVER_SCENE)},e.handleShareScore=function(){e.storage.dispatch(Ls())},e.handleRestartMatch=function(){e.storage.dispatch(No()),e.scene.sleep(Rr.SceneKeys.RESULT_MATCH_SCENE),e.scene.sleep(Rr.SceneKeys.GAME_OVER_SCENE)},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){t.prototype.create.call(this),this.createMask(.8),this.createMain(),this.createInput()},n.getResultInfo=function(){var t=this.storage.getState(),e=ys(t),n=Ua(t),i=this.player.getPlayer(),r=i.photo,a=i.name,s=i.playerId,o=fs(t),h=o.playerId,c=o.name,l=o.photo,u=(e[s]||{}).score,d=void 0===u?0:u,f=(e[h]||{}).score,p=void 0===f?0:f,m=ms(t,{playerId:s}),g=gs(t,{opponentId:h});n===Ar&&(m=!0,g=!0);var v=m&&g;this.main.playerScore.loadPhoto(s,r),this.main.opponentScore.loadPhoto(h,l),this.main.playerScore.setPlayerName(a),this.main.opponentScore.setPlayerName(c),this.main.playerScore.setPlayerScore(d),this.main.opponentScore.setPlayerScore(p),this.main.playerScore.showCrown(v&&d>p),this.main.opponentScore.showCrown(v&&p>d),m&&g?d===p?this.main.titleText.setText("Draw"):d>p?this.main.titleText.setText("You Win"):d<p&&this.main.titleText.setText("You Lose"):this.main.titleText.setText("Waiting for Opponent")},n.createMain=function(){this.main=new gg(this),Phaser.Display.Align.In.Center(this.main,this.gameZone,0,13)},n.createInput=function(){this.main.buttonClose.onClick=this.handleClose,this.main.buttonRestart.onClick=this.handleRestartMatch,this.main.buttonShare.onClick=this.handleShareScore},e}(Ko.default);var yg,xg=vg,bg=function(t){function e(e,n,i){var r;return(r=t.call(this)||this).game=void 0,r.options=void 0,r.performance=void 0,r.isRunning=!1,r.checkTimer=void 0,r.fpsHistory=void 0,r.start=function(){if(!r.isRunning){r.isRunning=!0;var t=r.options.checkInterval;r.checkTimer=t,r.fpsHistory=[],r.game.events.on(Phaser.Core.Events.POST_STEP,r.onPostStep)}},r.stop=function(){r.isRunning&&(r.isRunning=!1,r.game.events.off(Phaser.Core.Events.POST_STEP,r.onPostStep),r.options.onlyUpdateWhenSwitchScene&&r.checkFps())},r.onPostStep=function(t,e){if(r.checkTimer-=e,!(r.checkTimer>0)){var n=r.options,i=n.checkInterval,a=n.onlyUpdateWhenSwitchScene;r.checkTimer+=i,r.fpsHistory.push(r.game.loop.actualFps),!1===a&&r.fpsHistory.length>=5&&r.checkFps()}},r.game=e,r.options=i,r.performance=n,r}(0,j.default)(e,t);var n=e.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var t=this.options.autoUpgradeQuality,e=!1;this.isLowFps()?e=this.performance.downgradeGraphicsQuality():t&&this.isHighFps()&&(e=this.performance.upgradeGraphicsQuality()),e&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},e}(Phaser.Events.EventEmitter),Eg=bg,Ag=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],wg=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).fpsTracker=void 0,e.pixelRatio=void 0,e.minQuality=void 0,e.maxQuality=void 0,e.qualityAdjustStep=void 0,e.trackingSceneKeys=[],e.trackingScene=function(t){if(e.trackingSceneKeys.includes(t)){var n=e.game.scene.getScene(t);n.events.once(Phaser.Scenes.Events.UPDATE,e.fpsTracker.start),n.events.once(Phaser.Scenes.Events.SLEEP,e.fpsTracker.stop)}},e}(0,j.default)(e,t);var n=e.prototype;return n.configure=function(t){var e=t.pixelRatio,n=t.minQuality,i=t.maxQuality,r=t.qualityAdjustStep,a=t.trackingSceneKeys,s=(0,X.default)(t,Ag);this.pixelRatio=e,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=r,this.trackingSceneKeys=a,this.fpsTracker=new Eg(this.game,this,s)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var t=this.pixelRatio;if(t<=this.minQuality)return!1;var e=+(t-this.qualityAdjustStep).toFixed(2);return!(e<this.minQuality)&&(this.pixelRatio=e,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var t=this.pixelRatio;if(t>=this.maxQuality)return!1;var e=+(t+this.qualityAdjustStep).toFixed(2);return!(e>this.maxQuality)&&(this.pixelRatio=e,this.game.world.resize(this.pixelRatio),!0)},e}(Phaser.Plugins.BasePlugin),Sg=wg,Mg=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).instance=void 0,i.placementId=void 0,i.instance=null,i.placementId=n,i}(0,j.default)(e,t),e.setGame=function(t){self.game=t};var n=e.prototype;return n.loadAsync=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,this.status=GameCore.Ads.Status.LOADING,t.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=t.sent,null!==this.instance){t.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return t.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,t.next=19;break;case 14:throw t.prev=14,t.t0=t.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,t.t0;case 19:case"end":return t.stop()}}),t,this,[[2,14]])})));return function(){return t.apply(this,arguments)}}(),n.showAsync=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.status===GameCore.Ads.Status.FILLED){t.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){t.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return t.next=8,this.instance.showAsync();case 8:this.status=GameCore.Ads.Status.IDLE,this.instance=null,t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(t.t0,"code")&&"ADS_NOT_LOADED"===t.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),t.t0;case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=self.game.facebook,t.t0=e,t.next=t.t0===GameCore.Ads.Types.REWARDED?4:t.t0===GameCore.Ads.Types.INTERSTITIAL?7:10;break;case 4:return t.next=6,n.getRewardedVideoAsync(this.placementId);case 6:case 9:return t.abrupt("return",t.sent);case 7:return t.next=9,n.getInterstitialAdAsync(this.placementId);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(GameCore.Ads.AdInstance),Tg=Mg,Cg='<div id="mockads"> <div style="color:#fff;display:flex;align-content:space-between;justify-content:space-between;flex-direction:column;flex-wrap:nowrap;position:absolute;width:100vw;height:100vh;top:0;left:0;font-family:sans-serif;background:#063b4d;background:linear-gradient(0deg,#063b4d 30%,#0e6171 100%)"> <div style="display:flex;height:6vh;background-color:#0b4d5b;flex-direction:row;justify-content:space-between;align-items:center;align-content:center;font-size:larger" id="ad-header"> <div style="width:80px;display:flex;align-items:center;justify-content:center;margin:0 10px;cursor:pointer" id="close-btn"> Close </div> <div style="width:80px;display:flex;align-items:center;justify-content:center;margin:0 10px;cursor:pointer" id="reward-btn"> Reward </div> </div> <div style="display:flex;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:center;height:100%;align-items:center" id="ad-content"> <div style="display:flex;width:200px;height:50px;background-color:#1f7888;align-items:center;justify-content:center;border-radius:100vw;margin:10px;text-transform:uppercase"> <span>AD {AD_TYPE}</span> </div> <div style="background-color:#1f7888;display:flex;align-items:center;justify-content:center;width:80vw;border-radius:16px"> <img src="{AD_CONTENT}" style="position:relative;width:inherit;border-radius:6px"/> </div> </div> <div style="display:flex;height:3vh;flex-direction:row;justify-content:flex-start;align-items:center;background-color:#063f51" id="ad-footer"></div> </div> </div>',Ig=GameCore.Configs.Ads.Mockup,Pg=Ig.ErrorRate,kg=Ig.GiphyApiKey,Rg=function(t){return function(e){e.preventDefault();var n=document.getElementById("popup-ads");null==n||n.remove(),t()}},Lg=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var i=new Image;i.onload=function(){return t()},i.onerror=function(){return n()},i.src=e})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Og=function(){var t=(0,K.default)(Z().mark((function t(e,n,i,r){var a,s,o,h;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Cg.markup||Cg,(s=document.createElement("div")).id="popup-ads",s.innerHTML=a.replace("{AD_TYPE}",e).replace("{AD_CONTENT}",n),document.body.appendChild(s),(o=document.getElementById("close-btn"))&&(e===GameCore.Ads.Types.REWARDED?(o.innerHTML="Skip",o.onclick=Rg((function(){r({code:"USER_INPUT",message:"Skip ads mock error"})}))):o.onclick=Rg(i)),(h=document.getElementById("reward-btn"))&&(e===GameCore.Ads.Types.REWARDED?h.onclick=Rg(i):h.remove());case 9:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),_g=function(){function t(t){this.type=void 0,this.adContent=void 0,this.apiAdContent=void 0,this.loadTimer=void 0,this.showTimer=void 0,this.type=t,this.adContent="",this.apiAdContent="https://api.giphy.com/v1/gifs/trending?api_key="+kg+"&rate=pg&bundle=low_bandwidth"}var e=t.prototype;return e.loadAsync=function(){var t=(0,K.default)(Z().mark((function t(){var e,n=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Phaser.Math.RND.between(0,100)<=Pg){t.next=7;break}return t.next=4,this.getAdContentAsync();case 4:return this.adContent=t.sent,t.next=7,Lg(this.adContent);case 7:return t.abrupt("return",new Promise((function(t,i){clearTimeout(n.loadTimer),e?i({code:"NETWORK_FAILURE",message:"Load ads mock error"}):t()})));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.showAsync=function(){var t=(0,K.default)(Z().mark((function t(){var e,n=this;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Phaser.Math.RND.between(0,100)<=Pg,t.abrupt("return",new Promise((function(t,i){e?i({code:"RATE_LIMITED",message:"Show ads mock error"}):Og(n.type,n.adContent,t,i)})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.getPlacementID=function(){return"123"},e.getAdContentAsync=function(){var t=(0,K.default)(Z().mark((function t(){var e,n,i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.apiAdContent,{method:"GET"});case 2:return e=t.sent,t.next=5,e.json();case 5:if(n=t.sent,GameCore.Utils.Valid.isObject(n)){t.next=8;break}return t.abrupt("return","");case 8:return i=n.data,r=Phaser.Math.RND.between(0,i.length-1),t.abrupt("return",i[r].images.downsized.url);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}(),Dg=function(t){function e(){return t.apply(this,arguments)||this}return(0,j.default)(e,t),e.prototype.createInstanceByType=function(){var t=(0,K.default)(Z().mark((function t(e){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new _g(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(Tg),Bg=Dg,Ng=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).Text=void 0,e.Texture=void 0,e.currentLocale=void 0,e.supportedLanguages=void 0,e.data=void 0,e.options=void 0,e}(0,j.default)(e,t);var n=e.prototype;return n.configure=function(t){this.applyOptions(t)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(t){void 0===t&&(t="en");var e=this.getCorrectLocale(t);this.currentLocale=e,this.Text=this.data[e].Text,this.Texture=this.data[e].Texture},n.getText=function(t){if("object"==typeof t){var e=t.key,n=t.variables,i=void 0===n?[]:n,r=t.locale,a=void 0===r?this.currentLocale:r,s=this.getCorrectLocale(a),o=this.data[s].Text[e];return this.replaceVariables(o,i)}return this.Text[t]},n.getTexture=function(t){if("object"==typeof t){var e=t.key,n=t.variables,i=void 0===n?[]:n,r=t.locale,a=void 0===r?this.currentLocale:r,s=this.getCorrectLocale(a),o=this.data[s].Texture[e];return this.replaceVariables(o,i)}return this.Texture[t]},n.isSupportLanguage=function(t){return this.supportedLanguages.indexOf(t)>=0},n.applyOptions=function(t){this.options=(0,O.default)({},t);var e=t.data,n=t.locale,i=void 0===n?"en":n,r=t.upperCaseText,a=void 0!==r&&r;this.data=e,this.supportedLanguages=Object.keys(e);var s=this.getCorrectLocale(i);if(this.currentLocale=s,this.Text=e[s].Text,this.Texture=e[s].Texture,a)for(var o in this.Text)this.Text[o]=this.Text[o].toUpperCase()},n.replaceVariables=function(t,e){var n=e.length;if(0==n)return t;var i=0;return t.replace(/{.*}/,(function(){return String(e[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(t){var e=t;return this.isSupportLanguage(t)||(e="en"),e},e}(Phaser.Plugins.BasePlugin),Fg={en:JSON.parse('{"Text":{"empty_{X}":"empty_{X}"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}')},Ug=function(t){function e(){return t.apply(this,arguments)||this}return(0,j.default)(e,t),e.prototype.configure=function(e){t.prototype.configure.call(this,(0,O.default)({data:Fg,locale:"en",upperCaseText:!1},e))},e}(Ng),Gg=Ug,Vg=0,Yg=0,zg=function(){function t(t){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=t}var e=t.prototype;return e.loadingProgressFbBootScene=function(){var t=this,e=100;Yg=30;!function n(){e<=0?clearTimeout(t.progressFbTimeEvent):t.progressFbTimeEvent=setTimeout((function(){t.game.facebook.setLoadingProgress(Math.round(Yg)),Yg+=30/e,e--,n()}),50)}()},e.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},e.loadingProgressFbLoadScene=function(){var t=this;(!Yg||Yg<30)&&(Yg=60),Vg=Yg;!function e(){t.progressFbTimeEvent=setTimeout((function(){t.game.facebook.setLoadingProgress(Math.round(Yg)),Yg+=.1,e()}),50)}()},e.onProgress=function(t){var e=100-Yg,n=Math.round(t*e+Yg);n>Vg&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},t}(),Wg=zg,Hg=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).level=1,e.maxLevel=1,e.promisePreloadLevel={},e.loadedLevel={},e}(0,j.default)(e,t);var n=e.prototype;return n.getLevel=function(){return this.level},n.getMaxLevel=function(){return this.maxLevel},n.setLevel=function(t){this.level=t,this.maxLevel=Math.max(this.level,t)},n.setMaxLevel=function(t){this.maxLevel=t},n.setLevelCustom=function(t){this.loadedLevel[this.getKeyLevel(this.level)]=t},n.nextLevel=function(){this.level+=1,this.preloadCurrentLevel()},n.preloadCurrentLevel=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.preloadLevelDataAsync(this.level);case 2:return t.next=4,this.preloadLevelDataAsync(this.level+1);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.getKeyLevel=function(t){return"level_"+GameCore.Utils.Number.padStart(t,5)},n.preloadLevelDataAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=GameCore.Configs.Level,!((e=e||this.level)>n.maxLevel)){t.next=4;break}return t.abrupt("return");case 4:return i=this.getKeyLevel(e),(!Object.keys(this.promisePreloadLevel).includes(i)||n.alwaysLoadNew)&&(this.promisePreloadLevel[i]=this.preloadLevelWithRetry(e,n.retryCount,n.retryDelay)),t.next=9,this.promisePreloadLevel[i];case 9:if(r=t.sent){t.next=15;break}return delete this.promisePreloadLevel[i],t.abrupt("return");case 15:return this.loadedLevel[i]=r,t.abrupt("return",r);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.preloadLevelWithRetry=function(){var t=(0,K.default)(Z().mark((function t(e,n,i){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=3),void 0===i&&(i=2e3),!(n<0)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.preloadLevel(e);case 6:if(r=t.sent){t.next=11;break}return t.next=10,(0,Vt.sleepAsync)(i);case 10:return t.abrupt("return",this.preloadLevelWithRetry(e,n-1));case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}(),n.preloadLevel=function(){var t=(0,K.default)(Z().mark((function t(e){var n,i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.getKeyLevel(e),i=GameCore.Configs.Level.url,t.next=5,fetch(""+i+n+".json",{method:"GET"});case 5:return r=t.sent,t.next=8,r.json();case 8:return a=t.sent,t.abrupt("return",a);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return");case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),n.getLevelDataAsync=function(){var t=(0,K.default)(Z().mark((function t(e){var n;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.preloadLevelDataAsync(e||this.level);case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return");case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),n.getLevelData=function(t){var e=this.getKeyLevel(t||this.level);return this.loadedLevel[e]},e}(Phaser.Plugins.BasePlugin),Xg=Hg,Kg=Zr.default.DEFAULT,jg=Kg.KEY,qg=Kg.FRAME,Zg=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).popup=void 0,e.ribbonContainer=void 0,e.closeButton=void 0,e.horizontalButtonsContainer=void 0,e.soundButton=void 0,e.soundBtnIcon=void 0,e.musicButton=void 0,e.musicBtnIcon=void 0,e.vibrateButton=void 0,e.vibrateBtnIcon=void 0,e.verticalButtonsContainer=void 0,e.mapButton=void 0,e.soundStatus=void 0,e.musicStatus=void 0,e.vibrateStatus=void 0,e.popupShowUpAnimation=void 0,e.popupExitAnimation=void 0,e.run=function(){var t=(0,jr.default)(e).player.getPlayerSettings(),n=t.music,i=t.sound,r=t.vibrate;e.updateSoundStatus(i),e.updateMusicStatus(n),il()&&e.updateVibrateStatus(r),e.setDisabledButton(!1),e.runPopupShowUpAnimation()},e.handleCloseScene=function(){e.runPopupExitAnimation((function(){return e.scene.switch(Rr.SceneKeys.GAME_SCENE)}))},e.handleSetSound=function(t){e.player.setSetting("sound",t),e.updateSoundStatus(t)},e.handleSetMusic=function(t){e.player.setSetting("music",t),t?e.audio.playMusic():e.audio.pauseMusic(),e.updateMusicStatus(t)},e.handleSetVibrate=function(t){e.player.setSetting("vibrate",t),e.updateVibrateStatus(t)},e.handleShare=function(){e.storage.dispatch(Ms())},e.handleOpenMap=function(){e.runPopupExitAnimation((function(){return e.scene.switch(Rr.SceneKeys.LEVEL_SCENE)}))},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){t.prototype.create.call(this),this.createBackground(yr.default.BACKGROUND.KEY),this.createPopup(),this.createRibbon(),this.createHorizontalButtons(),this.createVerticalButtons(),this.alignContainers(),this.createInputs()},n.createInputs=function(){var t=this;this.closeButton.onClick=this.handleCloseScene,this.soundButton.onClick=function(){return t.handleSetSound(t.soundStatus)},this.musicButton.onClick=function(){return t.handleSetMusic(t.musicStatus)},this.mapButton.onClick=this.handleOpenMap},n.createPopup=function(){this.popup=new ea(this,0,0,276,230)},n.createRibbon=function(){this.ribbonContainer=this.add.container();var t=this.make.image({key:jg,frame:qg.RIBBON_PAUSE});t.setWorldSize(276,63.5),Phaser.Display.Align.In.Center(t,this.ribbonContainer),this.closeButton=new jo.default(this,jg,qg.BUTTON_CLOSE,38.5,38.5),this.closeButton.setName("CloseButton"),Phaser.Display.Align.To.RightCenter(this.closeButton,t,-22,16),this.ribbonContainer.add([t,this.closeButton]),this.popup.add(this.ribbonContainer)},n.createHorizontalButtons=function(){var t=this,e=Zr.default.GAME_PLAY,n=e.KEY,i=e.FRAME;this.horizontalButtonsContainer=this.add.container(),this.soundButton=new jo.default(this,n,i.BUTTON_ORANGE_CIRCLE,48,49.5),this.soundButton.setName("SoundSettingButton"),this.soundBtnIcon=this.make.image({key:jg,frame:qg.ICON_SOUND_ON}),this.soundBtnIcon.setWorldSize(30.5,30.5),this.soundButton.add(this.soundBtnIcon);var r=this.make.bitmapText({font:qo.default.MIKADO.KEY,size:this.fontSize(18),text:"Sound"});r.setTint(10908968),this.soundButton.add(r),Phaser.Display.Align.To.BottomCenter(r,this.soundButton),this.horizontalButtonsContainer.add(this.soundButton),this.musicButton=new jo.default(this,n,i.BUTTON_ORANGE_CIRCLE,48,49.5),this.musicButton.setName("MusicSettingButton"),this.musicBtnIcon=this.make.image({key:jg,frame:qg.ICON_MUSIC_ON}),this.musicBtnIcon.setWorldSize(30.5,30.5),this.musicButton.add(this.musicBtnIcon);var a=this.make.bitmapText({font:qo.default.MIKADO.KEY,size:this.fontSize(18),text:"Music"});if(a.setTint(10908968),this.musicButton.add(a),Phaser.Display.Align.To.BottomCenter(a,this.musicButton),this.horizontalButtonsContainer.add(this.musicButton),il()){this.vibrateButton=new jo.default(this,n,i.BUTTON_ORANGE_CIRCLE,48,49.5),this.vibrateButton.setName("VibrateSettingButton"),this.vibrateButton.onClick=function(){return t.handleSetVibrate(t.vibrateStatus)},this.vibrateBtnIcon=this.make.image({key:jg,frame:qg.ICON_VIBRATE_ON}),this.vibrateBtnIcon.setWorldSize(30.5,30.5),this.vibrateButton.add(this.vibrateBtnIcon);var s=this.make.bitmapText({font:qo.default.MIKADO.KEY,size:this.fontSize(18),text:"Vibrate"});s.setTint(10908968),this.vibrateButton.add(s),Phaser.Display.Align.To.BottomCenter(s,this.vibrateButton),this.horizontalButtonsContainer.add(this.vibrateButton),Phaser.Display.Align.In.Center(this.soundButton,this.horizontalButtonsContainer,-80,0),Phaser.Display.Align.In.Center(this.musicButton,this.horizontalButtonsContainer),Phaser.Display.Align.In.Center(this.vibrateButton,this.horizontalButtonsContainer,80,0)}else Phaser.Display.Align.In.Center(this.soundButton,this.horizontalButtonsContainer,-37.5,0),Phaser.Display.Align.In.Center(this.musicButton,this.horizontalButtonsContainer,37.5);this.popup.add(this.horizontalButtonsContainer)},n.createVerticalButtons=function(){this.verticalButtonsContainer=this.add.container(),this.mapButton=new jo.default(this,jg,qg.BUTTON_GREEN,148,47.5),this.mapButton.setName("MapButton");var t=this.make.image({key:jg,frame:qg.ICON_MAP});t.setWorldSize(30.5,30.5);var e=this.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.fontSize(20),text:"Map"});this.mapButton.add([t,e]),Phaser.Display.Align.In.Center(t,this.mapButton,-30,0),Phaser.Display.Align.In.Center(e,this.mapButton,10,0),this.verticalButtonsContainer.add([this.mapButton]),Phaser.Display.Align.In.Center(this.mapButton,this.verticalButtonsContainer,0,0),this.popup.add(this.verticalButtonsContainer)},n.alignContainers=function(){Phaser.Display.Align.In.TopCenter(this.ribbonContainer,this.popup,0,0),Phaser.Display.Align.In.Center(this.horizontalButtonsContainer,this.popup,0,-50),Phaser.Display.Align.In.Center(this.verticalButtonsContainer,this.popup,0,50),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.updateSoundStatus=function(t){this.soundStatus=!t;var e=Zr.default.GAME_PLAY,n=e.KEY,i=e.FRAME;t?(this.soundButton.button.setTexture(n,i.BUTTON_ORANGE_CIRCLE),this.soundBtnIcon.setFrame(qg.ICON_SOUND_ON)):(this.soundButton.button.setTexture(jg,qg.BUTTON_GREY_CIRCLE),this.soundBtnIcon.setFrame(qg.ICON_SOUND_OFF))},n.updateMusicStatus=function(t){this.musicStatus=!t;var e=Zr.default.GAME_PLAY,n=e.KEY,i=e.FRAME;t?(this.musicButton.button.setTexture(n,i.BUTTON_ORANGE_CIRCLE),this.musicBtnIcon.setFrame(qg.ICON_MUSIC_ON)):(this.musicButton.button.setTexture(jg,qg.BUTTON_GREY_CIRCLE),this.musicBtnIcon.setFrame(qg.ICON_MUSIC_OFF))},n.updateVibrateStatus=function(t){this.vibrateStatus=!t;var e=Zr.default.GAME_PLAY,n=e.KEY,i=e.FRAME;t?(this.vibrateButton.button.setTexture(n,i.BUTTON_ORANGE_CIRCLE),this.vibrateBtnIcon.setFrame(qg.ICON_VIBRATE_ON)):(this.vibrateButton.button.setTexture(jg,qg.BUTTON_GREY_CIRCLE),this.vibrateBtnIcon.setFrame(qg.ICON_VIBRATE_OFF))},n.runPopupShowUpAnimation=function(){var t,e=this;null==(t=this.popupShowUpAnimation)||t.remove();var n=this.popup,i=n.x,r=n.y;this.popup.setAlpha(0).setPosition(i,r+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){e.popup.setAlpha(1).setPosition(i,r),e.setDisabledButton(!1)}})},n.runPopupExitAnimation=function(t){var e,n=this;this.setDisabledButton(!0),null==(e=this.popupExitAnimation)||e.remove();var i=this.popup,r=i.x,a=i.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:200,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.popup.setAlpha(0).setPosition(r,a),t&&t()}})},n.setDisabledButton=function(t){void 0===t&&(t=!0),this.closeButton.setDisabled(t),this.soundButton.setDisabled(t),this.musicButton.setDisabled(t),this.mapButton.setDisabled(t)},e}(Ko.default),Qg=Zg;!function(t){t.PASSED="passed",t.READY="ready",t.WAITING="waiting"}(yg||(yg={}));var Jg=Zr.default.DEFAULT,$g=Jg.KEY,tv=Jg.FRAME,ev=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).scene=void 0,i.levelBackground=void 0,i.tick=void 0,i.lock=void 0,i.overlay=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=e,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.init=function(){var t=this;this.createLevelBackground(),this.createText(),this.createOverlay(),this.createImageCheck(),this.createLock(),this.updateSize(),this.alignLevelItem(),this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){t.disableInteractive(),t.scene.audio.playSound(nl.default.BUTTON_CLICK),t.tweenClick?t.tweenClick.play():t.scene.handlePlay()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:$g,frame:tv.ICON_MAP_LOCK}),this.levelBackground.setWorldSize(57,64.5),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var t=this.levelBackground,e=t.width,n=t.height;this.setSize(e,n)},n.createImageCheck=function(){this.tick=this.scene.make.image({key:$g,frame:tv.ICON_CHECK}),this.tick.setWorldSize(33.5,30.5),this.tick.setVisible(!1),this.add(this.tick)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.scene.fontSize(25),text:""+this.level,origin:{x:.2,y:.5}}),this.add(this.levelNumber)},n.createLock=function(){this.lock=this.scene.make.image({key:$g,frame:tv.ICON_LOCK}),this.lock.setWorldSize(23,28),this.add(this.lock)},n.createOverlay=function(){this.overlay=this.scene.make.image({key:$g,frame:tv.ICON_MAP_INCOMPLETE}),this.overlay.setWorldSize(57,64.5),this.overlay.setTint(4473924),this.overlay.setAlpha(.4),this.overlay.setVisible(!1),this.add(this.overlay)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case yg.PASSED:this.levelBackground.setFrame(tv.ICON_MAP_INCOMPLETE),this.tick.setVisible(!0),this.overlay.setVisible(!0),this.lock.setVisible(!1);break;case yg.READY:this.setInteractive({useHandCursor:!0}),this.createTweenClick(),this.levelBackground.setFrame(tv.ICON_MAP_INCOMPLETE),this.tick.setVisible(!1),this.overlay.setVisible(!1),this.lock.setVisible(!1);break;case yg.WAITING:this.levelBackground.setFrame(tv.ICON_MAP_LOCK),this.tick.setVisible(!1),this.overlay.setVisible(!1),this.lock.setVisible(!0)}},n.updateInfo=function(t){this.payload=(0,O.default)({},t),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.createTweenClick=function(){var t=this,e=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:e,to:.9*e},onComplete:function(){t.scene.handlePlay()}})},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){var t=""+this.payload.level;this.levelNumber.setText(t),t.length>=4?this.levelNumber.setFontSize(this.scene.fontSize(22)):this.levelNumber.setFontSize(this.scene.fontSize(26)),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.lock,this.levelBackground,-23,-25),Phaser.Display.Align.In.Center(this.tick,this.levelBackground),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground)},n.setStatus=function(t){this.payload.status=t},n.setTextLevel=function(t){this.payload.level=t},e}(Phaser.GameObjects.Container),nv=Zr.default.DEFAULT,iv=nv.KEY,rv=nv.FRAME,av=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=e,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,jr.default)(i)),i}(0,j.default)(e,t);var n=e.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:iv,frame:rv.BLANK}),this.background.setWorldSize(325,85),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var t=this.background,e=t.width,n=t.height;this.setSize(e,n)},n.updateInfo=function(t){this.payload=(0,O.default)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},t),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new ev(this.scene,{level:1,status:yg.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-105,0),this.levelItem2=new ev(this.scene,{level:2,status:yg.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-35,0),this.levelItem3=new ev(this.scene,{level:3,status:yg.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,35,0),this.levelItem4=new ev(this.scene,{level:4,status:yg.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,105,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},e}(Phaser.GameObjects.Container),sv=function(t){function e(e){var n;return(n=t.call(this,e)||this).scene=void 0,n.scroller=void 0,n.scene=e,n.createReuseScroller(),n.scene.add.existing((0,jr.default)(n)),n}(0,j.default)(e,t);var n=e.prototype;return n.createReuseScroller=function(){this.scroller=new tp(this.scene,{classType:av,listConfigs:[],width:300,height:340,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5}),this.scroller.setVisible(!1),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(){var t=this.scene.player.getLevel();0===t&&(t=1);for(var e=[],n={levelItem1:{status:"",level:0}},i={levelItem1:{status:"",level:0}},r=1;r<=GameCore.Configs.Level.maxLevel;r++){var a="";a=r>t?yg.WAITING:r<t?yg.PASSED:yg.READY;var s="";switch(r%4){case 1:s="levelItem1";break;case 2:s="levelItem2";break;case 3:s="levelItem3";break;case 0:s="levelItem4"}n[s]={level:r,status:a},i[s]={level:r,status:a},r%4===0&&(e.push((0,O.default)({},n)),i={levelItem1:{status:"",level:0}})}GameCore.Configs.Level.maxLevel%4>0&&e.push((0,O.default)({},i)),this.scroller.updateConfig(e);var o=this.scroller.getChildren()[0].height;(this.scroller.value=-o*this.showDefaultLevel(t),t>GameCore.Configs.Level.maxLevel)&&this.scene.game.globalScene.screen.open(aa,{message:"UPDATING NEW LEVELS...",duration:3e3});this.showLeaders()},n.showDefaultLevel=function(t){var e=Math.ceil(t/4),n=Math.ceil(GameCore.Configs.Level.maxLevel/4);return n-e<3?n-4>0?n-4:0:e<3?0:e-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.resetScroller=function(){this.scroller.destroy(),this.createReuseScroller()},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var t=this.getLevelItems();if(!(t.length<1)){for(var e=t.length>8?8:t.length,n=0;n<e;n++){var i=t[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},e}(Phaser.GameObjects.Container),ov=sv,hv=Zr.default.DEFAULT,cv=hv.KEY,lv=hv.FRAME,uv=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).popup=void 0,e.mainScreen=void 0,e.closeButton=void 0,e.mapRibbon=void 0,e.popupShowUpAnimation=void 0,e.popupExitAnimation=void 0,e.run=function(){e.mainScreen.updateData(),e.setDisabledButton(!1),e.runOpenAnimation()},e.handleCloseBtnClick=function(){var t=e.player.getLevel();e.level.setLevel(t),e.runCloseAnimation(),e.setDisabledButton(!0)},e.handlePlaySingle=function(){e.storage.dispatch(Bo())},e.runCloseAnimation=function(){e.runPopupExitAnimation((function(){e.storage.dispatch(Bo())}))},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){t.prototype.create.call(this),this.createBackground(yr.default.BACKGROUND.KEY),this.createPopup(),this.createLevelScroller(),this.createCloseButton(),this.createMapRibbon(),this.popup.add([this.mainScreen,this.closeButton,this.mapRibbon]),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.createPopup=function(){this.popup=new ea(this,0,0,328,417)},n.createLevelScroller=function(){var t=this.world.getWorldSize(),e=t.width,n=t.height;this.mainScreen=new ov(this),this.mainScreen.setPosition(e/2,n/2),this.mainScreen.updateData(),this.mainScreen.scroller.setVisible(!0),Phaser.Display.Align.In.Center(this.mainScreen,this.popup,0,3)},n.createMapRibbon=function(){this.mapRibbon=this.make.image({key:cv,frame:lv.RIBBON_MAP}),this.mapRibbon.setWorldSize(276,63.5),Phaser.Display.Align.To.TopCenter(this.mapRibbon,this.popup,0,-24)},n.createCloseButton=function(){this.closeButton=new jo.default(this,cv,lv.BUTTON_CLOSE,38.5,38.5),this.closeButton.onClick=this.handleCloseBtnClick,Phaser.Display.Align.To.TopRight(this.closeButton,this.popup,12,-40)},n.runPopupEntrancesAnimation=function(t,e){var n,i=this;null==(n=this.popupShowUpAnimation)||n.remove();var r=this.popup,a=r.x,s=r.y;this.popup.setAlpha(0).setPosition(a,s+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:s+70,to:s,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){i.popup.setAlpha(1).setPosition(a,s),i.setDisabledButton(!1)}})},n.runPopupExitAnimation=function(t){var e,n=this;null==(e=this.popupExitAnimation)||e.remove();var i=this.popup,r=i.x,a=i.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:200,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.popup.setAlpha(0).setPosition(r,a),t&&t()}})},n.runOpenAnimation=function(){this.runPopupEntrancesAnimation(0,300)},n.handlePlay=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runCloseAnimation();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.setDisabledButton=function(t){void 0===t&&(t=!0),this.closeButton.setDisabled(t)},e}(Ko.default);var dv=uv,fv=Zr.default.DEFAULT,pv=fv.KEY,mv=fv.FRAME,gv=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).popup=void 0,e.ribbonContainer=void 0,e.textContent=void 0,e.horizontalButtonsContainer=void 0,e.popupShowUpAnimation=void 0,e.popupExitAnimation=void 0,e.run=function(){e.runPopupShowUpAnimation()},e}(0,j.default)(e,t);var n=e.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("create",this.run)},n.create=function(){t.prototype.create.call(this),this.createBackground(yr.default.BACKGROUND.KEY),this.createPopup(),this.createRibbon(),this.createTextContent(),this.alignContainers()},n.createTextContent=function(){var t=this.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.fontSize(20),text:"CONGRATULATION"});Phaser.Display.Align.In.Center(t,this.popup,0,-80),this.textContent=this.make.bitmapText({font:qo.default.PRIMARY.KEY,size:this.fontSize(20),text:"You have passed all levels.\nPlease come back later,\nwe will update soon!"}).setCenterAlign(),this.popup.add([this.textContent,t])},n.createPopup=function(){this.popup=new ea(this,0,0,276,300)},n.createRibbon=function(){this.ribbonContainer=this.add.container();var t=this.make.image({key:pv,frame:mv.RIBBON_COMPLETE});t.setWorldSize(276,175),Phaser.Display.Align.To.TopCenter(t,this.ribbonContainer,0,-40),this.ribbonContainer.add([t]),this.popup.add(this.ribbonContainer)},n.alignContainers=function(){Phaser.Display.Align.In.TopCenter(this.ribbonContainer,this.popup,0,0),Phaser.Display.Align.In.Center(this.textContent,this.popup),Phaser.Display.Align.In.Center(this.popup,this.gameZone)},n.runPopupShowUpAnimation=function(){var t,e=this;null==(t=this.popupShowUpAnimation)||t.remove();var n=this.popup,i=n.x,r=n.y;this.popup.setAlpha(0).setPosition(i,r+70),this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:300,props:{y:{from:r+70,to:r,ease:Phaser.Math.Easing.Back.Out,duration:500},alpha:{from:0,to:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:function(){e.popup.setAlpha(1).setPosition(i,r)}})},n.runPopupExitAnimation=function(t){var e,n=this;null==(e=this.popupExitAnimation)||e.remove();var i=this.popup,r=i.x,a=i.y;this.popupShowUpAnimation=this.tweens.add({targets:this.popup,duration:200,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:1,to:0}},onComplete:function(){n.popup.setAlpha(0).setPosition(r,a),t&&t()}})},e}(Ko.default),vv=gv,yv=["Enable"],xv=function(t){function e(e){return t.call(this,e)||this}(0,j.default)(e,t);var i=e.prototype;return i.boot=function(){var e=(0,K.default)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),e.next=6,this.addRollbarPlugin();case 6:return e.next=8,this.addDevPlugins();case 8:this.addScenes(),this.addDevScenes(),this.initAds(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initAdaptivePerformance(),this.handleShowAdWhenStartGame();case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.start=function(){t.prototype.start.call(this)},i.addExtraGameObjectMethods=function(){var t=new $(this);t.addKillRevive(),t.addDrawDebugBox(),t.addSetWorldSize(),t.addSetWorldSizeForContainer(),t.addGetWorldPosition(),t.addHighQuality()},i.addExtraFBInstantFunctions=function(){var t=new Q.default(this.facebook);this.facebook.shareAsync=t.shareAsync,this.facebook.inviteAsync=t.inviteAsync,this.facebook.switchAsync=t.switchAsync,this.facebook.chooseAsync=t.chooseAsync,this.facebook.createAsync=t.createAsync,this.facebook.sendMessage=t.sendMessage,this.facebook.getContextID=t.getContextID,this.facebook.getPlayerToken=t.getPlayerToken,this.facebook.matchPlayerAsync=t.matchPlayerAsync,this.facebook.getContextPlayers=t.getContextPlayers,this.facebook.setLoadingProgress=t.setLoadingProgress,this.facebook.attemptToAddShortcut=t.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=t.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=t.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=t.getRewardedVideoAsync,this.facebook.getInterstitialAdAsync=t.getInterstitialAdAsync,this.facebook.setLoadingProgress=t.setLoadingProgress,this.facebook.getLocale=t.getLocale,this.facebook.postSessionScoreAsync=t.postSessionScoreAsync,t.injectTournament(),this.facebook.progressLoading=new Wg(this)},i.addPlugins=function(){this.plugins.install("Storage",ir,!0,"storage"),this.plugins.install("AdsManager",dt,!0,"ads"),this.plugins.install("AuthManager",Lt,!0,"auth"),this.plugins.install("AudioManager",At,!0,"audio"),this.plugins.install("WorldManager",ur,!0,"world"),this.plugins.install("PlayerManager",Ke,!0,"player"),this.plugins.install("ProfileManager",en,!0,"profile"),this.plugins.install("AnalyticsManager",gt,!0,"analytics"),this.plugins.install("LanguageManager",Gg,!0,"lang"),this.plugins.install("AdaptivePerformance",Sg,!0,"performance"),this.plugins.install("LevelManager",Xg,!0,"level"),this.plugins.installScenePlugin("textStyler",cr,"textStyler"),this.plugins.installScenePlugin("ScreenManager",ln,"screen"),this.plugins.installScenePlugin("FrameCapture",Dt,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.lang=this.plugins.get("LanguageManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.level=this.plugins.get("LevelManager")},i.addRollbarPlugin=function(){var t=(0,K.default)(Z().mark((function t(){var e;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(GameCore.Configs.Rollbar.Enable){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Promise.all([n.e(662),n.e(367)]).then(n.bind(n,58));case 5:e=t.sent.default,this.plugins.install("Rollbar",e,!0,"rollbar"),this.rollbar=this.plugins.get("Rollbar");case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addDevPlugins=function(){var t=(0,K.default)(Z().mark((function t(){var e,i,r,a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(GameCore.Utils.Valid.isDebugger()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all([n.e(7),n.e(716)]).then(n.bind(n,59));case 4:return e=t.sent.default,t.next=7,Promise.all([n.e(498),n.e(739),n.e(227)]).then(n.bind(n,60));case 7:return i=t.sent.default,t.next=10,n.e(315).then(n.bind(n,61));case 10:return r=t.sent.default,t.next=13,Promise.all([n.e(498),n.e(516)]).then(n.bind(n,62));case 13:a=t.sent.default,this.plugins.install("Console",e,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",r,!0,"statistics"),this.plugins.install("ParticleEditor",a,!0,"particle-editor"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.particleEditor=this.plugins.get("ParticleEditor");case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Rr.SceneKeys.BOOT_SCENE,Kr,!0),this.scene.add(Rr.SceneKeys.LOAD_SCENE,sg,!1),this.scene.add(Rr.SceneKeys.GAME_SCENE,xf,!1),this.scene.add(Rr.SceneKeys.GAME_OVER_SCENE,tl,!1),this.scene.add(Rr.SceneKeys.DASHBOARD_SCENE,rh,!1),this.scene.add(Rr.SceneKeys.LEADERBOARD_SCENE,kp,!1),this.scene.add(Rr.SceneKeys.RESULT_MATCH_SCENE,xg,!1),this.scene.add(Rr.SceneKeys.PAUSE_SCENE,Qg,!1),this.scene.add(Rr.SceneKeys.LEVEL_SCENE,dv,!1),this.scene.add(Rr.SceneKeys.COMPLETE_ALL_LEVEL_SCENE,vv,!1),this.scene.add(Rr.SceneKeys.GLOBAL_SCENE,Df,!1)},i.addDevScenes=function(){var t=(0,K.default)(Z().mark((function t(){var e,i;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(GameCore.Utils.Valid.isDebugger()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,n.e(817).then(n.bind(n,63));case 4:return e=t.sent.default,t.next=7,n.e(826).then(n.bind(n,64));case 7:i=t.sent.default,this.scene.add(Rr.SceneKeys.TEST_SCENE,e,!1),this.scene.add(Rr.SceneKeys.ANIMATIONS_SCENE,i,!1);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initAds=function(){var t=GameCore.Configs.Ads;Tg.setGame(this);var e=t.Mockup.Enable?Bg:Tg,n=(0,O.default)({},t.InterstitialAdOptions);n.showWhenStartGame&&(n.secondsFirstTime=0),this.ads.configure(e,{enabled:t.Enabled,interstitialPID:t.InterstitialPlacementId,rewardedVideoPID:t.VideoRewardsPlacementId,interstitialAdOptions:n,bannerAdOptions:t.BannerAdOptions})},i.initWorld=function(){var t=GameCore.Configs.Game;this.world.configure({width:375,height:667,ratio:320/518}),this.world.resize(t.ForcePixelRatio)},i.initStorage=function(){var t=new kr(this);this.storage.setInitiator(t)},i.initLanguage=function(){var t=this.facebook.getLocale();this.lang.configure({locale:t,upperCaseText:!0})},i.initUtils=function(){this.handlePauseAudio(),this.removeUnusedPipelines()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.Debugger,e=t.ShowInspector,n=t.ShowMonitoring;(e||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initAdaptivePerformance=function(){var t=GameCore.Configs.Performance,e=t.Enable,n=(0,X.default)(t,yv);if(e){var i=this.world.getPixelRatio();this.performance.configure((0,O.default)({pixelRatio:i},n)),this.performance.active()}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&(this.rollbar.setup(),this.rollbar.sendException(new Error("test rollbar")))},i.handlePauseAudio=function(){var t=this;this.sound.pauseOnBlur=!1,document.addEventListener("visibilitychange",(function(){document.hidden?t.audio.pauseMusic():t.audio.playMusic()}))},i.removeUnusedPipelines=function(){var t=this.renderer;if(t instanceof Phaser.Renderer.WebGL.WebGLRenderer){var e=t.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE].forEach((function(t){var n;null==(n=e.get(t))||n.destroy(),e.remove(t)}))}},i.handleShowAdWhenStartGame=function(){var t=(0,K.default)(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,this.audio.stopMusic(),this.audio.muteAll(),t.next=8,this.ads.preloadInterstitialAdAsync();case 8:return t.next=10,this.ads.showInterstitialAdAsync();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),(0,H.sendException)(t.t0);case 15:return t.prev=15,this.audio.unmuteAll(),this.audio.playMusic(),t.finish(15);case 19:case"end":return t.stop()}}),t,this,[[3,12,15,19]])})));return function(){return t.apply(this,arguments)}}(),e}(Phaser.Game),bv=xv,Ev=GameCore.Configs.Debugger.ShowInspector,Av={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},audio:{noAudio:!1,disableWebAudio:!1},input:{gamepad:!1,keyboard:Ev,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,H.initSentry)();var wv=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(wv),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var t=new bv(Av);window.game=t}catch(e){(0,H.sendException)(e)}}())}),50)},function(){window.SpinePlugin=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=63)}([function(t,e){function n(t,e,n,i){for(var a in e)if(e.hasOwnProperty(a))if(s=e,o=a,s=(h=n)?s[o]:Object.getOwnPropertyDescriptor(s,o),!1!==(h=!(!(s=!h&&s.value&&"object"==typeof s.value?s.value:s)||!((o=s).get&&"function"==typeof o.get||o.set&&"function"==typeof o.set))&&(void 0===s.enumerable&&(s.enumerable=!0),void 0===s.configurable&&(s.configurable=!0),s))){if(o=(i||t).prototype,s=a,(o=Object.getOwnPropertyDescriptor(o,s))&&!1===(o=o.value&&"object"==typeof o.value?o.value:o).configurable){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=e[a];var s,o,h}function i(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)n(t,e[i].prototype||e[i])}}function r(t){var e,r,a;if((t=t||{}).initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");a=t.initialize,delete t.initialize}else a=t.Extends?(r=t.Extends,function(){r.apply(this,arguments)}):function(){};t.Extends?(a.prototype=Object.create(t.Extends.prototype),a.prototype.constructor=a,e=t.Extends,delete t.Extends):a.prototype.constructor=a;var s=null;return t.Mixins&&(s=t.Mixins,delete t.Mixins),i(a,s),n(a,t,!0,e),a}r.extend=n,r.mixin=i,r.ignoreFinals=!1,t.exports=r},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(0),r=n(32),a=new i({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new a(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return r(this.x,t.x,e)&&r(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x;t=t.y-this.y;return Math.sqrt(e*e+t*t)},distanceSq:function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,n=t*t+e*e;return 0<n&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){var n=this.x,i=this.y;return this.x=n+(e=void 0===e?0:e)*(t.x-n),this.y=i+e*(t.y-i),this},transformMat3:function(t){var e=this.x,n=this.y;t=t.val;return this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this},transformMat4:function(t){var e=this.x,n=this.y;t=t.val;return this.x=t[0]*e+t[4]*n+t[12],this.y=t[1]*e+t[5]*n+t[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&t<e&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e*this.x-t*this.y,t*this.x+e*this.y)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),t.exports=a},function(t,e){t.exports=function(t,e,n){return Math.max(e,Math.min(n,t))}},function(t,e){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=n},function(t,e){t.exports=function(t,e,n,i){if(t=t.length,e<0||t<e||n<=e||t<n||t<e+n){if(i)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e){t.exports=function(t,e,n){return e+((t-e)%(n-=e)+n)%n}},function(t,e){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e,n){var i=n(4);t.exports=function(t){return t>Math.PI&&(t-=i.PI2),Math.abs(((t+i.TAU)%i.PI2-i.PI2)%i.PI2)}},function(t,e,n){var i=n(4);t.exports=function(t){return t*i.RAD_TO_DEG}},function(t,e){t.exports=function(t,e,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1===e.indexOf("."))return n;for(var i=e.split("."),r=t,a=n,s=0;s<i.length;s++){if(!r.hasOwnProperty(i[s])){a=n;break}a=r[i[s]],r=r[i[s]]}return a}return n}},function(t,e){t.exports=function(t,e,n){var i=typeof t;return t&&"number"!=i&&"string"!=i&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:n}},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var n=t.length-1,i=t[e],r=e;r<n;r++)t[r]=t[r+1];return t.length=n,i}}},function(t,e,n){var i=n(0),r=n(26);n=new i({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=r.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=n},function(t,e,n){var i=new(n(0))({initialize:function(t,e,n){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new i(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=(t=t.z,e.x),a=e.y;e=e.z;return this.x=i*e-t*a,this.y=t*r-n*e,this.z=n*a-i*r,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=n||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y;t=t.z-this.z||0;return Math.sqrt(e*e+n*n+t*t)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n+(t=t.z-this.z||0)*t},length:function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},lengthSq:function(){var t=this.x,e=this.y,n=this.z;return t*t+e*e+n*n},normalize:function(){var t=this.x,e=this.y,n=this.z,i=t*t+e*e+n*n;return 0<i&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y;t=t.z;return this.x=n*t-i*a,this.y=i*r-e*t,this.z=e*a-n*r,this},lerp:function(t,e){var n=this.x,i=this.y,r=this.z;return this.x=n+(e=void 0===e?0:e)*(t.x-n),this.y=i+e*(t.y-i),this.z=r+e*(t.z-r),this},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z;t=t.val;return this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=1/((t=t.val)[3]*e+t[7]*n+t[11]*i+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*i+t[12])*r,this.y=(t[1]*e+t[5]*n+t[9]*i+t[13])*r,this.z=(t[2]*e+t[6]*n+t[10]*i+t[14])*r,this},transformMat3:function(t){var e=this.x,n=this.y,i=this.z;t=t.val;return this.x=e*t[0]+n*t[3]+i*t[6],this.y=e*t[1]+n*t[4]+i*t[7],this.z=e*t[2]+n*t[5]+i*t[8],this},transformMat4:function(t){var e=this.x,n=this.y,i=this.z;t=t.val;return this.x=t[0]*e+t[4]*n+t[8]*i+t[12],this.y=t[1]*e+t[5]*n+t[9]*i+t[13],this.z=t[2]*e+t[6]*n+t[10]*i+t[14],this},transformCoordinates:function(t){var e=this.x,n=this.y,i=this.z,r=e*(t=t.val)[0]+n*t[4]+i*t[8]+t[12],a=e*t[1]+n*t[5]+i*t[9]+t[13],s=e*t[2]+n*t[6]+i*t[10]+t[14];e=e*t[3]+n*t[7]+i*t[11]+t[15];return this.x=r/e,this.y=a/e,this.z=s/e,this},transformQuat:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z,o=(t=t.w)*e+a*i-s*n,h=t*n+s*e-r*i,c=t*i+r*n-a*e;e=-r*e-a*n-s*i;return this.x=o*t+e*-r+h*-s-c*-a,this.y=h*t+e*-a+c*-r-o*-s,this.z=c*t+e*-s+o*-a-h*-r,this},project:function(t){var e=this.x,n=this.y,i=this.z,r=(t=t.val)[0],a=t[1],s=t[2],o=t[3],h=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],m=t[11],g=t[12],v=t[13],y=t[14];o=1/(e*o+n*u+i*m+t[15]);return this.x=(e*r+n*h+i*d+g)*o,this.y=(e*a+n*c+i*f+v)*o,this.z=(e*s+n*l+i*p+y)*o,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var n=t.x,i=t.y,r=t.z,a=(t=t.w,n=this.x-n,i=t-this.y-1-i,this.z);return this.x=2*n/r-1,this.y=2*i/t-1,this.z=2*a-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});i.ZERO=new i,i.RIGHT=new i(1,0,0),i.LEFT=new i(-1,0,0),i.UP=new i(0,-1,0),i.DOWN=new i(0,1,0),i.FORWARD=new i(0,0,1),i.BACK=new i(0,0,-1),i.ONE=new i(1,1,1),t.exports=i},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,n){var i=n(24),r=n(57);t.exports=function(t,e){if(void 0===e&&(e=90),!i(t))return null;if(90===(e="string"!=typeof e?(e%360+360)%360:e)||-270===e||"rotateLeft"===e)(t=r(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=r(t);else if(180===Math.abs(e)||"rotate180"===e){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e,n){var i=n(4);t.exports=function(t){return t*i.DEG_TO_RAD}},function(t,e,n){var i=n(0),r=(n=n(14),new i({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},setValues:function(t,e,n,i,r,a,s,o,h,c,l,u,d,f,p,m){var g=this.val;return g[0]=t,g[1]=e,g[2]=n,g[3]=i,g[4]=r,g[5]=a,g[6]=s,g[7]=o,g[8]=h,g[9]=c,g[10]=l,g[11]=u,g[12]=d,g[13]=f,g[14]=p,g[15]=m,this},copy:function(t){return t=t.val,this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,n){n=a.fromQuat(n).val;var i=e.x,r=e.y;e=e.z;return this.setValues(n[0]*i,n[1]*i,n[2]*i,0,n[4]*r,n[5]*r,n[6]*r,0,n[8]*e,n[9]*e,n[10]*e,0,t.x,t.y,t.z,1)},xyz:function(t,e,n){this.identity();var i=this.val;return i[12]=t,i[13]=e,i[14]=n,this},scaling:function(t,e,n){this.zero();var i=this.val;return i[0]=t,i[5]=e,i[10]=n,i[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],n=t[2],i=t[3],r=t[6],a=t[7],s=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=r,t[11]=t[14],t[12]=i,t[13]=a,t[14]=s,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t,e=(t=this.val)[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],h=t[7],c=t[8],l=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=e*s-n*a,v=e*o-i*a,y=e*h-r*a,x=n*o-i*s,b=n*h-r*s,E=i*h-r*o,A=c*p-l*f,w=c*m-u*f,S=c*(t=t[15])-d*f,M=l*m-u*p,T=l*t-d*p,C=u*t-d*m,I=g*C-v*T+y*M+x*S-b*w+E*A;return I?this.setValues((s*C-o*T+h*M)*(I=1/I),(i*T-n*C-r*M)*I,(p*E-m*b+t*x)*I,(u*b-l*E-d*x)*I,(o*S-a*C-h*w)*I,(e*C-i*S+r*w)*I,(m*y-f*E-t*v)*I,(c*E-u*y+d*v)*I,(a*T-s*S+h*A)*I,(n*S-e*T-r*A)*I,(f*b-p*y+t*g)*I,(l*y-c*b-d*g)*I,(s*w-a*M-o*A)*I,(e*M-n*w+i*A)*I,(p*v-f*x-m*g)*I,(c*x-l*v+u*g)*I):this},adjoint:function(){var t=(m=this.val)[0],e=m[1],n=m[2],i=m[3],r=m[4],a=m[5],s=m[6],o=m[7],h=m[8],c=m[9],l=m[10],u=m[11],d=m[12],f=m[13],p=m[14],m=m[15];return this.setValues(a*(l*m-u*p)-c*(s*m-o*p)+f*(s*u-o*l),-(e*(l*m-u*p)-c*(n*m-i*p)+f*(n*u-i*l)),e*(s*m-o*p)-a*(n*m-i*p)+f*(n*o-i*s),-(e*(s*u-o*l)-a*(n*u-i*l)+c*(n*o-i*s)),-(r*(l*m-u*p)-h*(s*m-o*p)+d*(s*u-o*l)),t*(l*m-u*p)-h*(n*m-i*p)+d*(n*u-i*l),-(t*(s*m-o*p)-r*(n*m-i*p)+d*(n*o-i*s)),t*(s*u-o*l)-r*(n*u-i*l)+h*(n*o-i*s),r*(c*m-u*f)-h*(a*m-o*f)+d*(a*u-o*c),-(t*(c*m-u*f)-h*(e*m-i*f)+d*(e*u-i*c)),t*(a*m-o*f)-r*(e*m-i*f)+d*(e*o-i*a),-(t*(a*u-o*c)-r*(e*u-i*c)+h*(e*o-i*a)),-(r*(c*p-l*f)-h*(a*p-s*f)+d*(a*l-s*c)),t*(c*p-l*f)-h*(e*p-n*f)+d*(e*l-n*c),-(t*(a*p-s*f)-r*(e*p-n*f)+d*(e*s-n*a)),t*(a*l-s*c)-r*(e*l-n*c)+h*(e*s-n*a))},determinant:function(){var t,e=(t=this.val)[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],h=t[7],c=t[8],l=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14];return(e*s-n*a)*(u*(t=t[15])-d*m)-(e*o-i*a)*(l*t-d*p)+(e*h-r*a)*(l*m-u*p)+(n*o-i*s)*(c*t-d*f)-(n*h-r*s)*(c*m-u*f)+(i*h-r*o)*(c*p-l*f)},multiply:function(t){var e=this.val,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],h=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=(t=t.val)[0],x=t[1],b=t[2],E=t[3];return e[0]=y*n+x*s+b*l+E*p,e[1]=y*i+x*o+b*u+E*m,e[2]=y*r+x*h+b*d+E*g,e[3]=y*a+x*c+b*f+E*v,y=t[4],x=t[5],b=t[6],E=t[7],e[4]=y*n+x*s+b*l+E*p,e[5]=y*i+x*o+b*u+E*m,e[6]=y*r+x*h+b*d+E*g,e[7]=y*a+x*c+b*f+E*v,y=t[8],x=t[9],b=t[10],E=t[11],e[8]=y*n+x*s+b*l+E*p,e[9]=y*i+x*o+b*u+E*m,e[10]=y*r+x*h+b*d+E*g,e[11]=y*a+x*c+b*f+E*v,y=t[12],x=t[13],b=t[14],E=t[15],e[12]=y*n+x*s+b*l+E*p,e[13]=y*i+x*o+b*u+E*m,e[14]=y*r+x*h+b*d+E*g,e[15]=y*a+x*c+b*f+E*v,this},multiplyLocal:function(t){var e=this.val;t=t.val;return this.setValues(e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.val,e=e.val;var n=t[0],i=t[4],r=t[8],a=t[12],s=t[1],o=t[5],h=t[9],c=t[13],l=t[2],u=t[6],d=t[10],f=t[14],p=t[3],m=t[7],g=t[11],v=(t=t[15],e[0]),y=e[4],x=e[8],b=e[12],E=e[1],A=e[5],w=e[9],S=e[13],M=e[2],T=e[6],C=e[10],I=e[14],P=e[3],k=e[7],R=e[11];e=e[15];return this.setValues(n*v+i*E+r*M+a*P,s*v+o*E+h*M+c*P,l*v+u*E+d*M+f*P,p*v+m*E+g*M+t*P,n*y+i*A+r*T+a*k,s*y+o*A+h*T+c*k,l*y+u*A+d*T+f*k,p*y+m*A+g*T+t*k,n*x+i*w+r*C+a*R,s*x+o*w+h*C+c*R,l*x+u*w+d*C+f*R,p*x+m*w+g*C+t*R,n*b+i*S+r*I+a*e,s*b+o*S+h*I+c*e,l*b+u*S+d*I+f*e,p*b+m*S+g*I+t*e)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,n){var i=this.val;return i[12]=i[0]*t+i[4]*e+i[8]*n+i[12],i[13]=i[1]*t+i[5]*e+i[9]*n+i[13],i[14]=i[2]*t+i[6]*e+i[10]*n+i[14],i[15]=i[3]*t+i[7]*e+i[11]*n+i[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,n){var i=this.val;return i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*t,i[3]=i[3]*t,i[4]=i[4]*e,i[5]=i[5]*e,i[6]=i[6]*e,i[7]=i[7]*e,i[8]=i[8]*n,i[9]=i[9]*n,i[10]=i[10]*n,i[11]=i[11]*n,this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=(e=Math.sin(e),1-n),r=t.x,a=t.y,s=(t=t.z,i*r),o=i*a;return this.setValues(s*r+n,s*a-e*t,s*t+e*a,0,s*a+e*t,o*a+n,o*t-e*r,0,s*t-e*a,o*t+e*r,i*t*t+n,0,0,0,0,1)},rotate:function(t,e){var n=this.val,i=e.x,r=e.y,a=(e=e.z,Math.sqrt(i*i+r*r+e*e));if(Math.abs(a)<1e-6)return this;i*=a=1/a,r*=a,e*=a;a=Math.sin(t);var s=1-(t=Math.cos(t)),o=n[0],h=n[1],c=n[2],l=n[3],u=n[4],d=n[5],f=n[6],p=n[7],m=n[8],g=n[9],v=n[10],y=n[11],x=n[12],b=n[13],E=n[14],A=(n=n[15],i*i*s+t),w=r*i*s+e*a,S=e*i*s-r*a,M=i*r*s-e*a,T=r*r*s+t,C=e*r*s+i*a,I=i*e*s+r*a;r=r*e*s-i*a,i=e*e*s+t;return this.setValues(o*A+u*w+m*S,h*A+d*w+g*S,c*A+f*w+v*S,l*A+p*w+y*S,o*M+u*T+m*C,h*M+d*T+g*C,c*M+f*T+v*C,l*M+p*T+y*C,o*I+u*r+m*i,h*I+d*r+g*i,c*I+f*r+v*i,l*I+p*r+y*i,x,b,E,n)},rotateX:function(t){var e=this.val,n=Math.sin(t),i=(t=Math.cos(t),e[4]),r=e[5],a=e[6],s=e[7],o=e[8],h=e[9],c=e[10],l=e[11];return e[4]=i*t+o*n,e[5]=r*t+h*n,e[6]=a*t+c*n,e[7]=s*t+l*n,e[8]=o*t-i*n,e[9]=h*t-r*n,e[10]=c*t-a*n,e[11]=l*t-s*n,this},rotateY:function(t){var e=this.val,n=Math.sin(t),i=(t=Math.cos(t),e[0]),r=e[1],a=e[2],s=e[3],o=e[8],h=e[9],c=e[10],l=e[11];return e[0]=i*t-o*n,e[1]=r*t-h*n,e[2]=a*t-c*n,e[3]=s*t-l*n,e[8]=i*n+o*t,e[9]=r*n+h*t,e[10]=a*n+c*t,e[11]=s*n+l*t,this},rotateZ:function(t){var e=this.val,n=Math.sin(t),i=(t=Math.cos(t),e[0]),r=e[1],a=e[2],s=e[3],o=e[4],h=e[5],c=e[6],l=e[7];return e[0]=i*t+o*n,e[1]=r*t+h*n,e[2]=a*t+c*n,e[3]=s*t+l*n,e[4]=o*t-i*n,e[5]=h*t-r*n,e[6]=c*t-a*n,e[7]=l*t-s*n,this},fromRotationTranslation:function(t,e){var n=t.x,i=t.y,r=(h=t.z)+h,a=n*(c=n+n),s=n*(l=i+i),o=(n=n*r,i*l),h=(i=i*r,h*r),c=(t=t.w)*c,l=t*l;t*=r;return this.setValues(1-(o+h),s+t,n-l,0,s-t,1-(a+h),i+c,0,n+l,i-c,1-(a+o),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,n=t.y,i=(o=t.z)+o,r=e*(h=e+e),a=e*(c=n+n),s=(e=e*i,n*c),o=(n=n*i,o*i),h=(t=t.w)*h,c=t*c;t*=i;return this.setValues(1-(s+o),a+t,e-c,0,a-t,1-(r+o),n+h,0,e+c,n-h,1-(r+s),0,0,0,0,1)},frustum:function(t,e,n,i,r,a){var s=1/(e-t),o=1/(i-n),h=1/(r-a);return this.setValues(2*r*s,0,0,0,0,2*r*o,0,0,(e+t)*s,(i+n)*o,(a+r)*h,-1,0,0,a*r*2*h,0)},perspective:function(t,e,n,i){t=1/Math.tan(t/2);var r=1/(n-i);return this.setValues(t/e,0,0,0,0,t,0,0,0,0,(i+n)*r,-1,0,0,2*i*n*r,0)},perspectiveLH:function(t,e,n,i){return this.setValues(2*n/t,0,0,0,0,2*n/e,0,0,0,0,-i/(n-i),1,0,0,n*i/(n-i),0)},ortho:function(t,e,n,i,r,a){var s=0===(s=t-e)?s:1/s,o=0===(o=n-i)?o:1/o,h=0===(h=r-a)?h:1/h;return this.setValues(-2*s,0,0,0,0,-2*o,0,0,0,0,2*h,0,(t+e)*s,(i+n)*o,(a+r)*h,1)},lookAtRH:function(t,e,n){var i=this.val;return c.subVectors(t,e),0===c.getLengthSquared()&&(c.z=1),c.normalize(),o.crossVectors(n,c),0===o.getLengthSquared()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),o.crossVectors(n,c)),o.normalize(),h.crossVectors(c,o),i[0]=o.x,i[1]=o.y,i[2]=o.z,i[4]=h.x,i[5]=h.y,i[6]=h.z,i[8]=c.x,i[9]=c.y,i[10]=c.z,this},lookAt:function(t,e,n){var i=t.x,r=t.y,a=(t=t.z,n.x),s=n.y,o=(n=n.z,e.x),h=e.y;e=e.z;if(Math.abs(i-o)<1e-6&&Math.abs(r-h)<1e-6&&Math.abs(t-e)<1e-6)return this.identity();o=i-o,h=r-h,e=t-e;var c=1/Math.sqrt(o*o+h*h+e*e),l=s*(e*=c)-n*(h*=c),u=(n=n*(o*=c)-a*e,a=a*h-s*o,s=((c=Math.sqrt(l*l+n*n+a*a))?(l*=c=1/c,n*=c,a*=c):a=n=l=0,h*a-e*n),e*l-o*a),d=o*n-h*l;return(c=Math.sqrt(s*s+u*u+d*d))?(s*=c=1/c,u*=c,d*=c):d=u=s=0,this.setValues(l,s,o,0,n,u,h,0,a,d,e,0,-(l*i+n*r+a*t),-(s*i+u*r+d*t),-(o*i+h*r+e*t),1)},yawPitchRoll:function(t,e,n){this.zero(),a.zero(),s.zero();var i=this.val,r=a.val,o=s.val,h=Math.sin(n);n=Math.cos(n);return i[10]=1,i[15]=1,i[0]=n,i[1]=h,i[4]=-h,i[5]=n,h=Math.sin(e),n=Math.cos(e),r[0]=1,r[15]=1,r[5]=n,r[10]=n,r[9]=-h,r[6]=h,h=Math.sin(t),n=Math.cos(t),o[5]=1,o[15]=1,o[0]=n,o[2]=-h,o[8]=h,o[10]=n,this.multiplyLocal(a),this.multiplyLocal(s),this},setWorldMatrix:function(t,e,n,i,r){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(n.x,n.y,n.z),s.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(s),i&&this.multiplyLocal(i),r&&this.multiplyLocal(r),this},multiplyToMat4:function(t,e){var n=this.val,i=(t=t.val,n[0]),r=n[1],a=n[2],s=n[3],o=n[4],h=n[5],c=n[6],l=n[7],u=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=(n=n[15],t[0]),x=t[1],b=t[2],E=t[3],A=t[4],w=t[5],S=t[6],M=t[7],T=t[8],C=t[9],I=t[10],P=t[11],k=t[12],R=t[13],L=t[14];t=t[15];return e.setValues(y*i+x*o+b*u+E*m,x*r+x*h+b*d+E*g,b*a+x*c+b*f+E*v,E*s+x*l+b*p+E*n,A*i+w*o+S*u+M*m,A*r+w*h+S*d+M*g,A*a+w*c+S*f+M*v,A*s+w*l+S*p+M*n,T*i+C*o+I*u+P*m,T*r+C*h+I*d+P*g,T*a+C*c+I*f+P*v,T*s+C*l+I*p+P*n,k*i+R*o+L*u+t*m,k*r+R*h+L*d+t*g,k*a+R*c+L*f+t*v,k*s+R*l+L*p+t*n)},fromRotationXYTranslation:function(t,e,n){var i=e.x,r=e.y,a=(e=e.z,Math.sin(t.x)),s=Math.cos(t.x),o=Math.sin(t.y),h=i,c=r,l=e,u=0-(f=-a)*o,d=0-s*o,f=f*(t=Math.cos(t.y)),p=s*t;return n||(h=t*i+o*e,c=u*i+s*r+f*e,l=d*i+a*r+p*e),this.setValues(t,u,d,0,0,s,a,0,o,f,p,0,h,c,l,1)},getMaxScaleOnAxis:function(){var t=(n=this.val)[0]*n[0]+n[1]*n[1]+n[2]*n[2],e=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],n=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(t,e,n))}})),a=new r,s=new r,o=new n,h=new n,c=new n;t.exports=r},function(t,e,n){var i=n(0),r=n(15),a=n(205),s=n(11),o=n(216),h=n(45),c=n(217),l=n(46);n=new i({initialize:function(t,e){this.loader=t,this.cache=s(e,"cache",!1),this.type=s(e,"type",!1),this.key=s(e,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var i=s(e,"url");void 0===i?i=t.path+n+"."+s(e,"extension",""):"string"!=typeof i||i.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(i=t.path+i),this.url=i,this.src="",this.xhrSettings=l(s(e,"responseType",void 0)),s(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,s(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?r.FILE_POPULATED:r.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){(this.linkFile=t).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===r.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=r.FILE_LOADING,this.src=o(this,this.loader.baseURL),0===this.src.indexOf("data:")||(this.xhrLoader=c(this,this.loader.xhr)))},onLoad:function(t,e){var n=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status;e=!(e.target&&200!==e.target.status)||n;4===t.readyState&&400<=t.status&&t.status<=599&&(e=!1),this.state=r.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,e)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=r.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=r.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=r.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,n=this.type;this.loader.emit(a.FILE_COMPLETE,e,n,t),this.loader.emit(a.FILE_KEY_COMPLETE+n+"-"+e,e,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});n.createObjectURL=function(t,e,n){var i;"function"==typeof URL?t.src=URL.createObjectURL(e):((i=new FileReader).onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||n)+";base64,"+i.result.split(",")[1]},i.onerror=t.onerror,i.readAsDataURL(e))},n.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=n},function(t,e){var n={};t.exports={install:function(t){for(var e in n)t[e]=n[e]},register:function(t,e){n[t]=e},destroy:function(){n={}}}},function(t,e,n){var i=n(0),r=n(4),a=n(2);n=new i({initialize:function(t,e,n,i,r,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===a&&(a=0),this.matrix=new Float32Array([t,e,n,i,r,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=(i=this.matrix)[0],e=i[1],n=i[2],i=i[3];return t||e?0<e?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX):n||i?r.TAU-(0<i?Math.acos(-n/this.scaleY):-Math.acos(n/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var n=this.matrix;return n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5],this},scale:function(t,e){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=e,n[3]*=e,this},rotate:function(t){var e=Math.sin(t),n=(t=Math.cos(t),this.matrix),i=n[0],r=n[1],a=n[2],s=n[3];return n[0]=i*t+a*e,n[1]=r*t+s*e,n[2]=i*-e+a*t,n[3]=r*-e+s*t,this},multiply:function(t,e){var n=this.matrix,i=(t=t.matrix,n[0]),r=n[1],a=n[2],s=n[3],o=n[4],h=(n=n[5],t[0]),c=t[1],l=t[2],u=t[3],d=t[4];t=t[5];return(e=void 0===e?this:e).a=h*i+c*a,e.b=h*r+c*s,e.c=l*i+u*a,e.d=l*r+u*s,e.e=d*i+t*a+o,e.f=d*r+t*s+n,e},multiplyWithOffset:function(t,e,n){var i=this.matrix,r=(t=t.matrix,i[0]),a=i[1],s=i[2],o=i[3],h=e*r+n*s+i[4],c=(e=e*a+n*o+i[5],n=t[0],t[1]),l=t[2],u=t[3],d=t[4];t=t[5];return i[0]=n*r+c*s,i[1]=n*a+c*o,i[2]=l*r+u*s,i[3]=l*a+u*o,i[4]=d*r+t*s+h,i[5]=d*a+t*o+e,this},transform:function(t,e,n,i,r,a){var s=this.matrix,o=s[0],h=s[1],c=s[2],l=s[3],u=s[4],d=s[5];return s[0]=t*o+e*c,s[1]=t*h+e*l,s[2]=n*o+i*c,s[3]=n*h+i*l,s[4]=r*o+a*c+u,s[5]=r*h+a*l+d,this},transformPoint:function(t,e,n){var i=(h=this.matrix)[0],r=h[1],a=h[2],s=h[3],o=h[4],h=h[5];return(n=void 0===n?{x:0,y:0}:n).x=t*i+e*a+o,n.y=t*r+e*s+h,n},invert:function(){var t=this.matrix,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=e*r-n*i;return t[0]=r/o,t[1]=-n/o,t[2]=-i/o,t[3]=e/o,t[4]=(i*s-r*a)/o,t[5]=-(e*s-n*a)/o,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,n,i,r,a){var s=this.matrix;return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=r,s[5]=a,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,n=e[0],i=e[1],r=e[2],a=e[3],s=n*a-i*r;return t.translateX=e[4],t.translateY=e[5],n||i?(e=Math.sqrt(n*n+i*i),t.rotation=0<i?Math.acos(n/e):-Math.acos(n/e),t.scaleX=e,t.scaleY=s/e):r||a?(i=Math.sqrt(r*r+a*a),t.rotation=.5*Math.PI-(0<a?Math.acos(-r/i):-Math.acos(r/i)),t.scaleX=s/i,t.scaleY=i):(t.rotation=0,t.scaleX=0,t.scaleY=0),t},applyITRS:function(t,e,n,i,r){var a=this.matrix,s=Math.sin(n);n=Math.cos(n);return a[4]=t,a[5]=e,a[0]=n*i,a[1]=s*i,a[2]=-s*r,a[3]=n*r,this},applyInverse:function(t,e,n){void 0===n&&(n=new a);var i=(c=this.matrix)[0],r=c[1],s=c[2],o=c[3],h=c[4],c=c[5],l=1/(i*o+s*-r);return n.x=o*l*t+-s*l*e+(c*s-h*o)*l,n.y=i*l*e+-r*l*t+(-c*i+h*r)*l,n},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,n){return t=this.getX(t,e),n?Math.round(t):t},getYRound:function(t,e,n){return t=this.getY(t,e),n?Math.round(t):t},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=n},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,n=1;n<t.length;n++)if(t[n].length!==e)return!1;return!0}},function(t,e,n){var i=n(0),r=n(301),a=n(61),s=n(302),o=n(26),h=n(303),c=n(308);n=new i({initialize:function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.type=o.RECTANGLE,this.x=t,this.y=e,this.width=n,this.height=i},contains:function(t,e){return r(this,t,e)},getPoint:function(t,e){return a(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return c(this,t)},setTo:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return(t=void 0===t?new h:t).setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return(t=void 0===t?new h:t).setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return(t=void 0===t?new h:t).setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return(t=void 0===t?new h:t).setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=n},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e,n){var i=n(7);t.exports=function t(){var e,n,r,a,s,o=arguments[0]||{},h=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[1]||{},h=2),c===h&&(o=this,--h);h<c;h++)if(null!=(e=arguments[h]))for(n in e)s=o[n],o!==(r=e[n])&&(l&&r&&(i(r)||(a=Array.isArray(r)))?(s=a?(a=!1,s&&Array.isArray(s)?s:[]):s&&i(s)?s:{},o[n]=t(l,s,r)):void 0!==r&&(o[n]=r));return o}},function(t,e){t.exports=function(t,e,n,i){return Math.atan2(i-e,n-t)}},function(t,e){t.exports=function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI}},function(t,e,n){var i=n(6);t.exports=function(t){return i(t,-Math.PI,Math.PI)}},function(t,e,n){var i=n(6);t.exports=function(t){return i(t,-180,180)}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),Math.abs(t-e)<n}},function(t,e,n){var i=n(34);t.exports=function(t,e){return i(t)/i(e)/i(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,n,i,r){var a=t*t;return(2*n-2*i+(e=.5*(i-e))+(r=.5*(r-n)))*(t*a)+(-3*n+3*i-2*e-r)*a+e*t+n}},function(t,e){t.exports=function(t,e,n){return(e-t)*n+t}},function(t,e){t.exports=function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)}},function(t,e){t.exports=function(t,e,n){return(t=Math.max(0,Math.min(1,(t-e)/(n-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,n,i){var r=Math.cos(i),a=(i=Math.sin(i),t.x-e),s=t.y-n;return t.x=a*r-s*i+e,t.y=a*i+s*r+n,t}},function(t,e){t.exports=function(t){return 0<t?Math.ceil(t):Math.floor(t)}},function(t,e,n){var i=n(2);t.exports=function(t,e,n,r,a,s,o,h){void 0===h&&(h=new i);var c=Math.sin(a),l=(a=Math.cos(a))*s;s*=c,o=1/(l*(a=a*o)+(c=-c*o)*-s);return h.x=a*o*t+-c*o*e+(r*c-n*a)*o,h.y=l*o*e+-s*o*t+(-r*l+n*s)*o,h}},function(t,e,n){var i=new(n(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new i(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val;t=t.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},fromMat4:function(t){t=t.val;var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],n=t[2],i=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=n,t[7]=i,this},invert:function(){var t=this.val,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],h=t[7],c=t[8],l=c*a-s*h,u=-c*r+s*o,d=h*r-a*o,f=e*l+n*u+i*d;return f?(t[0]=l*(f=1/f),t[1]=(-c*n+i*h)*f,t[2]=(s*n-i*a)*f,t[3]=u*f,t[4]=(c*e-i*o)*f,t[5]=(-s*e+i*r)*f,t[6]=d*f,t[7]=(-h*e+n*o)*f,t[8]=(a*e-n*r)*f,this):null},adjoint:function(){var t=this.val,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],h=t[7],c=t[8];return t[0]=a*c-s*h,t[1]=i*h-n*c,t[2]=n*s-i*a,t[3]=s*o-r*c,t[4]=e*c-i*o,t[5]=i*r-e*s,t[6]=r*h-a*o,t[7]=n*o-e*h,t[8]=e*a-n*r,this},determinant:function(){var t,e=(t=this.val)[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],h=t[7];return e*((t=t[8])*a-s*h)+n*(-t*r+s*o)+i*(h*r-a*o)},multiply:function(t){var e=this.val,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],h=e[6],c=e[7],l=e[8],u=(t=t.val)[0],d=t[1],f=t[2],p=t[3],m=t[4],g=t[5],v=t[6],y=t[7];t=t[8];return e[0]=u*n+d*a+f*h,e[1]=u*i+d*s+f*c,e[2]=u*r+d*o+f*l,e[3]=p*n+m*a+g*h,e[4]=p*i+m*s+g*c,e[5]=p*r+m*o+g*l,e[6]=v*n+y*a+t*h,e[7]=v*i+y*s+t*c,e[8]=v*r+y*o+t*l,this},translate:function(t){var e=this.val,n=t.x;t=t.y;return e[6]=n*e[0]+t*e[3]+e[6],e[7]=n*e[1]+t*e[4]+e[7],e[8]=n*e[2]+t*e[5]+e[8],this},rotate:function(t){var e=this.val,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],h=Math.sin(t);t=Math.cos(t);return e[0]=t*n+h*a,e[1]=t*i+h*s,e[2]=t*r+h*o,e[3]=t*a-h*n,e[4]=t*s-h*i,e[5]=t*o-h*r,this},scale:function(t){var e=this.val,n=t.x;t=t.y;return e[0]=n*e[0],e[1]=n*e[1],e[2]=n*e[2],e[3]=t*e[3],e[4]=t*e[4],e[5]=t*e[5],this},fromQuat:function(t){var e,n=(r=t.x)*(h=r+r),i=r*(c=(s=t.y)+s),r=r*(e=(o=t.z)+o),a=s*c,s=s*e,o=o*e,h=(t=t.w)*h,c=t*c;t*=e;return(e=this.val)[0]=1-(a+o),e[3]=i+t,e[6]=r-c,e[1]=i-t,e[4]=1-(n+o),e[7]=s+h,e[2]=r+c,e[5]=s-h,e[8]=1-(n+a),this},normalFromMat4:function(t){t=t.val;var e=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],h=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=n*o-i*s,y=n*h-r*s,x=n*c-a*s,b=i*h-r*o,E=i*c-a*o,A=r*c-a*h,w=l*m-u*p,S=l*g-d*p,M=u*g-d*m;return(f=v*(d=d*(t=t[15])-f*g)-y*(u=u*t-f*m)+x*M+b*(l=l*t-f*p)-E*S+A*w)?(e[0]=(o*d-h*u+c*M)*(f=1/f),e[1]=(h*l-s*d-c*S)*f,e[2]=(s*u-o*l+c*w)*f,e[3]=(r*u-i*d-a*M)*f,e[4]=(n*d-r*l+a*S)*f,e[5]=(i*l-n*u-a*w)*f,e[6]=(m*A-g*E+t*b)*f,e[7]=(g*x-p*A-t*y)*f,e[8]=(p*E-m*x+t*v)*f,this):null}});t.exports=i},function(t,e,n){var i=n(0),r=n(42),a=n(1),s=(n=n(14),new Int8Array([1,2,0])),o=new Float32Array([0,0,0]),h=new n(1,0,0),c=new n(0,1,0),l=new n,u=new r;n=new i({initialize:function(t,e,n,i){this.onChangeCallback=a,this.set(t,e,n,i)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,n,i,r){return void 0===r&&(r=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=n||0,this._w=i||0),r&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,n=this.z,i=this.w;return Math.sqrt(t*t+e*e+n*n+i*i)},lengthSq:function(){var t=this.x,e=this.y,n=this.z,i=this.w;return t*t+e*e+n*n+i*i},normalize:function(){var t=this.x,e=this.y,n=this.z,i=this.w,r=t*t+e*e+n*n+i*i;return 0<r&&(r=1/Math.sqrt(r),this._x=t*r,this._y=e*r,this._z=n*r,this._w=i*r),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){var n=this.x,i=this.y,r=this.z,a=this.w;return this.set(n+(e=void 0===e?0:e)*(t.x-n),i+e*(t.y-i),r+e*(t.z-r),a+e*(t.w-a))},rotationTo:function(t,e){var n=t.x*e.x+t.y*e.y+t.z*e.z;return n<-.999999?(l.copy(h).cross(t).length()<1e-6&&l.copy(c).cross(t),l.normalize(),this.setAxisAngle(l,Math.PI)):.999999<n?this.set(0,0,0,1):(l.copy(t).cross(e),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+n,this.normalize())},setAxes:function(t,e,n){var i=u.val;return i[0]=e.x,i[3]=e.y,i[6]=e.z,i[1]=n.x,i[4]=n.y,i[7]=n.z,i[2]=-t.x,i[5]=-t.y,i[8]=-t.z,this.fromMat3(u).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var n=Math.sin(e);return this.set(n*t.x,n*t.y,n*t.z,Math.cos(e))},multiply:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.x,s=t.y,o=t.z;t=t.w;return this.set(e*t+r*a+n*o-i*s,n*t+r*s+i*a-e*o,i*t+r*o+e*s-n*a,r*t-e*a-n*s-i*o)},slerp:function(t,e){var n,i=this.x,r=this.y,a=this.z,s=this.w,o=t.x,h=t.y,c=t.z,l=i*o+r*h+a*c+s*(t=t.w),u=(l<0&&(l=-l,o=-o,h=-h,c=-c,t=-t),1-e),d=e;return 1e-6<1-l&&(l=Math.acos(l),n=Math.sin(l),u=Math.sin((1-e)*l)/n,d=Math.sin(e*l)/n),this.set(u*i+d*o,u*r+d*h,u*a+d*c,u*s+d*t)},invert:function(){var t=this.x,e=this.y,n=this.z,i=this.w,r=(r=t*t+e*e+n*n+i*i)?1/r:0;return this.set(-t*r,-e*r,-n*r,i*r)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,n=this.y,i=this.z,r=this.w,a=Math.sin(t);t=Math.cos(t);return this.set(e*t+r*a,n*t+i*a,i*t-n*a,r*t-e*a)},rotateY:function(t){t*=.5;var e=this.x,n=this.y,i=this.z,r=this.w,a=Math.sin(t);t=Math.cos(t);return this.set(e*t-i*a,n*t+r*a,i*t+e*a,r*t-n*a)},rotateZ:function(t){t*=.5;var e=this.x,n=this.y,i=this.z,r=this.w,a=Math.sin(t);t=Math.cos(t);return this.set(e*t+n*a,n*t-e*a,i*t+r*a,r*t-i*a)},calculateW:function(){var t=this.x,e=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-e*e-n*n),this},setFromEuler:function(t,e){var n=t.x/2,i=t.y/2,r=t.z/2,a=Math.cos(n),s=Math.cos(i),o=Math.cos(r),h=Math.sin(n),c=Math.sin(i),l=Math.sin(r);switch(t.order){case"XYZ":this.set(h*s*o+a*c*l,a*c*o-h*s*l,a*s*l+h*c*o,a*s*o-h*c*l,e);break;case"YXZ":this.set(h*s*o+a*c*l,a*c*o-h*s*l,a*s*l-h*c*o,a*s*o+h*c*l,e);break;case"ZXY":this.set(h*s*o-a*c*l,a*c*o+h*s*l,a*s*l+h*c*o,a*s*o-h*c*l,e);break;case"ZYX":this.set(h*s*o-a*c*l,a*c*o+h*s*l,a*s*l-h*c*o,a*s*o+h*c*l,e);break;case"YZX":this.set(h*s*o+a*c*l,a*c*o+h*s*l,a*s*l-h*c*o,a*s*o-h*c*l,e);break;case"XZY":this.set(h*s*o-a*c*l,a*c*o-h*s*l,a*s*l+h*c*o,a*s*o+h*c*l,e)}return this},setFromRotationMatrix:function(t){var e,n=(t=t.val)[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],h=t[2],c=t[6],l=n+s+(t=t[10]);return 0<l?(e=.5/Math.sqrt(l+1),this.set((c-o)*e,(r-h)*e,(a-i)*e,.25/e)):s<n&&t<n?(e=2*Math.sqrt(1+n-s-t),this.set(.25*e,(i+a)/e,(r+h)/e,(c-o)/e)):t<s?(e=2*Math.sqrt(1+s-n-t),this.set((i+a)/e,.25*e,(o+c)/e,(r-h)/e)):(e=2*Math.sqrt(1+t-n-s),this.set((r+h)/e,(o+c)/e,.25*e,(a-i)/e)),this},fromMat3:function(t){var e,n,i,r=(t=t.val)[0]+t[4]+t[8];return 0<r?(i=Math.sqrt(r+1),this.w=.5*i,this._x=(t[7]-t[5])*(i=.5/i),this._y=(t[2]-t[6])*i,this._z=(t[3]-t[1])*i):(t[4]>t[r=0]&&(r=1),t[8]>t[3*r+r]&&(r=2),e=s[r],n=s[e],i=Math.sqrt(t[3*r+r]-t[3*e+e]-t[3*n+n]+1),o[r]=.5*i,o[e]=(t[3*e+r]+t[3*r+e])*(i=.5/i),o[n]=(t[3*n+r]+t[3*r+n])*i,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(t[3*n+e]-t[3*e+n])*i),this.onChangeCallback(this),this}});t.exports=n},function(t,e,n){t.exports={ADDED_TO_SCENE:n(180),BOOT:n(181),CREATE:n(182),DESTROY:n(183),PAUSE:n(184),POST_UPDATE:n(185),PRE_RENDER:n(186),PRE_UPDATE:n(187),READY:n(188),REMOVED_FROM_SCENE:n(189),RENDER:n(190),RESUME:n(191),SHUTDOWN:n(192),SLEEP:n(193),START:n(194),TRANSITION_COMPLETE:n(195),TRANSITION_INIT:n(196),TRANSITION_OUT:n(197),TRANSITION_START:n(198),TRANSITION_WAKE:n(199),UPDATE:n(200),WAKE:n(201)}},function(t,e,n){var i=n(27),r=n(46);t.exports=function(t,e){var n=void 0===t?r():i({},t);if(e)for(var a in e)void 0!==e[a]&&(n[a]=e[a]);return n}},function(t,e){t.exports=function(t,e,n,i,r,a){return{responseType:t=void 0===t?"":t,async:e=void 0===e||e,user:n=void 0===n?"":n,password:i=void 0===i?"":i,timeout:r=void 0===r?0:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a=void 0!==a&&a}}},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return this.depth=t=void 0===t?0:t,this}}},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},function(t,e,n){var i=n(4),r=n(23),a=n(41),s=n(30),o=n(31),h=n(2);t.exports={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){0===(this._scaleX=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return o(this._rotation*i.RAD_TO_DEG)},set:function(t){this.rotation=o(t)*i.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=s(t)}},setPosition:function(t,e,n,i){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=n,this.w=i,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),this.x=(t=void 0===t?0:t)+Math.random()*n,this.y=e+Math.random()*i,this},setRotation:function(t){return this.rotation=t=void 0===t?0:t,this},setAngle:function(t){return this.angle=t=void 0===t?0:t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return this.x=t=void 0===t?0:t,this},setY:function(t){return this.y=t=void 0===t?0:t,this},setZ:function(t){return this.z=t=void 0===t?0:t,this},setW:function(t){return this.w=t=void 0===t?0:t,this},getLocalTransformMatrix:function(t){return(t=void 0===t?new r:t).applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new r),void 0===e&&(e=new r);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)e.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),e.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,e,n,i){n=n||new h;var r=(i=i||this.scene.sys.cameras.main).scrollX;i=i.scrollY,t=t+r*this.scrollFactorX-r,r=e+i*this.scrollFactorY-i;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(t,r,n):a(t,r,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}}},function(t,e){t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},function(t,e,n){var i=n(0),r=n(54),a=n(222),s=n(229),o=n(55),h=n(44),c=new i({Extends:s,initialize:function(t,e){s.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,e){return this.data||(this.data=new a(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new a(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(t,e,n){return this.scene.sys.input.enable(this,t,e,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(t){return!(c.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,n=[];e&&(n.unshift(e.getIndex(t)),(t=e).parentContainer);)e=e.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||((this.displayList=t).add(this,!0),t.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});c.RENDER_MASK=15,t.exports=c},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,n){t.exports={ADDED_TO_SCENE:n(230),DESTROY:n(231),REMOVED_FROM_SCENE:n(232),VIDEO_COMPLETE:n(233),VIDEO_CREATED:n(234),VIDEO_ERROR:n(235),VIDEO_LOOP:n(236),VIDEO_PLAY:n(237),VIDEO_SEEKED:n(238),VIDEO_SEEKING:n(239),VIDEO_STOP:n(240),VIDEO_TIMEOUT:n(241),VIDEO_UNLOCKED:n(242)}},function(t,e,n){var i=new(n=n(23)),r=new n,a=new n,s={camera:i,sprite:r,calc:a};t.exports=function(t,e,n){var o=i,h=r,c=a;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(e.matrix),n?(o.multiplyWithOffset(n,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),o.multiply(h,c),s}},function(t,e){t.exports=function(t){for(var e=t.length,n=t[0].length,i=new Array(n),r=0;r<n;r++){i[r]=new Array(e);for(var a=e-1;-1<a;a--)i[r][a]=t[a][r]}return i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var n=null,i=0;i<e;i++)n=t.shift(),t.push(n);return n}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var n=null,i=0;i<e;i++)n=t.pop(),t.unshift(n);return n}},function(t,e){t.exports=function(t){for(var e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}return t}},function(t,e,n){var i=n(62),r=n(13);t.exports=function(t,e,n){if(void 0===n&&(n=new r),e<=0||1<=e)return n.x=t.x,n.y=t.y,n;var a=i(t)*e;return.5<e?(a-=t.width+t.height)<=t.width?(n.x=t.right-a,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(a-t.width)):a<=t.width?(n.x=t.x+a,n.y=t.y):(n.x=t.right,n.y=t.y+(a-t.width)),n}},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e,n){var i,r=n(64),a=n(0),s=n(10),o=n(177),h=n(178),c=n(202),l=n(203),u=n(221),d=n(254),f=n(1);n=new a({Extends:h,initialize:function(t,e,n){h.call(this,t,e,n);var i=e.game;this.isWebGL=2===i.config.renderType,this.cache=i.cache.addCustom("spine"),this.spineTextures=i.cache.addCustom("spineTextures"),this.json=i.cache.json,this.textures=i.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=c,this.temp1,this.temp2,this.isWebGL?(this.runtime=c.webgl,this.renderer=i.renderer,this.gl=i.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=c.canvas,this.renderer=i.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:i.scale.width,height:i.scale.height,preRender:f,postRender:f,render:f,destroy:f}),e.registerFileType("spine",this.spineFileCallback,t),e.registerGameObject("spine",(function(t,e,i,r,a){var s=this.scene.sys[n];s=new u(this.scene,s,t,e,i,r,a);return this.displayList.add(s),this.updateList.add(s),s}),(function(t,e){var i=s(t=void 0===t?{}:t,"key",null),a=s(t,"animationName",null),o=s(t,"loop",!1),h=this.scene.sys[n];h=new u(this.scene,h,0,0,i,a,o),(i=(void 0!==e&&(t.add=e),r(this.scene,h,t),s(t,"skinName",!1)))&&h.setSkinByName(i),a=s(t,"slotName",!1),o=s(t,"attachmentName",null);return a&&h.setAttachment(a,o),h.refresh()})),e.registerGameObject("spineContainer",(function(t,e,i){var r=this.scene.sys[n];r=new d(this.scene,r,t,e,i);return this.displayList.add(r),r}),(function(t,e){var i=s(t=void 0===t?{}:t,"x",0),a=s(t,"y",0),o=s(t,"children",null),h=this.scene.sys[n];h=new d(this.scene,h,i,a,o);return void 0!==e&&(t.add=e),r(this.scene,h,t),h}))},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(o,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new c.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){function t(t,e){var n;t===this.srcBlend&&e===this.dstBlend||(n=this.context.gl,this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend)))}i||((i=new c.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=t,i.shapes.setBlendMode=t),this.sceneRenderer=i,this.skeletonRenderer=i.skeletonRenderer,this.skeletonDebugRenderer=i.skeletonDebugRenderer,this.temp1=new c.webgl.Vector3(0,0,0),this.temp2=new c.webgl.Vector3(0,0,0)},getAtlasCanvas:function(t){var e,n,i=this.cache.get(t);if(i)return(e=this.spineTextures).has(t)?e.get(t):(n=this.textures,new c.TextureAtlas(i.data,(function(t){return new c.canvas.CanvasTexture(n.get(i.prefix+t).getSourceImage())})))},getAtlasWebGL:function(t){var e,n,i,r=this.cache.get(t);if(r)return(i=this.spineTextures).has(t)?i.get(t):(e=this.textures,(n=this.sceneRenderer.context.gl).pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),new c.TextureAtlas(r.data,(function(t){return new c.webgl.GLTexture(n,e.get(r.prefix+t).getSourceImage(),!1)})))},spineFileCallback:function(t,e,n,i,r,a){var s;if(Array.isArray(t))for(var o=0;o<t.length;o++)s=new l(this,t[o]),this.addFile(s.files);else s=new l(this,t,e,n,i,r,a),this.addFile(s.files);return this},worldToLocal:function(t,e,n,i){var r=this.temp1,a=this.temp2,s=this.sceneRenderer.camera;r.set(t+n.x,e-n.y,0),t=s.viewportWidth,e=s.viewportHeight;return s.screenToWorld(r,t,e),i&&null!==i.parent?(i.parent.worldToLocal(a.set(r.x-n.x,r.y-n.y,0)),new c.Vector2(a.x,a.y)):i?new c.Vector2(r.x-n.x,r.y-n.y):new c.Vector2(r.x,r.y)},getVector2:function(t,e){return new c.Vector2(t,e)},getVector3:function(t,e,n){return new c.webgl.Vector3(t,e,n)},setDebugBones:function(t){return this.skeletonDebugRenderer.drawBones=t=void 0===t||t,this},setDebugRegionAttachments:function(t){return this.skeletonDebugRenderer.drawRegionAttachments=t=void 0===t||t,this},setDebugBoundingBoxes:function(t){return this.skeletonDebugRenderer.drawBoundingBoxes=t=void 0===t||t,this},setDebugMeshHull:function(t){return this.skeletonDebugRenderer.drawMeshHull=t=void 0===t||t,this},setDebugMeshTriangles:function(t){return this.skeletonDebugRenderer.drawMeshTriangles=t=void 0===t||t,this},setDebugPaths:function(t){return this.skeletonDebugRenderer.drawPaths=t=void 0===t||t,this},setDebugSkeletonXY:function(t){return this.skeletonDebugRenderer.drawSkeletonXY=t=void 0===t||t,this},setDebugClipping:function(t){return this.skeletonDebugRenderer.drawClipping=t=void 0===t||t,this},setEffect:function(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function(t,e){var n=t,i=t,r=-1!==t.indexOf("."),a=(t=(r&&(n=(t=t.split(".")).shift(),i=t.join(".")),this.cache.get(n)),this.getAtlas(n));return a?(this.spineTextures.has(n)||this.spineTextures.add(n,a),t=t.preMultipliedAlpha,a=new c.AtlasAttachmentLoader(a),a=new c.SkeletonJson(a),(n=e||(e=this.json.get(n),r?s(e,i):e))?{skeletonData:r=a.readSkeletonData(n),skeleton:new c.Skeleton(r),preMultipliedAlpha:t}:null):null},createAnimationState:function(t){return{stateData:t=new c.AnimationStateData(t.data),state:new c.AnimationState(t)}},getBounds:function(t){var e=new c.Vector2,n=new c.Vector2;return t.getBounds(e,n,[]),{offset:e,size:n}},onResize:function(){var t=this.renderer,e=this.sceneRenderer,n=t.width;t=t.height;e.camera.position.x=n/2,e.camera.position.y=t/2,e.camera.setViewport(n,t)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(o,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,i&&(i.dispose(),i=null),this.sceneRenderer=null}});n.SpineGameObject=u,n.SpineContainer=d,t.exports=n},function(t,e,n){var i=n(17),r=n(65);t.exports=function(t,e,n){var a,s;return e.x=r(n,"x",0),e.y=r(n,"y",0),e.depth=r(n,"depth",0),e.flipX=r(n,"flipX",!1),e.flipY=r(n,"flipY",!1),"number"==typeof(s=(null!==(s=("number"==typeof(s=("number"==typeof(s=r(n,"scale",null))?e.setScale(s):null!==s&&(e.scaleX=r(s,"x",1),e.scaleY=r(s,"y",1)),r(n,"scrollFactor",null)))?e.setScrollFactor(s):null!==s&&(e.scrollFactorX=r(s,"x",1),e.scrollFactorY=r(s,"y",1)),e.rotation=r(n,"rotation",0),r(n,"angle",null)))&&(e.angle=s),e.alpha=r(n,"alpha",1),r(n,"origin",null)))?e.setOrigin(s):null!==s&&(a=r(s,"x",.5),s=r(s,"y",.5),e.setOrigin(a,s)),e.blendMode=r(n,"blendMode",i.NORMAL),e.visible=r(n,"visible",!0),r(n,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e,n){var i=n(66),r=n(10);t.exports=function(t,e,n){if(null===(t=r(t,e,null)))return n;if(Array.isArray(t))return i.RND.pick(t);if("object"==typeof t){if(t.hasOwnProperty("randInt"))return i.RND.integerInRange(t.randInt[0],t.randInt[1]);if(t.hasOwnProperty("randFloat"))return i.RND.realInRange(t.randFloat[0],t.randFloat[1])}else if("function"==typeof t)return t(e);return t}},function(t,e,n){var i=n(4);n=n(27)(!1,{Angle:n(67),Distance:n(76),Easing:n(84),Fuzzy:n(129),Interpolation:n(134),Pow2:n(142),Snap:n(146),RandomDataGenerator:n(150),Average:n(151),Bernstein:n(33),Between:n(152),CatmullRom:n(35),CeilTo:n(153),Clamp:n(3),DegToRad:n(19),Difference:n(154),Euler:n(155),Factorial:n(34),FloatBetween:n(18),FloorTo:n(156),FromPercent:n(157),GetSpeed:n(158),IsEven:n(159),IsEvenStrict:n(160),Linear:n(36),MaxAdd:n(161),Median:n(162),MinSub:n(163),Percent:n(164),RadToDeg:n(9),RandomXY:n(165),RandomXYZ:n(166),RandomXYZW:n(167),Rotate:n(168),RotateAround:n(39),RotateAroundDistance:n(169),RotateTo:n(170),RoundAwayFromZero:n(40),RoundTo:n(171),SinCosTableGenerator:n(172),SmootherStep:n(38),SmoothStep:n(37),ToXY:n(173),TransformXY:n(41),Within:n(174),Wrap:n(6),Vector2:n(2),Vector3:n(14),Vector4:n(175),Matrix3:n(42),Matrix4:n(20),Quaternion:n(43),RotateVec3:n(176)},i);t.exports=n},function(t,e,n){t.exports={Between:n(28),BetweenPoints:n(68),BetweenPointsY:n(69),BetweenY:n(70),CounterClockwise:n(8),Normalize:n(29),Random:n(71),RandomDegrees:n(72),Reverse:n(73),RotateTo:n(74),ShortestBetween:n(75),Wrap:n(30),WrapDegrees:n(31)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,n,i){return Math.atan2(n-t,i-e)}},function(t,e,n){var i=n(18);t.exports=function(){return i(-Math.PI,Math.PI)}},function(t,e,n){var i=n(18);t.exports=function(){return i(-180,180)}},function(t,e,n){var i=n(29);t.exports=function(t){return i(t+Math.PI)}},function(t,e,n){var i=n(4);t.exports=function(t,e,n){return void 0===n&&(n=.05),t!==e&&(Math.abs(e-t)<=n||Math.abs(e-t)>=i.PI2-n?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=i.PI2:e-=i.PI2),t<e?t+=n:e<t&&(t-=n))),t}},function(t,e){t.exports=function(t,e){return 0==(e-=t)?0:e-360*Math.floor((e+180)/360)}},function(t,e,n){t.exports={Between:n(77),BetweenPoints:n(78),BetweenPointsSquared:n(79),Chebyshev:n(80),Power:n(81),Snake:n(82),Squared:n(83)}},function(t,e){t.exports=function(t,e,n,i){return t-=n,n=e-i,Math.sqrt(t*t+n*n)}},function(t,e){t.exports=function(t,e){var n=t.x-e.x;t=t.y-e.y;return Math.sqrt(n*n+t*t)}},function(t,e){t.exports=function(t,e){var n=t.x-e.x;return n*n+(t=t.y-e.y)*t}},function(t,e){t.exports=function(t,e,n,i){return Math.max(Math.abs(t-n),Math.abs(e-i))}},function(t,e){t.exports=function(t,e,n,i,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(n-t,r)+Math.pow(i-e,r))}},function(t,e){t.exports=function(t,e,n,i){return Math.abs(t-n)+Math.abs(e-i)}},function(t,e){t.exports=function(t,e,n,i){return(t-=n)*t+(n=e-i)*n}},function(t,e,n){t.exports={Back:n(85),Bounce:n(89),Circular:n(93),Cubic:n(97),Elastic:n(101),Expo:n(105),Linear:n(109),Quadratic:n(111),Quartic:n(115),Quintic:n(119),Sine:n(123),Stepped:n(127)}},function(t,e,n){t.exports={In:n(86),Out:n(87),InOut:n(88)}},function(t,e){t.exports=function(t,e){return t*t*(((e=void 0===e?1.70158:e)+1)*t-e)}},function(t,e){t.exports=function(t,e){return--t*t*(((e=void 0===e?1.70158:e)+1)*t+e)+1}},function(t,e){t.exports=function(t,e){return e=1.525*(e=void 0===e?1.70158:e),(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},function(t,e,n){t.exports={In:n(90),Out:n(91),InOut:n(92)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e,n){t.exports={In:n(94),Out:n(95),InOut:n(96)}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e,n){t.exports={In:n(98),Out:n(99),InOut:n(100)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e,n){t.exports={In:n(102),Out:n(103),InOut:n(104)}},function(t,e){t.exports=function(t,e,n){var i;return void 0===e&&(e=.1),void 0===n&&(n=.1),0===t?0:1===t?1:(i=n/4,e<1?e=1:i=n*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*--t)*Math.sin((t-i)*(2*Math.PI)/n))}},function(t,e){t.exports=function(t,e,n){var i;return void 0===e&&(e=.1),void 0===n&&(n=.1),0===t?0:1===t?1:(i=n/4,e<1?e=1:i=n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/n)+1)}},function(t,e){t.exports=function(t,e,n){var i;return void 0===e&&(e=.1),void 0===n&&(n=.1),0===t?0:1===t?1:(i=n/4,e<1?e=1:i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*--t)*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*--t)*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}},function(t,e,n){t.exports={In:n(106),Out:n(107),InOut:n(108)}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e,n){t.exports=n(110)},function(t,e){t.exports=function(t){return t}},function(t,e,n){t.exports={In:n(112),Out:n(113),InOut:n(114)}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e,n){t.exports={In:n(116),Out:n(117),InOut:n(118)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e,n){t.exports={In:n(120),Out:n(121),InOut:n(122)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e,n){t.exports={In:n(124),Out:n(125),InOut:n(126)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e,n){t.exports=n(128)},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:1<=t?1:1/e*(1+(e*t|0))}},function(t,e,n){t.exports={Ceil:n(130),Equal:n(32),Floor:n(131),GreaterThan:n(132),LessThan:n(133)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e){t.exports=function(t,e,n){return e-(n=void 0===n?1e-4:n)<t}},function(t,e){t.exports=function(t,e,n){return t<e+(void 0===n?1e-4:n)}},function(t,e,n){t.exports={Bezier:n(135),CatmullRom:n(136),CubicBezier:n(137),Linear:n(138),QuadraticBezier:n(139),SmoothStep:n(140),SmootherStep:n(141)}},function(t,e,n){var i=n(33);t.exports=function(t,e){for(var n=0,r=t.length-1,a=0;a<=r;a++)n+=Math.pow(1-e,r-a)*Math.pow(e,a)*t[a]*i(r,a);return n}},function(t,e,n){var i=n(35);t.exports=function(t,e){var n=t.length-1,r=n*e,a=Math.floor(r);return t[0]===t[n]?(e<0&&(a=Math.floor(r=n*(1+e))),i(r-a,t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n])):e<0?t[0]-(i(-r,t[0],t[0],t[1],t[1])-t[0]):1<e?t[n]-(i(r-n,t[n],t[n],t[n-1],t[n-1])-t[n]):i(r-a,t[a?a-1:0],t[a],t[n<a+1?n:a+1],t[n<a+2?n:a+2])}},function(t,e){t.exports=function(t,e,n,i,r){return(a=1-(a=t))*a*a*e+3*(a=1-t)*a*t*n+3*(1-t)*t*t*i+t*t*t*r;var a}},function(t,e,n){var i=n(36);t.exports=function(t,e){var n=t.length-1,r=n*e,a=Math.floor(r);return e<0?i(t[0],t[1],r):1<e?i(t[n],t[n-1],n-r):i(t[a],t[n<a+1?n:a+1],r-a)}},function(t,e){t.exports=function(t,e,n,i){return(r=1-(r=t))*r*e+2*(1-t)*t*n+t*t*i;var r}},function(t,e,n){var i=n(37);t.exports=function(t,e,n){return e+(n-e)*i(t,0,1)}},function(t,e,n){var i=n(38);t.exports=function(t,e,n){return e+(n-e)*i(t,0,1)}},function(t,e,n){t.exports={GetNext:n(143),IsSize:n(144),IsValue:n(145)}},function(t,e){t.exports=function(t){return t=Math.log(t)/.6931471805599453,1<<Math.ceil(t)}},function(t,e){t.exports=function(t,e){return 0<t&&0==(t&t-1)&&0<e&&0==(e&e-1)}},function(t,e){t.exports=function(t){return 0<t&&0==(t&t-1)}},function(t,e,n){t.exports={Ceil:n(147),Floor:n(148),To:n(149)}},function(t,e){t.exports=function(t,e,n,i){return 0===e?t:(t-=n=void 0===n?0:n,t=e*Math.ceil(t/e),i?(n+t)/e:n+t)}},function(t,e){t.exports=function(t,e,n,i){return 0===e?t:(t-=n=void 0===n?0:n,t=e*Math.floor(t/e),i?(n+t)/e:n+t)}},function(t,e){t.exports=function(t,e,n,i){return 0===e?t:(t-=n=void 0===n?0:n,t=e*Math.round(t/e),i?(n+t)/e:n+t)}},function(t,e,n){n=new(n(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,n=this.n;t=t.toString();for(var i=0;i<t.length;i++)n=(e=((e=.02519603282416938*(n+=t.charCodeAt(i)))-(n=e>>>0))*n)>>>0,n+=4294967296*(e-=n);return 2.3283064365386963e-10*((this.n=n)>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var n=t[e];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;0<e;e--){var n=Math.floor(this.frac()*(e+1)),i=t[n];t[n]=t[e],t[e]=i}return t}}),t.exports=n},function(t,e){t.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=+t[n];return e/t.length}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e){t.exports=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=10),n=Math.pow(n,-e),Math.ceil(t*n)/n}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e,n){var i=n(3),r=n(0),a=n(20),s=n(1),o=new a;n=new r({initialize:function t(e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=t.DefaultOrder),this._x=e=void 0===e?0:e,this._y=n,this._z=i,this._order=r,this.onChangeCallback=s},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,n,i){return void 0===i&&(i=this._order),this._x=t,this._y=e,this._z=n,this._order=i,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,n){return void 0===e&&(e=this._order),void 0===n&&(n=!1),o.fromQuat(t),this.setFromRotationMatrix(o,e,n)},setFromRotationMatrix:function(t,e,n){void 0===e&&(e=this._order),void 0===n&&(n=!1);var r=(t=t.val)[0],a=t[4],s=t[8],o=t[1],h=t[5],c=t[9],l=t[2],u=t[6],d=t[10],f=0,p=0,m=0,g=.99999;switch(e){case"XYZ":p=Math.asin(i(s,-1,1)),Math.abs(s)<g?(f=Math.atan2(-c,d),m=Math.atan2(-a,r)):f=Math.atan2(u,h);break;case"YXZ":f=Math.asin(-i(c,-1,1)),Math.abs(c)<g?(p=Math.atan2(s,d),m=Math.atan2(o,h)):p=Math.atan2(-l,r);break;case"ZXY":f=Math.asin(i(u,-1,1)),m=Math.abs(u)<g?(p=Math.atan2(-l,d),Math.atan2(-a,h)):Math.atan2(o,r);break;case"ZYX":p=Math.asin(-i(l,-1,1)),m=Math.abs(l)<g?(f=Math.atan2(u,d),Math.atan2(o,r)):Math.atan2(-a,h);break;case"YZX":m=Math.asin(i(o,-1,1)),p=Math.abs(o)<g?(f=Math.atan2(-c,h),Math.atan2(-l,r)):Math.atan2(s,d);break;case"XZY":m=Math.asin(-i(a,-1,1)),Math.abs(a)<g?(f=Math.atan2(u,h),p=Math.atan2(s,r)):f=Math.atan2(-c,d)}return this._x=f,this._y=p,this._z=m,this._order=e,n&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",t.exports=n},function(t,e){t.exports=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=10),n=Math.pow(n,-e),Math.floor(t*n)/n}},function(t,e,n){var i=n(3);t.exports=function(t,e,n){return(n-e)*(t=i(t,0,1))+e}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,n){return Math.min(t+e,n)}},function(t,e){t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var n=Math.floor(e/2);return e%2==0?(t[n]+t[n-1])/2:t[n]}},function(t,e){t.exports=function(t,e,n){return Math.max(t-e,n)}},function(t,e){t.exports=function(t,e,n,i){return 1<(e=(t-e)/((n=void 0===n?e+1:n)-e))?void 0!==i?(e=(i-t)/(i-n))<0&&(e=0):e=1:e<0&&(e=0),e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var n=2*Math.random()*Math.PI,i=2*Math.random()-1,r=Math.sqrt(1-i*i)*e;return t.x=Math.cos(n)*r,t.y=Math.sin(n)*r,t.z=i*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e){var n=t.x,i=t.y;return t.x=n*Math.cos(e)-i*Math.sin(e),t.y=n*Math.sin(e)+i*Math.cos(e),t}},function(t,e){t.exports=function(t,e,n,i,r){return i+=Math.atan2(t.y-n,t.x-e),t.x=e+r*Math.cos(i),t.y=n+r*Math.sin(i),t}},function(t,e){t.exports=function(t,e,n,i,r){return t.x=e+r*Math.cos(i),t.y=n+r*Math.sin(i),t}},function(t,e){t.exports=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=10),n=Math.pow(n,-e),Math.round(t*n)/n}},function(t,e){t.exports=function(t,e,n,i){void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),i*=Math.PI/t;for(var r=[],a=[],s=0;s<t;s++)e+=(n-=e*i)*i,r[s]=n,a[s]=e;return{sin:a,cos:r,length:t}}},function(t,e,n){var i=n(2);t.exports=function(t,e,n,r){void 0===r&&(r=new i);var a=0,s=0;return 0<t&&t<=e*n&&(a=e-1<t?t-(s=Math.floor(t/e))*e:t),r.set(a,s)}},function(t,e){t.exports=function(t,e,n){return Math.abs(t-e)<=n}},function(t,e,n){var i=new(n(0))({initialize:function(t,e,n,i){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=i||0)},clone:function(){return new i(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,n,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=i||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,n=this.z,i=this.w;return Math.sqrt(t*t+e*e+n*n+i*i)},lengthSq:function(){var t=this.x,e=this.y,n=this.z,i=this.w;return t*t+e*e+n*n+i*i},normalize:function(){var t=this.x,e=this.y,n=this.z,i=this.w,r=t*t+e*e+n*n+i*i;return 0<r&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r,this.w=i*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){var n=this.x,i=this.y,r=this.z,a=this.w;return this.x=n+(e=void 0===e?0:e)*(t.x-n),this.y=i+e*(t.y-i),this.z=r+e*(t.z-r),this.w=a+e*(t.w-a),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y,i=t.z-this.z||0;t=t.w-this.w||0;return Math.sqrt(e*e+n*n+i*i+t*t)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y,i=t.z-this.z||0;return e*e+n*n+i*i+(t=t.w-this.w||0)*t},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;t=t.val;return this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this},transformQuat:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z,o=(t=t.w)*e+a*i-s*n,h=t*n+s*e-r*i,c=t*i+r*n-a*e;e=-r*e-a*n-s*i;return this.x=o*t+e*-r+h*-s-c*-a,this.y=h*t+e*-a+c*-r-o*-s,this.z=c*t+e*-s+o*-a-h*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.distSq=i.prototype.distanceSq,i.prototype.len=i.prototype.length,i.prototype.lenSq=i.prototype.lengthSq,t.exports=i},function(t,e,n){var i=n(14),r=n(20),a=(n=n(43),new r),s=new n,o=new i;t.exports=function(t,e,n){return s.setAxisAngle(e,n),a.fromRotationTranslation(s,o.set(0,0,0)),t.transformMat4(a)}},function(t,e){t.exports="resize"},function(t,e,n){var i=n(179),r=n(0),a=n(44);n=new r({Extends:i,initialize:function(t,e,n){i.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=n},function(t,e,n){n=new(n(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}}),t.exports=n},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="prerender"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e){(function(){var e,n,i,r,a,s,o,h,c,l,u,d,f,p,m,g,v,y,x,b,E,A,w,S,M,T,C,I,P,k,R,L,O=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)},function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});function _(t){return(t=r.call(this,t,0,!1)||this).bones=new Array,t.bendDirection=1,t.compress=!1,t.stretch=!1,t.uniform=!1,t.mix=1,t.softness=0,t}function D(t){return(t=a.call(this,t,0,!1)||this).bones=new Array,t}!function(t){a.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},a.prototype.apply=function(t,e,n,i,r,a,s,o){if(null==t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var h=this.timelines,c=0,l=h.length;c<l;c++)h[c].apply(t,e,n,r,a,s,o)},a.binarySearch=function(t,e,n){var i=0,r=t.length/(n=void 0===n?1:n)-2;if(0==r)return n;for(var a=r>>>1;;){if(t[(a+1)*n]<=e?i=a+1:r=a,i==r)return(i+1)*n;a=i+r>>>1}},a.linearSearch=function(t,e,n){for(var i=0,r=t.length-n;i<=r;i+=n)if(t[i]>e)return i;return-1};var e,n,i,r=a;function a(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var i=0;i<e.length;i++)this.timelineIds[e[i].getPropertyId()]=!0;this.duration=n}t.Animation=r,(s=e=t.MixBlend||(t.MixBlend={}))[s.setup=0]="setup",s[s.first=1]="first",s[s.replace=2]="replace",s[s.add=3]="add",(s=n=t.MixDirection||(t.MixDirection={}))[s.mixIn=0]="mixIn",s[s.mixOut=1]="mixOut",(s=i=t.TimelineType||(t.TimelineType={}))[s.rotate=0]="rotate",s[s.translate=1]="translate",s[s.scale=2]="scale",s[s.shear=3]="shear",s[s.attachment=4]="attachment",s[s.color=5]="color",s[s.deform=6]="deform",s[s.event=7]="event",s[s.drawOrder=8]="drawOrder",s[s.ikConstraint=9]="ikConstraint",s[s.transformConstraint=10]="transformConstraint",s[s.pathConstraintPosition=11]="pathConstraintPosition",s[s.pathConstraintSpacing=12]="pathConstraintSpacing",s[s.pathConstraintMix=13]="pathConstraintMix",s[s.twoColor=14]="twoColor",o.prototype.getFrameCount=function(){return this.curves.length/o.BEZIER_SIZE+1},o.prototype.setLinear=function(t){this.curves[t*o.BEZIER_SIZE]=o.LINEAR},o.prototype.setStepped=function(t){this.curves[t*o.BEZIER_SIZE]=o.STEPPED},o.prototype.getCurveType=function(t){return(t*=o.BEZIER_SIZE)==this.curves.length||(t=this.curves[t])==o.LINEAR?o.LINEAR:t==o.STEPPED?o.STEPPED:o.BEZIER},o.prototype.setCurve=function(t,e,n,i,r){for(var a=.03*(2*-e+i),s=.03*(2*-n+r),h=.006*(3*(e-i)+1),c=.006*(3*(n-r)+1),l=2*a+h,u=2*s+c,d=.3*e+a+.16666667*h,f=.3*n+s+.16666667*c,p=t*o.BEZIER_SIZE,m=this.curves,g=(m[p++]=o.BEZIER,d),v=f,y=p+o.BEZIER_SIZE-1;p<y;p+=2)m[p]=g,m[p+1]=v,d+=l,f+=u,l+=h,u+=c,g+=d,v+=f},o.prototype.getCurvePercent=function(e,n){n=t.MathUtils.clamp(n,0,1);var i=this.curves,r=e*o.BEZIER_SIZE;if((e=i[r])==o.LINEAR)return n;if(e==o.STEPPED)return 0;for(var a,s,h=0,c=++r,l=r+o.BEZIER_SIZE-1;r<l;r+=2)if(n<=(h=i[r]))return a=void 0,(s=r==c?a=0:(a=i[r-2],i[r-1]))+(i[r+1]-s)*(n-a)/(h-a);return(e=i[r-1])+(1-e)*(n-h)/(1-h)},o.LINEAR=0,o.STEPPED=1,o.BEZIER=2,o.BEZIER_SIZE=19;var s=o;function o(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=t.Utils.newFloatArray((e-1)*o.BEZIER_SIZE)}t.CurveTimeline=s,O(l,h=s),l.prototype.getPropertyId=function(){return(i.rotate<<24)+this.boneIndex},l.prototype.setFrame=function(t,e,n){this.frames[t<<=1]=e,this.frames[t+l.ROTATION]=n},l.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,u=t.bones[this.boneIndex];if(u.active)if(i<c[0])switch(o){case e.setup:return void(u.rotation=u.data.rotation);case e.first:var d=u.data.rotation-u.rotation;u.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*s}else if(i>=c[c.length-l.ENTRIES]){var f=c[c.length+l.PREV_ROTATION];switch(o){case e.setup:u.rotation=u.data.rotation+f*s;break;case e.first:case e.replace:f=(f+=u.data.rotation-u.rotation)-360*(16384-(16384.499999999996-f/360|0));case e.add:u.rotation+=f*s}}else{var p=c[(t=r.binarySearch(c,i,l.ENTRIES))+l.PREV_ROTATION],m=c[t],g=(i=this.getCurvePercent((t>>1)-1,1-(i-m)/(c[t+l.PREV_TIME]-m)),p+((g=c[t+l.ROTATION]-p)-360*(16384-(16384.499999999996-g/360|0)))*i);switch(o){case e.setup:u.rotation=u.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*s;break;case e.first:case e.replace:g+=u.data.rotation-u.rotation;case e.add:u.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*s}}},l.ENTRIES=2,l.PREV_TIME=-2,l.PREV_ROTATION=-1,l.ROTATION=1;var h,c=l;function l(e){var n=h.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e<<1),n}t.RotateTimeline=c,O(d,u=s),d.prototype.getPropertyId=function(){return(i.translate<<24)+this.boneIndex},d.prototype.setFrame=function(t,e,n,i){this.frames[t*=d.ENTRIES]=e,this.frames[t+d.X]=n,this.frames[t+d.Y]=i},d.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<c[0])switch(o){case e.setup:return l.x=l.data.x,void(l.y=l.data.y);case e.first:l.x+=(l.data.x-l.x)*s,l.y+=(l.data.y-l.y)*s}else{var u,f=0,p=0;switch(i>=c[c.length-d.ENTRIES]?(f=c[c.length+d.PREV_X],p=c[c.length+d.PREV_Y]):(f=c[(t=r.binarySearch(c,i,d.ENTRIES))+d.PREV_X],p=c[t+d.PREV_Y],u=c[t],i=this.getCurvePercent(t/d.ENTRIES-1,1-(i-u)/(c[t+d.PREV_TIME]-u)),f+=(c[t+d.X]-f)*i,p+=(c[t+d.Y]-p)*i),o){case e.setup:l.x=l.data.x+f*s,l.y=l.data.y+p*s;break;case e.first:case e.replace:l.x+=(l.data.x+f-l.x)*s,l.y+=(l.data.y+p-l.y)*s;break;case e.add:l.x+=f*s,l.y+=p*s}}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_X=-2,d.PREV_Y=-1,d.X=1,d.Y=2;var u;c=d;function d(e){var n=u.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*d.ENTRIES),n}t.TranslateTimeline=c,O(m,f=c),m.prototype.getPropertyId=function(){return(i.scale<<24)+this.boneIndex},m.prototype.apply=function(i,a,s,o,h,c,l){var u=this.frames,d=i.bones[this.boneIndex];if(d.active)if(s<u[0])switch(c){case e.setup:return d.scaleX=d.data.scaleX,void(d.scaleY=d.data.scaleY);case e.first:d.scaleX+=(d.data.scaleX-d.scaleX)*h,d.scaleY+=(d.data.scaleY-d.scaleY)*h}else{var f,p=0,g=0;if(g=s>=u[u.length-m.ENTRIES]?(p=u[u.length+m.PREV_X]*d.data.scaleX,u[u.length+m.PREV_Y]*d.data.scaleY):(p=u[(i=r.binarySearch(u,s,m.ENTRIES))+m.PREV_X],g=u[i+m.PREV_Y],f=u[i],s=this.getCurvePercent(i/m.ENTRIES-1,1-(s-f)/(u[i+m.PREV_TIME]-f)),p=(p+(u[i+m.X]-p)*s)*d.data.scaleX,(g+(u[i+m.Y]-g)*s)*d.data.scaleY),1==h)c==e.add?(d.scaleX+=p-d.data.scaleX,d.scaleY+=g-d.data.scaleY):(d.scaleX=p,d.scaleY=g);else{var v=0,y=0;if(l==n.mixOut)switch(c){case e.setup:v=d.data.scaleX,y=d.data.scaleY,d.scaleX=v+(Math.abs(p)*t.MathUtils.signum(v)-v)*h,d.scaleY=y+(Math.abs(g)*t.MathUtils.signum(y)-y)*h;break;case e.first:case e.replace:v=d.scaleX,y=d.scaleY,d.scaleX=v+(Math.abs(p)*t.MathUtils.signum(v)-v)*h,d.scaleY=y+(Math.abs(g)*t.MathUtils.signum(y)-y)*h;break;case e.add:v=d.scaleX,y=d.scaleY,d.scaleX=v+(Math.abs(p)*t.MathUtils.signum(v)-d.data.scaleX)*h,d.scaleY=y+(Math.abs(g)*t.MathUtils.signum(y)-d.data.scaleY)*h}else switch(c){case e.setup:v=Math.abs(d.data.scaleX)*t.MathUtils.signum(p),y=Math.abs(d.data.scaleY)*t.MathUtils.signum(g),d.scaleX=v+(p-v)*h,d.scaleY=y+(g-y)*h;break;case e.first:case e.replace:v=Math.abs(d.scaleX)*t.MathUtils.signum(p),y=Math.abs(d.scaleY)*t.MathUtils.signum(g),d.scaleX=v+(p-v)*h,d.scaleY=y+(g-y)*h;break;case e.add:v=t.MathUtils.signum(p),y=t.MathUtils.signum(g),d.scaleX=Math.abs(d.scaleX)*v+(p-Math.abs(d.data.scaleX)*v)*h,d.scaleY=Math.abs(d.scaleY)*y+(g-Math.abs(d.data.scaleY)*y)*h}}}};var f,p=m;function m(t){return f.call(this,t)||this}t.ScaleTimeline=p,O(v,g=c),v.prototype.getPropertyId=function(){return(i.shear<<24)+this.boneIndex},v.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<c[0])switch(o){case e.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case e.first:l.shearX+=(l.data.shearX-l.shearX)*s,l.shearY+=(l.data.shearY-l.shearY)*s}else{var u,d=0,f=0;switch(i>=c[c.length-v.ENTRIES]?(d=c[c.length+v.PREV_X],f=c[c.length+v.PREV_Y]):(d=c[(t=r.binarySearch(c,i,v.ENTRIES))+v.PREV_X],f=c[t+v.PREV_Y],u=c[t],i=this.getCurvePercent(t/v.ENTRIES-1,1-(i-u)/(c[t+v.PREV_TIME]-u)),d+=(c[t+v.X]-d)*i,f+=(c[t+v.Y]-f)*i),o){case e.setup:l.shearX=l.data.shearX+d*s,l.shearY=l.data.shearY+f*s;break;case e.first:case e.replace:l.shearX+=(l.data.shearX+d-l.shearX)*s,l.shearY+=(l.data.shearY+f-l.shearY)*s;break;case e.add:l.shearX+=d*s,l.shearY+=f*s}}};var g;p=v;function v(t){return g.call(this,t)||this}t.ShearTimeline=p,O(x,y=s),x.prototype.getPropertyId=function(){return(i.color<<24)+this.slotIndex},x.prototype.setFrame=function(t,e,n,i,r,a){this.frames[t*=x.ENTRIES]=e,this.frames[t+x.R]=n,this.frames[t+x.G]=i,this.frames[t+x.B]=r,this.frames[t+x.A]=a},x.prototype.apply=function(t,n,i,a,s,o,h){var c=t.slots[this.slotIndex];if(c.bone.active)if(i<(t=this.frames)[0])switch(o){case e.setup:return void c.color.setFromColor(c.data.color);case e.first:var l=c.color,u=c.data.color;l.add((u.r-l.r)*s,(u.g-l.g)*s,(u.b-l.b)*s,(u.a-l.a)*s)}else{var d,f,p=0,m=0,g=0,v=0;i>=t[t.length-x.ENTRIES]?(p=t[(d=t.length)+x.PREV_R],m=t[d+x.PREV_G],g=t[d+x.PREV_B],v=t[d+x.PREV_A]):(p=t[(d=r.binarySearch(t,i,x.ENTRIES))+x.PREV_R],m=t[d+x.PREV_G],g=t[d+x.PREV_B],v=t[d+x.PREV_A],f=t[d],i=this.getCurvePercent(d/x.ENTRIES-1,1-(i-f)/(t[d+x.PREV_TIME]-f)),p+=(t[d+x.R]-p)*i,m+=(t[d+x.G]-m)*i,g+=(t[d+x.B]-g)*i,v+=(t[d+x.A]-v)*i),1==s?c.color.set(p,m,g,v):(l=c.color,o==e.setup&&l.setFromColor(c.data.color),l.add((p-l.r)*s,(m-l.g)*s,(g-l.b)*s,(v-l.a)*s))}},x.ENTRIES=5,x.PREV_TIME=-5,x.PREV_R=-4,x.PREV_G=-3,x.PREV_B=-2,x.PREV_A=-1,x.R=1,x.G=2,x.B=3,x.A=4;var y;c=x;function x(e){var n=y.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*x.ENTRIES),n}t.ColorTimeline=c,O(E,b=s),E.prototype.getPropertyId=function(){return(i.twoColor<<24)+this.slotIndex},E.prototype.setFrame=function(t,e,n,i,r,a,s,o,h){this.frames[t*=E.ENTRIES]=e,this.frames[t+E.R]=n,this.frames[t+E.G]=i,this.frames[t+E.B]=r,this.frames[t+E.A]=a,this.frames[t+E.R2]=s,this.frames[t+E.G2]=o,this.frames[t+E.B2]=h},E.prototype.apply=function(t,n,i,a,s,o,h){var c=t.slots[this.slotIndex];if(c.bone.active)if(i<(t=this.frames)[0])switch(o){case e.setup:return c.color.setFromColor(c.data.color),void c.darkColor.setFromColor(c.data.darkColor);case e.first:var l=c.color,u=c.darkColor,d=c.data.color,f=c.data.darkColor;l.add((d.r-l.r)*s,(d.g-l.g)*s,(d.b-l.b)*s,(d.a-l.a)*s),u.add((f.r-u.r)*s,(f.g-u.g)*s,(f.b-u.b)*s,0)}else{var p,m,g=0,v=0,y=0,x=0,b=0,A=0,w=0;i>=t[t.length-E.ENTRIES]?(g=t[(p=t.length)+E.PREV_R],v=t[p+E.PREV_G],y=t[p+E.PREV_B],x=t[p+E.PREV_A],b=t[p+E.PREV_R2],A=t[p+E.PREV_G2],w=t[p+E.PREV_B2]):(g=t[(p=r.binarySearch(t,i,E.ENTRIES))+E.PREV_R],v=t[p+E.PREV_G],y=t[p+E.PREV_B],x=t[p+E.PREV_A],b=t[p+E.PREV_R2],A=t[p+E.PREV_G2],w=t[p+E.PREV_B2],m=t[p],i=this.getCurvePercent(p/E.ENTRIES-1,1-(i-m)/(t[p+E.PREV_TIME]-m)),g+=(t[p+E.R]-g)*i,v+=(t[p+E.G]-v)*i,y+=(t[p+E.B]-y)*i,x+=(t[p+E.A]-x)*i,b+=(t[p+E.R2]-b)*i,A+=(t[p+E.G2]-A)*i,w+=(t[p+E.B2]-w)*i),1==s?(c.color.set(g,v,y,x),c.darkColor.set(b,A,w,1)):(l=c.color,u=c.darkColor,o==e.setup&&(l.setFromColor(c.data.color),u.setFromColor(c.data.darkColor)),l.add((g-l.r)*s,(v-l.g)*s,(y-l.b)*s,(x-l.a)*s),u.add((b-u.r)*s,(A-u.g)*s,(w-u.b)*s,0))}},E.ENTRIES=8,E.PREV_TIME=-8,E.PREV_R=-7,E.PREV_G=-6,E.PREV_B=-5,E.PREV_A=-4,E.PREV_R2=-3,E.PREV_G2=-2,E.PREV_B2=-1,E.R=1,E.G=2,E.B=3,E.A=4,E.R2=5,E.G2=6,E.B2=7;var b;p=E;function E(e){var n=b.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*E.ENTRIES),n}function A(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}t.TwoColorTimeline=p,A.prototype.getPropertyId=function(){return(i.attachment<<24)+this.slotIndex},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},A.prototype.apply=function(t,i,a,s,o,h,c){var l=t.slots[this.slotIndex];l.bone.active&&(c==n.mixOut?h==e.setup&&this.setAttachment(t,l,l.data.attachmentName):a<(c=this.frames)[0]?h!=e.setup&&h!=e.first||this.setAttachment(t,l,l.data.attachmentName):(h=0,h=a>=c[c.length-1]?c.length-1:r.binarySearch(c,a,1)-1,l=this.attachmentNames[h],t.slots[this.slotIndex].setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))))},A.prototype.setAttachment=function(t,e,n){e.attachment=null==n?null:t.getAttachment(this.slotIndex,n)},t.AttachmentTimeline=A;var w,S=null;O(M,w=s),M.prototype.getPropertyId=function(){return(i.deform<<27)+ +this.attachment.id+this.slotIndex},M.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},M.prototype.apply=function(n,i,a,s,o,h,c){if((n=n.slots[this.slotIndex]).bone.active){var l=n.getAttachment();if(l instanceof t.VertexAttachment&&l.deformAttachment==this.attachment){var u=n.deform,d=(n=(0==u.length&&(h=e.setup),this.frameVertices))[0].length,f=this.frames;if(a<f[0]){var p=l;switch(h){case e.setup:return void(u.length=0);case e.first:if(1==o){u.length=0;break}var m=t.Utils.setArraySize(u,d);if(null==p.bones)for(var g=p.vertices,v=0;v<d;v++)m[v]+=(g[v]-m[v])*o;else for(o=1-o,v=0;v<d;v++)m[v]*=o}}else{var y=t.Utils.setArraySize(u,d);if(a>=f[f.length-1]){var x=n[f.length-1];if(1==o)if(h==e.add)if(null==(p=l).bones){g=p.vertices;for(var b=0;b<d;b++)y[b]+=x[b]-g[b]}else for(var E=0;E<d;E++)y[E]+=x[E];else t.Utils.arrayCopy(x,0,y,0,d);else switch(h){case e.setup:if(null==l.bones){g=l.vertices;for(var A=0;A<d;A++){var w=g[A];y[A]=w+(x[A]-w)*o}}else for(var S=0;S<d;S++)y[S]=x[S]*o;break;case e.first:case e.replace:for(var M=0;M<d;M++)y[M]+=(x[M]-y[M])*o;break;case e.add:if(null==(p=l).bones){g=p.vertices;for(var T=0;T<d;T++)y[T]+=(x[T]-g[T])*o}else for(var C=0;C<d;C++)y[C]+=x[C]*o}}else{var I=r.binarySearch(f,a),P=n[I-1],k=n[I],R=(n=f[I],this.getCurvePercent(I-1,1-(a-n)/(f[I-1]-n)));if(1==o)if(h==e.add)if(null==(p=l).bones){g=p.vertices;for(var L=0;L<d;L++){var O=P[L];y[L]+=O+(k[L]-O)*R-g[L]}}else for(var _=0;_<d;_++)O=P[_],y[_]+=O+(k[_]-O)*R;else for(var D=0;D<d;D++)O=P[D],y[D]=O+(k[D]-O)*R;else switch(h){case e.setup:if(null==l.bones){g=l.vertices;for(var B=0;B<d;B++)O=P[B],w=g[B],y[B]=w+(O+(k[B]-O)*R-w)*o}else for(var N=0;N<d;N++)O=P[N],y[N]=(O+(k[N]-O)*R)*o;break;case e.first:case e.replace:for(var F=0;F<d;F++)O=P[F],y[F]+=(O+(k[F]-O)*R-y[F])*o;break;case e.add:if(null==(p=l).bones){g=p.vertices;for(var U=0;U<d;U++)O=P[U],y[U]+=(O+(k[U]-O)*R-g[U])*o}else for(var G=0;G<d;G++)O=P[G],y[G]+=(O+(k[G]-O)*R)*o}}}}}},c=M;function M(e){var n=w.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e),n.frameVertices=new Array(e),null==S&&(S=t.Utils.newFloatArray(64)),n}function T(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}function C(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}t.DeformTimeline=c,T.prototype.getPropertyId=function(){return i.event<<24},T.prototype.getFrameCount=function(){return this.frames.length},T.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},T.prototype.apply=function(t,e,n,i,a,s,o){if(null!=i){var h=this.frames,c=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,i,a,s,o),e=-1;else if(e>=h[c-1])return;if(!(n<h[0])){var l=0;if(e<h[0])l=0;else for(var u=h[l=r.binarySearch(h,e)];0<l&&h[l-1]==u;)l--;for(;l<c&&n>=h[l];l++)i.push(this.events[l])}}},t.EventTimeline=T,C.prototype.getPropertyId=function(){return i.drawOrder<<24},C.prototype.getFrameCount=function(){return this.frames.length},C.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},C.prototype.apply=function(i,a,s,o,h,c,l){var u=i.drawOrder,d=i.slots;if(l==n.mixOut)c==e.setup&&t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else if(s<(l=this.frames)[0])c!=e.setup&&c!=e.first||t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else{c=0,c=s>=l[l.length-1]?l.length-1:r.binarySearch(l,s)-1;var f=this.drawOrders[c];if(null==f)t.Utils.arrayCopy(d,0,u,0,d.length);else for(var p=0,m=f.length;p<m;p++)u[p]=d[f[p]]}},t.DrawOrderTimeline=C,O(P,I=s),P.prototype.getPropertyId=function(){return(i.ikConstraint<<24)+this.ikConstraintIndex},P.prototype.setFrame=function(t,e,n,i,r,a,s){this.frames[t*=P.ENTRIES]=e,this.frames[t+P.MIX]=n,this.frames[t+P.SOFTNESS]=i,this.frames[t+P.BEND_DIRECTION]=r,this.frames[t+P.COMPRESS]=a?1:0,this.frames[t+P.STRETCH]=s?1:0},P.prototype.apply=function(t,i,a,s,o,h,c){var l,u,d,f=this.frames,p=t.ikConstraints[this.ikConstraintIndex];if(p.active)if(a<f[0])switch(h){case e.setup:return p.mix=p.data.mix,p.softness=p.data.softness,p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,void(p.stretch=p.data.stretch);case e.first:p.mix+=(p.data.mix-p.mix)*o,p.softness+=(p.data.softness-p.softness)*o,p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch}else a>=f[f.length-P.ENTRIES]?h==e.setup?(p.mix=p.data.mix+(f[f.length+P.PREV_MIX]-p.data.mix)*o,p.softness=p.data.softness+(f[f.length+P.PREV_SOFTNESS]-p.data.softness)*o,c==n.mixOut?(p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch):(p.bendDirection=f[f.length+P.PREV_BEND_DIRECTION],p.compress=0!=f[f.length+P.PREV_COMPRESS],p.stretch=0!=f[f.length+P.PREV_STRETCH])):(p.mix+=(f[f.length+P.PREV_MIX]-p.mix)*o,p.softness+=(f[f.length+P.PREV_SOFTNESS]-p.softness)*o,c==n.mixIn&&(p.bendDirection=f[f.length+P.PREV_BEND_DIRECTION],p.compress=0!=f[f.length+P.PREV_COMPRESS],p.stretch=0!=f[f.length+P.PREV_STRETCH])):(l=f[(t=r.binarySearch(f,a,P.ENTRIES))+P.PREV_MIX],u=f[t+P.PREV_SOFTNESS],d=f[t],a=this.getCurvePercent(t/P.ENTRIES-1,1-(a-d)/(f[t+P.PREV_TIME]-d)),h==e.setup?(p.mix=p.data.mix+(l+(f[t+P.MIX]-l)*a-p.data.mix)*o,p.softness=p.data.softness+(u+(f[t+P.SOFTNESS]-u)*a-p.data.softness)*o,c==n.mixOut?(p.bendDirection=p.data.bendDirection,p.compress=p.data.compress,p.stretch=p.data.stretch):(p.bendDirection=f[t+P.PREV_BEND_DIRECTION],p.compress=0!=f[t+P.PREV_COMPRESS],p.stretch=0!=f[t+P.PREV_STRETCH])):(p.mix+=(l+(f[t+P.MIX]-l)*a-p.mix)*o,p.softness+=(u+(f[t+P.SOFTNESS]-u)*a-p.softness)*o,c==n.mixIn&&(p.bendDirection=f[t+P.PREV_BEND_DIRECTION],p.compress=0!=f[t+P.PREV_COMPRESS],p.stretch=0!=f[t+P.PREV_STRETCH])))},P.ENTRIES=6,P.PREV_TIME=-6,P.PREV_MIX=-5,P.PREV_SOFTNESS=-4,P.PREV_BEND_DIRECTION=-3,P.PREV_COMPRESS=-2,P.PREV_STRETCH=-1,P.MIX=1,P.SOFTNESS=2,P.BEND_DIRECTION=3,P.COMPRESS=4,P.STRETCH=5;var I;p=P;function P(e){var n=I.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*P.ENTRIES),n}t.IkConstraintTimeline=p,O(R,k=s),R.prototype.getPropertyId=function(){return(i.transformConstraint<<24)+this.transformConstraintIndex},R.prototype.setFrame=function(t,e,n,i,r,a){this.frames[t*=R.ENTRIES]=e,this.frames[t+R.ROTATE]=n,this.frames[t+R.TRANSLATE]=i,this.frames[t+R.SCALE]=r,this.frames[t+R.SHEAR]=a},R.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(l.active)if(i<c[0]){var u=l.data;switch(o){case e.setup:return l.rotateMix=u.rotateMix,l.translateMix=u.translateMix,l.scaleMix=u.scaleMix,void(l.shearMix=u.shearMix);case e.first:l.rotateMix+=(u.rotateMix-l.rotateMix)*s,l.translateMix+=(u.translateMix-l.translateMix)*s,l.scaleMix+=(u.scaleMix-l.scaleMix)*s,l.shearMix+=(u.shearMix-l.shearMix)*s}}else{t=0;var d,f,p=0,m=0,g=0;i>=c[c.length-R.ENTRIES]?(t=c[(d=c.length)+R.PREV_ROTATE],p=c[d+R.PREV_TRANSLATE],m=c[d+R.PREV_SCALE],g=c[d+R.PREV_SHEAR]):(t=c[(d=r.binarySearch(c,i,R.ENTRIES))+R.PREV_ROTATE],p=c[d+R.PREV_TRANSLATE],m=c[d+R.PREV_SCALE],g=c[d+R.PREV_SHEAR],f=c[d],i=this.getCurvePercent(d/R.ENTRIES-1,1-(i-f)/(c[d+R.PREV_TIME]-f)),t+=(c[d+R.ROTATE]-t)*i,p+=(c[d+R.TRANSLATE]-p)*i,m+=(c[d+R.SCALE]-m)*i,g+=(c[d+R.SHEAR]-g)*i),o==e.setup?(u=l.data,l.rotateMix=u.rotateMix+(t-u.rotateMix)*s,l.translateMix=u.translateMix+(p-u.translateMix)*s,l.scaleMix=u.scaleMix+(m-u.scaleMix)*s,l.shearMix=u.shearMix+(g-u.shearMix)*s):(l.rotateMix+=(t-l.rotateMix)*s,l.translateMix+=(p-l.translateMix)*s,l.scaleMix+=(m-l.scaleMix)*s,l.shearMix+=(g-l.shearMix)*s)}},R.ENTRIES=5,R.PREV_TIME=-5,R.PREV_ROTATE=-4,R.PREV_TRANSLATE=-3,R.PREV_SCALE=-2,R.PREV_SHEAR=-1,R.ROTATE=1,R.TRANSLATE=2,R.SCALE=3,R.SHEAR=4;var k;c=R;function R(e){var n=k.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*R.ENTRIES),n}t.TransformConstraintTimeline=c,O(_,L=s),_.prototype.getPropertyId=function(){return(i.pathConstraintPosition<<24)+this.pathConstraintIndex},_.prototype.setFrame=function(t,e,n){this.frames[t*=_.ENTRIES]=e,this.frames[t+_.VALUE]=n},_.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<c[0])switch(o){case e.setup:return void(l.position=l.data.position);case e.first:l.position+=(l.data.position-l.position)*s}else{var u,d;t=0;i>=c[c.length-_.ENTRIES]?t=c[c.length+_.PREV_VALUE]:(t=c[(u=r.binarySearch(c,i,_.ENTRIES))+_.PREV_VALUE],d=c[u],i=this.getCurvePercent(u/_.ENTRIES-1,1-(i-d)/(c[u+_.PREV_TIME]-d)),t+=(c[u+_.VALUE]-t)*i),o==e.setup?l.position=l.data.position+(t-l.data.position)*s:l.position+=(t-l.position)*s}},_.ENTRIES=2,_.PREV_TIME=-2,_.PREV_VALUE=-1,_.VALUE=1;var L;p=_;function _(e){var n=L.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*_.ENTRIES),n}t.PathConstraintPositionTimeline=p,O(B,D=p),B.prototype.getPropertyId=function(){return(i.pathConstraintSpacing<<24)+this.pathConstraintIndex},B.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<c[0])switch(o){case e.setup:return void(l.spacing=l.data.spacing);case e.first:l.spacing+=(l.data.spacing-l.spacing)*s}else{var u,d;t=0;i>=c[c.length-B.ENTRIES]?t=c[c.length+B.PREV_VALUE]:(t=c[(u=r.binarySearch(c,i,B.ENTRIES))+B.PREV_VALUE],d=c[u],i=this.getCurvePercent(u/B.ENTRIES-1,1-(i-d)/(c[u+B.PREV_TIME]-d)),t+=(c[u+B.VALUE]-t)*i),o==e.setup?l.spacing=l.data.spacing+(t-l.data.spacing)*s:l.spacing+=(t-l.spacing)*s}};var D;c=B;function B(t){return D.call(this,t)||this}t.PathConstraintSpacingTimeline=c,O(F,N=s),F.prototype.getPropertyId=function(){return(i.pathConstraintMix<<24)+this.pathConstraintIndex},F.prototype.setFrame=function(t,e,n,i){this.frames[t*=F.ENTRIES]=e,this.frames[t+F.ROTATE]=n,this.frames[t+F.TRANSLATE]=i},F.prototype.apply=function(t,n,i,a,s,o,h){var c=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<c[0])switch(o){case e.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case e.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*s,l.translateMix+=(l.data.translateMix-l.translateMix)*s}else{t=0;var u,d,f=0;i>=c[c.length-F.ENTRIES]?(t=c[c.length+F.PREV_ROTATE],f=c[c.length+F.PREV_TRANSLATE]):(t=c[(u=r.binarySearch(c,i,F.ENTRIES))+F.PREV_ROTATE],f=c[u+F.PREV_TRANSLATE],d=c[u],i=this.getCurvePercent(u/F.ENTRIES-1,1-(i-d)/(c[u+F.PREV_TIME]-d)),t+=(c[u+F.ROTATE]-t)*i,f+=(c[u+F.TRANSLATE]-f)*i),o==e.setup?(l.rotateMix=l.data.rotateMix+(t-l.data.rotateMix)*s,l.translateMix=l.data.translateMix+(f-l.data.translateMix)*s):(l.rotateMix+=(t-l.rotateMix)*s,l.translateMix+=(f-l.translateMix)*s)}},F.ENTRIES=3,F.PREV_TIME=-3,F.PREV_ROTATE=-2,F.PREV_TRANSLATE=-1,F.ROTATE=1,F.TRANSLATE=2;var N;p=F;function F(e){var n=N.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*F.ENTRIES),n}t.PathConstraintMixTimeline=p}(R=R||{}),function(t){n.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,i=e.length;n<i;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var a=t*r.timeScale;if(0<r.delay){if(r.delay-=a,0<r.delay)continue;a=-r.delay,r.delay=0}var s=r.next;if(null!=s){var o=r.trackLast-s.delay;if(0<=o){for(s.delay=0,s.trackTime+=0==r.timeScale?0:(o/r.timeScale+t)*s.timeScale,r.trackTime+=a,this.setCurrent(n,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for((r.mixingFrom=null)!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=a}}this.queue.drain()},n.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var i=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},n.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,r=this.tracks,a=!1,s=0,o=r.length;s<o;s++){var h=r[s];if(!(null==h||0<h.delay)){a=!0;var c=0==s?t.MixBlend.first:h.mixBlend,l=h.alpha,u=(null!=h.mixingFrom?l*=this.applyMixingFrom(h,e,c):h.trackTime>=h.trackEnd&&null==h.next&&(l=0),h.animationLast),d=h.getAnimationTime(),f=h.animation.timelines.length,p=h.animation.timelines;if(0==s&&1==l||c==t.MixBlend.add)for(var m=0;m<f;m++){t.Utils.webkit602BugfixHelper(l,c);var g=p[m];g instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(g,e,d,c,!0):g.apply(e,u,d,i,l,c,t.MixDirection.mixIn)}else{var v=h.timelineMode,y=0==h.timelinesRotation.length,x=(y&&t.Utils.setArraySize(h.timelinesRotation,f<<1,null),h.timelinesRotation);for(m=0;m<f;m++){var b=p[m],E=v[m]==n.SUBSEQUENT?c:t.MixBlend.setup;b instanceof t.RotateTimeline?this.applyRotateTimeline(b,e,d,l,E,x,m<<1,y):b instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(b,e,d,c,!0):(t.Utils.webkit602BugfixHelper(l,c),b.apply(e,u,d,i,l,E,t.MixDirection.mixIn))}}this.queueEvents(h,d),i.length=0,h.nextAnimationLast=d,h.nextTrackLast=h.trackTime}}for(var A=this.unkeyedState+n.SETUP,w=e.slots,S=0,M=e.slots.length;S<M;S++){var T,C=w[S];C.attachmentState==A&&(T=C.data.attachmentName,C.attachment=null==T?null:e.getAttachment(C.data.index,T))}return this.unkeyedState+=2,this.queue.drain(),a},n.prototype.applyMixingFrom=function(e,i,r){var a=e.mixingFrom,s=(null!=a.mixingFrom&&this.applyMixingFrom(a,i,r),0),o=(0==e.mixDuration?(s=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):(1<(s=e.mixTime/e.mixDuration)&&(s=1),r!=t.MixBlend.first&&(r=a.mixBlend)),s<a.eventThreshold?this.events:null),h=s<a.attachmentThreshold,c=s<a.drawOrderThreshold,l=a.animationLast,u=a.getAnimationTime(),d=a.animation.timelines.length,f=a.animation.timelines,p=a.alpha*e.interruptAlpha,m=p*(1-s);if(r==t.MixBlend.add)for(var g=0;g<d;g++)f[g].apply(i,l,u,o,m,r,t.MixDirection.mixOut);else{var v=a.timelineMode,y=a.timelineHoldMix,x=0==a.timelinesRotation.length,b=(x&&t.Utils.setArraySize(a.timelinesRotation,d<<1,null),a.timelinesRotation);for(g=a.totalAlpha=0;g<d;g++){var E=f[g],A=t.MixDirection.mixOut,w=void 0,S=0;switch(v[g]){case n.SUBSEQUENT:if(!c&&E instanceof t.DrawOrderTimeline)continue;w=r,S=m;break;case n.FIRST:w=t.MixBlend.setup,S=m;break;case n.HOLD_SUBSEQUENT:w=r,S=p;break;case n.HOLD_FIRST:w=t.MixBlend.setup,S=p;break;default:w=t.MixBlend.setup;var M=y[g];S=p*Math.max(0,1-M.mixTime/M.mixDuration)}a.totalAlpha+=S,E instanceof t.RotateTimeline?this.applyRotateTimeline(E,i,u,S,w,b,g<<1,x):E instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(E,i,u,w,h):(t.Utils.webkit602BugfixHelper(S,r),c&&E instanceof t.DrawOrderTimeline&&w==t.MixBlend.setup&&(A=t.MixDirection.mixIn),E.apply(i,l,u,o,S,w,A))}}return 0<e.mixDuration&&this.queueEvents(a,u),this.events.length=0,a.nextAnimationLast=u,a.nextTrackLast=a.trackTime,s},n.prototype.applyAttachmentTimeline=function(e,i,r,a,s){var o,h=i.slots[e.slotIndex];h.bone.active&&(r<(o=e.frames)[0]?a!=t.MixBlend.setup&&a!=t.MixBlend.first||this.setAttachment(i,h,h.data.attachmentName,s):(a=r>=o[o.length-1]?o.length-1:t.Animation.binarySearch(o,r)-1,this.setAttachment(i,h,e.attachmentNames[a],s)),h.attachmentState<=this.unkeyedState&&(h.attachmentState=this.unkeyedState+n.SETUP))},n.prototype.setAttachment=function(t,e,i,r){e.attachment=null==i?null:t.getAttachment(e.data.index,i),r&&(e.attachmentState=this.unkeyedState+n.CURRENT)},n.prototype.applyRotateTimeline=function(e,n,i,r,a,s,o,h){if(h&&(s[o]=0),1==r)e.apply(n,0,i,null,1,a,t.MixDirection.mixIn);else{var c=e.frames,l=n.bones[e.boneIndex];if(l.active){var u=0,d=0;if(i<c[0])switch(a){case t.MixBlend.setup:l.rotation=l.data.rotation;default:return;case t.MixBlend.first:u=l.rotation,d=l.data.rotation}else u=(a==t.MixBlend.setup?l.data:l).rotation,i>=c[c.length-t.RotateTimeline.ENTRIES]?d=l.data.rotation+c[c.length+t.RotateTimeline.PREV_ROTATION]:(a=c[(n=t.Animation.binarySearch(c,i,t.RotateTimeline.ENTRIES))+t.RotateTimeline.PREV_ROTATION],f=c[n],e=e.getCurvePercent((n>>1)-1,1-(i-f)/(c[n+t.RotateTimeline.PREV_TIME]-f)),d=c[n+t.RotateTimeline.ROTATION]-a,d=a+(d-=360*(16384-(16384.499999999996-d/360|0)))*e+l.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0)));i=0;var f=d-u;0==(f-=360*(16384-(16384.499999999996-f/360|0)))?i=s[o]:(n=c=0,n=h?(c=0,f):(c=s[o],s[o+1]),a=0<f,e=0<=c,t.MathUtils.signum(n)!=t.MathUtils.signum(f)&&Math.abs(n)<=90&&(180<Math.abs(c)&&(c+=360*t.MathUtils.signum(c)),e=a),i=f+c-c%360,e!=a&&(i+=360*t.MathUtils.signum(c)),s[o]=i),s[o+1]=f,l.rotation=(u+=i*r)-360*(16384-(16384.499999999996-u/360|0))}}},n.prototype.queueEvents=function(t,e){for(var n=t.animationStart,i=t.animationEnd,r=i-n,a=t.trackLast%r,s=this.events,o=0,h=s.length;o<h;o++){var c=s[o];if(c.time<a)break;c.time>i||this.queue.event(t,c)}for((t.loop?0==r||a>t.trackTime%r:i<=e&&t.animationLast<i)&&this.queue.complete(t);o<h;o++)s[o].time<n||this.queue.event(t,s[o])},n.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},n.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)&&null!=(t=this.tracks[t])){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var n=e.mixingFrom;if(null==n)break;this.queue.end(n),e.mixingFrom=null,e.mixingTo=null,e=n}this.tracks[t.trackIndex]=null,this.queue.drain()}},n.prototype.setCurrent=function(t,e,n){var i=this.expandToIndex(t);this.tracks[t]=e,null!=i&&(n&&this.queue.interrupt(i),((e.mixingFrom=i).mixingTo=e).mixTime=0,null!=i.mixingFrom&&0<i.mixDuration&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)},n.prototype.setAnimation=function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,n)},n.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var i=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,i=!1):this.disposeNext(r)),e=this.trackEntry(t,e,n,r);return this.setCurrent(t,e,i),this.queue.drain(),e},n.prototype.addAnimation=function(t,e,n,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,i)},n.prototype.addAnimationWith=function(t,e,n,i){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;return n=this.trackEntry(t,e,n,r),null==r?(this.setCurrent(t,n,!0),this.queue.drain()):(r.next=n,i<=0&&(0!=(t=r.animationEnd-r.animationStart)?(r.loop?i+=t*(1+(r.trackTime/t|0)):i+=Math.max(t,r.trackTime),i-=this.data.getMix(r.animation,e)):i=r.trackTime)),n.delay=i,n},n.prototype.setEmptyAnimation=function(t,e){return(t=this.setAnimationWith(t,n.emptyAnimation,!1)).mixDuration=e,t.trackEnd=e,t},n.prototype.addEmptyAnimation=function(t,e,i){return i<=0&&(i-=e),(t=this.addAnimationWith(t,n.emptyAnimation,!1,i)).mixDuration=e,t.trackEnd=e,t},n.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},n.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},n.prototype.trackEntry=function(e,n,i,r){var a=this.trackEntryPool.obtain();return a.trackIndex=e,a.animation=n,a.loop=i,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=n.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=null==r?0:this.data.getMix(r.animation,n),a.mixBlend=t.MixBlend.replace,a},n.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},n.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,n=this.tracks.length;e<n;e++){var i=this.tracks[e];if(null!=i){for(;null!=i.mixingFrom;)i=i.mixingFrom;for(;null!=i.mixingFrom&&i.mixBlend==t.MixBlend.add||this.computeHold(i),null!=(i=i.mixingTo););}}},n.prototype.computeHold=function(e){var i=e.mixingTo,r=e.animation.timelines,a=e.animation.timelines.length,s=t.Utils.setArraySize(e.timelineMode,a),o=(e.timelineHoldMix.length=0,t.Utils.setArraySize(e.timelineHoldMix,a)),h=this.propertyIDs;if(null!=i&&i.holdPrevious)for(var c=0;c<a;c++)s[c]=h.add(r[c].getPropertyId())?n.HOLD_FIRST:n.HOLD_SUBSEQUENT;else t:for(c=0;c<a;c++){var l=r[c],u=l.getPropertyId();if(h.add(u))if(null==i||l instanceof t.AttachmentTimeline||l instanceof t.DrawOrderTimeline||l instanceof t.EventTimeline||!i.animation.hasTimeline(u))s[c]=n.FIRST;else{for(var d=i.mixingTo;null!=d;d=d.mixingTo)if(!d.animation.hasTimeline(u)){if(0<e.mixDuration){s[c]=n.HOLD_MIX,o[c]=d;continue t}break}s[c]=n.HOLD_FIRST}else s[c]=n.SUBSEQUENT}},n.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},n.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},n.prototype.removeListener=function(t){0<=(t=this.listeners.indexOf(t))&&this.listeners.splice(t,1)},n.prototype.clearListeners=function(){this.listeners.length=0},n.prototype.clearListenerNotifications=function(){this.queue.clear()},n.emptyAnimation=new t.Animation("<empty>",[],0),n.SUBSEQUENT=0,n.FIRST=1,n.HOLD_SUBSEQUENT=2,n.HOLD_FIRST=3,n.HOLD_MIX=4,n.SETUP=1,n.CURRENT=2;var e=n;function n(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new s(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new i})),this.data=e}t.AnimationState=e,r.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},r.prototype.getAnimationTime=function(){var t;return this.loop?0==(t=this.animationEnd-this.animationStart)?this.animationStart:this.trackTime%t+this.animationStart:Math.min(this.trackTime+this.animationStart,this.animationEnd)},r.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},r.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},r.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0};var i=r;function r(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}t.TrackEntry=i,o.prototype.start=function(t){this.objects.push(a.start),this.objects.push(t),this.animState.animationsChanged=!0},o.prototype.interrupt=function(t){this.objects.push(a.interrupt),this.objects.push(t)},o.prototype.end=function(t){this.objects.push(a.end),this.objects.push(t),this.animState.animationsChanged=!0},o.prototype.dispose=function(t){this.objects.push(a.dispose),this.objects.push(t)},o.prototype.complete=function(t){this.objects.push(a.complete),this.objects.push(t)},o.prototype.event=function(t,e){this.objects.push(a.event),this.objects.push(t),this.objects.push(e)},o.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];switch(i){case a.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(r);break;case a.interrupt:for(null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r),s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(r);break;case a.end:for(null!=r.listener&&r.listener.end&&r.listener.end(r),s=0;s<e.length;s++)e[s].end&&e[s].end(r);case a.dispose:for(null!=r.listener&&r.listener.dispose&&r.listener.dispose(r),s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(r);this.animState.trackEntryPool.free(r);break;case a.complete:for(null!=r.listener&&r.listener.complete&&r.listener.complete(r),s=0;s<e.length;s++)e[s].complete&&e[s].complete(r);break;case a.event:var o=t[2+n++];for(null!=r.listener&&r.listener.event&&r.listener.event(r,o),s=0;s<e.length;s++)e[s].event&&e[s].event(r,o)}}this.clear(),this.drainDisabled=!1}},o.prototype.clear=function(){this.objects.length=0};var a,s=o;function o(t){this.objects=[],this.drainDisabled=!1,this.animState=t}function h(){}t.EventQueue=s,(e=a=t.EventType||(t.EventType={}))[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event",h.prototype.start=function(t){},h.prototype.interrupt=function(t){},h.prototype.end=function(t){},h.prototype.dispose=function(t){},h.prototype.complete=function(t){},h.prototype.event=function(t,e){},t.AnimationStateAdapter=h}(R=R||{}),function(t){function e(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}e.prototype.setMix=function(t,e,n){var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);if(null==(t=this.skeletonData.findAnimation(e)))throw new Error("Animation not found: "+e);this.setMixWith(i,t,n)},e.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");t=t.name+"."+e.name,this.animationToMixTime[t]=n},e.prototype.getMix=function(t,e){return t=t.name+"."+e.name,void 0===(e=this.animationToMixTime[t])?this.defaultMix:e},t.AnimationStateData=e}(R=R||{}),function(t){function e(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=e}e.prototype.downloadText=function(t,e,n){var i=new XMLHttpRequest;i.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),i.open("GET",t,!0),i.onload=function(){200==i.status?e(i.responseText):n(i.status,i.responseText)},i.onerror=function(){n(i.status,i.responseText)},i.send()},e.prototype.downloadBinary=function(t,e,n){var i=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status?e(new Uint8Array(i.response)):n(i.status,i.responseText)},i.onerror=function(){n(i.status,i.responseText)},i.send()},e.prototype.setRawDataURI=function(t,e){this.rawDataUris[this.pathPrefix+t]=e},e.prototype.loadBinary=function(t,e,n){var i=this;void 0===e&&(e=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(n){i.assets[t]=n,e&&e(t,n),i.toLoad--,i.loaded++}),(function(e,r){i.errors[t]="Couldn't load binary "+t+": status "+status+", "+r,n&&n(t,"Couldn't load binary "+t+": status "+status+", "+r),i.toLoad--,i.loaded++}))},e.prototype.loadText=function(t,e,n){var i=this;void 0===e&&(e=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(n){i.assets[t]=n,e&&e(t,n),i.toLoad--,i.loaded++}),(function(e,r){i.errors[t]="Couldn't load text "+t+": status "+status+", "+r,n&&n(t,"Couldn't load text "+t+": status "+status+", "+r),i.toLoad--,i.loaded++}))},e.prototype.loadTexture=function(t,e,n){var i=this,r=(void 0===e&&(e=null),void 0===n&&(n=null),t=this.pathPrefix+t),a=(this.toLoad++,new Image);a.crossOrigin="anonymous",a.onload=function(n){var s=i.textureLoader(a);i.assets[r]=s,i.toLoad--,i.loaded++,e&&e(t,a)},a.onerror=function(e){i.errors[t]="Couldn't load image "+t,i.toLoad--,i.loaded++,n&&n(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.src=t},e.prototype.loadTextureAtlas=function(e,n,i){var r=this,a=(void 0===n&&(n=null),void 0===i&&(i=null),0<=e.lastIndexOf("/")?e.substring(0,e.lastIndexOf("/")):"");e=this.pathPrefix+e,this.toLoad++,this.downloadText(e,(function(s){var o={count:0},h=new Array;try{new t.TextureAtlas(s,(function(e){return h.push(""==a?e:a+"/"+e),(e=document.createElement("img")).width=16,e.height=16,new t.FakeTexture(e)}))}catch(l){var c=l;return r.errors[e]="Couldn't load texture atlas "+e+": "+c.message,i&&i(e,"Couldn't load texture atlas "+e+": "+c.message),r.toLoad--,void r.loaded++}for(var l=0,u=h;l<u.length;l++)!function(c){var l=!1;r.loadTexture(c,(function(c,u){if(o.count++,o.count==h.length)if(l)r.errors[e]="Couldn't load texture atlas page "+c+"} of atlas "+e,i&&i(e,"Couldn't load texture atlas page "+c+" of atlas "+e),r.toLoad--,r.loaded++;else try{var d=new t.TextureAtlas(s,(function(t){return r.get(""==a?t:a+"/"+t)}));r.assets[e]=d,n&&n(e,d),r.toLoad--,r.loaded++}catch(u){c=u,r.errors[e]="Couldn't load texture atlas "+e+": "+c.message,i&&i(e,"Couldn't load texture atlas "+e+": "+c.message),r.toLoad--,r.loaded++}}),(function(t,n){l=!0,o.count++,o.count==h.length&&(r.errors[e]="Couldn't load texture atlas page "+t+"} of atlas "+e,i&&i(e,"Couldn't load texture atlas page "+t+" of atlas "+e),r.toLoad--,r.loaded++)}))}(u[l])}),(function(t,n){r.errors[e]="Couldn't load texture atlas "+e+": status "+status+", "+n,i&&i(e,"Couldn't load texture atlas "+e+": status "+status+", "+n),r.toLoad--,r.loaded++}))},e.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},e.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},e.prototype.removeAll=function(){for(var t in this.assets)(t=this.assets[t]).dispose&&t.dispose();this.assets={}},e.prototype.isLoadingComplete=function(){return 0==this.toLoad},e.prototype.getToLoad=function(){return this.toLoad},e.prototype.getLoaded=function(){return this.loaded},e.prototype.dispose=function(){this.removeAll()},e.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},e.prototype.getErrors=function(){return this.errors},t.AssetManager=e}(R=R||{}),function(t){function e(t){this.atlas=t}e.prototype.newRegionAttachment=function(e,n,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+n+")");return r.renderObject=r,(i=new t.RegionAttachment(n)).setRegion(r),i},e.prototype.newMeshAttachment=function(e,n,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+n+")");return r.renderObject=r,(i=new t.MeshAttachment(n)).region=r,i},e.prototype.newBoundingBoxAttachment=function(e,n){return new t.BoundingBoxAttachment(n)},e.prototype.newPathAttachment=function(e,n){return new t.PathAttachment(n)},e.prototype.newPointAttachment=function(e,n){return new t.PointAttachment(n)},e.prototype.newClippingAttachment=function(e,n){return new t.ClippingAttachment(n)},t.AtlasAttachmentLoader=e}(R=R||{}),(N=(N=R=R||{}).BlendMode||(N.BlendMode={}))[N.Normal=0]="Normal",N[N.Additive=1]="Additive",N[N.Multiply=2]="Multiply",N[N.Screen=3]="Screen",function(t){function e(t,e,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(e,n,i,r,a,s,o){this.ax=e,this.ay=n,this.arotation=i,this.ascaleX=r,this.ascaleY=a,this.ashearX=s,this.ashearY=o,this.appliedValid=!0;var h,c,l,u=this.parent;if(null==u)return g=i+90+o,c=(h=this.skeleton).scaleX,l=h.scaleY,this.a=t.MathUtils.cosDeg(i+s)*r*c,this.b=t.MathUtils.cosDeg(g)*a*c,this.c=t.MathUtils.sinDeg(i+s)*r*l,this.d=t.MathUtils.sinDeg(g)*a*l,this.worldX=e*c+h.x,void(this.worldY=n*l+h.y);var d=u.a,f=u.b,p=u.c,m=u.d;switch(this.worldX=d*e+f*n+u.worldX,this.worldY=p*e+m*n+u.worldY,this.data.transformMode){case t.TransformMode.Normal:var g=i+90+o,v=t.MathUtils.cosDeg(i+s)*r,y=t.MathUtils.cosDeg(g)*a,x=t.MathUtils.sinDeg(i+s)*r,b=t.MathUtils.sinDeg(g)*a;return this.a=d*v+f*x,this.b=d*y+f*b,this.c=p*v+m*x,void(this.d=p*y+m*b);case t.TransformMode.OnlyTranslation:g=i+90+o,this.a=t.MathUtils.cosDeg(i+s)*r,this.b=t.MathUtils.cosDeg(g)*a,this.c=t.MathUtils.sinDeg(i+s)*r,this.d=t.MathUtils.sinDeg(g)*a;break;case t.TransformMode.NoRotationOrReflection:var E=0,A=i+s-(E=1e-4<(w=d*d+p*p)?(w=Math.abs(d*m-f*p)/w,d/=this.skeleton.scaleX,f=(p/=this.skeleton.scaleY)*w,m=d*w,Math.atan2(p,d)*t.MathUtils.radDeg):(p=d=0,90-Math.atan2(m,f)*t.MathUtils.radDeg));E=i+o-E+90,v=t.MathUtils.cosDeg(A)*r,y=t.MathUtils.cosDeg(E)*a,x=t.MathUtils.sinDeg(A)*r,b=t.MathUtils.sinDeg(E)*a;this.a=d*v-f*x,this.b=d*y-f*b,this.c=p*v+m*x,this.d=p*y+m*b;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var w,S=(d*(A=t.MathUtils.cosDeg(i))+f*(E=t.MathUtils.sinDeg(i)))/this.skeleton.scaleX,M=(A=(p*A+m*E)/this.skeleton.scaleY,E=(S*=w=1e-5<(w=Math.sqrt(S*S+A*A))?1/w:w,A*=w,w=Math.sqrt(S*S+A*A),this.data.transformMode==t.TransformMode.NoScale&&d*m-f*p<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(w=-w),Math.PI/2+Math.atan2(A,S)),Math.cos(E)*w);E=Math.sin(E)*w,v=t.MathUtils.cosDeg(s)*r,y=t.MathUtils.cosDeg(90+o)*a,x=t.MathUtils.sinDeg(s)*r,b=t.MathUtils.sinDeg(90+o)*a;this.a=S*v+M*x,this.b=S*y+M*b,this.c=A*v+E*x,this.d=A*y+E*b}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){if(this.appliedValid=!0,null==(s=this.parent))return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var e=s.a,n=s.b,i=s.c,r=1/(e*(o=s.d)-n*i),a=this.worldX-s.worldX,s=this.worldY-s.worldY,o=(s=(this.ax=a*o*r-s*n*r,this.ay=s*e*r-a*i*r,r*o),a=r*e,r*n);e=r*i,n=s*this.a-o*this.c,r=s*this.b-o*this.d,i=a*this.c-e*this.a,s=a*this.d-e*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(n*n+i*i),1e-4<this.ascaleX?(this.ascaleY=(o=n*s-r*i)/this.ascaleX,this.ashearY=Math.atan2(n*r+i*s,o)*t.MathUtils.radDeg,this.arotation=Math.atan2(i,n)*t.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(r*r+s*s),this.ashearY=0,this.arotation=90-Math.atan2(s,r)*t.MathUtils.radDeg)},e.prototype.worldToLocal=function(t){var e=this.a,n=this.b,i=this.c,r=this.d,a=1/(e*r-n*i),s=t.x-this.worldX,o=t.y-this.worldY;return t.x=s*r*a-o*n*a,t.y=o*e*a-s*i*a,t},e.prototype.localToWorld=function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t},e.prototype.worldToLocalRotation=function(e){var n=t.MathUtils.sinDeg(e);e=t.MathUtils.cosDeg(e);return Math.atan2(this.a*n-this.c*e,this.d*e-this.b*n)*t.MathUtils.radDeg+this.rotation-this.shearX},e.prototype.localToWorldRotation=function(e){e-=this.rotation-this.shearX;var n=t.MathUtils.sinDeg(e);e=t.MathUtils.cosDeg(e);return Math.atan2(e*this.c+n*this.d,e*this.a+n*this.b)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var n=this.a,i=this.b,r=this.c,a=this.d,s=t.MathUtils.cosDeg(e);e=t.MathUtils.sinDeg(e);this.a=s*n-e*r,this.b=s*i-e*a,this.c=e*n+s*r,this.d=e*i+s*a,this.appliedValid=!1},t.Bone=e}(R=R||{}),(n=R=R||{}).BoneData=function(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,this.skinRequired=!1,this.color=new n.Color,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r},(N=i=n.TransformMode||(n.TransformMode={}))[N.Normal=0]="Normal",N[N.OnlyTranslation=1]="OnlyTranslation",N[N.NoRotationOrReflection=2]="NoRotationOrReflection",N[N.NoScale=3]="NoScale",N[N.NoScaleOrReflection=4]="NoScaleOrReflection",(R||(R={})).ConstraintData=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n},(R||(R={})).Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},(R||(R={})).EventData=function(t){this.name=t},function(t){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(e,n,i,r,a,s,o){e.appliedValid||e.updateAppliedTransform();var h=e.parent,c=h.a,l=h.b,u=h.c,d=h.d,f=-e.ashearX-e.arotation,p=0,m=0;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:p=n-e.worldX,m=i-e.worldY;break;case t.TransformMode.NoRotationOrReflection:var g=Math.abs(c*d-l*u)/(c*c+u*u),v=c/e.skeleton.scaleX;l=-(y=u/e.skeleton.scaleY)*g*e.skeleton.scaleX,d=v*g*e.skeleton.scaleY;f+=Math.atan2(y,v)*t.MathUtils.radDeg;default:var y,x=c*d-l*u;p=((y=n-h.worldX)*d-(v=i-h.worldY)*l)/x-e.ax,m=(v*c-y*u)/x-e.ay}f+=Math.atan2(m,p)*t.MathUtils.radDeg,e.ascaleX<0&&(f+=180),180<f?f-=360:f<-180&&(f+=360);var b=e.ascaleX,E=e.ascaleY;if(r||a){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:p=n-e.worldX,m=i-e.worldY}var A=e.data.length*b,w=Math.sqrt(p*p+m*m);(r&&w<A||a&&A<w&&1e-4<A)&&(b*=g=(w/A-1)*o+1,s&&(E*=g))}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+f*o,b,E,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,n,i,r,a,s,o,h){if(0==h)n.updateWorldTransform();else{e.appliedValid||e.updateAppliedTransform(),n.appliedValid||n.updateAppliedTransform();var c,l=e.ax,u=e.ay,d=e.ascaleX,f=d,p=e.ascaleY,m=n.ascaleX,g=0,v=0,y=(v=d<0?(d=-d,g=180,-1):(g=0,1),p<0&&(p=-p,v=-v),m<0?(m=-m,180):0),x=n.ax,b=0,E=0,A=0,w=e.a,S=e.b,M=e.c,T=e.d,C=Math.abs(d-p)<=1e-4,I=(A=C?(E=w*x+S*(b=n.ay)+e.worldX,M*x+T*b+e.worldY):(b=0,E=w*x+e.worldX,M*x+e.worldY),w=(j=e.parent).a,S=j.b,M=j.c,1/(w*(T=j.d)-S*M)),P=E-j.worldX,k=A-j.worldY,R=(E=(P*T-k*S)*I-l,A=(k*w-P*M)*I-u,Math.sqrt(E*E+A*A)),L=n.data.length*m;if(R<1e-4)return this.apply1(e,i,r,!1,s,!1,h),void n.updateWorldTransformWith(x,b,0,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY);var O=((P=i-j.worldX)*T-(k=r-j.worldY)*S)*I-l,_=(k*w-P*M)*I-u,D=O*O+_*_;0!=o&&(o*=d*(m+1)/2,0<(A=(E=Math.sqrt(D))-R-L*d+o)&&(D=(O-=(i=(A-o*(1-(i=Math.min(1,A/(2*o))-1)*i))/E)*O)*O+(_-=i*_)*_));t:if(C){(B=(D-R*R-(L*=d)*L)/(2*R*L))<-1?B=-1:1<B&&(B=1,s&&(f*=(Math.sqrt(D)/(R+L)-1)*h+1)),c=Math.acos(B)*a,w=R+L*B,S=L*Math.sin(c),K=Math.atan2(_*w-O*S,O*w+_*S)}else{var B=(w=d*L)*w,N=(S=p*L)*S,F=Math.atan2(_,O);if(0<=(T=(G=-2*N*R)*G-4*(V=N-B)*(M=N*R*R+B*D-B*N))){var U=Math.sqrt(T),G=(U=-(G+(U=G<0?-U:U))/2)/V,V=M/U;if((U=Math.abs(G)<Math.abs(V)?G:V)*U<=D){k=Math.sqrt(D-U*U)*a,K=F-Math.atan2(k,U),c=Math.atan2(k/p,(U-R)/d);break t}}G=t.MathUtils.PI,U=(V=R-w)*V;var Y=0,z=0,W=R+w,H=W*W,X=0;-1<=(M=-w*R/(B-N))&&M<=1&&(M=Math.acos(M),(T=(P=w*Math.cos(M)+R)*P+(k=S*Math.sin(M))*k)<U&&(G=M,U=T,V=P,Y=k),H<T&&(z=M,H=T,W=P,X=k)),c=D<=(U+H)/2?(K=F-Math.atan2(Y*a,V),G*a):(K=F-Math.atan2(X*a,W),z*a)}r=Math.atan2(b,x)*v;var K,j=e.arotation;180<(K=(K-r)*t.MathUtils.radDeg+g-j)?K-=360:K<-180&&(K+=360),e.updateWorldTransformWith(l,u,j+K*h,f,e.ascaleY,0,0),j=n.arotation,180<(c=((c+r)*t.MathUtils.radDeg-n.ashearX)*v+y-j)?c-=360:c<-180&&(c+=360),n.updateWorldTransformWith(x,b,j+c*h,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY)}},t.IkConstraint=e}(R=R||{}),N=R=R||{},r=N.ConstraintData,O(_,r),N.IkConstraintData=_,function(t){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var n=this.target.getAttachment();if(n instanceof t.PathAttachment){var i=this.rotateMix,r=this.translateMix,a=0<i;if(0<r||a){var s=this.data,o=s.spacingMode==t.SpacingMode.Percent,h=s.rotateMode,c=h==t.RotateMode.Tangent,l=h==t.RotateMode.ChainScale,u=this.bones.length,d=c?u:u+1,f=this.bones,p=t.Utils.setArraySize(this.spaces,d),m=null,g=this.spacing;if(l||!o){l&&(m=t.Utils.setArraySize(this.lengths,u));for(var v=s.spacingMode==t.SpacingMode.Length,y=0,x=d-1;y<x;){var b,E=(C=f[y]).data.length;E<e.epsilon?(l&&(m[y]=0),p[++y]=0):o?(l&&(P=E*C.a,k=E*C.c,b=Math.sqrt(P*P+k*k),m[y]=b),p[++y]=g):(P=E*C.a,k=E*C.c,b=Math.sqrt(P*P+k*k),l&&(m[y]=b),p[++y]=(v?E+g:g)*b/E)}}else for(y=1;y<d;y++)p[y]=g;var A=this.computeWorldPositions(n,d,c,s.positionMode==t.PositionMode.Percent,o),w=A[0],S=A[1],M=s.offsetRotation,T=!1;0==M?T=h==t.RotateMode.Chain:(T=!1,M*=0<(I=this.target.bone).a*I.d-I.b*I.c?t.MathUtils.degRad:-t.MathUtils.degRad);y=0;for(var C,I=3;y<u;y++,I+=3){(C=f[y]).worldX+=(w-C.worldX)*r,C.worldY+=(S-C.worldY)*r;var P,k,R,L,O,_,D,B,N,F,U=(P=A[I])-w,G=(k=A[I+1])-S;!l||0!=(R=m[y])&&(R=(Math.sqrt(U*U+G*G)/R-1)*i+1,C.a*=R,C.c*=R),w=P,S=k,a&&(R=C.a,L=C.b,O=C.c,_=C.d,B=D=F=0,F=c?A[I-1]:0==p[y+1]?A[I+2]:Math.atan2(G,U),F-=Math.atan2(O,R),T?(D=Math.cos(F),B=Math.sin(F),w+=((N=C.data.length)*(D*R-B*O)-U)*i,S+=(N*(B*R+D*O)-G)*i):F+=M,F>t.MathUtils.PI?F-=t.MathUtils.PI2:F<-t.MathUtils.PI&&(F+=t.MathUtils.PI2),F*=i,D=Math.cos(F),B=Math.sin(F),C.a=D*R-B*O,C.b=D*L-B*_,C.c=B*R+D*O,C.d=B*L+D*_),C.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(n,i,r,a,s){var o=this.target,h=this.position,c=this.spaces,l=t.Utils.setArraySize(this.positions,3*i+2),u=null,d=n.closed,f=n.worldVerticesLength,p=f/6,m=e.NONE;if(n.constantSpeed){d?(u=t.Utils.setArraySize(this.world,f+=2),n.computeWorldVertices(o,2,f-4,u,0,2),n.computeWorldVertices(o,0,2,u,f-4,2),u[f-2]=u[0],u[f-1]=u[1]):(p--,u=t.Utils.setArraySize(this.world,f-=4),n.computeWorldVertices(o,2,f,u,0,2));for(var g=t.Utils.setArraySize(this.curves,p),v=0,y=u[0],x=u[1],b=0,E=0,A=0,w=0,S=0,M=0,T=0,C=0,I=0,P=0,k=0,R=0,L=0,O=0,_=0,D=2;_<p;_++,D+=6)b=u[D],E=u[D+1],A=u[D+2],w=u[D+3],k=2*(T=.1875*(y-2*b+A))+(I=.09375*(3*(b-A)-y+(S=u[D+4]))),R=2*(C=.1875*(x-2*E+w))+(P=.09375*(3*(E-w)-x+(M=u[D+5]))),L=.75*(b-y)+T+.16666667*I,O=.75*(E-x)+C+.16666667*P,v+=Math.sqrt(L*L+O*O),L+=k,O+=R,k+=I,R+=P,v+=Math.sqrt(L*L+O*O),L+=k,O+=R,v+=Math.sqrt(L*L+O*O),L+=k+I,O+=R+P,v+=Math.sqrt(L*L+O*O),g[_]=v,y=S,x=M;if(h*=a?v:v/n.lengths[p-1],s)for(_=1;_<i;_++)c[_]*=v;for(var B=this.segments,N=0,F=(_=0,0),U=0,G=0;_<i;_++,F+=3){if(K=h+=X=c[_],d)(K%=v)<0&&(K+=v),U=0;else{if(K<0){this.addBeforePosition(K,u,0,l,F);continue}if(v<K){this.addAfterPosition(K-v,u,f-4,l,F);continue}}for(;;U++){var V=g[U];if(!(V<K)){0==U?K/=V:K=(K-(j=g[U-1]))/(V-j);break}}if(U!=m){m=U;var Y=6*U;y=u[Y],x=u[Y+1],b=u[Y+2],E=u[Y+3],A=u[Y+4],w=u[Y+5],k=2*(T=.03*(y-2*b+A))+(I=.006*(3*(b-A)-y+(S=u[Y+6]))),R=2*(C=.03*(x-2*E+w))+(P=.006*(3*(E-w)-x+(M=u[Y+7]))),L=.3*(b-y)+T+.16666667*I,O=.3*(E-x)+C+.16666667*P,N=Math.sqrt(L*L+O*O);for(B[0]=N,Y=1;Y<8;Y++)L+=k,O+=R,k+=I,R+=P,N+=Math.sqrt(L*L+O*O),B[Y]=N;L+=k,O+=R,N+=Math.sqrt(L*L+O*O),B[8]=N,L+=k+I,O+=R+P,N+=Math.sqrt(L*L+O*O),B[9]=N,G=0}for(K*=N;;G++){var z=B[G];if(!(z<K)){0==G?K/=z:K=G+(K-(j=B[G-1]))/(z-j);break}}this.addCurvePosition(.1*K,y,x,b,E,A,w,S,M,l,F,r||0<_&&0==X)}}else{var W=n.lengths,H=W[p-=d?1:2];if(a&&(h*=H),s)for(_=1;_<i;_++)c[_]*=H;for(u=t.Utils.setArraySize(this.world,8),_=0,F=0,U=0;_<i;_++,F+=3){var X,K=h+=X=c[_];if(d)(K%=H)<0&&(K+=H),U=0;else{if(K<0){m!=e.BEFORE&&(m=e.BEFORE,n.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(K,u,0,l,F);continue}if(H<K){m!=e.AFTER&&(m=e.AFTER,n.computeWorldVertices(o,f-6,4,u,0,2)),this.addAfterPosition(K-H,u,0,l,F);continue}}for(;;U++){var j,q=W[U];if(!(q<K)){0==U?K/=q:K=(K-(j=W[U-1]))/(q-j);break}}U!=m&&(m=U,d&&U==p?(n.computeWorldVertices(o,f-4,4,u,0,2),n.computeWorldVertices(o,0,4,u,4,2)):n.computeWorldVertices(o,6*U+2,8,u,0,2)),this.addCurvePosition(K,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,F,r||0<_&&0==X)}}return l},e.prototype.addBeforePosition=function(t,e,n,i,r){var a=e[n],s=e[n+1],o=e[n+2]-a;e=e[n+3]-s,n=Math.atan2(e,o);i[r]=a+t*Math.cos(n),i[r+1]=s+t*Math.sin(n),i[r+2]=n},e.prototype.addAfterPosition=function(t,e,n,i,r){var a=e[n+2],s=e[n+3],o=a-e[n];e=s-e[n+1],n=Math.atan2(e,o);i[r]=a+t*Math.cos(n),i[r+1]=s+t*Math.sin(n),i[r+2]=n},e.prototype.addCurvePosition=function(t,e,n,i,r,a,s,o,h,c,l,u){if(0==t||isNaN(t))return c[l]=e,c[l+1]=n,void(c[l+2]=Math.atan2(r-n,i-e));var d,f,p=t*t,m=p*t,g=(d=1-t)*d,v=d*t,y=(o=e*(y=g*d)+i*(d=d*(f=3*v))+a*(f=f*t)+o*m,n*y+r*d+s*f+h*m);c[l]=o,c[l+1]=y,u&&(c[l+2]=t<.001?Math.atan2(r-n,i-e):Math.atan2(y-(n*g+r*v*2+s*p),o-(e*g+i*v*2+a*p)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,t.PathConstraint=e}(R=R||{}),N=R=R||{},a=N.ConstraintData,O(D,a),W=D,N.PathConstraintData=W,(W=N.PositionMode||(N.PositionMode={}))[W.Fixed=0]="Fixed",W[W.Percent=1]="Percent",(W=N.SpacingMode||(N.SpacingMode={}))[W.Length=0]="Length",W[W.Fixed=1]="Fixed",W[W.Percent=2]="Percent",(W=N.RotateMode||(N.RotateMode={}))[W.Tangent=0]="Tangent",W[W.Chain=1]="Chain",W[W.ChainScale=2]="ChainScale",function(t){n.prototype.loaded=function(){var t,e=0;for(t in this.assets)e++;return e};var e=n;function n(t){this.toLoad=new Array,this.assets={},this.clientId=t}function i(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}i.prototype.queueAsset=function(t,n,i){var r=this.clientAssets[t];return null==r&&(r=new e(t),this.clientAssets[t]=r),null!==n&&(r.textureLoader=n),r.toLoad.push(i),this.queuedAssets[i]!==i&&(this.queuedAssets[i]=i,!0)},i.prototype.loadText=function(t,e){var n,i=this;e=this.pathPrefix+e,this.queueAsset(t,null,e)&&((n=new XMLHttpRequest).overrideMimeType("text/html"),n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?i.rawAssets[e]=n.responseText:i.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send())},i.prototype.loadJson=function(t,e){var n,i=this;e=this.pathPrefix+e,this.queueAsset(t,null,e)&&((n=new XMLHttpRequest).overrideMimeType("text/html"),n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?i.rawAssets[e]=JSON.parse(n.responseText):i.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send())},i.prototype.loadTexture=function(t,e,n){var i,r=this;n=this.pathPrefix+n,this.queueAsset(t,e,n)&&("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document||"undefined"==typeof importScripts?((i=new Image).crossOrigin="anonymous",i.onload=function(t){r.rawAssets[n]=i},i.onerror=function(t){r.errors[n]="Couldn't load image "+n},i.src=n):fetch(n,{mode:"cors"}).then((function(t){return t.ok||(r.errors[n]="Couldn't load image "+n),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){r.rawAssets[n]=t})))},i.prototype.get=function(t,e){return e=this.pathPrefix+e,null==(t=this.clientAssets[t])||t.assets[e]},i.prototype.updateClientAssets=function(t){for(var e=!("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document)&&"undefined"!=typeof importScripts,n=0;n<t.toLoad.length;n++){var i=t.toLoad[n],r=t.assets[i];null!=r||null!=(r=this.rawAssets[i])&&(e?r instanceof ImageBitmap?t.assets[i]=t.textureLoader(r):t.assets[i]=r:r instanceof HTMLImageElement?t.assets[i]=t.textureLoader(r):t.assets[i]=r)}},i.prototype.isLoadingComplete=function(t){return null==(t=this.clientAssets[t])||(this.updateClientAssets(t),t.toLoad.length==t.loaded())},i.prototype.dispose=function(){},i.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},i.prototype.getErrors=function(){return this.errors},t.SharedAssetManager=i}(R=R||{}),function(t){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i,r=e.bones[n],a=void 0;null==r.parent?a=new t.Bone(r,this,null):(i=this.bones[r.parent.index],a=new t.Bone(r,this,i),i.children.push(a)),this.bones.push(a)}for(this.slots=new Array,this.drawOrder=new Array,n=0;n<e.slots.length;n++){var s=e.slots[n];a=this.bones[s.boneData.index],s=new t.Slot(s,a);this.slots.push(s),this.drawOrder.push(s)}for(this.ikConstraints=new Array,n=0;n<e.ikConstraints.length;n++){var o=e.ikConstraints[n];this.ikConstraints.push(new t.IkConstraint(o,this))}for(this.transformConstraints=new Array,n=0;n<e.transformConstraints.length;n++){var h=e.transformConstraints[n];this.transformConstraints.push(new t.TransformConstraint(h,this))}for(this.pathConstraints=new Array,n=0;n<e.pathConstraints.length;n++){var c=e.pathConstraints[n];this.pathConstraints.push(new t.PathConstraint(c,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)(r=t[e]).sorted=r.data.skinRequired,r.active=!r.sorted;if(null!=this.skin){var i=this.skin.bones;for(e=0,n=this.skin.bones.length;e<n;e++)for(var r=this.bones[i[e].index];r.sorted=!1,r.active=!0,null!=(r=r.parent););}var a=this.ikConstraints,s=this.transformConstraints,o=this.pathConstraints,h=a.length,c=s.length,l=o.length,u=h+c+l;t:for(e=0;e<u;e++){for(var d=0;d<h;d++)if((f=a[d]).data.order==e){this.sortIkConstraint(f);continue t}for(d=0;d<c;d++)if((f=s[d]).data.order==e){this.sortTransformConstraint(f);continue t}var f;for(d=0;d<l;d++)if((f=o[d]).data.order==e){this.sortPathConstraint(f);continue t}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(e){var n,i,r;e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active&&(n=e.target,this.sortBone(n),i=(n=e.bones)[0],this.sortBone(i),1<n.length&&(r=n[n.length-1],-1<this._updateCache.indexOf(r)||this.updateCacheReset.push(r)),this._updateCache.push(e),this.sortReset(i.children),n[n.length-1].sorted=!0)},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var n=(s=e.target).data.index,i=s.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var r=0,a=this.data.skins.length;r<a;r++)this.sortPathConstraintAttachment(this.data.skins[r],n,i);var s,o=((s=s.getAttachment())instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(s,i),e.bones),h=o.length;for(r=0;r<h;r++)this.sortBone(o[r]);for(this._updateCache.push(e),r=0;r<h;r++)this.sortReset(o[r].children);for(r=0;r<h;r++)o[r].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var n=e.bones,i=n.length;if(e.data.local)for(var r=0;r<i;r++){var a=n[r];this.sortBone(a.parent),-1<this._updateCache.indexOf(a)||this.updateCacheReset.push(a)}else for(r=0;r<i;r++)this.sortBone(n[r]);this._updateCache.push(e);for(var s=0;s<i;s++)this.sortReset(n[s].children);for(s=0;s<i;s++)n[s].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,n){var i=t.attachments[e];if(i)for(var r in i)this.sortPathConstraintAttachmentWith(i[r],n)},e.prototype.sortPathConstraintAttachmentWith=function(e,n){if(e instanceof t.PathAttachment){var i=e.bones;if(null==i)this.sortBone(n);else for(var r=this.bones,a=0;a<i.length;)for(var s=i[a++],o=a+s;a<o;a++){var h=i[a];this.sortBone(r[h])}}},e.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},e.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}var r=this._updateCache;for(e=0,n=r.length;e<n;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var i=this.ikConstraints;for(e=0,n=i.length;e<n;e++)(o=i[e]).mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch;var r=this.transformConstraints;for(e=0,n=r.length;e<n;e++){var a=(o=r[e]).data;o.rotateMix=a.rotateMix,o.translateMix=a.translateMix,o.scaleMix=a.scaleMix,o.shearMix=a.shearMix}var s=this.pathConstraints;for(e=0,n=s.length;e<n;e++){var o;a=(o=s[e]).data;o.position=a.position,o.spacing=a.spacing,o.rotateMix=a.rotateMix,o.translateMix=a.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var n=0,i=e.length;n<i;n++)e[n].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n],a=r.data.attachmentName;null==a||null!=(a=t.getAttachment(n,a))&&r.setAttachment(a)}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,r=n.length;i<r;i++){var a=n[i];if(a.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(i,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,n,i){if(void 0===i&&(i=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==n)throw new Error("size cannot be null.");for(var r=this.drawOrder,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,c=0,l=r.length;c<l;c++){var u=r[c];if(u.bone.active){var d=0,f=null,p=u.getAttachment();if(p instanceof t.RegionAttachment?(f=t.Utils.setArraySize(i,d=8,0),p.computeWorldVertices(u.bone,f,0,2)):p instanceof t.MeshAttachment&&(d=(p=p).worldVerticesLength,f=t.Utils.setArraySize(i,d,0),p.computeWorldVertices(u,0,d,f,0,2)),null!=f)for(var m=0,g=f.length;m<g;m+=2){var v=f[m],y=f[m+1];a=Math.min(a,v),s=Math.min(s,y),o=Math.max(o,v),h=Math.max(h,y)}}}e.set(a,s),n.set(o-a,h-s)},e.prototype.update=function(t){this.time+=t},t.Skeleton=e}(R=R||{});var B=R=R||{},N=(F.prototype.readSkeletonData=function(t){var e=this.scale,n=new B.SkeletonData,i=(n.name="",new U(t));if(n.hash=i.readString(),n.version=i.readString(),"3.8.75"==n.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();for(var r=i.readBoolean(),a=(r&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString()),0),s=(a=i.readInt(!0),0);s<a;s++)i.strings.push(i.readString());for(a=i.readInt(!0),s=0;s<a;s++){var o=i.readString(),h=0==s?null:n.bones[i.readInt(!0)];(u=new B.BoneData(s,o,h)).rotation=i.readFloat(),u.x=i.readFloat()*e,u.y=i.readFloat()*e,u.scaleX=i.readFloat(),u.scaleY=i.readFloat(),u.shearX=i.readFloat(),u.shearY=i.readFloat(),u.length=i.readFloat()*e,u.transformMode=F.TransformModeValues[i.readInt(!0)],u.skinRequired=i.readBoolean(),r&&B.Color.rgba8888ToColor(u.color,i.readInt32()),n.bones.push(u)}for(a=i.readInt(!0),s=0;s<a;s++){var c=i.readString(),l=n.bones[i.readInt(!0)],u=new B.SlotData(s,c,l);-1!=(c=(B.Color.rgba8888ToColor(u.color,i.readInt32()),i.readInt32()))&&B.Color.rgb888ToColor(u.darkColor=new B.Color,c),u.attachmentName=i.readStringRef(),u.blendMode=F.BlendModeValues[i.readInt(!0)],n.slots.push(u)}a=i.readInt(!0);s=0;for(var d=void 0;s<a;s++){(u=new B.IkConstraintData(i.readString())).order=i.readInt(!0),u.skinRequired=i.readBoolean(),d=i.readInt(!0);for(var f=0;f<d;f++)u.bones.push(n.bones[i.readInt(!0)]);u.target=n.bones[i.readInt(!0)],u.mix=i.readFloat(),u.softness=i.readFloat()*e,u.bendDirection=i.readByte(),u.compress=i.readBoolean(),u.stretch=i.readBoolean(),u.uniform=i.readBoolean(),n.ikConstraints.push(u)}for(a=i.readInt(!0),s=0,d=void 0;s<a;s++){for((u=new B.TransformConstraintData(i.readString())).order=i.readInt(!0),u.skinRequired=i.readBoolean(),d=i.readInt(!0),f=0;f<d;f++)u.bones.push(n.bones[i.readInt(!0)]);u.target=n.bones[i.readInt(!0)],u.local=i.readBoolean(),u.relative=i.readBoolean(),u.offsetRotation=i.readFloat(),u.offsetX=i.readFloat()*e,u.offsetY=i.readFloat()*e,u.offsetScaleX=i.readFloat(),u.offsetScaleY=i.readFloat(),u.offsetShearY=i.readFloat(),u.rotateMix=i.readFloat(),u.translateMix=i.readFloat(),u.scaleMix=i.readFloat(),u.shearMix=i.readFloat(),n.transformConstraints.push(u)}for(a=i.readInt(!0),s=0,d=void 0;s<a;s++){for((u=new B.PathConstraintData(i.readString())).order=i.readInt(!0),u.skinRequired=i.readBoolean(),d=i.readInt(!0),f=0;f<d;f++)u.bones.push(n.bones[i.readInt(!0)]);u.target=n.slots[i.readInt(!0)],u.positionMode=F.PositionModeValues[i.readInt(!0)],u.spacingMode=F.SpacingModeValues[i.readInt(!0)],u.rotateMode=F.RotateModeValues[i.readInt(!0)],u.offsetRotation=i.readFloat(),u.position=i.readFloat(),u.positionMode==B.PositionMode.Fixed&&(u.position*=e),u.spacing=i.readFloat(),u.spacingMode!=B.SpacingMode.Length&&u.spacingMode!=B.SpacingMode.Fixed||(u.spacing*=e),u.rotateMix=i.readFloat(),u.translateMix=i.readFloat(),n.pathConstraints.push(u)}null!=(t=this.readSkin(i,n,!0,r))&&(n.defaultSkin=t,n.skins.push(t)),s=n.skins.length;for(B.Utils.setArraySize(n.skins,a=s+i.readInt(!0));s<a;s++)n.skins[s]=this.readSkin(i,n,!1,r);for(a=this.linkedMeshes.length,s=0;s<a;s++){var p=this.linkedMeshes[s],m=null==p.skin?n.defaultSkin:n.findSkin(p.skin);if(null==m)throw new Error("Skin not found: "+p.skin);if(null==(m=m.getAttachment(p.slotIndex,p.parent)))throw new Error("Parent mesh not found: "+p.parent);p.mesh.deformAttachment=p.inheritDeform?m:p.mesh,p.mesh.setParentMesh(m),p.mesh.updateUVs()}for(this.linkedMeshes.length=0,a=i.readInt(!0),s=0;s<a;s++)(u=new B.EventData(i.readStringRef())).intValue=i.readInt(!1),u.floatValue=i.readFloat(),u.stringValue=i.readString(),u.audioPath=i.readString(),null!=u.audioPath&&(u.volume=i.readFloat(),u.balance=i.readFloat()),n.events.push(u);for(a=i.readInt(!0),s=0;s<a;s++)n.animations.push(this.readAnimation(i,i.readString(),n));return n},F.prototype.readSkin=function(t,e,n,i){var r=null,a=0;if(n){if(0==(a=t.readInt(!0)))return null;r=new B.Skin("default")}else{(r=new B.Skin(t.readStringRef())).bones.length=t.readInt(!0);for(var s=0,o=r.bones.length;s<o;s++)r.bones[s]=e.bones[t.readInt(!0)];for(s=0,o=t.readInt(!0);s<o;s++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(s=0,o=t.readInt(!0);s<o;s++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(s=0,o=t.readInt(!0);s<o;s++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);a=t.readInt(!0)}for(s=0;s<a;s++)for(var h=t.readInt(!0),c=0,l=t.readInt(!0);c<l;c++){var u=t.readStringRef(),d=this.readAttachment(t,e,r,h,u,i);null!=d&&r.setAttachment(h,u,d)}return r},F.prototype.readAttachment=function(t,e,n,i,r,a){var s=this.scale,o=t.readStringRef();null==o&&(o=r),r=t.readByte();switch(F.AttachmentTypeValues[r]){case B.AttachmentType.Region:var h=t.readStringRef(),c=t.readFloat(),l=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readInt32();return null==(x=(null==h&&(h=o),this.attachmentLoader.newRegionAttachment(n,o,h)))?null:(x.path=h,x.x=l*s,x.y=u*s,x.scaleX=d,x.scaleY=f,x.rotation=c,x.width=p*s,x.height=m*s,B.Color.rgba8888ToColor(x.color,g),x.updateOffset(),x);case B.AttachmentType.BoundingBox:var v=t.readInt(!0),y=this.readVertices(t,v);g=a?t.readInt32():0;return null==(d=this.attachmentLoader.newBoundingBoxAttachment(n,o))?null:(d.worldVerticesLength=v<<1,d.vertices=y.vertices,d.bones=y.bones,a&&B.Color.rgba8888ToColor(d.color,g),d);case B.AttachmentType.Mesh:h=t.readStringRef(),g=t.readInt32(),v=t.readInt(!0),f=this.readFloatArray(t,v<<1,1);var x=this.readShortArray(t),b=(y=this.readVertices(t,v),d=t.readInt(!0),null);p=0,m=0;return a&&(b=this.readShortArray(t),p=t.readFloat(),m=t.readFloat()),null==h&&(h=o),null==(E=this.attachmentLoader.newMeshAttachment(n,o,h))?null:(E.path=h,B.Color.rgba8888ToColor(E.color,g),E.bones=y.bones,E.vertices=y.vertices,E.worldVerticesLength=v<<1,E.triangles=x,E.regionUVs=f,E.updateUVs(),E.hullLength=d<<1,a&&(E.edges=b,E.width=p*s,E.height=m*s),E);case B.AttachmentType.LinkedMesh:var E;h=t.readStringRef(),g=t.readInt32(),x=t.readStringRef(),f=t.readStringRef(),d=t.readBoolean(),p=0,m=0;return a&&(p=t.readFloat(),m=t.readFloat()),null==h&&(h=o),null==(E=this.attachmentLoader.newMeshAttachment(n,o,h))?null:(E.path=h,B.Color.rgba8888ToColor(E.color,g),a&&(E.width=p*s,E.height=m*s),this.linkedMeshes.push(new V(E,x,i,f,d)),E);case B.AttachmentType.Path:b=t.readBoolean(),p=t.readBoolean(),v=t.readInt(!0),y=this.readVertices(t,v);for(var A=B.Utils.newArray(v/3,0),w=0,S=A.length;w<S;w++)A[w]=t.readFloat()*s;return g=a?t.readInt32():0,null==(h=this.attachmentLoader.newPathAttachment(n,o))?null:(h.closed=b,h.constantSpeed=p,h.worldVerticesLength=v<<1,h.vertices=y.vertices,h.bones=y.bones,h.lengths=A,a&&B.Color.rgba8888ToColor(h.color,g),h);case B.AttachmentType.Point:return c=t.readFloat(),l=t.readFloat(),u=t.readFloat(),g=a?t.readInt32():0,null==(m=this.attachmentLoader.newPointAttachment(n,o))?null:(m.x=l*s,m.y=u*s,m.rotation=c,a&&B.Color.rgba8888ToColor(m.color,g),m);case B.AttachmentType.Clipping:return x=t.readInt(!0),v=t.readInt(!0),y=this.readVertices(t,v),g=a?t.readInt32():0,null==(f=this.attachmentLoader.newClippingAttachment(n,o))?null:(f.endSlot=e.slots[x],f.worldVerticesLength=v<<1,f.vertices=y.vertices,f.bones=y.bones,a&&B.Color.rgba8888ToColor(f.color,g),f)}return null},F.prototype.readVertices=function(t,e){var n=e<<1,i=new Y,r=this.scale;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,n,r),i;for(var a=new Array,s=new Array,o=0;o<e;o++){var h=t.readInt(!0);s.push(h);for(var c=0;c<h;c++)s.push(t.readInt(!0)),a.push(t.readFloat()*r),a.push(t.readFloat()*r),a.push(t.readFloat())}return i.vertices=B.Utils.toFloatArray(a),i.bones=s,i},F.prototype.readFloatArray=function(t,e,n){var i=new Array(e);if(1==n)for(var r=0;r<e;r++)i[r]=t.readFloat();else for(r=0;r<e;r++)i[r]=t.readFloat()*n;return i},F.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),i=0;i<e;i++)n[i]=t.readShort();return n},F.prototype.readAnimation=function(t,e,n){for(var i=new Array,r=this.scale,a=0,s=new B.Color,o=new B.Color,h=0,c=t.readInt(!0);h<c;h++)for(var l=t.readInt(!0),u=0,d=t.readInt(!0);u<d;u++){var f=t.readByte(),p=t.readInt(!0);switch(f){case F.SLOT_ATTACHMENT:(y=new B.AttachmentTimeline(p)).slotIndex=l;for(var m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readStringRef());i.push(y),a=Math.max(a,y.frames[p-1]);break;case F.SLOT_COLOR:for((y=new B.ColorTimeline(p)).slotIndex=l,m=0;m<p;m++){var g=t.readFloat();B.Color.rgba8888ToColor(s,t.readInt32()),y.setFrame(m,g,s.r,s.g,s.b,s.a),m<p-1&&this.readCurve(t,m,y)}i.push(y),a=Math.max(a,y.frames[(p-1)*B.ColorTimeline.ENTRIES]);break;case F.SLOT_TWO_COLOR:for((y=new B.TwoColorTimeline(p)).slotIndex=l,m=0;m<p;m++)g=t.readFloat(),B.Color.rgba8888ToColor(s,t.readInt32()),B.Color.rgb888ToColor(o,t.readInt32()),y.setFrame(m,g,s.r,s.g,s.b,s.a,o.r,o.g,o.b),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.TwoColorTimeline.ENTRIES])}}for(h=0,c=t.readInt(!0);h<c;h++){var v=t.readInt(!0);for(u=0,d=t.readInt(!0);u<d;u++)switch(f=t.readByte(),p=t.readInt(!0),f){case F.BONE_ROTATE:for((y=new B.RotateTimeline(p)).boneIndex=v,m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readFloat()),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.RotateTimeline.ENTRIES]);break;case F.BONE_TRANSLATE:case F.BONE_SCALE:case F.BONE_SHEAR:var y=void 0,x=1;for(f==F.BONE_SCALE?y=new B.ScaleTimeline(p):f==F.BONE_SHEAR?y=new B.ShearTimeline(p):(y=new B.TranslateTimeline(p),x=r),y.boneIndex=v,m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readFloat()*x,t.readFloat()*x),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.TranslateTimeline.ENTRIES])}}for(h=0,c=t.readInt(!0);h<c;h++){var b=t.readInt(!0);p=t.readInt(!0);for((y=new B.IkConstraintTimeline(p)).ikConstraintIndex=b,m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat()*r,t.readByte(),t.readBoolean(),t.readBoolean()),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.IkConstraintTimeline.ENTRIES])}for(h=0,c=t.readInt(!0);h<c;h++){for(b=t.readInt(!0),p=t.readInt(!0),(y=new B.TransformConstraintTimeline(p)).transformConstraintIndex=b,m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.TransformConstraintTimeline.ENTRIES])}for(h=0,c=t.readInt(!0);h<c;h++){b=t.readInt(!0);var E=n.pathConstraints[b];for(u=0,d=t.readInt(!0);u<d;u++)switch(f=t.readByte(),p=t.readInt(!0),f){case F.PATH_POSITION:case F.PATH_SPACING:y=void 0,x=1;for(f==F.PATH_SPACING?(y=new B.PathConstraintSpacingTimeline(p),E.spacingMode!=B.SpacingMode.Length&&E.spacingMode!=B.SpacingMode.Fixed||(x=r)):(y=new B.PathConstraintPositionTimeline(p),E.positionMode==B.PositionMode.Fixed&&(x=r)),y.pathConstraintIndex=b,m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readFloat()*x),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.PathConstraintPositionTimeline.ENTRIES]);break;case F.PATH_MIX:for((y=new B.PathConstraintMixTimeline(p)).pathConstraintIndex=b,m=0;m<p;m++)y.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat()),m<p-1&&this.readCurve(t,m,y);i.push(y),a=Math.max(a,y.frames[(p-1)*B.PathConstraintMixTimeline.ENTRIES])}}for(h=0,c=t.readInt(!0);h<c;h++){var A=n.skins[t.readInt(!0)];for(u=0,d=t.readInt(!0);u<d;u++){l=t.readInt(!0);for(var w=0,S=t.readInt(!0);w<S;w++){var M=A.getAttachment(l,t.readStringRef()),T=null!=M.bones,C=M.vertices,I=T?C.length/3*2:C.length;p=t.readInt(!0);for((y=new B.DeformTimeline(p)).slotIndex=l,y.attachment=M,m=0;m<p;m++){g=t.readFloat();var P=void 0,k=t.readInt(!0);if(0==k)P=T?B.Utils.newFloatArray(I):C;else{P=B.Utils.newFloatArray(I);var R=t.readInt(!0);if(k+=R,1==r)for(var L=R;L<k;L++)P[L]=t.readFloat();else for(L=R;L<k;L++)P[L]=t.readFloat()*r;if(!T){L=0;for(var O=P.length;L<O;L++)P[L]+=C[L]}}y.setFrame(m,g,P),m<p-1&&this.readCurve(t,m,y)}i.push(y),a=Math.max(a,y.frames[p-1])}}}var _=t.readInt(!0);if(0<_){y=new B.DrawOrderTimeline(_);var D=n.slots.length;for(h=0;h<_;h++){g=t.readFloat();var N=t.readInt(!0),U=B.Utils.newArray(D,0);for(u=D-1;0<=u;u--)U[u]=-1;var G=B.Utils.newArray(D-N,0),V=0,Y=0;for(u=0;u<N;u++){for(l=t.readInt(!0);V!=l;)G[Y++]=V++;U[V+t.readInt(!0)]=V++}for(;V<D;)G[Y++]=V++;for(u=D-1;0<=u;u--)-1==U[u]&&(U[u]=G[--Y]);y.setFrame(h,g,U)}i.push(y),a=Math.max(a,y.frames[_-1])}var z=t.readInt(!0);if(0<z){for(y=new B.EventTimeline(z),h=0;h<z;h++){g=t.readFloat();var W=n.events[t.readInt(!0)],H=new B.Event(g,W);H.intValue=t.readInt(!1),H.floatValue=t.readFloat(),H.stringValue=t.readBoolean()?t.readString():W.stringValue,null!=H.data.audioPath&&(H.volume=t.readFloat(),H.balance=t.readFloat()),y.setFrame(h,H)}i.push(y),a=Math.max(a,y.frames[z-1])}return new B.Animation(e,i,a)},F.prototype.readCurve=function(t,e,n){switch(t.readByte()){case F.CURVE_STEPPED:n.setStepped(e);break;case F.CURVE_BEZIER:this.setCurve(n,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},F.prototype.setCurve=function(t,e,n,i,r,a){t.setCurve(e,n,i,r,a)},F.AttachmentTypeValues=[0,1,2,3,4,5,6],F.TransformModeValues=[B.TransformMode.Normal,B.TransformMode.OnlyTranslation,B.TransformMode.NoRotationOrReflection,B.TransformMode.NoScale,B.TransformMode.NoScaleOrReflection],F.PositionModeValues=[B.PositionMode.Fixed,B.PositionMode.Percent],F.SpacingModeValues=[B.SpacingMode.Length,B.SpacingMode.Fixed,B.SpacingMode.Percent],F.RotateModeValues=[B.RotateMode.Tangent,B.RotateMode.Chain,B.RotateMode.ChainScale],F.BlendModeValues=[B.BlendMode.Normal,B.BlendMode.Additive,B.BlendMode.Multiply,B.BlendMode.Screen],F.BONE_ROTATE=0,F.BONE_TRANSLATE=1,F.BONE_SCALE=2,F.BONE_SHEAR=3,F.SLOT_ATTACHMENT=0,F.SLOT_COLOR=1,F.SLOT_TWO_COLOR=2,F.PATH_POSITION=0,F.PATH_SPACING=1,F.PATH_MIX=2,F.CURVE_LINEAR=0,F.CURVE_STEPPED=1,F.CURVE_BEZIER=2,F);function F(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}B.SkeletonBinary=N,G.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},G.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},G.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},G.prototype.readInt=function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(n|=(127&this.readByte())<<28)))),t?n:n>>>1^-(1&n)},G.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},G.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var i=this.readByte();switch(i>>4){case 12:case 13:e+=String.fromCharCode((31&i)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&i)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(i),n++}}return e},G.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},G.prototype.readBoolean=function(){return 0!=this.readByte()};var U=G;function G(t,e,n,i){void 0===e&&(e=new Array),void 0===n&&(n=0),void 0===i&&(i=new DataView(t.buffer)),this.strings=e,this.index=n,this.buffer=i}var V=function(t,e,n,i,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i,this.inheritDeform=r},Y=function(t,e){void 0===e&&(e=null),this.bones=t=void 0===t?null:t,this.vertices=e};function z(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}!function(t){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}e.prototype.update=function(e,n){if(null==e)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,r=this.polygons,a=this.polygonPool,s=e.slots,o=s.length;i.length=0,a.freeAll(r);for(var h=r.length=0;h<o;h++){var c,l,u=s[h];u.bone.active&&(c=u.getAttachment())instanceof t.BoundingBoxAttachment&&(i.push(c=c),(l=a.obtain()).length!=c.worldVerticesLength&&(l=t.Utils.newFloatArray(c.worldVerticesLength)),r.push(l),c.computeWorldVertices(u,0,c.worldVerticesLength,l,0,2))}n?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons,a=0,s=r.length;a<s;a++)for(var o=r[a],h=o,c=0,l=o.length;c<l;c+=2){var u=h[c],d=h[c+1];t=Math.min(t,u),e=Math.min(e,d),n=Math.max(n,u),i=Math.max(i,d)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=i},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,n,i){var r=this.minX,a=this.minY,s=this.maxX,o=this.maxY;return!(t<=r&&n<=r||e<=a&&i<=a||s<=t&&s<=n||o<=e&&o<=i)&&(a<(n=(i=(i-e)/(n-t))*(r-t)+e)&&n<o||(a<(n=i*(s-t)+e)&&n<o||(r<(n=(a-e)/i+t)&&n<s||r<(n=(o-e)/i+t)&&n<s)))},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var n=this.polygons,i=0,r=n.length;i<r;i++)if(this.containsPointPolygon(n[i],t,e))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,e,n){for(var i=t,r=t.length,a=r-2,s=!1,o=0;o<r;o+=2){var h,c=i[o+1],l=i[a+1];!(c<n&&n<=l||l<n&&n<=c)||(h=i[o])+(n-c)/(l-c)*(i[a]-h)<e&&(s=!s),a=o}return s},e.prototype.intersectsSegment=function(t,e,n,i){for(var r=this.polygons,a=0,s=r.length;a<s;a++)if(this.intersectsSegmentPolygon(r[a],t,e,n,i))return this.boundingBoxes[a];return null},e.prototype.intersectsSegmentPolygon=function(t,e,n,i,r){for(var a=t,s=t.length,o=e-i,h=n-r,c=e*r-n*i,l=a[s-2],u=a[s-1],d=0;d<s;d+=2){var f,p=a[d],m=a[d+1],g=l*m-u*p,v=u-m,y=o*v-h*(f=l-p);if((l<=(f=(c*f-o*g)/y)&&f<=p||p<=f&&f<=l)&&(e<=f&&f<=i||i<=f&&f<=e)&&(u<=(f=(c*v-h*g)/y)&&f<=m||m<=f&&f<=u)&&(n<=f&&f<=r||r<=f&&f<=n))return!0;l=p,u=m}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");return-1==(t=this.boundingBoxes.indexOf(t))?null:this.polygons[t]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},t.SkeletonBounds=e}(R=R||{}),function(t){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}e.prototype.clipStart=function(n,i){if(null!=this.clipAttachment)return 0;for(var r=(this.clipAttachment=i).worldVerticesLength,a=t.Utils.setArraySize(this.clippingPolygon,r),s=(i=(i.computeWorldVertices(n,0,r,a,0,2),this.clippingPolygon),e.makeClockwise(i),this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i))),o=0,h=s.length;o<h;o++){var c=s[o];e.makeClockwise(c),c.push(c[0]),c.push(c[1])}return s.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,n,i,r,a,s,o,h){var c=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,d=this.clippingPolygons,f=this.clippingPolygons.length,p=h?12:8,m=0;l.length=0;t:for(var g=u.length=0;g<r;g+=3)for(var v=i[g]<<1,y=e[v],x=e[1+v],b=a[v],E=a[1+v],A=e[v=i[g+1]<<1],w=e[1+v],S=a[v],M=a[1+v],T=e[v=i[g+2]<<1],C=e[1+v],I=a[v],P=a[1+v],k=0;k<f;k++){var R=l.length;if(!this.clip(y,x,A,w,T,C,d[k],c)){(G=t.Utils.setArraySize(l,R+3*p))[R]=y,G[R+1]=x,G[R+2]=s.r,G[R+3]=s.g,G[R+4]=s.b,G[R+5]=s.a,h?(G[R+6]=b,G[R+7]=E,G[R+8]=o.r,G[R+9]=o.g,G[R+10]=o.b,G[R+11]=o.a,G[R+12]=A,G[R+13]=w,G[R+14]=s.r,G[R+15]=s.g,G[R+16]=s.b,G[R+17]=s.a,G[R+18]=S,G[R+19]=M,G[R+20]=o.r,G[R+21]=o.g,G[R+22]=o.b,G[R+23]=o.a,G[R+24]=T,G[R+25]=C,G[R+26]=s.r,G[R+27]=s.g,G[R+28]=s.b,G[R+29]=s.a,G[R+30]=I,G[R+31]=P,G[R+32]=o.r,G[R+33]=o.g,G[R+34]=o.b,G[R+35]=o.a):(G[R+6]=b,G[R+7]=E,G[R+8]=A,G[R+9]=w,G[R+10]=s.r,G[R+11]=s.g,G[R+12]=s.b,G[R+13]=s.a,G[R+14]=S,G[R+15]=M,G[R+16]=T,G[R+17]=C,G[R+18]=s.r,G[R+19]=s.g,G[R+20]=s.b,G[R+21]=s.a,G[R+22]=I,G[R+23]=P),R=u.length,(H=t.Utils.setArraySize(u,R+3))[R]=m,H[R+1]=m+1,H[R+2]=m+2,m+=3;continue t}var L=c.length;if(0!=L){for(var O=w-C,_=T-A,D=y-T,B=C-x,N=1/(O*D+_*(x-C)),F=L>>1,U=this.clipOutput,G=t.Utils.setArraySize(l,R+F*p),V=0;V<L;V+=2){var Y=U[V],z=U[V+1],W=(O*(Y=(G[R]=Y,G[R+1]=z,G[R+2]=s.r,G[R+3]=s.g,G[R+4]=s.b,G[R+5]=s.a,Y-T))+_*(z=z-C))*N;z=1-W-(Y=(B*Y+D*z)*N);G[R+6]=b*W+S*Y+I*z,G[R+7]=E*W+M*Y+P*z,h&&(G[R+8]=o.r,G[R+9]=o.g,G[R+10]=o.b,G[R+11]=o.a),R+=p}R=u.length;var H=t.Utils.setArraySize(u,R+3*(F-2));for(F--,V=1;V<F;V++)H[R]=m,H[R+1]=m+V,H[R+2]=m+V+1,R+=3;m+=1+F}}},e.prototype.clip=function(t,e,n,i,r,a,s,o){for(var h=o,c=!1,l=null,u=(2<=s.length%4?(l=o,o=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(n),l.push(i),l.push(r),l.push(a),l.push(t),l.push(e),o.length=0,s),d=s.length-4,f=0;;f+=2){for(var p=u[f],m=u[f+1],g=u[f+2],v=u[f+3],y=p-g,x=m-v,b=l,E=l.length-2,A=o.length,w=0;w<E;w+=2){var S=b[w],M=b[w+1],T=b[w+2],C=b[w+3],I=0<y*(C-v)-x*(T-g);if(0<y*(M-v)-x*(S-g)){if(I){o.push(T),o.push(C);continue}var P,k,R,L=(P=C-M)*(g-p)-(k=T-S)*(v-m);1e-6<Math.abs(L)?(o.push(p+(g-p)*(R=(k*(m-M)-P*(p-S))/L)),o.push(m+(v-m)*R)):(o.push(p),o.push(m))}else I&&(L=(P=C-M)*(g-p)-(k=T-S)*(v-m),1e-6<Math.abs(L)?(o.push(p+(g-p)*(R=(k*(m-M)-P*(p-S))/L)),o.push(m+(v-m)*R)):(o.push(p),o.push(m)),o.push(T),o.push(C));c=!0}if(A==o.length)return!(h.length=0);if(o.push(o[0]),o.push(o[1]),f==d)break;A=o,(o=l).length=0,l=A}if(h!=o){f=h.length=0;for(var O=o.length-2;f<O;f++)h[f]=o[f]}else h.length=h.length-2;return c},e.makeClockwise=function(t){for(var e,n,i,r=t,a=r[(t=t.length)-2]*r[1]-r[0]*r[t-1],s=0,o=t-3;s<o;s+=2)e=r[s],n=r[s+1],i=r[s+2],a+=e*r[s+3]-i*n;if(!(a<0)){s=0;var h=t-2;for(o=t>>1;s<o;s+=2){var c=r[s],l=r[s+1],u=h-s;r[s]=r[u],r[s+1]=r[1+u],r[u]=c,r[1+u]=l}}},t.SkeletonClipping=e}(R=R||{}),function(t){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},e.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t.SkeletonData=e}(R=R||{}),function(t){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}e.prototype.readSkeletonData=function(n){var i=this.scale,r=new t.SkeletonData,a="string"==typeof n?JSON.parse(n):n;if(null!=(n=a.skeleton)){if(r.hash=n.hash,r.version=n.spine,"3.8.75"==r.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,r.fps=n.fps,r.imagesPath=n.images}if(a.bones)for(var s=0;s<a.bones.length;s++){var o=a.bones[s],h=null,c=this.getValue(o,"parent",null);if(null!=c&&null==(h=r.findBone(c)))throw new Error("Parent bone not found: "+c);(f=new t.BoneData(r.bones.length,o.name,h)).length=this.getValue(o,"length",0)*i,f.x=this.getValue(o,"x",0)*i,f.y=this.getValue(o,"y",0)*i,f.rotation=this.getValue(o,"rotation",0),f.scaleX=this.getValue(o,"scaleX",1),f.scaleY=this.getValue(o,"scaleY",1),f.shearX=this.getValue(o,"shearX",0),f.shearY=this.getValue(o,"shearY",0),f.transformMode=e.transformModeFromString(this.getValue(o,"transform","normal")),f.skinRequired=this.getValue(o,"skin",!1),r.bones.push(f)}if(a.slots)for(s=0;s<a.slots.length;s++){var l=(A=a.slots[s]).name,u=A.bone;if(null==(d=r.findBone(u)))throw new Error("Slot bone not found: "+u);var d,f=new t.SlotData(r.slots.length,l,d);null!=(d=(null!=(d=this.getValue(A,"color",null))&&f.color.setFromString(d),this.getValue(A,"dark",null)))&&(f.darkColor=new t.Color(1,1,1,1),f.darkColor.setFromString(d)),f.attachmentName=this.getValue(A,"attachment",null),f.blendMode=e.blendModeFromString(this.getValue(A,"blend","normal")),r.slots.push(f)}if(a.ik)for(s=0;s<a.ik.length;s++){var p=a.ik[s];(f=new t.IkConstraintData(p.name)).order=this.getValue(p,"order",0),f.skinRequired=this.getValue(p,"skin",!1);for(var m=0;m<p.bones.length;m++){if(u=p.bones[m],null==(x=r.findBone(u)))throw new Error("IK bone not found: "+u);f.bones.push(x)}var g=p.target;if(f.target=r.findBone(g),null==f.target)throw new Error("IK target bone not found: "+g);f.mix=this.getValue(p,"mix",1),f.softness=this.getValue(p,"softness",0)*i,f.bendDirection=this.getValue(p,"bendPositive",!0)?1:-1,f.compress=this.getValue(p,"compress",!1),f.stretch=this.getValue(p,"stretch",!1),f.uniform=this.getValue(p,"uniform",!1),r.ikConstraints.push(f)}if(a.transform)for(s=0;s<a.transform.length;s++){for(p=a.transform[s],(f=new t.TransformConstraintData(p.name)).order=this.getValue(p,"order",0),f.skinRequired=this.getValue(p,"skin",!1),m=0;m<p.bones.length;m++){if(u=p.bones[m],null==(x=r.findBone(u)))throw new Error("Transform constraint bone not found: "+u);f.bones.push(x)}if(g=p.target,f.target=r.findBone(g),null==f.target)throw new Error("Transform constraint target bone not found: "+g);f.local=this.getValue(p,"local",!1),f.relative=this.getValue(p,"relative",!1),f.offsetRotation=this.getValue(p,"rotation",0),f.offsetX=this.getValue(p,"x",0)*i,f.offsetY=this.getValue(p,"y",0)*i,f.offsetScaleX=this.getValue(p,"scaleX",0),f.offsetScaleY=this.getValue(p,"scaleY",0),f.offsetShearY=this.getValue(p,"shearY",0),f.rotateMix=this.getValue(p,"rotateMix",1),f.translateMix=this.getValue(p,"translateMix",1),f.scaleMix=this.getValue(p,"scaleMix",1),f.shearMix=this.getValue(p,"shearMix",1),r.transformConstraints.push(f)}if(a.path)for(s=0;s<a.path.length;s++){for(p=a.path[s],(f=new t.PathConstraintData(p.name)).order=this.getValue(p,"order",0),f.skinRequired=this.getValue(p,"skin",!1),m=0;m<p.bones.length;m++){if(u=p.bones[m],null==(x=r.findBone(u)))throw new Error("Transform constraint bone not found: "+u);f.bones.push(x)}if(g=p.target,f.target=r.findSlot(g),null==f.target)throw new Error("Path target slot not found: "+g);f.positionMode=e.positionModeFromString(this.getValue(p,"positionMode","percent")),f.spacingMode=e.spacingModeFromString(this.getValue(p,"spacingMode","length")),f.rotateMode=e.rotateModeFromString(this.getValue(p,"rotateMode","tangent")),f.offsetRotation=this.getValue(p,"rotation",0),f.position=this.getValue(p,"position",0),f.positionMode==t.PositionMode.Fixed&&(f.position*=i),f.spacing=this.getValue(p,"spacing",0),f.spacingMode!=t.SpacingMode.Length&&f.spacingMode!=t.SpacingMode.Fixed||(f.spacing*=i),f.rotateMix=this.getValue(p,"rotateMix",1),f.translateMix=this.getValue(p,"translateMix",1),r.pathConstraints.push(f)}if(a.skins)for(s=0;s<a.skins.length;s++){var v=a.skins[s],y=new t.Skin(v.name);if(v.bones)for(var x,b=0;b<v.bones.length;b++){if(null==(x=r.findBone(v.bones[b])))throw new Error("Skin bone not found: "+v.bones[s]);y.bones.push(x)}if(v.ik)for(b=0;b<v.ik.length;b++){if(null==(E=r.findIkConstraint(v.ik[b])))throw new Error("Skin IK constraint not found: "+v.ik[s]);y.constraints.push(E)}if(v.transform)for(b=0;b<v.transform.length;b++){if(null==(E=r.findTransformConstraint(v.transform[b])))throw new Error("Skin transform constraint not found: "+v.transform[s]);y.constraints.push(E)}if(v.path){var E;for(b=0;b<v.path.length;b++){if(null==(E=r.findPathConstraint(v.path[b])))throw new Error("Skin path constraint not found: "+v.path[s]);y.constraints.push(E)}}for(l in v.attachments){var A,w,S=r.findSlot(l);if(null==S)throw new Error("Slot not found: "+l);for(w in A=v.attachments[l]){var M=this.readAttachment(A[w],y,S.index,w,r);null!=M&&y.setAttachment(S.index,w,M)}}r.skins.push(y),"default"==y.name&&(r.defaultSkin=y)}s=0;for(var T=this.linkedMeshes.length;s<T;s++){var C=this.linkedMeshes[s];if(null==(y=null==C.skin?r.defaultSkin:r.findSkin(C.skin)))throw new Error("Skin not found: "+C.skin);var I=y.getAttachment(C.slotIndex,C.parent);if(null==I)throw new Error("Parent mesh not found: "+C.parent);C.mesh.deformAttachment=C.inheritDeform?I:C.mesh,C.mesh.setParentMesh(I),C.mesh.updateUVs()}if(this.linkedMeshes.length=0,a.events)for(var P in a.events){var k=a.events[P];(f=new t.EventData(P)).intValue=this.getValue(k,"int",0),f.floatValue=this.getValue(k,"float",0),f.stringValue=this.getValue(k,"string",""),f.audioPath=this.getValue(k,"audio",null),null!=f.audioPath&&(f.volume=this.getValue(k,"volume",1),f.balance=this.getValue(k,"balance",0)),r.events.push(f)}if(a.animations)for(var R in a.animations){var L=a.animations[R];this.readAnimation(L,R,r)}return r},e.prototype.readAttachment=function(e,i,r,a,s){var o=this.scale;switch(a=this.getValue(e,"name",a),this.getValue(e,"type","region")){case"region":var h=this.getValue(e,"path",a);return null==(c=this.attachmentLoader.newRegionAttachment(i,a,h))?null:(c.path=h,c.x=this.getValue(e,"x",0)*o,c.y=this.getValue(e,"y",0)*o,c.scaleX=this.getValue(e,"scaleX",1),c.scaleY=this.getValue(e,"scaleY",1),c.rotation=this.getValue(e,"rotation",0),c.width=e.width*o,c.height=e.height*o,null!=(p=this.getValue(e,"color",null))&&c.color.setFromString(p),c.updateOffset(),c);case"boundingbox":return null==(c=this.attachmentLoader.newBoundingBoxAttachment(i,a))?null:(this.readVertices(e,c,e.vertexCount<<1),null!=(p=this.getValue(e,"color",null))&&c.color.setFromString(p),c);case"mesh":case"linkedmesh":var c;h=this.getValue(e,"path",a);if(null==(c=this.attachmentLoader.newMeshAttachment(i,a,h)))return null;c.path=h,null!=(p=this.getValue(e,"color",null))&&c.color.setFromString(p),c.width=this.getValue(e,"width",0)*o,c.height=this.getValue(e,"height",0)*o;var l=this.getValue(e,"parent",null);return null!=l?(this.linkedMeshes.push(new n(c,this.getValue(e,"skin",null),r,l,this.getValue(e,"deform",!0))),c):(l=e.uvs,this.readVertices(e,c,l.length),c.triangles=e.triangles,c.regionUVs=l,c.updateUVs(),c.edges=this.getValue(e,"edges",null),c.hullLength=2*this.getValue(e,"hull",0),c);case"path":if(null==(h=this.attachmentLoader.newPathAttachment(i,a)))return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);for(var u=e.vertexCount,d=(this.readVertices(e,h,u<<1),t.Utils.newArray(u/3,0)),f=0;f<e.lengths.length;f++)d[f]=e.lengths[f]*o;return h.lengths=d,null!=(p=this.getValue(e,"color",null))&&h.color.setFromString(p),h;case"point":return null==(l=this.attachmentLoader.newPointAttachment(i,a))?null:(l.x=this.getValue(e,"x",0)*o,l.y=this.getValue(e,"y",0)*o,l.rotation=this.getValue(e,"rotation",0),null!=(p=this.getValue(e,"color",null))&&l.color.setFromString(p),l);case"clipping":if(null==(c=this.attachmentLoader.newClippingAttachment(i,a)))return null;if(null!=(h=this.getValue(e,"end",null))){if(null==(l=s.findSlot(h)))throw new Error("Clipping end slot not found: "+h);c.endSlot=l}var p;u=e.vertexCount;return this.readVertices(e,c,u<<1),null!=(p=this.getValue(e,"color",null))&&c.color.setFromString(p),c}return null},e.prototype.readVertices=function(e,n,i){var r=this.scale,a=(n.worldVerticesLength=i,e.vertices);if(i==a.length){var s=t.Utils.toFloatArray(a);if(1!=r)for(var o=0,h=a.length;o<h;o++)s[o]*=r;n.vertices=s}else{var c=new Array,l=new Array;for(o=0,h=a.length;o<h;){var u=a[o++];l.push(u);for(var d=o+4*u;o<d;o+=4)l.push(a[o]),c.push(a[o+1]*r),c.push(a[o+2]*r),c.push(a[o+3])}n.bones=l,n.vertices=t.Utils.toFloatArray(c)}},e.prototype.readAnimation=function(e,n,i){var r=this.scale,a=new Array,s=0;if(e.slots)for(var o in e.slots){var h=e.slots[o];if(-1==(Z=i.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(L in h){var c=h[L];if("attachment"==L){(x=new t.AttachmentTimeline(c.length)).slotIndex=Z;for(var l=0,u=0;u<c.length;u++){var d=c[u];x.setFrame(l++,this.getValue(d,"time",0),d.name)}a.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}else if("color"==L){for((x=new t.ColorTimeline(c.length)).slotIndex=Z,l=0,u=0;u<c.length;u++){d=c[u];var f=new t.Color;f.setFromString(d.color),x.setFrame(l,this.getValue(d,"time",0),f.r,f.g,f.b,f.a),this.readCurve(d,x,l),l++}a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=L)throw new Error("Invalid timeline type for a slot: "+L+" ("+o+")");for((x=new t.TwoColorTimeline(c.length)).slotIndex=Z,l=0,u=0;u<c.length;u++){d=c[u];var p=new t.Color,m=new t.Color;p.setFromString(d.light),m.setFromString(d.dark),x.setFrame(l,this.getValue(d,"time",0),p.r,p.g,p.b,p.a,m.r,m.g,m.b),this.readCurve(d,x,l),l++}a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var g in e.bones){var v=e.bones[g],y=i.findBoneIndex(g);if(-1==y)throw new Error("Bone not found: "+g);for(L in v)if(c=v[L],"rotate"===L){for((x=new t.RotateTimeline(c.length)).boneIndex=y,l=0,u=0;u<c.length;u++)d=c[u],x.setFrame(l,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,x,l),l++;a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==L&&"scale"!==L&&"shear"!==L)throw new Error("Invalid timeline type for a bone: "+L+" ("+g+")");var x=null,b=1,E=0;for(l=("scale"===L?(x=new t.ScaleTimeline(c.length),E=1):"shear"===L?x=new t.ShearTimeline(c.length):(x=new t.TranslateTimeline(c.length),b=r),x.boneIndex=y,0),u=0;u<c.length;u++){d=c[u];var A=this.getValue(d,"x",E),w=this.getValue(d,"y",E);x.setFrame(l,this.getValue(d,"time",0),A*b,w*b),this.readCurve(d,x,l),l++}a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}if(e.ik)for(var S in e.ik){var M=e.ik[S],T=i.findIkConstraint(S);for(l=((x=new t.IkConstraintTimeline(M.length)).ikConstraintIndex=i.ikConstraints.indexOf(T),0),u=0;u<M.length;u++)d=M[u],x.setFrame(l,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*r,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,x,l),l++;a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var S in e.transform){for(M=e.transform[S],T=i.findTransformConstraint(S),(x=new t.TransformConstraintTimeline(M.length)).transformConstraintIndex=i.transformConstraints.indexOf(T),l=0,u=0;u<M.length;u++)d=M[u],x.setFrame(l,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,x,l),l++;a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var S in e.path){M=e.path[S];var C=i.findPathConstraintIndex(S);if(-1==C)throw new Error("Path constraint not found: "+S);var I=i.pathConstraints[C];for(L in M)if(c=M[L],"position"===L||"spacing"===L){for(x=null,b=1,"spacing"===L?(x=new t.PathConstraintSpacingTimeline(c.length),I.spacingMode!=t.SpacingMode.Length&&I.spacingMode!=t.SpacingMode.Fixed||(b=r)):(x=new t.PathConstraintPositionTimeline(c.length),I.positionMode==t.PositionMode.Fixed&&(b=r)),x.pathConstraintIndex=C,l=0,u=0;u<c.length;u++)d=c[u],x.setFrame(l,this.getValue(d,"time",0),this.getValue(d,L,0)*b),this.readCurve(d,x,l),l++;a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===L){for((x=new t.PathConstraintMixTimeline(c.length)).pathConstraintIndex=C,l=0,u=0;u<c.length;u++)d=c[u],x.setFrame(l,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,x,l),l++;a.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}if(e.deform)for(var P in e.deform){var k=e.deform[P],R=i.findSkin(P);if(null==R)throw new Error("Skin not found: "+P);for(o in k){var L;h=k[o];if(-1==(Z=i.findSlotIndex(o)))throw new Error("Slot not found: "+h.name);for(L in h){c=h[L];var O=R.getAttachment(Z,L);if(null==O)throw new Error("Deform attachment not found: "+c.name);for(var _=null!=O.bones,D=O.vertices,B=_?D.length/3*2:D.length,N=(l=((x=new t.DeformTimeline(c.length)).slotIndex=Z,x.attachment=O,0),0);N<c.length;N++){d=c[N];var F=void 0,U=this.getValue(d,"vertices",null);if(null==U)F=_?t.Utils.newFloatArray(B):D;else{F=t.Utils.newFloatArray(B);var G=this.getValue(d,"offset",0);if(t.Utils.arrayCopy(U,0,F,G,U.length),1!=r)for(var V=(u=G)+U.length;u<V;u++)F[u]*=r;if(!_)for(u=0;u<B;u++)F[u]+=D[u]}x.setFrame(l,this.getValue(d,"time",0),F),this.readCurve(d,x,l),l++}a.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}}}var Y=e.drawOrder;if(null!=(Y=null==Y?e.draworder:Y)){x=new t.DrawOrderTimeline(Y.length);var z=i.slots.length;for(l=0,N=0;N<Y.length;N++){var W=Y[N],H=null,X=this.getValue(W,"offsets",null);if(null!=X){H=t.Utils.newArray(z,-1);var K=t.Utils.newArray(z-X.length,0),j=0,q=0;for(u=0;u<X.length;u++){var Z,Q=X[u];if(-1==(Z=i.findSlotIndex(Q.slot)))throw new Error("Slot not found: "+Q.slot);for(;j!=Z;)K[q++]=j++;H[j+Q.offset]=j++}for(;j<z;)K[q++]=j++;for(u=z-1;0<=u;u--)-1==H[u]&&(H[u]=K[--q])}x.setFrame(l++,this.getValue(W,"time",0),H)}a.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}if(e.events){for(x=new t.EventTimeline(e.events.length),l=0,u=0;u<e.events.length;u++){var J=e.events[u],$=i.findEvent(J.name);if(null==$)throw new Error("Event not found: "+J.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(J,"time",0)),$);tt.intValue=this.getValue(J,"int",$.intValue),tt.floatValue=this.getValue(J,"float",$.floatValue),tt.stringValue=this.getValue(J,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(J,"volume",1),tt.balance=this.getValue(J,"balance",0)),x.setFrame(l++,tt)}a.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new t.Animation(n,a,s))},e.prototype.readCurve=function(t,e,n){var i;t.hasOwnProperty("curve")&&("stepped"==t.curve?e.setStepped(n):(i=t.curve,e.setCurve(n,i,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))))},e.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},t.SkeletonJson=e;var n=function(t,e,n,i,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i,this.inheritDeform=r}}(R=R||{}),s=R=R||{},o=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n},s.SkinEntry=o,z.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=n},z.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],i=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){i=!0;break}i||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var a=t.constraints[e];for(i=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==a){i=!0;break}i||this.constraints.push(a)}var s=t.getAttachments();for(e=0;e<s.length;e++){var o=s[e];this.setAttachment(o.slotIndex,o.name,o.attachment)}},z.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],i=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){i=!0;break}i||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var a=t.constraints[e];for(i=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==a){i=!0;break}i||this.constraints.push(a)}var o=t.getAttachments();for(e=0;e<o.length;e++){var h=o[e];null!=h.attachment&&(h.attachment instanceof s.MeshAttachment?h.attachment=h.attachment.newLinkedMesh():h.attachment=h.attachment.copy(),this.setAttachment(h.slotIndex,h.name,h.attachment))}},z.prototype.getAttachment=function(t,e){return(t=this.attachments[t])?t[e]:null},z.prototype.removeAttachment=function(t,e){(t=this.attachments[t])&&(t[e]=null)},z.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var i in n){var r=n[i];r&&t.push(new o(e,i,r))}}return t},z.prototype.getAttachmentsForSlot=function(t,e){var n=this.attachments[t];if(n)for(var i in n){var r=n[i];r&&e.push(new o(t,i,r))}},z.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},z.prototype.attachAll=function(t,e){for(var n=0,i=0;i<t.slots.length;i++){var r=t.slots[i],a=r.getAttachment();if(a&&n<e.attachments.length){var s,o=e.attachments[n];for(s in o)if(a==o[s]){var h=this.getAttachment(n,s);null!=h&&r.setAttachment(h);break}}n++}},s.Skin=z,function(t){function e(e,n){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==n)throw new Error("bone cannot be null.");this.data=e,this.bone=n,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose()}e.prototype.getSkeleton=function(){return this.bone.skeleton},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t.Slot=e}(R=R||{}),(h=R=R||{}).SlotData=function(t,e,n){if(this.color=new h.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n};var W=R=R||{};K.prototype.getImage=function(){return this._image},K.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return H.Nearest;case"linear":return H.Linear;case"mipmap":return H.MipMap;case"mipmapnearestnearest":return H.MipMapNearestNearest;case"mipmaplinearnearest":return H.MipMapLinearNearest;case"mipmapnearestlinear":return H.MipMapNearestLinear;case"mipmaplinearlinear":return H.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},K.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return X.MirroredRepeat;case"clamptoedge":return X.ClampToEdge;case"repeat":return X.Repeat;default:throw new Error("Unknown texture wrap "+t)}};var H,X;N=K;function K(t){this._image=t}W.Texture=N,(q=H=W.TextureFilter||(W.TextureFilter={}))[q.Nearest=9728]="Nearest",q[q.Linear=9729]="Linear",q[q.MipMap=9987]="MipMap",q[q.MipMapNearestNearest=9984]="MipMapNearestNearest",q[q.MipMapLinearNearest=9985]="MipMapLinearNearest",q[q.MipMapNearestLinear=9986]="MipMapNearestLinear",q[q.MipMapLinearLinear=9987]="MipMapLinearLinear",(q=X=W.TextureWrap||(W.TextureWrap={}))[q.MirroredRepeat=33648]="MirroredRepeat",q[q.ClampToEdge=33071]="ClampToEdge",q[q.Repeat=10497]="Repeat",W.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},O(Z,j=N),Z.prototype.setFilters=function(t,e){},Z.prototype.setWraps=function(t,e){},Z.prototype.dispose=function(){};var j,q=Z;function Z(){return null!==j&&j.apply(this,arguments)||this}function Q(t){return(t=c.call(this,t,0,!1)||this).bones=new Array,t.rotateMix=0,t.translateMix=0,t.scaleMix=0,t.shearMix=0,t.offsetRotation=0,t.offsetX=0,t.offsetY=0,t.offsetScaleX=0,t.offsetScaleY=0,t.offsetShearY=0,t.relative=!1,t.local=!1,t}function J(t){if(null==t)throw new Error("name cannot be null.");this.name=t}function $(t){return(t=d.call(this,t)||this).id=(65535&$.nextID++)<<11,t.worldVerticesLength=0,t.deformAttachment=t}function tt(t){return(t=p.call(this,t)||this).color=new f.Color(1,1,1,1),t}function et(t){return(t=g.call(this,t)||this).color=new m.Color(.2275,.2275,.8078,1),t}function nt(t){return(t=y.call(this,t)||this).color=new v.Color(1,1,1,1),t.tempColor=new v.Color(0,0,0,0),t}function it(t){return(t=b.call(this,t)||this).closed=!1,t.constantSpeed=!1,t.color=new x.Color(1,1,1,1),t}function rt(t){return(t=A.call(this,t)||this).color=new E.Color(.38,.94,0,1),t}function at(t){return(t=S.call(this,t)||this).x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.rotation=0,t.width=0,t.height=0,t.color=new w.Color(1,1,1,1),t.offset=w.Utils.newFloatArray(8),t.uvs=w.Utils.newFloatArray(8),t.tempColor=new w.Color(1,1,1,1),t}function st(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}W.FakeTexture=q,function(t){function e(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}e.prototype.load=function(e,i){if(null==i)throw new Error("textureLoader cannot be null.");for(var r=new n(e),o=new Array(4),h=null;;){var c,l,u,d,f,p=r.readLine();if(null==p)break;0==(p=p.trim()).length?h=null:h?((c=new s).name=p,c.page=h,"true"==(f=r.readValue()).toLocaleLowerCase()?c.degrees=90:"false"==f.toLocaleLowerCase()?c.degrees=0:c.degrees=parseFloat(f),c.rotate=90==c.degrees,r.readTuple(o),f=parseInt(o[0]),l=parseInt(o[1]),r.readTuple(o),u=parseInt(o[0]),d=parseInt(o[1]),c.u=f/h.width,c.v=l/h.height,c.rotate?(c.u2=(f+d)/h.width,c.v2=(l+u)/h.height):(c.u2=(f+u)/h.width,c.v2=(l+d)/h.height),c.x=f,c.y=l,c.width=Math.abs(u),c.height=Math.abs(d),4==r.readTuple(o)&&4==r.readTuple(o)&&r.readTuple(o),c.originalWidth=parseInt(o[0]),c.originalHeight=parseInt(o[1]),r.readTuple(o),c.offsetX=parseInt(o[0]),c.offsetY=parseInt(o[1]),c.index=parseInt(r.readValue()),c.texture=h.texture,this.regions.push(c)):((h=new a).name=p,2==r.readTuple(o)&&(h.width=parseInt(o[0]),h.height=parseInt(o[1]),r.readTuple(o)),r.readTuple(o),h.minFilter=t.Texture.filterFromString(o[0]),h.magFilter=t.Texture.filterFromString(o[1]),f=r.readValue(),h.uWrap=t.TextureWrap.ClampToEdge,h.vWrap=t.TextureWrap.ClampToEdge,"x"==f?h.uWrap=t.TextureWrap.Repeat:"y"==f?h.vWrap=t.TextureWrap.Repeat:"xy"==f&&(h.uWrap=h.vWrap=t.TextureWrap.Repeat),h.texture=i(p),h.texture.setFilters(h.minFilter,h.magFilter),h.texture.setWraps(h.uWrap,h.vWrap),h.width=h.texture.getImage().width,h.height=h.texture.getImage().height,this.pages.push(h))}},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},t.TextureAtlas=e,i.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},i.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},i.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var i=0,r=n+1;i<3;i++){var a=e.indexOf(",",r);if(-1==a)break;t[i]=e.substr(r,a-r).trim(),r=a+1}return t[i]=e.substring(r).trim(),i+1};var n=i;function i(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}var r,a=function(){},s=(t.TextureAtlasPage=a,r=t.TextureRegion,O(o,r),o);function o(){return null!==r&&r.apply(this,arguments)||this}t.TextureAtlasRegion=s}(R=R||{}),function(t){function e(e,n){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==n)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(n.findBone(e.bones[i].name));this.target=n.findBone(e.target.name)}e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,n=this.translateMix,i=this.scaleMix,r=this.shearMix,a=this.target,s=a.a,o=a.b,h=a.c,c=a.d,l=0<s*c-o*h?t.MathUtils.degRad:-t.MathUtils.degRad,u=this.data.offsetRotation*l,d=this.data.offsetShearY*l,f=this.bones,p=0,m=f.length;p<m;p++){var g,v,y,x,b,E,A,w,S=f[p],M=!1;0!=e&&(v=S.a,x=S.b,y=S.c,b=S.d,(A=Math.atan2(h,s)-Math.atan2(y,v)+u)>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A*=e,g=Math.cos(A),E=Math.sin(A),S.a=g*v-E*y,S.b=g*x-E*b,S.c=E*v+g*y,S.d=E*x+g*b,M=!0),0!=n&&(v=this.temp,a.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),S.worldX+=(v.x-S.worldX)*n,S.worldY+=(v.y-S.worldY)*n,M=!0),0<i&&(w=Math.sqrt(S.a*S.a+S.c*S.c),y=Math.sqrt(s*s+h*h),1e-5<w&&(w=(w+(y-w+this.data.offsetScaleX)*i)/w),S.a*=w,S.c*=w,w=Math.sqrt(S.b*S.b+S.d*S.d),y=Math.sqrt(o*o+c*c),1e-5<w&&(w=(w+(y-w+this.data.offsetScaleY)*i)/w),S.b*=w,S.d*=w,M=!0),0<r&&(x=S.b,b=S.d,E=Math.atan2(b,x),(A=Math.atan2(c,o)-Math.atan2(h,s)-(E-Math.atan2(S.c,S.a)))>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A=E+(A+d)*r,w=Math.sqrt(x*x+b*b),S.b=Math.cos(A)*w,S.d=Math.sin(A)*w,M=!0),M&&(S.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,n=this.translateMix,i=this.scaleMix,r=this.shearMix,a=this.target,s=a.a,o=a.b,h=a.c,c=a.d,l=0<s*c-o*h?t.MathUtils.degRad:-t.MathUtils.degRad,u=this.data.offsetRotation*l,d=this.data.offsetShearY*l,f=this.bones,p=0,m=f.length;p<m;p++){var g,v,y,x,b,E,A,w,S=f[p],M=!1;0!=e&&(x=S.a,E=S.b,g=S.c,A=S.d,(b=Math.atan2(h,s)+u)>t.MathUtils.PI?b-=t.MathUtils.PI2:b<-t.MathUtils.PI&&(b+=t.MathUtils.PI2),b*=e,v=Math.cos(b),y=Math.sin(b),S.a=v*x-y*g,S.b=v*E-y*A,S.c=y*x+v*g,S.d=y*E+v*A,M=!0),0!=n&&(x=this.temp,a.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),S.worldX+=x.x*n,S.worldY+=x.y*n,M=!0),0<i&&(w=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleX)*i+1,S.a*=w,S.c*=w,w=(Math.sqrt(o*o+c*c)-1+this.data.offsetScaleY)*i+1,S.b*=w,S.d*=w,M=!0),0<r&&((b=Math.atan2(c,o)-Math.atan2(h,s))>t.MathUtils.PI?b-=t.MathUtils.PI2:b<-t.MathUtils.PI&&(b+=t.MathUtils.PI2),E=S.b,A=S.d,b=Math.atan2(A,E)+(b-t.MathUtils.PI/2+d)*r,w=Math.sqrt(E*E+A*A),S.b=Math.cos(b)*w,S.d=Math.sin(b)*w,M=!0),M&&(S.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target,a=(r.appliedValid||r.updateAppliedTransform(),this.bones),s=0,o=a.length;s<o;s++){var h,c=a[s],l=(c.appliedValid||c.updateAppliedTransform(),c.arotation),u=(0!=t&&(h=r.arotation-l+this.data.offsetRotation,l+=(h-=360*(16384-(16384.499999999996-h/360|0)))*t),c.ax),d=c.ay,f=(0!=e&&(u+=(r.ax-u+this.data.offsetX)*e,d+=(r.ay-d+this.data.offsetY)*e),c.ascaleX),p=c.ascaleY,m=(0!=n&&(1e-5<f&&(f=(f+(r.ascaleX-f+this.data.offsetScaleX)*n)/f),1e-5<p&&(p=(p+(r.ascaleY-p+this.data.offsetScaleY)*n)/p)),c.ashearY);0!=i&&(h=r.ashearY-m+this.data.offsetShearY,h-=360*(16384-(16384.499999999996-h/360|0)),c.shearY+=h*i),c.updateWorldTransformWith(u,d,l,f,p,c.ashearX,m)}},e.prototype.applyRelativeLocal=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target,a=(r.appliedValid||r.updateAppliedTransform(),this.bones),s=0,o=a.length;s<o;s++){var h=a[s],c=(h.appliedValid||h.updateAppliedTransform(),h.arotation),l=(0!=t&&(c+=(r.arotation+this.data.offsetRotation)*t),h.ax),u=h.ay,d=(0!=e&&(l+=(r.ax+this.data.offsetX)*e,u+=(r.ay+this.data.offsetY)*e),h.ascaleX),f=h.ascaleY,p=(0!=n&&(1e-5<d&&(d*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<f&&(f*=(r.ascaleY-1+this.data.offsetScaleY)*n+1)),h.ashearY);0!=i&&(p+=(r.ashearY+this.data.offsetShearY)*i),h.updateWorldTransformWith(l,u,c,d,f,h.ashearX,p)}},t.TransformConstraint=e}(R=R||{}),N=R=R||{},c=N.ConstraintData,O(Q,c),N.TransformConstraintData=Q,function(t){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}e.prototype.triangulate=function(t){for(var n=t,i=t.length>>1,r=this.indicesArray,a=r.length=0;a<i;a++)r[a]=a;for(var s=this.isConcaveArray,o=(a=s.length=0,i);a<o;++a)s[a]=e.isConcave(a,i,n,r);var h=this.triangles;for(h.length=0;3<i;){for(var c=i-1,l=(a=0,1);;){t:if(!s[a]){for(var u=r[c]<<1,d=r[a]<<1,f=r[l]<<1,p=n[u],m=n[1+u],g=n[d],v=n[1+d],y=n[f],x=n[1+f],b=(l+1)%i;b!=c;b=(b+1)%i)if(s[b]){var E=n[A=r[b]<<1],A=n[1+A];if(e.positiveArea(y,x,p,m,E,A)&&e.positiveArea(p,m,g,v,E,A)&&e.positiveArea(g,v,y,x,E,A))break t}break}if(0==l){for(;s[a]&&0<--a;);break}c=a,l=((a=l)+1)%i}h.push(r[(i+a-1)%i]),h.push(r[a]),h.push(r[(a+1)%i]),r.splice(a,1),s.splice(a,1);var w=(--i+a-1)%i,S=a==i?0:a;s[w]=e.isConcave(w,i,n,r),s[S]=e.isConcave(S,i,n,r)}return 3==i&&(h.push(r[2]),h.push(r[0]),h.push(r[1])),h},e.prototype.decompose=function(t,n){for(var i=t,r=this.convexPolygons,a=(this.polygonPool.freeAll(r),r.length=0,this.convexPolygonsIndices),s=(this.polygonIndicesPool.freeAll(a),a.length=0,this.polygonIndicesPool.obtain()),o=(s.length=0,this.polygonPool.obtain()),h=-1,c=o.length=0,l=0,u=n.length;l<u;l+=3){var d=n[l]<<1,f=n[l+1]<<1,p=n[l+2]<<1,m=i[d],g=i[1+d],v=i[f],y=i[1+f],x=i[p],b=i[1+p],E=!1;h==d&&(A=o.length-4,I=e.winding(o[A],o[A+1],o[A+2],o[A+3],x,b),P=e.winding(x,b,o[0],o[1],o[2],o[3]),I==c&&P==c&&(o.push(x),o.push(b),s.push(p),E=!0)),E||(0<o.length?(r.push(o),a.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(m),o.push(g),o.push(v),o.push(y),o.push(x),o.push(b),(s=this.polygonIndicesPool.obtain()).length=0,s.push(d),s.push(f),s.push(p),c=e.winding(m,g,v,y,x,b),h=d)}for(0<o.length&&(r.push(o),a.push(s)),l=0,u=r.length;l<u;l++)if(0!=(s=a[l]).length)for(var A,w,S,M,T,C,I,P,k=s[0],R=s[s.length-1],L=(o=r[l])[A=o.length-4],O=o[A+1],_=o[A+2],D=o[A+3],B=o[0],N=o[1],F=o[2],U=o[3],G=e.winding(L,O,_,D,B,N),V=0;V<u;V++)V!=l&&3==(w=a[V]).length&&(S=w[0],M=w[1],T=w[2],x=(C=r[V])[C.length-2],b=C[C.length-1],S==k&&M==R&&(I=e.winding(L,O,_,D,x,b),P=e.winding(x,b,B,N,F,U),I==G&&P==G&&(C.length=0,w.length=0,o.push(x),o.push(b),s.push(T),L=_,O=D,_=x,D=b,V=0)));for(l=r.length-1;0<=l;l--)0==(o=r[l]).length&&(r.splice(l,1),this.polygonPool.free(o),s=a[l],a.splice(l,1),this.polygonIndicesPool.free(s));return r},e.isConcave=function(t,e,n,i){var r=i[(e+t-1)%e]<<1,a=i[t]<<1;i=i[(t+1)%e]<<1;return!this.positiveArea(n[r],n[1+r],n[a],n[1+a],n[i],n[1+i])},e.positiveArea=function(t,e,n,i,r,a){return 0<=t*(a-i)+n*(e-a)+r*(i-e)},e.winding=function(t,e,n,i,r,a){return 0<=r*(i-=e)-a*(n-=t)+n*e-t*i?1:-1},t.Triangulator=e}(R=R||{}),function(t){function e(){this.array=new Array}function n(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.r=t=void 0===t?0:t,this.g=e,this.b=n,this.a=i}function i(){}e.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},e.prototype.contains=function(t){return null!=this.array[0|t]},e.prototype.remove=function(t){this.array[0|t]=void 0},e.prototype.clear=function(){this.array.length=0},t.IntSet=e,n.prototype.set=function(t,e,n,i){return this.r=t,this.g=e,this.b=n,this.a=i,this.clamp(),this},n.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},n.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},n.prototype.add=function(t,e,n,i){return this.r+=t,this.g+=e,this.b+=n,this.a+=i,this.clamp(),this},n.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},n.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},n.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},n.WHITE=new n(1,1,1,1),n.RED=new n(1,0,0,1),n.GREEN=new n(0,1,0,1),n.BLUE=new n(0,0,1,1),n.MAGENTA=new n(1,0,1,1),t.Color=n,i.clamp=function(t,e,n){return t<e?e:n<t?n:t},i.cosDeg=function(t){return Math.cos(t*i.degRad)},i.sinDeg=function(t){return Math.sin(t*i.degRad)},i.signum=function(t){return 0<t?1:t<0?-1:0},i.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},i.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},i.randomTriangular=function(t,e){return i.randomTriangularWith(t,e,.5*(t+e))},i.randomTriangularWith=function(t,e,n){var i=Math.random(),r=e-t;return i<=(n-t)/r?t+Math.sqrt(i*r*(n-t)):e-Math.sqrt((1-i)*r*(e-n))},i.PI2=2*(i.PI=3.1415927),i.radDeg=i.radiansToDegrees=180/i.PI,i.degRad=i.degreesToRadians=i.PI/180,t.MathUtils=i,a.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)};var r=a;function a(){}t.Interpolation=r,O(o,s=r),o.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1};var s;r=o;function o(t){var e=s.call(this)||this;return e.power=2,e.power=t,e}t.Pow=r,O(c,h=r),c.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1};var h;r=c;function c(t){return h.call(this,t)||this}function l(){}function u(){}function d(t){this.items=new Array,this.instantiator=t}function f(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}function p(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function m(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.PowOut=r,l.arrayCopy=function(t,e,n,i,r){for(var a=e,s=i;a<e+r;a++,s++)n[s]=t[a]},l.setArraySize=function(t,e,n){void 0===n&&(n=0);var i=t.length;if(i!=e&&i<(t.length=e))for(var r=i;r<e;r++)t[r]=n;return t},l.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:l.setArraySize(t,e,n)},l.newArray=function(t,e){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n},l.newFloatArray=function(t){if(l.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},l.newShortArray=function(t){if(l.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},l.toFloatArray=function(t){return l.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},l.toSinglePrecision=function(t){return l.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},l.webkit602BugfixHelper=function(t,e){},l.contains=function(t,e,n){void 0===n&&(n=!0);for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},l.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t.Utils=l,u.logBones=function(t){for(var e=0;e<t.bones.length;e++)t.bones[e]},t.DebugUtils=u,d.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},d.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},d.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},d.prototype.clear=function(){this.items.length=0},t.Pool=d,f.prototype.set=function(t,e){return this.x=t,this.y=e,this},f.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},f.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t.Vector2=f,p.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t.TimeKeeper=p,m.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},m.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},m.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t.WindowedMean=m}(R=R||{}),Math.fround||(Math.fround=(l=new Float32Array(1),function(t){return l[0]=t,l[0]})),(u=R=R||{}).Attachment=J,O($,d=J),$.prototype.computeWorldVertices=function(t,e,n,i,r,a){n=r+(n>>1)*a;var s=t.bone.skeleton,o=t.deform,h=this.vertices,c=this.bones;if(null==c){0<o.length&&(h=o);for(var l=(C=t.bone).worldX,u=C.worldY,d=C.a,f=C.b,p=C.c,m=C.d,g=e,v=r;v<n;g+=2,v+=a){var y=h[g],x=h[g+1];i[v]=y*d+x*f+l,i[v+1]=y*p+x*m+u}}else{for(var b=0,E=0,A=0;A<e;A+=2)b+=(T=c[b])+1,E+=T;var w=s.bones;if(0==o.length)for(v=r,f=3*E;v<n;v+=a){var S=0,M=0,T=c[b++];for(T+=b;b<T;b++,f+=3){var C=w[c[b]],I=(y=h[f],x=h[f+1],h[f+2]);S+=(y*C.a+x*C.b+C.worldX)*I,M+=(y*C.c+x*C.d+C.worldY)*I}i[v]=S,i[v+1]=M}else for(var P=o,k=(v=r,f=3*E,E<<1);v<n;v+=a){for(S=0,M=0,T=c[b++],T+=b;b<T;b++,f+=3,k+=2)C=w[c[b]],y=h[f]+P[k],x=h[f+1]+P[k+1],I=h[f+2],S+=(y*C.a+x*C.b+C.worldX)*I,M+=(y*C.c+x*C.d+C.worldY)*I;i[v]=S,i[v+1]=M}}},$.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),u.Utils.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=u.Utils.newFloatArray(this.vertices.length),u.Utils.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},$.nextID=0,u.VertexAttachment=$,(W=(W=R=R||{}).AttachmentType||(W.AttachmentType={}))[W.Region=0]="Region",W[W.BoundingBox=1]="BoundingBox",W[W.Mesh=2]="Mesh",W[W.LinkedMesh=3]="LinkedMesh",W[W.Path=4]="Path",W[W.Point=5]="Point",W[W.Clipping=6]="Clipping",f=R=R||{},p=f.VertexAttachment,O(tt,p),tt.prototype.copy=function(){var t=new tt(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},f.BoundingBoxAttachment=tt,m=R=R||{},g=m.VertexAttachment,O(et,g),et.prototype.copy=function(){var t=new et(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},m.ClippingAttachment=et,v=R=R||{},y=v.VertexAttachment,O(nt,y),nt.prototype.updateUVs=function(){var t=this.regionUVs,e=(null!=this.uvs&&this.uvs.length==t.length||(this.uvs=v.Utils.newFloatArray(t.length)),this.uvs),n=this.uvs.length,i=this.region.u,r=this.region.v,a=0,s=0;if(this.region instanceof v.TextureAtlasRegion){var o=this.region,h=o.texture.getImage().width,c=o.texture.getImage().height;switch(o.degrees){case 90:i-=(o.originalHeight-o.offsetY-o.height)/h,r-=(o.originalWidth-o.offsetX-o.width)/c;a=o.originalHeight/h,s=o.originalWidth/c;for(var l=0;l<n;l+=2)e[l]=i+t[l+1]*a,e[l+1]=r+(1-t[l])*s;return;case 180:for(i-=(o.originalWidth-o.offsetX-o.width)/h,r-=o.offsetY/c,a=o.originalWidth/h,s=o.originalHeight/c,l=0;l<n;l+=2)e[l]=i+(1-t[l])*a,e[l+1]=r+(1-t[l+1])*s;return;case 270:for(i-=o.offsetY/h,r-=o.offsetX/c,a=o.originalHeight/h,s=o.originalWidth/c,l=0;l<n;l+=2)e[l]=i+(1-t[l+1])*a,e[l+1]=r+t[l]*s;return}i-=o.offsetX/h,r-=(o.originalHeight-o.offsetY-o.height)/c,a=o.originalWidth/h,s=o.originalHeight/c}else null==this.region?(i=r=0,a=s=1):(a=this.region.u2-i,s=this.region.v2-r);for(l=0;l<n;l+=2)e[l]=i+t[l]*a,e[l+1]=r+t[l+1]*s},nt.prototype.getParentMesh=function(){return this.parentMesh},nt.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},nt.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new nt(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),v.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),v.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),v.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),v.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},nt.prototype.newLinkedMesh=function(){var t=new nt(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},v.MeshAttachment=nt,x=R=R||{},b=x.VertexAttachment,O(it,b),it.prototype.copy=function(){var t=new it(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),x.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},x.PathAttachment=it,E=R=R||{},A=E.VertexAttachment,O(rt,A),rt.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},rt.prototype.computeWorldRotation=function(t){var e=E.MathUtils.cosDeg(this.rotation),n=E.MathUtils.sinDeg(this.rotation),i=e*t.a+n*t.b;e=e*t.c+n*t.d;return Math.atan2(e,i)*E.MathUtils.radDeg},rt.prototype.copy=function(){var t=new rt(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},E.PointAttachment=rt,w=R=R||{},S=w.Attachment,O(at,S),at.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*e,r=(t=n+this.region.width*t,e=i+this.region.height*e,this.rotation*Math.PI/180),a=Math.cos(r),s=(r=Math.sin(r),n*a+this.x),o=(n=n*r,i*a+this.y),h=(i=i*r,t*a+this.x);t*=r,a=e*a+this.y,e*=r;(r=this.offset)[at.OX1]=s-i,r[at.OY1]=o+n,r[at.OX2]=s-e,r[at.OY2]=a+n,r[at.OX3]=h-e,r[at.OY3]=a+t,r[at.OX4]=h-i,r[at.OY4]=o+t},at.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},at.prototype.computeWorldVertices=function(t,e,n,i){var r=this.offset,a=t.worldX,s=t.worldY,o=t.a,h=t.b,c=t.c,l=(t=t.d,r[at.OX1]),u=r[at.OY1];e[n]=l*o+u*h+a,e[n+1]=l*c+u*t+s,l=r[at.OX2],u=r[at.OY2],e[n+=i]=l*o+u*h+a,e[n+1]=l*c+u*t+s,l=r[at.OX3],u=r[at.OY3],e[n+=i]=l*o+u*h+a,e[n+1]=l*c+u*t+s,l=r[at.OX4],u=r[at.OY4],e[n+=i]=l*o+u*h+a,e[n+1]=l*c+u*t+s},at.prototype.copy=function(){var t=new at(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,w.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),w.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},at.OX1=0,at.OY1=1,at.OX2=2,at.OY2=3,at.OX3=4,at.OY3=5,at.OX4=6,at.OY4=7,at.X1=0,at.Y1=1,at.C1R=2,at.C1G=3,at.C1B=4,at.C1A=5,at.U1=6,at.V1=7,at.X2=8,at.Y2=9,at.C2R=10,at.C2G=11,at.C2B=12,at.C2A=13,at.U2=14,at.V2=15,at.X3=16,at.Y3=17,at.C3R=18,at.C3G=19,at.C3B=20,at.C3A=21,at.U3=22,at.V3=23,at.X4=24,at.Y4=25,at.C4R=26,at.C4G=27,at.C4B=28,at.C4A=29,at.U4=30,at.V4=31,w.RegionAttachment=at,function(t){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}e.prototype.begin=function(t){},e.prototype.transform=function(e,n,i,r){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},t.JitterEffect=e}(R=R||{}),M=R=R||{},st.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},st.prototype.transform=function(t,e,n,i){var r=this.angle*M.MathUtils.degreesToRadians,a=t.x-this.worldX,s=t.y-this.worldY,o=Math.sqrt(a*a+s*s);o<this.radius&&(r=st.interpolation.apply(0,r,(this.radius-o)/this.radius),o=Math.cos(r),r=Math.sin(r),t.x=o*a-r*s+this.worldX,t.y=r*a+o*s+this.worldY)},st.prototype.end=function(){},st.interpolation=new M.PowOut(2),M.SwirlEffect=st,function(t){var e,n;function i(e){return n.call(this,(function(e){return new t.canvas.CanvasTexture(e)}),e=void 0===e?"":e)||this}e=t.canvas||(t.canvas={}),n=t.AssetManager,O(i,n),e.AssetManager=i}(R=R||{}),function(t){var e,n;function i(t){return n.call(this,t)||this}e=t.canvas||(t.canvas={}),n=t.Texture,O(i,n),i.prototype.setFilters=function(t,e){},i.prototype.setWraps=function(t,e){},i.prototype.dispose=function(){},e.CanvasTexture=i}(R=R||{}),function(t){function e(t){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=T.Utils.newFloatArray(8192),this.tempColor=new T.Color,this.ctx=t}e.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},e.prototype.drawImages=function(t){var e=this.ctx,n=t.drawOrder;this.debugRendering&&(e.strokeStyle="green"),e.save();for(var i=0,r=n.length;i<r;i++){var a,s,o,h,c,l,u,d,f=n[i];f.bone.active&&(o=s=u=null,(a=f.getAttachment())instanceof T.RegionAttachment&&(o=(s=(u=a).region).texture.getImage(),c=f.bone.skeleton.color,l=f.color,u=u.color,d=c.a*l.a*u.a,(h=this.tempColor).set(c.r*l.r*u.r,c.g*l.g*u.g,c.b*l.b*u.b,d),c=a,l=f.bone,u=s.width,d=s.height,e.save(),e.transform(l.a,l.c,l.b,l.d,l.worldX,l.worldY),e.translate(a.offset[0],a.offset[1]),e.rotate(a.rotation*Math.PI/180),f=c.width/u,e.scale(f*a.scaleX,f*a.scaleY),e.translate(u/2,d/2),a.region.rotate&&(l=u,u=d,d=l,e.rotate(-Math.PI/2)),e.scale(1,-1),e.translate(-u/2,-d/2),1==h.r&&1==h.g&&1==h.b&&1==h.a||(e.globalAlpha=h.a),e.drawImage(o,s.x,s.y,u,d,0,0,u,d),this.debugRendering&&e.strokeRect(0,0,u,d),e.restore()))}e.restore()},e.prototype.drawTriangles=function(t){for(var n=null,i=this.vertices,r=null,a=t.drawOrder,s=0,o=a.length;s<o;s++){var h=null;if((d=(u=a[s]).getAttachment())instanceof T.RegionAttachment){var c=d;i=this.computeRegionVertices(u,c,!1),r=e.QUAD_TRIANGLES,h=c.region.texture.getImage()}else{if(!(d instanceof T.MeshAttachment))continue;c=d,i=this.computeMeshVertices(u,c,!1),r=c.triangles,h=c.region.renderObject.texture.getImage()}if(null!=h){(l=u.data.blendMode)!=n&&(n=l);var l=u.bone.skeleton.color,u=u.color,d=d.color,f=l.a*u.a*d.a,p=this.tempColor,m=(p.set(l.r*u.r*d.r,l.g*u.g*d.g,l.b*u.b*d.b,f),this.ctx);1==p.r&&1==p.g&&1==p.b&&1==p.a||(m.globalAlpha=p.a);for(var g=0;g<r.length;g+=3){var v=8*r[g],y=8*r[g+1],x=8*r[g+2],b=i[v],E=i[1+v],A=i[6+v],w=(v=i[7+v],i[y]),S=i[1+y],M=i[6+y],C=(y=i[7+y],i[x]),I=i[1+x],P=i[6+x];x=i[7+x];this.drawTriangle(h,b,E,A,v,w,S,M,y,C,I,P,x),this.debugRendering&&(m.strokeStyle="green",m.beginPath(),m.moveTo(b,E),m.lineTo(w,S),m.lineTo(C,I),m.lineTo(b,E),m.stroke())}}}this.ctx.globalAlpha=1},e.prototype.drawTriangle=function(t,e,n,i,r,a,s,o,h,c,l,u,d){var f=this.ctx,p=(i*=t.width,r*=t.height,o*=t.width,h*=t.height,u*=t.width,d*=t.height,f.beginPath(),f.moveTo(e,n),f.lineTo(a,s),f.lineTo(c,l),f.closePath(),1/((o-=i)*(d-=r)-(u-=i)*(h-=r))),m=(d*(a-=e)-h*(c-=e))*p;d=(d*(s-=n)-h*(l-=n))*p,a=e-m*i-(h=(o*c-u*a)*p)*r,o=n-d*i-(c=(o*l-u*s)*p)*r;f.save(),f.transform(m,d,h,c,a,o),f.clip(),f.drawImage(t,0,0),f.restore()},e.prototype.computeRegionVertices=function(t,n,i){var r=t.bone.skeleton.color,a=t.color,s=n.color,o=r.a*a.a*s.a,h=(i=i?o:1,this.tempColor);h.set(r.r*a.r*s.r*i,r.g*a.g*s.g*i,r.b*a.b*s.b*i,o),n.computeWorldVertices(t.bone,this.vertices,0,e.VERTEX_SIZE),r=this.vertices,a=n.uvs;return r[T.RegionAttachment.C1R]=h.r,r[T.RegionAttachment.C1G]=h.g,r[T.RegionAttachment.C1B]=h.b,r[T.RegionAttachment.C1A]=h.a,r[T.RegionAttachment.U1]=a[0],r[T.RegionAttachment.V1]=a[1],r[T.RegionAttachment.C2R]=h.r,r[T.RegionAttachment.C2G]=h.g,r[T.RegionAttachment.C2B]=h.b,r[T.RegionAttachment.C2A]=h.a,r[T.RegionAttachment.U2]=a[2],r[T.RegionAttachment.V2]=a[3],r[T.RegionAttachment.C3R]=h.r,r[T.RegionAttachment.C3G]=h.g,r[T.RegionAttachment.C3B]=h.b,r[T.RegionAttachment.C3A]=h.a,r[T.RegionAttachment.U3]=a[4],r[T.RegionAttachment.V3]=a[5],r[T.RegionAttachment.C4R]=h.r,r[T.RegionAttachment.C4G]=h.g,r[T.RegionAttachment.C4B]=h.b,r[T.RegionAttachment.C4A]=h.a,r[T.RegionAttachment.U4]=a[6],r[T.RegionAttachment.V4]=a[7],r},e.prototype.computeMeshVertices=function(t,n,i){for(var r=t.bone.skeleton.color,a=t.color,s=n.color,o=r.a*a.a*s.a,h=(i=i?o:1,this.tempColor),c=(r=(h.set(r.r*a.r*s.r*i,r.g*a.g*s.g*i,r.b*a.b*s.b*i,o),n.worldVerticesLength/2),this.vertices.length<n.worldVerticesLength&&(this.vertices=T.Utils.newFloatArray(n.worldVerticesLength)),this.vertices),l=(n.computeWorldVertices(t,0,n.worldVerticesLength,c,0,e.VERTEX_SIZE),n.uvs),u=0,d=r,f=0,p=2;u<d;u++)c[p++]=h.r,c[p++]=h.g,c[p++]=h.b,c[p++]=h.a,c[p++]=l[f++],c[p++]=l[f++],p+=2;return c},e.QUAD_TRIANGLES=[0,1,2,2,3,0],e.VERTEX_SIZE=8,t.SkeletonRenderer=e}((T=R=R||{}).canvas||(T.canvas={})),function(t){var e,n;function i(e,i){return n.call(this,(function(n){return new t.webgl.GLTexture(e,n)}),i=void 0===i?"":i)||this}e=t.webgl||(t.webgl={}),n=t.AssetManager,O(i,n),e.AssetManager=i}(R=R||{}),function(t){function e(e,n){this.position=new t.Vector3(0,0,0),this.direction=new t.Vector3(0,0,-1),this.up=new t.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new t.Matrix4,this.inverseProjectionView=new t.Matrix4,this.projection=new t.Matrix4,this.view=new t.Matrix4,this.tmp=new t.Vector3,this.viewportWidth=e,this.viewportHeight=n,this.update()}e.prototype.update=function(){var t=this.projection,e=this.view,n=this.projectionView,i=this.inverseProjectionView,r=this.zoom,a=this.viewportWidth,s=this.viewportHeight;t.ortho(r*(-a/2),r*(a/2),r*(-s/2),r*(s/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(e),i.set(n.values).invert()},e.prototype.screenToWorld=function(t,e,n){var i=t.x,r=n-t.y-1,a=this.tmp;return a.x=2*i/e-1,a.y=2*r/n-1,a.z=2*t.z-1,a.project(this.inverseProjectionView),t.set(a.x,a.y,a.z),t},e.prototype.setViewport=function(t,e){this.viewportWidth=t,this.viewportHeight=e},t.OrthoCamera=e}((q=R=R||{}).webgl||(q.webgl={})),function(t){var e,n;function i(t,i,r){return void 0===r&&(r=!1),(i=n.call(this,i)||this).texture=null,i.boundUnit=0,i.useMipMaps=!1,i.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t),i.useMipMaps=r,i.restore(),i.context.addRestorable(i),i}e=t.webgl||(t.webgl={}),n=t.Texture,O(i,n),i.prototype.setFilters=function(t,e){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i.validateMagFilter(e))},i.validateMagFilter=function(e){switch(e){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return e}},i.prototype.setWraps=function(t,e){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e)},i.prototype.update=function(t){var e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),i.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)},i.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},i.prototype.bind=function(t){var e=this.context.gl;this.boundUnit=t=void 0===t?0:t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},i.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},i.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,e.GLTexture=i}(R=R||{}),function(t){function e(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var e=this.values;e[t.M00]=1,e[t.M11]=1,e[t.M22]=1,e[t.M33]=1}t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15,e.prototype.set=function(t){return this.values.set(t),this},e.prototype.transpose=function(){var e=this.temp,n=this.values;return e[t.M00]=n[t.M00],e[t.M01]=n[t.M10],e[t.M02]=n[t.M20],e[t.M03]=n[t.M30],e[t.M10]=n[t.M01],e[t.M11]=n[t.M11],e[t.M12]=n[t.M21],e[t.M13]=n[t.M31],e[t.M20]=n[t.M02],e[t.M21]=n[t.M12],e[t.M22]=n[t.M22],e[t.M23]=n[t.M32],e[t.M30]=n[t.M03],e[t.M31]=n[t.M13],e[t.M32]=n[t.M23],e[t.M33]=n[t.M33],this.set(e)},e.prototype.identity=function(){var e=this.values;return e[t.M00]=1,e[t.M01]=0,e[t.M02]=0,e[t.M03]=0,e[t.M10]=0,e[t.M11]=1,e[t.M12]=0,e[t.M13]=0,e[t.M20]=0,e[t.M21]=0,e[t.M22]=1,e[t.M23]=0,e[t.M30]=0,e[t.M31]=0,e[t.M32]=0,e[t.M33]=1,this},e.prototype.invert=function(){var e=this.values,n=this.temp,i=e[t.M30]*e[t.M21]*e[t.M12]*e[t.M03]-e[t.M20]*e[t.M31]*e[t.M12]*e[t.M03]-e[t.M30]*e[t.M11]*e[t.M22]*e[t.M03]+e[t.M10]*e[t.M31]*e[t.M22]*e[t.M03]+e[t.M20]*e[t.M11]*e[t.M32]*e[t.M03]-e[t.M10]*e[t.M21]*e[t.M32]*e[t.M03]-e[t.M30]*e[t.M21]*e[t.M02]*e[t.M13]+e[t.M20]*e[t.M31]*e[t.M02]*e[t.M13]+e[t.M30]*e[t.M01]*e[t.M22]*e[t.M13]-e[t.M00]*e[t.M31]*e[t.M22]*e[t.M13]-e[t.M20]*e[t.M01]*e[t.M32]*e[t.M13]+e[t.M00]*e[t.M21]*e[t.M32]*e[t.M13]+e[t.M30]*e[t.M11]*e[t.M02]*e[t.M23]-e[t.M10]*e[t.M31]*e[t.M02]*e[t.M23]-e[t.M30]*e[t.M01]*e[t.M12]*e[t.M23]+e[t.M00]*e[t.M31]*e[t.M12]*e[t.M23]+e[t.M10]*e[t.M01]*e[t.M32]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M32]*e[t.M23]-e[t.M20]*e[t.M11]*e[t.M02]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M02]*e[t.M33]+e[t.M20]*e[t.M01]*e[t.M12]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M12]*e[t.M33]-e[t.M10]*e[t.M01]*e[t.M22]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M22]*e[t.M33];if(0==i)throw new Error("non-invertible matrix");return i=1/i,n[t.M00]=e[t.M12]*e[t.M23]*e[t.M31]-e[t.M13]*e[t.M22]*e[t.M31]+e[t.M13]*e[t.M21]*e[t.M32]-e[t.M11]*e[t.M23]*e[t.M32]-e[t.M12]*e[t.M21]*e[t.M33]+e[t.M11]*e[t.M22]*e[t.M33],n[t.M01]=e[t.M03]*e[t.M22]*e[t.M31]-e[t.M02]*e[t.M23]*e[t.M31]-e[t.M03]*e[t.M21]*e[t.M32]+e[t.M01]*e[t.M23]*e[t.M32]+e[t.M02]*e[t.M21]*e[t.M33]-e[t.M01]*e[t.M22]*e[t.M33],n[t.M02]=e[t.M02]*e[t.M13]*e[t.M31]-e[t.M03]*e[t.M12]*e[t.M31]+e[t.M03]*e[t.M11]*e[t.M32]-e[t.M01]*e[t.M13]*e[t.M32]-e[t.M02]*e[t.M11]*e[t.M33]+e[t.M01]*e[t.M12]*e[t.M33],n[t.M03]=e[t.M03]*e[t.M12]*e[t.M21]-e[t.M02]*e[t.M13]*e[t.M21]-e[t.M03]*e[t.M11]*e[t.M22]+e[t.M01]*e[t.M13]*e[t.M22]+e[t.M02]*e[t.M11]*e[t.M23]-e[t.M01]*e[t.M12]*e[t.M23],n[t.M10]=e[t.M13]*e[t.M22]*e[t.M30]-e[t.M12]*e[t.M23]*e[t.M30]-e[t.M13]*e[t.M20]*e[t.M32]+e[t.M10]*e[t.M23]*e[t.M32]+e[t.M12]*e[t.M20]*e[t.M33]-e[t.M10]*e[t.M22]*e[t.M33],n[t.M11]=e[t.M02]*e[t.M23]*e[t.M30]-e[t.M03]*e[t.M22]*e[t.M30]+e[t.M03]*e[t.M20]*e[t.M32]-e[t.M00]*e[t.M23]*e[t.M32]-e[t.M02]*e[t.M20]*e[t.M33]+e[t.M00]*e[t.M22]*e[t.M33],n[t.M12]=e[t.M03]*e[t.M12]*e[t.M30]-e[t.M02]*e[t.M13]*e[t.M30]-e[t.M03]*e[t.M10]*e[t.M32]+e[t.M00]*e[t.M13]*e[t.M32]+e[t.M02]*e[t.M10]*e[t.M33]-e[t.M00]*e[t.M12]*e[t.M33],n[t.M13]=e[t.M02]*e[t.M13]*e[t.M20]-e[t.M03]*e[t.M12]*e[t.M20]+e[t.M03]*e[t.M10]*e[t.M22]-e[t.M00]*e[t.M13]*e[t.M22]-e[t.M02]*e[t.M10]*e[t.M23]+e[t.M00]*e[t.M12]*e[t.M23],n[t.M20]=e[t.M11]*e[t.M23]*e[t.M30]-e[t.M13]*e[t.M21]*e[t.M30]+e[t.M13]*e[t.M20]*e[t.M31]-e[t.M10]*e[t.M23]*e[t.M31]-e[t.M11]*e[t.M20]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M33],n[t.M21]=e[t.M03]*e[t.M21]*e[t.M30]-e[t.M01]*e[t.M23]*e[t.M30]-e[t.M03]*e[t.M20]*e[t.M31]+e[t.M00]*e[t.M23]*e[t.M31]+e[t.M01]*e[t.M20]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M33],n[t.M22]=e[t.M01]*e[t.M13]*e[t.M30]-e[t.M03]*e[t.M11]*e[t.M30]+e[t.M03]*e[t.M10]*e[t.M31]-e[t.M00]*e[t.M13]*e[t.M31]-e[t.M01]*e[t.M10]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M33],n[t.M23]=e[t.M03]*e[t.M11]*e[t.M20]-e[t.M01]*e[t.M13]*e[t.M20]-e[t.M03]*e[t.M10]*e[t.M21]+e[t.M00]*e[t.M13]*e[t.M21]+e[t.M01]*e[t.M10]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M23],n[t.M30]=e[t.M12]*e[t.M21]*e[t.M30]-e[t.M11]*e[t.M22]*e[t.M30]-e[t.M12]*e[t.M20]*e[t.M31]+e[t.M10]*e[t.M22]*e[t.M31]+e[t.M11]*e[t.M20]*e[t.M32]-e[t.M10]*e[t.M21]*e[t.M32],n[t.M31]=e[t.M01]*e[t.M22]*e[t.M30]-e[t.M02]*e[t.M21]*e[t.M30]+e[t.M02]*e[t.M20]*e[t.M31]-e[t.M00]*e[t.M22]*e[t.M31]-e[t.M01]*e[t.M20]*e[t.M32]+e[t.M00]*e[t.M21]*e[t.M32],n[t.M32]=e[t.M02]*e[t.M11]*e[t.M30]-e[t.M01]*e[t.M12]*e[t.M30]-e[t.M02]*e[t.M10]*e[t.M31]+e[t.M00]*e[t.M12]*e[t.M31]+e[t.M01]*e[t.M10]*e[t.M32]-e[t.M00]*e[t.M11]*e[t.M32],n[t.M33]=e[t.M01]*e[t.M12]*e[t.M20]-e[t.M02]*e[t.M11]*e[t.M20]+e[t.M02]*e[t.M10]*e[t.M21]-e[t.M00]*e[t.M12]*e[t.M21]-e[t.M01]*e[t.M10]*e[t.M22]+e[t.M00]*e[t.M11]*e[t.M22],e[t.M00]=n[t.M00]*i,e[t.M01]=n[t.M01]*i,e[t.M02]=n[t.M02]*i,e[t.M03]=n[t.M03]*i,e[t.M10]=n[t.M10]*i,e[t.M11]=n[t.M11]*i,e[t.M12]=n[t.M12]*i,e[t.M13]=n[t.M13]*i,e[t.M20]=n[t.M20]*i,e[t.M21]=n[t.M21]*i,e[t.M22]=n[t.M22]*i,e[t.M23]=n[t.M23]*i,e[t.M30]=n[t.M30]*i,e[t.M31]=n[t.M31]*i,e[t.M32]=n[t.M32]*i,e[t.M33]=n[t.M33]*i,this},e.prototype.determinant=function(){var e=this.values;return e[t.M30]*e[t.M21]*e[t.M12]*e[t.M03]-e[t.M20]*e[t.M31]*e[t.M12]*e[t.M03]-e[t.M30]*e[t.M11]*e[t.M22]*e[t.M03]+e[t.M10]*e[t.M31]*e[t.M22]*e[t.M03]+e[t.M20]*e[t.M11]*e[t.M32]*e[t.M03]-e[t.M10]*e[t.M21]*e[t.M32]*e[t.M03]-e[t.M30]*e[t.M21]*e[t.M02]*e[t.M13]+e[t.M20]*e[t.M31]*e[t.M02]*e[t.M13]+e[t.M30]*e[t.M01]*e[t.M22]*e[t.M13]-e[t.M00]*e[t.M31]*e[t.M22]*e[t.M13]-e[t.M20]*e[t.M01]*e[t.M32]*e[t.M13]+e[t.M00]*e[t.M21]*e[t.M32]*e[t.M13]+e[t.M30]*e[t.M11]*e[t.M02]*e[t.M23]-e[t.M10]*e[t.M31]*e[t.M02]*e[t.M23]-e[t.M30]*e[t.M01]*e[t.M12]*e[t.M23]+e[t.M00]*e[t.M31]*e[t.M12]*e[t.M23]+e[t.M10]*e[t.M01]*e[t.M32]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M32]*e[t.M23]-e[t.M20]*e[t.M11]*e[t.M02]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M02]*e[t.M33]+e[t.M20]*e[t.M01]*e[t.M12]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M12]*e[t.M33]-e[t.M10]*e[t.M01]*e[t.M22]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M22]*e[t.M33]},e.prototype.translate=function(e,n,i){var r=this.values;return r[t.M03]+=e,r[t.M13]+=n,r[t.M23]+=i,this},e.prototype.copy=function(){return(new e).set(this.values)},e.prototype.projection=function(e,n,i,r){this.identity();i=1/Math.tan(i*(Math.PI/180)/2);var a=(n+e)/(e-n);e=2*n*e/(e-n);return(n=this.values)[t.M00]=i/r,n[t.M10]=0,n[t.M20]=0,n[t.M30]=0,n[t.M01]=0,n[t.M11]=i,n[t.M21]=0,n[t.M31]=0,n[t.M02]=0,n[t.M12]=0,n[t.M22]=a,n[t.M32]=-1,n[t.M03]=0,n[t.M13]=0,n[t.M23]=e,n[t.M33]=0,this},e.prototype.ortho2d=function(t,e,n,i){return this.ortho(t,t+n,e,e+i,0,1)},e.prototype.ortho=function(e,n,i,r,a,s){this.identity();var o=2/(r-i),h=-2/(s-a),c=-(n+e)/(n-e);r=-(r+i)/(r-i),i=-(s+a)/(s-a);return(s=this.values)[t.M00]=2/(n-e),s[t.M10]=0,s[t.M20]=0,s[t.M30]=0,s[t.M01]=0,s[t.M11]=o,s[t.M21]=0,s[t.M31]=0,s[t.M02]=0,s[t.M12]=0,s[t.M22]=h,s[t.M32]=0,s[t.M03]=c,s[t.M13]=r,s[t.M23]=i,s[t.M33]=1,this},e.prototype.multiply=function(e){var n=this.temp,i=this.values;e=e.values;return n[t.M00]=i[t.M00]*e[t.M00]+i[t.M01]*e[t.M10]+i[t.M02]*e[t.M20]+i[t.M03]*e[t.M30],n[t.M01]=i[t.M00]*e[t.M01]+i[t.M01]*e[t.M11]+i[t.M02]*e[t.M21]+i[t.M03]*e[t.M31],n[t.M02]=i[t.M00]*e[t.M02]+i[t.M01]*e[t.M12]+i[t.M02]*e[t.M22]+i[t.M03]*e[t.M32],n[t.M03]=i[t.M00]*e[t.M03]+i[t.M01]*e[t.M13]+i[t.M02]*e[t.M23]+i[t.M03]*e[t.M33],n[t.M10]=i[t.M10]*e[t.M00]+i[t.M11]*e[t.M10]+i[t.M12]*e[t.M20]+i[t.M13]*e[t.M30],n[t.M11]=i[t.M10]*e[t.M01]+i[t.M11]*e[t.M11]+i[t.M12]*e[t.M21]+i[t.M13]*e[t.M31],n[t.M12]=i[t.M10]*e[t.M02]+i[t.M11]*e[t.M12]+i[t.M12]*e[t.M22]+i[t.M13]*e[t.M32],n[t.M13]=i[t.M10]*e[t.M03]+i[t.M11]*e[t.M13]+i[t.M12]*e[t.M23]+i[t.M13]*e[t.M33],n[t.M20]=i[t.M20]*e[t.M00]+i[t.M21]*e[t.M10]+i[t.M22]*e[t.M20]+i[t.M23]*e[t.M30],n[t.M21]=i[t.M20]*e[t.M01]+i[t.M21]*e[t.M11]+i[t.M22]*e[t.M21]+i[t.M23]*e[t.M31],n[t.M22]=i[t.M20]*e[t.M02]+i[t.M21]*e[t.M12]+i[t.M22]*e[t.M22]+i[t.M23]*e[t.M32],n[t.M23]=i[t.M20]*e[t.M03]+i[t.M21]*e[t.M13]+i[t.M22]*e[t.M23]+i[t.M23]*e[t.M33],n[t.M30]=i[t.M30]*e[t.M00]+i[t.M31]*e[t.M10]+i[t.M32]*e[t.M20]+i[t.M33]*e[t.M30],n[t.M31]=i[t.M30]*e[t.M01]+i[t.M31]*e[t.M11]+i[t.M32]*e[t.M21]+i[t.M33]*e[t.M31],n[t.M32]=i[t.M30]*e[t.M02]+i[t.M31]*e[t.M12]+i[t.M32]*e[t.M22]+i[t.M33]*e[t.M32],n[t.M33]=i[t.M30]*e[t.M03]+i[t.M31]*e[t.M13]+i[t.M32]*e[t.M23]+i[t.M33]*e[t.M33],this.set(this.temp)},e.prototype.multiplyLeft=function(e){var n=this.temp,i=this.values;e=e.values;return n[t.M00]=e[t.M00]*i[t.M00]+e[t.M01]*i[t.M10]+e[t.M02]*i[t.M20]+e[t.M03]*i[t.M30],n[t.M01]=e[t.M00]*i[t.M01]+e[t.M01]*i[t.M11]+e[t.M02]*i[t.M21]+e[t.M03]*i[t.M31],n[t.M02]=e[t.M00]*i[t.M02]+e[t.M01]*i[t.M12]+e[t.M02]*i[t.M22]+e[t.M03]*i[t.M32],n[t.M03]=e[t.M00]*i[t.M03]+e[t.M01]*i[t.M13]+e[t.M02]*i[t.M23]+e[t.M03]*i[t.M33],n[t.M10]=e[t.M10]*i[t.M00]+e[t.M11]*i[t.M10]+e[t.M12]*i[t.M20]+e[t.M13]*i[t.M30],n[t.M11]=e[t.M10]*i[t.M01]+e[t.M11]*i[t.M11]+e[t.M12]*i[t.M21]+e[t.M13]*i[t.M31],n[t.M12]=e[t.M10]*i[t.M02]+e[t.M11]*i[t.M12]+e[t.M12]*i[t.M22]+e[t.M13]*i[t.M32],n[t.M13]=e[t.M10]*i[t.M03]+e[t.M11]*i[t.M13]+e[t.M12]*i[t.M23]+e[t.M13]*i[t.M33],n[t.M20]=e[t.M20]*i[t.M00]+e[t.M21]*i[t.M10]+e[t.M22]*i[t.M20]+e[t.M23]*i[t.M30],n[t.M21]=e[t.M20]*i[t.M01]+e[t.M21]*i[t.M11]+e[t.M22]*i[t.M21]+e[t.M23]*i[t.M31],n[t.M22]=e[t.M20]*i[t.M02]+e[t.M21]*i[t.M12]+e[t.M22]*i[t.M22]+e[t.M23]*i[t.M32],n[t.M23]=e[t.M20]*i[t.M03]+e[t.M21]*i[t.M13]+e[t.M22]*i[t.M23]+e[t.M23]*i[t.M33],n[t.M30]=e[t.M30]*i[t.M00]+e[t.M31]*i[t.M10]+e[t.M32]*i[t.M20]+e[t.M33]*i[t.M30],n[t.M31]=e[t.M30]*i[t.M01]+e[t.M31]*i[t.M11]+e[t.M32]*i[t.M21]+e[t.M33]*i[t.M31],n[t.M32]=e[t.M30]*i[t.M02]+e[t.M31]*i[t.M12]+e[t.M32]*i[t.M22]+e[t.M33]*i[t.M32],n[t.M33]=e[t.M30]*i[t.M03]+e[t.M31]*i[t.M13]+e[t.M32]*i[t.M23]+e[t.M33]*i[t.M33],this.set(this.temp)},e.prototype.lookAt=function(n,i,r){e.initTemps();var a=e.xAxis,s=e.yAxis,o=e.zAxis;return(i=(o.setFrom(i).normalize(),a.setFrom(i).normalize(),a.cross(r).normalize(),s.setFrom(a).cross(o).normalize(),this.identity(),this.values))[t.M00]=a.x,i[t.M01]=a.y,i[t.M02]=a.z,i[t.M10]=s.x,i[t.M11]=s.y,i[t.M12]=s.z,i[t.M20]=-o.x,i[t.M21]=-o.y,i[t.M22]=-o.z,e.tmpMatrix.identity(),e.tmpMatrix.values[t.M03]=-n.x,e.tmpMatrix.values[t.M13]=-n.y,e.tmpMatrix.values[t.M23]=-n.z,this.multiply(e.tmpMatrix),this},e.initTemps=function(){null===e.xAxis&&(e.xAxis=new t.Vector3),null===e.yAxis&&(e.yAxis=new t.Vector3),null===e.zAxis&&(e.zAxis=new t.Vector3)},e.xAxis=null,e.yAxis=null,e.zAxis=null,e.tmpMatrix=new e,t.Matrix4=e}((N=R=R||{}).webgl||(N.webgl={})),function(t){function e(e,n,i,r){this.attributes=n,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e);for(var a=this.elementsPerVertex=0;a<n.length;a++)this.elementsPerVertex+=n[a].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(r),this.context.addRestorable(this)}function n(t,e,n){this.name=t,this.type=e,this.numElements=n}e.prototype.getAttributes=function(){return this.attributes},e.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},e.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},e.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},e.prototype.getVertices=function(){return this.vertices},e.prototype.maxIndices=function(){return this.indices.length},e.prototype.numIndices=function(){return this.indicesLength},e.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},e.prototype.getIndices=function(){return this.indices},e.prototype.getVertexSizeInFloats=function(){for(var t=0,e=0;e<this.attributes.length;e++)t+=this.attributes[e].numElements;return t},e.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},e.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},e.prototype.draw=function(t,e){this.drawWithOffset(t,e,0,0<this.indicesLength?this.indicesLength:this.verticesLength/this.elementsPerVertex)},e.prototype.drawWithOffset=function(t,e,n,i){var r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),0<this.indicesLength?r.drawElements(e,i,r.UNSIGNED_SHORT,2*n):r.drawArrays(e,n,i),this.unbind(t)},e.prototype.bind=function(t){for(var e=this.context.gl,n=(e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer),0),i=0;i<this.attributes.length;i++){var r=this.attributes[i],a=t.getAttributeLocation(r.name);e.enableVertexAttribArray(a),e.vertexAttribPointer(a,r.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=r.numElements}0<this.indicesLength&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},e.prototype.unbind=function(t){for(var e=this.context.gl,n=0;n<this.attributes.length;n++){var i=this.attributes[n];i=t.getAttributeLocation(i.name);e.disableVertexAttribArray(i)}e.bindBuffer(e.ARRAY_BUFFER,null),0<this.indicesLength&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},e.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},e.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},e.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},t.Mesh=e,t.VertexAttribute=n,O(a,i=n);var i,r=a;function a(){return i.call(this,t.Shader.POSITION,f.Float,2)||this}t.Position2Attribute=r,O(o,s=n);var s;r=o;function o(){return s.call(this,t.Shader.POSITION,f.Float,3)||this}t.Position3Attribute=r,O(c,h=n);var h;r=c;function c(e){return h.call(this,t.Shader.TEXCOORDS+(0==(e=void 0===e?0:e)?"":e),f.Float,2)||this}t.TexCoordAttribute=r,O(u,l=n);var l;r=u;function u(){return l.call(this,t.Shader.COLOR,f.Float,4)||this}t.ColorAttribute=r,O(p,d=n);var d,f;r=p;function p(){return d.call(this,t.Shader.COLOR2,f.Float,4)||this}t.Color2Attribute=r,(f=t.VertexAttributeType||(t.VertexAttributeType={}))[f.Float=0]="Float"}((W=R=R||{}).webgl||(W.webgl={})),function(t){function e(e,n,i){if(void 0===n&&(n=!0),void 0===i&&(i=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,10920<i)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e),n=n?[new t.Position2Attribute,new t.ColorAttribute,new t.TexCoordAttribute,new t.Color2Attribute]:[new t.Position2Attribute,new t.ColorAttribute,new t.TexCoordAttribute],this.mesh=new t.Mesh(e,n,i,3*i),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}e.prototype.begin=function(t){var e=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,e.enable(e.BLEND),e.blendFunc(this.srcBlend,this.dstBlend)},e.prototype.setBlendMode=function(t,e){var n=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},e.prototype.draw=function(t,e,n){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();for(var i=this.mesh.numVertices(),r=(this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength),this.mesh.getIndices()),a=this.indicesLength,s=0;s<n.length;a++,s++)r[a]=n[s]+i;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength)},e.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},e.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(0<this.verticesLength||0<this.indicesLength)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},e.prototype.getDrawCalls=function(){return this.drawCalls},e.prototype.dispose=function(){this.mesh.dispose()},t.PolygonBatcher=e}((q=R=R||{}).webgl||(q.webgl={})),function(t){var e,n;function i(e,n,i){void 0===i&&(i=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new C.Color(1,1,1,1),this.canvas=e,this.context=n instanceof t.ManagedWebGLRenderingContext?n:new t.ManagedWebGLRenderingContext(n),this.twoColorTint=i,this.camera=new t.OrthoCamera(e.width,e.height),this.batcherShader=i?t.Shader.newTwoColoredTextured(this.context):t.Shader.newColoredTextured(this.context),this.batcher=new t.PolygonBatcher(this.context,i),this.shapesShader=t.Shader.newColored(this.context),this.shapes=new t.ShapeRenderer(this.context),this.skeletonRenderer=new t.SkeletonRenderer(this.context,i),this.skeletonDebugRenderer=new t.SkeletonDebugRenderer(this.context)}i.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},i.prototype.drawSkeleton=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=-1),void 0===i&&(i=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,n,i)},i.prototype.drawSkeletonDebug=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,n)},i.prototype.drawTexture=function(t,e,n,i,r,a){void 0===a&&(a=null),this.enableRenderer(this.batcher),null===a&&(a=this.WHITE);var s=this.QUAD,o=0;s[o++]=e,s[o++]=n,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=0,s[o++]=1,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),s[o++]=e+i,s[o++]=n,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=1,s[o++]=1,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),s[o++]=e+i,s[o++]=n+r,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=1,s[o++]=0,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),s[o++]=e,s[o++]=n+r,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=0,s[o++]=0,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),this.batcher.draw(t,s,this.QUAD_TRIANGLES)},i.prototype.drawTextureUV=function(t,e,n,i,r,a,s,o,h,c){void 0===c&&(c=null),this.enableRenderer(this.batcher),null===c&&(c=this.WHITE);var l=this.QUAD,u=0;l[u++]=e,l[u++]=n,l[u++]=c.r,l[u++]=c.g,l[u++]=c.b,l[u++]=c.a,l[u++]=a,l[u++]=s,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),l[u++]=e+i,l[u++]=n,l[u++]=c.r,l[u++]=c.g,l[u++]=c.b,l[u++]=c.a,l[u++]=o,l[u++]=s,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),l[u++]=e+i,l[u++]=n+r,l[u++]=c.r,l[u++]=c.g,l[u++]=c.b,l[u++]=c.a,l[u++]=o,l[u++]=h,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),l[u++]=e,l[u++]=n+r,l[u++]=c.r,l[u++]=c.g,l[u++]=c.b,l[u++]=c.a,l[u++]=a,l[u++]=h,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),this.batcher.draw(t,l,this.QUAD_TRIANGLES)},i.prototype.drawTextureRotated=function(t,e,n,i,r,a,s,o,h,c){void 0===h&&(h=null),void 0===c&&(c=!1),this.enableRenderer(this.batcher),null===h&&(h=this.WHITE);c=this.QUAD,e+=a,n+=s;var l,u=-a,d=-s,f=(i=i-a,a=r-s,r=u,s=d,a),p=i,m=0,g=0,v=0,y=0,x=0,b=0,E=0,A=0;y=0!=o?(v=(x=(l=C.MathUtils.cosDeg(o))*p-(o=C.MathUtils.sinDeg(o))*a)+((m=l*r-o*s)-(E=l*u-o*f)),(b=o*p+l*a)+((g=o*r+l*s)-(A=o*u+l*f))):(m=r,g=s,E=u,A=f,x=p,b=a,v=i,d),g+=n,v+=e,y+=n,x+=e,b+=n,E+=e,A+=n,o=0;c[o++]=m+=e,c[o++]=g,c[o++]=h.r,c[o++]=h.g,c[o++]=h.b,c[o++]=h.a,c[o++]=0,c[o++]=1,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),c[o++]=v,c[o++]=y,c[o++]=h.r,c[o++]=h.g,c[o++]=h.b,c[o++]=h.a,c[o++]=1,c[o++]=1,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),c[o++]=x,c[o++]=b,c[o++]=h.r,c[o++]=h.g,c[o++]=h.b,c[o++]=h.a,c[o++]=1,c[o++]=0,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),c[o++]=E,c[o++]=A,c[o++]=h.r,c[o++]=h.g,c[o++]=h.b,c[o++]=h.a,c[o++]=0,c[o++]=0,this.twoColorTint&&(c[o++]=0,c[o++]=0,c[o++]=0,c[o++]=0),this.batcher.draw(t,c,this.QUAD_TRIANGLES)},i.prototype.drawRegion=function(t,e,n,i,r,a,s){void 0===a&&(a=null),void 0===s&&(s=!1),this.enableRenderer(this.batcher),null===a&&(a=this.WHITE);var o=0;(s=this.QUAD)[o++]=e,s[o++]=n,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=t.u,s[o++]=t.v2,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),s[o++]=e+i,s[o++]=n,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=t.u2,s[o++]=t.v2,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),s[o++]=e+i,s[o++]=n+r,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=t.u2,s[o++]=t.v,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),s[o++]=e,s[o++]=n+r,s[o++]=a.r,s[o++]=a.g,s[o++]=a.b,s[o++]=a.a,s[o++]=t.u,s[o++]=t.v,this.twoColorTint&&(s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0),this.batcher.draw(t.texture,s,this.QUAD_TRIANGLES)},i.prototype.line=function(t,e,n,i,r,a){void 0===r&&(r=null),void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.line(t,e,n,i,r)},i.prototype.triangle=function(t,e,n,i,r,a,s,o,h,c){void 0===o&&(o=null),void 0===h&&(h=null),void 0===c&&(c=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,e,n,i,r,a,s,o,h,c)},i.prototype.quad=function(t,e,n,i,r,a,s,o,h,c,l,u,d){void 0===c&&(c=null),void 0===l&&(l=null),void 0===u&&(u=null),void 0===d&&(d=null),this.enableRenderer(this.shapes),this.shapes.quad(t,e,n,i,r,a,s,o,h,c,l,u,d)},i.prototype.rect=function(t,e,n,i,r,a){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.rect(t,e,n,i,r,a)},i.prototype.rectLine=function(t,e,n,i,r,a,s){void 0===s&&(s=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,n,i,r,a,s)},i.prototype.polygon=function(t,e,n,i){void 0===i&&(i=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,e,n,i)},i.prototype.circle=function(t,e,n,i,r,a){void 0===r&&(r=null),void 0===a&&(a=0),this.enableRenderer(this.shapes),this.shapes.circle(t,e,n,i,r,a)},i.prototype.curve=function(t,e,n,i,r,a,s,o,h,c){void 0===c&&(c=null),this.enableRenderer(this.shapes),this.shapes.curve(t,e,n,i,r,a,s,o,h,c)},i.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},i.prototype.resize=function(t){var n=this.canvas,i=n.clientWidth,r=n.clientHeight;n.width==i&&n.height==r||(n.width=i,n.height=r),this.context.gl.viewport(0,0,n.width,n.height),t!==e.Stretch&&(t===e.Expand?this.camera.setViewport(i,r):t===e.Fit&&(i=n.width,r=n.height,t=this.camera.viewportWidth,n=this.camera.viewportHeight,this.camera.viewportWidth=i*(t=n/t<r/i?t/i:n/r),this.camera.viewportHeight=r*t)),this.camera.update()},i.prototype.enableRenderer=function(e){this.activeRenderer!==e&&(this.end(),e instanceof t.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(t.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):e instanceof t.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(t.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},i.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},t.SceneRenderer=i,(n=e=t.ResizeMode||(t.ResizeMode={}))[n.Stretch=0]="Stretch",n[n.Expand=1]="Expand",n[n.Fit=2]="Fit"}((C=R=R||{}).webgl||(C.webgl={})),function(t){function e(e,n,i){this.vertexShader=n,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=i,this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e),this.context.addRestorable(this),this.compile()}e.prototype.getProgram=function(){return this.program},e.prototype.getVertexShader=function(){return this.vertexShader},e.prototype.getFragmentShader=function(){return this.fragmentShader},e.prototype.getVertexShaderSource=function(){return this.vsSource},e.prototype.getFragmentSource=function(){return this.fsSource},e.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}},e.prototype.compileShader=function(t,e){var n=this.context.gl;t=n.createShader(t);if(n.shaderSource(t,e),n.compileShader(t),!n.getShaderParameter(t,n.COMPILE_STATUS)&&(e="Couldn't compile shader: "+n.getShaderInfoLog(t),n.deleteShader(t),!n.isContextLost()))throw new Error(e);return t},e.prototype.compileProgram=function(t,e){var n=this.context.gl,i=n.createProgram();if(n.attachShader(i,t),n.attachShader(i,e),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)&&(t="Couldn't compile shader program: "+n.getProgramInfoLog(i),n.deleteProgram(i),!n.isContextLost()))throw new Error(t);return i},e.prototype.restore=function(){this.compile()},e.prototype.bind=function(){this.context.gl.useProgram(this.program)},e.prototype.unbind=function(){this.context.gl.useProgram(null)},e.prototype.setUniformi=function(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)},e.prototype.setUniformf=function(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniform2f=function(t,e,n){this.context.gl.uniform2f(this.getUniformLocation(t),e,n)},e.prototype.setUniform3f=function(t,e,n,i){this.context.gl.uniform3f(this.getUniformLocation(t),e,n,i)},e.prototype.setUniform4f=function(t,e,n,i,r){this.context.gl.uniform4f(this.getUniformLocation(t),e,n,i,r)},e.prototype.setUniform2x2f=function(t,e){var n=this.context.gl;this.tmp2x2.set(e),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},e.prototype.setUniform3x3f=function(t,e){var n=this.context.gl;this.tmp3x3.set(e),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},e.prototype.setUniform4x4f=function(t,e){var n=this.context.gl;this.tmp4x4.set(e),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},e.prototype.getUniformLocation=function(t){var e=this.context.gl,n=e.getUniformLocation(this.program,t);if(n||e.isContextLost())return n;throw new Error("Couldn't find location for uniform "+t)},e.prototype.getAttributeLocation=function(t){var e=this.context.gl,n=e.getAttribLocation(this.program,t);if(-1!=n||e.isContextLost())return n;throw new Error("Couldn't find location for attribute "+t)},e.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},e.newColoredTextured=function(t){return new e(t,"\n\t\t\t\tattribute vec4 "+e.POSITION+";\n\t\t\t\tattribute vec4 "+e.COLOR+";\n\t\t\t\tattribute vec2 "+e.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+e.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+e.COLOR+";\n\t\t\t\t\tv_texCoords = "+e.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+e.MVP_MATRIX+" * "+e.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},e.newTwoColoredTextured=function(t){return new e(t,"\n\t\t\t\tattribute vec4 "+e.POSITION+";\n\t\t\t\tattribute vec4 "+e.COLOR+";\n\t\t\t\tattribute vec4 "+e.COLOR2+";\n\t\t\t\tattribute vec2 "+e.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+e.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+e.COLOR+";\n\t\t\t\t\tv_dark = "+e.COLOR2+";\n\t\t\t\t\tv_texCoords = "+e.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+e.MVP_MATRIX+" * "+e.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},e.newColored=function(t){return new e(t,"\n\t\t\t\tattribute vec4 "+e.POSITION+";\n\t\t\t\tattribute vec4 "+e.COLOR+";\n\t\t\t\tuniform mat4 "+e.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+e.COLOR+";\n\t\t\t\t\tgl_Position = "+e.MVP_MATRIX+" * "+e.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},e.MVP_MATRIX="u_projTrans",e.POSITION="a_position",e.COLOR="a_color",e.COLOR2="a_color2",e.TEXCOORDS="a_texCoords",e.SAMPLER="u_texture",t.Shader=e}((N=R=R||{}).webgl||(N.webgl={})),function(t){var e,n;function i(n,i){if(void 0===i&&(i=10920),this.isDrawing=!1,this.shapeType=e.Filled,this.color=new I.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new I.Vector2,10920<i)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=n instanceof t.ManagedWebGLRenderingContext?n:new t.ManagedWebGLRenderingContext(n),this.mesh=new t.Mesh(n,[new t.Position2Attribute,new t.ColorAttribute],i,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}i.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0,(t=this.context.gl).enable(t.BLEND),t.blendFunc(this.srcBlend,this.dstBlend)},i.prototype.setBlendMode=function(t,e){var n=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},i.prototype.setColor=function(t){this.color.setFromColor(t)},i.prototype.setColorWith=function(t,e,n,i){this.color.set(t,e,n,i)},i.prototype.point=function(t,n,i){void 0===i&&(i=null),this.check(e.Point,1),null===i&&(i=this.color),this.vertex(t,n,i)},i.prototype.line=function(t,n,i,r,a){void 0===a&&(a=null),this.check(e.Line,2),this.mesh.getVertices(),this.vertexIndex,null===a&&(a=this.color),this.vertex(t,n,a),this.vertex(i,r,a)},i.prototype.triangle=function(t,n,i,r,a,s,o,h,c,l){void 0===h&&(h=null),void 0===c&&(c=null),void 0===l&&(l=null),this.check(t?e.Filled:e.Line,3),this.mesh.getVertices(),this.vertexIndex,null===h&&(h=this.color),null===c&&(c=this.color),null===l&&(l=this.color),t?(this.vertex(n,i,h),this.vertex(r,a,c),this.vertex(s,o,l)):(this.vertex(n,i,h),this.vertex(r,a,c),this.vertex(r,a,h),this.vertex(s,o,c),this.vertex(s,o,h),this.vertex(n,i,c))},i.prototype.quad=function(t,n,i,r,a,s,o,h,c,l,u,d,f){void 0===l&&(l=null),void 0===u&&(u=null),void 0===d&&(d=null),void 0===f&&(f=null),this.check(t?e.Filled:e.Line,3),this.mesh.getVertices(),this.vertexIndex,null===l&&(l=this.color),null===u&&(u=this.color),null===d&&(d=this.color),null===f&&(f=this.color),t?(this.vertex(n,i,l),this.vertex(r,a,u),this.vertex(s,o,d),this.vertex(s,o,d)):(this.vertex(n,i,l),this.vertex(r,a,u),this.vertex(r,a,u),this.vertex(s,o,d),this.vertex(s,o,d),this.vertex(h,c,f)),this.vertex(h,c,f),this.vertex(n,i,l)},i.prototype.rect=function(t,e,n,i,r,a){this.quad(t,e,n,e+i,n,e+i,n+r,e,n+r,a=void 0===a?null:a,a,a,a)},i.prototype.rectLine=function(t,n,i,r,a,s,o){void 0===o&&(o=null),this.check(t?e.Filled:e.Line,8),null===o&&(o=this.color);var h=((c=this.tmp.set(a-i,n-r)).normalize(),c.x*(s*=.5)),c=c.y*s;t?(this.vertex(n+h,i+c,o),this.vertex(n-h,i-c,o),this.vertex(r+h,a+c,o),this.vertex(r-h,a-c,o),this.vertex(r+h,a+c,o)):(this.vertex(n+h,i+c,o),this.vertex(n-h,i-c,o),this.vertex(r+h,a+c,o),this.vertex(r-h,a-c,o),this.vertex(r+h,a+c,o),this.vertex(n+h,i+c,o),this.vertex(r-h,a-c,o)),this.vertex(n-h,i-c,o)},i.prototype.x=function(t,e,n){this.line(t-n,e-n,t+n,e+n),this.line(t-n,e+n,t+n,e-n)},i.prototype.polygon=function(t,n,i,r){if(void 0===r&&(r=null),i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(e.Line,2*i),null===r&&(r=this.color),this.mesh.getVertices(),this.vertexIndex;for(var a=t[n<<=1],s=t[n+1],o=n+(i<<=1),h=n,c=n+i-2;h<c;h+=2){var l=t[h],u=t[h+1],d=0,f=o<=h+2?(d=a,s):(d=t[h+2],t[h+3]);this.vertex(l,u,r),this.vertex(d,f,r)}},i.prototype.circle=function(t,n,i,r,a,s){if(void 0===a&&(a=null),(s=0===(s=void 0===s?0:s)?Math.max(1,6*I.MathUtils.cbrt(r)|0):s)<=0)throw new Error("segments must be > 0.");null===a&&(a=this.color);var o=2*I.MathUtils.PI/s,h=Math.cos(o),c=Math.sin(o),l=r,u=0;if(t){for(this.check(e.Filled,3*s+3),s--,f=0;f<s;f++){this.vertex(n,i,a),this.vertex(n+l,i+u,a);var d=l;this.vertex(n+(l=h*l-c*u),i+(u=c*d+h*u),a)}this.vertex(n,i,a),this.vertex(n+l,i+u,a)}else{this.check(e.Line,2*s+2);for(var f=0;f<s;f++){this.vertex(n+l,i+u,a);var p=l;l=h*l-c*u,u=c*p+h*u;this.vertex(n+l,i+u,a)}this.vertex(n+l,i+u,a)}this.vertex(n+(l=r),i+(u=0),a)},i.prototype.curve=function(t,n,i,r,a,s,o,h,c,l){void 0===l&&(l=null),this.check(e.Line,2*c+2),null===l&&(l=this.color);for(var u,d,f=(u=1/c)*u*u,p=3*(d=u*u),m=6*f,g=t-2*i+a,v=n-2*r+s,y=t,x=n,b=(i-t)*(u=3*u)+g*p+(a=3*(i-a)-t+o)*f,E=(r-n)*u+v*p+(s=3*(r-s)-n+h)*f,A=g*(d=6*d)+a*m,w=v*d+s*m,S=a*m,M=s*m;0<c--;)this.vertex(y,x,l),y+=b,x+=E,b+=A,E+=w,A+=S,w+=M,this.vertex(y,x,l);this.vertex(y,x,l),this.vertex(o,h,l)},i.prototype.vertex=function(t,e,n){var i=this.vertexIndex,r=this.mesh.getVertices();r[i++]=t,r[i++]=e,r[i++]=n.r,r[i++]=n.g,r[i++]=n.b,r[i++]=n.a,this.vertexIndex=i},i.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},i.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},i.prototype.check=function(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.shapeType==t?this.mesh.maxVertices()-this.mesh.numVertices()<e&&this.flush():(this.flush(),this.shapeType=t)},i.prototype.dispose=function(){this.mesh.dispose()},t.ShapeRenderer=i,(n=e=t.ShapeType||(t.ShapeType={}))[n.Point=0]="Point",n[n.Line=1]="Line",n[n.Filled=4]="Filled"}((I=R=R||{}).webgl||(I.webgl={})),function(t){function e(e){this.boneLineColor=new P.Color(1,0,0,1),this.boneOriginColor=new P.Color(0,1,0,1),this.attachmentLineColor=new P.Color(0,0,1,.5),this.triangleLineColor=new P.Color(1,.64,0,.5),this.pathColor=(new P.Color).setFromString("FF7F00"),this.clipColor=new P.Color(.8,0,0,2),this.aabbColor=new P.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new P.SkeletonBounds,this.temp=new Array,this.vertices=P.Utils.newFloatArray(2048),this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e)}e.prototype.draw=function(t,n,i){void 0===i&&(i=null);var r=n.x,a=n.y,s=this.context.gl,o=this.premultipliedAlpha?s.ONE:s.SRC_ALPHA,h=(t.setBlendMode(o,s.ONE_MINUS_SRC_ALPHA),n.bones);if(this.drawBones){t.setColor(this.boneLineColor);for(var c=0,l=h.length;c<l;c++){var u=h[c];i&&-1<i.indexOf(u.data.name)||null!=u.parent&&(A=r+u.data.length*u.a+u.worldX,w=a+u.data.length*u.c+u.worldY,t.rectLine(!0,r+u.worldX,a+u.worldY,A,w,this.boneWidth*this.scale))}this.drawSkeletonXY&&t.x(r,a,4*this.scale)}if(this.drawRegionAttachments)for(t.setColor(this.attachmentLineColor),c=0,l=(U=n.slots).length;c<l;c++)(G=(V=U[c]).getAttachment())instanceof P.RegionAttachment&&(f=this.vertices,G.computeWorldVertices(V.bone,f,0,2),t.line(f[0],f[1],f[2],f[3]),t.line(f[2],f[3],f[4],f[5]),t.line(f[4],f[5],f[6],f[7]),t.line(f[6],f[7],f[0],f[1]));if(this.drawMeshHull||this.drawMeshTriangles)for(c=0,l=(U=n.slots).length;c<l;c++){if((V=U[c]).bone.active&&(G=V.getAttachment())instanceof P.MeshAttachment){var d=G,f=this.vertices,p=(d.computeWorldVertices(V,0,d.worldVerticesLength,f,0,2),d.triangles);d=d.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(var m=0,g=p.length;m<g;m+=3){var v=2*p[m],y=2*p[m+1],x=2*p[m+2];t.triangle(!1,f[v],f[1+v],f[y],f[1+y],f[x],f[1+x])}}if(this.drawMeshHull&&0<d){t.setColor(this.attachmentLineColor);var b=f[(d=2*(d>>1))-2],E=f[d-1];for(m=0,g=d;m<g;m+=2){var A=f[m],w=f[m+1];t.line(A,w,b,E),b=A,E=w}}}}if(this.drawBoundingBoxes){var S=((o=this.bounds).update(n,!0),t.setColor(this.aabbColor),t.rect(!1,o.minX,o.minY,o.getWidth(),o.getHeight()),o.polygons),M=o.boundingBoxes;for(c=0,l=S.length;c<l;c++){var T=S[c];t.setColor(M[c].color),t.polygon(T,0,T.length)}}if(this.drawPaths)for(c=0,l=(U=n.slots).length;c<l;c++)if((V=U[c]).bone.active&&(G=V.getAttachment())instanceof P.PathAttachment){var C=G,I=(g=C.worldVerticesLength,this.temp=P.Utils.setArraySize(this.temp,g,0)),k=(C.computeWorldVertices(V,0,g,I,0,2),this.pathColor),R=I[2],L=I[3],O=0,_=0;for(C.closed&&(t.setColor(k),D=I[0],B=I[1],N=I[g-2],F=I[g-1],O=I[g-4],_=I[g-3],t.curve(R,L,D,B,N,F,O,_,32),t.setColor(e.LIGHT_GRAY),t.line(R,L,D,B),t.line(O,_,N,F)),g-=4,m=4;m<g;m+=6){var D=I[m],B=I[m+1],N=I[m+2],F=I[m+3];O=I[m+4],_=I[m+5],t.setColor(k),t.curve(R,L,D,B,N,F,O,_,32),t.setColor(e.LIGHT_GRAY),t.line(R,L,D,B),t.line(O,_,N,F),R=O,L=_}}if(this.drawBones)for(t.setColor(this.boneOriginColor),c=0,l=h.length;c<l;c++)u=h[c],i&&-1<i.indexOf(u.data.name)||t.circle(!0,r+u.worldX,a+u.worldY,3*this.scale,e.GREEN,8);if(this.drawClipping){var U=n.slots;for(t.setColor(this.clipColor),c=0,l=U.length;c<l;c++){var G,V;if((V=U[c]).bone.active&&(G=V.getAttachment())instanceof P.ClippingAttachment){var Y=G;g=Y.worldVerticesLength,I=this.temp=P.Utils.setArraySize(this.temp,g,0);Y.computeWorldVertices(V,0,g,I,0,2);for(var z=0,W=I.length;z<W;z+=2)A=I[z],w=I[z+1],O=I[(z+2)%I.length],_=I[(z+3)%I.length],t.line(A,w,O,_)}}}},e.prototype.dispose=function(){},e.LIGHT_GRAY=new P.Color(192/255,192/255,192/255,1),e.GREEN=new P.Color(0,1,0,1),t.SkeletonDebugRenderer=e}((P=R=R||{}).webgl||(P.webgl={})),function(t){var e=function(t,e,n){this.vertices=t,this.numVertices=e,this.numFloats=n};function n(t,n){void 0===n&&(n=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new k.Color,this.tempColor2=new k.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new e(null,0,0),this.clipper=new k.SkeletonClipping,this.temp=new k.Vector2,this.temp2=new k.Vector2,this.temp3=new k.Color,this.temp4=new k.Color,(this.twoColorTint=n)&&(this.vertexSize+=4),this.vertices=k.Utils.newFloatArray(1024*this.vertexSize)}n.prototype.draw=function(e,i,r,a){void 0===a&&(a=-1);var s=this.clipper,o=this.premultipliedAlpha,h=this.twoColorTint,c=null,l=this.temp,u=this.temp2,d=this.temp3,f=this.temp4,p=this.renderable,m=null,g=null,v=i.drawOrder,y=null,x=i.color,b=h?12:8,E=!1;-1==(r=void 0===r?-1:r)&&(E=!0);for(var A=0,w=v.length;A<w;A++){var S=s.isClipping()?2:b,M=v[A];if(M.bone.active)if(E=0<=r&&r==M.data.index||E){0<=a&&a==M.data.index&&(E=!1);var T=null;if((I=M.getAttachment())instanceof k.RegionAttachment){var C=I;p.vertices=this.vertices,p.numVertices=4,p.numFloats=S<<2,C.computeWorldVertices(M.bone,p.vertices,0,S),g=n.QUAD_TRIANGLES,m=C.uvs,T=C.region.renderObject.texture,y=C.color}else{if(!(I instanceof k.MeshAttachment)){if(I instanceof k.ClippingAttachment){s.clipStart(M,I);continue}s.clipEndWithSlot(M);continue}C=I,p.vertices=this.vertices,p.numVertices=C.worldVerticesLength>>1,p.numFloats=p.numVertices*S,p.numFloats>p.vertices.length&&(p.vertices=this.vertices=k.Utils.newFloatArray(p.numFloats)),C.computeWorldVertices(M,0,C.worldVerticesLength,p.vertices,0,S),g=C.triangles,T=C.region.renderObject.texture,m=C.uvs,y=C.color}if(null!=T){var I=M.color,P=this.tempColor,R=(P.r=x.r*I.r*y.r,P.g=x.g*I.g*y.g,P.b=x.b*I.b*y.b,P.a=x.a*I.a*y.a,o&&(P.r*=P.a,P.g*=P.a,P.b*=P.a),this.tempColor2);if((S=(null==M.darkColor?R.set(0,0,0,1):(o?(R.r=M.darkColor.r*P.a,R.g=M.darkColor.g*P.a,R.b=M.darkColor.b*P.a):R.setFromColor(M.darkColor),R.a=o?1:0),M.data.blendMode))!=c&&e.setBlendMode(t.WebGLBlendModeConverter.getSourceGLBlendMode(c=S,o),t.WebGLBlendModeConverter.getDestGLBlendMode(c)),s.isClipping()){if(s.clipTriangles(p.vertices,p.numFloats,g,g.length,m,P,R,h),I=new Float32Array(s.clippedVertices),S=s.clippedTriangles,null!=this.vertexEffect){var L=this.vertexEffect,O=I;if(h)for(var _=0,D=I.length;_<D;_+=b)l.x=O[_],l.y=O[_+1],d.set(O[_+2],O[_+3],O[_+4],O[_+5]),u.x=O[_+6],u.y=O[_+7],f.set(O[_+8],O[_+9],O[_+10],O[_+11]),L.transform(l,u,d,f),O[_]=l.x,O[_+1]=l.y,O[_+2]=d.r,O[_+3]=d.g,O[_+4]=d.b,O[_+5]=d.a,O[_+6]=u.x,O[_+7]=u.y,O[_+8]=f.r,O[_+9]=f.g,O[_+10]=f.b,O[_+11]=f.a;else{_=0;for(var B=I.length;_<B;_+=b)l.x=O[_],l.y=O[_+1],d.set(O[_+2],O[_+3],O[_+4],O[_+5]),u.x=O[_+6],u.y=O[_+7],f.set(0,0,0,0),L.transform(l,u,d,f),O[_]=l.x,O[_+1]=l.y,O[_+2]=d.r,O[_+3]=d.g,O[_+4]=d.b,O[_+5]=d.a,O[_+6]=u.x,O[_+7]=u.y}}e.draw(T,I,S)}else{if(O=p.vertices,null!=this.vertexEffect)if(L=this.vertexEffect,h){_=0;for(var N=0,F=p.numFloats;_<F;_+=b,N+=2)l.x=O[_],l.y=O[_+1],u.x=m[N],u.y=m[N+1],d.setFromColor(P),f.setFromColor(R),L.transform(l,u,d,f),O[_]=l.x,O[_+1]=l.y,O[_+2]=d.r,O[_+3]=d.g,O[_+4]=d.b,O[_+5]=d.a,O[_+6]=u.x,O[_+7]=u.y,O[_+8]=f.r,O[_+9]=f.g,O[_+10]=f.b,O[_+11]=f.a}else{_=0,N=0;for(var U=p.numFloats;_<U;_+=b,N+=2)l.x=O[_],l.y=O[_+1],u.x=m[N],u.y=m[N+1],d.setFromColor(P),f.set(0,0,0,0),L.transform(l,u,d,f),O[_]=l.x,O[_+1]=l.y,O[_+2]=d.r,O[_+3]=d.g,O[_+4]=d.b,O[_+5]=d.a,O[_+6]=u.x,O[_+7]=u.y}else if(h){_=2,N=0;for(var G=p.numFloats;_<G;_+=b,N+=2)O[_]=P.r,O[_+1]=P.g,O[_+2]=P.b,O[_+3]=P.a,O[_+4]=m[N],O[_+5]=m[N+1],O[_+6]=R.r,O[_+7]=R.g,O[_+8]=R.b,O[_+9]=R.a}else{_=2,N=0;for(var V=p.numFloats;_<V;_+=b,N+=2)O[_]=P.r,O[_+1]=P.g,O[_+2]=P.b,O[_+3]=P.a,O[_+4]=m[N],O[_+5]=m[N+1]}I=p.vertices.subarray(0,p.numFloats),e.draw(T,I,g)}}s.clipEndWithSlot(M)}else s.clipEndWithSlot(M);else s.clipEndWithSlot(M)}s.clipEnd()},n.QUAD_TRIANGLES=[0,1,2,2,3,0],t.SkeletonRenderer=n}((k=R=R||{}).webgl||(k.webgl={})),function(t){function e(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=n}e.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},e.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},e.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},e.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x*=t=1/t,this.y*=t,this.z*=t),this},e.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.multiply=function(e){return e=e.values,this.set(this.x*e[t.M00]+this.y*e[t.M01]+this.z*e[t.M02]+e[t.M03],this.x*e[t.M10]+this.y*e[t.M11]+this.z*e[t.M12]+e[t.M13],this.x*e[t.M20]+this.y*e[t.M21]+this.z*e[t.M22]+e[t.M23])},e.prototype.project=function(e){e=e.values;var n=1/(this.x*e[t.M30]+this.y*e[t.M31]+this.z*e[t.M32]+e[t.M33]);return this.set((this.x*e[t.M00]+this.y*e[t.M01]+this.z*e[t.M02]+e[t.M03])*n,(this.x*e[t.M10]+this.y*e[t.M11]+this.z*e[t.M12]+e[t.M13])*n,(this.x*e[t.M20]+this.y*e[t.M21]+this.z*e[t.M22]+e[t.M23])*n)},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.distance=function(t){var e=t.x-this.x,n=t.y-this.y;t=t.z-this.z;return Math.sqrt(e*e+n*n+t*t)},t.Vector3=e}((W=R=R||{}).webgl||(W.webgl={})),function(t){function e(t,e){void 0===e&&(e={alpha:"true"}),this.restorables=new Array,t instanceof HTMLCanvasElement||t instanceof EventTarget?this.setupCanvas(t,e):(this.gl=t,this.canvas=this.gl.canvas)}function n(){}e.prototype.setupCanvas=function(t,e){var n=this;this.gl=t.getContext("webgl2",e)||t.getContext("webgl",e),(this.canvas=t).addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var e=0,i=n.restorables.length;e<i;e++)n.restorables[e].restore()}))},e.prototype.addRestorable=function(t){this.restorables.push(t)},e.prototype.removeRestorable=function(t){-1<(t=this.restorables.indexOf(t))&&this.restorables.splice(t,1)},t.ManagedWebGLRenderingContext=e,n.getDestGLBlendMode=function(t){switch(t){case L.BlendMode.Normal:return n.ONE_MINUS_SRC_ALPHA;case L.BlendMode.Additive:return n.ONE;case L.BlendMode.Multiply:case L.BlendMode.Screen:return n.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+t)}},n.getSourceGLBlendMode=function(t,e){switch(void 0===e&&(e=!1),t){case L.BlendMode.Normal:case L.BlendMode.Additive:return e?n.ONE:n.SRC_ALPHA;case L.BlendMode.Multiply:return n.DST_COLOR;case L.BlendMode.Screen:return n.ONE;default:throw new Error("Unknown blend mode: "+t)}},n.ZERO=0,n.ONE=1,n.SRC_COLOR=768,n.ONE_MINUS_SRC_COLOR=769,n.SRC_ALPHA=770,n.ONE_MINUS_SRC_ALPHA=771,n.DST_ALPHA=772,n.ONE_MINUS_DST_ALPHA=773,n.DST_COLOR=774,t.WebGLBlendModeConverter=n}((L=R=R||{}).webgl||(L.webgl={})),t.exports=R}).call(window)},function(t,e,n){var i=n(0),r=n(11),a=n(204),s=n(7),o=n(218),h=n(219),c=n(220);n=new i({Extends:h,initialize:function(t,e,n,i,a,l,u){var d,f,p,m=[],g=t.cacheManager.custom.spine;if(s(e)){var v=e;for(e=r(v,"key"),f=new o(t,{key:e,url:r(v,"jsonURL"),extension:r(v,"jsonExtension","json"),xhrSettings:r(v,"jsonXhrSettings")}),i=r(v,"atlasURL"),a=r(v,"preMultipliedAlpha"),Array.isArray(i)||(i=[i]),d=0;d<i.length;d++)(p=new c(t,{key:e+"!"+d,url:i[d],extension:r(v,"atlasExtension","atlas"),xhrSettings:r(v,"atlasXhrSettings")})).cache=g,m.push(p)}else for(f=new o(t,e,n,l),Array.isArray(i)||(i=[i]),d=0;d<i.length;d++)(p=new c(t,e+"!"+d,i[d],u)).cache=g,m.push(p);m.unshift(f),h.call(this,t,"spine",e,m),this.config.preMultipliedAlpha=a},onFileComplete:function(t){if(-1!==(o=this.files.indexOf(t))&&(this.pending--,"text"===t.type)){for(var e=t.data.split("\n"),n=[],i=0;i<e.length;i++){var s=e[i];""===s.trim()&&i<e.length-1&&(s=e[i+1],n.push(s))}var o=this.config,h=this.loader,c=h.baseURL,l=h.path,u=h.prefix,d=r(o,"baseURL",this.baseURL),f=(t=r(o,"path",t.src.match(/^.*\//))[0],r(o,"prefix",this.prefix)),p=r(o,"textureXhrSettings");h.setBaseURL(d),h.setPath(t),h.setPrefix(f);for(var m=0;m<n.length;m++){var g=n[m];g=new a(h,g,g,p);h.keyExists(g)||(this.addToMultiFile(g),h.addFile(g))}h.setBaseURL(c),h.setPath(l),h.setPrefix(u)}},addToCache:function(){if(this.isReadyToProcess()){this.files[0].addToCache();for(var t,e="",n="",i=!!this.config.preMultipliedAlpha,r=this.loader.textureManager,a=1;a<this.files.length;a++){var s,o,h=this.files[a];"text"===h.type?(e=h.key.replace(/![\d]$/,""),t=h.cache,n=n.concat(h.data)):(s=(o=h.key.trim()).indexOf("!"),o=o.substr(s+1),r.exists(o)||r.addImage(o,h.data)),h.pendingDestroy()}t.add(e,{preMultipliedAlpha:i,data:n,prefix:this.prefix}),this.complete=!0}}});t.exports=n},function(t,e,n){var i=n(0),r=n(15),a=n(21),s=n(22),o=n(11),h=n(7),c=new i({Extends:a,initialize:function t(e,n,i,r,s){var c,l="png",u=(h(n)&&(n=o(u=n,"key"),i=o(u,"url"),c=o(u,"normalMap"),r=o(u,"xhrSettings"),l=o(u,"extension",l),s=o(u,"frameConfig")),Array.isArray(i)&&(c=i[1],i=i[0]),{type:"image",cache:e.textureManager,extension:l,responseType:"blob",key:n,url:i,xhrSettings:r,config:s});a.call(this,e,u),c&&((l=new t(e,this.key,c,r,s)).type="normalMap",this.setLink(l),e.addFile(l))},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){a.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(t.data),t.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===r.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});s.register("image",(function(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){t.exports={ADD:n(206),COMPLETE:n(207),FILE_COMPLETE:n(208),FILE_KEY_COMPLETE:n(209),FILE_LOAD_ERROR:n(210),FILE_LOAD:n(211),FILE_PROGRESS:n(212),POST_PROCESS:n(213),PROGRESS:n(214),START:n(215)}},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e,n){var i=n(45);t.exports=function(t,e){var n=i(e,t.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",t.src,n.async,n.user,n.password),r.responseType=t.xhrSettings.responseType,r.timeout=n.timeout,n.headers)for(var a in n.headers)r.setRequestHeader(a,n.headers[a]);return n.header&&n.headerValue&&r.setRequestHeader(n.header,n.headerValue),n.requestedWith&&r.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&r.overrideMimeType(n.overrideMimeType),n.withCredentials&&(r.withCredentials=!0),r.onload=t.onLoad.bind(t,r),r.onerror=t.onError.bind(t,r),r.onprogress=t.onProgress.bind(t),r.send(),r}},function(t,e,n){var i=n(0),r=n(15),a=n(21),s=n(22),o=n(11),h=n(10),c=n(7),l=new i({Extends:a,initialize:function(t,e,n,i,s){var l="json",u=(c(e)&&(e=o(u=e,"key"),n=o(u,"url"),i=o(u,"xhrSettings"),l=o(u,"extension",l),s=o(u,"dataKey",s)),{type:"json",cache:t.cacheManager.json,extension:l,responseType:"text",key:e,url:n,xhrSettings:i,config:s});a.call(this,t,u),c(n)&&(this.data=s?h(n,s):n,this.state=r.FILE_POPULATED)},onProcess:function(){if(this.state!==r.FILE_POPULATED){this.state=r.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});s.register("json",(function(t,e,n,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new l(this,t[r]));else this.addFile(new l(this,t,e,i,n));return this})),t.exports=l},function(t,e,n){n=new(n(0))({initialize:function(t,e,n,i){var r=[];i.forEach((function(t){t&&r.push(t)})),this.loader=t,this.type=e,this.key=n,this.multiKeyIndex=t.multiKeyIndex++,this.files=r,this.complete=!1,this.pending=r.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<r.length;a++)r[a].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),(t.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}}),t.exports=n},function(t,e,n){var i=n(0),r=n(15),a=n(21),s=n(22),o=n(11),h=n(7),c=new i({Extends:a,initialize:function(t,e,n,i){var r="text",s="txt",c=t.cacheManager.text,l=(h(e)&&(e=o(l=e,"key"),n=o(l,"url"),i=o(l,"xhrSettings"),s=o(l,"extension",s),r=o(l,"type",r),c=o(l,"cache",c)),{type:r,cache:c,extension:s,responseType:"text",key:e,url:n,xhrSettings:i});a.call(this,t,l)},onProcess:function(){this.state=r.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("text",(function(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){var i=n(28),r=n(3),a=n(0),s=n(47),o=n(48),h=n(49),c=n(50),l=n(51),u=n(52),d=n(8),f=n(19),p=n(53),m=n(9),g=n(243);n=n(250),a=new a({Extends:p,Mixins:[s,o,h,c,l,u,n],initialize:function(t,e,n,i,r,a,s){p.call(this,t,"Spine"),this.plugin=e,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(n,i),r&&this.setSkeleton(r,a,s)},willRender:function(t,e){var n;t=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);return e||t||!this.parentContainer||(n=(e=this.plugin).sceneRenderer,e.gl&&n.batcher.isDrawing&&(n.end(),e.renderer.pipelines.rebind())),t},setAlpha:function(t,e){return void 0===t&&(t=1),e?(e=this.findSlot(e))&&(e.color.a=r(t,0,1)):this.alpha=t,this},alpha:{get:function(){return this.skeleton.color.a},set:function(t){t=r(t,0,1),this.skeleton&&(this.skeleton.color.a=t),0===t?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(t){t=r(t,0,1),this.skeleton&&(this.skeleton.color.r=t)}},green:{get:function(){return this.skeleton.color.g},set:function(t){t=r(t,0,1),this.skeleton&&(this.skeleton.color.g=t)}},blue:{get:function(){return this.skeleton.color.b},set:function(t){t=r(t,0,1),this.skeleton&&(this.skeleton.color.b=t)}},setColor:function(t,e){var n=((t=void 0===t?16777215:t)>>16&255)/255,i=(t>>8&255)/255,r=(255&t)/255,a=(t=16777215<t?(t>>>24)/255:null,this.skeleton);return(a=e&&(e=this.findSlot(e))?e:a).color.r=n,a.color.g=i,a.color.b=r,null!==t&&(a.color.a=t),this},setSkeletonFromJSON:function(t,e,n,i){return this.setSkeleton(t,e,n,i)},setSkeleton:function(t,e,n,i){return this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),t=this.plugin.createSkeleton(t,i),this.skeletonData=t.skeletonData,this.preMultipliedAlpha=t.preMultipliedAlpha,(i=t.skeleton).setSkin(),i.setToSetupPose(),this.skeleton=i,t=this.plugin.createAnimationState(i),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=t.state,this.stateData=t.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),e&&this.setAnimation(0,e,n),this.root=this.getRootBone(),this.root&&(this.root.rotation=m(d(this.rotation))+90),this.state.apply(i),i.updateCache(),this.updateSize()},onComplete:function(t){this.emit(g.COMPLETE,t)},onDispose:function(t){this.emit(g.DISPOSE,t)},onEnd:function(t){this.emit(g.END,t)},onEvent:function(t,e){this.emit(g.EVENT,t,e)},onInterrupted:function(t){this.emit(g.INTERRUPTED,t)},onStart:function(t){this.emit(g.START,t)},refresh:function(){return this.root&&(this.root.rotation=m(d(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(t,e,n,i){var r=this.skeleton;return void 0===t&&(t=r.data.width),void 0===e&&(e=r.data.height),void 0===n&&(n=0),void 0===i&&(i=0),this.width=t,this.height=e,this.displayOriginX=r.x-n,this.displayOriginY=r.y-i,this},setOffset:function(t,e){var n=this.skeleton;return void 0===e&&(e=0),this.displayOriginX=n.x-(t=void 0===t?0:t),this.displayOriginY=n.y-e,this},updateSize:function(){var t=this.skeleton,e=this.plugin.renderer.height,n=this.scaleX,i=this.scaleY,r=(t.x=this.x,t.y=e-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform(),this.getBounds());return this.width=r.size.x,this.height=r.size.y,this.displayOriginX=this.x-r.offset.x,this.displayOriginY=this.y-(e-(this.height+r.offset.y)),t.scaleX=n,t.scaleY=i,t.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.refresh()}},getBoneList:function(){var t=[],e=this.skeletonData;if(e)for(var n=0;n<e.bones.length;n++)t.push(e.bones[n].name);return t},getSkinList:function(){var t=[],e=this.skeletonData;if(e)for(var n=0;n<e.skins.length;n++)t.push(e.skins[n].name);return t},getSlotList:function(){for(var t=[],e=this.skeleton,n=0;n<e.slots.length;n++)t.push(e.slots[n].data.name);return t},getAnimationList:function(){var t=[],e=this.skeletonData;if(e)for(var n=0;n<e.animations.length;n++)t.push(e.animations[n].name);return t},getCurrentAnimation:function(t){if(t=this.state.getCurrent(t=void 0===t?0:t))return t.animation},play:function(t,e,n){return this.setAnimation(0,t,e,n),this},setAnimation:function(t,e,n,i){if(void 0===n&&(n=!1),!((i=void 0!==i&&i)&&this.state&&(i=this.state.getCurrent(t))&&i.animation.name===e)||i.isComplete())return this.findAnimation(e)?this.state.setAnimation(t,e,n):void 0},addAnimation:function(t,e,n,i){return this.state.addAnimation(t,e,n=void 0!==n&&n,i=void 0===i?0:i)},setEmptyAnimation:function(t,e){return this.state.setEmptyAnimation(t,e)},clearTrack:function(t){return this.state.clearTrack(t),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(t){var e=this.skeleton;return e.setSkinByName(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setSkin:function(t){var e=this.skeleton;return e.setSkin(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setMix:function(t,e,n){return this.stateData.setMix(t,e,n),this},getAttachment:function(t,e){return this.skeleton.getAttachment(t,e)},getAttachmentByName:function(t,e){return this.skeleton.getAttachmentByName(t,e)},setAttachment:function(t,e){if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)for(var n=0;n<t.length;n++)this.skeleton.setAttachment(t[n],e[n]);else this.skeleton.setAttachment(t,e);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(t,e,n,a,s,o){void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=360);var h=this.plugin.renderer.height;h=d(i(t.worldX,h-t.worldY,e,n)+f(a));return t.rotation=r(m(h),s,o),this},findBone:function(t){return this.skeleton.findBone(t)},findBoneIndex:function(t){return this.skeleton.findBoneIndex(t)},findSlot:function(t){return this.skeleton.findSlot(t)},findSlotIndex:function(t){return this.skeleton.findSlotIndex(t)},findSkin:function(t){return this.skeletonData.findSkin(t)},findEvent:function(t){return this.skeletonData.findEvent(t)},findAnimation:function(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(t,e){var n=this.skeleton;this.state.update(e/1e3*this.timeScale),this.state.apply(n)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=a},function(t,e,n){var i=n(0),r=n(223);n=new i({initialize:function(t,e){this.parent=t,(this.events=e)||(this.events=t.events||t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(r.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)n.push(e[t[i]]);return n}return e[t]},getAll:function(){var t,e={};for(t in this.list)this.list.hasOwnProperty(t)&&(e[t]=this.list[t]);return e},query:function(t){var e,n={};for(e in this.list)this.list.hasOwnProperty(e)&&e.match(t)&&(n[e]=this.list[e]);return n},set:function(t,e){if(!this._frozen){if("string"==typeof t)return this.setValue(t,e);for(var n in t)this.setValue(n,t[n])}return this},inc:function(t,e){var n;return this._frozen||(void 0===e&&(e=1),n=this.get(t),this.set(t,(n=void 0===n?0:n)+e)),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){var n,i,a,s;return this._frozen||(this.has(t)?this.values[t]=e:(i=(n=this).list,a=this.events,s=this.parent,Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return i[t]},set:function(e){var o;n._frozen||(o=i[t],i[t]=e,a.emit(r.CHANGE_DATA,s,t,e,o),a.emit(r.CHANGE_DATA_KEY+t,s,e,o))}}),i[t]=e,a.emit(r.SET_DATA,s,t,e))),this},each:function(t,e){for(var n,i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(n in this.list)i[1]=n,i[2]=this.list[n],t.apply(e,i);return this},merge:function(t,e){for(var n in void 0===e&&(e=!0),t)t.hasOwnProperty(n)&&(e||!e&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(!this._frozen){if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e])}return this},removeValue:function(t){var e;return this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)),this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(r.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(r.CHANGE_DATA),this.events.off(r.SET_DATA),this.events.off(r.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t,e=0;for(t in this.list)void 0!==this.list[t]&&e++;return e}}});t.exports=n},function(t,e,n){t.exports={CHANGE_DATA:n(224),CHANGE_DATA_KEY:n(225),DESTROY:n(226),REMOVE_DATA:n(227),SET_DATA:n(228)}},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function a(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");return n=new s(n,i||t,a),i=r?r+e:e,t._events[i]?t._events[i].fn?t._events[i]=[t._events[i],n]:t._events[i].push(n):(t._events[i]=n,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function c(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){t=r?r+t:t;var e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,i=e.length,a=new Array(i);n<i;n++)a[n]=e[n].fn;return a},c.prototype.listenerCount=function(t){return t=r?r+t:t,(t=this._events[t])?t.fn?1:t.length:0},c.prototype.emit=function(t,e,n,i,a,s){var o=r?r+t:t;if(!this._events[o])return!1;var h,c=this._events[o],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,a),!0;case 6:return c.fn.call(c.context,e,n,i,a,s),!0}for(f=1,h=new Array(l-1);f<l;f++)h[f-1]=arguments[f];c.fn.apply(c.context,h)}else for(var u,d=c.length,f=0;f<d;f++)switch(c[f].once&&this.removeListener(t,c[f].fn,void 0,!0),l){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,e);break;case 3:c[f].fn.call(c[f].context,e,n);break;case 4:c[f].fn.call(c[f].context,e,n,i);break;default:if(!h)for(u=1,h=new Array(l-1);u<l;u++)h[u-1]=arguments[u];c[f].fn.apply(c[f].context,h)}return!0},c.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,i){if(t=r?r+t:t,this._events[t]){if(!e)return h(this,t),this;var a=this._events[t];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||h(this,t);else{for(var s=0,o=[],c=a.length;s<c;s++)(a[s].fn!==e||i&&!a[s].once||n&&a[s].context!==n)&&o.push(a[s]);o.length?this._events[t]=1===o.length?o[0]:o:h(this,t)}}return this},c.prototype.removeAllListeners=function(t){return t?(t=r?r+t:t,this._events[t]&&h(this,t)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,t.exports=c.EventEmitter=c},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e,n){t.exports={COMPLETE:n(244),DISPOSE:n(245),END:n(246),EVENT:n(247),INTERRUPTED:n(248),START:n(249)}},function(t,e){t.exports="complete"},function(t,e){t.exports="dispose"},function(t,e){t.exports="end"},function(t,e){t.exports="event"},function(t,e){t.exports="interrupted"},function(t,e){t.exports="start"},function(t,e,n){var i=n(1),r=n(1),a=n(1);i=n(251),a=n(252),r=n(253);t.exports={renderWebGL:i,renderCanvas:r,renderDirect:a}},function(t,e,n){var i=n(3),r=n(8),a=n(56),s=n(9),o=n(6);t.exports=function(t,e,n,h,c){var l=e.plugin,u=e.skeleton,d=l.sceneRenderer,f=(t.newType&&(t.pipelines.clear(),d.begin()),e.scrollFactorX),p=e.scrollFactorY,m=u.color.a;c&&(e.scrollFactorX=c.scrollFactorX,e.scrollFactorY=c.scrollFactorY,u.color.a=i(m*c.alpha,0,1)),n.addToRenderList(e),n=a(e,n,h).calc,h=t.height;u.x=n.tx,u.y=h-n.ty,u.scaleX=n.scaleX,u.scaleY=n.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=o(s(n.rotationNormalized)-180,0,360)):e.root.rotation=o(s(r(n.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*s(n.rotationNormalized):e.root.rotation+=2*s(n.rotationNormalized)),u.updateWorldTransform(),d.drawSkeleton(u,e.preMultipliedAlpha),c&&(e.scrollFactorX=f,e.scrollFactorY=p,u.color.a=m),(l.drawDebug||e.drawDebug)&&(h=u.x,n=u.y,u.x=0,u.y=0,d.drawSkeletonDebug(u,e.preMultipliedAlpha),u.x=h,u.y=n),t.nextTypeMatch||(d.end(),t.pipelines.rebind())}},function(t,e,n){var i=n(3),r=n(8),a=n(56),s=n(9),o=n(6);t.exports=function(t,e,n,h,c){var l=e.plugin,u=e.skeleton,d=l.sceneRenderer,f=(t.pipelines.clear(),d.begin(),e.scrollFactorX),p=e.scrollFactorY,m=u.color.a;c&&(e.scrollFactorX=c.scrollFactorX,e.scrollFactorY=c.scrollFactorY,u.color.a=i(m*c.alpha,0,1)),n.addToRenderList(e),n=a(e,n,h).calc,h=t.height;u.x=n.tx,u.y=h-n.ty,u.scaleX=n.scaleX,u.scaleY=n.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=o(s(n.rotationNormalized)-180,0,360)):e.root.rotation=o(s(r(n.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*s(n.rotationNormalized):e.root.rotation+=2*s(n.rotationNormalized)),u.updateWorldTransform(),d.drawSkeleton(u,e.preMultipliedAlpha),c&&(e.scrollFactorX=f,e.scrollFactorY=p,u.color.a=m),(l.drawDebug||e.drawDebug)&&(h=u.x,n=u.y,u.x=0,u.y=0,d.drawSkeletonDebug(u,e.preMultipliedAlpha),u.x=h,u.y=n),d.end(),t.pipelines.rebind()}},function(t,e,n){var i=n(8),r=n(9),a=n(6);t.exports=function(t,e,n,s){var o=t.currentContext,h=e.plugin,c=e.skeleton,l=h.skeletonRenderer,u=t._tempMatrix1,d=t._tempMatrix2;t=t._tempMatrix3;n.addToRenderList(e),d.applyITRS(e.x,e.y,e.rotation,Math.abs(e.scaleX),Math.abs(e.scaleY)),u.copyFrom(n.matrix),s?(u.multiplyWithOffset(s,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),d.e=e.x,d.f=e.y):(d.e-=n.scrollX*e.scrollFactorX,d.f-=n.scrollY*e.scrollFactorY),u.multiply(d,t),c.x=t.tx,c.y=t.ty,c.scaleX=t.scaleX,c.scaleY=-1*t.scaleY,e.scaleX<0?(c.scaleX*=-1,e.root.rotation=r(t.rotationNormalized)):e.root.rotation=a(r(i(t.rotationNormalized))+90,0,360),e.scaleY<0&&(c.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*r(t.rotationNormalized):e.root.rotation+=2*r(t.rotationNormalized)),n.renderToTexture&&(c.y=t.ty,c.scaleY*=-1),c.updateWorldTransform(),l.ctx=o,l.debugRendering=h.drawDebug||e.drawDebug,o.save(),l.draw(c),o.restore()}},function(t,e,n){var i=n(0),r=n(255);n=n(349),i=new i({Extends:r,Mixins:[n],initialize:function(t,e,n,i,a){r.call(this,t,n,i,a),this.type="SpineContainer",this.plugin=e},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=i},function(t,e,n){var i=n(256),r=n(17),a=n(0),s=n(295),o=n(55),h=n(53),c=n(25),l=n(345),u=n(348),d=n(2);n=new a({Extends:h,Mixins:[s.AlphaSingle,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.Pipeline,s.Transform,s.Visible,l],initialize:function(t,e,n,i){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,n),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),i&&this.add(i)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return this.exclusive=t=void 0===t||t,this},getBounds:function(t){var e;if((t=void 0===t?new c:t).setTo(this.x,this.y,0,0),this.parentContainer&&(e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),t.setTo(e.x,e.y,0,0)),0<this.list.length){var n=this.list,i=new c,r=!1;t.setEmpty();for(var a=0;a<n.length;a++){var s=n[a];s.getBounds&&(s.getBounds(i),r?u(i,t,t):(t.setTo(i.x,i.y,i.width,i.height),r=!0))}}return t},addHandler:function(t){t.once(o.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(o.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new d(t.x,t.y);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return i.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return i.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t&&i.StableSort(this.list,e=void 0===e?function(e,n){return e[t]-n[t]}:e),this},getByName:function(t){return i.GetFirst(this.list,"name",t)},getRandom:function(t,e){return i.GetRandom(this.list,t,e)},getFirst:function(t,e,n,r){return i.GetFirst(this.list,t,e,n,r)},getAll:function(t,e,n,r){return i.GetAll(this.list,t,e,n,r)},count:function(t,e,n,r){return i.CountAllMatching(this.list,t,e,n,r)},swap:function(t,e){return i.Swap(this.list,t,e),this},moveTo:function(t,e){return i.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return i.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return i.MoveBelow(this.list,t,e),this},remove:function(t,e){var n=i.Remove(this.list,t,this.removeHandler,this);if(e&&n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)n[r].destroy()}return this},removeAt:function(t,e){return t=i.RemoveAt(this.list,t,this.removeHandler,this),e&&t&&t.destroy(),this},removeBetween:function(t,e,n){var r=i.RemoveBetween(this.list,t,e,this.removeHandler,this);if(n)for(var a=0;a<r.length;a++)r[a].destroy();return this},removeAll:function(t){var e=i.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<e.length;n++)e[n].destroy();return this},bringToTop:function(t){return i.BringToTop(this.list,t),this},sendToBack:function(t){return i.SendToBack(this.list,t),this},moveUp:function(t){return i.MoveUp(this.list,t),this},moveDown:function(t){return i.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(t,e,n){return i.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,n,r){return i.SetAll(this.list,t,e,n,r),this},each:function(t,e){for(var n=[null],i=this.list.slice(),r=i.length,a=2;a<arguments.length;a++)n.push(arguments[a]);for(a=0;a<r;a++)n[0]=i[a],t.apply(e,n);return this},iterate:function(t,e){for(var n=[null],i=2;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<this.list.length;i++)n[0]=this.list[i],t.apply(e,n);return this},setScrollFactor:function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=e,n&&(i.SetAll(this.list,"scrollFactorX",t),i.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=n},function(t,e,n){t.exports={Matrix:n(257),Add:n(266),AddAt:n(267),BringToTop:n(268),CountAllMatching:n(269),Each:n(270),EachInRange:n(271),FindClosestInSorted:n(272),GetAll:n(273),GetFirst:n(274),GetRandom:n(275),MoveDown:n(276),MoveTo:n(277),MoveUp:n(278),MoveAbove:n(279),MoveBelow:n(280),NumberArray:n(281),NumberArrayStep:n(282),QuickSelect:n(283),Range:n(284),Remove:n(285),RemoveAt:n(286),RemoveBetween:n(287),RemoveRandomElement:n(288),Replace:n(289),RotateLeft:n(58),RotateRight:n(59),SafeRange:n(5),SendToBack:n(290),SetAll:n(291),Shuffle:n(60),SortByDigits:n(292),SpliceOne:n(12),StableSort:n(293),Swap:n(294)}},function(t,e,n){t.exports={CheckMatrix:n(24),MatrixToString:n(258),ReverseColumns:n(260),ReverseRows:n(261),Rotate180:n(262),RotateLeft:n(263),RotateMatrix:n(16),RotateRight:n(264),Translate:n(265),TransposeMatrix:n(57)}},function(t,e,n){var i=n(259),r=n(24);t.exports=function(t){var e="";if(r(t))for(var n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++){var s=t[n][a].toString();e+="undefined"!==s?i(s,2):"?",a<t[n].length-1&&(e+=" |")}if(n<t.length-1){e+="\n";for(var o=0;o<t[n].length;o++)e+="---",o<t[n].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t,e,n,i){var r;if(void 0===n&&(n=" "),void 0===i&&(i=3),(e=void 0===e?0:e)+1>=(t=t.toString()).length)switch(i){case 1:t=new Array(e+1-t.length).join(n)+t;break;case 3:var a=Math.ceil((r=e-t.length)/2);t=new Array(r-a+1).join(n)+t+new Array(a+1).join(n);break;default:t+=new Array(e+1-t.length).join(n)}return t}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,n){var i=n(16);t.exports=function(t){return i(t,180)}},function(t,e,n){var i=n(16);t.exports=function(t){return i(t,90)}},function(t,e,n){var i=n(16);t.exports=function(t){return i(t,-90)}},function(t,e,n){var i=n(58),r=n(59);t.exports=function(t,e,n){if(void 0===e&&(e=0),0!==(n=void 0===n?0:n)&&(n<0?i(t,Math.abs(n)):r(t,n)),0!==e)for(var a=0;a<t.length;a++){var s=t[a];e<0?i(s,Math.abs(e)):r(s,e)}return t}},function(t,e){t.exports=function(t,e,n,i,r){if(void 0===r&&(r=t),0<n){var a=n-t.length;if(a<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),i&&i.call(r,e),e):null;for(var s=e.length-1;0<=s;)-1!==t.indexOf(e[s])&&e.splice(s,1),s--;if(0===(s=e.length))return null;0<n&&a<s&&(e.splice(a),s=a);for(var o=0;o<s;o++){var h=e[o];t.push(h),i&&i.call(r,h)}return e}},function(t,e){t.exports=function(t,e,n,i,r,a){if(void 0===n&&(n=0),void 0===a&&(a=t),0<i){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(n,0,e),r&&r.call(a,e),e):null;for(var o=e.length-1;0<=o;)-1!==t.indexOf(e[o])&&e.pop(),o--;if(0===(o=e.length))return null;0<i&&s<o&&(e.splice(s),o=s);for(var h=o-1;0<=h;h--){var c=e[h];t.splice(n,0,c),r&&r.call(a,c)}return e}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(e)),e}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r,a){void 0===a&&(a=t.length);var s=0;if(i(t,r=void 0===r?0:r,a))for(var o=r;o<a;o++)t[o][e]===n&&s++;return s}},function(t,e){t.exports=function(t,e,n){for(var i=[null],r=3;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<t.length;r++)i[0]=t[r],e.apply(n,i);return t}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r,a){if(void 0===a&&(a=t.length),i(t,r=void 0===r?0:r,a)){for(var s=[null],o=5;o<arguments.length;o++)s.push(arguments[o]);for(o=r;o<a;o++)s[0]=t[o],e.apply(n,s)}return t}},function(t,e){t.exports=function(t,e,n){if(!e.length)return NaN;if(1===e.length)return e[0];var i,r,a=1;if(n){if(t<e[0][n])return e[0];for(;e[a][n]<t;)a++}else for(;e[a]<t;)a++;return a>e.length&&(a=e.length),n?(i=e[a-1][n],(r=e[a][n])-t<=t-i?e[a]:e[a-1]):(i=e[a-1],(r=e[a])-t<=t-i?r:i)}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r,a){void 0===a&&(a=t.length);var s=[];if(i(t,r=void 0===r?0:r,a))for(var o=r;o<a;o++){var h=t[o];(!e||void 0===n&&h.hasOwnProperty(e)||e&&void 0!==n&&h[e]===n)&&s.push(h)}return s}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r,a){if(void 0===a&&(a=t.length),i(t,r=void 0===r?0:r,a))for(var s=r;s<a;s++){var o=t[s];if(!e||void 0===n&&o.hasOwnProperty(e)||e&&void 0!==n&&o[e]===n)return o}return null}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=t.length),void 0===t[e=(e=void 0===e?0:e)+Math.floor(Math.random()*n)]?null:t[e]}},function(t,e){t.exports=function(t,e){var n,i,r=t.indexOf(e);return 0<r&&(n=t[r-1],i=t.indexOf(n),t[r]=n,t[i]=e),t}},function(t,e){t.exports=function(t,e,n){var i=t.indexOf(e);if(-1===i||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return i!==n&&(t.splice(i,1),t.splice(n,0,e)),e}},function(t,e){t.exports=function(t,e){var n,i,r=t.indexOf(e);return-1!==r&&r<t.length-1&&(n=t[r+1],i=t.indexOf(n),t[r]=n,t[i]=e),t}},function(t,e){t.exports=function(t,e,n){if(e!==n){var i=t.indexOf(e);n=t.indexOf(n);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");n<i||(t.splice(i,1),n===t.length-1?t.push(e):t.splice(n,0,e))}return t}},function(t,e){t.exports=function(t,e,n){if(e!==n){var i=t.indexOf(e);n=t.indexOf(n);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");i<n||(t.splice(i,1),0===n?t.unshift(e):t.splice(n,0,e))}return t}},function(t,e){t.exports=function(t,e,n,i){var r,a=[],s=!1;if((n||i)&&(s=!0,n=n||"",i=i||""),e<t)for(r=t;e<=r;r--)s?a.push(n+r.toString()+i):a.push(r);else for(r=t;r<=e;r++)s?a.push(n+r.toString()+i):a.push(r);return a}},function(t,e,n){var i=n(40);t.exports=function(t,e,n){void 0===t&&(t=0),void 0===n&&(n=1),null===(e=void 0===e?null:e)&&(e=t,t=0);for(var r=[],a=Math.max(i((e-t)/(n||1)),0),s=0;s<a;s++)r.push(t),t+=n;return r}},function(t,e){function n(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function i(t,e){return t<e?-1:e<t?1:0}t.exports=function t(e,r,a,s,o){for(void 0===a&&(a=0),void 0===s&&(s=e.length-1),void 0===o&&(o=i);a<s;){600<s-a&&(h=s-a+1,u=r-a+1,l=Math.log(h),c=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*c*(h-c)/h)*(u-h/2<0?-1:1),t(e,r,Math.max(a,Math.floor(r-u*c/h+l)),u=Math.min(s,Math.floor(r+(h-u)*c/h+l)),o));var h,c,l,u,d=e[r],f=a,p=s;for(n(e,a,r),0<o(e[s],d)&&n(e,a,s);f<p;){for(n(e,f,p),f++,p--;o(e[f],d)<0;)f++;for(;0<o(e[p],d);)p--}0===o(e[a],d)?n(e,a,p):n(e,++p,s),p<=r&&(a=p+1),r<=p&&(s=p-1)}}},function(t,e,n){var i=n(10),r=n(60);t.exports=function(t,e,n){var a=i(n,"max",0),s=i(n,"qty",1),o=i(n,"random",!1),h=i(n,"randomB",!1),c=i(n,"repeat",0),l=i(n,"yoyo",!1),u=[];h&&r(e),-1===c&&(c=0===a?0:(n=t.length*e.length*s,l&&(n*=2),Math.ceil(a/n)));for(var d=0;d<=c;d++){var f=function(t,e,n){for(var i=[],r=0;r<t.length;r++)for(var a=0;a<e.length;a++)for(var s=0;s<n;s++)i.push({a:t[r],b:e[a]});return i}(t,e,s);o&&r(f),u=u.concat(f),l&&(f.reverse(),u=u.concat(f))}return a&&u.splice(a),u}},function(t,e,n){var i=n(12);t.exports=function(t,e,n,r){if(void 0===r&&(r=t),!Array.isArray(e))return-1!==(o=t.indexOf(e))?(i(t,o),n&&n.call(r,e),e):null;for(var a=e.length-1,s=[];0<=a;){var o,h=e[a];-1!==(o=t.indexOf(h))&&(i(t,o),s.push(h),n&&n.call(r,h)),a--}return s}},function(t,e,n){var i=n(12);t.exports=function(t,e,n,r){if(void 0===r&&(r=t),e<0||e>t.length-1)throw new Error("Index out of bounds");return t=i(t,e),n&&n.call(r,t),t}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r,a){if(void 0===n&&(n=t.length),void 0===a&&(a=t),i(t,e=void 0===e?0:e,n)){var s=t.splice(e,n-e);if(r)for(var o=0;o<s.length;o++){var h=s[o];r.call(a,h)}return s}return[]}},function(t,e,n){var i=n(12);t.exports=function(t,e,n){return void 0===n&&(n=t.length),e=(e=void 0===e?0:e)+Math.floor(Math.random()*n),i(t,e)}},function(t,e){t.exports=function(t,e,n){e=t.indexOf(e);var i=t.indexOf(n);return-1!==e&&-1===i&&(t[e]=n,!0)}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);return-1!==n&&0<n&&(t.splice(n,1),t.unshift(e)),e}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r,a){if(void 0===a&&(a=t.length),i(t,r=void 0===r?0:r,a))for(var s=r;s<a;s++){var o=t[s];o.hasOwnProperty(e)&&(o[e]=n)}return t}},function(t,e){t.exports=function(t){var e=/\D/g;return t.sort((function(t,n){return parseInt(t.replace(e,""),10)-parseInt(n.replace(e,""),10)})),t}},function(t,e){function n(t,e){return String(t).localeCompare(e)}function i(t,e,n,i){for(var r,a,s,o,h=t.length,c=0,l=2*n,u=0;u<h;u+=l)for(h<(a=(r=u+n)+n)&&(a=h),s=u,o=r=h<r?h:r;;)if(s<r&&o<a)e(t[s],t[o])<=0?i[c++]=t[s++]:i[c++]=t[o++];else if(s<r)i[c++]=t[s++];else{if(!(o<a))break;i[c++]=t[o++]}}t.exports=function(t,e){return e=function(t,e){var n=t.length;if(!(n<=1))for(var r=new Array(n),a=1;a<n;a*=2){i(t,e,a,r);var s=t;t=r,r=s}return t}(t,e=void 0===e?n:e),e!==t&&i(e,null,t.length,t),t}},function(t,e){t.exports=function(t,e,n){if(e!==n){var i=t.indexOf(e),r=t.indexOf(n);if(i<0||r<0)throw new Error("Supplied items must be elements of the same array");t[i]=n,t[r]=e}return t}},function(t,e,n){t.exports={Alpha:n(296),AlphaSingle:n(297),BlendMode:n(298),ComputedSize:n(47),Crop:n(299),Depth:n(48),Flip:n(49),GetBounds:n(300),Mask:n(309),Origin:n(334),PathFollower:n(335),Pipeline:n(338),ScrollFactor:n(50),Size:n(341),Texture:n(342),TextureCrop:n(343),Tint:n(344),ToJSON:n(54),Transform:n(51),TransformMatrix:n(23),Visible:n(52)}},function(t,e,n){var i=n(3);t.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,n,r){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=i(t,0,1),this._alphaTR=i(e,0,1),this._alphaBL=i(n,0,1),this._alphaBR=i(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){t=i(t,0,1),this._alpha=t,this._alphaTL=t,this._alphaTR=t,this._alphaBL=t,0===(this._alphaBR=t)?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){t=i(t,0,1),0!==(this._alphaTL=t)&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){t=i(t,0,1),0!==(this._alphaTR=t)&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){t=i(t,0,1),0!==(this._alphaBL=t)&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){t=i(t,0,1),0!==(this._alphaBR=t)&&(this.renderFlags|=2)}}}},function(t,e,n){var i=n(3);t.exports={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return this.alpha=t=void 0===t?1:t,this},alpha:{get:function(){return this._alpha},set:function(t){t=i(t,0,1),0===(this._alpha=t)?this.renderFlags&=-3:this.renderFlags|=2}}}},function(t,e,n){var i=n(17);n={_blendMode:i.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=i[t]),-1<=(t|=0)&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=n},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,n,i){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,n,i,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e,n){var i=n(25),r=n(39),a=n(2);t.exports={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&r(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return(t=void 0===t?new a:t).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return(t=t||new a).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,n,r,a,s,o,h,c;return void 0===t&&(t=new i),this.parentContainer?(c=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(t),c.transformPoint(t.x,t.y,t),e=t.x,n=t.y,this.getTopRight(t),c.transformPoint(t.x,t.y,t),r=t.x,a=t.y,this.getBottomLeft(t),c.transformPoint(t.x,t.y,t),s=t.x,o=t.y,this.getBottomRight(t),c.transformPoint(t.x,t.y,t)):(this.getTopLeft(t),e=t.x,n=t.y,this.getTopRight(t),r=t.x,a=t.y,this.getBottomLeft(t),s=t.x,o=t.y,this.getBottomRight(t)),c=t.x,h=t.y,t.x=Math.min(e,r,s,c),t.y=Math.min(n,a,o,h),t.width=Math.max(e,r,s,c)-t.x,t.height=Math.max(n,a,o,h)-t.y,t}}},function(t,e){t.exports=function(t,e,n){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=n&&t.y+t.height>=n}},function(t,e,n){var i=n(61),r=n(62);t.exports=function(t,e,n,a){void 0===a&&(a=[]),!e&&0<n&&(e=r(t)/n);for(var s=0;s<e;s++)a.push(i(t,s/e));return a}},function(t,e,n){var i=n(0),r=n(304),a=n(305),s=n(26),o=n(307),h=n(2);n=new i({initialize:function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.type=s.LINE,this.x1=t,this.y1=e,this.x2=n,this.y2=i},getPoint:function(t,e){return r(this,t,e)},getPoints:function(t,e,n){return a(this,t,e,n)},getRandomPoint:function(t){return o(this,t)},setTo:function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x1=t=void 0===t?0:t,this.y1=e,this.x2=n,this.y2=i,this},getPointA:function(t){return(t=void 0===t?new h:t).set(this.x1,this.y1),t},getPointB:function(t){return(t=void 0===t?new h:t).set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=n},function(t,e,n){var i=n(13);t.exports=function(t,e,n){return(n=void 0===n?new i:n).x=t.x1+(t.x2-t.x1)*e,n.y=t.y1+(t.y2-t.y1)*e,n}},function(t,e,n){var i=n(306),r=n(13);t.exports=function(t,e,n,a){void 0===a&&(a=[]),!e&&0<n&&(e=i(t)/n);for(var s=t.x1,o=t.y1,h=t.x2,c=t.y2,l=0;l<e;l++){var u=l/e;a.push(new r(s+(h-s)*u,o+(c-o)*u))}return a}},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e,n){var i=n(13);t.exports=function(t,e){void 0===e&&(e=new i);var n=Math.random();return e.x=t.x1+n*(t.x2-t.x1),e.y=t.y1+n*(t.y2-t.y1),e}},function(t,e,n){var i=n(13);t.exports=function(t,e){return(e=void 0===e?new i:e).x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e,n){var i=n(310),r=n(333);t.exports={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return(t=void 0!==t&&t)&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new i(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new r(this.scene,t)}}},function(t,e,n){var i=n(0),r=n(311),a=n(328);n=new i({initialize:function(t,e){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(r.CONTEXT_RESTORED,this.createMask,this),n&&n.on(a.RESIZE,this.createMask,this)},createMask:function(){var t,e,n,i,r,a=this.renderer;a&&a.gl&&(this.mainTexture&&this.clearMask(),t=a.width,e=a.height,n=a.gl,i=0==(t&t-1)&&0==(e&e-1)?n.REPEAT:n.CLAMP_TO_EDGE,r=n.LINEAR,this.mainTexture=a.createTexture2D(0,r,r,i,i,n.RGBA,null,t,e),this.maskTexture=a.createTexture2D(0,r,r,i,i,n.RGBA,null,t,e),this.mainFramebuffer=a.createFramebuffer(t,e,this.mainTexture,!0),this.maskFramebuffer=a.createFramebuffer(t,e,this.maskTexture,!0))},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,n)},postRenderWebGL:function(t,e){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(a.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=n},function(t,e,n){t.exports={BLUR:n(312),BOOT:n(313),CONTEXT_LOST:n(314),CONTEXT_RESTORED:n(315),DESTROY:n(316),FOCUS:n(317),HIDDEN:n(318),PAUSE:n(319),POST_RENDER:n(320),POST_STEP:n(321),PRE_RENDER:n(322),PRE_STEP:n(323),READY:n(324),RESUME:n(325),STEP:n(326),VISIBLE:n(327)}},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e,n){t.exports={POST_RENDER:n(329),PRE_RENDER:n(330),RENDER:n(331),RESIZE:n(332)}},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="render"},function(t,e){t.exports="resize"},function(t,e,n){n=new(n(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return this.invertAlpha=t=void 0===t||t,this},preRenderWebGL:function(t,e,n){var i=t.gl;t.flush(),0===t.maskStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,e,n){var i=t.gl,r=this.geometryMask,a=t.maskCount;i.colorMask(!1,!1,!1,!1),n?(i.stencilFunc(i.EQUAL,a,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,a+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),r.renderWebGL(t,r,e),t.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),n?this.invertAlpha?i.stencilFunc(i.NOTEQUAL,a+1,255):i.stencilFunc(i.EQUAL,a+1,255):this.invertAlpha?i.stencilFunc(i.NOTEQUAL,a,255):i.stencilFunc(i.EQUAL,a,255)},postRenderWebGL:function(t){var e=t.gl,n=(t.maskStack.pop(),t.maskCount--,t.flush(),t.currentMask);0===t.maskStack.length?(n.mask=null,e.disable(e.STENCIL_TEST)):((e=t.maskStack[t.maskStack.length-1]).mask.applyStencil(t,e.camera,!1),t.currentCameraMask.mask!==e.mask?(n.mask=e.mask,n.camera=e.camera):n.mask=null)},preRenderCanvas:function(t,e,n){var i=this.geometryMask;t.currentContext.save(),i.renderCanvas(t,i,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}}),t.exports=n},function(t,e){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,e,n){var i=n(19),r=n(336),a=n(10),s=n(337),o=n(2);n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:s.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var n=((n=this.pathTween)&&n.isPlaying()&&n.stop(),(t="number"==typeof t?{duration:t}:t).from=a(t,"from",0),t.to=a(t,"to",1),r(t,"positionOnPath",!1)),h=(this.rotateToPath=r(t,"rotateToPath",!1),this.pathRotationOffset=a(t,"rotationOffset",0),a(t,"startAt",e));return h&&(t.onStart=function(t){var e=((t=t.data[0]).progress=h,t.elapsed=t.duration*h,t.ease(t.progress));t.current=t.start+(t.end-t.start)*e,t.target[t.key]=t.current}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),n&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=s.PLAYING_FORWARD,this.rotateToPath&&(e=this.path.getPoint(.1),this.rotation=Math.atan2(e.y-this.y,e.x-this.x)+i(this.pathRotationOffset)),this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],n=this.pathDelta,r=this.pathVector;if(n.copy(r).negate(),e.state===s.COMPLETE)return this.path.getPoint(1,r),n.add(r),r.add(this.pathOffset),void this.setPosition(r.x,r.y);e.state!==s.PLAYING_FORWARD&&e.state!==s.PLAYING_BACKWARD||(this.path.getPoint(t.getValue(),r),n.add(r),r.add(this.pathOffset),t=this.x,n=this.y,this.setPosition(r.x,r.y),r=this.x-t,t=this.y-n,0==r&&0==t||(e.state!==this._prevDirection?this._prevDirection=e.state:this.rotateToPath&&(this.rotation=Math.atan2(t,r)+i(this.pathRotationOffset))))}}};t.exports=n},function(t,e){t.exports=function(t,e,n){return t&&t.hasOwnProperty(e)?t[e]:n}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,n){var i=n(339),r=n(340),a=n(12);t.exports={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=r.MULTI_PIPELINE);var e=this.scene.sys.renderer;return!!(e&&(e=e.pipelines,this.postPipelines=[],this.pipelineData={},e&&(e=e.get(t))))&&(this.defaultPipeline=e,this.pipeline=e,!0)},setPipeline:function(t,e,n){var r=this.scene.sys.renderer;return!r||(r=r.pipelines)&&((r=r.get(t))&&(this.pipeline=r),e&&(this.pipelineData=n?i(e):e)),this},setPostPipeline:function(t,e,n){var r=this.scene.sys.renderer;if(r){var a=r.pipelines;if(a){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var o=a.getPostPipeline(t[s],this);o&&this.postPipelines.push(o)}e&&(this.pipelineData=n?i(e):e)}this.hasPostPipeline=0<this.postPipelines.length}return this},setPipelineData:function(t,e){var n=this.pipelineData;return void 0===e?delete n[t]:n[t]=e,this},getPostPipeline:function(t){for(var e=this.postPipelines,n=[],i=0;i<e.length;i++){var r=e[i];("string"==typeof t&&r.name===t||r instanceof t)&&n.push(r)}return 1===n.length?n[0]:n},resetPipeline:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),e&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,n=0;n<e.length;n++)e[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var e=this.postPipelines,n=e.length-1;0<=n;n--){var i=e[n];("string"==typeof t&&i.name===t||"string"!=typeof t&&i instanceof t)&&(i.destroy(),a(e,n))}return this.hasPostPipeline=0<this.postPipelines.length,this},getPipelineName:function(){return this.pipeline.name}}},function(t,e){t.exports=function t(e){var n,i,r;if("object"!=typeof e||null===e)return e;for(r in n=Array.isArray(e)?[]:{},e)i=e[r],n[r]=t(i);return n}},function(t,e){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,e){t.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(t,e){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,n,i){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,n,i,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,e){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,n,i){return void 0===t&&(t=16777215),void 0===e&&(i=n=e=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=n,this.tintBottomRight=i,this.tintFill=!1,this},setTintFill:function(t,e,n,i){return this.setTint(t,e,n,i),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,e,n){var i=n(1),r=n(1);i=n(346),r=n(347);t.exports={renderWebGL:i,renderCanvas:r}},function(t,e){t.exports=function(t,e,n,i){n.addToRenderList(e);var r=e.list,a=r.length;if(0!==a){for(var s=e.localTransform,o=(i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e),-1!==e.blendMode),h=(o||t.setBlendMode(0),e.alpha),c=e.scrollFactorX,l=e.scrollFactorY,u=0;u<a;u++){var d,f,p,m,g,v,y,x,b=r[u];b.willRender(n)&&(m=void 0!==b.alphaTopLeft?(d=b.alphaTopLeft,f=b.alphaTopRight,p=b.alphaBottomLeft,b.alphaBottomRight):p=f=d=b.alpha,g=b.scrollFactorX,v=b.scrollFactorY,o||b.blendMode===t.currentBlendMode||t.setBlendMode(b.blendMode),(y=b.mask)&&y.preRenderWebGL(t,b,n),(x=b.type)!==t.currentType&&(t.newType=!0,t.currentType=x),t.nextTypeMatch=u<a-1&&r[u+1].type===t.currentType,b.setScrollFactor(g*c,v*l),b.setAlpha(d*h,f*h,p*h,m*h),b.renderWebGL(t,b,n,s),b.setAlpha(d,f,p,m),b.setScrollFactor(g,v),y&&y.postRenderWebGL(t,n),t.newType=!1)}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n,i){n.addToRenderList(e);var r=e.list;if(0!==r.length){var a=e.localTransform,s=(i?(a.loadIdentity(),a.multiply(i),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),-1!==e.blendMode),o=(s||t.setBlendMode(0),e._alpha),h=e.scrollFactorX,c=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,n);for(var l=0;l<r.length;l++){var u,d,f,p=r[l];p.willRender(n)&&(u=p.alpha,d=p.scrollFactorX,f=p.scrollFactorY,s||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),p.setScrollFactor(d*h,f*c),p.setAlpha(u*o),p.renderCanvas(t,p,n,a),p.setAlpha(u),p.setScrollFactor(d,f))}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,n){var i=n(25);t.exports=function(t,e,n){void 0===n&&(n=new i);var r=Math.min(t.x,e.x),a=Math.min(t.y,e.y),s=Math.max(t.right,e.right)-r;t=Math.max(t.bottom,e.bottom)-a;return n.setTo(r,a,s,t)}},function(t,e,n){var i=n(1),r=n(1);i=n(350),r=n(351);t.exports={renderWebGL:i,renderCanvas:r}},function(t,e){t.exports=function(t,e,n,i){var r=e.plugin.sceneRenderer,a=e.list;if(0===a.length)r.batcher.isDrawing&&t.finalType&&(r.end(),t.pipelines.rebind());else{n.addToRenderList(e);var s=e.localTransform;i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.newType&&(t.pipelines.clear(),r.begin()),t.pipelines.preBatch(e),-1!==e.blendMode||t.setBlendMode(0),i=t.nextTypeMatch,t.nextTypeMatch=!0,t.newType=!1;for(var o=0;o<a.length;o++){var h,c=a[o];c.willRender(n,e)&&(h=c.mask,this.pin,h&&(r.end(),t.pipelines.rebind(),h.preRenderWebGL(t,c,n),t.pipelines.clear(),r.begin()),c.renderWebGL(t,c,n,s,e),h&&(r.end(),t.pipelines.rebind(),h.postRenderWebGL(t,n),t.pipelines.clear(),r.begin()))}(t.nextTypeMatch=i)||(r.end(),t.pipelines.rebind()),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n,i){var r=e.list;if(0!==r.length){n.addToRenderList(e);var a=e.localTransform,s=(i?(a.loadIdentity(),a.multiply(i),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),-1!==e.blendMode),o=(s||t.setBlendMode(0),e._alpha),h=e.scrollFactorX,c=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,n);for(var l=0;l<r.length;l++){var u,d,f,p=r[l];p.willRender(n)&&(u=p.alpha,d=p.scrollFactorX,f=p.scrollFactorY,s||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),p.setScrollFactor(d*h,f*c),p.setAlpha(u*o),p.renderCanvas(t,p,n,a),p.setAlpha(u),p.setScrollFactor(d,f))}e.mask&&e.mask.postRenderCanvas(t)}}}])},,,function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){for(var i=atob(this.toDataURL(e,n).split(",")[1]),r=i.length,a=r>>2,s=new Uint8Array(r),o=new Uint32Array(s.buffer,0,a),h=0,c=0;h<a;h++)o[h]=i.charCodeAt(c++)|i.charCodeAt(c++)<<8|i.charCodeAt(c++)<<16|i.charCodeAt(c++)<<24;for(var l=3&r;l--;)s[c]=i.charCodeAt(c++);t(new Blob([s],{type:e||"image/png"}))}})}],function(t){var e=function(e){return t(t.s=e)};t.O(0,[216],(function(){return e(69),e(68),e(57),e(53)}));t.O()}]);