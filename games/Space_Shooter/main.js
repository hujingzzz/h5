(function(){'use strict';function boot(){var RESOURCES=cc.AssetManager.BuiltinBundleName.RESOURCES;var INTERNAL=cc.AssetManager.BuiltinBundleName.INTERNAL;var MAIN=cc.AssetManager.BuiltinBundleName.MAIN;var settings=window._CCSettings;window._CCSettings=undefined;function setLoadingDisplay(){var splash=document.getElementById("splash");var progressBar=splash.querySelector(".progress-bar span");cc.loader.onProgress=function(completedCount,totalCount,item){var percent=(100*completedCount)/totalCount;if(progressBar){progressBar.style.width=percent.toFixed(2)+"%"}};splash.style.display="block";progressBar.style.width="0%";cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){splash.style.display="none"})}var onStart=function(){cc.view.resizeWithBrowserSize(true);cc.view.enableRetina(true);if(cc.sys.isBrowser){setLoadingDisplay()}if(cc.sys.isMobile){if(settings.orientation==='landscape'){cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE)}else if(settings.orientation==='portrait'){cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT)}}if(cc.sys.isBrowser&&cc.sys.os===cc.sys.OS_ANDROID){cc.assetManager.downloader.maxConcurrency=2}var launchScene=settings.launchScene;var bundle=cc.assetManager.bundles.find(function(b){return b.getSceneInfo(launchScene)});bundle.loadScene(launchScene,cc.sys.isBrowser?function(completedCount,totalCount){}:null,function(err,scene){console.log('Success to load scene: '+launchScene);cc.director.runSceneImmediate(scene)})};var option={id:'GameCanvas',debugMode:settings.debug?cc.debug.DebugMode.INFO:cc.debug.DebugMode.ERROR,showFPS:settings.debug,frameRate:60,groupList:settings.groupList,collisionMatrix:settings.collisionMatrix,};cc.assetManager.init({bundleVers:settings.bundleVers});var bundleRoot=[INTERNAL];settings.hasResourcesBundle&&bundleRoot.push(RESOURCES);var count=0;function cb(err){if(err)return console.error(err.message,err.stack);count++;if(count===bundleRoot.length+1){cc.assetManager.loadBundle(MAIN,function(err){if(!err)cc.game.run(option,onStart)})}}cc.assetManager.loadScript(settings.jsList.map(function(x){return'src/'+x}),cb);for(var i=0;i<bundleRoot.length;i++){cc.assetManager.loadBundle(bundleRoot[i],cb)}}if(window.document){var debug=window._CCSettings.debug;function loadScript(moduleName,cb){function scriptLoaded(){document.body.removeChild(domScript);domScript.removeEventListener('load',scriptLoaded,false);cb&&cb()};var domScript=document.createElement('script');domScript.async=true;domScript.src=moduleName;domScript.addEventListener('load',scriptLoaded,false);document.body.appendChild(domScript)}var dev_key="tp_dev_key";Object.defineProperty(window,"__dev_mode",{get:function(){return localStorage.getItem(dev_key)=="true"},set:function(bo){localStorage.setItem(dev_key,bo?"true":"false")},enumerable:true,configurable:true});var showDebug=window.__dev_mode;if(showDebug){loadScript("ig/vconsole.min.js",function(){window['vConsole']=new window['VConsole']();window['vConsole'].showSwitch()})}loadScript(debug?'cocos2d-js.js':'cocos2d-js-min.js',function(){if(CC_PHYSICS_BUILTIN||CC_PHYSICS_CANNON){loadScript(debug?'physics.js':'physics-min.js',function(){boot()})}else{boot()}})}})();