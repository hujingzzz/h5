window.__require=function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({App:[function(e,t,n){;cc._RF.push(t,"de7b7DPOhhP0rg87wy6EcoL","App"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./controller/GameCtrl"),r=e("./controller/ComponentCtrl"),i=e("./manager/indexManager"),a=function(){function e(){}return Object.defineProperty(e,"platformManager",{get:function(){return i.PlatformManager.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"resManager",{get:function(){return i.ResManager.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"eventManager",{get:function(){return i.EventManager.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"collisionManager",{get:function(){return i.CollisonManager.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameCtrl",{get:function(){return o.default.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"compCtrl",{get:function(){return r.default.getInstance()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sceneManager",{get:function(){return i.SceneManager.getInstance()},enumerable:!1,configurable:!0}),e}();n.default=a,cc._RF.pop()},{"./controller/ComponentCtrl":"ComponentCtrl","./controller/GameCtrl":"GameCtrl","./manager/indexManager":"indexManager"}],BaseBehavier:[function(e,t,n){;cc._RF.push(t,"b602f9hG0ZAK406m0yer5NZ","BaseBehavier");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BaseBehavier=void 0;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._data=null,t.hitDemage=5,t.healthPoint=10,t.isOnLeft=!1,t}return r(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"demage",{get:function(){return this.hitDemage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hp",{get:function(){return this.healthPoint},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.healthPoint>0},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._data=e},t.prototype.idle=function(){},t.prototype.move=function(){},t.prototype.shoot=function(){},t.prototype.turn=function(e){this.isOnLeft=e,this.node.scaleX=e?1:-1},t.prototype.takeDemage=function(e){return this.healthPoint-=e,cc.log(this.name+" take demage:"+e+", hp:"+this.healthPoint),!this.isAlive},t.prototype.die=function(){cc.log(this.node.name+" died")},t.prototype.resurrect=function(){cc.log(this.node.name+" resurrected")},t}(cc.Component);n.BaseBehavier=i,cc._RF.pop()},{}],BaseUI:[function(e,t,n){;cc._RF.push(t,"a4c4dVR5kJKXY3g/uxM73RN","BaseUI");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listenerCollection=[],t}return r(t,e),t.prototype.setListeners=function(e,t){var n=this,o=t?e.on:e.off;this.listenerCollection.forEach(function(e){o(e.name,e.action,n)})},t.prototype.initialize=function(){},t.prototype.onEnter=function(e){e&&e()},t.prototype.onHide=function(e){e&&e()},t.prototype.onExit=function(){},t.prototype.show=function(e){this.node.active=!0,this.onEnter(e)},t.prototype.hide=function(e){var t=this;this.onHide(function(){t.node.active=!1,e&&e()})},t.prototype.close=function(){this.onExit(),this.node.removeFromParent(),this.node.destroy()},t}(cc.Component);n.default=i,cc._RF.pop()},{}],Battery:[function(e,t,n){;cc._RF.push(t,"860b8okzepLRqV9w5G7T/Ou","Battery");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../App"),c=e("../../config/Constant"),s=e("./BulletItem"),l=cc._decorator,u=l.ccclass,p=l.property,f=cc.winSize,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletNode=null,t.battery=null,t.bulletPrefab=null,t.specialBulletPrefab=null,t.anger=null,t.angerBtn=null,t.angerProgress=null,t.angerState=null,t.light=null,t._bulletPool=null,t._timer=null,t._increaseTimer=null,t._reduceTimer=null,t._tag=!1,t._num=0,t}return r(t,e),t.prototype.start=function(){var e=this;a.default.eventManager.on(c.GameUIEvent.RecycleBullet,this.recycleBullet,this),a.default.eventManager.on(c.GameUIEvent.KillBullet,this.backBulletPool,this),a.default.eventManager.on(c.GameUIEvent.DisAnger,this.disAnger,this),a.default.eventManager.on(c.GameUIEvent.NextStage,this.nextStage,this),a.default.eventManager.on(c.GameUIEvent.StartGame,this.showBattery,this),a.default.eventManager.on(c.GameUIEvent.NextLevel,this.nextLevel,this),a.default.eventManager.on(c.GameUIEvent.HideBattery,this.hideBattery,this),a.default.eventManager.on(c.GameUIEvent.ClearAnger,this.clearAnger,this),a.default.eventManager.on(c.GameUIEvent.PauseReduce,this.offListener,this),a.default.eventManager.on(c.GameUIEvent.PauseReduce,function(){e._reduceTimer&&e.clearTimer()},this)},t.prototype.onLoad=function(){this.angerBtn.getComponent(cc.Button).interactable=!1,this.anger.enabled=!1},t.prototype.onDestroy=function(){this.offEvent()},t.prototype.onTouchStart=function(){console.info('触摸开始');var e=this;a.default.compCtrl.home.node.active&&(a.default.compCtrl.home.tip.node.opacity=0,a.default.compCtrl.home.node.active=!1),this._reduceTimer&&clearInterval(this._reduceTimer),a.default.gameCtrl.gameView.isEnd||(this._timer=setInterval(function(){e.shooting(e.bulletNode),e._tag=!0},100)),this.increaseAnger()},t.prototype.onTouchEnd=function(){console.info('触摸结束');this._timer&&clearInterval(this._timer),this._increaseTimer&&clearInterval(this._increaseTimer),a.default.gameCtrl.gameView.isEnd||this._tag||this.shooting(this.bulletNode),this.angerProgress.progress<1&&this.reduceAnger(),this._tag=!1},t.prototype.increaseAnger=function(){var e=this;this._increaseTimer=setInterval(function(){if(e.angerProgress.progress+=.01,e.angerProgress.progress>=1){clearInterval(e._increaseTimer),e.angerProgress.progress=1,e.angerState.active=!1,e.anger.enabled=!0,e.light.active=!0;var t=e.light.getComponent(dragonBones.ArmatureDisplay);t.armatureName="Armature",t.playAnimation("light",0),e.angerBtn.getComponent(cc.Button).interactable=!0}},25)},t.prototype.reduceAnger=function(){var e=this;this._reduceTimer=setInterval(function(){e.angerProgress.progress-=.01,e.angerProgress.progress<=0&&(clearInterval(e._reduceTimer),e.angerProgress.progress=0)},50)},t.prototype.clearTimer=function(){this._timer&&clearInterval(this._timer),this._increaseTimer&&clearInterval(this._increaseTimer),this._reduceTimer&&clearInterval(this._reduceTimer)},t.prototype.clearAnger=function(){this.clearTimer(),this.disAnger(),this.angerProgress.progress=0},t.prototype.shooting=function(e){a.default.gameCtrl.playSound("sound/shot");var t=null;(t=cc.instantiate(this.bulletPrefab).getComponent(s.default)).init(a.default.gameCtrl.persistance.getCurSkinid()),t.node.parent=e,t.node.setPosition(cc.v2(0,0)),t.node.name=c.Group.Bullet,t.node.group=c.Group.Bullet,this._num++,this.node.emit("shooting")},t.prototype.backBulletPool=function(e){e.destroy()},t.prototype.recycleBullet=function(){this.bulletNode.removeAllChildren()},t.prototype.disAnger=function(){this.anger.enabled=!1,this.light.active=!1,this.angerState.active=!0,this.angerBtn.getComponent(cc.Button).interactable=!1,this.angerProgress.progress=0},t.prototype.uniqueSkill=function(){this.disAnger();var e=null,t=(e=cc.instantiate(this.specialBulletPrefab).getComponent(s.default)).node.getComponentInChildren(dragonBones.ArmatureDisplay);t.armatureName="Armature",t.playAnimation("slug_special",0),e.node.parent=this.bulletNode,e.node.setPosition(cc.v2(0,0)),a.default.gameCtrl.playSound("sound/specialShot"),e.node.name=c.Group.SBullet,e.node.group=c.Group.SBullet},t.prototype.nextStage=function(){console.log("11111111111");var e=this;a.default.platformManager.logEvent("stage_began",{stage:a.default.gameCtrl.DB.stages[a.default.gameCtrl.DB.curStageI].stageId}),console.log("next stage"),this.clearTimer(),this.offListener(),this.angerBtn.node.active=!1,a.default.gameCtrl.playSound("sound/fly"),cc.tween(this.battery).to(1.5,{position:cc.v2(0,f.height)},{easing:"quintIn"}).call(function(){e.battery.setPosition(0,-f.height/2-e.battery.height-50),a.default.gameCtrl.gameView.circles[a.default.gameCtrl.DB.curStageI-1].unSelect(),a.default.gameCtrl.gameView.circles[a.default.gameCtrl.DB.curStageI].select(),a.default.gameCtrl.gameView.reset(),a.default.gameCtrl.gameView.currentLevelLable.string=a.default.gameCtrl.DB.level.toString(),a.default.gameCtrl.gameView.nextLevelLabel.string=(a.default.gameCtrl.DB.level+1).toString(),console.log("next stage units"),console.log(a.default.gameCtrl.DB.units),a.default.gameCtrl.gameView.initUnits(a.default.gameCtrl.DB.units)}).start()},t.prototype.nextLevel=function(){console.log('======gameEnd======');setTimeout(()=>{top.h5_sdk.showAd('Interstitial')},700);showInter();var e=this;this.clearTimer(),this.angerProgress.progress=0,this.offListener(),this.angerBtn.node.active=!1,a.default.gameCtrl.playSound("sound/fly"),cc.tween(this.battery).to(1.5,{position:cc.v2(0,f.height)},{easing:"quintIn"}).call(function(){if(window.parent.h5sdk)window.parent.h5sdk.athenaSend('level_end',a.default.gameCtrl.DB.level-1,'Pass');e.battery.setPosition(0,-f.height/2-e.battery.height-50),a.default.gameCtrl.gameView.getSettle(),a.default.platformManager.logEvent("level_end",{level:a.default.gameCtrl.DB.level-1})}).start()},t.prototype.showBattery=function(){var e=this;cc.tween(this.battery).to(.5,{position:cc.v2(0,-468)}).call(function(){a.default.eventManager.emit(c.GameUIEvent.ShowTip),a.default.gameCtrl.gameView.level.active=!0,a.default.gameCtrl.gameView.circles[a.default.gameCtrl.DB.curStageI].select(),e.angerBtn.node.active=!0,e.onListener(),a.default.gameCtrl.gameView.isEnd=!1,0!==a.default.gameCtrl.DB.curStageI&&e.reduceAnger()}).start()},t.prototype.hideBattery=function(){this.battery.setPosition(0,-f.height/2-this.battery.height-20),this.angerBtn.node.active=!1,this.offListener()},t.prototype.onListener=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.offListener=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.offEvent=function(){var e=this;this.offListener(),a.default.eventManager.off(c.GameUIEvent.RecycleBullet,this.recycleBullet,this),a.default.eventManager.off(c.GameUIEvent.KillBullet,this.backBulletPool,this),a.default.eventManager.off(c.GameUIEvent.DisAnger,this.disAnger,this),a.default.eventManager.off(c.GameUIEvent.NextStage,this.nextStage,this),a.default.eventManager.off(c.GameUIEvent.StartGame,this.showBattery,this),a.default.eventManager.off(c.GameUIEvent.NextLevel,this.nextLevel,this),a.default.eventManager.off(c.GameUIEvent.HideBattery,this.hideBattery,this),a.default.eventManager.off(c.GameUIEvent.ClearAnger,this.clearAnger,this),a.default.eventManager.off(c.GameUIEvent.PauseReduce,function(){e._reduceTimer&&e.clearTimer()},this)},i([p(cc.Node)],t.prototype,"bulletNode",void 0),i([p(cc.Node)],t.prototype,"battery",void 0),i([p(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([p(cc.Prefab)],t.prototype,"specialBulletPrefab",void 0),i([p(dragonBones.ArmatureDisplay)],t.prototype,"anger",void 0),i([p(cc.Button)],t.prototype,"angerBtn",void 0),i([p(cc.ProgressBar)],t.prototype,"angerProgress",void 0),i([p(cc.Node)],t.prototype,"angerState",void 0),i([p(cc.Node)],t.prototype,"light",void 0),i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant","./BulletItem":"BulletItem"}],BulletItem:[function(e,t,n){;cc._RF.push(t,"52298Hq8dhM0pJAzJiFswdy","BulletItem");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../App"),c=e("../../config/Constant"),s=cc._decorator,l=s.ccclass,u=s.property,p=cc.winSize,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bullet=null,t.bullets=[],t.isSbullet=!1,t.isHitted=!1,t}return r(t,e),t.prototype.init=function(e){this.node.group!=c.Group.SBullet&&(this.bullet.spriteFrame=this.bullets[e-1])},t.prototype.update=function(){this.node.y+=20,this.node.y>=p.height+this.node.height/2&&this.isSbullet?this.node.removeFromParent():this.node.y>=p.height+this.node.height/2&&a.default.eventManager.emit(c.GameUIEvent.KillBullet,this.node)},t.prototype.onCollisionEnter=function(e,t){if(!a.default.gameCtrl.gameView.isEnd){if(this.isHitted)return;t.node.name==c.Group.Bullet&&(this.isHitted=!0,a.default.collisionManager.collisionFlyer(e,t)),t.node.name==c.Group.SBullet&&a.default.collisionManager.collisionFlyer(e,t)}},i([u(cc.Sprite)],t.prototype,"bullet",void 0),i([u([cc.SpriteFrame])],t.prototype,"bullets",void 0),i([l],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant"}],ButtonScript:[function(e,t,n){;cc._RF.push(t,"dd6f3CdiFBJ147c8fDMYonp","ButtonScript");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../App"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){this.node.on("click",this.onBtnClick,this)},t.prototype.onDisable=function(){},t.prototype.onBtnClick=function(){a.default.gameCtrl.playSound("sound/click")},i([s],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../App":"App"}],CollisionManager:[function(e,t,n){;cc._RF.push(t,"1e23bEpIfVEE5DijVdue9/B","CollisionManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("../App"),a=e("../common/Singleton"),c=e("../config/Constant"),s=e("../ui/component/BulletItem"),l=e("../ui/component/Enemy"),u=e("../ui/component/Obstacle"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._enabled=!0,t._isBlow=!1,t._isFinish=!1,t}return r(t,e),t.prototype.reset=function(){this._enabled=!0,this._isBlow=!1,this._isFinish=!1},t.prototype.collisionFlyer=function(e,t){if(this._enabled){var n=t.node.getComponent(s.default);if(e.node.group==c.Group.Enemy){i.default.gameCtrl.DB.addKilledNum(),console.log(i.default.gameCtrl.DB.currentKilled,i.default.gameCtrl.DB.currentCount[i.default.gameCtrl.DB.curStageI]);var o=e.node.getComponent(l.default);this.collisionEnemy(o,n)}else e.node.group==c.Group.Obstacle&&(o=e.node.getComponent(u.default),this.collisionObstacle(o,n))}},t.prototype.collisionEnemy=function(e,t){this._isBlow||(t.node.group==c.Group.Bullet&&t.node.removeFromParent(),e.tag=!0,i.default.gameCtrl.DB.currentKilled===i.default.gameCtrl.DB.currentCount[i.default.gameCtrl.DB.curStageI]&&(this._enabled=!1,this._isFinish=!0),e.node.group=c.Group.Default,e.enemy.node.active=!1,e.blow.enabled=!0,e.blow.playAnimation("blow01",1),i.default.gameCtrl.playSound("sound/blow"),i.default.gameCtrl.DB.score+=1,i.default.gameCtrl.gameView.mask.node.width=i.default.gameCtrl.DB.killedNum/i.default.gameCtrl.DB.amount*267,i.default.gameCtrl.gameView.scoreLable.string=i.default.gameCtrl.DB.score.toString(),i.default.gameCtrl.DB.currentKilled===i.default.gameCtrl.DB.currentCount[i.default.gameCtrl.DB.curStageI]&&(i.default.eventManager.emit(c.GameUIEvent.PauseReduce),setTimeout(function(){i.default.eventManager.emit(c.GameUIEvent.KillEnemy)},800)))},t.prototype.collisionObstacle=function(e,t){this._isFinish||(e.blow.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function(){e.node.active=!1,i.default.gameCtrl.gameView.getRelive(),i.default.gameCtrl.gameView.isEnd=!0,i.default.compCtrl.relive.progressTag=!0},this),e.dbDestroyByLight.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function(){e.node.active=!1},this),e.node.group=c.Group.Default,t.node.group==c.Group.Bullet&&t.node.removeFromParent(),e.tag=!0,e.mine&&(e.mine.node.active=!1),e.enemy&&(e.enemy.node.active=!1),t.node.group==c.Group.SBullet?(e.blow.node.active=!1,e.dbDestroyByLight.node.active=!0,e.dbDestroyByLight.playAnimation("effect_roadblock",1),i.default.gameCtrl.playSound("sound/disapper")):(this._enabled=!1,this._isBlow=!0,i.default.eventManager.emit(c.GameUIEvent.ClearAnger),e.blow.enabled=!0,e.blow.node.active=!0,e.dbDestroyByLight.node.active=!1,e.blow.playAnimation("newAnimation",1),i.default.gameCtrl.playSound("sound/obstacle_explode")))},t}(a.default);n.default=p,cc._RF.pop()},{"../App":"App","../common/Singleton":"Singleton","../config/Constant":"Constant","../ui/component/BulletItem":"BulletItem","../ui/component/Enemy":"Enemy","../ui/component/Obstacle":"Obstacle"}],CompDB:[function(e,t,n){;cc._RF.push(t,"97f7bVyoCREl5Wz36r8vUVv","CompDB");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Skin=void 0;var i=e("../App"),a=[],c=function(){function e(e,t,n,o,r,i){this._skinId=null,this._path="",this._armatureName="",this._animation="",this._playTimes=0,this._state=!1,this._skinId=e,this._armatureName=t,this._path=n,this._animation=o,this._playTimes=r,this._state=i}return Object.defineProperty(e.prototype,"skinId",{get:function(){return this._skinId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},set:function(e){this._path=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"armatureName",{get:function(){return this._armatureName},set:function(e){this._armatureName=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},set:function(e){this._animation=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playTimes",{get:function(){return this._playTimes},set:function(e){this._playTimes=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!1,configurable:!0}),e}();n.Skin=c;var s=function(){function e(){this._skins=new Array,this._selectSkin=null}return Object.defineProperty(e.prototype,"skin",{get:function(){return this._skins},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectSkin",{get:function(){return this._selectSkin},set:function(e){this._selectSkin=e},enumerable:!1,configurable:!0}),e.Create=function(){return new e},e.prototype.initSkin=function(){this.getSkin()},e.prototype.getSkin=function(){for(var e=0;e<Math.ceil(12/9);e++)this._skins.push([]);for(e=0;e<12;e++)this._skins[Math.floor(e/9)].push(new c(e,"","","",0,!1))},e.prototype.getRankData=function(){return o(this,void 0,Promise,function(){return r(this,function(){return console.log("\u83b7\u53d6\u6570\u636e\u4e2d\u3002\u3002\u3002"),[2,"undefined"==typeof FBInstant?a:i.default.platformManager.platform.getAllTimeEntriesAsync()]})})},e}();n.default=s,cc._RF.pop()},{"../App":"App"}],ComponentCtrl:[function(e,t,n){;cc._RF.push(t,"07e7eaFyg1LrojqjfQV27/U","ComponentCtrl");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../common/Singleton"),s=e("../model/CompDB"),l=e("../App"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_ReliveView=null,t.m_SettleAccount=null,t.m_GameOver=null,t.m_Home=null,t.m_RankView=null,t.m_SkinView=null,t.m_CompDB=null,t}return r(t,e),Object.defineProperty(t.prototype,"DB",{get:function(){return this.m_CompDB},enumerable:!1,configurable:!0}),t.prototype.initDB=function(){this.m_CompDB=s.default.Create()},Object.defineProperty(t.prototype,"relive",{get:function(){return this.m_ReliveView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"settleAccount",{get:function(){return this.m_SettleAccount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GameOver",{get:function(){return this.m_GameOver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"home",{get:function(){return this.m_Home},enumerable:!1,configurable:!0}),t.prototype.initRelive=function(e){this.m_ReliveView=e},t.prototype.initGameOver=function(e){if(window.parent.h5sdk)window.parent.h5sdk.athenaSend('level_end',l.default.gameCtrl.DB.level+1,'Fail');console.log("======initGameOver======");setTimeout(()=>{top.h5_sdk.showAd('Interstitial')},700);this.m_GameOver=e},t.prototype.initSettleAccount=function(e){this.m_SettleAccount=e},t.prototype.initHome=function(e){this.m_Home=e},t.prototype.toast=function(e,t){var n,o;(o=(n=new cc.Node).addComponent(cc.Label)).node.color=cc.Color.WHITE,o.node.anchorX=o.node.anchorY=.5,o.enableBold=!0,o.fontSize=32,o.lineHeight=34,o.node.opacity=0,o.string=e,t?t.addChild(n):l.default.gameCtrl.mainScene.uiNode.addChild(n),n.x=0,n.y=-200,cc.tween(n).parallel(cc.tween(n).to(1,{y:100}),cc.tween(n).to(.6,{opacity:255})).call(function(){n.destroy()}).start()},t.prototype.convertToNodeSpaceAR=function(e,t){var n=t.convertToWorldSpaceAR(cc.v3(0,0));return e.convertToNodeSpaceAR(n)},t.prototype.randFloat=function(e,t){return Math.random()*(t-e)+e},t.prototype.randInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},t.prototype.playCoinAnim=function(e,t,n,o,r){return i(this,void 0,void 0,function(){var i,c,s,u,p,f=this;return a(this,function(){return i=Math.min(t,15),c=Math.floor(t/i),s=Math.ceil(t/c),u=this.convertToNodeSpaceAR(e.node,r),p=0,[2,new Promise(function(r){for(var i=e.node.convertToNodeSpaceAR(n),a=function(){var n=cc.instantiate(o),a=Math.min(20*t,150),d=f.randInt(200,300)/1e3,h=f.randInt(2,6)/10;n.parent=e.node,n.setPosition(i);var g=f.randFloat(-a,a),y=f.randFloat(-a,a);cc.tween(n).by(d,{position:cc.v2(g,y)},{easing:"quadOut"}).call(function(){cc.tween(n).delay(h).to(.2,{position:u}).call(function(){p++,l.default.gameCtrl.DB.coin+=c,e.gold.string=l.default.gameCtrl.DB.coin,n.destroy(),p==s&&r("finish")}).start()}).start()},d=0;d<s;d++)a()})]})})},t}(c.default);n.default=u,cc._RF.pop()},{"../App":"App","../common/Singleton":"Singleton","../model/CompDB":"CompDB"}],ConfigPreload:[function(e,t,n){;cc._RF.push(t,"4434c2LJGxHY6X2Paspog25","ConfigPreload"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioResourceUrl=n.JsonUrl=n.SceneName=n.UIResourceUrl=void 0,n.UIResourceUrl={},n.SceneName={Preload:"preload",Game:"main"},n.JsonUrl={},n.AudioResourceUrl={Click:"sound/click",Enemy_explode:"sound/enemy_explode",Fly:"sound/fly",Obstacle_explode:"sound/obstacle_explode",Shot:"sound/shot",Stage_complete:"sound/stage_complete"},cc._RF.pop()},{}],Constant:[function(e,t,n){;cc._RF.push(t,"60fd727OvNJ2KQ2D/d/zEUs","Constant"),Object.defineProperty(n,"__esModule",{value:!0}),n.tournament_create_interval=n.tournament_solo_play_prompt_interval=n.Group=n.GameUIEvent=n.GameEvent=void 0,n.GameEvent={SkinChanged:"skinChanged",CoinChanged:"coinChanged",BackHome:"backHome"},n.GameUIEvent={KillBullet:"KillBullet",KillEnemy:"KillEnemy",RecycleEnemy:"RecycleEnemy",RecycleBullet:"RecycleBullet",DisAnger:"DisAnger",Died:"Died",NextStage:"NextStage",StartGame:"StartGame",NextLevel:"NextLevel",HideBattery:"HideBattery",ClearAnger:"ClearAnger",ShowTip:"ShowTip",Progress:"Progress",ShowToast:"ShowToast",PauseReduce:"PauseReduce",HideHome:"HideHome"},n.Group={Default:"default",Enemy:"enemy",Bullet:"bullet",Obstacle:"obstacle",SBullet:"s_bullet"},n.tournament_solo_play_prompt_interval=36e5,n.tournament_create_interval=36e5,cc._RF.pop()},{}],DB_Level:[function(e,t,n){;cc._RF.push(t,"7f8cb4uDLFDCKA0BaOBz3eh","DB_Level"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_Level=void 0,function(e){var t;function n(){return t||(t=new ig.DB("NoIglgJiA0AEIGcAuBDA5gUwSAukA===","NrCMBoAIwXR9gCYpLggzCzkAsbg4oCsUAbPidAOxQAc+pKAnFKAAz43SgSSiL5aKUNlB54wFt0qhyE9sK6h683mCmIO85NES9EA+diTZE4hGJSJKiORcpIuiFRca6p6LRa7B0vdIYWQtDo2Ojm6liU6HZIbFhc6C5IauhSOF5IOgS8OIEmKDjYOBFmhZQ4sdaFXDjJtoVSRJmIPkS8RPnOxNhEpVLARJREsZ7EXETJfsRSpJkBKKS8pPmhi9ikEeGLlKSjDqRcpFNuwKRSVPM+VLxUq8HAVNhUWwNUlFSxGShUXFTJODUVCktEyeRQtF4tHyRQh2FoERKEMotC+DloXFoANOtCkTDBPiYvCYMIeTGwTERAyYlCYsWazC4TGS7WYUnYmU6UAARNyJERsLz+YRIEKEEMeXzxW4xYMuLLJpL+VJZXMlQgluqzjpVYKpWcRarKKqZfrDlrjhaVfrLlqbnadTa9RIXnbjTbTS75TbgrLgVrQQHeLLoQHnQgEQH3RJUQHvTHffrcVr8Sng/qSSnw5JDRnowg6Sn4wXExImNb5Gx4qK+TAgA===","id")),t}e.getById=function(e){return n().get(e)},e.getall=function(){return n().getall()}}(n.DB_Level||(n.DB_Level={})),cc._RF.pop()},{}],DB_Path:[function(e,t,n){;cc._RF.push(t,"d8bcdB4uHBABbESh6biOw29","DB_Path"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_Path=void 0,function(e){var t;function n(){return t||(t=new ig.DB("NoIgDghgLgFglgExAGgAQgGZwDYFMByEAtriALpA","NrCMAZQGgAgIgKYDsEFsCeAFAhgFwBYDOA9AA576gD6CcAulGOAEyyIoY4EnkHNXVaDJgGY2yNFgo8K/fkMYQALOI5TuZCiJr1F4AKyrJXIpoJKBO4RABsRztLP4L83UwDs99ad759lhSYADi8TGQJ/V2twAE5Qx18bK0UIeI1fd2SwUGh4CQd0iiCsnNY8tTCnGIC3HLFy4wSKaqiUlQaCnwoIGutQQw7vcMpwKlbsu0HK3xzelM8ppoJZ8ZyQxcLl6m1AnLiNrq2qC13mcDTDyn5BWuZc9kbNq7GS5jKHzuHQfh3b+o+hk5vsdXu0AdNur9rMwBuClpQLDdoZM4U9QC5XgtUZd0VQoYpmOtsV8LCdbvtiUCLP5diJzgcvv4kYoRPd8oCZpESiJ3uyIct/PiwCJ/nz4f0QbSwWK0f4abURLCZTikszhSjlV8kqsRFjNUDMmrQCIifqZpkdRSzd1MkL0fTKTNikalGyKuLiqslLz3WjqrslKLfZcznMwEppcHhqGvUqo047mH0Rr475E169anZNcSkpTVm+HJc1aC/hmHb9A7rXwydZ9G7HiH5XWfY3o0ldvog22E5lO5Ge2nip244PZP7avoU2OCHSSvpMzP8Kz5/mlzz5yX13abFXSyJESUbA3Pk4Dy9djZW6ffOed92b1pSUeB4/Z9Sj6O38uLB3ajZp2/RUkxsRcgK5S813AvEjy3aDa0Udw93XVUSncE8OS0bU0OvTDZySO13AfPDlySBCwHcV8SJEJJm0Qr9qKSP9rHcQDGKoPtancMD2OHLioOoziWLg6i+OsIJkKA6ojSCDD+WXFoSiCXD5JEao7SCYjVOqcjQCCKj5KUUYZIYwzRlWII2LMmDdiCHjrN0oIBMM6gZJElyL1qGJJJI10bK8uT4T83SYhUoLqDosAYi0oKc12GIDNizzrBiUykrtGIrKSkL7KSyLQBiZykuYxQYncpKhMYM4fMM/gxKqyALmGb0qAnYQzjCp4Wp6QIzhirrrjVM5EoGgRxjONLRuNLIziyqbyLOXKpsis4iqmkrgDOcqpsqzbUgZJxuvqvbAq67Qhu+JrDu0cbjSu3xA389r0XuihHoW/pXvMbQVtAObLkeja7iWgHtF2u41tBqhjrubaobaqqzi+5xztGXq7mRx7ZnRzqoeBdH+oBw90ZGonksRyayaFN5/ua590ZB5qmRmwlMYgtw3jhpmnqquk2clDnWX5laeX5oGRUx8XSeaw0ZsVTGLTl2nDttOXGZVgX2pNBWqBFrmNaBoydfB10dZh71MedGbA0t8nNojW3qaUSnmuKBalGVh7ihWpR1Ye6Trch5rFN6pR9f9nnNsrTGdJm+sY91uPceDqgga7BPwf0aXDuqGH9BdnPWrjz23uktGOYXZHKzDGEg6cavxv0cOKGr6ndyr0YFuPKvXJmq8e7t5gbEJ4Z9DijmbGz3wx8HmwC+nn4+5LiJ+C7v2W/4FabDrhfU775uImppCq+Jjn0JPwf3GT+uLCPkeb81qrKIvlb3Hnlvfxm1iL/B7iL5h9wO8P5F16u4A+fhETl3ahJKuzNeqyVgYPZSiDqaaUQQtfSiCVpBHfhEVC8Dl5+GwvA9eeDI6EiAWQjB4CpyJ16t5KuTEZoxFOpcWh4NQqMOhsw++08kgI02glLhPUOapWEUNTKwjxoxFIX4WW9DKFyMHmVKuqtAh0hqvCBcj9gB0lYaPTIkU6TX2nlbdR4BeEt09FkOkU8rGRzpLgvwbsbHgEIU3MMdJZEePGHSRRHihR0hobHdR+1HQt2qEYnIyNdyeMugdRI5kbF3QSRQWJgSXqpIILE8irInGxKiYQ2JG1WSyOPHExR5TfEFRidsGxSMsn4HKbkjGjSryeLeDEos6jywxPOvUux2Sbr1PyS0opcC3A8jKezYQPJKmCnqeAueOiRSaKeABGxQs2nyMmaLbZdsRSWOyWo3ZgymlmN2fk6x6iaIxIESKWRSFNmKPQp4tSyNXm+KNo015gTTY/PHrMi2AKDk2x+f09RDtwWgqcURBxHsPmnyBY8jEkKXm3xsWHRFKzo4/KMfHH5+DJljw+cQ4lRz8CsQcVnUlOLYW0RsVOWlJTK6Eo4oyl5SRjqKnAVS+57c2UiNmd3QVaoaImIoFS/Gkzh60umuoyecrclzzlUYgCHzdo0UeRc4VLzrkyt5cUQJx8fn3PPo0iSnir7I0tb4oiNqxXPwtXapxmkbHfwtbkv+FqjGAJtSUsBNrNUwItTqxgJp9FOCcgc5BoaHFoLjbkzBcajE4JtcUEpll03svUXZG1Adc2KKCCHSZxb80OIYRakJkyWHI28jYzhjSWGeOinW6gvihFNrqeosRXaVmSL7UYmRba949sUaFFt4CJ3jCMmsy4E6hRGUjb4Cd5EjISoIBOyKRkKUTo2kZM5E7dpGScRO46RlCEToEUZWR0UwxGXHcMwIRkp3aEXWE6s+AEr3uiU21FbhXQbq/Ri59KTwmbvpgBzJ4HgN0Kg6ez+oHL0WGPaAW9Fhz16TrRYa9NS/0CCgYwb0c7hjfuxgB1pMGyMzs6U2iZwhvS7pmUR5gh6FnPphHW/dQ8607IY8wW9isOPjpOfxqdmQ118ybYYrIgZl3NEyPuvZVHMjHolk2sNwBAyHv1Qx+WGnI6BkvS459uo63e1k9rAzSmp0FoA98qjJaGP/Mc4Z4FrndLgEavAAA9gAI0ILgbAABjAANggEwQIqA+dqF594/nAshfC5FtM0XYsWLYAloLYWIsUDPGl6I4AwRZaS7lggh0Ct6AMJlgL2Xkt5enpYGLhWUQlZyylluLxmtVaxG1+r5XEiVaYOAIkfWyv4CcJkbrw2KRjY6wQYo02IBhLmw15oTXYu/rgKtgb63+BLcgPF2rpX5sjA29EMDO2JszCSQd6DV2gTUGa3QIAA==","pathid")),t}e.getByPathid=function(e){return n().get(e)},e.getall=function(){return n().getall()}}(n.DB_Path||(n.DB_Path={})),cc._RF.pop()},{}],DB_Skin:[function(e,t,n){;cc._RF.push(t,"63e05pWekJIkooeybm5mZM7","DB_Skin"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_Skin=void 0,function(e){var t;function n(){return t||(t=new ig.DB("NoIgzg1glgdlAmIA0ACEAXAngBwKbLQGMB7MdAkKEmC+AIwH0BDMMXcgXSA=","NrCMBoAIAYoVmrSAiAzgawJYDtUHoAHAGwENsBTaUZKZYs8gfQEFtMBbEgF0wHttCpClWQBdcMABMUJAiRosuQQ2iSaKehRZtOPfsuFrxwAMwyooRPIw58myifV0hTVh258B96I+MAWc0hLRFobJW8/J3ttdz0vF2hI4zhA0DlQxTsEuCiXGN1PA0oc4wA2VPSUMKyVUtyGfI99bzrjAHZAySsM2yLoNvqtNwLmhIHjAA5O7qrMvonB1x0m+JUF4wBOTsqFXu8Nxca4voPjSwsoaVm9l0tD4ZWiu7OIIMue8NvqWmiH4/tQNQzldXmZrp8GKA1D88n9CgCjBJQGDQR8ahRkfdlsdACN+aQ24yRATekGJuwhGMiMIacP0VCSSJSJLJ1SeOWpQ2xhSoJSR5RJTPJ6PIoDqHKWsW5orESI6ArRTwG4qOUsJYCmJP5QqeC2VtIEVHWoiAA==","skinid")),t}e.getBySkinid=function(e){return n().get(e)},e.getall=function(){return n().getall()}}(n.DB_Skin||(n.DB_Skin={})),cc._RF.pop()},{}],DB_Stage:[function(e,t,n){;cc._RF.push(t,"803bf4KNpBJtpklX5Yst7Xa","DB_Stage"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_Stage=void 0,function(e){var t;function n(){return t||(t=new ig.DB("NoIgzgLghg5gpgSwCYgDQAIQTlAtmNTAMwQCc4IFc4QBdIA=","NrCMBoAIQBi0C6Vh0qGMDsCmQER5LABMyKUxu5kAzFauljlAUTWagCz3wyiXIGfOrlbhgnDlACsPSADY5jbKMLjpUyNkFQAHEowqWa4PM0BOA+iuJVRTJus60GfXfG7HiZ4xHGi5o4C0Ax0Phh++Cbojtw+suFM7mAQ0NSgisiMDNrQxBgM+sg0BfCWibb+4vya+VTZFN55pZDEwcAlGBRhIbwwblVg7GmoxHG9LkmDoJIjFAkTxJmLudTERYvlE4yUyaAac7QwcjRN1DTtqDQ95+PpfJe8oJFiYGaHNAvny/cwlnsOD6rK4bc5bX5GKJEUCeQ6cY7OThnIRObZ8SpQ6qBOGPSYDTEkVCwKCcG5cO5CGBfSmKZLEVLEyCcakkn6UyGvNqaTjAkmgykvEzEYaMzjgyksya0wZjTTSBFomCCojEA6M6TIp4K+6gDGc97q3G+ZgE4iA9VkvocoWw9XcOnY9WSxj/QYlOVs+Bik2vU5y3mTPUmC5y/lWn3BkXUaTip72t2zRnybWoeSahS4+SWhQUqDyZ18aUEz6aeSehQB+RhhSxlyga1sA3UTApqCYdOYXGYbOYXNaSWYcuYAPoGYRtjm5vVzCu4u26i6VuQXTp3S43TZ43JGiO5u18w3BqQcx3fJdY9fTqocxF17wzS6au6fdL8zp8xGh5WZXiJEPvu6JKujlroI4ROOv6kIc6DVugta6kuurprqRrPEoY4+Ps6HlrqI4wuh8F1D49JKG0pGbmMpEFlMBKkkEOFmqRsHEPBJRKKc7FGtc7F9s8zo0DhNBgf0EESIm6Q0LBO5KPCMnIXw8a0Wq6ScO0V5ejcybnjMdzmC0MxfPw+mcD8+zGcJDa/k2DDesg8LaZw+J3pOqbpvIfaYLB8qiY5jgako0hGtIm7SLx0jOtIOHSCO0iwQpPm7gwMZKMmKXIfIRpZlYn5ock8qOO5KXOmWKUjlWKXwS2SjttVRrdqJGqOL21XOoO1VgVheVQYy9awTOBg0a8wWOIuSgrmNRobmNvGAQNP7AKFI04XwTkmOFI0jo+Y3wXpShvntRoHntvHmM6N5WIpQ3WWUI7mLW+RBkQ0W1DAuL5Nm+R9vkkr5OW+QBvk1b5PdqJrLqcj0m9aHhGOeXzqMGGLFhzj0n99YQ/hMO3mtiWNPdRGLCRKNkYklmmESHTnm0NxnhQlHE4ZVNLFQtOtIxyRprU6wQyxENsSjHEC293GJNR2NEBltQ0F9nx839QkDY94hZlLQPSTDl0mO5tSySjSKifmOuflSA3i8r12tKSEOcF9zLW8tg1ay5FA8tl34G/DLtA7ZizeTDq0S7jrT+SjgWiS2tTBeHDJrKFVgB+InaRz9kUQ9FF3h1GoyxWns6vL2tSpSjaYQxlA0J8AmDKaMWXF19+al2blcW0sHV5yYw6F0D8j3VVKM1f3b31f3X1VxDbX9wDnnj/do0o+N885Zr9ie60U0w7IyQzrUuhfbN8/LfhySLjvwlK8AK470Dz4Z8f3VrLtx9ZxQ+3H+JowfqJgG1EdG9fy3J5y5f2dq0U6X9V4sSbs+H+ANzBAzuicDAiD0wlFxCUTcK1RJ6U0CUPsJRJQlHLCUCyWCY5XBEskD8OC/gnFBlccGzhThoOhhMU4vFMGUOfrQZG0AjynFMi0U4qw+GY14YI0A4I+EEzAIIomYjzwXHaFIjBsNBgnhwfTVhqoTjMw1lg6uUALgBguNWC4tZrhLmuCgi4JwRasOlrYghAlbHGMklYJuN4cHq1YbrHx59zAgOljlCucCcFW0YTbE4dsIlENdhE0xPtfghKDp8SxIdWFh0YVHLJeDwqiUYDg1OWTjE5yyfBPgm9/AICAA=","stageid")),t}e.getByStageid=function(e){return n().get(e)},e.getall=function(){return n().getall()}}(n.DB_Stage||(n.DB_Stage={})),cc._RF.pop()},{}],DB_Team:[function(e,t,n){;cc._RF.push(t,"290b1WQrm9PXJI/0j38Dv32","DB_Team"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_Team=void 0,function(e){var t;function n(){return t||(t=new ig.DB("NoIgLgpghgtglgExAGgAQgA5TAC0S9AcygwJAQjCjgBsQBdIA===","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=","teamid")),t}e.getByTeamid=function(e){return n().get(e)},e.getall=function(){return n().getall()}}(n.DB_Team||(n.DB_Team={})),cc._RF.pop()},{}],DB_Unit:[function(e,t,n){;cc._RF.push(t,"f998aRjLhJCnr0jMIliKv8W","DB_Unit"),Object.defineProperty(n,"__esModule",{value:!0}),n.DB_Unit=void 0,function(e){var t;function n(){return t||(t=new ig.DB("NoIgrgdglgLlAmIA0ACEAHATgUwGYEMAjZNGAT3WxJEwHsZ8YqBdIA==","NrAMBoAICIAcCcCmAzAhgIwM4HoDyWAXVAYwBtFooJJQBdcYARijiTSz0JPMcpqvrAATCwQoMOAKIA7RAFsAnqD7NIjQQGZRbCdhnyFvKKvUMALNvEd9ioSuOCArJfZTZijfbWCAbC902CmZepsAA7P7W7gqOIYIAHJFuBj5xDACcSXrRYXG0QA=","unitid")),t}e.getByUnitid=function(e){return n().get(e)},e.getall=function(){return n().getall()}}(n.DB_Unit||(n.DB_Unit={})),cc._RF.pop()},{}],Enemy:[function(e,t,n){;cc._RF.push(t,"aae9en1RshMo5lY5xGBW8V5","Enemy");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../App"),c=e("../../config/Constant"),s=e("./Flyer"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initUnit=function(t){e.prototype.initUnit.call(this,t),this.blow.node.scale=Math.random()+2.5},t.prototype.update=function(e){var t=this;if(this._isAction)if(this.tag)this._isAction=!1;else{this.isFirstLoop&&(e*=this.speedgap),this.len+=e*this.v,this.len>this.curveLen&&(this.len%=this.curveLen,this._isAction=!1,this.isFirstLoop?(this.isFirstLoop=!1,setTimeout(function(){t._isAction=!0},500*this._num*this._gap*(1-1/this.speedgap)+this._delay)):this._isAction=!0),this._currentPoint=this.curve.getPointAtDistance(this.len),this.node.setPosition(this._currentPoint.x,this._currentPoint.y),this.node.angle=this.getAngle(this._lastPoint,this._currentPoint)-90,this._lastPoint=this._currentPoint;var n=this.curve.getCurveIndex(this.len);this.pointIndex!=n&&(this.pointIndex=n,this.v=this.getSpeed(this.pointIndex)),this.isLast&&(a.default.eventManager.emit(c.GameUIEvent.StartGame),this.isLast=!1)}},i([u],t)}(s.default));n.default=p,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant","./Flyer":"Flyer"}],EventManager:[function(e,t,n){;cc._RF.push(t,"805ablQRGpCwpeElOgXOrds","EventManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventList={},t}return r(t,e),t.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.eventList[e];if(null!=o)for(var r,i,a=o.length,c=0;c<a;c++){var s=o[c];r=s[0],i=s[1],r.apply(i,t)}},t.prototype.on=function(e,t,n){var o=this.eventList[e];if(null==o)o=[],this.eventList[e]=o;else for(var r=o.length,i=0;i<r;i++)if(o[i][0]==t&&o[i][1]==n)return;o.push([t,n])},t.prototype.once=function(e,t,n){this.on(e,function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];t.apply(n,e)},n)},t.prototype.off=function(e,t,n){var o=this.eventList[e];if(null!=o)for(var r=o.length-1;r>=0;r--)o[r][0]==t&&o[r][1]==n&&o.splice(r,1);o&&0==o.length&&(this.eventList[e]=null,delete this.eventList[e])},t.prototype.getEventNames=function(){var e=[];for(var t in this.eventList)e.push(t);return e},t.prototype.eventNames=function(){return this.getEventNames()},t}(e("../common/Singleton").default);n.default=i,cc._RF.pop()},{"../common/Singleton":"Singleton"}],Flyer:[function(e,t,n){;cc._RF.push(t,"f0081I4JdJDKZZ9ypVsxAxu","Flyer");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../App"),c=e("../../common/MovePath"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemy=null,t.blow=null,t.dbDestroyByLight=null,t.mine=null,t._tag=!1,t._isAction=!1,t._points=[],t._currentPoint=null,t._lastPoint=null,t._num=0,t._unitId=0,t._delay=0,t._type=0,t._path="",t._prefab="",t._gap=1,t.len=0,t.pointIndex=0,t.curve=null,t.v=null,t.isLast=!1,t.curveLen=0,t.speedgap=2,t.timer=0,t.constV=0,t.isFirstLoop=!0,t}return r(t,e),Object.defineProperty(t.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this.blow.enabled=!1,this._points=a.default.gameCtrl.DB.path[this._path].pointPos,this.curve=new c.MovePath(this._points),this._lastPoint=this._points[0].start,this.curveLen=this.curve.getLength(),this.v=this.getSpeed(0),this.constV=this.v,setTimeout(function(){e._isAction=!0},500*this._num*this._gap*(1/this.speedgap)+this._delay)},t.prototype.getAngle=function(e,t){var n=t.x-e.x,o=t.y-e.y;return 0==n&&0==o?0:-cc.v2(n,o).signAngle(cc.v2(1,0))/Math.PI*180},t.prototype.getSpeed=function(e){return a.default.gameCtrl.DB.path[this._path].lengthList[e]/a.default.gameCtrl.DB.path[this._path].timeList[e]},t.prototype.initUnit=function(e){this._unitId=e.unnitId,this._num=e.num,this._type=e.type,this._prefab=e.prefab,this._path=e.path,this._delay=e.delay,this._gap=e.gap,this._teamId=e.teamId},i([u(dragonBones.ArmatureDisplay)],t.prototype,"enemy",void 0),i([u(dragonBones.ArmatureDisplay)],t.prototype,"blow",void 0),i([u(dragonBones.ArmatureDisplay)],t.prototype,"dbDestroyByLight",void 0),i([u(cc.Sprite)],t.prototype,"mine",void 0),i([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../App":"App","../../common/MovePath":"MovePath"}],GameCtrl:[function(e,t,n){;cc._RF.push(t,"9cb39LpcJhEx6LPjabjB0ZS","GameCtrl");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../App"),s=e("../common/Singleton"),l=e("../model/GameDB"),u=e("../model/Persistance"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_GameView=null,t.m_GameDB=null,t.mainScene=null,t}return r(t,e),Object.defineProperty(t.prototype,"persistance",{get:function(){return this._persistance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameView",{get:function(){return this.m_GameView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DB",{get:function(){return this.m_GameDB||(this.m_GameDB=l.default.Create())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sound",{get:function(){return"1"===localStorage.getItem("sound")},set:function(e){localStorage.setItem("sound",e?"1":"0")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vibration",{get:function(){return"1"===localStorage.getItem("vibration")},set:function(e){localStorage.setItem("vibration",e?"1":"0")},enumerable:!1,configurable:!0}),t.prototype.init=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.m_GameView=e,[4,this.m_GameDB.init()];case 1:return t.sent(),[4,this.m_GameView.initUnits(this.m_GameDB.units)];case 2:return t.sent(),this.sound=this.vibration=!0,[2]}})})},t.prototype.setup=function(){this._persistance=new u.default,this._persistance.setup(c.default.platformManager.getRemoteData())},t.prototype.playSound=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=1),i(this,void 0,void 0,function(){var o;return a(this,function(r){switch(r.label){case 0:return this.sound?[4,c.default.resManager.loadAudioClipAsset(e)]:[2];case 1:return o=r.sent(),cc.audioEngine.play(o,t,n),[2]}})})},t}(s.default);n.default=p,cc._RF.pop()},{"../App":"App","../common/Singleton":"Singleton","../model/GameDB":"GameDB","../model/Persistance":"Persistance"}],GameDB:[function(e,t,n){;cc._RF.push(t,"b549eE+yrRPNbvll8PFSywy","GameDB");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Unit=n.Team=n.Stage=n.Level=void 0;var i=e("../App"),a=e("../db/DB_Level"),c=e("../db/DB_Path"),s=e("../db/DB_Stage"),l=e("../db/DB_Team"),u=e("../db/DB_Unit");n.Level=function(e){this._levelId=1,this._stages=[],this._levelId=e,this._stages=a.DB_Level.getById(this._levelId).stages};var p=function(){function e(e){this._stageId=1,this._stageId=e}return Object.defineProperty(e.prototype,"stageId",{get:function(){return this._stageId},enumerable:!1,configurable:!0}),e}();n.Stage=p;var f=function(){function e(e){this._teamId=1,this._delay=0,this._teamId=e[1],this._delay=e[0]}return Object.defineProperty(e.prototype,"teamId",{get:function(){return this._teamId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),e}();n.Team=f;var d=function(){function e(e,t,n,o,r,i,a,c){this._num=0,this._unitId=0,this._path="",this._prefab="",this._delay=0,this._type=0,this._gap=1,this._teamId=1,this._num=e,this._unitId=t,this._path=n,this._prefab=o,this._delay=r,this._type=i,this._gap=a,this._teamId=c}return Object.defineProperty(e.prototype,"num",{get:function(){return this._num},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unnitId",{get:function(){return this._unitId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefab",{get:function(){return this._prefab},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return this._gap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"teamId",{get:function(){return this._teamId},enumerable:!1,configurable:!0}),e}();n.Unit=d;var h=function(){function e(){this._level=7,this._stages=[],this._curStageI=0,this._teams=[],this._units=[],this._amount=0,this._killedNum=0,this._score=0,this._gold=0,this.path={},this.prefab={},this.currentKilled=0,this.currentCount=[],this.bulletName="",this.bulletTag=!1,this.coin=0,this.revieveTimes=1}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stages",{get:function(){return this._stages},set:function(e){this._stages=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStageI",{get:function(){return this._curStageI},set:function(e){this._curStageI=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"teams",{get:function(){return this._teams},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._units},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(e){this._amount=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"killedNum",{get:function(){return this._killedNum},set:function(e){this._killedNum=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gold",{get:function(){return this._gold},enumerable:!1,configurable:!0}),e.Create=function(){return new e},e.prototype.creatStages=function(e){for(var t=a.DB_Level.getById(e).stages,n=0;n<t.length;n++){var o=a.DB_Level.getById(e).stages[n];this._stages.push(new p(o))}},e.prototype.creatTeams=function(e){for(var t=0;t<s.DB_Stage.getByStageid(e).teams.length;t++){var n=s.DB_Stage.getByStageid(e).teams[t];this._teams.push(new f(n))}},e.prototype.creatUnit=function(e){return o(this,void 0,void 0,function(){var t,n,o,i,a,s,p,f,h,g,y,m,v;return r(this,function(r){switch(r.label){case 0:for(t=[],n=0;n<e.length;n++)for(o=0,i=l.DB_Team.getByTeamid(e[n].teamId).gap,a=0;a<l.DB_Team.getByTeamid(e[n].teamId).detail.length;a++)for(s=0;s<l.DB_Team.getByTeamid(e[n].teamId).detail[a][1];s++)p=l.DB_Team.getByTeamid(e[n].teamId).detail[a],f=l.DB_Team.getByTeamid(e[n].teamId).pathid,h=c.DB_Path.getByPathid(f).fileName,g=e[n].delay,y=p[0],m=u.DB_Unit.getByUnitid(y).type,v=u.DB_Unit.getByUnitid(y).prefab,t.push(this.loadPath(h)),t.push(this.loadPrefab(v)),this._units.push(new d(o,y,h,v,g,m,i,e[n].teamId)),o++;return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadPath=function(e){return o(this,void 0,Promise,function(){var t;return r(this,function(n){switch(n.label){case 0:return this.path[e]?[2]:[4,i.default.resManager.loadJsonAsset(e)];case 1:return t=n.sent(),this.path[e]=t.json,[2]}})})},e.prototype.loadPrefab=function(e){return o(this,void 0,Promise,function(){var t,n;return r(this,function(o){switch(o.label){case 0:return this.prefab[e]?[2]:(t=this.prefab,n=e,[4,i.default.resManager.loadPrefab(e)]);case 1:return t[n]=o.sent(),[2]}})})},e.prototype.calculateAmount=function(e){this.currentCount=[];for(var t=0,n=0;n<e.length;n++){for(var o=s.DB_Stage.getByStageid(e[n].stageId).teams,r=0,i=0;i<o.length;i++)for(var a=o[i][1],c=l.DB_Team.getByTeamid(a).detail,p=0;p<c.length;p++)0!==u.DB_Unit.getByUnitid(c[p][0]).type&&(t+=c[p][1],r+=c[p][1]);this.currentCount.push(r)}this.amount=t},e.prototype.addKilledNum=function(){this._killedNum+=1,this.currentKilled+=1},e.prototype.init=function(){return o(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return i.default.collisionManager.reset(),this.level=1,this._units=[],this._stages=[],this._curStageI=0,this._killedNum=0,this.currentKilled=0,this._teams=[],this.creatStages(this.level),this.calculateAmount(this.stages),e=this.stages[this.curStageI].stageId,this.creatTeams(e),[4,this.creatUnit(this.teams).catch(function(e){console.log(e)})];case 1:return t.sent(),[2]}})})},e.prototype.next=function(e){return o(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return i.default.collisionManager.reset(),this.currentKilled=0,e&&(this._stages=[],this.creatStages(this.level%51?this.level%51:51)),this._teams=[],this._units=[],t=this.stages[this.curStageI].stageId,this.creatTeams(t),[4,this.creatUnit(this.teams).catch(function(e){console.log(e)})];case 1:return n.sent(),[2]}})})},e}();n.default=h,cc._RF.pop()},{"../App":"App","../db/DB_Level":"DB_Level","../db/DB_Path":"DB_Path","../db/DB_Stage":"DB_Stage","../db/DB_Team":"DB_Team","../db/DB_Unit":"DB_Unit"}],GameOver:[function(e,t,n){console.log("GameOver---------------->");cc._RF.push(t,"bc25eWFHNlA4aMleTMgITp1","GameOver");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=e("../../manager/indexManager"),p=e("../component/RankItem"),f=cc._decorator,d=f.ccclass,h=f.property,g=cc.winSize,y=0,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLable=null,t.friendBtn=null,t.usersNode=null,t.item=null,t.scrollView=null,t.spaceY=15,t}return r(t,e),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return g.width<640&&(this.friendBtn.node.scale=g.width/640),s.default.compCtrl.initGameOver(this),s.default.platformManager.platform.log("play_times",{value:++y,score:s.default.gameCtrl.DB.score}),[4,s.default.platformManager.postSessionScoreAsync(s.default.gameCtrl.DB.score)];case 1:return e.sent(),u.PlatformManager.getInstance().showInterstitialAd("result"),[4,this.InitList()];case 2:return e.sent(),this.getScore(),u.PlatformManager.getInstance().sendScore(s.default.gameCtrl.DB.score,!0),[2]}})})},t.prototype.onEnable=function(){this.friendBtn.node.on("click",this.onClickFriendBtn,this),s.default.eventManager.on(l.GameUIEvent.HideHome,this.hideHome,this)},t.prototype.onDisable=function(){this.friendBtn.node.off("click",this.onClickFriendBtn,this),s.default.eventManager.off(l.GameUIEvent.HideHome,this.hideHome,this)},t.prototype.onClickFriendBtn=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return s.default.gameCtrl.gameView.reset(),[4,ig.CommonUSE.requestContext(!0,!1)];case 1:return e.sent(),this.node.active=!1,this.hideHome(),[2]}})})},t.prototype.onClickShare=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return"undefined"==typeof FBInstant?[2]:[4,s.default.platformManager.shareBestScore("championShare")];case 1:return e.sent(),[2]}})})},t.prototype.InitList=function(){return a(this,void 0,void 0,function(){var e,t,n,o;return c(this,function(r){switch(r.label){case 0:return[4,s.default.compCtrl.DB.getRankData()];case 1:for(e=r.sent(),console.log(e),t=cc.instantiate(this.item),this.usersNode.height=e.length*(t.height+this.spaceY)+this.spaceY,this.usersNode.getComponent(cc.Layout).spacingY=this.spaceY,n=0;n<e.length;n++)(o=cc.instantiate(this.item)).getComponent(p.default).setData(e[n],n+1),this.usersNode.addChild(o);return[2]}})})},t.prototype.getScore=function(){this.scoreLable.string=s.default.gameCtrl.DB.score.toString()},t.prototype.hideHome=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return s.default.eventManager.emit(l.GameUIEvent.DisAnger),s.default.gameCtrl.DB.score=0,s.default.gameCtrl.gameView.scoreLable.string=s.default.gameCtrl.DB.score.toString(),s.default.eventManager.emit(l.GameUIEvent.HideBattery),s.default.gameCtrl.gameView.circles=[],s.default.gameCtrl.gameView.levelCircleNode.removeAllChildren(),[4,s.default.gameCtrl.DB.init()];case 1:return e.sent(),[4,s.default.gameCtrl.gameView.initUnits(s.default.gameCtrl.DB.units)];case 2:return e.sent(),s.default.gameCtrl.gameView.init(),this.node.removeFromParent(),[2]}})})},t.prototype.backHome=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:console.log('返回首页====================>');return u.PlatformManager.getInstance().showInterstitialAd("back_home"),s.default.platformManager.logEvent("level_began",{level:s.default.gameCtrl.DB.level}),s.default.eventManager.emit(l.GameUIEvent.DisAnger),s.default.gameCtrl.DB.score=0,s.default.gameCtrl.gameView.scoreLable.string=s.default.gameCtrl.DB.score.toString(),s.default.gameCtrl.gameView.getHome(),s.default.eventManager.emit(l.GameUIEvent.HideBattery),s.default.gameCtrl.gameView.circles=[],s.default.gameCtrl.gameView.levelCircleNode.removeAllChildren(),[4,s.default.gameCtrl.DB.init()];case 1:return e.sent(),[4,s.default.gameCtrl.gameView.initUnits(s.default.gameCtrl.DB.units)];case 2:return e.sent(),s.default.gameCtrl.gameView.init(),this.node.removeFromParent(),[2]}})})},i([h(cc.Label)],t.prototype,"scoreLable",void 0),i([h(cc.Button)],t.prototype,"friendBtn",void 0),i([h(cc.Node)],t.prototype,"usersNode",void 0),i([h(cc.Prefab)],t.prototype,"item",void 0),i([h(cc.Node)],t.prototype,"scrollView",void 0),i([d],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant","../../manager/indexManager":"indexManager","../component/RankItem":"RankItem"}],GameSwitchorScript:[function(e,t,n){;cc._RF.push(t,"15b5b7hm2tIS6EdJOBYoq+j","GameSwitchorScript");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../App"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_gameSwitch=null,t}return r(t,e),t.prototype.onLoad=function(){this.btn_gameSwitch.node.active=!1,this.setupImage()},t.prototype.setupImage=function(){return a(this,void 0,void 0,function(){var e,t,n=this;return c(this,function(o){switch(o.label){case 0:return this.btn_gameSwitch.node.active=!1,[4,ig.CommonUSE.getRecommendGames()];case 1:return e=o.sent(),console.log("arr: ",e),e&&0!=e.length?(t=e.choice(function(e){return e.weight||0}),console.log("item.icon: ",t.icon),s.default.resManager.loadRemoteAsset(t.icon).then(function(e){n.btn_gameSwitch&&(n.btn_gameSwitch.getComponentInChildren(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))}),this.btn_gameSwitch&&(this.btn_gameSwitch.node.active=!0),this.btn_gameSwitch&&this.btn_gameSwitch.node.on("click",function(){return a(n,void 0,void 0,function(){var n=this;return c(this,function(o){switch(o.label){case 0:return[4,s.default.platformManager.switchGameAsync(t.appId)];case 1:return o.sent(),t=e.choice(function(e){return e.weight||0}),s.default.resManager.loadRemoteAsset(t.icon).then(function(e){n.btn_gameSwitch&&(n.btn_gameSwitch.getComponentInChildren(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))}),[2]}})})}),[2]):[2]}})})},i([p(cc.Button)],t.prototype,"btn_gameSwitch",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../App":"App"}],GameView:[function(e,t,n){;cc._RF.push(t,"40f29EJHc9DJq6Qe5ysUKMK","GameView");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=e("../../db/DB_Skin"),p=e("../component/Battery"),f=e("../component/Enemy"),d=e("../component/LevelCircle"),h=e("../component/Obstacle"),g=e("./Home"),y=e("./ReliveView"),m=e("./SettleAccount"),v=cc._decorator,b=v.ccclass,_=v.property,w=(cc.winSize,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg1=null,t.bg2=null,t.enemyNode=null,t.enemyPrefab=null,t.batteryNode=null,t.batteryPrefab=null,t.obstacleNode=null,t.obstaclePrefab=null,t.obstacleTip=null,t.homePrefab=null,t.relivePrefab=null,t.settleAccounts1=null,t.scoreLable=null,t.currentLevelLable=null,t.nextLevelLabel=null,t.mask=null,t.levelCircleNode=null,t.levelCirclePrefab=null,t.level=null,t.version=null,t.graphics=null,t.isEnd=!1,t.circles=[],t.lastUnit=null,t.isObstacleTipVisible=!0,t}return r(t,e),t.prototype.start=function(){},t.prototype.onLoad=function(){console.log('开始游戏============》');cc.director.getCollisionManager().enabled=!0,cc.macro.ENABLE_MULTI_TOUCH=!1,this.onEvent(),s.default.gameCtrl.init(this),s.default.compCtrl.initDB(),this.version.string=window.$game_version||"v1.0",this.getHome(),s.default.platformManager.logEvent("level_began",{level:s.default.gameCtrl.DB.level}),this.getStages(),this.getBattery(),this.circles[s.default.gameCtrl.DB.curStageI].select(),this.currentLevelLable.string=s.default.gameCtrl.DB.level.toString(),this.nextLevelLabel.string=(s.default.gameCtrl.DB.level+1).toString(),this.changePlaneSkin(),s.default.eventManager.on(l.GameEvent.SkinChanged,this.changePlaneSkin,this)},t.prototype.update=function(e){this.bg1.node.y-=100*e,this.bg2.node.y-=100*e,this.bg1.node.y<=-1136&&(this.bg1.node.y=896),this.bg2.node.y<=-1136&&(this.bg2.node.y=896)},t.prototype.onDestroy=function(){this.offEvent()},t.prototype.drawLine=function(e){console.log("drawline");var t=s.default.gameCtrl.DB.path[e].pointPos;this.graphics.strokeColor=cc.color(255,255,255,100),this.graphics.lineWidth=2,this.graphics.moveTo(t[0].start.x,t[0].start.y);for(var n=0;n<Object.keys(t).length;n++){var o=t[n];this.graphics.moveTo(o.start.x,o.start.y),t[n].control?this.graphics.quadraticCurveTo(o.control.x,o.control.y,o.end.x,o.end.y):this.graphics.bezierCurveTo(o.control1.x,o.control1.y,o.control2.x,o.control2.y,o.end.x,o.end.y)}this.graphics.stroke()},t.prototype.init=function(){this.getStages(),this.circles[s.default.gameCtrl.DB.curStageI].select(),this.currentLevelLable.string=s.default.gameCtrl.DB.level.toString(),this.nextLevelLabel.string=(s.default.gameCtrl.DB.level+1).toString()},t.prototype.initUnits=function(e){return a(this,void 0,void 0,function(){var t,n;return c(this,function(){for(console.log("init units"),t=0;t<e.length;t++)n=e[t],this.creatEnemy(n);return this.lastUnit=null,[2]})})},t.prototype.getBattery=function(){var e=this,t=cc.instantiate(this.batteryPrefab).getComponent(p.default);this.batteryNode.addChild(t.node);var n=t.node.getChildByName("BatteryNode").getChildByName("Battery");this.dbPlane=n.getComponent(dragonBones.ArmatureDisplay),t.node.on("shooting",function(){e.isObstacleTipVisible&&(e.isObstacleTipVisible=!1,cc.tween(e.obstacleTip).to(.3,{opacity:0}).call(function(){e.obstacleTip.active=!1}).start())})},t.prototype.creatEnemy=function(e){if(1==e.type)(t=cc.instantiate(s.default.gameCtrl.DB.prefab[e.prefab]).getComponent(f.default)).node.name="enemy_"+e.teamId+"_"+e.type+"_"+e.num+"_"+e.unnitId,t.node.setPosition(0,1136),t.initUnit(e),this.lastUnit&&(this.lastUnit.isLast=!1),this.lastUnit=t,this.lastUnit.isLast=!0,this.enemyNode.addChild(t.node);else if(0==e.type){var t;(t=cc.instantiate(s.default.gameCtrl.DB.prefab[e.prefab]).getComponent(h.default)).node.name="obstacle_"+e.teamId+"_"+e.type+"_"+e.num+"_"+e.unnitId;var n=t.node.getChildByName("obstacle");n&&n.getComponent(dragonBones.ArmatureDisplay).playAnimation("bomb",0),t.node.setPosition(0,1136),t.initUnit(e),t.tipNode=this.obstacleTip,this.obstacleTip.stopAllActions(),this.obstacleTip.opacity=255,this.obstacleTip.active=!0,this.isObstacleTipVisible=!0,1==s.default.gameCtrl.DB.level&&0==s.default.gameCtrl.DB.curStageI?(console.log("slowdown"),t.speedFactor=.5):t.speedFactor=1,this.obstacleNode.addChild(t.node),this.obstacleTip.parent||this.obstacleNode.addChild(this.obstacleTip),0==e.unnitId&&this.drawLine(e.path)}},t.prototype.getStages=function(){if(window.parent.h5sdk)window.parent.h5sdk.athenaSend('level_begin',s.default.gameCtrl.DB.stages[s.default.gameCtrl.DB.curStageI].stageId,'');s.default.platformManager.logEvent("stage_began",{stage:s.default.gameCtrl.DB.stages[s.default.gameCtrl.DB.curStageI].stageId});var e=s.default.gameCtrl.DB.stages.length,t=20*e+15*(e-1);this.levelCircleNode.width=t,this.levelCircleNode.height=20;for(var n=0;n<e;n++){var o=cc.instantiate(this.levelCirclePrefab).getComponent(d.default);this.levelCircleNode.addChild(o.node),o.node.setPosition(cc.v2(20*n+15*n-t/2,0)),this.circles.push(o)}this.levelCircleNode.active=this.circles.length>1},t.prototype.getHome=function(){if(s.default.compCtrl.home)s.default.compCtrl.home.node.active=!0;else{var e=cc.instantiate(this.homePrefab).getComponent(g.default);e.node.setPosition(0,0),s.default.gameCtrl.mainScene.gameNode.addChild(e.node)}},t.prototype.getRelive=function(){if(console.log("get relive"),this.level.active=!1,s.default.gameCtrl.DB.revieveTimes>=1&&s.default.platformManager.hasRewardedAd()&&s.default.gameCtrl.DB.score>=10){if(s.default.compCtrl.settleAccount&&s.default.compCtrl.settleAccount.node.active)return;s.default.compCtrl.relive?(s.default.compCtrl.relive.getGold(),s.default.compCtrl.relive.node.active=!0,s.default.compCtrl.relive.showNothanks()):((e=cc.instantiate(this.relivePrefab).getComponent(y.default)).node.setPosition(0,0),this.node.addChild(e.node)),s.default.gameCtrl.DB.revieveTimes-=1}else{var e;s.default.compCtrl.relive||((e=cc.instantiate(this.relivePrefab).getComponent(y.default)).node.setPosition(0,0),this.node.addChild(e.node)),s.default.compCtrl.relive.abandonRelive()}},t.prototype.getSettle=function(){return a(this,void 0,void 0,function(){var e,t;return c(this,function(){return s.default.compCtrl.relive&&s.default.compCtrl.relive.node.active?[2]:(s.default.compCtrl.settleAccount?(s.default.compCtrl.settleAccount.getData(),s.default.compCtrl.settleAccount.node.active=!0,e=s.default.compCtrl.randInt(30,50),s.default.compCtrl.settleAccount.coins=e,s.default.compCtrl.settleAccount.coinsLabel.string="+"+e):((t=cc.instantiate(this.settleAccounts1).getComponent(m.default)).node.setPosition(0,0),this.node.addChild(t.node)),[2])})})},t.prototype.clearEnemyNode=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return console.log("clear"),s.default.platformManager.logEvent("stage_end",{stage:s.default.gameCtrl.DB.stages[s.default.gameCtrl.DB.curStageI].stageId}),this.graphics.clear(),this.level.active=!1,this.reset(),this.isEnd=!0,s.default.gameCtrl.DB.curStageI+=1,s.default.gameCtrl.DB.stages[s.default.gameCtrl.DB.curStageI]?[4,s.default.gameCtrl.DB.next().catch(function(e){console.log(e)})]:[3,2];case 1:return e.sent(),s.default.eventManager.emit(l.GameUIEvent.NextStage),[3,4];case 2:return this.nextLevelLabel.node.color=cc.color(0,0,0,255),s.default.gameCtrl.DB.level+=1,s.default.gameCtrl.DB.curStageI=0,[4,s.default.gameCtrl.DB.next(!0).catch(function(e){console.log(e)})];case 3:e.sent(),s.default.eventManager.emit(l.GameUIEvent.NextLevel),e.label=4;case 4:return s.default.gameCtrl.DB.score>s.default.platformManager.getHighScore()&&s.default.platformManager.platform.setHighScore(s.default.gameCtrl.DB.score),[2]}})})},t.prototype.died=function(){this.graphics.clear(),s.default.gameCtrl.DB.score>s.default.platformManager.getHighScore()&&s.default.platformManager.platform.setHighScore(s.default.gameCtrl.DB.score),s.default.compCtrl.home.tip.node.opacity=0,this.mask.node.width=0,s.default.gameCtrl.DB.revieveTimes=1},t.prototype.reset=function(){this.enemyNode.removeAllChildren(),s.default.eventManager.emit(l.GameUIEvent.RecycleBullet),this.obstacleNode.removeAllChildren()},t.prototype.onEvent=function(){s.default.eventManager.on(l.GameUIEvent.KillEnemy,this.clearEnemyNode,this),s.default.eventManager.on(l.GameUIEvent.Died,this.died,this)},t.prototype.offEvent=function(){s.default.eventManager.off(l.GameUIEvent.KillEnemy,this.clearEnemyNode,this),s.default.eventManager.off(l.GameUIEvent.Died,this.died,this)},t.prototype.changePlaneSkin=function(){return a(this,void 0,void 0,function(){var e,t,n,o,r,i;return c(this,function(a){switch(a.label){case 0:return e=u.DB_Skin.getBySkinid(s.default.gameCtrl.persistance.getCurSkinid()).db_asset,t=e.substring(e.lastIndexOf("/")+1),n=e+"/"+t+"_ske",o=e+"/"+t+"_tex",r=this.dbPlane,[4,s.default.resManager.loadDragonBonesAsset(n)];case 1:return r.dragonAsset=a.sent(),i=this.dbPlane,[4,s.default.resManager.loadDragonBonesAtlasAsset(o)];case 2:return i.dragonAtlasAsset=a.sent(),this.dbPlane.armatureName="armatureName",this.dbPlane.playAnimation("standby",0),[2]}})})},t.prototype.startNextLevel=function(){console.log('下一关 =======>');console.log("startNextLevel--------------->");console.log(s.default.gameCtrl.DB.level),s.default.platformManager.logEvent("level_began",{level:s.default.gameCtrl.DB.level}),this.nextLevelLabel.node.color=cc.color(255,255,255,255),this.circles=[],this.levelCircleNode.removeAllChildren(),this.getStages();try{s.default.gameCtrl.DB.calculateAmount(s.default.gameCtrl.DB.stages)}catch(e){console.log(s.default.gameCtrl.DB.stages)}s.default.gameCtrl.DB.killedNum=0,this.mask.node.width=0,s.default.eventManager.emit(l.GameUIEvent.DisAnger),this.isEnd=!1,this.reset(),this.currentLevelLable.string=s.default.gameCtrl.DB.level.toString(),this.nextLevelLabel.string=(s.default.gameCtrl.DB.level+1).toString(),this.initUnits(s.default.gameCtrl.DB.units)},i([_(cc.Sprite)],t.prototype,"bg1",void 0),i([_(cc.Sprite)],t.prototype,"bg2",void 0),i([_(cc.Node)],t.prototype,"enemyNode",void 0),i([_(cc.Prefab)],t.prototype,"enemyPrefab",void 0),i([_(cc.Node)],t.prototype,"batteryNode",void 0),i([_(cc.Prefab)],t.prototype,"batteryPrefab",void 0),i([_(cc.Node)],t.prototype,"obstacleNode",void 0),i([_(cc.Prefab)],t.prototype,"obstaclePrefab",void 0),i([_(cc.Node)],t.prototype,"obstacleTip",void 0),i([_(cc.Prefab)],t.prototype,"homePrefab",void 0),i([_(cc.Prefab)],t.prototype,"relivePrefab",void 0),i([_(cc.Prefab)],t.prototype,"settleAccounts1",void 0),i([_(cc.Label)],t.prototype,"scoreLable",void 0),i([_(cc.Label)],t.prototype,"currentLevelLable",void 0),i([_(cc.Label)],t.prototype,"nextLevelLabel",void 0),i([_(cc.Mask)],t.prototype,"mask",void 0),i([_(cc.Node)],t.prototype,"levelCircleNode",void 0),i([_(cc.Prefab)],t.prototype,"levelCirclePrefab",void 0),i([_(cc.Node)],t.prototype,"level",void 0),i([_(cc.Label)],t.prototype,"version",void 0),i([_(cc.Graphics)],t.prototype,"graphics",void 0),i([b],t)}(cc.Component));n.default=w,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant","../../db/DB_Skin":"DB_Skin","../component/Battery":"Battery","../component/Enemy":"Enemy","../component/LevelCircle":"LevelCircle","../component/Obstacle":"Obstacle","./Home":"Home","./ReliveView":"ReliveView","./SettleAccount":"SettleAccount"}],HighestScore:[function(e,t,n){;cc._RF.push(t,"61ba1TTEMRPpLGJ4iOviFah","HighestScore");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.score=null,t.avatar=null,t.skip=null,t.gameOverPrefab=null,t}return r(t,e),t.prototype.onLoad=function(){this.score.string=s.default.gameCtrl.DB.score.toString(),this.initAvatar()},t.prototype.start=function(){var e=this;this.skip.on(cc.Node.EventType.TOUCH_START,function(){e.skip.opacity=255},this),this.skip.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.skip.opacity=127},this),this.skip.on(cc.Node.EventType.TOUCH_END,function(){return a(e,void 0,void 0,function(){return c(this,function(){return this.skip.opacity=127,this.onClickSkip(),[2]})})},this)},t.prototype.onClickShare=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return"undefined"==typeof FBInstant?[2]:[4,s.default.platformManager.shareBestScore("championShare")];case 1:return e.sent(),this.showGameOver(),this.node.removeFromParent(),[2]}})})},t.prototype.initAvatar=function(){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,s.default.resManager.loadRemoteAsset(s.default.platformManager.playerInfo.photo)];case 1:return e=t.sent(),this.avatar.spriteFrame=new cc.SpriteFrame(e),[2]}})})},t.prototype.onClickSkip=function(){console.log("showGameOver-------------->");this.showGameOver(),this.node.removeFromParent()},t.prototype.showGameOver=function(){console.log("showGameOver------------>");var e=cc.instantiate(this.gameOverPrefab);e.setPosition(0,0),s.default.gameCtrl.gameView.node.addChild(e)},i([p(cc.Label)],t.prototype,"score",void 0),i([p(cc.Sprite)],t.prototype,"avatar",void 0),i([p(cc.Node)],t.prototype,"skip",void 0),i([p(cc.Prefab)],t.prototype,"gameOverPrefab",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../App":"App"}],Home:[function(e,t,n){;cc._RF.push(t,"ba674NpGaJCzoKFwy3wL1aj","Home");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankListPrefab=null,t.skinPrefab=null,t.soundSprite=null,t.shakeSprite=null,t.sound=[],t.shake=[],t.tip=null,t.soundState=!0,t.shakeState=!0,t}return r(t,e),t.prototype.onLoad=function(){this.onEvent(),s.default.compCtrl.initHome(this),s.default.gameCtrl.playSound("sound/music_blank",!0),this.shakeSprite.node.active=!1},t.prototype.onDestroy=function(){this.offEvent()},t.prototype.getRankList=function(){return a(this,void 0,void 0,function(){var e,t=this;return c(this,function(){return e=cc.instantiate(this.rankListPrefab),s.default.gameCtrl.mainScene.uiNode.addChild(e),s.default.compCtrl.m_RankView=e,this.node.active=!1,s.default.gameCtrl.gameView.level.active=!1,s.default.eventManager.once(l.GameEvent.BackHome,function(){t.node.active=!0,s.default.gameCtrl.gameView.level.active=!0,e.removeFromParent()},this),[2]})})},t.prototype.getSkin=function(){var e=this,t=cc.instantiate(this.skinPrefab);s.default.gameCtrl.mainScene.uiNode.addChild(t),s.default.compCtrl.m_SkinView=t,this.node.active=!1,s.default.gameCtrl.gameView.level.active=!1,s.default.eventManager.once(l.GameEvent.BackHome,function(){e.node.active=!0,s.default.gameCtrl.gameView.level.active=!0,t.active=!1},this)},t.prototype.onclickSoundBtn=function(){this.soundState?this.soundSprite.spriteFrame=this.sound[1]:this.soundSprite.spriteFrame=this.sound[0],this.soundState=!this.soundState,s.default.gameCtrl.sound=!s.default.gameCtrl.sound},t.prototype.onclickShakeBtn=function(){this.shakeState?this.shakeSprite.spriteFrame=this.shake[1]:this.shakeSprite.spriteFrame=this.shake[0],this.shakeState=!this.shakeState,s.default.gameCtrl.vibration=!s.default.gameCtrl.vibration},t.prototype.showTip=function(){cc.tween(this.tip.node).to(.5,{opacity:255}).start()},t.prototype.onEvent=function(){s.default.eventManager.on(l.GameUIEvent.ShowTip,this.showTip,this)},t.prototype.offEvent=function(){s.default.eventManager.off(l.GameUIEvent.ShowTip,this.showTip,this)},i([f(cc.Prefab)],t.prototype,"rankListPrefab",void 0),i([f(cc.Prefab)],t.prototype,"skinPrefab",void 0),i([f(cc.Sprite)],t.prototype,"soundSprite",void 0),i([f(cc.Sprite)],t.prototype,"shakeSprite",void 0),i([f([cc.SpriteFrame])],t.prototype,"sound",void 0),i([f([cc.SpriteFrame])],t.prototype,"shake",void 0),i([f(cc.Sprite)],t.prototype,"tip",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant"}],Http:[function(e,t,n){;cc._RF.push(t,"da9228GsZdKVaOSieJYRJFT","Http"),Object.defineProperty(n,"__esModule",{value:!0}),n.Http=void 0;var o=function(){function e(){}return e.prototype.encodeValue=function(e,t){return t instanceof Array?this.encodeArray(e,t):encodeURIComponent(e)+"="+encodeURIComponent(t)},e.prototype.encodeArray=function(e,t){return e?0==t.length?encodeURIComponent(e)+"=":t.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):""},e.prototype.toString=function(e){if(!e)return"";var t=[];for(var n in e)t.push(this.encodeValue(n,e[n]));return t.join("&")},e.prototype.request=function(e){var t=new XMLHttpRequest;t.responseType="arraybuffer"!==e.responseType?"text":"arraybuffer",t.timeout=e.timeout||0,t.onerror=function(n){console.log("[http]["+e.method+"][error] ["+t.status+":"+t.statusText+"] "+e.url),e.onerror&&e.onerror(n)},t.onabort=function(){console.log("[http]["+e.method+"][abort] "+e.url),e.onabort&&e.onabort()},t.onprogress=function(t){t&&t.lengthComputable&&e.onprogress&&e.onprogress(t.loaded/t.total)},t.onload=function(n){var o=void 0!==t.status?t.status:200;if(200===o||204===o||0===o){var r=t.response||t.responseText;console.log("[http]["+e.method+"][loaded] "+e.url+":"+r),e.onload(r)}else console.log("[http]["+e.method+"][error] ["+t.status+":"+t.statusText+"] "+e.url),e.onerror&&e.onerror(n)};var n=this.toString(e.data),o=e.url;if("GET"==e.method&&n&&(o=e.url+"?"+n,n=null),t.open(e.method,o,!0),"POST"==e.method&&(e.rawData?(t.setRequestHeader("Content-Type","application/json"),n=JSON.stringify(e.rawData)):t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),e.headers)for(var r=0;r<e.headers.length;r++)t.setRequestHeader(e.headers[r++],e.headers[r]);return t.send(n),console.log("[http]["+e.method+"] "+e.url+":"+JSON.stringify(e.data)),t},e.prototype.post=function(e,t){var n=this;return new Promise(function(o,r){n.request({url:e,data:t,method:"POST",onload:o,onerror:r,ontimeout:r})})},e.prototype.get=function(e,t){var n=this;return new Promise(function(o,r){n.request({url:e,data:t,method:"GET",onload:o,onerror:r,ontimeout:r})})},e}();n.Http=o,cc._RF.pop()},{}],IService:[function(e,t){;cc._RF.push(t,"36ce18by3lICrmCdkO4FIUh","IService"),cc._RF.pop()},{}],JsonData:[function(e,t,n){;cc._RF.push(t,"cd9e5qsPR9C5pNv4vsb+J73","JsonData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.fromJson=function(e){e&&0!=e.length||(e="{}");var t=JSON.parse(e),n=new this;for(var o in t)n.hasOwnProperty(o)&&(n[o]=t[o]);return n},e.fromData=function(e){var t=new this;for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.prototype.copy=function(e){for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},e.prototype.assign=function(e){for(var t in this)e[t]=this[t]},e}();n.default=o,cc._RF.pop()},{}],LevelCircle:[function(e,t,n){;cc._RF.push(t,"0ed48cQFltBk7GwgLXrDRdp","LevelCircle");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=null,t.Dim=null,t}return r(t,e),t.prototype.onLoad=function(){this.light.node.active=!1},t.prototype.select=function(){this.light.node.active=!0},t.prototype.unSelect=function(){this.light.node.active=!1},i([s(cc.Sprite)],t.prototype,"light",void 0),i([s(cc.Sprite)],t.prototype,"Dim",void 0),i([c],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],LoadingView:[function(e,t,n){;cc._RF.push(t,"03dc9x9hdNLi69kLb8du1cN","LoadingView");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/BaseUI"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.busyNode=null,t}return r(t,e),t.prototype.setProgress=function(){},t.prototype.start=function(){},t.prototype.update=function(){this.busyNode.angle-=10},t.prototype.onEnter=function(t){e.prototype.onEnter.call(this,t)},i([l(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([l(cc.Node)],t.prototype,"busyNode",void 0),i([s],t)}(a.default);n.default=u,cc._RF.pop()},{"../../common/BaseUI":"BaseUI"}],LocalService:[function(e,t,n){;cc._RF.push(t,"3fc8aaHHZJC86SIxns6PxF1","LocalService");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LocalService=void 0;var i=function(){function e(){}return e.prototype.getFriendIds=function(){return o(this,void 0,Promise,function(){return r(this,function(){return[2,[]]})})},e.prototype.getData=function(e){return o(this,void 0,Promise,function(){return r(this,function(){return[2,localStorage.getItem(e)]})})},e.prototype.setData=function(e,t){return o(this,void 0,Promise,function(){return r(this,function(){return localStorage.setItem(e,JSON.stringify(t)),[2,!0]})})},e}();n.LocalService=i,cc._RF.pop()},{}],MainScene:[function(e,t,n){;cc._RF.push(t,"58c44SMgShPBrs4wlerM92q","MainScene");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../App"),c=e("../component/ShareHelper"),s=e("../view/GameView"),l=cc._decorator,u=l.ccclass,p=l.property,f=cc.winSize,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameViewPrefab=null,t.shareHelperPrefab=null,t.gameNode=null,t.uiNode=null,t}return r(t,e),t.prototype.checkConsole_=function(){var e=0,t=0;this.node.on(cc.Node.EventType.TOUCH_END,function(n){Math.abs(n.getLocationX()-f.width/2)>50||n.getLocationY()<f.height-50||(e++,clearTimeout(t),t=setTimeout(function(){e>=5&&(window.__dev_mode=!window.__dev_mode,cc.debug.setDisplayStats(window.__dev_mode)),e=0},200))},this),cc.debug.setDisplayStats(window.__dev_mode)},t.prototype.onLoad=function(){this.checkConsole_()},t.prototype.start=function(){a.default.gameCtrl.mainScene=this,this.gameNode.addChild(cc.instantiate(this.gameViewPrefab).getComponent(s.default).node),this.uiNode.addChild(cc.instantiate(this.shareHelperPrefab).getComponent(c.default).node)},i([p(cc.Prefab)],t.prototype,"gameViewPrefab",void 0),i([p(cc.Prefab)],t.prototype,"shareHelperPrefab",void 0),i([p(cc.Node)],t.prototype,"gameNode",void 0),i([p(cc.Node)],t.prototype,"uiNode",void 0),i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../App":"App","../component/ShareHelper":"ShareHelper","../view/GameView":"GameView"}],MovePath:[function(e,t,n){;cc._RF.push(t,"878cfUNGohJDJ1p0LRlrfnF","MovePath"),Object.defineProperty(n,"__esModule",{value:!0}),n.MovePath=void 0;var o=function(){function e(e){var t=this;this._curve=new tp.CurvePath,e.forEach(function(e){var n=null;e.control?n=new tp.QuadraticBezierCurve(e.start,e.control,e.end):e.control1&&(n=new tp.CubicBezierCurve(e.start,e.control1,e.control2,e.end)),t._curve.add(n)})}return Object.defineProperty(e.prototype,"curve",{get:function(){return this._curve},enumerable:!1,configurable:!0}),e.prototype.getPointAt=function(e){return this._curve.getPointAt(e)},e.prototype.getPointAtDistance=function(e){var t=e/this.getLength();return t>1&&(t=1),this._curve.getPointAt(t)},e.prototype.getLength=function(){return this._curve.getLength()},e.prototype.getCurveIndex=function(e){var t=e/this.getLength();return this._curve.getCurveIndex(t)},e}();n.MovePath=o,cc._RF.pop()},{}],Obstacle:[function(e,t,n){;cc._RF.push(t,"3a09cJ3PdxDNbI/fscVSU2A","Obstacle");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Flyer"),c=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipNode=null,t.speedFactor=1,t}return r(t,e),t.prototype.update=function(e){var t=this;if(this._isAction)if(this.tag)this._isAction=!1;else{this.isFirstLoop&&(e*=this.speedgap),this.len+=e*this.v*this.speedFactor,this.len>this.curveLen&&(this.len%=this.curveLen,this._isAction=!1,0===this._unitId?(this.isFirstLoop&&(this.isFirstLoop=!1),this._isAction=!0):this.isFirstLoop?(this.isFirstLoop=!1,setTimeout(function(){t._isAction=!0},500*this._num*this._gap*(1-1/this.speedgap)+this._delay)):this._isAction=!0),this._currentPoint=this.curve.getPointAtDistance(this.len),this.node.setPosition(this._currentPoint.x,this._currentPoint.y),this.tipNode&&this.tipNode.setPosition(this._currentPoint.x,this._currentPoint.y+30),this._lastPoint=this._currentPoint;var n=this.curve.getCurveIndex(this.len);this.pointIndex!=n&&(this.pointIndex=n,this.v=this.getSpeed(this.pointIndex)*this.speedFactor)}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.tipNode=null},i([c],t)}(a.default);n.default=s,cc._RF.pop()},{"./Flyer":"Flyer"}],PLConstant:[function(e,t,n){;cc._RF.push(t,"f973eV7w9hEja3Rk7bCSmMT","PLConstant"),Object.defineProperty(n,"__esModule",{value:!0}),n.PLConstant=void 0,function(e){e.tournament_solo_play_prompt_interval=36e5,e.tournament_create_interval=36e5}(n.PLConstant||(n.PLConstant={})),cc._RF.pop()},{}],Persistance:[function(e,t,n){;cc._RF.push(t,"29db85NH0dDG5BbOIJ5GvQk","Persistance"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../App"),r=e("../config/Constant"),i=function(){function e(){this.userData={skinsHave:[500,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cur_skin:1,coin:0}}return e.prototype.setup=function(e){for(var t in this.userData)null==e[t]&&(e[t]=this.userData[t]);this.userData=e},e.prototype.getHaveBySkinId=function(e){return this.userData.skinsHave[e-1]||0},e.prototype.increaseHaveBySkinId=function(e,t){return this.userData.skinsHave[e-1]||(this.userData.skinsHave[e-1]=0),this.userData.skinsHave[e-1]+=t,this.userData.isDirty=!0,this.userData.skinsHave[e-1]},e.prototype.getCurSkinid=function(){return this.userData.cur_skin},e.prototype.setCurSkinid=function(e){this.userData.cur_skin!==e&&(this.userData.cur_skin=e,this.userData.isDirty=!0)},e.prototype.getCoin=function(){return this.userData.coin},e.prototype.addCoin=function(e){this.userData.coin+=e,this.userData.isDirty=!0,o.default.eventManager.emit(r.GameEvent.CoinChanged)},e}();n.default=i,cc._RF.pop()},{"../App":"App","../config/Constant":"Constant"}],PlatformManager:[function(e,t,n){;cc._RF.push(t,"6a37dury7xK5qX8lmsm79xa","PlatformManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._platform=null,t.enterContext=null,t}return r(t,e),Object.defineProperty(t.prototype,"platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){return window.platform?(this._platform=window.platform,Promise.resolve()):(this._platform=ig.PlatformFactory.create(),this._platform.initialize({app_id:window.$ig_app_id,app_name:window.$ig_app_name,leaderboard_world:window.$ig_leaderboard_world,leaderboard_context:window.$ig_leaderboard_context,leaderboard_preload:!1,game_id:window.$ig_game_id,host_api:window.$ig_host_api,host_bot:window.$ig_host_bot,host_friend:"https://fb-api-new.capjoy.com",tga_id:"d94b2f82781442d6998672259cbd1cbf",version:window.$game_version}))},t.prototype.setProgress=function(e){cc.log("loading progress "+e),this._platform.setLoadingProgress(e)},t.prototype.ready=function(){return this._platform.startGame({iad_ids:["642052739790549_669370753725414"],rad_ids:["642052739790549_669370633725426"],iad_interval_sec:60,iad_delay_for_new:0,iad_delay_for_old:0,iad_delay_for_old_first_play_today:0})},t.prototype.setUp=function(e,t){return i(this,void 0,Promise,function(){return a(this,function(n){switch(n.label){case 0:return ig.CommonUSE.reportFriends(),ig.CommonUSE.watchContext(e),[4,ig.CommonUSE.checkBotAndShortCut()];case 1:return n.sent(),ig.ShareBridge.setup(t),[2]}})})},Object.defineProperty(t.prototype,"isNewPlayer",{get:function(){return this._platform.isNewPlayer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFristPlayToday",{get:function(){return this._platform.isFristPlayToday},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loginDayCount",{get:function(){return this._platform.remoteData.login_day_count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playerInfo",{get:function(){return this._platform.playerInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entryType",{get:function(){return this._platform.entry},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contextId",{get:function(){return this._platform.getContextId()},enumerable:!1,configurable:!0}),t.prototype.getUserData=function(){return this._platform.getCustomData()},t.prototype.syncUserData=function(){this._platform.syncCustomData()},t.prototype.getRemoteData=function(){return this._platform.remoteData},t.prototype.dirtyRemoteData=function(){this._platform.remoteData.isDirty=!0},t.prototype.postSessionScoreAsync=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,ig.CommonUSE.setSessionScore(e,!1).catch(function(){return console.log("setSessionScore error")})];case 1:return t.sent(),[2]}})})},t.prototype.setHightScore=function(e,t){this._platform.setHighScore(e,t)},t.prototype.getHighScore=function(){return this._platform.getHighScore()},t.prototype.getWorldLeaderboardAsync=function(){return this._platform.getAllTimeEntriesAsync()},t.prototype.getFriendsLeaderboard=function(){return this._platform.getWeeklyEntries()},t.prototype.getFriendsLeaderboardAsync=function(){return this._platform.getWeeklyEntriesAsync()},t.prototype.challengeFriend=function(e,t){return this._platform.createAsync(e,t)},t.prototype.playWithFriends=function(){console.log("playwithfriends");return ig.CommonUSE.requestContext(!0)},t.prototype.sendScore=function(e,t){return ig.ShareBridge.sendScore(e,t)},t.prototype.sendChallenge=function(e,t,n){return ig.ShareBridge.challengeShare(e,t?"update":"share",n)},t.prototype.share=function(e,t,n){return void 0===t&&(t=!1),ig.ShareBridge.normalShare(e,t?"update":"share",n)},t.prototype.choose=function(e){return this._platform.chooseAsync(e)},t.prototype.shareBestScore=function(e,t,n){return void 0===t&&(t=!1),ig.ShareBridge.championShare(e,t?"update":"share",n)},t.prototype.matchPlayer=function(e){return void 0===e&&(e="result"),ig.CommonUSE.requestContext(!1,!0)},t.prototype.hasInterstitialAd=function(){return this._platform.hasIAD()},t.prototype.showInterstitialAd=function(e){return this._platform.showIAD(e)},t.prototype.hasRewardedAd=function(){return this._platform.hasRAD()},t.prototype.showRewardedAd=function(e){return this._platform.showRAD(e)},t.prototype.isInFeedContext=function(){var e=this._platform.getTournamentInfo();return!!e&&!e.isExpired},t.prototype.logEvent=function(e,t){this._platform.log(e,t)},t.prototype.switchGameAsync=function(e){return this._platform.switchGameAsync(e)},t}(e("../common/Singleton").default);n.default=c,cc._RF.pop()},{"../common/Singleton":"Singleton"}],PreloadScene:[function(e,t,n){;cc._RF.push(t,"1fb8fIbvEBLO4vUADkyTzEF","PreloadScene");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../manager/PlatformManager"),l=e("../../common/Utils"),u=e("../../config/ConfigPreload"),p=e("../../App"),f=e("../view/LoadingView"),d=e("../component/ShareHelper"),h=e("../../config/Constant"),g=e("../../db/DB_Skin"),y=cc._decorator,m=y.ccclass,v=y.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingViewPrefab=null,t.versionLabel=null,t.busyNode=null,t.preloadCount=0,t.loadingView=null,t}return r(t,e),t.prototype.onLoad=function(){console.log("preloadscene");var e=cc.instantiate(this.loadingViewPrefab);this.node.addChild(e,-1);var t=e.getComponent(f.default);this.loadingView=t,t.show(),this.versionLabel.string=window.$game_version||"v1.0",cc.director.getCollisionManager().enabled=!0,this.initialize().then(function(){p.default.platformManager.logEvent("game_load",{step:1}),p.default.sceneManager.replaceScene(u.SceneName.Game)}).then(function(){})},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.initialize=function(){return a(this,void 0,Promise,function(){var e,t=this;return c(this,function(n){switch(n.label){case 0:return[4,(e=s.default.getInstance()).initialize()];case 1:if(window.parent.h5sdk)window.parent.h5sdk.athenaSend('loading_end','','');console.log('加载结束 ===========>');if(top.h5sdk){top.h5sdk.gameLoadingCompleted();console.log('==== gameLoadingCompleted ====')}return n.sent(),e.logEvent("game_load",{step:0}),p.default.gameCtrl.setup(),[4,Promise.all([this.loadResources(),e.ready().then(function(){return e.enterContext=e.contextId,t.setupPlatform()}),p.default.gameCtrl.DB.init(),this.preloadCurSkin()])];case 2:return n.sent(),[2]}})})},t.prototype.setupPlatform=function(){return p.default.platformManager.getWorldLeaderboardAsync(),p.default.platformManager.setUp(function(){return p.default.gameCtrl.DB.score},{onBusy:function(){},onUnbusy:function(){},onToast:function(e){return p.default.eventManager.emit(h.GameUIEvent.ShowToast,{label:e})},onCreateNormalImg:function(){return d.default.inst.showShare().then(function(){return l.default.capture(d.default.inst.node)})},onCreateChampionImg:function(e,t){return t&&-1!==t.indexOf("rank_share")?d.default.inst.showRankShare(e.head,e.score).then(function(){return l.default.capture(d.default.inst.node)}):d.default.inst.showChampion(e.head,e.score).then(function(){return l.default.capture(d.default.inst.node)})},onCreateChallengeImg:function(e){return d.default.inst.showChallenge(e.score,e.head).then(function(){return l.default.capture(d.default.inst.node)})},onCreateChallengeResultImg:function(e,t){return d.default.inst.showResult(e.score,e.head,t.score,t.head).then(function(){return l.default.capture(d.default.inst.node)})}})},t.prototype.addPreloadProgress=function(e){var t=100-this.preloadCount,n=e||.5*t+l.default.randomRange(-.05,.05)*t;this.preloadCount+=n,p.default.platformManager.setProgress(this.preloadCount),this.loadingView.setProgress(this.preloadCount/100)},t.prototype.loadAudio=function(){return p.default.resManager.loadArr([u.AudioResourceUrl.Click,u.AudioResourceUrl.Enemy_explode,u.AudioResourceUrl.Fly,u.AudioResourceUrl.Obstacle_explode,u.AudioResourceUrl.Shot,u.AudioResourceUrl.Stage_complete])},t.prototype.loatJson=function(){return null},t.prototype.loadUI=function(){return null},t.prototype.preloadResources=function(){return p.default.resManager,Promise.all([])},t.prototype.loadResources=function(){var e=this,t=p.default.resManager;return Promise.all([t.loadAll("ui").then(function(){e.loadingView.setProgress(1)})])},t.prototype.preloadCurSkin=function(){return a(this,void 0,void 0,function(){var e,t,n,o;return c(this,function(r){switch(r.label){case 0:return e=g.DB_Skin.getBySkinid(p.default.gameCtrl.persistance.getCurSkinid()).db_asset,t=e.substring(e.lastIndexOf("/")+1),n=e+"/"+t+"_ske",o=e+"/"+t+"_tex",[4,Promise.all([p.default.resManager.loadDragonBonesAsset(n),p.default.resManager.loadDragonBonesAtlasAsset(o)])];case 1:return r.sent(),[2]}})})},i([v(cc.Prefab)],t.prototype,"loadingViewPrefab",void 0),i([v(cc.Label)],t.prototype,"versionLabel",void 0),i([v(cc.Node)],t.prototype,"busyNode",void 0),i([m],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../App":"App","../../common/Utils":"Utils","../../config/ConfigPreload":"ConfigPreload","../../config/Constant":"Constant","../../db/DB_Skin":"DB_Skin","../../manager/PlatformManager":"PlatformManager","../component/ShareHelper":"ShareHelper","../view/LoadingView":"LoadingView"}],RankItem:[function(e,t,n){;cc._RF.push(t,"fc42af/ylxM+LuWH+sk+OzX","RankItem");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankSprite=null,t.rankLabel=null,t.medal=[],t.avatarSprite=null,t.nameLabel=null,t.scoreLabel=null,t.btnSprite=null,t.btn=[],t}return r(t,e),t.prototype.setData=function(e,t){var n=this;this._data=e,this.btnSprite.spriteFrame=e.id===s.default.platformManager.playerInfo.id?this.btn[1]:this.btn[0],this.rankSprite.node.active=t<=3,this.rankLabel.node.active=t>3,this.rankSprite.spriteFrame=this.medal[t-1],this.rankLabel.string=t+"","undefined"!=typeof FBInstant&&cc.loader.load(e.photo,function(e,t){n.avatarSprite.spriteFrame=new cc.SpriteFrame(t)}),this.nameLabel.string=e.name,this.scoreLabel.string=e.score+""},t.prototype.OnClickPlayButton=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this._data.id!=s.default.platformManager.playerInfo.id?[3,2]:[4,s.default.platformManager.share("rank_share")];case 1:return e.sent(),[3,4];case 2:return[4,s.default.platformManager.challengeFriend(this._data.id,"rank_create")];case 3:e.sent()&&s.default.platformManager.share("common_share",!0),s.default.eventManager.emit(l.GameUIEvent.HideHome),e.label=4;case 4:return[2]}})})},i([f(cc.Sprite)],t.prototype,"rankSprite",void 0),i([f(cc.Label)],t.prototype,"rankLabel",void 0),i([f([cc.SpriteFrame])],t.prototype,"medal",void 0),i([f(cc.Sprite)],t.prototype,"avatarSprite",void 0),i([f(cc.Label)],t.prototype,"nameLabel",void 0),i([f(cc.Label)],t.prototype,"scoreLabel",void 0),i([f(cc.Sprite)],t.prototype,"btnSprite",void 0),i([f([cc.SpriteFrame])],t.prototype,"btn",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant"}],RankList:[function(e,t,n){;cc._RF.push(t,"5a638V2MrJJQ5pka+yn0Png","RankList");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=e("../component/RankItem"),p=cc._decorator,f=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.championAvatar=null,t.championName=null,t.usersNode=null,t.item=null,t.scrollView=null,t.spaceY=15,t}return r(t,e),t.prototype.start=function(){s.default.eventManager.on(l.GameUIEvent.HideHome,this.hideHome,this)},t.prototype.onLoad=function(){this.InitList()},t.prototype.onDisable=function(){s.default.eventManager.off(l.GameUIEvent.HideHome,this.hideHome,this)},t.prototype.InitList=function(){return a(this,void 0,void 0,function(){var e,t,n,o,r;return c(this,function(i){switch(i.label){case 0:return[4,s.default.compCtrl.DB.getRankData()];case 1:for(e=i.sent(),console.log(e),t=cc.instantiate(this.item),this.usersNode.height=e.length*(t.height+this.spaceY),this.usersNode.getComponent(cc.Layout).spacingY=this.spaceY,n=0;n<e.length;n++)(o=cc.instantiate(this.item)).getComponent(u.default).setData(e[n],n+1),this.usersNode.addChild(o);return r=e[0],this.updateChampion(r),[2]}})})},t.prototype.shareWithFriend=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return e?[3,1]:(s.default.platformManager.share("common_share",!1),[3,3]);case 1:return[4,s.default.platformManager.challengeFriend(e,"rank_create")];case 2:t.sent()&&s.default.platformManager.share("common_share",!0),t.label=3;case 3:return[2]}})})},t.prototype.OnClickShare=function(){return a(this,void 0,void 0,function(){return c(this,function(){return this.shareWithFriend(),[2]})})},t.prototype.hideHome=function(){this.node.removeFromParent(),s.default.compCtrl.home.node.active=!1,s.default.gameCtrl.gameView.level.active=!0},t.prototype.backHome=function(){s.default.eventManager.emit(l.GameEvent.BackHome)},t.prototype.updateChampion=function(e){return a(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return this.championName.string=e.name,"undefined"==typeof FBInstant?[3,2]:[4,s.default.resManager.loadRemoteAsset(e.photo)];case 1:t=n.sent(),this.championAvatar.spriteFrame=new cc.SpriteFrame(t),n.label=2;case 2:return[2]}})})},i([d(cc.Sprite)],t.prototype,"championAvatar",void 0),i([d(cc.Label)],t.prototype,"championName",void 0),i([d(cc.Node)],t.prototype,"usersNode",void 0),i([d(cc.Prefab)],t.prototype,"item",void 0),i([d(cc.Node)],t.prototype,"scrollView",void 0),i([f],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant","../component/RankItem":"RankItem"}],ReliveView:[function(e,t,n){;cc._RF.push(t,"02287anOOVBz70vepFEhtNS","ReliveView");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.relifeProgress=null,t.nothanksBtn=null,t.nothanksLabel=null,t.gold=null,t.highestScore=null,t.gameOver=null,t.progressTag=!1,t.timer=0,t.timeout=null,t.adTag=!1,t}return r(t,e),t.prototype.onLoad=function(){s.default.compCtrl.initRelive(this),this.gold.string=s.default.gameCtrl.persistance.getCoin().toString(),this.showNothanks()},t.prototype.start=function(){var e=this;this.nothanksBtn.node.on(cc.Node.EventType.TOUCH_START,function(){e.nothanksLabel.node.opacity=255},this),this.nothanksBtn.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.nothanksLabel.node.opacity=128},this),this.nothanksBtn.node.on(cc.Node.EventType.TOUCH_END,function(){return a(e,void 0,void 0,function(){return c(this,function(){return this.nothanksLabel.node.opacity=128,this.abandonRelive(),[2]})})},this)},t.prototype.update=function(e){},t.prototype.abandonRelive=function(){console.log("abandonRelive");this.timer=0,this.getGameOverOrHighestScore(),this.node.active=!1,this.progressTag=!1,this.nothanksBtn.node.active=!1,this.relifeProgress.progress=0,s.default.eventManager.emit(l.GameUIEvent.Died),s.default.gameCtrl.gameView.isEnd=!0,s.default.gameCtrl.gameView.reset()},t.prototype.getGold=function(){this.gold.string=s.default.gameCtrl.persistance.getCoin().toString()},t.prototype.showNothanks=function(){var e=this;this.timeout=setTimeout(function(){e.nothanksBtn.node.active=!0})},t.prototype.revive=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:console.log("111111111111");return s.default.platformManager.hasRewardedAd()?(this.adTag=!0,[4,s.default.platformManager.showRewardedAd("Revive")]):(s.default.compCtrl.toast("Ad is not ready!"),[2]);case 1:console.log("======ad======");top.h5_sdk.showAd('Reward',()=>{e.sent(),s.default.gameCtrl.gameView.startNextLevel(),this.node.active=!1},()=>{showRewardFail()})}})})},t.prototype.getGameOverOrHighestScore=function(){console.log("getGameOverOrHighestScore");if(s.default.gameCtrl.DB.score>=30&&s.default.gameCtrl.DB.score>=s.default.platformManager.getHighScore()){var e=cc.instantiate(this.highestScore);e.setPosition(0,0),s.default.gameCtrl.gameView.node.addChild(e)}else{var t=cc.instantiate(this.gameOver);t.setPosition(0,0),s.default.gameCtrl.gameView.node.addChild(t)}},i([f(cc.ProgressBar)],t.prototype,"relifeProgress",void 0),i([f(cc.Button)],t.prototype,"nothanksBtn",void 0),i([f(cc.Label)],t.prototype,"nothanksLabel",void 0),i([f(cc.Label)],t.prototype,"gold",void 0),i([f(cc.Prefab)],t.prototype,"highestScore",void 0),i([f(cc.Prefab)],t.prototype,"gameOver",void 0),i([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant"}],RemoteService:[function(e,t,n){;cc._RF.push(t,"95eadJsAmtOHa2HiBkWfkjj","RemoteService");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteService=void 0;var i=function(){function e(){}return e.prototype.getFriendIds=function(){return o(this,void 0,Promise,function(){return r(this,function(){return[2,[]]})})},e.prototype.getData=function(e){return o(this,void 0,Promise,function(){return r(this,function(t){switch(t.label){case 0:return[4,FBInstant.player.getDataAsync([e]).then(function(t){return t[e]||""})];case 1:return[2,t.sent()]}})})},e.prototype.setData=function(e,t){return o(this,void 0,Promise,function(){var n;return r(this,function(o){switch(o.label){case 0:return(n={})[e]=JSON.stringify(t),[4,FBInstant.player.setDataAsync(n)];case 1:return o.sent(),[2,!0]}})})},e}();n.RemoteService=i,cc._RF.pop()},{}],ResManager:[function(e,t,n){;cc._RF.push(t,"2352eyydIpDQ4exffqnneqe","ResManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabMap={},t.spriteFrameMap={},t.spriteAtlasMap={},t.tiledMapAssetMap={},t.dragonBonesAssetMap={},t.texture2DAssetMap={},t.jsonAssetMap={},t.audioClipAssetMap={},t.remoteAssetMap={},t}return r(t,e),t.prototype.load=function(e,t,n){var o=this;return cc.loader.load,new Promise(function(r,i){cc.loader.loadRes(e,t,n,function(t,n){n?(o.cacheToResMap(n,e),r(n)):i()})})},t.prototype.loadArr=function(e,t){var n=this;return new Promise(function(o,r){cc.loader.loadResArray(e,t,function(t,i){if(t)r();else{for(var a=0;a<i.length;a++){var c=i[a],s=e[a];n.cacheToResMap(c,s)}o(i)}})})},t.prototype.loadAll=function(e,t){var n=this;return new Promise(function(o,r){cc.loader.loadResDir(e,t,function(e,t,i){if(e)r();else{for(var a=0;a<t.length;++a){var c=t[a],s=i[a];n.cacheToResMap(c,s)}o(t)}})})},t.prototype.loadAllWithType=function(e,t,n){var o=this;return new Promise(function(r,i){cc.loader.loadResDir(e,t,n,function(e,t,n){if(e)i();else{if(t.length>0)for(var a=0;a<t.length;a++){var c=t[a],s=n[a];o.cacheToResMap(c,s)}r(t)}})})},t.prototype.cacheToResMap=function(e,t){switch(e.constructor){case cc.Prefab:this.prefabMap[t]=e;break;case cc.SpriteFrame:this.spriteFrameMap[t]=e;break;case cc.SpriteAtlas:this.spriteAtlasMap[t]=e;break;case cc.TiledMapAsset:this.tiledMapAssetMap[t]=e;break;case cc.Texture2D:this.texture2DAssetMap[t]=e;break;case dragonBones.DragonBonesAsset:(this.dragonBonesAssetMap[t]||(this.dragonBonesAssetMap[t]={})).dragonAsset=e;break;case dragonBones.DragonBonesAtlasAsset:(this.dragonBonesAssetMap[t]||(this.dragonBonesAssetMap[t]={})).dragonAtlasAsset=e;break;case cc.JsonAsset:this.jsonAssetMap[t]=e;break;case cc.AudioClip:this.audioClipAssetMap[t]=e}},t.prototype.loadPrefab=function(e,t){return Promise.resolve(this.prefabMap[e]||this.load(e,cc.Prefab,t))},t.prototype.loadSpriteFrame=function(e,t){return Promise.resolve(this.spriteFrameMap[e]||this.load(e,cc.SpriteFrame,t))},t.prototype.loadSpriteAtlas=function(e,t){return Promise.resolve(this.spriteAtlasMap[e]||this.load(e,cc.SpriteAtlas,t))},t.prototype.loadTiledMapAsset=function(e,t){return Promise.resolve(this.tiledMapAssetMap[e]||this.load(e,cc.TiledMapAsset,t))},t.prototype.loadDragonBonesAsset=function(e,t){return Promise.resolve(this.dragonBonesAssetMap[e]&&this.dragonBonesAssetMap[e].dragonAsset||this.load(e,dragonBones.DragonBonesAsset,t))},t.prototype.loadDragonBonesAtlasAsset=function(e,t){return Promise.resolve(this.dragonBonesAssetMap[e]&&this.dragonBonesAssetMap[e].dragonAtlasAsset||this.load(e,dragonBones.DragonBonesAtlasAsset,t))},t.prototype.loadTexture2DAsset=function(e,t){return Promise.resolve(this.texture2DAssetMap[e]||this.load(e,cc.Texture2D,t))},t.prototype.loadJsonAsset=function(e,t){return Promise.resolve(this.jsonAssetMap[e]||this.load(e,cc.JsonAsset,t))},t.prototype.loadAudioClipAsset=function(e,t){return Promise.resolve(this.audioClipAssetMap[e]||this.load(e,cc.AudioClip,t))},t.prototype.loadCharacterPack=function(e){return Promise.all([this.loadSpriteFrame("character/"+e+"/"+e+"_tex"),this.loadDragonBonesAsset("character/"+e+"/"+e+"_ske"),this.loadDragonBonesAtlasAsset("character/"+e+"/"+e+"_tex")])},t.prototype.loadGunPack=function(e){return Promise.all([this.loadSpriteFrame("gun/"+e+"/"+e+"_tex"),this.loadDragonBonesAsset("gun/"+e+"/"+e+"_ske"),this.loadDragonBonesAtlasAsset("gun/"+e+"/"+e+"_tex")])},t.prototype.loadRemoteAsset=function(e){var t=this;return new Promise(function(n,o){var r=t.remoteAssetMap[e];r?n(r):cc.loader.load(e,function(i,a){i?o(i):(t.remoteAssetMap[e]=r,n(a))})})},t}(e("../common/Singleton").default);n.default=i,cc._RF.pop()},{"../common/Singleton":"Singleton"}],SceneManager:[function(e,t,n){;cc._RF.push(t,"55c104E7D9HVIBMmgQB0Vnn","SceneManager");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("../common/Singleton"),a=e("../config/ConfigPreload"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentSceneName=a.SceneName.Preload,t.busy=!1,t}return r(t,e),t.prototype.restartScene=function(){var e=this;return this.busy?Promise.resolve(cc.director.getScene()):(this.busy=!0,new Promise(function(t){cc.director.loadScene(e.currentSceneName,function(){e.busy=!1,t(cc.director.getScene()),cc.sys.garbageCollect()})}))},t.prototype.replaceScene=function(e){var t=this;if(!this.busy)return this.busy=!0,new Promise(function(n,o){t.currentSceneName!=e?(t.currentSceneName=e,cc.director.loadScene(e,function(){cc.log("Enter Scene "+e),t.busy=!1,n(cc.director.getScene()),cc.sys.garbageCollect()})||(t.busy=!1,o())):(t.busy=!1,n(cc.director.getScene()))});Promise.resolve(cc.director.getScene())},t.prototype.preloadScene=function(e,t){return new Promise(function(n,o){cc.director.preloadScene(e,t,function(e,t){t?n():o()})}).then(function(){return cc.log(e+" Scene preload complete")})},t}(i.default);n.default=c,cc._RF.pop()},{"../common/Singleton":"Singleton","../config/ConfigPreload":"ConfigPreload"}],ServiceFactroy:[function(e,t,n){;cc._RF.push(t,"bd788teOShBAbBVW9conWig","ServiceFactroy"),Object.defineProperty(n,"__esModule",{value:!0}),n.ServiceFactroy=void 0;var o,r=e("./RemoteService"),i=e("./LocalService"),a=function(){function e(){}return e.getService=function(){return o||(o=window.FBInstant?new r.RemoteService:new i.LocalService),o},e}();n.ServiceFactroy=a,cc._RF.pop()},{"./LocalService":"LocalService","./RemoteService":"RemoteService"}],SettleAccount:[function(e,t,n){;cc._RF.push(t,"5340eRRNR9EeqETfs/EP9kc","SettleAccount");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../manager/indexManager"),u=cc._decorator,p=u.ccclass,f=u.property,d=cc.winSize,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=null,t.gold=null,t.score=null,t.bestScore=null,t.claimBtn=null,t.nextBtn=null,t.box=null,t.playwithfriendsBtn=null,t.coinpre=null,t.coinNode=null,t.coinsLabel=null,t.coins=30,t.isFirst=!0,t}return r(t,e),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return c(this,function(){return d.width<640&&(this.box.scale=d.width/640,this.playwithfriendsBtn.node.scale=d.width/640),s.default.compCtrl.initSettleAccount(this),this.getData(),this.coins=s.default.compCtrl.randInt(30,50),this.coinsLabel.string="+"+this.coins,[2]})})},t.prototype.getHome=function(){this.node.active=!1},t.prototype.getData=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return s.default.gameCtrl.DB.coin=s.default.gameCtrl.persistance.getCoin(),this.level.string="LEVEL "+(s.default.gameCtrl.DB.level-1),this.gold.string=s.default.gameCtrl.persistance.getCoin().toString(),this.score.string=s.default.gameCtrl.DB.score.toString(),this.bestScore.string="BEST: "+s.default.platformManager.platform.getHighScore(),this.isFirst?(this.isFirst=!1,[4,s.default.platformManager.postSessionScoreAsync(s.default.gameCtrl.DB.score)]):[3,2];case 1:e.sent(),e.label=2;case 2:return l.PlatformManager.getInstance().showInterstitialAd("pass"),[2]}})})},t.prototype.next=function(){console.log('下一关 =============>');if(window.parent.h5sdk)window.parent.h5sdk.athenaSend('level_next','','');return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.nextBtn.node.getComponent(cc.Button).interactable=!1,[4,s.default.compCtrl.playCoinAnim(this,this.coins,cc.v2(d.width/2,d.height/2),this.coinpre,this.coinNode)];case 1:return e.sent(),s.default.gameCtrl.persistance.addCoin(this.coins),s.default.gameCtrl.gameView.startNextLevel(),this.node.active=!1,this.nextBtn.node.getComponent(cc.Button).interactable=!0,[2]}})})},t.prototype.claimx2=function(){console.error('33333333333333');console.info('444444444444');return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:case 1:case 2:console.log('======ad======');top.h5_sdk.showAd('Reward',()=>{e.sent(),s.default.gameCtrl.persistance.addCoin(2*this.coins),s.default.gameCtrl.gameView.startNextLevel(),this.node.active=!1},()=>{showRewardFail()});e.label=3;case 3:return[2]}})})},t.prototype.playwithfriends=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:console.log("11111111111");return[4,ig.CommonUSE.requestContext(!0,!1)];case 1:console.log("22222222222");return e.sent(),this.nextBtn.node.getComponent(cc.Button).interactable=!1,s.default.gameCtrl.gameView.startNextLevel(),this.node.active=!1,this.nextBtn.node.getComponent(cc.Button).interactable=!0,[2]}})})},t.prototype.addCoin=function(){for(var e=1;e<=30;e++)this.gold.string=(s.default.gameCtrl.persistance.getCoin()+e).toString()},i([f(cc.Label)],t.prototype,"level",void 0),i([f(cc.Label)],t.prototype,"gold",void 0),i([f(cc.Label)],t.prototype,"score",void 0),i([f(cc.Label)],t.prototype,"bestScore",void 0),i([f(cc.Button)],t.prototype,"claimBtn",void 0),i([f(cc.Button)],t.prototype,"nextBtn",void 0),i([f(cc.Node)],t.prototype,"box",void 0),i([f(cc.Button)],t.prototype,"playwithfriendsBtn",void 0),i([f(cc.Prefab)],t.prototype,"coinpre",void 0),i([f(cc.Node)],t.prototype,"coinNode",void 0),i([f(cc.Label)],t.prototype,"coinsLabel",void 0),i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../App":"App","../../manager/indexManager":"indexManager"}],ShareHelper:[function(e,t,n){;cc._RF.push(t,"ca00fhDfz5INpe3C2W8kzRu","ShareHelper");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../App"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftAvatar=null,t.rightAvatar=null,t.challengeNode=null,t.challengeAvatar=null,t.challengeScoreLabel=null,t.resultNode=null,t.resultLeftScoreLabel=null,t.resultRightScoreLabel=null,t.resultLeftWinnerNode=null,t.resultRightWinnerNode=null,t.shareNode=null,t.championNode=null,t.championAvatar=null,t.championScoreLabel=null,t.rankShareNode=null,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n.inst=this},t.prototype.start=function(){},t.prototype.showChallenge=function(e,t){var n=this;return this.challengeNode.active=!0,this.championNode.active=this.shareNode.active=this.resultNode.active=!1,this.challengeScoreLabel.string=e.toString(),a.default.resManager.loadRemoteAsset(t).then(function(e){n.challengeAvatar.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.challengeAvatar.spriteFrame=new cc.SpriteFrame(e)})},t.prototype.showResult=function(e,t,n,o){var r=this;this.resultNode.active=!0,this.championNode.active=this.shareNode.active=this.challengeNode.active=!1,this.resultLeftScoreLabel.string=e.toString(),this.resultRightScoreLabel.string=n.toString();var i=e>=n;return this.resultLeftWinnerNode.active=i,this.resultRightWinnerNode.active=!i,Promise.all([a.default.resManager.loadRemoteAsset(t).then(function(e){r.leftAvatar.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.leftAvatar.spriteFrame=new cc.SpriteFrame(e)}),a.default.resManager.loadRemoteAsset(o).then(function(e){r.rightAvatar.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.rightAvatar.spriteFrame=new cc.SpriteFrame(e)})])},t.prototype.showShare=function(){return this.shareNode.active=!0,this.championNode.active=this.resultNode.active=this.challengeNode.active=!1,Promise.resolve()},t.prototype.showChampion=function(e,t){var n=this;return this.championNode.active=!0,this.shareNode.active=this.resultNode.active=this.challengeNode.active=!1,this.championScoreLabel.string=t.toString(),a.default.resManager.loadRemoteAsset(e).then(function(e){n.championAvatar.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.championAvatar.spriteFrame=new cc.SpriteFrame(e)})},t.prototype.showRankShare=function(){return this.rankShareNode.active=!0,Promise.resolve()},t.prototype.onDestroy=function(){n.inst=null},t.inst=null,i([l(cc.Sprite)],t.prototype,"leftAvatar",void 0),i([l(cc.Sprite)],t.prototype,"rightAvatar",void 0),i([l(cc.Node)],t.prototype,"challengeNode",void 0),i([l(cc.Sprite)],t.prototype,"challengeAvatar",void 0),i([l(cc.Label)],t.prototype,"challengeScoreLabel",void 0),i([l(cc.Node)],t.prototype,"resultNode",void 0),i([l(cc.Label)],t.prototype,"resultLeftScoreLabel",void 0),i([l(cc.Label)],t.prototype,"resultRightScoreLabel",void 0),i([l(cc.Node)],t.prototype,"resultLeftWinnerNode",void 0),i([l(cc.Node)],t.prototype,"resultRightWinnerNode",void 0),i([l(cc.Node)],t.prototype,"shareNode",void 0),i([l(cc.Node)],t.prototype,"championNode",void 0),i([l(cc.Sprite)],t.prototype,"championAvatar",void 0),i([l(cc.Label)],t.prototype,"championScoreLabel",void 0),i([l(cc.Node)],t.prototype,"rankShareNode",void 0),n=i([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../App":"App"}],Singleton:[function(e,t,n){;cc._RF.push(t,"2680bkNI8NN9pEpoJ6ekw/Z","Singleton"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new this),this.instance},e}();n.default=o,cc._RF.pop()},{}],SkinItem:[function(e,t,n){;cc._RF.push(t,"ea33dzncmFKfoIBLBc67ufQ","SkinItem");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateSprite=null,t.stateFrame=[],t.planeSprite=null,t.border=null,t.shadow=null,t._state=!1,t.m_skin=null,t}return r(t,e),Object.defineProperty(t.prototype,"skin",{get:function(){return this.m_skin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnable=function(){this.node.on("click",this.onItemClick,this)},t.prototype.onDisable=function(){this.node.on("click",this.onItemClick,this)},t.prototype.setData=function(e){return a(this,void 0,void 0,function(){var t,n;return c(this,function(o){switch(o.label){case 0:return t=s.default.gameCtrl.persistance,this._data=e,n=this.planeSprite,[4,s.default.resManager.loadSpriteFrame(e.icon)];case 1:return n.spriteFrame=o.sent(),this.shadow.fillRange=1-t.getHaveBySkinId(e.skinid)/e.cost,t.getCurSkinid()===e.skinid?(this.stateSprite.node.active=!0,this.stateSprite.spriteFrame=this.stateFrame[0],this.border.node.active=!0,this.host.preSelectedItem=this):t.getHaveBySkinId(e.skinid)<e.cost&&(this.stateSprite.node.active=!0,this.stateSprite.spriteFrame=this.stateFrame[1]),[2]}})})},t.prototype.onItemClick=function(){this.host.updateSelectedSkin(this)},i([p(cc.Sprite)],t.prototype,"stateSprite",void 0),i([p([cc.SpriteFrame])],t.prototype,"stateFrame",void 0),i([p(cc.Sprite)],t.prototype,"planeSprite",void 0),i([p(cc.Sprite)],t.prototype,"border",void 0),i([p(cc.Sprite)],t.prototype,"shadow",void 0),i([u],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../App":"App"}],SkinView:[function(e,t,n){;cc._RF.push(t,"91430e2wkRJmIJthJQpip0W","SkinView");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(t){i(t)}}function c(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../App"),l=e("../../config/Constant"),u=e("../../db/DB_Skin"),p=e("../component/SkinItem"),f=cc._decorator,d=f.ccclass,h=f.property,g=cc.winSize,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.plane=null,t.gold=null,t.skinBox=null,t.skinPrefab=null,t.videoBtn=null,t.buyBtn=null,t.topBox=null,t.pageViewNode=null,t.pageIndicatorToggleContainer=null,t.btn_ads=null,t.btn_coin=null,t.btn_play=null,t.coinpre=null,t.coinNode=null,t.skinItemWidth=160,t.skinItemHeight=160,t}return r(t,e),t.prototype.onLoad=function(){g.width<640&&this.pageViewNode.setScale(g.width/640),this.pageViewNode.getComponent(cc.Widget).updateAlignment(),this.gold.string=s.default.gameCtrl.persistance.getCoin().toString(),this.initSkins(),this.showPlaneAnimation(s.default.gameCtrl.persistance.getCurSkinid())},t.prototype.onEnable=function(){this.pageViewNode.on("page-turning",this.onPageViewTurning,this),this.btn_coin.node.on("click",this.onBtnCoinClick,this),this.btn_ads.node.on("click",this.onBtnAdsClick,this),this.btn_play.node.on("click",this.onBtnPlayClick,this),s.default.eventManager.on(l.GameEvent.CoinChanged,this.updateCoinLabel,this)},t.prototype.onDisable=function(){this.pageViewNode.off("page-turning",this.onPageViewTurning,this),this.btn_coin.node.off("click",this.onBtnCoinClick,this),this.btn_ads.node.off("click",this.onBtnAdsClick,this),this.btn_play.node.off("click",this.onBtnPlayClick,this)},t.prototype.initSkins=function(){for(var e=this,t=u.DB_Skin.getall(),n=[],o=0;o<Math.ceil(t.length/9);o++){var r=new cc.Node;this.skinBox.addChild(r),r.width=this.pageViewNode.width,r.height=this.pageViewNode.height;var i=r.addComponent(cc.Layout);i.type=cc.Layout.Type.GRID,i.spacingX=Math.floor((this.pageViewNode.width-3*this.skinItemWidth)/3),i.paddingLeft=i.paddingRight=.5*i.spacingX,i.spacingY=(this.pageViewNode.height-3*this.skinItemHeight)/2,n.push(r)}for(this.skinBox.width=this.skinBox.childrenCount*this.pageViewNode.width,o=0;o<t.length;o++){var a=cc.instantiate(this.skinPrefab),c=a.getComponent(p.default);c.setData(t[o]),c.host=this,n[Math.floor(o/9)].addChild(a)}this.scheduleOnce(function(){if(s.default.gameCtrl.persistance.getCurSkinid()){var t=0===u.DB_Skin.getBySkinid(s.default.gameCtrl.persistance.getCurSkinid()).type?0:1;e.pageViewNode.getComponent(cc.PageView).setCurrentPageIndex(t)}else e.pageViewNode.getComponent(cc.PageView).setCurrentPageIndex(0)},.05)},t.prototype.updateSelectedSkin=function(e){return a(this,void 0,void 0,function(){return c(this,function(){return this._skinItem=e,this.showPlaneAnimation(e._data.skinid),this.preSelectedItem&&(this.preSelectedItem.border.node.active=!1),e.border.node.active=!0,this.preSelectedItem=e,this.updateBottomBtns(),[2]})})},t.prototype.updateBottomBtns=function(){var e=this._skinItem._data,t=s.default.gameCtrl.persistance,n=this.btn_ads.node.getChildByName("Background");if(t.getHaveBySkinId(e.skinid)>=e.cost)this.btn_ads.node.active=this.btn_coin.node.active=!1,this.btn_play.node.active=!0;else if(1===e.type){this.btn_ads.node.active=!0,n.getChildByName("adSkin").active=!0,n.getChildByName("adCoin").active=!1;var o=t.getHaveBySkinId(e.skinid),r=u.DB_Skin.getBySkinid(e.skinid).cost;n.getChildByName("adSkin").getComponentInChildren(cc.Label).string=o+"/"+r,this.btn_play.node.active=this.btn_coin.node.active=!1}else this.btn_ads.node.active=this.btn_coin.node.active=!0,n.getChildByName("adSkin").active=!1,n.getChildByName("adCoin").active=!0,this.btn_play.node.active=!1;this.btn_coin.node.getComponentInChildren(cc.Label).string=e.cost+""},t.prototype.onBtnAdsClick=function(){console.log('点广告 ==========>');if(window.parent.h5sdk)window.parent.h5sdk.athenaSend('reward_click','add_glod_50','');return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:case 1:case 2:console.log('======ad======');top.h5_sdk.showAd('Reward',()=>{return t.sent(),s.default.gameCtrl.persistance.addCoin(50),[3,4]},()=>{showRewardFail()});case 3:case 4:return[2]}})})},t.prototype.onBtnPlayClick=function(){console.error('11111111111111');this._skinItem&&this._skinItem._data.skinid!==s.default.gameCtrl.persistance.getCurSkinid()&&(s.default.gameCtrl.persistance.setCurSkinid(this._skinItem._data.skinid),s.default.eventManager.emit(l.GameEvent.SkinChanged)),this.node.removeFromParent(),s.default.compCtrl.home.node.active=!1,s.default.gameCtrl.gameView.level.active=!0},t.prototype.onBtnCoinClick=function(){console.error('0000000000000');var e=this._skinItem._data;if(this._skinItem)if(s.default.gameCtrl.persistance.getCoin()<e.cost)s.default.compCtrl.toast("Not enough coin!");else{s.default.gameCtrl.persistance.addCoin(-e.cost);var t=0===e.type?e.cost:1;s.default.gameCtrl.persistance.increaseHaveBySkinId(e.skinid,t),s.default.eventManager.emit(l.GameEvent.CoinChanged),s.default.gameCtrl.persistance.getHaveBySkinId(e.skinid)>=e.cost?(this._skinItem.shadow.fillRange=0,this._skinItem.stateSprite.node.active=!1):(this._skinItem.shadow.fillRange=1-s.default.gameCtrl.persistance.getHaveBySkinId(e.skinid)/e.cost,this._skinItem.stateSprite.node.active=!0,this._skinItem.stateSprite.spriteFrame=this._skinItem.stateFrame[1]),this.updateBottomBtns()}},t.prototype.backHome=function(){s.default.eventManager.emit(l.GameEvent.BackHome)},t.prototype.onPageViewTurning=function(){var e=this.pageViewNode.getComponent(cc.PageView).getCurrentPageIndex();this.pageIndicatorToggleContainer.toggleItems[e].isChecked=!0},t.prototype.showPlaneAnimation=function(e){return a(this,void 0,void 0,function(){var t,n,o,r,i,a;return c(this,function(c){switch(c.label){case 0:return t=u.DB_Skin.getBySkinid(e).db_asset,n=t.substring(t.lastIndexOf("/")+1),o=t+"/"+n+"_ske",r=t+"/"+n+"_tex",i=this.plane,[4,s.default.resManager.loadDragonBonesAsset(o)];case 1:return i.dragonAsset=c.sent(),a=this.plane,[4,s.default.resManager.loadDragonBonesAtlasAsset(r)];case 2:return a.dragonAtlasAsset=c.sent(),this.plane.playAnimation("standby",0),[2]}})})},t.prototype.updateCoinLabel=function(){this.gold.string=s.default.gameCtrl.persistance.getCoin().toString()},i([h(dragonBones.ArmatureDisplay)],t.prototype,"plane",void 0),i([h(cc.Label)],t.prototype,"gold",void 0),i([h(cc.Node)],t.prototype,"skinBox",void 0),i([h(cc.Prefab)],t.prototype,"skinPrefab",void 0),i([h(cc.Button)],t.prototype,"videoBtn",void 0),i([h(cc.Button)],t.prototype,"buyBtn",void 0),i([h(cc.Node)],t.prototype,"topBox",void 0),i([h(cc.Node)],t.prototype,"pageViewNode",void 0),i([h(cc.ToggleContainer)],t.prototype,"pageIndicatorToggleContainer",void 0),i([h(cc.Button)],t.prototype,"btn_ads",void 0),i([h(cc.Button)],t.prototype,"btn_coin",void 0),i([h(cc.Button)],t.prototype,"btn_play",void 0),i([h(cc.Prefab)],t.prototype,"coinpre",void 0),i([h(cc.Node)],t.prototype,"coinNode",void 0),i([d],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../App":"App","../../config/Constant":"Constant","../../db/DB_Skin":"DB_Skin","../component/SkinItem":"SkinItem"}],Utils:[function(e,t,n){;cc._RF.push(t,"cb982NxSORLy6ZC0waMATuD","Utils");var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.closure=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.apply(null,o(t,n))}},e.clamp=function(e,t,n){if(t>n){var o=n;n=t,t=o}return e<t?t:e>n?n:e},e.delay=function(e){return new Promise(function(t){setTimeout(t,1e3*e)})},e.formatTime=function(e){return e=Math.floor(e),[Math.floor(e/86400),Math.floor(e/3600)%24,Math.floor(e/60)%60,e%60].filter(function(e,t){return e>0||t>1}).map(function(e){var t=e.toString();return t.length<2?"0"+t:t}).join(":")},e.newDayCheck=function(e,t){var n=new Date(t),o=new Date(e);return t>e&&new Date(n.getFullYear(),n.getMonth(),n.getDate()).valueOf()>new Date(o.getFullYear(),o.getMonth(),o.getDate()).valueOf()},e.atNight=function(e){return e.getHours()>=18||e.getHours()<6},e.fadeIO=function(e,t,n,o){void 0===o&&(o={}),o={cb:o.cb||function(){},delaySeconds:o.delaySeconds||0};var r=n?0:255,i=n?255:0;e.forEach(function(e){return e.opacity=r});var a={opacity:r};cc.tween(a).delay(o.delaySeconds).to(t,{opacity:i},{progress:function(t,n,o,r){var i=t+(n-t)*r;return e.forEach(function(e){e.isValid&&(e.opacity=i)}),i}}).call(o.cb).start()},e.scaleTo=function(e,t,n,o,r){void 0===r&&(r={}),r={cb:r.cb||function(){},bounce:void 0===r.bounce||r.bounce,delaySeconds:r.delaySeconds||0};var i={scale:t};e.forEach(function(e){e.isValid&&(e.scale=t)}),cc.tween(i).delay(r.delaySeconds).to(o,{scale:n},{easing:r.bounce?"backOut":"linear",progress:function(t,n,o,r){var i=t+(n-t)*r;return e.forEach(function(e){e.isValid&&(e.scale=i)}),i}}).call(r.cb).start()},e.moveTo=function(e,t,n,o,r){void 0===r&&(r={}),r={cb:r.cb||function(){},smooth:void 0===r.smooth||r.smooth,delaySeconds:r.delaySeconds||0},e.setPosition(t),cc.tween(e).delay(r.delaySeconds).to(o,{position:n},{easing:r.smooth?"sineOut":"linear"}).call(r.cb).start()},e.moveBy=function(e,t,n,o){void 0===o&&(o={}),o={cb:o.cb||function(){},smooth:void 0===o.smooth||o.smooth,delaySeconds:o.delaySeconds||0},cc.tween(e).delay(o.delaySeconds).by(n,{position:t},{easing:o.smooth?"sineOut":"linear"}).call(o.cb).start()},e.moveFrom=function(e,t,n,o){void 0===o&&(o={}),o={cb:o.cb||function(){},smooth:void 0===o.smooth||o.smooth,delaySeconds:o.delaySeconds||0};var r=e.getPosition();e.setPosition(t),cc.tween(e).delay(o.delaySeconds).to(n,{position:r},{easing:o.smooth?"sineOut":"linear"}).call(o.cb).start()},e.relativePos=function(e,t){return e.getPosition().addSelf(t)},e.shake=function(e,t,n,o){cc.Tween.stopAllByTarget(e),e.setPosition(t);for(var r=cc.tween(e),i=0;i<o;i++){var a=Math.random()*Math.PI*2,c=Math.cos(a)*n,s=Math.sin(a)*n;r.to(.02,{position:cc.v2(c,s)})}r.to(.02,{position:t}),r.start()},e.randomRange=function(e,t){return Math.random()*(t-e)+e},e.randomRangeInt=function(e,t){return Math.floor(this.randomRange(e,t))},e.capture=function(e){var t=new cc.RenderTexture,n=e.width,o=e.height;t.initWithSize(n,o,cc.gfx.RB_FMT_D24S8);var r=e.addComponent(cc.Camera);r.alignWithScreen=!1,r.orthoSize=o/2,r.targetTexture=t;var i=document.createElement("canvas"),a=i.getContext("2d");i.width=n,i.height=o,r.render(e);var c=t.readPixels();e.removeComponent(r);for(var s=4*n,l=0;l<o;l++){for(var u=o-1-l,p=a.createImageData(n,1),f=u*n*4,d=0;d<s;d++)p.data[d]=c[f+d];a.putImageData(p,0,l)}var h=i.toDataURL("image/jpeg");return t.destroy(),h},e.screenCapture=function(e){cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){var t=document.getElementById("GameCanvas").toDataURL("imagea/png");e(t)})},e}();n.default=r,cc._RF.pop()},{}],indexManager:[function(e,t,n){;cc._RF.push(t,"13fdfv+1cBK6K3P7tvGjv/U","indexManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.CollisonManager=n.PlatformManager=n.EventManager=n.ResManager=n.SceneManager=void 0;var o=e("./SceneManager");Object.defineProperty(n,"SceneManager",{enumerable:!0,get:function(){return o.default}});var r=e("./ResManager");Object.defineProperty(n,"ResManager",{enumerable:!0,get:function(){return r.default}});var i=e("./EventManager");Object.defineProperty(n,"EventManager",{enumerable:!0,get:function(){return i.default}});var a=e("./PlatformManager");Object.defineProperty(n,"PlatformManager",{enumerable:!0,get:function(){return a.default}});var c=e("./CollisionManager");Object.defineProperty(n,"CollisonManager",{enumerable:!0,get:function(){return c.default}}),cc._RF.pop()},{"./CollisionManager":"CollisionManager","./EventManager":"EventManager","./PlatformManager":"PlatformManager","./ResManager":"ResManager","./SceneManager":"SceneManager"}]},{},["App","BaseBehavier","BaseUI","ButtonScript","GameSwitchorScript","JsonData","MovePath","Singleton","Utils","ConfigPreload","Constant","ComponentCtrl","GameCtrl","DB_Level","DB_Path","DB_Skin","DB_Stage","DB_Team","DB_Unit","CollisionManager","EventManager","PLConstant","PlatformManager","ResManager","SceneManager","indexManager","CompDB","GameDB","Persistance","Http","IService","LocalService","RemoteService","ServiceFactroy","Battery","BulletItem","Enemy","Flyer","LevelCircle","Obstacle","RankItem","ShareHelper","SkinItem","MainScene","PreloadScene","GameOver","GameView","HighestScore","Home","LoadingView","RankList","ReliveView","SettleAccount","SkinView"]);